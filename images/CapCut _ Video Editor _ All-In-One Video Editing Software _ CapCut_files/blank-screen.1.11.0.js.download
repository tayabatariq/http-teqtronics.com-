!function(){"use strict";var M=function(){return(M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function C(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function H(){return{}}function n(e){return"object"==typeof e&&null!==e}function P(e){return"function"==typeof e}var a=function(e,t,n,r){return e.destroyAgent.set(t,n,r)};function f(e,t){return e.initSubject(t)}function U(){return Date.now()}function B(){if("object"==typeof window&&n(window))return window}function I(){if("object"==typeof document&&n(document))return document}function r(){if(B()&&P(window.PerformanceObserver))return window.PerformanceObserver}function o(e,t,n){return e=C(c(e,t),3),t=e[0],e=e[2],t(n),e}var s=function(e,t){return n(e)?M(M({},t),e):!!e&&t},i=["resource"],u=["longtask"],c=function(t,o,n){var r=t&&new t(function(e,r){e.getEntries?e.getEntries().forEach(function(e,t,n){return o(e,t,n,r)}):n&&n()});return[function(e){if(!t||!r)return n&&n();try{r.observe({entryTypes:e})}catch(e){return n&&n()}},function(e){if(!t||!r)return n&&n();try{r.observe({type:e,buffered:!0})}catch(e){return n&&n()}r.observe({type:e,buffered:!1})},function(){return r&&r.disconnect()}]},l=["longtask_0",function(e,t){var n=r();n&&t(o(n,e,u))}],d=["resource_0",function(e,t){var n=r();n&&t(o(n,e,i))}],N="js_error",Y="http",G="resource_error",F="blank_screen";function z(e,t){return~v.indexOf(e.tagName)||h<t}function W(e){return{width:(e=e.getBoundingClientRect()).width,height:e.height,top:e.top}}function $(e){return e?document.querySelector(e):document.body}function J(n,r,e,o){if(void 0===r&&(r=0),void 0===e&&(e=0),void 0===o&&(o=1.5),!n||z(n,r)||o<=e)return e;var t=function(){if(!r)return 0;var e=W(n),t=e.top,e=e.height;return t>innerHeight||e<=0?0:1/Math.pow(2,r-1)}();return[].reduceRight.call(n.children,function(e,t){return J(t,r+1,e,o)},e+t)}var m=["unload_0",function(e,t){var n,r,o,i,u,c=B();c&&(n=C((r=e,o=!1,[function(e){o||(o=!0,r&&r(e))}]),1)[0],u=function(){n()},(i=["unload","beforeunload","pagehide"]).forEach(function(e){c.addEventListener(e,u)}),t(function(){i.forEach(function(e){c.removeEventListener(e,u)})}))}],p=["domLoad_1",function(e,t){var n,r,o=B(),i=I();o&&i&&(n=!1,r=function(){setTimeout(function(){e(),n=!0},0)},"loading"!==i.readyState?r():o.addEventListener("DOMContentLoaded",r,!1),t(function(){o.removeEventListener("DOMContentLoaded",r,!1)},function(e){n&&e()}))}],v=["SCRIPT","STYLE","META","HEAD"],K=[N,Y,G],h=4,Q=["performance","performance_longtask","performance_timing","custom"];function V(e){var n=e.cb,t=e.screenshotUrl,r=e.window,o=e.document,i=e.mask,u=e.partialShot,c=e.quality,a=e.rootSelector;if(B()&&"Promise"in window&&Promise&&r&&o){if(r.html2canvas)return f(),0;e=o.createElement("script");e.src=t,null!==(t=o.head)&&void 0!==t&&t.appendChild(e),e.onload=f}function f(){var t;((t=r).requestIdleCallback||function(e){return t.setTimeout(e,1)})(function(){r.html2canvas&&r.html2canvas(u&&a&&o.querySelector(a)||o.body,{scale:360/r.innerWidth,mask:i}).then(function(e){n("data:image"===(e=e.toDataURL("image/jpeg",c)).slice(0,10)?e:function(e,t){void 0===e&&(e=192);void 0===t&&(t=108);var n=document.createElement("canvas");n.width=e,n.height=t;var r=n.getContext("2d");r&&(r.fillStyle="#ffffff",r.fillRect(0,0,e,t));return n.toDataURL("image/jpeg")}())})})}}var y=function(n,o,e,t){function r(e,t){o.forEach(function(e){return e()}),o.length=0,a&&n({ev_type:F,payload:{timestamp:a[0],score:a[1],screenshot:t,error:f,serialized_dom:function n(e,r,t){if(void 0===r&&(r=0),void 0===t&&(t=!0),!e||z(e,r))return"";var o=M(M({},W(e)),{id:e.getAttribute("id"),class:e.getAttribute("class")}),i=Object.keys(o).reduce(function(e,t){return e+("number"==typeof o[t]||o[t]?" "+t+'="'+o[t]+'"':"")},""),u=e.tagName.toLowerCase(),e=[].reduce.call(e.children,function(e,t){return e+n(t,r+1,!1)},"");return"<"+u+i+(t?' innerHeight="'+innerHeight+'"':"")+">"+e+"</"+u+">"}($(_))},overrides:{timestamp:e||a[0]}})}function i(){s&&clearTimeout(s),s=L.setTimeout(function(){l=D(function(){var e=$(_);e&&((e=J(e,0,0,b))<b?(a=[U(),e],x()):a=void 0)})},1e3)}var u,c,a,f,s,l,d,m,p,v=C(e,4),h=v[0],y=v[1],g=v[2],e=v[3],b=t.threshold,w=t.screenshot,_=t.rootSelector,v=t.autoDetect,S=t.ssUrl,E=t.quality,R=t.mask,T=t.partialShot,L=B(),k=I(),D=L.requestAnimationFrame||H,O=L.cancelAnimationFrame||H,A=C((u=performance,[c=u&&u.timing||void 0,function(){return u&&u.now?u.now():(Date.now?Date.now():+new Date)-(c&&c.navigationStart||0)},function(e){var t=(u||{}).getEntriesByType;return P(t)&&t.call(u,e)||[]},function(){var e=(u||{}).clearResourceTimings;P(e)&&e.call(u)},function(e){var t=(u||{}).getEntriesByName;return P(t)&&t.call(u,e)||[]}]),2)[1],j=0,q=!1,x=(m=function(){a&&!q&&(q=!0,w?V({cb:r.bind(null,U()),screenshotUrl:S,window:L,document:k,mask:R,partialShot:T,quality:E,rootSelector:_}):r())},function(){d||(p=U(),d=L.setTimeout(function(){d=0,(p<j?i:m)()},1e4<A()?2e3:8e3))});return o.push(e[0](function(){!q&&f&&r()})),v&&o.push(h[0](function(){var e,n,e=C((e=function(){if(B()&&P(window.MutationObserver))return window.MutationObserver}(),t=i,n=e&&new e(t),[function(e,t){n&&e&&n.observe(e,t)},function(){return n&&n.disconnect()}]),2),t=e[0],r=e[1];o.push(function(){clearTimeout(s),clearTimeout(d),O(l),r&&r()}),t(null===(t=I())||void 0===t?void 0:t.body,{subtree:!0,childList:!0}),o.push(y()[0](function(){s&&i()})),o.push(g()[0](function(){s&&i()})),i()})),[function(e){q||~Q.indexOf(e.ev_type)||(j=U(),f=function(e,t){if(-1===K.indexOf(t.ev_type))return e;if(t.ev_type===Y&&t.payload.response.status<400)return e;if(e&&K.indexOf(e.type)<K.indexOf(t.ev_type))return e;var n="";switch(t.ev_type){case N:n=t.payload.error.message;break;case Y:n=t.payload.request.url;break;case G:n=t.payload.url}return{type:t.ev_type,message:n,timestamp:U()}}(f=f&&1e4<j-f.timestamp?void 0:f,e))},i]},g="blankScreen";function b(i,u,c){i.on("init",function(){var t,e,n,r=I(),o=B();r&&o&&(e=g,r=u,e=null===(o=(o=i).config())||void 0===o?void 0:o.plugins[e],(e=s(e,r)||s(c,u))&&(r=[],e=C(y(i.report.bind(i),r,[f(i,p),function(){return f(i,l)},function(){return f(i,d)},f(i,m)],e),2),t=e[0],e=e[1],i.on("report",n=function(e){return t(e),e}),r.push(function(){i.off("report",n)}),a(i,g,F,r),i.provide("detectBlankScreen",e)))})}var e,t,w,_={autoDetect:!0,threshold:1.5,screenshot:!0,ssUrl:"https://sf16-short-va.bytedapm.com/slardar/fe/sdk-web/screenshot.min.js",mask:!1,partialShot:!1,quality:.1};t=(null===(e=function(){if(!document)return null;if(document.currentScript)return document.currentScript;try{throw new Error}catch(e){var t=0,n=/at\s+(.*)\s+\((.*):(\d*):(\d*)\)/i.exec(e.stack),r=n&&n[2]||!1,o=n&&n[3]||0,i=document.location.href.replace(document.location.hash,""),u="",c=document.getElementsByTagName("script");for(r===i&&(n=document.documentElement.outerHTML,o=new RegExp("(?:[^\\n]+?\\n){0,"+(o-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),u=n.replace(o,"$1").trim());t<c.length;t++){if("interactive"===c[t].readyState)return c[t];if(c[t].src===r)return c[t];if(r===i&&c[t].innerHTML&&c[t].innerHTML.trim()===u)return c[t]}return null}}())||void 0===e?void 0:e.getAttribute("src"))||"",(w=I())&&t&&((w=w.createElement("a")).href=t,"/"!==(t=w.pathname||"/")[0]&&(t="/"+t),w.href,w.protocol.slice(0,-1),w.hostname,w.search.substring(1),w.hash);var S,E,R,T,L="1.11.0";S=g,E=function(e,t){b(e,_,t)},(R=void 0===R?function(e){if(e)return e.__SLARDAR_REGISTRY__||(e.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),e.__SLARDAR_REGISTRY__.Slardar}(B()):R)&&R.plugins&&(T=S,R.plugins.filter(function(e){return e.name===T&&e.version===L})[0]||R.plugins.push({name:S,version:L,apply:E}))}();
