"use strict";(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([["7259"],{237359:function(e,t,i){e.exports=i.p+"static/wasm/ec2c213414697752.module.wasm"},742135:function(e,t,i){e.exports=i.p+"static/wasm/79427f8ca2d4f3a8.module.wasm"},853277:function(e,t,i){i.d(t,{U:function(){return n}});var r,n=((r={})[r.Test=0]="Test",r[r.BATCH_API=1]="BATCH_API",r[r.CONFIG=100]="CONFIG",r[r.SET_META=101]="SET_META",r[r.SET_DOCUMENT_METADATA=102]="SET_DOCUMENT_METADATA",r[r.SET_DOCUMENT_PROPERTY=103]="SET_DOCUMENT_PROPERTY",r[r.SET_CANVAS_CONFIG=104]="SET_CANVAS_CONFIG",r[r.SET_CANVAS_BACKGROUND=105]="SET_CANVAS_BACKGROUND",r[r.ENSURE_DRAFT_CANVAS_SIZE=106]="ENSURE_DRAFT_CANVAS_SIZE",r[r.SET_COVER=107]="SET_COVER",r[r.CLEAR_COVER=108]="CLEAR_COVER",r[r.ADD_PLACEHOLDER_OPERATION=109]="ADD_PLACEHOLDER_OPERATION",r[r.ADD_TRACK=200]="ADD_TRACK",r[r.SET_DRAFT=201]="SET_DRAFT",r[r.CLEAR_DRAFT=202]="CLEAR_DRAFT",r[r.DELETE_TRACK=203]="DELETE_TRACK",r[r.TRACK_MUTE=204]="TRACK_MUTE",r[r.TRACK_MUTE_ADJUST=205]="TRACK_MUTE_ADJUST",r[r.TRACK_MUTE_MAIN=206]="TRACK_MUTE_MAIN",r[r.INSERT_SEGMENT=300]="INSERT_SEGMENT",r[r.REMOVE_SEGMENTS=301]="REMOVE_SEGMENTS",r[r.SPLIT_SEGMENT=302]="SPLIT_SEGMENT",r[r.MOVE_SEGMENT=303]="MOVE_SEGMENT",r[r.MIRROR_SEGMENT=304]="MIRROR_SEGMENT",r[r.SEGMENT_TRANSLATE=305]="SEGMENT_TRANSLATE",r[r.SEGMENT_SCALE=306]="SEGMENT_SCALE",r[r.SEGMENT_DUPLICATE=307]="SEGMENT_DUPLICATE",r[r.SEGMENT_ROTATE=308]="SEGMENT_ROTATE",r[r.SEGMENT_SET_TARGET_TIMERANGE=309]="SEGMENT_SET_TARGET_TIMERANGE",r[r.SEGMENT_UPDATE_LAYOUT=310]="SEGMENT_UPDATE_LAYOUT",r[r.UPDATE_SEGMENT_TIME_RANGE=311]="UPDATE_SEGMENT_TIME_RANGE",r[r.SEGMENT_VISIBLE=312]="SEGMENT_VISIBLE",r[r.CUT_SEGMENT=313]="CUT_SEGMENT",r[r.COPY_SEGMENT=314]="COPY_SEGMENT",r[r.PASTE_SEGMENT=315]="PASTE_SEGMENT",r[r.ADD_KEYFRAME=316]="ADD_KEYFRAME",r[r.REMOVE_KEYFRAME=317]="REMOVE_KEYFRAME",r[r.REMOVE_KEYFRAMES=318]="REMOVE_KEYFRAMES",r[r.UPDATE_KEYFRAME=319]="UPDATE_KEYFRAME",r[r.COPY_KEYFRAMES=320]="COPY_KEYFRAMES",r[r.PASTE_KEYFRAMES=321]="PASTE_KEYFRAMES",r[r.MULTI_SEGMENT_TRACK_MODE_PASTE=322]="MULTI_SEGMENT_TRACK_MODE_PASTE",r[r.MULTI_SEGMENT_TRACK_MODE_MOVE=323]="MULTI_SEGMENT_TRACK_MODE_MOVE",r[r.MULTI_VISIBLE_SEGMENT=324]="MULTI_VISIBLE_SEGMENT",r[r.MULTI_CUT_SEGMENT=325]="MULTI_CUT_SEGMENT",r[r.MULTI_PASTE_SEGMENT=326]="MULTI_PASTE_SEGMENT",r[r.MULTI_TRANSFORM_SEGMENT=327]="MULTI_TRANSFORM_SEGMENT",r[r.MULTI_ACTION=328]="MULTI_ACTION",r[r.INNER_UPDATE_SEGMENT=329]="INNER_UPDATE_SEGMENT",r[r.VIDEO_TRACKER_ADD=330]="VIDEO_TRACKER_ADD",r[r.VIDEO_TRACKER_UPDATE=331]="VIDEO_TRACKER_UPDATE",r[r.VIDEO_TRACKER_REMOVE=332]="VIDEO_TRACKER_REMOVE",r[r.SEGMENT_SET_NAME=333]="SEGMENT_SET_NAME",r[r.SEGMENT_SET_DESCRIPTION=334]="SEGMENT_SET_DESCRIPTION",r[r.MULTI_SEGMENTS_SET_TIME_RANGE=335]="MULTI_SEGMENTS_SET_TIME_RANGE",r[r.VIDEO_ADD=400]="VIDEO_ADD",r[r.VIDEO_CROP=401]="VIDEO_CROP",r[r.VIDEO_DENOISE=402]="VIDEO_DENOISE",r[r.VIDEO_PITCH_ON=403]="VIDEO_PITCH_ON",r[r.VIDEO_REVERSE=404]="VIDEO_REVERSE",r[r.VIDEO_AI_MATTING=405]="VIDEO_AI_MATTING",r[r.VIDEO_ALPHA=406]="VIDEO_ALPHA",r[r.VIDEO_BACKGROUND_COLO=407]="VIDEO_BACKGROUND_COLO",r[r.VIDEO_BACKGROUND_BLUR=408]="VIDEO_BACKGROUND_BLUR",r[r.VIDEO_BACKGROUND_IMAGE=409]="VIDEO_BACKGROUND_IMAGE",r[r.VIDEO_BACKGROUND_ALL=410]="VIDEO_BACKGROUND_ALL",r[r.VIDEO_CLEAR_BACKGROUND=411]="VIDEO_CLEAR_BACKGROUND",r[r.VIDEO_SEPARATE_AUDIO=412]="VIDEO_SEPARATE_AUDIO",r[r.VIDEO_SET_SPEED=413]="VIDEO_SET_SPEED",r[r.VIDEO_FADE=414]="VIDEO_FADE",r[r.VIDEO_APPLY_TRANSITION_TO_ALL=415]="VIDEO_APPLY_TRANSITION_TO_ALL",r[r.VIDEO_ADD_TRANSITION=416]="VIDEO_ADD_TRANSITION",r[r.VIDEO_UPDATE_TRANSITION=417]="VIDEO_UPDATE_TRANSITION",r[r.VIDEO_CLEAR_TRANSITION=418]="VIDEO_CLEAR_TRANSITION",r[r.VIDEO_SEGMENT_REMOVE=419]="VIDEO_SEGMENT_REMOVE",r[r.VIDEO_SET_MATERIAL_INFO=420]="VIDEO_SET_MATERIAL_INFO",r[r.VIDEO_MASK=421]="VIDEO_MASK",r[r.VIDEO_REMOVE_MASK=422]="VIDEO_REMOVE_MASK",r[r.VIDEO_UPDATE_MATERIAL=423]="VIDEO_UPDATE_MATERIAL",r[r.VIDEO_SET_BASIC_COLOR=424]="VIDEO_SET_BASIC_COLOR",r[r.VIDEO_SET_VOLUME=425]="VIDEO_SET_VOLUME",r[r.VIDEO_SET_PICTURE_ADJUST_TO_ALL=426]="VIDEO_SET_PICTURE_ADJUST_TO_ALL",r[r.VIDEO_RESET_BASIC_COLOR=427]="VIDEO_RESET_BASIC_COLOR",r[r.VIDEO_RESET_PICTURE_ADJUST_HSL=428]="VIDEO_RESET_PICTURE_ADJUST_HSL",r[r.VIDEO_RESET_PICTURE_ADJUST_CURVES=429]="VIDEO_RESET_PICTURE_ADJUST_CURVES",r[r.VIDEO_RESET_PICTURE_ADJUST=430]="VIDEO_RESET_PICTURE_ADJUST",r[r.VIDEO_MIX=431]="VIDEO_MIX",r[r.VIDEO_REMOVE_SMART_CROP=432]="VIDEO_REMOVE_SMART_CROP",r[r.VIDEO_ADD_DIGITAL_HUMAN=433]="VIDEO_ADD_DIGITAL_HUMAN",r[r.VIDEO_UPDATE_DIGITAL_HUMAN=434]="VIDEO_UPDATE_DIGITAL_HUMAN",r[r.VIDEO_ADD_SMART_CROP=435]="VIDEO_ADD_SMART_CROP",r[r.ADD_ANIMATION=436]="ADD_ANIMATION",r[r.UPDATE_ANIMATION=437]="UPDATE_ANIMATION",r[r.REMOVE_ANIMATION=438]="REMOVE_ANIMATION",r[r.VIDEO_SET_FIGURE=439]="VIDEO_SET_FIGURE",r[r.VIDEO_SET_FIGURE_FACE_ID=440]="VIDEO_SET_FIGURE_FACE_ID",r[r.VIDEO_REMOVE_FIGURE=441]="VIDEO_REMOVE_FIGURE",r[r.VIDEO_SET_CHROMA_COLOR=442]="VIDEO_SET_CHROMA_COLOR",r[r.VIDEO_SET_CHROMA_INTENSITY=443]="VIDEO_SET_CHROMA_INTENSITY",r[r.VIDEO_SET_CHROMA_SHADOW=444]="VIDEO_SET_CHROMA_SHADOW",r[r.VIDEO_SET_CHROMA_SPILL=445]="VIDEO_SET_CHROMA_SPILL",r[r.VIDEO_RESET_CHROMA=446]="VIDEO_RESET_CHROMA",r[r.VIDEO_APPLY_ALL_CHROMA=447]="VIDEO_APPLY_ALL_CHROMA",r[r.VIDEO_SET_SMART_COLOR_ADJUST=448]="VIDEO_SET_SMART_COLOR_ADJUST",r[r.VIDEO_SET_STABLE=449]="VIDEO_SET_STABLE",r[r.VIDEO_SET_ALGORITHMS=450]="VIDEO_SET_ALGORITHMS",r[r.VIDEO_SET_CHROMA_EDGE_SMOOTH=451]="VIDEO_SET_CHROMA_EDGE_SMOOTH",r[r.VIDEO_SET_OBJECT_LOCKED=452]="VIDEO_SET_OBJECT_LOCKED",r[r.VIDEO_ADD_OBJECT_LOCKED=453]="VIDEO_ADD_OBJECT_LOCKED",r[r.VIDEO_UPDATE_OBJECT_LOCKED=454]="VIDEO_UPDATE_OBJECT_LOCKED",r[r.VIDEO_REMOVE_OBJECT_LOCKED=455]="VIDEO_REMOVE_OBJECT_LOCKED",r[r.SET_AUDIO_FADE=500]="SET_AUDIO_FADE",r[r.SET_AUDIO_SPEED=501]="SET_AUDIO_SPEED",r[r.SET_AUDIO_VOICE_EFFECT=502]="SET_AUDIO_VOICE_EFFECT",r[r.SET_AUDIO_VOICE_EFFECT_PARAMS=503]="SET_AUDIO_VOICE_EFFECT_PARAMS",r[r.CLEAR_AUDIO_VOICE_EFFECT=504]="CLEAR_AUDIO_VOICE_EFFECT",r[r.SET_AUDIO_VOICE_EFFECT_TO_ALL=505]="SET_AUDIO_VOICE_EFFECT_TO_ALL",r[r.SET_AUDIO_DENOISE=506]="SET_AUDIO_DENOISE",r[r.SET_AUDIO_MODIFIED_TONE=507]="SET_AUDIO_MODIFIED_TONE",r[r.ADD_AUDIO=508]="ADD_AUDIO",r[r.SET_AUDIO_MATERIAL=509]="SET_AUDIO_MATERIAL",r[r.ADD_AUDIO_BEAT=510]="ADD_AUDIO_BEAT",r[r.REMOVE_AUDIO_BEAT=511]="REMOVE_AUDIO_BEAT",r[r.ADD_TEXT_AUDIO=512]="ADD_TEXT_AUDIO",r[r.ADD_TEXT_ACTION=600]="ADD_TEXT_ACTION",r[r.ADD_SUBTITLES_ACTION=601]="ADD_SUBTITLES_ACTION",r[r.UPDATE_TEXT_MATERIAL_ACTION=602]="UPDATE_TEXT_MATERIAL_ACTION",r[r.UPDATE_TEXT_EFFECT_ACTION=603]="UPDATE_TEXT_EFFECT_ACTION",r[r.UPDATE_TEXT_ANIMATION_ACTION=604]="UPDATE_TEXT_ANIMATION_ACTION",r[r.REMOVE_TEXT_ANIMATION_ACTION=605]="REMOVE_TEXT_ANIMATION_ACTION",r[r.REMOVE_TEXT_AUDIOS=606]="REMOVE_TEXT_AUDIOS",r[r.ADD_TEXT_TEMPLATE_ACTION=607]="ADD_TEXT_TEMPLATE_ACTION",r[r.RESET_TEXT_ACTION=608]="RESET_TEXT_ACTION",r[r.UPDATE_TEXT_CONTENT_ACTION=609]="UPDATE_TEXT_CONTENT_ACTION",r[r.ADJUST_TEXT_FIXED_SIZE_ACTION=610]="ADJUST_TEXT_FIXED_SIZE_ACTION",r[r.UPDATE_TEXT_TEMPLATE_ACTION=611]="UPDATE_TEXT_TEMPLATE_ACTION",r[r.UPDATE_TEXT_TEMPLATE_TEXT_ACTION=612]="UPDATE_TEXT_TEMPLATE_TEXT_ACTION",r[r.UPDATE_TEXT_TEMPLATE_TEXT_MATERIAL_ACTION=613]="UPDATE_TEXT_TEMPLATE_TEXT_MATERIAL_ACTION",r[r.UPDATE_TEXT_TEMPLATE_TEXT_ANIM_ACTION=614]="UPDATE_TEXT_TEMPLATE_TEXT_ANIM_ACTION",r[r.REMOVE_TEXT_TEMPLATE_TEXT_ANIM_ACTION=615]="REMOVE_TEXT_TEMPLATE_TEXT_ANIM_ACTION",r[r.UPDATE_TEXT_TEMPLATE_TEXT_ANIM_VALUE_ACTION=616]="UPDATE_TEXT_TEMPLATE_TEXT_ANIM_VALUE_ACTION",r[r.TEXT_CHANGE_CONVERT_CASE_ACTION=617]="TEXT_CHANGE_CONVERT_CASE_ACTION",r[r.UPDATE_SUBTITLE_TEMPLATE=618]="UPDATE_SUBTITLE_TEMPLATE",r[r.RESET_SUBTITLE_TEMPLATE=619]="RESET_SUBTITLE_TEMPLATE",r[r.UPDATE_TEXT_EFFECT=620]="UPDATE_TEXT_EFFECT",r[r.STICKER_ADD=700]="STICKER_ADD",r[r.ADJUSTMENT_ADD=800]="ADJUSTMENT_ADD",r[r.ADD_EFFECT=900]="ADD_EFFECT",r[r.UPDATE_EFFECT_ADJUST_PARAMS=901]="UPDATE_EFFECT_ADJUST_PARAMS",r[r.RESET_EFFECT_ADJUST_PARAMS=902]="RESET_EFFECT_ADJUST_PARAMS",r[r.FILTER_ADD=1e3]="FILTER_ADD",r[r.FILTER_UPDATE=1001]="FILTER_UPDATE",r[r.FILTER_REPLACE=1002]="FILTER_REPLACE",r[r.FILTER_RESET=1003]="FILTER_RESET",r[r.SET_AUDIO_VOCAL_SEPARATION=1004]="SET_AUDIO_VOCAL_SEPARATION",r[r.UPDATE_AUDIO_VOCAL_SEPARATION=1005]="UPDATE_AUDIO_VOCAL_SEPARATION",r[r.REMOVE_AUDIO_VOCAL_SEPARATION=1006]="REMOVE_AUDIO_VOCAL_SEPARATION",r[r.SET_AUDIO_VOCAL_BEAUTIFY=1007]="SET_AUDIO_VOCAL_BEAUTIFY",r[r.UPDATE_AUDIO_VOCAL_BEAUTIFY=1008]="UPDATE_AUDIO_VOCAL_BEAUTIFY",r[r.RESET_AUDIO_VOCAL_BEAUTIFY=1009]="RESET_AUDIO_VOCAL_BEAUTIFY",r[r.REMOVE_AUDIO_VOCAL_BEAUTIFY=1010]="REMOVE_AUDIO_VOCAL_BEAUTIFY",r[r.TEMPLATE_REPLACE_VIDEO=1100]="TEMPLATE_REPLACE_VIDEO",r[r.TEMPLATE_CHANGE_VIDEO_SPEED=1101]="TEMPLATE_CHANGE_VIDEO_SPEED",r[r.TEMPLATE_SET_VIDEO_VOLUME_ACTION=1102]="TEMPLATE_SET_VIDEO_VOLUME_ACTION",r[r.TEMPLATE_REPLACE_AUDIO=1103]="TEMPLATE_REPLACE_AUDIO",r[r.ADD_TEMPLATE_COMBINATION_ACTION=1104]="ADD_TEMPLATE_COMBINATION_ACTION",r[r.UPDATE_COMBINATION_ACTION=1105]="UPDATE_COMBINATION_ACTION",r[r.SET_TEMPLATE_COMBINATION_SIZE_ACTION=1106]="SET_TEMPLATE_COMBINATION_SIZE_ACTION",r[r.ATTACHMENT_INSERT_ASYNC_TASK_ENTITIES=1200]="ATTACHMENT_INSERT_ASYNC_TASK_ENTITIES",r[r.ATTACHMENT_REMOVE_ASYNC_TASK_ENTITIES=1201]="ATTACHMENT_REMOVE_ASYNC_TASK_ENTITIES",r[r.ATTACHMENT_UPDATE_ASYNC_TASK_ENTITIES_STATUS=1202]="ATTACHMENT_UPDATE_ASYNC_TASK_ENTITIES_STATUS",r[r.ATTACHMENT_INSERT_VIDEO_ALGORITHMS=1203]="ATTACHMENT_INSERT_VIDEO_ALGORITHMS",r[r.ATTACHMENT_REMOVE_VIDEO_ALGORITHMS=1204]="ATTACHMENT_REMOVE_VIDEO_ALGORITHMS",r[r.ATTACHMENT_UPDATE_VIDEO_ALGORITHM=1205]="ATTACHMENT_UPDATE_VIDEO_ALGORITHM",r[r.ATTACHMENT_INSERT_AI_WRITER_INFOS=1206]="ATTACHMENT_INSERT_AI_WRITER_INFOS",r[r.ATTACHMENT_REMOVE_AI_WRITER_INFOS=1207]="ATTACHMENT_REMOVE_AI_WRITER_INFOS",r[r.ATTACHMENT_UPDATE_AI_WRITER_INFO=1208]="ATTACHMENT_UPDATE_AI_WRITER_INFO",r[r.ATTACHMENT_DELETE_AI_STORY_ALTERNATIVE=1209]="ATTACHMENT_DELETE_AI_STORY_ALTERNATIVE",r[r.ATTACHMENT_ADD_AI_STORY_ALTERNATIVE_MATERIALS=1210]="ATTACHMENT_ADD_AI_STORY_ALTERNATIVE_MATERIALS",r[r.ATTACHMENT_DELETE_AI_STORY_ALTERNATIVE_MATERIALS=1211]="ATTACHMENT_DELETE_AI_STORY_ALTERNATIVE_MATERIALS",r[r.ATTACHMENT_UPDATE_AI_STORY_ALTERNATIVE_MATERIAL=1212]="ATTACHMENT_UPDATE_AI_STORY_ALTERNATIVE_MATERIAL",r[r.ATTACHMENT_REPLACE_AI_STORY_ALTERNATIVE_MATERIAL=1213]="ATTACHMENT_REPLACE_AI_STORY_ALTERNATIVE_MATERIAL",r[r.ATTACHMENT_PIN_AI_STORY_ALTERNATIVE_MATERIAL=1214]="ATTACHMENT_PIN_AI_STORY_ALTERNATIVE_MATERIAL",r[r.ATTACHMENT_UPDATE_MOVE_FEEDS_TO_ALTERNATIVE=1215]="ATTACHMENT_UPDATE_MOVE_FEEDS_TO_ALTERNATIVE",r[r.ATTACHMENT_UPDATE_AI_STORY_GLOBAL_CONFIG_CHARACTER=1216]="ATTACHMENT_UPDATE_AI_STORY_GLOBAL_CONFIG_CHARACTER",r[r.ATTACHMENT_DELETE_AI_STORY_GLOBAL_CONFIG_CHARACTERS=1217]="ATTACHMENT_DELETE_AI_STORY_GLOBAL_CONFIG_CHARACTERS",r[r.ATTACHMENT_UPDATE_AI_STORY_GLOBAL_ID=1218]="ATTACHMENT_UPDATE_AI_STORY_GLOBAL_ID",r[r.ATTACHMENT_SET_CREATOR_CONTENT=1219]="ATTACHMENT_SET_CREATOR_CONTENT",r[r.UPDATE_DRAFT_AIGC_WATERMARK=1220]="UPDATE_DRAFT_AIGC_WATERMARK",r);Object.keys(n).reduce((e,t)=>({...e,[n[t]]:t}),{})},505735:function(e,t,i){i.d(t,{s:function(){return c}});var r=i(150002),n=i(853277),a=i(211561),o=i(129862),s=i(770868),l=i(690613),u=i(481631),d=i(283751);class c extends r.a{get type(){return n.U.REMOVE_AUDIO_BEAT}check(e){return(0,l.ly)()}do(e,t,i){let r=this.options.segmentId,n=t.getSegmentById(r);if(!n||!(0,u.Y9)(n)||!n.beat)return;if(this.options.removeAllBeats||this.options.removeAiBeats){let i=new a.CCx,s=new a.NZo;i.beat=s,this.options.removeAllBeats&&(s.userDeleteAiBeats=null,s.userBeats=[]),this.options.removeAiBeats&&(s.userDeleteAiBeats=null),s.enableAiBeats=!1;let l=(0,u.xX)({__segment_struct_type:n.__segment_struct_type});d.T.pick(n,i,l),e(new o.F({segmentDelta:i,segmentId:r,trackId:t.getTrackBySegmentId(r,[]).id,trackIndex:t.getTrackIndexBySegmentId(r),sourceSegmentDelta:l}))}if(this.options.removedBeats.length>0){let i=n.beat.clone(),l=s.z.getInstance().getUserDeleteAiBeats(t,i,n.id,e,!0),c=i.userDeleteAiBeats,_=[...n.beat.userBeats];for(let i of this.options.removedBeats)if(_.includes(i))_=_.filter(e=>e!==i);else if(n.beat.enableAiBeats&&(l.push(i),c)){let i=new a.CCx,s=new a.NZo;i.beat=s,s.userDeleteAiBeats=new a.bAm(c);let l=(0,u.xX)({__segment_struct_type:n.__segment_struct_type});d.T.pick(n,i,l),e(new o.F({segmentDelta:i,segmentId:n.id,trackId:t.getTrackBySegmentId(n.id,[]).id,trackIndex:t.getTrackIndexBySegmentId(r),sourceSegmentDelta:l}))}let m=new a.CCx,h=new a.NZo;m.beat=h,h.userBeats=_;let p=(0,u.xX)({__segment_struct_type:n.__segment_struct_type});d.T.pick(n,m,p),e(new o.F({segmentDelta:m,segmentId:n.id,trackId:t.getTrackBySegmentId(n.id,[]).id,trackIndex:t.getTrackIndexBySegmentId(r),sourceSegmentDelta:p}))}let l=new a.CCx,c=new a.NZo(n.beat);l.beat=c;let _=(0,u.xX)({__segment_struct_type:n.__segment_struct_type});d.T.pick(n,l,_),e(new o.F({segmentDelta:l,segmentId:n.id,trackId:t.getTrackBySegmentId(n.id,[]).id,trackIndex:t.getTrackIndexBySegmentId(r),sourceSegmentDelta:_}))}}},664543:function(e,t,i){i.d(t,{B:function(){return p}});var r=i(475028),n=i(690613),a=i(211561),o=i(481631),s=i(129862),l=i(150002),u=i(853277),d=i(653322),c=i(283751);let _=(0,r.i)(d.H.SetAudioDenoiseSegmentNotExist,""),m=(0,r.i)(d.H.SetAudioDenoiseSegmentTypeNotValid,""),h=(0,r.i)(d.H.SetAudioDenoisePathEmpty,"");class p extends l.a{get type(){return u.U.SET_AUDIO_DENOISE}check(e){let{segmentIds:t,isDenoise:i,path:r}=this.options;for(let i of t){let t=e.getSegmentById(i);if(!t)return _(`segment not exist: ${i}`);if(!(0,o.Y9)(t))return m(`segmentType not valid: ${t.__segment_struct_type}`)}return i&&!r?h("path empty"):(0,n.ly)()}do(e,t,i){let{segmentIds:r}=this.options;for(let i of r){let r=t.getSegmentNodeById(i,[]).trackNode.track.id,n=new a.CCx,l=new a.tpe;n.realtimeDenoise=l,l.path=this.options.path,l.isDenoise=this.options.isDenoise,l.denoiseMode=this.options.denoiseMode,l.denoiseRate=this.options.denoiseRate,l.samiName=this.options.samiName,l.samiVersion=this.options.samiVersion,l.samiType=this.options.samiType;let u=t.getSegmentById(i),d=(0,o.xX)({__segment_struct_type:u.__segment_struct_type});c.T.pick(u,n,d),e(new s.F({trackId:r,trackIndex:t.getTrackIndexBySegmentId(i),segmentId:i,segmentDelta:n,sourceSegmentDelta:d}))}}constructor(e){var t,i,r,n,a;super({segmentIds:e.segmentIds,isDenoise:e.isDenoise,path:e.path,denoiseMode:null!==(t=e.denoiseMode)&&void 0!==t?t:1,denoiseRate:null!==(i=e.denoiseRate)&&void 0!==i?i:1,samiName:null!==(r=e.samiName)&&void 0!==r?r:"denoise_v2",samiVersion:null!==(n=e.samiVersion)&&void 0!==n?n:"1.0",samiType:null!==(a=e.samiType)&&void 0!==a?a:0})}}},103610:function(e,t,i){i.d(t,{Y:function(){return h}});var r=i(475028),n=i(690613),a=i(211561),o=i(481631),s=i(129862),l=i(150002),u=i(853277),d=i(653322),c=i(283751);let _=(0,r.i)(d.H.SetAudioVoiceEffectToAllSegmentNotExist,""),m=(0,r.i)(d.H.SetAudioVoiceEffectToAllSegmentTypeNotValid,"");class h extends l.a{get type(){return u.U.SET_AUDIO_VOICE_EFFECT_TO_ALL}check(e){let{segmentId:t}=this.options,i=e.getSegmentById(t);return i?(0,o.Y9)(i)||(0,o.he)(i)?(0,n.ly)():m(`segmentType not valid: ${i.__segment_struct_type}`):_(`segment not exist: ${t}`)}do(e,t,i){let{segmentId:r}=this.options,n=t.getSegmentById(r);for(let i of t.getSegmentsByTrackTypes([(0,o.Y9)(n)?a.pNd.TrackTypeAudio:a.pNd.TrackTypeVideo])){var l,u,d,_;if(i.id===r)continue;let m=(0,o.Y9)(n)?new a.CCx:new a.NOn;if(n.voiceChange&&n.voiceChange.length>0){let e=new a.Yy;m.voiceChange=[e],this._setVoiceChange(e,n.voiceChange[0])}else m.voiceChange=null;if((null===(u=i.voiceChange)||void 0===u?void 0:null===(l=u[0])||void 0===l?void 0:l.resourceId)!==(null===(_=n.voiceChange)||void 0===_?void 0:null===(d=_[0])||void 0===d?void 0:d.resourceId)){let{newCommonKeyframes:e,isChange:t}=this._getNewCommonKeyframes(i,[a.Eu.KFTypeEffectAdjustParam1,a.Eu.KFTypeEffectAdjustParam2,a.Eu.KFTypeEffectAdjustParam3]);t&&(m.commonKeyframes=e)}let h=t.getTrackBySegmentId(i.id,[]),p=(0,o.xX)({__segment_struct_type:n.__segment_struct_type});c.T.pick(n,m,p),e(new s.F({trackId:h.id,trackIndex:t.getTrackIndexBySegmentId(i.id),segmentId:i.id,segmentDelta:m,sourceSegmentDelta:p}))}}_setVoiceChange(e,t){for(let i of(e.name=t.name,e.path=t.path,e.resourceId=t.resourceId,e.categoryId=t.categoryId,e.categoryName=t.categoryName,e.productionPath=t.productionPath,e.subType=t.subType,e.speakerId=t.speakerId,e.sourcePlatform=t.sourcePlatform,e.thirdResourceId=t.thirdResourceId,e.audioAdjustParams=[],t.audioAdjustParams))e.audioAdjustParams.push(new a.t55({name:i.name,value:i.defaultValue,defaultValue:i.defaultValue,parameterIndex:i.parameterIndex,portIndex:i.portIndex,minValue:i.minValue,maxValue:i.maxValue}))}_getNewCommonKeyframes(e,t){let i=[],r=!1;for(let n of e.commonKeyframes){if(t.includes(n.propertyType)){r=!0;continue}i.push(n)}return{newCommonKeyframes:i,isChange:r}}}},366566:function(e,t,i){i.d(t,{I:function(){return p}});var r=i(417273),n=i(150002),a=i(853277),o=i(700857),s=i(744207),l=i(211561),u=i(268468),d=i(475028),c=i(690613),_=i(653322);let m=(0,d.i)(_.H.SetCoverActionDurationError,""),h=(0,d.i)(_.H.SetCoverActionImgaeInfoError,"");class p extends n.a{get type(){return p.type}check(e){return 0n===this.options.duration?m("dutation can not be 0"):this._checkImageInfo()?(0,c.ly)():h(`imageInfo is error. info: ${JSON.stringify(this.options.imageInfo)}`)}do(e,t){let{graphicDraftPath:i,imageInfo:r,duration:n}=this.options,a=this._generateSubVideoDocument(r,n),d=new s.k({type:l._6S.CoverTypeImage});d.coverDraft=new l.rdD({draft:a});let c=new u.ry;c.retouchCover=""===i?new l.Dqu:new l.Dqu({retouchWebPath:i,baseType:l._6S.CoverTypeImage,imagePath:r.path}),c.cover=d,c.staticCoverImagePath=r.path,e(new o.W({propertyDelta:c}))}_checkImageInfo(){let{imageInfo:e}=this.options;return!!e.name&&!(e.width<=0)&&!(e.height<=0)&&!!e.path&&!0}_generateSubVideoDocument(e,t){let i=new r.pN,n=new u.wO({type:l.pNd.TrackTypeVideo,flag:l.w9k.FlagNone}),a=new l.UbL({path:e.path,type:l.cVg.MetaTypeImage,width:e.width,height:e.height,hasAudio:!1,materialName:e.name,duration:t}),o=new l._6D({material:a,targetTimerange:new l.tnv({start:0n,duration:t}),sourceTimerange:new l.tnv({start:0n,duration:t})});return n.segments.push(o),i.insertTrack(0,n),i}}p.type=a.U.SET_COVER},288947:function(e,t,i){i.d(t,{s:function(){return _}});var r=i(150002),n=i(853277),a=i(700857),o=i(310693),s=i(690613),l=i(268468),u=i(646290),d=i(333217),c=i(599446);class _ extends r.a{get type(){return _.type}check(e){return(0,s.ly)()}do(e,t){let i=new o.h;i.recoveryDraft(this.options.draft),e(new a.W({propertyDelta:new l.ry(i.draftView.getDraftProperty())})),e(new u.e({metadataDelta:new l.UK(i.draftView.getDraftMetadata())}));let r=i.draftView.getAllTracks();for(let i=0;i<r.length;i++){e(new d.c({trackIndex:i,trackProperty:r[i]}));for(let n=0;n<r[i].segments.length;n++)e(new c._({draftId:t.getDraftId(),trackId:r[i].id,trackIndex:i,segment:r[i].segments[n]}))}}}_.type=n.U.SET_DRAFT},11440:function(e,t,i){i.d(t,{s:function(){return s}});var r=i(150002),n=i(853277),a=i(700857),o=i(690613);class s extends r.a{get type(){return s.type}check(e){return(0,o.ly)()}do(e,t){let{propertyDelta:i,draftId:r}=this.options;e(new a.W({propertyDelta:i,draftId:r}))}}s.type=n.U.SET_DOCUMENT_PROPERTY},218008:function(e,t,i){i.d(t,{i:function(){return y}});var r=i(150002),n=i(862213),a=i(602777),o=i(481631),s=i(340294),l=i(333217),u=i(268468),d=i(211561),c=i(287165),_=i(552261),m=i(217201),h=i(81649),p=i(187198);function g(e,t){let i=[0n,0n];return e[0]<t[1]&&t[0]<e[1]&&(i[0]=s.pM.max([e[0],t[0]],"bigint"),i[1]=s.pM.min([e[1],t[1]],"bigint")),i}function f(e){let{timeRanges:t,info:i,trackIndex:r,draftView:n,callback:o}=e;t.forEach(e=>{let t=new d._6D;t.id=(0,c.p)(),t.renderIndex=_.ni,t.clip.scale.x=i.watermarkImgScale,t.clip.scale.y=i.watermarkImgScale,t.clip.transform.x=i.watermarkOffsetX,t.clip.transform.y=i.watermarkOffsetY,t.material.path=i.watermarkImgPath,t.material.duration=e.duration,t.sourceTimerange.start=0n,t.sourceTimerange.duration=new p.Tn().getMaterialPhotoMaxDuration(),t.targetTimerange.start=e.start,t.targetTimerange.duration=e.duration,t.material.type=a.cV.MetaTypePhoto;let s=new m.vp(a.pN.TrackTypeVideo,r,a.w9.FlagSubVideo);m.c8.insertSegmentHelper(n,t,s,o)})}function T(e,t,i){for(let r of e.getAllTracks())for(let e of r.segments)if((0,o.he)(e)&&e.material.isAiGenerateContent||(0,o.Y9)(e)&&e.material.isAiCloneTone&&e.visible){let r=e.targetTimerange;i.push({start:r.start+t,duration:r.duration})}}class y extends r.a{get type(){return y.type}do(e,t){var i,r,n;let d=[],{isRemoveWatermark:c}=this.options.info,_=t.getAllTracks(),m=_.length;if(c)return f({timeRanges:d,info:this.options.info,trackIndex:m,draftView:t,callback:e});for(let e of(T(t,0n,d),_)){if(!![a.pN.TrackTypeAdCube,a.pN.TrackTypeVideo,a.pN.TrackTypeAudio].includes(e.type))for(let r of e.segments){;if((0,o.Um)(r)&&r.material.draft){let e=r.material.draft.getDraftId(),i=t.getDraftById(e);i&&T(i,r.targetTimerange.start,d)}else((0,o.he)(r)||(0,o.Y9)(r))&&(null===(i=r.materialDraft)||void 0===i?void 0:i.draft)&&!function(e,t,i,r,n,l){let u=i.start,d=new h.O1(t),c=[i.start,i.start+i.duration],_=[r.start,r.start+r.duration];for(let t of e.getAllTracks()){let e;if(!![a.pN.TrackTypeVideo,a.pN.TrackTypeAudio].includes(t.type))for(let i of t.segments){if(((0,o.he)(i)&&i.material.isAiGenerateContent||(0,o.Y9)(i)&&i.material.isAiCloneTone&&i.visible)&&(e=i.targetTimerange),!e)continue;let[t,r]=g([e.start,e.start+e.duration],_);if(t===r||t<0||r<0)continue;t-=_[0],r-=_[0],n>0&&(t=d.gen(s.pM.div(t,n,"bigint")).round,r=d.gen(s.pM.div(r,n,"bigint")).round);let a=g([t+u,r+u],c),m={start:a[0],duration:a[1]-a[0]};l.push(m)}}}(r.materialDraft.draft,t.getDraftProperty().fps,r.targetTimerange,r.sourceTimerange,r.speed.speed,d)}}if(d.length>=0){let t=new u.wO;t.type=a.pN.TrackTypeVideo,t.flag=a.w9.FlagSubVideo,e(new l.c({trackIndex:m,trackProperty:t}))}if(d.length<=1)return f({timeRanges:d,info:this.options.info,trackIndex:m,draftView:t,callback:e});let p=[];d.sort((e,t)=>e.start<t.start?-1:1);let y=d[0];for(let e=1;e<d.length;e+=1){;let t=d[e];if(r=y,n=t,r.start<n.start+n.duration&&n.start<r.start+r.duration){let e=s.pM.min([y.start,t.start],"bigint");y={start:e,duration:s.pM.max([y.start+y.duration,t.start+t.duration],"bigint")-e}}else p.push(y),y=t}p.push(y),f({timeRanges:p,info:this.options.info,trackIndex:m,draftView:t,callback:e})}}y.type=n.Us.UPDATE_DRAFT_AIGC_WATERMARK},328253:function(e,t,i){i.d(t,{H:function(){return T}});var r=i(475028),n=i(690613),a=i(211561),o=i(602777),s=i(599446),l=i(879388),u=i(150002),d=i(853277),c=i(653322),_=i(711999),m=i(81649);let h=(0,r.i)(c.H.AddEffectTrackNotExist,""),p=(0,r.i)(c.H.AddEffectTrackTypeNotValid,""),g=(0,r.i)(c.H.AddEffectTargetTimeRangeNotValid,""),f=(0,r.i)(c.H.AddEffectMaterialPathEmpty,"");class T extends u.a{get type(){return d.U.ADD_EFFECT}check(e){let{trackId:t,targetTimeRange:i,material:r}=this.options,a=e.getTrackById(t);return a?a.type!==o.pN.TrackTypeVideoEffect?p(`trackType not valid: ${a.type}`):i.start>=0&&i.duration>0?r.path?(0,n.ly)():f("material path empty"):g(`targetTimeRange not valid: ${i.start}, ${i.duration}`):h(`track not exist: ${t}`)}do(e,t,i){var r;(0,_.F)([0,0],a.rxY.CanvasRatio16To9,!1,t,e);let{trackId:n,segmentId:u,targetTimeRange:d,material:c,applyType:m}=this.options,h=t.getTrackIndexById(n,[]),p={targetStartTime:d.start,targetDuration:d.duration,targetTrackIndex:h,type:o.pN.TrackTypeVideoEffect,targetSegmentId:""};new l.W().moveConflictSegment(t,p,t.getAllTracks(),e,i);let g=new a.nkD({id:u,targetTimerange:new a.tnv(d),material:new a.a89({...c,resourceId:c.resId,type:null!==(r=c.type)&&void 0!==r?r:o.cV.MetaTypeVideoEffect,adjustParams:c.adjustParams.map(e=>new a.VBR({name:e.adjustKey,value:e.adjustValue,defaultValue:e.defaultValue})),applyTargetType:m})});e(new s._({trackId:n,trackIndex:h,segment:g}))}constructor(e,t){super(e);let i=new m.O1(t.getDraftProperty().fps),r=i.gen(e.targetTimeRange.start).tail,n=i.gen(e.targetTimeRange.start+e.targetTimeRange.duration).tail;this.options.targetTimeRange={start:r,duration:n-r}}}},994603:function(e,t,i){i.d(t,{c:function(){return f}});var r=i(211561),n=i(150002),a=i(853277),o=i(879388),s=i(475028),l=i(690613),u=i(653322),d=i(93735),c=i(217201),_=i(912224),m=i(711999),h=i(81649);let p=(0,s.i)(u.H.AddTargetIndexNotValid,""),g=(0,s.i)(u.H.AddFilterOptionsNotValid,"");class f extends n.a{get type(){return a.U.FILTER_ADD}check(e){var t;let i=e.getFirstTrackIndexByTrackType(r.pNd.TrackTypeAudio);return i&&this.options.trackIndex>i?p(`targetIndex > minAudioTrack:${i}`):this.options.timeRange.start<0||this.options.timeRange.duration<=0||!(null===(t=this.options.filter)||void 0===t?void 0:t.path)?g(`options: ${this.options.timeRange} ${this.options.filter.path}`):(0,l.ly)()}do(e,t,i){let n={targetStartTime:this.options.timeRange.start,targetDuration:this.options.timeRange.duration,targetTrackIndex:this.options.trackIndex,type:r.pNd.TrackTypeFilter,targetSegmentId:""};new o.W().moveConflictSegment(t,n,t.getAllTracks(),e,i),this.options.filter.type=r.cVg.MetaTypeFilter,(0,m.F)([0,0],r.rxY.CanvasRatio16To9,!1,t,e);let a=new _.eK().nextFilterRenderIndex(t),s=new r.wSc({id:this.options.segmentId,material:(0,d.PD)(this.options.filter),targetTimerange:new r.tnv(this.options.timeRange),renderIndex:a}),l=new c.vp(r.pNd.TrackTypeFilter,this.options.trackIndex,r.w9k.FlagNone);c.c8.insertSegmentHelper(t,s,l,e)}constructor(e,t){super(e);let i=new h.O1(t.getDraftProperty().fps),r=i.gen(e.timeRange.start).tail,n=i.gen(e.timeRange.start+e.timeRange.duration).tail;this.options.timeRange={start:r,duration:n-r}}}f.type=a.U.FILTER_ADD},196734:function(e,t,i){i.d(t,{c:function(){return _}});var r=i(150002),n=i(853277),a=i(211561),o=i(129862),s=i(280700),l=i(690613),u=i(481631),d=i(501452),c=i(283751);class _ extends r.a{get type(){return _.type}check(e){return(0,l.ly)()}do(e,t){let{segId:i,value:r}=this.options,n=(0,s.Cm)(t.getAllTracks(),i);if(!n)return;let{trackId:l,trackIndex:_,segmentIndex:m}=n,h=t.getAllTracks()[_].segments[m];if((0,u.Si)(h)){let t=new a.M_b;t.material=new a.W9x,t.material.value=r;let n=(0,u.xX)({__segment_struct_type:h.__segment_struct_type});c.T.pick(h,t,n),e(new o.F({segmentDelta:t,segmentId:i,trackId:l,trackIndex:_,sourceSegmentDelta:n}))}if(this.options.isKeyframe){let i=d.y.execute({draftView:t,segment:h,keyframeType:a.Eu.KFTypeFilter,values:[r],keyframeId:this.options.keyframeId});i&&e(new o.F(i))}}}_.type=n.U.FILTER_UPDATE},666259:function(e,t,i){i.d(t,{F:function(){return d}});var r=i(150002),n=i(853277),a=i(690613),o=i(211561),s=i(575016),l=i(129862),u=i(481631);class d extends r.a{get type(){return d.type}check(e){return(0,a.ly)()}do(e,t){let{draftId:i,updates:r}=this.options,n=t.getDraftById(i);if(!!n)return this._getMutationsGroupedByTrack(n,r).forEach(t=>e(t)),this._getMutationsBySegment(n,r).forEach(t=>e(t)),(0,a.ly)()}_getMutationsBySegment(e,t){let i=[];return t.forEach(t=>{var r,n;let a=e.getSegmentById(t.segmentId);if(!a||(null===(r=a.sourceTimerange)||void 0===r?void 0:r.start)===t.sourceStart&&(null===(n=a.sourceTimerange)||void 0===n?void 0:n.duration)===t.sourceDuration)return;let s=e.getTrackBySegmentId(a.id);if(!s)return;let d=e.getTrackIndexById(s.id),c=(0,u.xX)({__segment_struct_type:a.__segment_struct_type});c.sourceTimerange=new o.zel,c.sourceTimerange.start=t.sourceStart,c.sourceTimerange.duration=t.sourceDuration,i.push(new l.F({segmentId:a.id,trackId:s.id,trackIndex:d,segmentDelta:c,sourceSegmentDelta:(0,u.xX)({__segment_struct_type:a.__segment_struct_type})}))}),i}_getMutationsGroupedByTrack(e,t){let i=new Map;return t.forEach(t=>{var r,n;let a=e.getSegmentById(t.segmentId);if(!a)return;let l=e.getTrackBySegmentId(a.id);if(!l)return;let u=e.getTrackIndexById(l.id),d=a.targetTimerange.clone(),c=null!==(r=t.targetStart)&&void 0!==r?r:d.start,_=null!==(n=t.targetDuration)&&void 0!==n?n:d.duration;if(d.start!==c||d.duration!==_)if(i.has(l.id)){let e=i.get(l.id);e.segmentIds.push(a.id),e.srcTargetTimeRanges.push(d),e.desTargetTimeRanges.push(new o.tnv({start:c,duration:_}))}else i.set(l.id,new s.B({segmentIds:[a.id],srcTrackIndex:u,desTrackIndex:u,srcTrackId:l.id,desTrackId:l.id,srcTargetTimeRanges:[d],desTargetTimeRanges:[new o.tnv({start:c,duration:_})]}))}),[...i.values()]}}d.type=n.U.MULTI_SEGMENTS_SET_TIME_RANGE},112625:function(e,t,i){i.d(t,{k:function(){return f}});var r=i(150002),n=i(853277),a=i(211561),o=i(475028),s=i(690613),l=i(653322),u=i(481631),d=i(599446),c=i(217201),_=i(176791),m=i(81649);let h=(0,o.i)(l.H.InsertSegmentTrackNotExist,""),p=(0,o.i)(l.H.InsertSegmentTrackTypeError,""),g=(0,o.i)(l.H.InsertSegemntSegmentTypeError,"");class f extends r.a{get type(){return f.type}check(e){let t=e.getTrackByIndex(this.options.trackIndex);if(!t)return h(`insert segment track not exist, index: ${this.options.trackIndex}`);if((0,u.he)(this.options.referenceSegment)&&t.type!==a.pNd.TrackTypeVideo)return p(`insert segment track type error, track type: ${t.type}`);if((0,u.Y9)(this.options.referenceSegment)&&t.type!==a.pNd.TrackTypeAudio)return p(`insert segment track type error, track type: ${t.type}`);if((0,u.Ft)(this.options.referenceSegment)&&t.type!==a.pNd.TrackTypeText)return p(`insert segment track type error, track type: ${t.type}`);else if(!(0,u.he)(this.options.referenceSegment)&&!(0,u.Y9)(this.options.referenceSegment)&&!(0,u.Ft)(this.options.referenceSegment))return g(`insert segment segment type error, segment type: ${this.options.referenceSegment.__segment_struct_type}`);return(0,s.ly)()}do(e,t,i){let r=new _.wK,n=this.options.referenceSegment.clone(!0);n.id=this.options.segmentId,n.targetTimerange.start=this.options.targetStartTime,n.targetTimerange.duration=this.options.targetDuration,((0,u.he)(n)||(0,u.Y9)(n))&&(n.sourceTimerange.start=this.options.sourceStartTime,n.sourceTimerange.duration=this.options.sourceDuration),e(new d._({trackId:t.getTrackByIndex(this.options.trackIndex).id,trackIndex:this.options.trackIndex,segment:n}));let o=new a.tnv({...this.options.referenceSegment.targetTimerange});c.c8.updateSegmentTimeRange(t,this.options.segmentId,this.options.targetStartTime,a.ZXd.ClipStart,[],!1,!1,e),c.c8.updateSegmentTimeRange(t,this.options.segmentId,this.options.targetStartTime+this.options.targetDuration,a.ZXd.ClipDuration,[],!1,!1,e),(0,u.he)(n)&&(r.updateVideoSpecialByTimeRange(t,n,a.ZXd.ClipStart,o,!1,e,i),r.updateVideoSpecialByTimeRange(t,n,a.ZXd.ClipDuration,o,!1,e,i))}constructor(e,t){super(e);let i="bigint"==typeof e.sourceStartTime&&"bigint"==typeof e.sourceDuration,r=new m.O1(t.getDraftProperty().fps);if(i){let t=r.gen(e.sourceStartTime).tail,i=r.gen(e.sourceStartTime+e.sourceDuration).tail;this.options.sourceStartTime=t,this.options.sourceDuration=i-t}else if((0,u.he)(this.options.referenceSegment)||(0,u.Y9)(this.options.referenceSegment)){var n,a,o,s;this.options.sourceStartTime=null!==(o=null===(n=this.options.referenceSegment.sourceTimerange)||void 0===n?void 0:n.start)&&void 0!==o?o:0n,this.options.sourceDuration=null!==(s=null===(a=this.options.referenceSegment.sourceTimerange)||void 0===a?void 0:a.duration)&&void 0!==s?s:this.options.referenceSegment.material.duration}let l=r.gen(e.targetStartTime).tail,d=r.gen(e.targetStartTime+e.targetDuration).tail;this.options.targetStartTime=l,this.options.targetDuration=d-l}}f.type=n.U.INSERT_SEGMENT},650039:function(e,t,i){i.d(t,{w:function(){return d}});var r=i(150002),n=i(853277),a=i(690613),o=i(211561),s=i(129862),l=i(481631),u=i(283751);class d extends r.a{get type(){return n.U.SEGMENT_SET_NAME}check(e){return(0,a.ly)()}do(e,t,i){let{materialId:r,name:n}=this.options;t.getSegmentsByMaterialId(r).forEach(i=>{let r=t.getTrackIndexBySegmentId(i.id);if((0,l.Y9)(i)){let a=new o.CCx;a.material=new o.yB$,a.material.name=n;let d=(0,l.xX)({__segment_struct_type:i.__segment_struct_type});u.T.pick(i,a,d),e(new s.F({trackId:t.getAllTracks()[r].id,trackIndex:r,segmentId:i.id,segmentDelta:a,sourceSegmentDelta:d}));return}if((0,l.Ft)(i)){let a=new o.xKN;a.material=new o.edz,a.material.presetName=n;let d=(0,l.xX)({__segment_struct_type:i.__segment_struct_type});u.T.pick(i,a,d),e(new s.F({trackId:t.getAllTracks()[r].id,trackIndex:r,segmentId:i.id,segmentDelta:a,sourceSegmentDelta:d}));return}if((0,l.he)(i)&&i.material.type===o.cVg.MetaTypePhoto){let a=new o.NOn;a.material=new o.K2q,a.material.materialName=n;let d=(0,l.xX)({__segment_struct_type:i.__segment_struct_type});u.T.pick(i,a,d),e(new s.F({trackId:t.getAllTracks()[r].id,trackIndex:r,segmentId:i.id,segmentDelta:a,sourceSegmentDelta:d}));return}})}}d.type=n.U.ADJUSTMENT_ADD},603822:function(e,t,i){i.d(t,{u:function(){return h}});var r=i(150002),n=i(853277),a=i(211561),o=i(129862),s=i(700857),l=i(481631),u=i(690613),d=i(268468),c=i(480113),_=i(283751),m=i(270519);class h extends r.a{get type(){return h.type}check(e){return(0,u.ly)()}do(e,t,i){var r,n,u,h;let p=t.getDraftById(this.options.draftId);if(!p)return;let g=p.getSegmentAtPositionById(this.options.segmentId);if(!g)return;let{trackId:f,trackIndex:T,segmentIndex:y}=g,v=p.getAllTracks()[T].segments[y];if(!v||!(0,l.he)(v))return;let E=new a.NOn,{sourceDuration:I}=this.options.video;I<=0&&(I=this.options.video.duration);let A=this.options.video.sourceStartTime;A<=0&&this.options.video.startTime>0&&(A=this.options.video.startTime);let S=v.sourceTimerange,k=new a.tnv({start:A,duration:I});E.sourceTimerange=new a.zel(k);let M=v.material.clone();M.matting&&this.options.video.path!==M.path&&(M.matting.path=""),M.videoAlgorithm.path&&this.options.video.path!==M.path&&(M.videoAlgorithm.path="");let w=(0,m.Mn)(M);(null==w?void 0:w.path)&&this.options.video.path!==M.path&&(w.path="",(0,m.Jq)(M,w)),M.path=this.options.video.path,M.type=this.options.video.type,M.duration=this.options.video.type===a.cVg.MetaTypeVideo?this.options.video.duration:10800000000n,M.width=this.options.video.size.width,M.height=this.options.video.size.height,M.hasAudio=this.options.video.hasAudio,M.materialId=null!==(r=this.options.video.materialId)&&void 0!==r?r:"",M.originMaterialId=this.options.video.originMaterialId,M.materialName=null!==(n=this.options.video.materialName)&&void 0!==n?n:"",M.categoryId=null!==(u=this.options.video.categoryId)&&void 0!==u?u:"",M.categoryName=null!==(h=this.options.video.categoryName)&&void 0!==h?h:"",M.source=this.options.video.source,M.sourcePlatform=this.options.video.sourcePlatform,M.mediaPath=this.options.video.mediaPath,M.localId=this.options.video.localId,E.material=new a.K2q(M);let C=v.clip?v.clip.clone():new a.bXy;if(C.flip.vertical=this.options.video.clip.flipVertical,C.flip.horizontal=this.options.video.clip.flipHorizontal,C.rotation=this.options.video.clip.rotation,C.scale.x=this.options.video.clip.scaleX,C.scale.y=this.options.video.clip.scaleY,C.transform.x=this.options.video.clip.transformX,C.transform.y=this.options.video.clip.transformY,E.clip=new a.tLq(C),(0,c.A)(E,M),v.commonKeyframes){let e=[];v.commonKeyframes.forEach(t=>{let i=t.clone(),r=null==i?void 0:i.keyframeList;r&&r.forEach(e=>{e.timeOffset=e.timeOffset-S.start+A,e.timeOffset<0n&&(e.timeOffset=0n)}),e.push(i)}),E.commonKeyframes=e}let O=(0,l.xX)({__segment_struct_type:v.__segment_struct_type});_.T.pick(v,E,O),e(new o.F({draftId:this.options.draftId,trackId:f,trackIndex:T,segmentId:this.options.segmentId,segmentDelta:E,sourceSegmentDelta:O}));let D=p.getDraftProperty().mutableConfig.mutableMaterials.map(e=>e.clone()),x=D.find(e=>{let{id:t}=e;return t===M.id});if(x){x.isUserModified=!0;let t=new d.ry;t.mutableConfig=new a.Rfr,t.mutableConfig.mutableMaterials=D,e(new s.W({propertyDelta:t}))}}}h.type=n.U.TEMPLATE_REPLACE_VIDEO},790820:function(e,t,i){i.d(t,{f:function(){return c},k:function(){return _}});var r=i(283751),n=i(481631),a=i(340294),o=i(690613),s=i(211561),l=i(129862),u=i(150002),d=i(853277);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={segmentId:"",mode:s.yY$.SpeedModeNormal,normalSpeed:0,curveSpeedName:"",curveSpeedResourceId:"",curveSpeedPoints:[],draftId:""};return e&&(t=Object.assign(t,e)),t}class _ extends u.a{get type(){return _.type}check(e){return(0,o.ly)()}do(e,t,i){let o=t.getDraftById(this.options.draftId);if(!o)return;let u=o.getSegmentAtPositionById(this.options.segmentId);if(!u)return;let{trackId:d,trackIndex:c,segmentIndex:_}=u,m=o.getAllTracks()[c].segments[_];if(!m||!(0,n.he)(m))return;let h=new s.NOn,p=m.speed;if(p=p?p.clone():new s.UgE,h.speed=new s.Zk4(p),this.options.mode===s.yY$.SpeedModeCurve){let{curveSpeed:e}=p;if(!e&&(e=new s.yP4,p.curveSpeed=e),this.options.curveSpeedResourceId&&(e.id=this.options.curveSpeedResourceId),this.options.curveSpeedName&&(e.name=this.options.curveSpeedName),this.options.curveSpeedPoints.length){let t=[];for(let e of this.options.curveSpeedPoints)t.push(new s.nR_({x:e.x,y:e.y}));e.speedPoints=t}else for(let t of e.speedPoints)t.y=t.y/p.speed*this.options.normalSpeed}else p.curveSpeed=void 0;p.mode=this.options.mode,p.speed=this.options.normalSpeed,h.sourceTimerange=new s.zel({start:m.sourceTimerange.start,duration:(0,a.k3)(m.targetTimerange.duration,this.options.normalSpeed,"bigint","ceil")});let g=(0,n.xX)({__segment_struct_type:m.__segment_struct_type});r.T.pick(m,h,g),e(new l.F({draftId:this.options.draftId,trackId:d,trackIndex:c,segmentId:this.options.segmentId,segmentDelta:h,sourceSegmentDelta:g}))}}_.type=d.U.TEMPLATE_CHANGE_VIDEO_SPEED},187613:function(e,t,i){i.d(t,{S:function(){return s}});var r=i(150002),n=i(853277),a=i(129862),o=i(690613);class s extends r.a{get type(){return s.type}check(){return(0,o.ly)()}do(e){let{updates:t}=this.options;for(let i of t)e(new a.F(i))}}s.type=n.U.UPDATE_TEXT_TEMPLATE_TEXT_MATERIAL_ACTION},916862:function(e,t,i){i.d(t,{g:()=>u});var r,n=i("211561"),a=i("700857"),o=i("268468"),s=i("602777");var l=((r={})[r.MetaTypeNone=0]="MetaTypeNone",r[r.MetaTypeVideo=1]="MetaTypeVideo",r[r.MetaTypePhoto=2]="MetaTypePhoto",r[r.MetaTypeGif=3]="MetaTypeGif",r[r.MetaTypeMusic=4]="MetaTypeMusic",r[r.MetaTypeExtractMusic=5]="MetaTypeExtractMusic",r[r.MetaTypeSound=6]="MetaTypeSound",r[r.MetaTypeRecord=7]="MetaTypeRecord",r[r.MetaTypeImage=8]="MetaTypeImage",r[r.MetaTypeText=9]="MetaTypeText",r[r.MetaTypeSubtitle=10]="MetaTypeSubtitle",r[r.MetaTypeLyrics=11]="MetaTypeLyrics",r[r.MetaTypeSticker=12]="MetaTypeSticker",r[r.MetaTypeFilter=13]="MetaTypeFilter",r[r.MetaTypeLUT=14]="MetaTypeLUT",r[r.MetaTypeReshape=15]="MetaTypeReshape",r[r.MetaTypeBeauty=16]="MetaTypeBeauty",r[r.MetaTypeVideoEffect=17]="MetaTypeVideoEffect",r[r.MetaTypeBrightness=18]="MetaTypeBrightness",r[r.MetaTypeContrast=19]="MetaTypeContrast",r[r.MetaTypeSaturation=20]="MetaTypeSaturation",r[r.MetaTypeSharpen=21]="MetaTypeSharpen",r[r.MetaTypeHighlight=22]="MetaTypeHighlight",r[r.MetaTypeShadow=23]="MetaTypeShadow",r[r.MetaTypeTemperature=24]="MetaTypeTemperature",r[r.MetaTypeHue=25]="MetaTypeHue",r[r.MetaTypeFade=26]="MetaTypeFade",r[r.MetaTypeLightSensation=27]="MetaTypeLightSensation",r[r.MetaTypeVignetting=28]="MetaTypeVignetting",r[r.MetaTypeParticle=29]="MetaTypeParticle",r[r.MetaTypeSegCanvas=30]="MetaTypeSegCanvas",r[r.MetaTypeCanvasColor=31]="MetaTypeCanvasColor",r[r.MetaTypeCanvasImage=32]="MetaTypeCanvasImage",r[r.MetaTypeCanvasBlur=33]="MetaTypeCanvasBlur",r[r.MetaTypeTransition=34]="MetaTypeTransition",r[r.MetaTypeAudioEffect=35]="MetaTypeAudioEffect",r[r.MetaTypeAudioFade=36]="MetaTypeAudioFade",r[r.MetaTypeBeats=37]="MetaTypeBeats",r[r.MetaTypeTailLeader=38]="MetaTypeTailLeader",r[r.MetaTypeAnimation=39]="MetaTypeAnimation",r[r.MetaTypeVideoAnimation=40]="MetaTypeVideoAnimation",r[r.MetaTypeTextEffect=41]="MetaTypeTextEffect",r[r.MetaTypeTextShape=42]="MetaTypeTextShape",r[r.MetaTypeTextToAudio=43]="MetaTypeTextToAudio",r[r.MetaTypeVideoMix=44]="MetaTypeVideoMix",r[r.MetaTypeAdjust=45]="MetaTypeAdjust",r[r.MetaTypeVideoMask=46]="MetaTypeVideoMask",r[r.MetaTypeSpeed=47]="MetaTypeSpeed",r[r.MetaTypeChroma=48]="MetaTypeChroma",r[r.MetaTypeTextTemplate=49]="MetaTypeTextTemplate",r[r.MetaTypeVideoOriginalSound=50]="MetaTypeVideoOriginalSound",r[r.MetaTypeStretchLeg=51]="MetaTypeStretchLeg",r[r.MetaTypeRealtimeDenoise=52]="MetaTypeRealtimeDenoise",r[r.MetaTypeFigure=53]="MetaTypeFigure",r[r.MetaTypeFaceEffect=54]="MetaTypeFaceEffect",r[r.MetaTypeVideoTracking=55]="MetaTypeVideoTracking",r[r.MetaTypeHsl=56]="MetaTypeHsl",r[r.MetaTypeColorCurves=57]="MetaTypeColorCurves",r[r.MetaTypeAudioBalance=58]="MetaTypeAudioBalance",r[r.MetaTypeComposition=59]="MetaTypeComposition",r[r.MetaTypeCover=60]="MetaTypeCover",r[r.MetaTypeLeader=61]="MetaTypeLeader",r[r.MetaTypeTailer=62]="MetaTypeTailer",r[r.MetaTypePrimaryColorWheels=63]="MetaTypePrimaryColorWheels",r[r.MetaTypeLogColorWheels=64]="MetaTypeLogColorWheels",r[r.MetaTypeHandwriteImage=65]="MetaTypeHandwriteImage",r[r.MetaTypeHandwriteRes=66]="MetaTypeHandwriteRes",r[r.MetaTypeCombination=67]="MetaTypeCombination",r[r.MetaTypeManualDeformation=68]="MetaTypeManualDeformation",r[r.MetaTypePluginEffect=69]="MetaTypePluginEffect",r[r.MetaTypeLockObject=70]="MetaTypeLockObject",r[r.MetaTypeAdCube=71]="MetaTypeAdCube",r[r.MetaTypeMattingStroke=72]="MetaTypeMattingStroke",r[r.MetaTypeSmartColorAdjust=73]="MetaTypeSmartColorAdjust",r[r.MetaTypeChannelMapping=74]="MetaTypeChannelMapping",r[r.MetaTypeBloom=75]="MetaTypeBloom",r[r.MetaTypeTextPreset=76]="MetaTypeTextPreset",r[r.MetaTypeGreenScreen=77]="MetaTypeGreenScreen",r[r.MetaTypeArticleToVideoTemplate=78]="MetaTypeArticleToVideoTemplate",r[r.MetaTypeFont=79]="MetaTypeFont",r[r.MetaTypeAll=80]="MetaTypeAll",r);i("217201"),i("698159");let u=(e,t,i,r)=>{let u=[];for(let c of e){var d;let e=new n.hye;if(e.id=c,e.language=t,e.type=(d=i,l[s.cV[d]]),u.push(e),i===n.cVg.MetaTypeSubtitle){let e=new o.ry({subtitleTaskinfo:u});r(new a.W({propertyDelta:e}))}else if(i===n.cVg.MetaTypeLyrics){let e=new o.ry({lyricsTaskinfo:u});r(new a.W({propertyDelta:e}))}}}},915106:function(e,t,i){i.d(t,{Q:function(){return p}});var r=i(150002),n=i(853277),a=i(129862),o=i(211561),s=i(475028),l=i(690613),u=i(481631),d=i(653322),c=i(283751);let _=(0,s.i)(d.H.SegmentNotExist,""),m=(0,s.i)(d.H.SegmentTypeNotValid,""),h=(0,s.i)(d.H.ParamNotValid,"");class p extends r.a{get type(){return p.type}check(e){let{segId:t,cropRatio:i,stability:r,trackSpeed:n,cachePath:a}=this.options,o=e.getSegmentById(t);return o?(0,u.he)(o)?i&&r&&n&&a?(0,l.ly)():h(`AddSmartCropAction Param not valid: ${JSON.stringify(this.options)}`):m(`segment type not valid: ${t}`):_(`segment not exist: ${t}`)}do(e,t,i){let{segId:r}=this.options,n=t.getSegmentById(r),s=t.getTrackBySegmentId(n.id),l=new o.NOn,d=new o.GZI;d.cropRatio=this.options.cropRatio,d.stability=this.options.stability,d.trackSpeed=this.options.trackSpeed,d.cachePath=this.options.cachePath,l.smartCrop=d;let _=(0,u.xX)({__segment_struct_type:n.__segment_struct_type});c.T.pick(n,l,_),e(new a.F({trackId:s.id,trackIndex:t.getTrackIndexBySegmentId(n.id),segmentId:n.id,segmentDelta:l,sourceSegmentDelta:_}))}}p.type=n.U.VIDEO_ADD_SMART_CROP},885956:function(e,t,i){i.d(t,{z:()=>I});var r=i("150002"),n=i("853277"),a=i("211561"),o=i("129862"),s=i("475028"),l=i("690613"),u=i("481631"),d=i("810909"),c=i("653322"),_=i("185400"),m=i("127926"),h=i("501452"),p=i("805794"),g=i("717501"),f=i("176791"),T=i("283751");class y extends g.v{executeNormal(e,t,i){let r=e.getSegmentById(this.params.segId);if(!r||!(0,u.he)(r)){p.B.log("Can't find the video segment");return}if(!r.videoMask){let t=new a.NOn,n=new a.Q$U;t.videoMask=[n];let s=(0,u.xX)({__segment_struct_type:r.__segment_struct_type});T.T.pick(r,t,s),i(new o.F({segmentDelta:t,segmentId:r.id,trackId:e.getTrackBySegmentId(r.id).id,trackIndex:e.getTrackIndexBySegmentId(r.id),sourceSegmentDelta:s}))}let n=new f.wK().getVideoMaskDelta(r,this.params);if(n){let t=(0,u.xX)({__segment_struct_type:r.__segment_struct_type});T.T.pick(r,n,t),i(new o.F({segmentDelta:n,segmentId:r.id,trackId:e.getTrackBySegmentId(r.id).id,trackIndex:e.getTrackIndexBySegmentId(r.id),sourceSegmentDelta:t}))}}getKeyframeValues(e,t){return t===a.Eu.KFTypeMaskPostion?[this.params.centerX,this.params.centerY]:t===a.Eu.KFTypeMaskSize?[this.params.width,this.params.height]:t===a.Eu.KFTypeCommonMaskRotation?[this.params.rotation]:t===a.Eu.KFTypeCommonMaskFeather?[this.params.feather]:t===a.Eu.KFTypeCommonMaskRoundCorner?[this.params.roundCorner]:[]}}let v=(0,s.i)(c.H.AddVideoMaskSegmentNotExist,""),E=(0,s.i)(c.H.AddVideoMaskSegmentTypeNotValid,"");class I extends r.a{get type(){return I.type}check(e){let t=e.getSegmentById(this.options.segId);return t?(0,u.he)(t)?(0,l.ly)():E(`seg type is not video: ${t.__segment_struct_type}`):v("seg is not exist")}do(e,t,i){var r,n;let s=t.getSegmentById(this.options.segId);if(!s||!(0,u.he)(s))return;let l=(0,f.P2)(s),c=(null!==(n=null==l?void 0:null===(r=l.config)||void 0===r?void 0:r.invert)&&void 0!==n&&n)!==this.options.invert;new y(this.options).executeNormal(t,s,e);let p=[];if(this.options.updatedFields)for(let e of this.options.updatedFields)"size"===e?(p.push(a.Eu.KFTypeCommonMaskSizeWidth),p.push(a.Eu.KFTypeCommonMaskSizeHeight)):"position"===e?(p.push(a.Eu.KFTypeCommonMaskPositionX),p.push(a.Eu.KFTypeCommonMaskPositionY)):"feather"===e?p.push(a.Eu.KFTypeCommonMaskFeather):"rotation"===e?p.push(a.Eu.KFTypeCommonMaskRotation):"round_corner"===e&&p.push(a.Eu.KFTypeCommonMaskRoundCorner);for(let e of _.oH){let t=m.OL.findKeyframes(s,e);if(!t||t.keyframeList.length<=0)continue}let g=e=>e===a.Eu.KFTypeCommonMaskPositionX?[this.options.centerX]:e===a.Eu.KFTypeCommonMaskPositionY?[this.options.centerY]:e===a.Eu.KFTypeCommonMaskSizeWidth?[this.options.width]:e===a.Eu.KFTypeCommonMaskSizeHeight?[this.options.height]:e===a.Eu.KFTypeCommonMaskRotation?[this.options.rotation]:e===a.Eu.KFTypeCommonMaskFeather?[this.options.feather]:e===a.Eu.KFTypeCommonMaskRoundCorner?[this.options.roundCorner]:[];if(!c&&this.options.isKeyframe){let i=[];for(let r of i=void 0===this.options.keyframeFlags||this.options.keyframeFlags===-1n?this.options.updatedFields&&this.options.updatedFields.length>0?p:_.oH:(0,d.Uz)(this.options.keyframeFlags)){let i=h.y.execute({draftView:t,segment:s,keyframeType:r,values:g(r),keyframeId:this.options.keyframeId});i&&e(new o.F(i))}}}}I.type=n.U.VIDEO_MASK},868498:function(e,t,i){i.d(t,{s:function(){return E}});var r=i(475028),n=i(690613),a=i(211561),o=i(280700),s=i(129862),l=i(448218),u=i(150002),d=i(853277),c=i(653322),_=i(481631),m=i(217201),h=i(912224),p=i(81649),g=i(283751);let f=(0,r.i)(c.H.SetVideoTransitionSegmentNotExist,""),T=(0,r.i)(c.H.SetVideoTransitionTypeNotValid,""),y=(0,r.i)(c.H.SetVideoTransitionSegmentIndexNotValid,""),v=(0,r.i)(c.H.SetVideoTransitionSegmentDurationNotValid,"");class E extends u.a{get type(){return E.type}check(e){let{segId:t,duration:i}=this.options,r=(0,o.Cm)(e.getAllTracks(),t);if(!r)return f("seg is not exist");let{segmentIndex:a,trackIndex:s}=r,l=e.getAllTracks()[s],u=l.segments[a];return(0,_.he)(u)?a===l.segments.length-1?y("add transition position can not be last"):u.targetTimerange.duration/2n<i?v("segment duration is not valid"):(0,n.ly)():T(`segment type is not video, type is ${u.__segment_struct_type}`)}do(e,t,i){var r,n;let u;let{segId:d}=this.options,{renderIndexTrackModeOn:c}=t.getDraftProperty(),{segmentIndex:p,trackIndex:f,trackId:T}=(0,o.Cm)(t.getAllTracks(),d),y=t.getAllTracks()[f],v=y.segments[p];p+1<y.segments.length&&(u=y.segments[p+1]),!c&&u&&v.renderIndex!==u.renderIndex&&(0,l.W)(new h.eK().ensureInSameRenderLayer(t,v,u),e);let{categoryId:E,categoryName:I,duration:A,effectId:S,name:k,path:M,resourceId:w,thirdResourceId:C,sourcePlatform:O,isOverlap:D}=this.options,x=new a.NOn,b=new a.TBZ({id:null!==(n=null===(r=v.transition)||void 0===r?void 0:r.id)&&void 0!==n?n:`${d}_transition`,categoryId:E,categoryName:I,duration:A,effectId:S,name:k,path:M,resourceId:w,thirdResourceId:C,sourcePlatform:O,isOverlap:D});x.transition=b;let R=(0,_.xX)({__segment_struct_type:v.__segment_struct_type});g.T.pick(v,x,R),e(new s.F({segmentId:d,trackId:T,trackIndex:f,segmentDelta:x,sourceSegmentDelta:R})),(0,l.W)(m.c8.adjustTrackTargetStartTime(t,y),e),(0,l.W)(m.c8.updateDraftDurationIfNeeded(t),e)}constructor(e,t){super(e);let i=new p.O1(t.getDraftProperty().fps/2);this.options.duration=i.gen(this.options.duration).tail}}E.type=d.U.VIDEO_ADD_TRANSITION},983231:function(e,t,i){i.d(t,{L:function(){return u}});var r=i(150002),n=i(853277),a=i(211561),o=i(448218),s=i(690613),l=i(481631);class u extends r.a{get type(){return u.type}check(e){return(0,s.ly)()}do(e,t,i){let r=this.options.draftId?t.getDraftById(this.options.draftId):t;if(!r)return;let n=r.getSegmentById(this.options.segId);if(!!n&&!!(0,l.he)(n)){if(n.background){let t=new a.fln;t.type=a.cVg.MetaTypeNone;let i=new a.NOn,n=new a.Fq$(t);i.background=n,(0,o.W)((0,o.l)(r,this.options.segId,i),e)}}}}u.type=n.U.VIDEO_CLEAR_BACKGROUND},676177:function(e,t,i){i.d(t,{M:function(){return E}});var r=i(819120),n=i(211561),a=i(176791),o=i(881337),s=i(448218),l=i(879388),u=i(129862),d=i(481631),c=i(843363),_=i(187198),m=i(217201),h=i(912224),p=i(81649),g=i(711999),f=i(13242),T=i(805794),y=i(283751);let v=["brightness","contrast","saturation","sharpening","highlight","shadow","colorTemperature","hue","fade","lightSensation","vignetting","particle","lut","smartAdjustColor"],E={beforeAddHelper(e,t,i,a){if(0!==e.trackIndex&&1===e.videos.length){var o;let r=t.getAllTracks();new l.W().moveConflictSegment(t,{targetStartTime:e.videos[0].startTime,targetDuration:null!==(o=e.videos[0].sourceDuration)&&void 0!==o?o:e.videos[0].duration,targetTrackIndex:e.trackIndex,type:n.pNd.TrackTypeVideo,targetSegmentId:""},r,i,a)}let s=!!e.materialDraft;for(let i of e.videos){if(s){i.type=n.cVg.MetaTypeVideo,i.copyBackground=!1;continue}if(!i.path)throw Error("video add action error : param no path");let e=i.mediaInfo;if(!e||!e.type||!r.z.isVideoType(e.type)&&!r.z.isImageType(e.type))throw Error(`video add action error : file info has invalid type ${e.type}`);!i.size&&(i.size={width:0,height:0}),90===e.rotation||270===e.rotation?(i.size.width=Number(e.height),i.size.height=Number(e.width)):(i.size.width=Number(e.width),i.size.height=Number(e.height));let{fps:a}=t.getDraftProperty(),o=new p.O1(a);if(r.z.isVideoType(e.type)){i.type=n.cVg.MetaTypeVideo,i.hasAudio="AudioVideo"===e.type;let t=o.gen(e.duration).tail;if(i.duration=t,i.duration<=0n)throw Error("video add action error : video has invalid duration")}else i.type=r.z.isGifType(e.type)?n.cVg.MetaTypeGif:n.cVg.MetaTypePhoto,i.hasAudio=!1;i.copyBackground=!1}let u=e.videos[0],d=[u.size.width,u.size.height],{ratio:c}=t.getDraftProperty().draftCanvasSizeConfig.ensureDraftCanvasSizeParam;(0,g.F)(d,c,!0,t,i)},insertSegmentsHelper(e,t,i,r){var a;let o=t.trackIndex===m.fm?n.w9k.FlagNone:n.w9k.FlagSubVideo,l=new m.vp(n.pNd.TrackTypeVideo,null!==(a=t.trackIndex)&&void 0!==a?a:0,o);for(let t of i){let[,i]=m.c8.insertSegment(e,e.getAllTracks()[l.targetIndex],t,l);(0,s.W)(i,r)}},setFastImportPathHelper(e,t){for(let i of t){let t=e.getSegmentById(i.id);if(!t||!(0,d.he)(t))continue;let{material:r}=t}},cloneAdjust(e){e.adjust&&(v.forEach(t=>{let i=e.adjust[t];if(i){let r=i.clone(!0);e.adjust[t]=r}}),e.adjust.hsl&&e.adjust.hsl.length>0&&(e.adjust.hsl=e.adjust.hsl.map(e=>e.clone(!0))),e.adjust.colorCurves&&(e.adjust.colorCurves=e.adjust.colorCurves.clone(!0)),e.adjust.primaryColorWheels&&(e.adjust.primaryColorWheels=e.adjust.primaryColorWheels.clone(!0)),e.adjust.logColorWheels&&(e.adjust.logColorWheels=e.adjust.logColorWheels.clone(!0)))},processAdjustKeyFrame(e,t,i,r){var a,o,s,l,u,d,c,_,m,h,p,g;let T=f.U.getPropertyValues(e,t,n.Eu.KFTypeSaturation,i);T&&(null===(a=r.adjust)||void 0===a?void 0:a.saturation)&&(r.adjust.saturation.value=null==T?void 0:T[0]);let y=f.U.getPropertyValues(e,t,n.Eu.KFTypeContrast,i);y&&(null===(o=r.adjust)||void 0===o?void 0:o.contrast)&&(r.adjust.contrast.value=null==y?void 0:y[0]);let v=f.U.getPropertyValues(e,t,n.Eu.KFTypeBrightness,i);v&&(null===(s=r.adjust)||void 0===s?void 0:s.brightness)&&(r.adjust.brightness.value=null==v?void 0:v[0]);let E=f.U.getPropertyValues(e,t,n.Eu.KFTypeSharpen,i);E&&(null===(l=r.adjust)||void 0===l?void 0:l.sharpening)&&(r.adjust.sharpening.value=null==E?void 0:E[0]);let I=f.U.getPropertyValues(e,t,n.Eu.KFTypeHightLight,i);I&&(null===(u=r.adjust)||void 0===u?void 0:u.highlight)&&(r.adjust.highlight.value=null==I?void 0:I[0]);let A=f.U.getPropertyValues(e,t,n.Eu.KFTypeShadow,i);A&&(null===(d=r.adjust)||void 0===d?void 0:d.shadow)&&(r.adjust.shadow.value=null==A?void 0:A[0]);let S=f.U.getPropertyValues(e,t,n.Eu.KFTypeTemperature,i);S&&(null===(c=r.adjust)||void 0===c?void 0:c.colorTemperature)&&(r.adjust.colorTemperature.value=null==S?void 0:S[0]);let k=f.U.getPropertyValues(e,t,n.Eu.KFTypeHue,i);k&&(null===(_=r.adjust)||void 0===_?void 0:_.hue)&&(r.adjust.hue.value=null==k?void 0:k[0]);let M=f.U.getPropertyValues(e,t,n.Eu.KFTypeFade,i);M&&(null===(m=r.adjust)||void 0===m?void 0:m.fade)&&(r.adjust.fade.value=null==M?void 0:M[0]);let w=f.U.getPropertyValues(e,t,n.Eu.KFTypeVignetting,i);w&&(null===(h=r.adjust)||void 0===h?void 0:h.vignetting)&&(r.adjust.vignetting.value=null==w?void 0:w[0]);let C=f.U.getPropertyValues(e,t,n.Eu.KFTypeParticle,i);C&&(null===(p=r.adjust)||void 0===p?void 0:p.particle)&&(r.adjust.particle.value=null==C?void 0:C[0]);let O=f.U.getPropertyValues(e,t,n.Eu.KFTypeLightSensatione,i);O&&(null===(g=r.adjust)||void 0===g?void 0:g.lightSensation)&&(r.adjust.lightSensation.value=null==O?void 0:O[0])},processFreezeVideo(e,t,i,r){var o,s,l,u,d,c,_,m,h,p,g;if(!t)return;let T=f.U.getPropertyValues(e,t,n.Eu.KFTypeAlpha,i),y=f.U.getPropertyValues(e,t,n.Eu.KFTypePositionX,i),v=f.U.getPropertyValues(e,t,n.Eu.KFTypePositionY,i),E=f.U.getPropertyValues(e,t,n.Eu.KFTypeChromaIntensity,i),I=f.U.getPropertyValues(e,t,n.Eu.KFTypeChromaShadow,i),A=f.U.getPropertyValues(e,t,n.Eu.KFTypeRotation,i),S=f.U.getPropertyValues(e,t,n.Eu.KFTypeScaleX,i),k=f.U.getPropertyValues(e,t,n.Eu.KFTypeScaleY,i),M=f.U.getPropertyValues(e,t,n.Eu.KFTypeCommonMaskFeather,i),w=f.U.getPropertyValues(e,t,n.Eu.KFTypeCommonMaskPositionX,i),C=f.U.getPropertyValues(e,t,n.Eu.KFTypeCommonMaskPositionY,i),O=f.U.getPropertyValues(e,t,n.Eu.KFTypeCommonMaskRotation,i),D=f.U.getPropertyValues(e,t,n.Eu.KFTypeCommonMaskSizeWidth,i),x=f.U.getPropertyValues(e,t,n.Eu.KFTypeCommonMaskSizeHeight,i),b=f.U.getPropertyValues(e,t,n.Eu.KFTypeCommonMaskRoundCorner,i);r.material.type=n.cVg.MetaTypePhoto;let R=null!==(s=t.clip)&&void 0!==s?s:r.clip;r.clip=null==R?void 0:R.clone(),T&&(r.clip.alpha=T[0]),S&&(r.clip.scale.x=S[0],r.clip.scale.y=k[0]),y&&(r.clip.transform.x=y[0],r.clip.transform.y=v[0]),A&&(r.clip.rotation=A[0]);let N=null!==(l=(0,a.P2)(t))&&void 0!==l?l:(0,a.P2)(r),V=null==N?void 0:N.clone(!0),F=null!==(u=t.figures)&&void 0!==u?u:r.figures;r.figures=null==F?void 0:F.map(e=>e.clone(!0));let P=null!==(d=t.adjust)&&void 0!==d?d:r.adjust;r.adjust=null==P?void 0:P.clone(!0),this.cloneAdjust(r),this.processAdjustKeyFrame(e,t,i,r);let L=null!==(c=t.mixMode)&&void 0!==c?c:r.mixMode;r.mixMode=null==L?void 0:L.clone(!0);let z=null!==(_=t.background)&&void 0!==_?_:r.background;r.background=null==z?void 0:z.clone(!0);let B=null!==(m=t.material.crop)&&void 0!==m?m:r.material.crop;r.material.crop=null==B?void 0:B.clone(!0);let U=null!==(h=t.chroma)&&void 0!==h?h:r.chroma;r.chroma=null==U?void 0:U.clone(!0),E&&r.chroma&&(r.chroma.intensityValue=E[0]),I&&r.chroma&&(r.chroma.shadowValue=I[0]),V&&(V.config.feather=null==M?void 0:M[0],V.config.centerX=null==w?void 0:w[0],V.config.centerY=null==C?void 0:C[0],V.config.rotation=null==O?void 0:O[0],V.config.width=null==D?void 0:D[0],V.config.height=null==x?void 0:x[0],V.config.roundCorner=null==b?void 0:b[0],r.videoMask=[V]),r.material.cropRatio=null!==(p=null===(o=t.material)||void 0===o?void 0:o.cropRatio)&&void 0!==p?p:r.material.cropRatio,r.material.isUnifiedBeautyMode=null!==(g=t.material.isUnifiedBeautyMode)&&void 0!==g?g:r.material.isUnifiedBeautyMode},insertVideoSegmentsHelper(e,t,i){let r=[],o=t.getMainTrack(),s=null;if(e.trackIndex===m.fm&&o&&o.segments.length&&e.videos.length){let i=t.getSegmentInsertIndexByStartTime(o,e.videos[0].startTime),r=-1;r=i>0?i-1:i;let n=o.segments;if(r>=0&&r<n.length){let e=n[r];e&&(0,d.he)(e)&&(s=e.background)}}for(let i of e.videos){var l,u,_,p,g,f,T,y;let o,{sourceDuration:m}=i;m<=0n&&(m=i.duration);let v=new n.tnv;v.start=i.sourceStartTime,v.duration=m;let E=new n.tnv;E.start=i.startTime,E.duration=m,o=h.eK.prototype.renderIndexMode(t)===n.IDM.RenderIndexModeFree?h.eK.prototype.nextVideoRenderIndex(e.trackIndex,t):h.eK.prototype.nextVideoRenderIndexWithTimeRange(e.trackIndex,(0,c.i)(E.start,E.duration),t);let I={width:i.size.width,height:i.size.height},A=a.wK.prototype.createVideoMaterial(i.path,i.type,i.duration,I,i.hasAudio,null!==(l=i.materialName)&&void 0!==l?l:"");A.aigcHistoryId=null!==(u=i.historyRecordId)&&void 0!==u&&u,A.aigcItemId=i.aigcItemId,A.isAiGenerateContent=null!==(_=i.isAiGenerateContent)&&void 0!==_&&_,A.mediaPath=i.mediaPath,A.localId=i.localId,A.teamId=i.teamId,A.source=i.source,A.sourcePlatform=i.sourcePlatform,A.formulaId=i.formulaId,A.categoryId=null!==(p=i.categoryId)&&void 0!==p?p:"",A.categoryName=null!==(g=i.categoryName)&&void 0!==g?g:"",A.materialId=null!==(f=i.materialId)&&void 0!==f?f:"",A.materialName=null!==(T=i.materialName)&&void 0!==T?T:"",A.materialUrl=null!==(y=i.materialUrl)&&void 0!==y?y:"",A.localMaterialId=i.localMaterialId,A.originMaterialId=i.originMaterialId,i.extraTypeOption&&(A.extraTypeOption=i.extraTypeOption);let S=a.wK.prototype.createVideoSegment(A,e.trackIndex,o,v,E,i.clip,e.materialDraft,i.segmentId);if(i.freeze&&this.processFreezeVideo(t,t.getSegmentById(i.freeze.segId),i.freeze.splitTime,S),S.materialId=A.id,i.segmentId&&(S.id=i.segmentId),i.copyBackground&&s&&(0,d.he)(S)){let e=s.clone();S.background=e}let k=new n.bEb;k.mode=n.bZ2.HDRDisplayModeDefault,S.hdrSettings=k,A.checkFlag=A.checkFlag|Number(n.FC7.HDRSettingsFlag)|Number(n.FC7.BeautyBody),r.push(S)}return this.insertSegmentsHelper(t,e,r,i),r},insertTailLeaderSegmentHelper(e,t,i,r,l){let u=(0,o.xrB)({});u.start=e,u.duration=t;let d=new a.wK().createTailLeaderMaterial(i),c=new a.wK().createTailLeaderSegment(d,u),_=new m.vp(n.pNd.TrackTypeVideo,m.fm,n.w9k.FlagNone),[h,p]=m.c8.insertSegmentCheckTrack(r,c,_,l);if(h){(0,s.W)(p,l);let[e,t]=m.c8.insertSegment(r,h,c,_);(0,s.W)(t,l)}return c},resetAllPictureAdjustItem(e,t,i,r){var a;let o,s=new n.sq5,l=i.getSegmentNodeById(e),c=null==l?void 0:l.segment,_=null!==(a=null==l?void 0:l.trackNode.track.id)&&void 0!==a?a:"";if(!c){T.B.warn("adjust_segment is null");return}if(t===n.cVg.MetaTypeNone&&(0,d.he)(c))s=c.adjust?c.adjust.clone():new n.sq5,o=new n.NOn;else if(t===n.cVg.MetaTypeAdjust&&(0,d.E6)(c))s=c.material.clone(),o=new n.MYy;else{T.B.warn("check type or dynamic_pointer_cast need to implement");return}if(!s)return;let m=new n.cNp(s);m.brightness&&(m.brightness=null),m.contrast&&(m.contrast=null),m.saturation&&(m.saturation=null),m.sharpening&&(m.sharpening=null),m.highlight&&(m.highlight=null),m.shadow&&(m.shadow=null),m.colorTemperature&&(m.colorTemperature=null),m.hue&&(m.hue=null),m.fade&&(m.fade=null),m.vignetting&&(m.vignetting=null),m.particle&&(m.particle=null),m.lut&&(m.lut=null),m.lightSensation&&(m.lightSensation=null),m.hsl&&m.hsl.length>0&&(m.hsl=[]),m.colorCurves&&(m.colorCurves=null),m.primaryColorWheels&&(m.primaryColorWheels=null),m.logColorWheels&&(m.logColorWheels=null),m.smartAdjustColor&&(m.smartAdjustColor=null),m.enableAdjust=!0,m.enableLut=!0,m.enableColorCurves=!0,m.enableColorWheels=!0,m.enableSmartColorAdjust=!1,(0,d.RF)(o)?o.adjust=m:o.material=m;let h=(0,d.xX)({__segment_struct_type:c.__segment_struct_type});y.T.pick(c,o,h),r(new u.F({trackId:_,trackIndex:i.getTrackIndexBySegmentId(e),segmentId:e,segmentDelta:o,sourceSegmentDelta:h}))},updateMaterial(e,t,i,r,a){var o,s,l,c,h,p,g,f,T,v,E,I,A,S,k,M,w,C,O,D,x,b,R;if(!r.material||!i.segments.includes(r))return;let N=new n.NOn,V=new n.K2q;V.path=a.video.path,V.type=a.video.type,V.width=null===(s=a.video)||void 0===s?void 0:null===(o=s.size)||void 0===o?void 0:o.width,V.height=null===(c=a.video)||void 0===c?void 0:null===(l=c.size)||void 0===l?void 0:l.height,V.duration=a.video.type===n.cVg.MetaTypeVideo?a.video.duration:new _.Tn().getMaterialPhotoMaxDuration(),V.hasAudio=null===(h=a.video)||void 0===h?void 0:h.hasAudio,V.materialId=null===(p=a.video)||void 0===p?void 0:p.materialId,V.localMaterialId=null===(g=a.video)||void 0===g?void 0:g.localMaterialId,V.materialName=null===(f=a.video)||void 0===f?void 0:f.materialName,V.materialUrl=null===(T=a.video)||void 0===T?void 0:T.materialUrl,V.categoryId=null===(v=a.video)||void 0===v?void 0:v.categoryId,V.categoryName=null===(E=a.video)||void 0===E?void 0:E.categoryName,V.source=null===(I=a.video)||void 0===I?void 0:I.source,V.sourcePlatform=null===(A=a.video)||void 0===A?void 0:A.sourcePlatform,V.formulaId=null===(S=a.video)||void 0===S?void 0:S.formulaId,V.teamId=null===(k=a.video)||void 0===k?void 0:k.teamId,V.requestId=null===(M=a.video)||void 0===M?void 0:M.requestId,V.aigcHistoryId=null!==(D=null===(w=a.video)||void 0===w?void 0:w.historyRecordId)&&void 0!==D?D:"",V.aigcItemId=null!==(x=null===(C=a.video)||void 0===C?void 0:C.aigcItemId)&&void 0!==x?x:"",V.isAiGenerateContent=null!==(b=null===(O=a.video)||void 0===O?void 0:O.isAiGenerateContent)&&void 0!==b&&b,N.material=V;let{sourceDuration:F}=a.video;F<=0n&&(F=a.video.duration);let P=new n.zel,L=m.c8.alignTimerange(t,null!==(R=a.video.sourceStartTime)&&void 0!==R?R:r.sourceTimerange.start,F);P.start=L[0],P.duration=L[1],N.sourceTimerange=P;let z=[];for(let e of r.commonKeyframes){let t=e.clone();t.keyframeList.length>0&&(t.keyframeList=t.keyframeList.map(e=>{var t,i,n;let o=e.clone(),s=null!==(i=a.video.sourceStartTime)&&void 0!==i?i:0n,l=null!==(n=null===(t=r.sourceTimerange)||void 0===t?void 0:t.start)&&void 0!==n?n:0n;return o.timeOffset=e.timeOffset+(s-l),o})),z.push(t)}N.commonKeyframes=z;let B=(0,d.xX)({__segment_struct_type:r.__segment_struct_type});y.T.pick(r,N,B),e(new u.F({trackId:i.id,trackIndex:t.getTrackIndexBySegmentId(r.id),segmentId:r.id,segmentDelta:N,sourceSegmentDelta:B}))}}},554458:function(e,t,i){i.d(t,{i:function(){return u}});var r=i(150002),n=i(853277),a=i(211561),o=i(448218),s=i(690613),l=i(481631);class u extends r.a{get type(){return u.type}check(e){return(0,s.ly)()}do(e,t,i){let r=t.getSegmentById(this.options.segId);if(!r||!(0,l.he)(r))return;let n=new a.v5b;if(this.options.isAiMattingEnable)n.flag=BigInt(a.R6k.webAiMattingFlag|a.R6k.enableFlag),n.path=this.options.path;else{var s;n.flag=0n,n.path=null!==(s=r.material.matting.path)&&void 0!==s?s:""}let u=new a.NOn;u.material=new a.K2q,u.material.matting=new a.zh9(n),(0,o.W)((0,o.l)(t,this.options.segId,u),e)}}u.type=n.U.VIDEO_AI_MATTING},26459:function(e,t,i){i.d(t,{l:function(){return p}});var r=i(211561),n=i(129862),a=i(150002),o=i(853277),s=i(740495),l=i(475028),u=i(690613),d=i(481631),c=i(653322),_=i(283751);let m=(0,l.i)(c.H.ResetVideoChromaSegmentNotExist,""),h=(0,l.i)(c.H.ResetVideoChromaSegmentTypeNotValid,"");class p extends a.a{get type(){return p.type}check(e){let{segId:t}=this.options,i=e.getSegmentById(t);return i?(0,d.he)(i)?(0,u.ly)():h(`segment type not valid: ${t}`):m(`segment not exist: ${t}`)}do(e,t,i){var a;let{segId:o}=this.options,l=t.getSegmentNodeById(o,[]),u=null==l?void 0:l.segment,c=null!==(a=null==l?void 0:l.trackNode.track.id)&&void 0!==a?a:"",m=u.chroma?new r.VJQ(u.chroma).clone():new r.VJQ;m.color="",m.shadowValue=0,m.intensityValue=0;let h=new r.Xkj(m),p=new r.NOn;p.chroma=h;let g=(0,s.$)(u,[r.Eu.KFTypeChromaShadow,r.Eu.KFTypeChromaIntensity,r.Eu.KFTypeChromaEdgeSmooth,r.Eu.KFTypeChromaSpill]);g&&(p.commonKeyframes=g);let f=(0,d.xX)({__segment_struct_type:u.__segment_struct_type});_.T.pick(u,p,f),e(new n.F({trackId:c,trackIndex:t.getTrackIndexBySegmentId(u.id),segmentId:u.id,segmentDelta:p,sourceSegmentDelta:f}))}}p.type=o.U.VIDEO_RESET_CHROMA},959829:function(e,t,i){i.d(t,{B:function(){return g}});var r=i(150002),n=i(853277),a=i(211561),o=i(129862),s=i(466966),l=i(475028),u=i(690613),d=i(653322),c=i(481631),_=i(283751),m=i(722169);let h=(0,l.i)(d.H.ApplyVideoAllChromaSegmentNotExist,""),p=(0,l.i)(d.H.ApplyVideoAllChromaSegmentTypeNotValid,"");class g extends r.a{get type(){return g.type}check(e){let{segmentId:t}=this.options,i=e.getSegmentById(t);return i?(0,c.he)(i)?(0,u.ly)():p(`segment type not valid: ${t}`):h(`segment not exist: ${t}`)}do(e,t,i){let{segmentId:r,draftId:n,algorithm:l,deflicker:u,motionBlurConfig:d,noiseReduction:h,timeRange:p,enable:g,path:f,complementFrameConfig:T}=this.options,y=t.getTrackBySegmentId(r),v=t.getSegmentById(r);if(!v||!(0,c.he)(v))return;let{material:{videoAlgorithm:E}}=v,{algorithms:I=[]}=E?E.clone():new a.POV,A={};if(l&&Array.isArray(I)){var S;let e=!1,t=null!==(S=null==I?void 0:I.findIndex(e=>(null==e?void 0:e.type)===(null==l?void 0:l.type)))&&void 0!==S?S:-1;if(t>-1){let i=new s.k1(l);g?!(0,m.isEqual)(i,I[t])&&(I.splice(t,1,i),e=!0):(I.splice(t,1),e=!0)}else{let t=new s.k1(l);g&&(I.push(t),e=!0)}e&&(A.algorithms=I)}if(I.find(e=>e.type===a.zzh.ComplementFrame)?T&&(A.complementFrameConfig=new a.CAe(T)):A.complementFrameConfig=null,I.find(e=>e.type===a.zzh.Deflicker)){if(u){let e=new a.ZgK(u);A.deflicker=e}}else A.deflicker=void 0;if(I.find(e=>e.type===a.zzh.MotionBlur)){if(d){let e=new a.nYp(d);A.motionBlurConfig=e}}else A.motionBlurConfig=void 0;if(I.find(e=>e.type===a.zzh.NoiseReduction)&&h){let e=new a.tQC(h);A.noiseReduction=e}f?A.path=f:A.path="",(null==p?void 0:p.duration)?A.timeRange=new a.tnv(p):A.timeRange=void 0;let k=new a.NOn,M=new a.K2q,w=new a.OHm(A);M.videoAlgorithm=w,k.material=M;let C=(0,c.xX)({__segment_struct_type:v.__segment_struct_type});_.T.pick(v,k,C),e(new o.F({trackId:y.id,trackIndex:t.getTrackIndexBySegmentId(r),segmentId:r,segmentDelta:k,draftId:n,sourceSegmentDelta:C}))}}g.type=n.U.VIDEO_SET_ALGORITHMS},93007:function(e,t,i){i.d(t,{y:function(){return m}});var r=i(211561),n=i(481631),a=i(235331),o=i(150002),s=i(853277),l=i(475028),u=i(690613),d=i(653322);let c=(0,l.i)(d.H.SetVideoChromaIntensitySegmentNotExist,""),_=(0,l.i)(d.H.SetVideoChromaIntensitySegmentTypeNotValid,"");class m extends o.a{get type(){return m.type}check(e){let{segId:t}=this.options,i=e.getSegmentById(t);return i?(0,n.he)(i)?(0,u.ly)():_(`segment type not valid: ${t}`):c(`segment not exist: ${t}`)}do(e,t,i){let{segId:n}=this.options,o=t.getSegmentNodeById(n,[]),s=null==o?void 0:o.segment,l=r.Eu.KFTypeChromaEdgeSmooth;new a.e(this.options).execute(this.options,t,s,[l],e)}}m.type=s.U.VIDEO_SET_CHROMA_EDGE_SMOOTH},987061:function(e,t,i){i.d(t,{X8:function(){return T},tv:function(){return f}});var r=i(150002),n=i(853277),a=i(211561),o=i(203447),s=i(239648),l=i(448218),u=i(340294),d=i(49667),c=i(690613),_=i(481631),m=i(566349),h=i(217201),p=i(81649);let g=e=>e.mode===a.yY$.SpeedModeNormal;function f(e,t,i){var r,n,c,f,T,y;let v=new s.Uo,E=e.getTrackNodeBySegmentId(t.segId,[a.pNd.TrackTypeVideo],[]);if(0===e.getTracksByType(a.pNd.TrackTypeVideo).length||!E||!E.track)return;let{trackIndex:I}=E,A=e.getSegmentById(t.segId);if(!A||!(0,_.he)(A))return;let S=0===I&&e.getDraftProperty().maintrackAdsorb,k=E.track,{duration:M,aveSpeed:w}=function(e,t,i,r){if(g(t)){if(t.value<0)throw Error("video set speed action : normal_speed cannot be negative if the mode is normal");if(t.value<1e-6)throw Error("video set speed action : normal_speed cannot be 0 if the mode is normal");else i=(0,u.NN)(i,t.value,"bigint")}else{if(!t.curveSpeedPoints||0===t.curveSpeedPoints.length)throw Error("video set speed action : curve_speed_points size cannot be 0 if the mode is curve");if((r=new o.C().getCurveAveSpeed(t.curveSpeedPoints)||1)<0)throw Error("ave_speed cannot be negative if the mode is curve");if(r<1e-6)throw Error("ave_speed cannot be 0 if the mode is curve");else i=(0,u.NN)(i,r,"bigint")}return d.vc.FEATURE_FRAME_TIME_AUTO_ALIGNMENT&&(i=new p.O1(e.getDraftProperty().fps).gen(i).round),{duration:i,aveSpeed:r}}(e,t,null!==(n=null===(r=A.sourceTimerange)||void 0===r?void 0:r.duration)&&void 0!==n?n:0n,1),C=u.pM.div(M,A.targetTimerange.duration,"number"),O=A.targetTimerange.duration;!S&&O<M&&(h.c8.moveSegmentsIfConflict(e,E.track,new Map([[A,new a.tnv({start:A.targetTimerange.start,duration:M})]]),[a.pNd.TrackTypeVideo],i),k=e.getTrackBySegmentId(A.id),(0,l.W)(v.clearUselessTransition(e,E.track),i));let D=new a.NOn;D.targetTimerange=new a.zel,D.targetTimerange.start=A.targetTimerange.start,D.targetTimerange.duration=M,(0,l.W)((0,l.l)(e,A.id,D),i);let x=v.adjustVideoSpeedSegmentTransition(e,k,A,null,null,S);(0,l.W)(x,i),(0,l.W)(v.adjustVideoSpeedSegmentTransition(e,k,A,null,null,S),i),S&&(0,l.W)(h.c8.adjustTrackTargetStartTime(e,k),i);let b=new o.C().adjustVideoAnimationDuration(e,A,C);b&&(0,l.W)(b,i);let R=new o.C().adjustVideoEffectsTimeRange(e,A,C);R&&(0,l.W)(R,i);let N=A.speed;if(!N){N=new a.UgE;let t=new a.NOn;t.speed=new a.Zk4(N),(0,l.W)((0,l.l)(e,A.id,t),i)}let V=new a.NOn,F=new a.Zk4(N.clone());if(V.speed=F,g(t)){if(F.mode=a.yY$.SpeedModeNormal,F.speed=t.value,F.curveSpeed=null,t.value>5){let t=new a.NOn;t.isToneModify=!0,(0,l.W)((0,l.l)(e,A.id,t),i)}}else{let r=(0,m.X)(null!==(c=t.curveSpeedResourceId)&&void 0!==c?c:"",null!==(f=t.curveSpeedName)&&void 0!==f?f:"",null!==(T=t.curveSpeedPoints)&&void 0!==T?T:[],null!==(y=t.curveSpeedSourcePlatform)&&void 0!==y?y:a.nj7.EffectPlatformLoki);F.mode=a.yY$.SpeedModeCurve,F.speed=w,F.curveSpeed=new a._Xo(r);let n=new a.NOn;n.isToneModify=!1,(0,l.W)((0,l.l)(e,A.id,n),i)}let P=new a.NOn;P.speed=F,(0,l.W)((0,l.l)(e,A.id,P),i),(0,l.W)((0,l.l)(e,A.id,V),i),!function(e,t,i,r,n){if(!(0,_.he)(t))return;let o=-1n,s=-1n,{audioFade:u}=t.material;if(u&&i>r){if(o=u.fadeInDuration,s=u.fadeOutDuration,o>r){let i=new a.NOn;i.material=new a.K2q,i.material.audioFade=new a.lMN,i.material.audioFade.fadeInDuration=r,(0,l.W)((0,l.l)(e,t.id,i),n)}if(s>r){let i=new a.NOn;i.material=new a.K2q,i.material.audioFade=new a.lMN,i.material.audioFade.fadeOutDuration=r,(0,l.W)((0,l.l)(e,t.id,i),n)}}}(e,A,O,M,i)}class T extends r.a{get type(){return T.type}check(e){return(0,c.ly)()}do(e,t,i){f(t,this.options,e)}}T.type=n.U.VIDEO_SET_SPEED},457812:function(e,t,i){i.d(t,{x:()=>X});var r=i("862213"),n=i("150002"),a=i("268468"),o=i("700857"),s=i("690613");class l extends n.a{get type(){return r.Us.ADD_PLACEHOLDER_OPERATION}check(e){return(0,s.ly)()}do(e,t,i){let r=new a.ry;e(new o.W({propertyDelta:r}))}constructor(){super({})}}l.type=r.Us.ADD_PLACEHOLDER_OPERATION;var u=i("429262"),d=i("120708"),c=i("599855"),_=i("789786"),m=i("280700"),h=i("529628"),p=i("575534");class g extends p.e{batchStart(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._behavior.batchStart(e)}batchEnd(e,t){return this._behavior.batchEnd(e,t)}freezeVideo(e,t){let i;!this._batchContext&&(i=this._behavior.batchStart(!0));let r=(0,m.Cm)(this._videoDocument.tracks,e.segId);if(!!r)this.api.segment.split([{segmentId:e.segId,splitTime:e.splitTime}]),this.api.video.add({trackIndex:r.trackIndex,videos:[{...e.videoParam,freeze:{segId:e.segId,splitTime:e.splitTime}}]}),t(this._videoDocument.getSegmentById(e.videoParam.segmentId),()=>{i&&this._behavior.batchEnd(i)})}constructor(e,t,i,r){super(e,t,r),this.api=i}}(0,_.gn)([(0,h.cM)("batchApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IFreezeVideoOptions?Object:IFreezeVideoOptions,Function]),(0,_.w6)("design:returntype",void 0)],g.prototype,"freezeVideo",null);var f=i("695102"),T=i("176991"),y=i("938069"),v=i("853367"),E=i("170941"),I=i("494065"),A=i("164583"),S=i("563770"),k=i("69600"),M=i("836092"),w=i("549269"),C=i("542023"),O=i("851163"),D=i("261133"),x=i("827885"),b=i("731143"),R=i("275496"),N=i("122531"),V=i("291509"),F=i("779166"),P=i("376048"),L=i("377938"),z=i("824160");class B extends p.e{add(e){return this._mixApplyLocal({action:new N.I(e,this._videoDocument)})}setMaterials(e,t,i){let r=e.updates.length>0?[e.updates[0].segmentId]:void 0;return this._mixApplyLocal({action:new F.d(e)},{undoSelectedSegIds:r,redoSelectedSegIds:r,canUndoRedo:t,commit:i})}addSubtitles(e){return this._mixApplyLocal({action:new R.a(e,this._videoDocument)})}setFixedSize(e,t){let i=[e.segmentId];return this._mixApplyLocal({action:new V.Y(e)},{undoSelectedSegIds:i,redoSelectedSegIds:i,canUndoRedo:t})}addAnimation(e){let t=[e.segmentIds[0]];return this._mixApplyLocal({action:new L.t(e)},{undoSelectedSegIds:t,redoSelectedSegIds:t})}updateAnimation(e){let t=[e.segmentIds[0]];return this._mixApplyLocal({action:new L.t(e)},{undoSelectedSegIds:t,redoSelectedSegIds:t})}deleteAnimation(e){let t=[e.segmentIds[0]];return this._mixApplyLocal({action:new O.n(e)},{undoSelectedSegIds:t,redoSelectedSegIds:t})}addVideoTracker(e){return this._mixApplyLocal({action:new M.V({...e})})}updateVideoTracker(e){return this._mixApplyLocal({action:new C.V({...e})},{undoSelectedSegIds:e.selectedSegIds?e.selectedSegIds:void 0,redoSelectedSegIds:e.selectedSegIds?e.selectedSegIds:void 0})}removeVideoTracker(e){return this._mixApplyLocal({action:new w.$({...e})},{undoSelectedSegIds:e.selectedSegIds?e.selectedSegIds:void 0,redoSelectedSegIds:e.selectedSegIds?e.selectedSegIds:void 0})}deleteTextToAudioIds(e){return this._mixApplyLocal({action:new D.k(e)})}updateSubtitleTemplate(e){return this._mixApplyLocal({action:new P.J(e)},{undoSelectedSegIds:[e.segId],redoSelectedSegIds:[e.segId]})}resetSubtitleTemplate(e){return this._mixApplyLocal({action:new x.l(e)},{undoSelectedSegIds:[e.segId],redoSelectedSegIds:[e.segId]})}updateEffect(e,t,i){let r=e.updates.length>0?[e.updates[0].segmentId]:void 0;return this._mixApplyLocal({action:new z.f(e)},{undoSelectedSegIds:r,redoSelectedSegIds:r,canUndoRedo:t,commit:i})}setSubtitleKeywords(e){return this._mixApplyLocal({action:new b.P(e)})}}(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IAddTextActionOption?Object:IAddTextActionOption]),(0,_.w6)("design:returntype",void 0)],B.prototype,"add",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof ITextSetMaterialsActionOption?Object:ITextSetMaterialsActionOption,Boolean,Boolean]),(0,_.w6)("design:returntype",void 0)],B.prototype,"setMaterials",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof ISubtitlesAddOption?Object:ISubtitlesAddOption]),(0,_.w6)("design:returntype",void 0)],B.prototype,"addSubtitles",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof ITextSetFixedSizeActionOption?Object:ITextSetFixedSizeActionOption,Boolean]),(0,_.w6)("design:returntype",void 0)],B.prototype,"setFixedSize",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IUpdateTextAnimationActionOptions?Object:IUpdateTextAnimationActionOptions]),(0,_.w6)("design:returntype",void 0)],B.prototype,"addAnimation",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IUpdateTextAnimationActionOptions?Object:IUpdateTextAnimationActionOptions]),(0,_.w6)("design:returntype",void 0)],B.prototype,"updateAnimation",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IRemoveTextAnimationActionOptions?Object:IRemoveTextAnimationActionOptions]),(0,_.w6)("design:returntype",void 0)],B.prototype,"deleteAnimation",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IAddVideoTrackerOptions?Object:IAddVideoTrackerOptions]),(0,_.w6)("design:returntype",void 0)],B.prototype,"addVideoTracker",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IUpdateVideoTrackerOptions?Object:IUpdateVideoTrackerOptions]),(0,_.w6)("design:returntype",void 0)],B.prototype,"updateVideoTracker",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IRemoveVideoTrackerOptions?Object:IRemoveVideoTrackerOptions]),(0,_.w6)("design:returntype",void 0)],B.prototype,"removeVideoTracker",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IRemoveTextAudiosOptions?Object:IRemoveTextAudiosOptions]),(0,_.w6)("design:returntype",void 0)],B.prototype,"deleteTextToAudioIds",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IUpdateSubtitleTemplateOption?Object:IUpdateSubtitleTemplateOption]),(0,_.w6)("design:returntype",void 0)],B.prototype,"updateSubtitleTemplate",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IResetSubtitleTemplateOption?Object:IResetSubtitleTemplateOption]),(0,_.w6)("design:returntype",void 0)],B.prototype,"resetSubtitleTemplate",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof IUpdateTextEffectOptions?Object:IUpdateTextEffectOptions,Boolean,Boolean]),(0,_.w6)("design:returntype",void 0)],B.prototype,"updateEffect",null),(0,_.gn)([(0,h.cM)("textApi"),(0,_.w6)("design:type",Function),(0,_.w6)("design:paramtypes",["undefined"==typeof ISetSubtitleKeywordsOption?Object:ISetSubtitleKeywordsOption]),(0,_.w6)("design:returntype",void 0)],B.prototype,"setSubtitleKeywords",null);var U=i("160568"),K=i("862674"),j=i("657278"),G=i("666227"),H=i("340294");class X extends H.D2{invokeBatch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={options:t,stack:{undoMutations:[],redoMutations:[]}},r=new X(this._draft,this._behavior,i);return this._behavior.invokeBatch(()=>{try{this.setApiDisabled(!0),e(r)}finally{this.setApiDisabled(!1),r.setApiDisabled(!0)}},i)}createPlaceholderOperation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._behavior.applyLocalNew({action:new l,...e})}constructor(e,t,i=null){super(),this._draft=e,this._behavior=t,this.undoRedo=new j.R(this._draft,this._behavior,i),this.draft=new f.c(this._draft,this._behavior,i),this.track=new K.l(this._draft,this._behavior,i),this.segment=new E.i(this._draft,this._behavior,i),this.audio=new c.M(this._draft,this._behavior,i),this.text=new B(this._draft,this._behavior,i),this.textTemplate=new U.P(this._draft,this._behavior,i),this.sticker=new I.q(this._draft,this._behavior,i),this.filter=new y.Q(this._draft,this._behavior,i),this.effect=new T.D(this._draft,this._behavior,i),this.template=new S.f(this._draft,this._behavior,i),this.adjustment=new u.S(this._draft,this._behavior,i),this.video=new G.q(this._draft,this._behavior,i),this.templateCombination=new k.w(this._draft,this._behavior,i),this.batch=new g(this._draft,this._behavior,this,i),this.keyframe=new v.w(this._draft,this._behavior,i),this.attachment=new d.l(this._draft,this._behavior,i),this.story=new A.o(this._draft,this._behavior,i)}}},455843:function(e,t,i){i.d(t,{Hq:function(){return n}});var r,n=((r={})[r.normal=0]="normal",r[r.seekDone=1]="seekDone",r[r.onGoing=2]="onGoing",r)},236872:function(e,t,i){i.d(t,{A:function(){return r}});let r={fix854(e){854===e[0]&&480===e[1]?(e[0]=864,e[1]=486):480===e[0]&&854===e[1]?(e[0]=486,e[1]=864):486===e[0]&&364===e[1]?(e[0]=492,e[1]=369):364===e[0]&&486===e[1]&&(e[0]=369,e[1]=492)},fix854AndScale(e,t){r.fix854(t),t[1]<=t[0]?(t[0]=Math.round(e*t[0]/t[1]),t[1]=e):(t[1]=Math.round(e*t[1]/t[0]),t[0]=e)}}},703193:function(e,t,i){i(881337)},786869:function(e,t,i){i(881337)},119280:function(e,t,i){i(881337)},621030:function(e,t,i){i(881337)},523462:function(e,t,i){i(881337)},331161:function(e,t,i){i(881337)},822318:function(e,t,i){i.d(t,{c:function(){return a}});var r=i(602777),n=i(881337);function a(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:void 0!==t.id?t.id:"",curveType:void 0!==t.curveType?t.curveType:r.wH.KeyframeCurveTypeLine,timeOffset:void 0!==t.timeOffset?BigInt(t.timeOffset):0n,leftControl:void 0!==t.leftControl?(0,n.znm)(t.leftControl):(0,n.znm)({}),rightControl:void 0!==t.rightControl?(0,n.znm)(t.rightControl):(0,n.znm)({}),values:(null!==(e=null==t?void 0:t.values)&&void 0!==e?e:[]).map(e=>e),graph:void 0!==t.graph?(0,n.nOc)(t.graph):(0,n.nOc)({})}}},334092:function(e,t,i){i.d(t,{o:function(){return n}});var r=i(881337);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:void 0!==e.type?e.type:0,point:void 0!==e.point?(0,r.znm)(e.point):(0,r.znm)({})}}},41253:function(e,t,i){i(881337)},596506:function(e,t,i){i.d(t,{h:function(){return r}});function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{startTime:void 0!==e.startTime?BigInt(e.startTime):0n,endTime:void 0!==e.endTime?BigInt(e.endTime):0n,text:void 0!==e.text?e.text:""}}},949434:function(e,t,i){i(881337)},937910:function(e,t,i){i(881337)},322646:function(e,t,i){i.d(t,{F:function(){return n}});var r=i(881337);function n(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{styleJson:void 0!==t.styleJson?t.styleJson:"",resources:(null!==(e=t.resources)&&void 0!==e?e:[]).map(e=>(0,r.bJb)(e)),resourceItemParam:(0,r.bJb)(t.resourceItemParam)}}},171205:function(e,t,i){i(881337)},948729:function(e,t,i){i(881337)},189217:function(e,t,i){i.d(t,{z:function(){return r}});function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{index:void 0!==e.index?e.index:0,content:void 0!==e.content?e.content:"",replaceStyleRichText:void 0!==e.replaceStyleRichText?e.replaceStyleRichText:""}}},196615:function(e,t,i){i(881337)},59742:function(e,t,i){i(881337)},27120:function(e,t,i){i(881337)},181078:function(e,t,i){i(881337)},354101:function(e,t,i){i.d(t,{X:function(){return n}});var r=i(690613);class n{getDraftStr(e){return""}onChange(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i]}needExtraUpgrade(){return!1}setListenDraftUpdate(e){this._hasListenDraftUpdate=e}getHasListenDraftUpdate(){return this._hasListenDraftUpdate}draftDidUpdate(e,t){}taskBeforeUpgrade(e,t){return(0,r.ly)()}taskAfterUpgrade(e,t){return(0,r.ly)()}taskFinishedUpgrade(e,t,i){}registerDowngradeTasks(){this._registerDowngradeTasks(this._downgradeConfig)}taskBeforeDowngrade(e,t){var i;let n=null===(i=this._downgradeConfig)||void 0===i?void 0:i.getBeforeTask(e);return n?n.draftDowngrade(e,t):(0,r.ly)()}taskAfterDowngrade(e,t){var i;let n=null===(i=this._downgradeConfig)||void 0===i?void 0:i.getAfterTask(e);return n?n.draftDowngrade(e,t):(0,r.ly)()}taskFinishedDowngrade(e,t){}_registerDowngradeTasks(e){this._downgradeConfig=e}constructor(){this._hasListenDraftUpdate=!1,this._downgradeConfig=null}}},288907:function(e,t,i){i.d(t,{C5:function(){return a.C},G3:function(){return n.G3},JF:function(){return r.J},PV:function(){return o.P},Pu:function(){return n.Pu},gy:function(){return s}});var r=i(265418);i(277662);var n=i(992401),a=i(812218),o=i(211434);let s=[r.J.AttachmentVideoAlgorithm,r.J.AttachmentAsyncTask,r.J.AttachmentAiWriter,r.J.AttachmentAiStory,r.J.AttachmentAiCreator]},53520:function(e,t,i){i.d(t,{t:function(){return r}});let r=new class e{setCache(e,t){this._cacheMap.set(e,t)}getCache(e){return this._cacheMap.get(e)}removeCache(e){this._cacheMap.delete(e)}constructor(){this._cacheMap=new Map}}},734755:function(e,t,i){i.d(t,{G:function(){return o}});var r=i(690613),n=i(987733),a=i(108616);class o{migrate(){var e,t;let i=this._getSourceVersion();if(!i.ok)return i;let a=this._getTasks();if(!a.length)return(null===(t=this._listener)||void 0===t?void 0:t.needExtraMigrate())&&this._listener.taskFinishedMigrate(this._json,(0,n.vl)(this._json),!0),(0,r.oW)(this._json);let o=this._json;for(let e of a){let t=this._migrateByTask(e,o);if(!t.ok)return t;o=t.value}return null===(e=this._listener)||void 0===e||e.taskFinishedMigrate(o,(0,n.vl)(this._json),!1),(0,r.oW)(o)}_getSourceVersion(){let e=(0,n.vl)(this._json);return(0,r.oW)(e)}_getTasks(){let e=this._getSourceVersion();if(!e.ok)return[];let t=[];for(let i=0;i<this._tasks.length;i++){if(this._tasks[i].getAttachmentFileName()===this._attachmentFileName)this._needMigrateByVersion(e.value,this._tasks[i].getStringVersion())&&t.push(this._tasks[i])}return t}_needMigrateByVersion(e,t){return this._type===a.I.Upgrade?(0,n.lt)(e,t):(0,n.gt)(e,t)}_migrateByTask(e,t){if(this._listener){let i=this._listener.taskBeforeMigrate(t,e.getStringVersion());if(!i.ok)return i}let i=e.migrate(t);if(this._listener){let i=this._listener.taskAfterMigrate(t,e.getStringVersion());if(!i.ok)return i}return i}constructor(e){this._type=e.type,this._attachmentFileName=e.attachmentFileName,this._json=e.json,this._listener=e.listener,this._tasks=e.tasks}}},970151:function(e,t,i){i.d(t,{y:function(){return o}});var r=i(690613),n=i(602777),a=i(341360);class o extends a.k{migrateInner(e,t){var i,a;let o="web"===(null!==(a=null===(i=e.platform)||void 0===i?void 0:i.os)&&void 0!==a?a:"").toLowerCase()?n.nj.EffectPlatformArtist:n.nj.EffectPlatformLoki,{materials:s}=e,{texts:l}=s;for(let e of l){let{caption_template_info:t}=e;t&&void 0===t.source_platform&&(t.source_platform=o)}return(0,r.oW)(e)}constructor(...e){super(...e),this.version="107.0.0",this.needEnumerateSubDrafts=!0}}},488139:function(e,t,i){i.d(t,{G:function(){return o}});var r=i(690613),n=i(341360),a=i(340294);class o extends n.k{migrateInner(e,t){if("materials"in e&&(0,a.Fz)(e.materials)){let t=e.materials;if("videos"in t&&Array.isArray(t.videos)){let i=t.videos;for(let t=0;t<i.length;++t){let r=i[t];if("gameplay"in r&&(0,a.Fz)(r.gamplay)){let t=r.gameplay;if("algorithm"in t&&"string"==typeof t.algorithm){let{algorithm:i}=t;if("dynamic_light_wave"===i){let e={};e.lightwave_repeat_duration=484e3,t.adjustable_config=e}if(("shadow_left"===i||"shadow_through"===i)&&"tracks"in e){let i=e.tracks;for(let e=0;e<i.length;++e){let n=i[e].segments;for(let e=0;e<n.length;++e){let i=n[e],o=i.material_id;if(o===r.id){if("source_timerange"in i&&(0,a.Fz)(i.source_timerange)){let e=i.source_timerange.duration,r={};e>0&&e<=1e6?(r.stopmotion_gap_duration=3e5,r.stopmotion_first_render_time=2e5):e>1e6&&e<=6e6?(r.stopmotion_gap_duration=12e5,r.stopmotion_first_render_time=5e5):(r.stopmotion_gap_duration=2e6,r.stopmotion_first_render_time=1e6),t.adjustable_config=r}continue}}}}}}}}}return(0,r.oW)(e)}constructor(...e){super(...e),this.version="48.0.0"}}},950355:function(e,t,i){i.d(t,{q:function(){return l}});var r=i(690613),n=i(341360),a=i(602777),o=i(340294),s=i(710879);class l extends n.k{migrateInner(e,t){if(!(0,o.Fz)(e.materials))return(0,r.oW)(e);let i=e.materials;if(void 0!==i.effects&&Array.isArray(i.effects))for(let e of i.effects)void 0!==e.type&&"beauty"===e.type?(e.resource_id=s.S.kBeautyId,e.type="figure"):void 0!==e.type&&"reshape"===e.type&&(e.resource_id=s.S.kReshapeId,e.type="figure");if(void 0!==i.videos&&Array.isArray(i.videos))for(let e of i.videos){let t=void 0!==e.check_flag?e.check_flag:0;e.check_flag=t|Number(a.FC.BeautyBody)}if(void 0!==e.extra_info&&(0,o.Fz)(e.extra_info)&&void 0!==e.tracks&&Array.isArray(e.tracks)){let t=e.extra_info,r=void 0!==t.text_to_video&&(0,o.Fz)(t.text_to_video)?t.text_to_video:{},n=e.tracks;if(void 0!==e.canvas_config&&(0,o.Fz)(e.canvas_config)){let t=e.canvas_config;if(void 0!==t.ratio&&"string"==typeof t.ratio&&"9:16"===t.ratio){for(let e of n)if(void 0!==e.type&&"string"==typeof e.type&&"sticker"===e.type&&void 0!==e.segments&&Array.isArray(e.segments)&&1===e.segments.length){let t=e.segments[0];if(void 0!==t.material_id&&"string"==typeof t.material_id){let e=t.material_id;if(void 0!==i.texts&&Array.isArray(i.texts))for(let t of i.texts)void 0!==t.id&&"string"==typeof t.id&&t.id===e&&void 0!==t.type&&"string"==typeof t.type&&"text"===t.type&&void 0!==r.text&&Array.isArray(r.text)&&r.text.push({id:e,type:0})}}}}}return(0,r.oW)(e)}constructor(...e){super(...e),this.version="49.0.0"}}},927463:function(e,t,i){i.d(t,{U:function(){return a}});var r=i(690613),n=i(341360);class a extends n.k{migrateInner(e,t){return this.textTemplateUpgrade(e,t),(0,r.oW)(e)}textTemplateUpgrade(e,t){if(!e.tracks||!e.materials)return!1;let i=e.materials,{tracks:r}=e,n=i.text_templates,a=i.texts;for(let e of r){if("sticker"!==e.type&&"text"!==e.type)continue;let t=e.segments;if(n)for(let e of t){if(!n.find(t=>e.material_id===t.id))continue;let t=[],i=[],r=e.extra_material_refs;for(let e of r){let r=a.find(t=>e===t.id);r&&(t.push(r),i.push(e))}for(let e=0;e<r.length;)i.find(t=>t===r[e])?r.splice(e,1):e++;for(let e=0;e<a.length;)i.find(t=>t===a[e].id)?a.splice(e,1):e++}}if(i.drafts){let{drafts:e}=i;for(let i of e){if(!!i.draft){if(!this.textTemplateUpgrade(i.draft,t))return!1}}}return!0}constructor(...e){super(...e),this.version="50.0.0"}}},289621:function(e,t,i){i.d(t,{g:function(){return s}});var r=i(690613),n=i(341360),a=i(340294),o=i(287165);class s extends n.k{migrateInner(e,t){if("tracks"in e&&Array.isArray(e.tracks))for(let t of e.tracks){if("video"===t.type||"audio"===t.type){for(let i of t.segments)if(!0===i.intensifies_audio){let t=i.extra_material_refs,r=!1;if("materials"in e&&(0,a.Fz)(e.materials)){let n=e.materials;if("realtime_denoises"in n&&Array.isArray(n.realtime_denoises)){let e=n.realtime_denoises;for(let i of e){let{id:e}=i;if(-1!==t.findIndex(t=>t===e))i.is_denoise=!0,r=!0}if(!r){let r={};r.id=(0,o.p)(),r.is_denoise=!0,r.denoise_mode=0,r.denoise_rate=.85,r.type="realtime_denoise",r.path="",r.sami_name="denoise_v2",r.sami_type=2,r.sami_version="1.0",e.push(r),t.push(r.id),i.extra_material_refs=t}n.realtime_denoises=e}e.materials=n}}}}return(0,r.oW)(e)}constructor(...e){super(...e),this.version="55.0.0"}}},603894:function(e,t,i){i.d(t,{K:function(){return o}});var r=i(690613),n=i(341360),a=i(283395);class o extends n.k{migrateInner(e,t){let i=this.makeupResourcesUpgrade(e,t);return i.ok?(0,r.oW)(e):i}makeupResourcesUpgrade(e,t){if(!("tracks"in e)||!("materials"in e))return(0,r.wf)(a.D.kDeserializeJsonFailed,"no tracks or materials in root");let i=e.materials,n=i.effects,o=[];for(let e of n){let{type:t}=e,i=e.sub_type;e.resource_id;let r=e.exclusion_group;if("figure"!==t||"exclusion_face"!==i||r.length<=1)continue;let n="";"path"in e&&"string"==typeof e.path&&e.path,o.push(e)}return e.materials=i,(0,r.ly)()}constructor(...e){super(...e),this.version="63.0.1"}}},394332:function(e,t,i){i.d(t,{P:function(){return l}});var r=i(690613),n=i(341360),a=i(710879),o=i(340294),s=i(283395);class l extends n.k{migrateInner(e,t){let i;if(!(e.platform&&(0,o.Fz)(e.platform)))return(0,r.oW)(e);i=e.platform;let n=-1;if(!(i.app_id&&"number"==typeof i.app_id&&Number.isInteger(i.app_id)))return(0,r.oW)(e);n=i.app_id;if(n===this.peLvAppId||n===this.pcLvAppId)e.platform.app_source=this.lvSource;else if(n===this.peCcAppId||n===this.pcCcAppId)e.platform.app_source=this.ccSource;else{let t="";for(let[e,r]of Object.entries(i)){let i="app_id"===e?String(r):String(null!=r?r:"");t+=`,${e}:${i}`}if(e.new_version){let i=String(e.new_version);t+=`,new_version:${i}`}if(e.name){let i=String(e.name);t+=`,name:${i}`}return(0,r.oW)(e)}let a=this.beautyResourcesUpgrade(e,t);return a.ok?(0,r.oW)(e):a}beautyResourcesUpgrade(e,t){if(!e.tracks||!e.materials)return(0,r.wf)(s.D.kDeserializeJsonFailed,"no tracks or materials in root");let i=e.materials,n=i.effects,a=[];for(let e of n){let{type:t}=e,i=e.resource_id;if("figure"!==t||!this.upgradeResourceIds[i])continue;let r="";e.path&&"string"==typeof e.path&&e.path,a.push(e)}return e.materials=i,(0,r.ly)()}constructor(...e){super(...e),this.version="65.0.0",this.lvSource="lv",this.ccSource="cc",this.peLvAppId=1775,this.peCcAppId=3006,this.pcLvAppId=3704,this.pcCcAppId=359289,this.upgradeResourceIds={[a.S.kSmoothSkinId]:"face_adjust_yunfu"}}}},873375:function(e,t,i){i.d(t,{w:function(){return s}});var r=i(690613),n=i(341360),a=i(710879),o=i(283395);class s extends n.k{migrateInner(e,t){let i=this.beautyResourcesUpgrade(e);if(!i.ok)return i;let n=this.backgroundStyleUpgrade(e,t);return n.ok?(0,r.oW)(e):n}beautyResourcesUpgrade(e){if(!e)return(0,r.wf)(o.D.kDeserializeJsonFailed,"no materials in root");this.draftBeautyResourcesUpgrade(e);let{drafts:t}=e;if(t&&Array.isArray(t))for(let e of t){let t=e.draft;if(!t)return(0,r.wf)(o.D.kDeserializeJsonFailed,"no sub_root in sub draft");let i=this.draftBeautyResourcesUpgrade(t);if(!i.ok)return i}return(0,r.ly)()}draftBeautyResourcesUpgrade(e){let t=e.effects;if(!t)return(0,r.wf)(o.D.kDeserializeJsonFailed,"effects not an array");for(let e of t){if("figure"!==e.type)continue;let t=e.resource_id,i=this.upgradeResourceIds[t];if(!!i)e.intensity_key=i[1],e.path=""}return(0,r.ly)()}backgroundStyleUpgrade(e,t){let i=e.materials;if(i){let t=i.texts;if(Array.isArray(t))for(let e of t)void 0===e.background_style&&(e.background_style=e.background_color?1:0);e.materials=i}if(i){let{drafts:t}=i;if(Array.isArray(t))for(let e of t){let t=e.draft;if(!t)continue;let i=t.materials;if(i){let e=i.texts;if(Array.isArray(e))for(let t of e)void 0===t.background_style&&(t.background_style=t.background_color?1:"")}}e.materials=i}return(0,r.ly)()}constructor(...e){super(...e),this.version="68.0.0",this.upgradeResourceIds={[a.S.kSmoothSkinId]:"face_adjust_yunfu"}}}},126073:function(e,t,i){i.d(t,{G:function(){return o}});var r=i(690613),n=i(341360),a=i(340294);class o extends n.k{migrateInner(e,t){let i=this.fontSourcePlatformFix(e,t);return i.ok?(0,r.oW)(e):i}fontSourcePlatformFix(e,t){let i=!1;if(e.platform&&(0,a.Fz)(e.platform)){let t=e.platform,r="",n="";t.app_version&&"string"==typeof t.app_version&&(r=t.app_version),t.os&&"string"==typeof t.os&&(n=t.os),("9.5.0"===r||"9.6.0"===r||"9.7.0"===r)&&"Android"===n&&(i=!0)}if(e.last_modified_platform&&(0,a.Fz)(e.last_modified_platform)){let t=e.last_modified_platform,r="",n="";t.app_version&&"string"==typeof t.app_version&&(r=t.app_version),t.os&&"string"==typeof t.os&&(n=t.os),("9.5.0"===r||"9.6.0"===r||"9.7.0"===r)&&"Android"===n&&(i=!0)}if(i&&e.materials&&(0,a.Fz)(e.materials)){let t=e.materials;if(t.texts&&Array.isArray(t.texts)){let e=t.texts;for(let t=0;t<e.length;t++){let i=e[t];if(i.fonts&&Array.isArray(i.fonts)){let e=i.fonts;for(let t=0;t<e.length;t++){let i=e[t],r="",n=0;i.category_name&&"string"==typeof i.category_name&&(r=i.category_name),i.source_platform&&"number"==typeof i.source_platform&&(n=i.source_platform),"\u6536\u85CF"===r&&2===n&&(i.source_platform=0),1===n&&(i.source_platform=0)}}}}e.materials=t}return(0,r.ly)()}constructor(...e){super(...e),this.version="68.0.1"}}},285649:function(e,t,i){i.d(t,{B:function(){return a}});var r=i(690613),n=i(341360);class a extends n.k{migrateInner(e,t){return this.migrateCropScale(e),(0,r.oW)(e)}migrateCropScale(e){if(!("tracks"in e)||!("materials"in e))return;let t=e.tracks,i=e.materials;if(!("videos"in i))return;let r=i.videos;for(let e of t){if("video"===e.type)for(let t of e.segments){if(!("common_keyframes"in t))continue;let e=r.find(e=>t.material_id===e.id);if(!e)continue;let i=e.crop_scale;if(!(i<=0))for(let e of t.common_keyframes){if("property_type"in e&&"keyframe_list"in e&&"KFTypeScale"===e.property_type)for(let t of e.keyframe_list){if(!("values"in t))continue;let e=t.values,r=[];for(let t=0;t<e.length;t++){let n=e[t];r.push(n/i)}t.values=r}}}}}constructor(...e){super(...e),this.version="74.0.0",this.needEnumerateSubDrafts=!0}}},994551:function(e,t,i){i.d(t,{u:function(){return o}});var r=i(690613),n=i(341360),a=i(283395);class o extends n.k{migrateInner(e,t){if(!("materials"in e))return(0,r.wf)(a.D.kDraftValidateFailed,"no materials in json");let i=this.beautyResourcesUpgrade(e,t);if(!i.ok)return i;let n=e.materials;if(n.texts&&Array.isArray(n.texts)){for(let e of n.texts)if(e.background_style&&null!==e.background_style&&e.background_width&&e.background_height){let t=e.background_width,i=e.background_height;e.background_width=t>1?t-1:0,e.background_height=i>1?.5*i-.5:0}e.materials=n}return(0,r.oW)(e)}beautyResourcesUpgrade(e,t){var i,n;if(!("tracks"in e)||!("materials"in e))return(0,r.wf)(a.D.kDeserializeJsonFailed,"no tracks or materials in root");let o=null!==(i=e.materials)&&void 0!==i?i:{},s=null!==(n=o.effects)&&void 0!==n?n:[],l=[];for(let e of s){let{type:t}=e,i=e.resource_id;if("figure"!==t||!this.upgradeResourceIds.has(i))continue;let r="";e.path&&"string"==typeof e.path&&e.path,l.push(e)}return e.materials=o,(0,r.ly)()}constructor(...e){super(...e),this.version="76.0.0",this.needEnumerateSubDrafts=!0,this.upgradeResourceIds=new Set(["resource_id1","resource_id2"])}}},875351:function(e,t,i){i.d(t,{r:function(){return l}});var r=i(690613),n=i(341360),a=i(602777),o=i(987733),s=i(720207);class l extends n.k{migrateInner(e,t){return this.migrationDraftCommonKeyframe(e),this.migrateForSubtitleWords(e),this.migrateAIGCGamePlay(e),(0,r.oW)(e)}migrateAIGCGamePlay(e){if(!(0,o._G)(e,"materials"))return;let t=e.materials;if(!!(0,o._G)(t,"videos"))for(let e of t.videos){if(!(0,o._G)(e,"gameplay"))continue;let t=e.gameplay;if(!!(0,o._G)(t,"is_aigc"))t.is_aigc&&(e.is_ai_generate_content=!0)}}migrationDraftCommonKeyframe(e){for(let t of e.tracks||[])for(let e of t.segments||[]){if(!("common_keyframes"in e))continue;let t=e.common_keyframes;this.migrationCommonKeyframe(t)}}migrationCommonKeyframe(e){(0,s.yB)(e,new Map([[a.Eu.KFTypeScale,[{newType:a.Eu.KFTypeScaleX,valueSize:1},{newType:a.Eu.KFTypeScaleY,valueSize:1}]],[a.Eu.KFTypeMaskPostion,[{newType:a.Eu.KFTypeMaskPostionX,valueSize:1},{newType:a.Eu.KFTypeMaskPostionY,valueSize:1}]],[a.Eu.KFTypeMaskSize,[{newType:a.Eu.KFTypeMaskSizeX,valueSize:1},{newType:a.Eu.KFTypeMaskSizeY,valueSize:1}]]]))}migrateForSubtitleWords(e){if("materials"in e){let t=e.materials;if("texts"in t&&Array.isArray(t.texts)&&t.texts.length>0){for(let e of t.texts)if("words"in e){let t=e.words;if(!Array.isArray(t))continue;let i={},r=[],n=[],a=[];for(let e of t)r.push(e.text),n.push(e.start_time),a.push(e.end_time);i.text=r,i.start_time=n,i.end_time=a,e.words=i}}}}constructor(...e){super(...e),this.version="77.0.0",this.needEnumerateSubDrafts=!0}}},987733:function(e,t,i){i.d(t,{Je:function(){return o},R0:function(){return a},UC:function(){return u},_G:function(){return s},gt:function(){return m},kA:function(){return l},lt:function(){return _},vl:function(){return d}});var r=i(800788),n=i(722169);function a(e){let t=0;try{let i=e.split(".");if(3!==i.length)return t;let r=0;for(let e=i.length-1;e>=0;--e){let n=parseInt(i[e]),a=Math.pow(10,2*r);t+=n*a,r++}}catch{}return t}function o(e){return["bigint","number"].includes(typeof e)}function s(e,t){return t in e&&null!==e[t]&&void 0!==e[t]}function l(e){var t;return null!==(t=e.new_version)&&void 0!==t?t:""}function u(e){let t=0;return e.version&&(t=parseInt(e.version,10)),e.new_version&&(t=a(e.new_version)),t}function d(e){var t;return null!==(t=e.version)&&void 0!==t?t:"0.0.0"}function c(e){let[t,i,a]=e.split(".");if((0,n.isNumber)(Number(t))&&(0,n.isNumber)(Number(i))&&(0,n.isNumber)(Number(a)))return[Number(t),Number(i),Number(a)];(0,r.ss)(`version is not valid, version: ${e}`)}function _(e,t){let[i,r,n]=c(e),[a,o,s]=c(t);return i!==a?i<a:r!==o?r<o:n<s}function m(e,t){let[i,r,n]=c(e),[a,o,s]=c(t);return i!==a?i>a:r!==o?r>o:n>s}},164427:function(e,t,i){i.d(t,{x:function(){return o}});var r=i(690613),n=i(12826),a=i(211561);class o extends n.j{repair(e){var t,i,n,o;let{draft:s}=e;if((null===(i=s.materials)||void 0===i?void 0:null===(t=i.drafts)||void 0===t?void 0:t.length)&&s.materials.drafts.forEach(e=>this.repair({draft:e.draft})),!(null===(n=s.materials)||void 0===n?void 0:n.color_curves)||!Array.isArray(null===(o=s.materials)||void 0===o?void 0:o.color_curves))return(0,r.oW)(e);for(let e of s.materials.color_curves){let{type:t,resource_id:i}=e;"7206147814030578178"===i&&t===a.cVg.MetaTypeColorCurves&&(e.resource_id="7199840404223562241")}return(0,r.oW)(e)}}},159653:function(e,t,i){i.d(t,{N:function(){return a}});var r=i(690613),n=i(12826);class a extends n.j{repair(e){let{draft:t}=e;if(!Array.isArray(t.tracks))return(0,r.oW)(e);for(let e of t.tracks){if((null==e?void 0:e.type)!=="text"||!Array.isArray(e.segments))continue;let t=[],r=e.segments.length;for(;r--;){var i,n;let a=e.segments[r],o=null==a?void 0:a.target_timerange,s=BigInt(null!==(i=null==o?void 0:o.start)&&void 0!==i?i:0),l=BigInt(null!==(n=null==o?void 0:o.duration)&&void 0!==n?n:0)+s;this._canInsert(t,s,l)?t.push([s,l]):e.segments.splice(r,1)}}return(0,r.oW)(e)}_canInsert(e,t,i){for(let r of e)if(r[0]<=t&&t<r[1]||r[0]<i&&i<=r[1]||r[0]>=t&&i>=r[1])return!1;return!0}}},234396:function(e,t,i){i.d(t,{H:function(){return a},K:function(){return n}});var r=i(637139);let n=r.I;class a extends r.U{constructor(e){super(),this.tasks=[],this.tasks=e}}},985388:function(e,t,i){i.d(t,{s:function(){return s}});var r=i(481631),n=i(234396),a=i(690613),o=i(211561);class s extends n.K{repair(e){let{draft:t}=e,i=[];for(let e of t.tracks)if(e.type===o.pNd.TrackTypeVideo){for(let t of e.segments){var n;if((0,r.he)(t)&&(null===(n=t.materialDraft)||void 0===n?void 0:n.draft)){let e=this.repair({draft:t.materialDraft.draft});if(!e.ok)return e;t.materialDraft.draft=e.value.draft}}i.push(e)}else if(e.type===o.pNd.TrackTypeVideoEffect){let n=[];for(let i of e.segments){if(!(0,r.w5)(i)){n.push(i);continue}let e=i.material;if(e){let r=e.type;[o.cVg.MetaTypeVideoEffect,o.cVg.MetaTypeFaceEffect,o.cVg.MetaTypeFigure].includes(r)&&0===e.value&&(e.value=1);let a=e.applyTargetType;a===o.nH8.MainVideo?this.convertForApplyMainVideo(t,i):a===o.nH8.SubVideo?this.convertForApplySubVideo(t,i):n.push(i)}}if(!n.length)continue;e.segments=n,i.push(e)}else i.push(e);return t.tracks=i,(0,a.oW)(e)}convertForApplyMainVideo(e,t){if(!e||!(null==t?void 0:t.material))return;let i=e.getMainTrack();if(!!i)for(let e of i.segments){if(!(0,r.he)(e))continue;!e.videoEffects&&(e.videoEffects=[]);let i=e.videoEffects.findIndex(e=>e.id===t.material.id);if(-1!==i&&e.videoEffects.splice(i,1),this.isTimeRangeIntersection(e.targetTimerange,t.targetTimerange)){let i=t.material.clone(!0);i.renderIndex=t.renderIndex,this.setEffectTimeRange(i,t.targetTimerange,e.targetTimerange),e.videoEffects.push(i)}}}convertForApplySubVideo(e,t){if(!!e&&!!(null==t?void 0:t.material))for(let i of e.getTracksByTypeAndFlag(o.pNd.TrackTypeVideo,o.w9k.FlagSubVideo))for(let e of i.segments){if(!(0,r.he)(e))continue;!e.videoEffects&&(e.videoEffects=[]);let i=e.videoEffects.findIndex(e=>e.id===t.material.id);if(-1!==i){this.isTimeRangeIntersection(e.targetTimerange,t.targetTimerange)?this.setEffectTimeRange(t.material,t.targetTimerange,e.targetTimerange):e.videoEffects.splice(i);return}}}isTimeRangeIntersection(e,t){return!(this.getTimeRangeEnd(e)<=t.start||this.getTimeRangeEnd(t)<=e.start)}getTimeRangeEnd(e){return e.start+e.duration}setEffectTimeRange(e,t,i){let r=e.timeRange||new o.tnv,n=e.applyTimeRange||new o.tnv;r.start=t.start-i.start,r.duration=t.duration,t.start<i.start?(n.start=0n-r.start,this.getTimeRangeEnd(t)>this.getTimeRangeEnd(i)?n.duration=i.duration:n.duration=t.duration-n.start):(n.start=0n,this.getTimeRangeEnd(t)>this.getTimeRangeEnd(i)?n.duration=i.duration-r.start:n.duration=t.duration),e.timeRange=r,e.applyTimeRange=n}}},407692:function(e,t,i){i.d(t,{VQ:function(){return l},xE:function(){return c}});var r=i(669686),n=i(150251),a=i(820689);let o={common:["melody_url","melody_path","beats_url","beats_path"],array:{melody_percents:{type:"common"},beat_speed_infos:{type:"object",clsName:()=>a.Uz}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.melodyUrl="",this.melodyPath="",this.beatsUrl="",this.beatsPath="",this.melodyPercents=[],this.beatSpeedInfos=[],(0,r.tZ)(this,e,s)}}let u={common:["melody_url","melody_path","beats_url","beats_path"],array:{melody_percents:{type:"common"},beat_speed_infos:{type:"object",clsName:()=>a.Uz}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},549480:function(e,t,i){i.d(t,{Dc:function(){return s},Eq:function(){return d}});var r=i(669686),n=i(150251);let a={common:["version","content","title"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.version="1.0.0",this.content="",this.title="",(0,r.tZ)(this,e,o)}}let l={common:["version","content","title"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},493904:function(e,t,i){i.d(t,{bv:function(){return l},mN:function(){return c}});var r=i(669686),n=i(150251),a=i(204638);let o={common:["segment_id"],array:{alternatives:{type:"object",clsName:()=>a.pr}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.segmentId="",this.alternatives=[],(0,r.tZ)(this,e,s)}}let u={common:["segment_id"],array:{alternatives:{type:"object",clsName:()=>a.pr}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},769066:function(e,t,i){i.d(t,{Xf:function(){return l},uu:function(){return c}});var r=i(669686),n=i(150251),a=i(291057);let o={common:["context"],array:{scene_list:{type:"object",clsName:()=>a.Br}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.sceneList=[],this.context="",(0,r.tZ)(this,e,s)}}let u={common:["context"],array:{scene_list:{type:"object",clsName:()=>a.Br}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},291057:function(e,t,i){i.d(t,{Br:function(){return s}});var r=i(669686),n=i(150251);let a={common:["segment_id","scene_prompt","server_scene_context"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.segmentId="",this.scenePrompt="",this.serverSceneContext="",(0,r.tZ)(this,e,o)}}let l={common:["segment_id","scene_prompt","server_scene_context"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},913833:function(e,t,i){i.d(t,{Dy:function(){return l},LE:function(){return c}});var r=i(669686),n=i(150251),a=i(94493);let o={common:["title","link","custom_title"],bigint:{event_id:{}},array:{section_segment_relationship:{type:"object",clsName:()=>a.Zd}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.eventId=0n,this.title="",this.link="",this.sectionSegmentRelationship=[],this.customTitle="",(0,r.tZ)(this,e,s)}}let u={common:["title","link","custom_title"],bigint:{event_id:{}},array:{section_segment_relationship:{type:"object",clsName:()=>a.Zd}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},864509:function(e,t,i){i.d(t,{dD:function(){return s}});var r=i(669686),n=i(150251);let a={common:["type","string_value"],array:{value:{type:"common"}}},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.type="",this.value=[],this.stringValue="",(0,r.tZ)(this,e,o)}}let l={common:["type","string_value"],array:{value:{type:"common"}}},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},647117:function(e,t,i){i.d(t,{Bz:function(){return d},fA:function(){return s}});var r=i(669686),n=i(150251);let a={common:["benefit_log_id","benefit_log_extra"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.benefitLogId="",this.benefitLogExtra="",(0,r.tZ)(this,e,o)}}let l={common:["benefit_log_id","benefit_log_extra"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},574787:function(e,t,i){i.d(t,{DB:function(){return _},Dy:function(){return u}});var r=i(602777),n=i(669686),a=i(150251),o=i(880515);let s={common:["version","has_adjusted_render_layer","is_use_edit_multi_camera","is_open_expand_player","is_use_loudness_unify","is_use_adjust","is_use_smart_adjust_color","is_use_retouch_face","is_use_smart_motion","is_use_lock_object","is_use_text_to_audio","edit_type","publish_type","publish_enter_from","profile_entrance_type","single_function_type"],bigint:{eye_correct_enabled_multi_face_time:{}},array:{text_convert_case_types:{type:"common"}},object:{ai_shorts_info:{type:()=>o.mH}}},l=(0,n.I2)(s,[]);class u extends a.w8{static deserialize(e){let t=new u;return(0,n.Tz)(t,e,s),t}static serialize(e){return(0,n.o8)(e,s)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new u;return(0,n.he)(this,t,s,e),t}constructor(e={}){super(),this[a.I9]=_,this.version="",this.hasAdjustedRenderLayer=!1,this.isUseEditMultiCamera=!1,this.isOpenExpandPlayer=!1,this.isUseLoudnessUnify=!1,this.isUseAdjust=!1,this.isUseSmartAdjustColor=!1,this.isUseRetouchFace=!1,this.isUseSmartMotion=!1,this.isUseLockObject=!1,this.isUseTextToAudio=!1,this.editType=r.XI.TypeUnknown,this.textConvertCaseTypes=[],this.publishType="",this.publishEnterFrom="",this.profileEntranceType="",this.eyeCorrectEnabledMultiFaceTime=0n,this.aiShortsInfo=new o.mH,this.singleFunctionType=r.J2.LVVESingleNone,(0,n.tZ)(this,e,l)}}let d={common:["version","has_adjusted_render_layer","is_use_edit_multi_camera","is_open_expand_player","is_use_loudness_unify","is_use_adjust","is_use_smart_adjust_color","is_use_retouch_face","is_use_smart_motion","is_use_lock_object","is_use_text_to_audio","edit_type","publish_type","publish_enter_from","profile_entrance_type","single_function_type"],bigint:{eye_correct_enabled_multi_face_time:{}},array:{text_convert_case_types:{type:"common"}},object:{ai_shorts_info:{type:()=>o.ig}}},c=(0,n.I2)(d,[]);class _ extends a.u2{static deserialize(e){let t=new _;return(0,n.Tz)(t,e,d,!0),t}static serialize(e){return(0,n.o8)(e,d,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new _;return(0,n.he)(this,t,d,e,!1,!0),t}constructor(e={}){super(),this[a._n]=u,(0,n.fZ)(this,e,c)}}},319332:function(e,t,i){i.d(t,{Q4:function(){return m},Yh:function(){return d}});var r=i(669686),n=i(150251),a=i(964904),o=i(433568),s=i(758381);let l={array:{subtitle_fragment_info_list:{type:"object",clsName:()=>s.aP}},object:{text_to_video:{type:()=>a.fM,nullable:!0},track_info:{type:()=>o.Fr,nullable:!0}}},u=(0,r.I2)(l,[]);class d extends n.w8{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l),t}static serialize(e){return(0,r.o8)(e,l)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e),t}constructor(e={}){super(),this[n.I9]=m,(0,r.tZ)(this,e,u)}}let c={array:{subtitle_fragment_info_list:{type:"object",clsName:()=>s.aP}},object:{text_to_video:{type:()=>a.zU,nullable:!0},track_info:{type:()=>o.UO,nullable:!0}}},_=(0,r.I2)(c,[]);class m extends n.u2{static deserialize(e){let t=new m;return(0,r.Tz)(t,e,c,!0),t}static serialize(e){return(0,r.o8)(e,c,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new m;return(0,r.he)(this,t,c,e,!1,!0),t}constructor(e={}){super(),this[n._n]=d,(0,r.fZ)(this,e,_)}}},211561:function(e,t,i){i.d(t,{CCx:()=>tc.CC,unI:()=>e1.un,W$k:()=>eg.W$,yB$:()=>H.yB,KTm:()=>es.KT,QSZ:()=>r.QS,mGD:()=>r.mG,_T0:()=>r._T,sQs:()=>r.sQ,QZ3:()=>r.QZ,GmC:()=>e$.Gm,yFe:()=>eU.yF,Q$U:()=>ep.Q$,YNN:()=>tn.YN,WuX:()=>eA.Wu,eAb:()=>J.eA,mJ:()=>te.mJ,Yy:()=>eo.Yy,Eu:()=>r.Eu,DeH:()=>D.De,zs3:()=>ey.zs,TkD:()=>ev.Tk,BWs:()=>p.BW,Vv6:()=>r.Vv,DVV:()=>r.DV,jRC:()=>r.jR,PbZ:()=>r.Pb,XHM:()=>r.XH,$SW:()=>r.$S,pNd:()=>r.pN,FC7:()=>r.FC,nR_:()=>eh.nR,FJA:()=>$.FJ,FdM:()=>P.Fd,ng$:()=>F.ng,W9x:()=>J.W9,K2q:()=>B.K2,a89:()=>Q.a8,UJq:()=>Q.UJ,oGT:()=>et.oG,koq:()=>eM.ko,KS6:()=>eE.KS,CAe:()=>eK.CA,Q4W:()=>eb.Q4,m4H:()=>eV.m4,anD:()=>eT.an,AaE:()=>p.A,yY$:()=>r.yY,M4l:()=>r.M4,w9k:()=>r.w9,unS:()=>K.un,n1J:()=>r.n1,ZTd:()=>r.ZT,JdR:()=>U.Jd,V_m:()=>j.V_,XPs:()=>eG.XP,jU8:()=>eR.jU,tpe:()=>eR.tp,Zk4:()=>e_.Zk,jG3:()=>q.jG,ZlS:()=>tu.Zl,Fyg:()=>tT.Fy,xKN:()=>tT.xK,pVX:()=>tf.pV,NOn:()=>td.NO,nkD:()=>t_.nk,LtW:()=>t_.Lt,jGb:()=>ts.jG,JcE:()=>to.Jc,HVf:()=>to.HV,v5b:()=>eQ.v5,zh9:()=>eQ.zh,nYp:()=>e2.nY,Rfr:()=>ek.Rf,tQC:()=>e5.tQ,BnV:()=>e6.Bn,np1:()=>r.np,tLB:()=>r.tL,dlq:()=>tk.dl,j8m:()=>r.j8,b2c:()=>r.b2,nj7:()=>r.nj,bZ2:()=>r.bZ,zzh:()=>r.zz,txy:()=>r.tx,R6k:()=>r.R6,DeX:()=>r.De,hsW:()=>r.hs,$u6:()=>ty.$u,x_X:()=>tI.x_,LZ8:()=>tE.LZ,HCN:()=>tE.HC,B62:()=>tA.B6,rkU:()=>tg.rk,TBZ:()=>ea.TB,ZgK:()=>e3.Zg,zGW:()=>tt.zG,P28:()=>tt.P2,H$F:()=>ti.H$,P$b:()=>eH.P$,b9B:()=>c.b9,tnv:()=>n.tn,zel:()=>n.ze,fQ8:()=>tO.fQ,jPZ:()=>h.jP,vYu:()=>ec.vY,bAm:()=>ec.bA,POV:()=>ej.PO,hdn:()=>ez.hd,OfV:()=>F.Of,SVG:()=>V.SV,C4B:()=>tO.C4,wx7:()=>h.wx,OHm:()=>ej.OH,gzg:()=>y.gz,ess:()=>eZ.es,WlO:()=>tl.Wl,ETn:()=>e9.ET,$my:()=>ti.$m,R5M:()=>e4.R5,ZAu:()=>N.ZA,Fly:()=>R.Fl,reO:()=>te.re,nuI:()=>tD.nu,VBR:()=>eF.VB,r8x:()=>ei.r8,$2f:()=>eC.$2,vYA:()=>a.vY,PgN:()=>e8.Pg,z8z:()=>M.z8,P7_:()=>O.P7,v3W:()=>O.v3,VQX:()=>eu.VQ,Dco:()=>T.Dc,bvB:()=>w.bv,nii:()=>f.ni,Hcd:()=>_.Hc,Llt:()=>k,t55:()=>eP.t5,zAG:()=>g.zA,$2y:()=>tw.$2,t4T:()=>eS.t4,hye:()=>x.hy,H1R:()=>W.H1,JQY:()=>W.JQ,LhI:()=>Y.Lh,Dqu:()=>eO.Dq,XX7:()=>tC.XX,Ngh:()=>tv.Ng,VJv:()=>b.VJ,PA:()=>Z.PA,Fm:()=>tA.Fm,jhR:()=>b.jh,bXy:()=>L.bX,tLq:()=>L.tL,XcK:()=>eB.Xc,Hpt:()=>ew.Hp,ZPj:()=>Z.ZP,ZDr:()=>H.ZD,lMN:()=>es.lM,hWf:()=>el.hW,NZo:()=>el.NZ,fln:()=>en.fl,XlB:()=>r.Xl,RZH:()=>r.RZ,Z6P:()=>r.Z6,zDy:()=>r.zD,TUZ:()=>r.TU,SbQ:()=>r.Sb,iEA:()=>tM.iE,Ocy:()=>r.Oc,wbm:()=>eD.wb,oIP:()=>j.oI,GZI:()=>ta.GZ,UgE:()=>e_.Ug,cJv:()=>er.cJ,W99:()=>G.W9,edz:()=>q.ed,WQq:()=>ee.WQ,_0h:()=>ee._0,kph:()=>tf.kp,_6D:()=>td._6,_OS:()=>d._O,ebT:()=>eW.eb,MwE:()=>eL.Mw,ck6:()=>ts.ck,MmU:()=>eX.Mm,seH:()=>r.se,_6S:()=>r._6,Yzk:()=>r.Yz,SXD:()=>r.SX,wHM:()=>r.wH,cvu:()=>r.cv,cVg:()=>r.cV,IDM:()=>r.ID,_$4:()=>ty._$,wSc:()=>tm.wS,M_b:()=>tm.M_,go0:()=>tI.go,GfO:()=>tp.Gf,AO$:()=>tp.AO,MM7:()=>th.MM,MYy:()=>th.MY,S8D:()=>tg.S8,wIf:()=>tu.wI,UbL:()=>B.Ub,yP4:()=>em.yP,_Xo:()=>em._X,yU0:()=>tr.yU,gee:()=>eJ.ge,kJb:()=>ef.kJ,k_B:()=>R.k_,_ZT:()=>X._Z,q1S:()=>eq.q1,Kr8:()=>e0.Kr,sq5:()=>tS.sq,zAn:()=>r.zA,VAL:()=>r.VA,nH8:()=>r.nH,xbm:()=>r.xb,rxY:()=>r.rx,ZXd:()=>r.ZX,bEb:()=>e$.bE,vI$:()=>eU.vI,Zgq:()=>tn.Zg,rdD:()=>eA.rd,pji:()=>e7.pj,prf:()=>z.pr,Fq$:()=>en.Fq,tUl:()=>eN.tU,VJQ:()=>eI.VJ,Xkj:()=>eI.Xk,cNp:()=>tS.cN,mNK:()=>w.mN,Wrv:()=>C.Wr,C8D:()=>f.C8,I8_:()=>a.I8,STV:()=>e8.ST,e_Q:()=>I,UzX:()=>ed.Uz,aw1:()=>eY.aw,SvS:()=>g.Sv,WX1:()=>ex.WX,__d:()=>eO.__,Ciz:()=>m.Ci,o_k:()=>m.o_,C6D:()=>tv.C6,M_W:()=>tc.M_});var r=i("602777");i("560845"),i("823152"),i("215040"),i("734879"),i("350990"),i("363651"),i("459658"),i("60180"),i("835056"),i("88874"),i("670908"),i("542099"),i("728592"),i("107001"),i("232729"),i("444211"),i("572517"),i("726336"),i("674685"),i("310385"),i("270190"),i("940931"),i("355399"),i("829354"),i("249321"),i("834072"),i("137414"),i("557871"),i("781189"),i("879584"),i("544664"),i("86498"),i("844794"),i("78676"),i("657419"),i("158251"),i("445628"),i("706731"),i("942360"),i("678021"),i("211982"),i("909809"),i("585149"),i("574787"),i("570435"),i("478576"),i("650756"),i("45793"),i("286524"),i("768047"),i("176104"),i("199234"),i("573149"),i("124157"),i("168433"),i("426555"),i("864670"),i("706719"),i("225504"),i("404660"),i("267693"),i("697444");var n=i("180942");i("187200");var a=i("558515");i("493478"),i("934388");var o=i("669686"),s=i("150251"),l=i("534931"),u=i("677655");(0,o.I2)({common:["scene","request_id","edit_template_id","original_template_id","template_extra","import_template_url","template_id_symbol","capflow_node_key_status"],bigint:{subtitle_status:{}},array:{smart_label_list:{type:"common"},material_infos:{type:"object",clsName:()=>u.gi},template_tags:{type:"common"}},object:{user_prompt:{type:()=>l.Lh}}},[]);(0,o.I2)({common:["scene","request_id","edit_template_id","original_template_id","template_extra","import_template_url","template_id_symbol","capflow_node_key_status"],bigint:{subtitle_status:{}},array:{smart_label_list:{type:"common"},material_infos:{type:"object",clsName:()=>u.gi},template_tags:{type:"common"}},object:{user_prompt:{type:()=>l.Ms}}},[]),i("640233"),i("123246"),i("368372"),i("316976"),i("879662"),i("862807"),i("194877"),i("143703"),i("666862"),i("977209"),i("689631"),i("794554"),i("519124"),i("734301"),i("283482"),i("485451");var d=i("840700"),c=i("510742");i("580425"),i("584845");var _=i("760941");i("300472");var m=i("889803"),h=i("883501"),p=i("608757");i("167953");var g=i("851678");i("610489"),i("60041"),i("351421"),i("25588"),i("796760"),i("776320"),i("431567"),i("166234"),i("45854"),i("303220"),i("318284"),i("724776"),i("569230"),i("179849"),i("767348"),i("622625"),i("274120"),i("432202"),i("785108"),i("482764"),i("250863"),i("189190"),i("478351"),i("25749"),i("204437"),i("371997"),i("551081"),i("636272"),i("450911"),i("914783"),i("917955"),i("775690"),i("133314"),i("63285"),i("26195"),i("223438");var f=i("767282"),T=i("549480"),y=i("369751");let v={common:["path","track_id","segment_id","material_id","pipeline_id"],array:{algorithms:{type:"object",clsName:()=>y.gz}}},E=(0,o.I2)(v,[]);class I extends s.w8{static deserialize(e){let t=new I;return(0,o.Tz)(t,e,v),t}static serialize(e){return(0,o.o8)(e,v)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new I;return(0,o.he)(this,t,v,e),t}constructor(e={}){super(),this[s.I9]=k,this.trackId="",this.segmentId="",this.materialId="",(0,o.tZ)(this,e,E)}}let A={common:["path","track_id","segment_id","material_id","pipeline_id"],array:{algorithms:{type:"object",clsName:()=>y.gz}}},S=(0,o.I2)(A,[]);class k extends s.u2{static deserialize(e){let t=new k;return(0,o.Tz)(t,e,A,!0),t}static serialize(e){return(0,o.o8)(e,A,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new k;return(0,o.he)(this,t,A,e,!1,!0),t}constructor(e={}){super(),this[s._n]=I,(0,o.fZ)(this,e,S)}}i("5910"),i("40624"),i("939402"),i("776278"),i("791007"),i("937042"),i("93744"),i("689127"),i("827707"),i("86488"),i("830709"),i("319008"),i("68187"),i("543005"),i("968266"),i("664021"),i("840961"),i("769066"),i("291057"),i("187496"),i("642853");var M=i("240156"),w=i("493904"),C=i("268932");i("204638");var O=i("357646");i("880515"),i("948180");var D=i("647847"),x=i("253777"),b=i("901262"),R=i("77401"),N=i("987706"),V=i("30145"),F=i("527347"),P=i("542926");i("39498"),i("468634");var L=i("238830"),z=i("750581");i("414375");var B=i("563091");i("369776");var U=i("841628");i("184617"),i("128263");var K=i("156447"),j=i("984736"),G=i("518938"),H=i("254574");i("937379");var X=i("973815"),Y=i("553859"),W=i("182570"),q=i("488071"),Z=i("908301"),$=i("401611");i("468019");var J=i("686513"),Q=i("569566"),ee=i("232959");i("475034"),i("159088"),i("245062"),i("755118"),i("512116");var et=i("276583");i("66536"),i("93613"),i("392163"),i("578592"),i("379748"),i("24208"),i("396981"),i("573106"),i("301009"),i("946917");var ei=i("41750");i("667693");var er=i("266218"),en=i("6467"),ea=i("461203"),eo=i("528156");i("290703");var es=i("757327"),el=i("468699"),eu=i("407692"),ed=i("820689"),ec=i("577850");i("519769"),i("247795");var e_=i("280283"),em=i("5497"),eh=i("548782"),ep=i("64144"),eg=i("217849");i("642982"),i("774129");var ef=i("425325");i("959932");var eT=i("719314"),ey=i("590466"),ev=i("346038"),eE=i("760554"),eI=i("289109"),eA=i("379012"),eS=i("85025"),ek=i("797011");i("956969"),i("182673");var eM=i("382068"),ew=i("662719"),eC=i("852340");i("838051"),i("372149"),i("579399"),i("827174"),i("206653"),i("177611"),i("445180"),i("595506"),i("640999"),i("918783");var eO=i("555673");i("832497");var eD=i("162015"),ex=i("602432"),eb=i("319332");i("758381"),i("964904"),i("516610"),i("565875"),i("315989"),i("913833"),i("94493"),i("433568"),i("703753"),i("43987");var eR=i("213030"),eN=i("956156"),eV=i("430071"),eF=i("185236"),eP=i("103160"),eL=i("217381"),ez=i("200322"),eB=i("733017"),eU=i("398163"),eK=i("728193");i("264585");var ej=i("487253");i("466966");var eG=i("229133"),eH=i("691600"),eX=i("917062"),eY=i("818149"),eW=i("910203"),eq=i("684372");i("908099");var eZ=i("937998"),e$=i("532652"),eJ=i("301965");i("29709");var eQ=i("730174");i("380009"),i("1841");var e0=i("557599"),e1=i("905940"),e2=i("509650"),e6=i("445803");i("874745"),i("139310");var e8=i("736788"),e9=i("909497");i("560689");var e3=i("817886"),e5=i("911217");i("101506"),i("30076"),i("855274"),i("246870"),i("360291"),i("26674"),i("852500"),i("23698");var e4=i("738402");i("214802");var e7=i("583109"),te=i("589416"),tt=i("674413"),ti=i("182248");i("871011");var tr=i("541537");i("639208"),i("794239"),i("647117"),i("365013");var tn=i("143743"),ta=i("907350");i("137234");var to=i("232524"),ts=i("132392");i("67792"),i("519348"),i("959026"),i("269289"),i("38629"),i("2995"),i("345768"),i("95477"),i("303745"),i("864509"),i("323776"),i("415360"),i("908510"),i("457096"),i("597109"),i("45021"),i("76619"),i("467028"),i("28881"),i("498798"),i("135158"),i("470919"),i("746429"),i("620675"),i("988210"),i("153730"),i("180438"),i("923001"),i("527295"),i("110219");var tl=i("991913");i("36219"),i("316971"),i("653094"),i("801927"),i("21431");var tu=i("808402"),td=i("195834"),tc=i("673118"),t_=i("969577"),tm=i("192716"),th=i("760399"),tp=i("325744"),tg=i("557962"),tf=i("29489"),tT=i("806820"),ty=i("625107"),tv=i("541345"),tE=i("235369"),tI=i("173469"),tA=i("868202"),tS=i("414516");i("188428");var tk=i("765615"),tM=i("368229"),tw=i("844456"),tC=i("53823"),tO=i("458622"),tD=i("9592")},827174:function(e,t,i){i.d(t,{ye:function(){return c}});var r=i(669686),n=i(150251),a=i(883501),o=i(889803),s=i(840700),l=i(425325);let u={common:["id","type","rotation","enable_color_properties","border_width","text_alpha","background_alpha","shadow_alpha","shadow_smoothing","shadow_angle","border_color","border_alpha","text_color","shadow_color","background_color","global_alpha","bloom_color","bloom_strength","bloom_range","bloom_dir_x","bloom_dir_y"],bigint:{time_offset:{},flags:{}},object:{position:{type:()=>a.wx},scale:{type:()=>o.Ci},shadow_point:{type:()=>s._O},graph:{type:()=>l.kJ,nullable:!0}}},d=(0,r.I2)(u,[]);class c extends n.w8{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u),t}static serialize(e){return(0,r.o8)(e,u)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e),t}constructor(e={}){super(),this[n.I9]=h,this.id="",this.type="text",this.timeOffset=0n,this.flags=-1n,this.position=new a.wx,this.scale=new o.Ci,this.rotation=0,this.enableColorProperties=!0,this.borderWidth=1,this.textAlpha=1,this.backgroundAlpha=1,this.shadowAlpha=1,this.shadowSmoothing=1,this.shadowAngle=1,this.shadowPoint=new s._O,this.borderColor="",this.borderAlpha=1,this.textColor="#FFFFFFFF",this.shadowColor="",this.backgroundColor="",this.globalAlpha=1,this.bloomColor="",this.bloomStrength=0,this.bloomRange=1,this.bloomDirX=0,this.bloomDirY=0,(0,r.tZ)(this,e,d)}}let _={common:["id","type","rotation","enable_color_properties","border_width","text_alpha","background_alpha","shadow_alpha","shadow_smoothing","shadow_angle","border_color","border_alpha","text_color","shadow_color","background_color","global_alpha","bloom_color","bloom_strength","bloom_range","bloom_dir_x","bloom_dir_y"],bigint:{time_offset:{},flags:{}},object:{position:{type:()=>a.jP},scale:{type:()=>o.o_},shadow_point:{type:()=>s.d9},graph:{type:()=>l.tf,nullable:!0}}},m=(0,r.I2)(_,[]);class h extends n.u2{static deserialize(e){let t=new h;return(0,r.Tz)(t,e,_,!0),t}static serialize(e){return(0,r.o8)(e,_,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new h;return(0,r.he)(this,t,_,e,!1,!0),t}constructor(e={}){super(),this[n._n]=c,(0,r.fZ)(this,e,m)}}},838051:function(e,t,i){i.d(t,{tm:function(){return h}});var r=i(669686),n=i(150251),a=i(883501),o=i(889803),s=i(217849),l=i(425325),u=i(719314),d=i(590466),c=i(346038);let _={common:["id","type","rotation","alpha","volume","last_volume","filter_value","brightness_value","contrast_value","saturation_value","sharpen_value","highlight_value","shadow_value","white_value","black_value","clear_value","temperature_value","tone_value","fade_value","light_sensation_value","vignetting_value","particle_value","lut_value","chroma_intensity","chroma_shadow","primary_color_wheels_intensity","log_color_wheels_intensity","effect_adjust_param_1","effect_adjust_param_2","effect_adjust_param_3","smart_color_adjust_value","color_match_value","color_correct_value"],bigint:{time_offset:{},flags:{}},object:{position:{type:()=>a.wx},scale:{type:()=>o.Ci},mask_config:{type:()=>s.W$,nullable:!0},graph:{type:()=>l.kJ,nullable:!0},figure_stretch:{type:()=>u.an,nullable:!0},figure_slim:{type:()=>d.zs,nullable:!0},figure_zoom:{type:()=>c.Tk,nullable:!0}}},m=(0,r.I2)(_,[]);class h extends n.w8{static deserialize(e){let t=new h;return(0,r.Tz)(t,e,_),t}static serialize(e){return(0,r.o8)(e,_)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new h;return(0,r.he)(this,t,_,e),t}constructor(e={}){super(),this[n.I9]=f,this.id="",this.type="video",this.timeOffset=0n,this.flags=-1n,this.position=new a.wx,this.scale=new o.Ci,this.rotation=0,this.alpha=1,this.volume=1,this.lastVolume=1,this.filterValue=1,this.brightnessValue=0,this.contrastValue=0,this.saturationValue=0,this.sharpenValue=0,this.highlightValue=0,this.shadowValue=0,this.whiteValue=0,this.blackValue=0,this.clearValue=0,this.temperatureValue=0,this.toneValue=0,this.fadeValue=0,this.lightSensationValue=0,this.vignettingValue=0,this.particleValue=0,this.lutValue=0,this.chromaIntensity=0,this.chromaShadow=0,this.primaryColorWheelsIntensity=1,this.logColorWheelsIntensity=1,this.effectAdjustParam1=1,this.effectAdjustParam2=1,this.effectAdjustParam3=1,this.smartColorAdjustValue=1,this.colorMatchValue=1,this.colorCorrectValue=1,(0,r.tZ)(this,e,m)}}let p={common:["id","type","rotation","alpha","volume","last_volume","filter_value","brightness_value","contrast_value","saturation_value","sharpen_value","highlight_value","shadow_value","white_value","black_value","clear_value","temperature_value","tone_value","fade_value","light_sensation_value","vignetting_value","particle_value","lut_value","chroma_intensity","chroma_shadow","primary_color_wheels_intensity","log_color_wheels_intensity","effect_adjust_param_1","effect_adjust_param_2","effect_adjust_param_3","smart_color_adjust_value","color_match_value","color_correct_value"],bigint:{time_offset:{},flags:{}},object:{position:{type:()=>a.jP},scale:{type:()=>o.o_},mask_config:{type:()=>s.H,nullable:!0},graph:{type:()=>l.tf,nullable:!0},figure_stretch:{type:()=>u.ox,nullable:!0},figure_slim:{type:()=>d.Or,nullable:!0},figure_zoom:{type:()=>c.qB,nullable:!0}}},g=(0,r.I2)(p,[]);class f extends n.u2{static deserialize(e){let t=new f;return(0,r.Tz)(t,e,p,!0),t}static serialize(e){return(0,r.o8)(e,p,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new f;return(0,r.he)(this,t,p,e,!1,!0),t}constructor(e={}){super(),this[n._n]=h,(0,r.fZ)(this,e,g)}}},396981:function(e,t,i){i.d(t,{N2:function(){return l},WB:function(){return c}});var r=i(669686),n=i(150251),a=i(382068);let o={array:{common_keyframes:{type:"object",clsName:()=>a.ko},lyric_keyframes:{type:"object",clsName:()=>a.ko}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.commonKeyframes=[],this.lyricKeyframes=[],(0,r.tZ)(this,e,s)}}let u={array:{common_keyframes:{type:"object",clsName:()=>a.ko},lyric_keyframes:{type:"object",clsName:()=>a.ko}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},66536:function(e,t,i){i.d(t,{P7:function(){return l}});var r=i(669686),n=i(150251),a=i(392163);let o={object:{motion_blur:{type:()=>a.Vp,nullable:!0}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,(0,r.tZ)(this,e,s)}}let u={object:{motion_blur:{type:()=>a.Ol,nullable:!0}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},528156:function(e,t,i){i.d(t,{Yy:function(){return c},sn:function(){return h}});var r=i(602777),n=i(287165),a=i(669686),o=i(150251),s=i(180942),l=i(103160);let u={common:["id","constant_material_id","type","name","path","production_path","sub_type","speaker_id","resource_id","third_resource_id","source_platform","category_id","category_name","is_vc_clone_tone","is_ugc"],array:{audio_adjust_params:{type:"object",clsName:()=>l.t5}},object:{time_range:{type:()=>s.tn,nullable:!0}}},d=(0,a.I2)(u,[]);class c extends o.w8{static deserialize(e){let t=new c;return(0,a.Tz)(t,e,u),t}static serialize(e){return(0,a.o8)(e,u)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,a.he)(this,t,u,e,["id"]),t}constructor(e={}){super(),this[o.I9]=h,this.id=(0,n.p)(),this.constantMaterialId="",this.type=r.cV.MetaTypeAudioEffect,this.name="",this.path="",this.productionPath="",this.subType=r.xb.AudioEffectTypeNormal,this.speakerId="",this.resourceId="",this.thirdResourceId="",this.sourcePlatform=0,this.categoryId="",this.categoryName="",this.audioAdjustParams=[],this.isVcCloneTone=!1,this.isUgc=!1,(0,a.tZ)(this,e,d)}}let _={common:["id","constant_material_id","type","name","path","production_path","sub_type","speaker_id","resource_id","third_resource_id","source_platform","category_id","category_name","is_vc_clone_tone","is_ugc"],array:{audio_adjust_params:{type:"object",clsName:()=>l.t5}},object:{time_range:{type:()=>s.ze,nullable:!0}}},m=(0,a.I2)(_,[]);class h extends o.u2{static deserialize(e){let t=new h;return(0,a.Tz)(t,e,_,!0),t}static serialize(e){return(0,a.o8)(e,_,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new h;return(0,a.he)(this,t,_,e,["id"],!0),t}constructor(e={}){super(),this[o._n]=c,(0,a.fZ)(this,e,m)}}},468699:function(e,t,i){i.d(t,{NZ:function(){return h},hW:function(){return c}});var r=i(602777),n=i(287165),a=i(669686),o=i(150251),s=i(577850),l=i(407692);let u={common:["id","type","enable_ai_beats","gear","gear_count","mode"],array:{user_beats:{type:"bigint"}},object:{user_delete_ai_beats:{type:()=>s.vY,nullable:!0},ai_beats:{type:()=>l.VQ,nullable:!0}}},d=(0,a.I2)(u,[]);class c extends o.w8{static deserialize(e){let t=new c;return(0,a.Tz)(t,e,u),t}static serialize(e){return(0,a.o8)(e,u)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,a.he)(this,t,u,e,["id"]),t}constructor(e={}){super(),this[o.I9]=h,this.id=(0,n.p)(),this.type=r.cV.MetaTypeBeats,this.enableAiBeats=!1,this.gear=404,this.gearCount=0,this.mode=404,this.userBeats=[],(0,a.tZ)(this,e,d)}}let _={common:["id","type","enable_ai_beats","gear","gear_count","mode"],array:{user_beats:{type:"bigint"}},object:{user_delete_ai_beats:{type:()=>s.bA,nullable:!0},ai_beats:{type:()=>l.xE,nullable:!0}}},m=(0,a.I2)(_,[]);class h extends o.u2{static deserialize(e){let t=new h;return(0,a.Tz)(t,e,_,!0),t}static serialize(e){return(0,a.o8)(e,_,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new h;return(0,a.he)(this,t,_,e,["id"],!0),t}constructor(e={}){super(),this[o._n]=c,(0,a.fZ)(this,e,m)}}},289109:function(e,t,i){i.d(t,{VJ:function(){return u},Xk:function(){return _}});var r=i(602777),n=i(287165),a=i(669686),o=i(150251);let s={common:["id","type","color","intensity_value","shadow_value","path","resource_id","should_transfer_color","edge_smooth_value","spill_value","version"]},l=(0,a.I2)(s,[]);class u extends o.w8{static deserialize(e){let t=new u;return(0,a.Tz)(t,e,s),t}static serialize(e){return(0,a.o8)(e,s)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new u;return(0,a.he)(this,t,s,e,["id"]),t}constructor(e={}){super(),this[o.I9]=_,this.id=(0,n.p)(),this.type=r.cV.MetaTypeChroma,this.color="",this.intensityValue=0,this.shadowValue=0,this.path="",this.resourceId="",this.shouldTransferColor=!1,this.edgeSmoothValue=0,this.spillValue=0,this.version="",(0,a.tZ)(this,e,l)}}let d={common:["id","type","color","intensity_value","shadow_value","path","resource_id","should_transfer_color","edge_smooth_value","spill_value","version"]},c=(0,a.I2)(d,[]);class _ extends o.u2{static deserialize(e){let t=new _;return(0,a.Tz)(t,e,d,!0),t}static serialize(e){return(0,a.o8)(e,d,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new _;return(0,a.he)(this,t,d,e,["id"],!0),t}constructor(e={}){super(),this[o._n]=u,(0,a.fZ)(this,e,c)}}},379012:function(e,t,i){i.d(t,{Wu:function(){return c},rd:function(){return h}});var r=i(602777),n=i(287165),a=i(417273),o=i(669686),s=i(150251),l=i(573106);let u={common:["id","type","name","category_id","category_name","formula_id","combination_id","combination_type","precompile_combination","draft_file_path","draft_cover_path","draft_config_path"],object:{aimusic_mv_template_info:{type:()=>l.v0,nullable:!0},draft:{type:()=>a.pN}}},d=(0,o.I2)(u,[]);class c extends s.w8{static deserialize(e){let t=new c;return(0,o.Tz)(t,e,u),t}static serialize(e){return(0,o.o8)(e,u)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,o.he)(this,t,u,e,["id"]),t}constructor(e={}){super(),this[s.I9]=h,this.id=(0,n.p)(),this.type=r.cV.MetaTypeComposition,this.name="",this.categoryId="",this.categoryName="",this.formulaId="",this.combinationId="",this.combinationType=r.AH.CombinationTypeNone,this.precompileCombination=!1,this.draft=new a.pN,this.draftFilePath="",this.draftCoverPath="",this.draftConfigPath="",(0,o.tZ)(this,e,d)}}let _={common:["id","type","name","category_id","category_name","formula_id","combination_id","combination_type","precompile_combination","draft_file_path","draft_cover_path","draft_config_path"],object:{aimusic_mv_template_info:{type:()=>l.DB,nullable:!0},draft:{type:()=>a.Tl}}},m=(0,o.I2)(_,[]);class h extends s.u2{static deserialize(e){let t=new h;return(0,o.Tz)(t,e,_,!0),t}static serialize(e){return(0,o.o8)(e,_,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new h;return(0,o.he)(this,t,_,e,["id"],!0),t}constructor(e={}){super(),this[s._n]=c,(0,o.fZ)(this,e,m)}}},620675:function(e,t,i){i.d(t,{tP:function(){return d},w2:function(){return m}});var r=i(669686),n=i(150251),a=i(135158),o=i(470919),s=i(746429);let l={common:["render_type"],object:{solid:{type:()=>a.DZ},gradient:{type:()=>o.ph},texture:{type:()=>s.xE}}},u=(0,r.I2)(l,[]);class d extends n.w8{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l),t}static serialize(e){return(0,r.o8)(e,l)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e),t}constructor(e={}){super(),this[n.I9]=m,this.solid=new a.DZ,this.gradient=new o.ph,this.texture=new s.xE,this.renderType="solid",(0,r.tZ)(this,e,u)}}let c={common:["render_type"],object:{solid:{type:()=>a.VY},gradient:{type:()=>o.zd},texture:{type:()=>s.GR}}},_=(0,r.I2)(c,[]);class m extends n.u2{static deserialize(e){let t=new m;return(0,r.Tz)(t,e,c,!0),t}static serialize(e){return(0,r.o8)(e,c,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new m;return(0,r.he)(this,t,c,e,!1,!0),t}constructor(e={}){super(),this[n._n]=d,(0,r.fZ)(this,e,_)}}},301009:function(e,t,i){i.d(t,{Gb:function(){return h}});var r=i(669686),n=i(150251),a=i(686513),o=i(24208),s=i(578592),l=i(379748),u=i(66536),d=i(908301),c=i(901262);let _={common:["lyric_group_id","max_sticker_track_id","material_save_mode","fps","color_space","render_index_track_mode_on","render_index","motion_blur_path"],array:{stickers:{type:"object",clsName:()=>s.Ox},video_effects:{type:"object",clsName:()=>l.Q3},video_capacity:{type:"object",clsName:()=>u.P7},background_effects:{type:"object",clsName:()=>l.Q3}},object:{lyric_canvas_blend:{type:()=>a.eA,nullable:!0},lyric_canvas_color:{type:()=>o.fM},video_animations:{type:()=>d.ZP},canvas_config:{type:()=>c.VJ}}},m=(0,r.I2)(_,[]);class h extends n.w8{static deserialize(e){let t=new h;return(0,r.Tz)(t,e,_),t}static serialize(e){return(0,r.o8)(e,_)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new h;return(0,r.he)(this,t,_,e),t}constructor(e={}){super(),this[n.I9]=f,this.lyricGroupId="",this.lyricCanvasColor=new o.fM,this.stickers=[],this.videoEffects=[],this.videoCapacity=[],this.videoAnimations=new d.ZP,this.backgroundEffects=[],this.maxStickerTrackId=0,this.materialSaveMode=0,this.canvasConfig=new c.VJ,this.fps=30,this.colorSpace=-1,this.renderIndexTrackModeOn=!1,this.renderIndex=0,this.motionBlurPath="",(0,r.tZ)(this,e,m)}}let p={common:["lyric_group_id","max_sticker_track_id","material_save_mode","fps","color_space","render_index_track_mode_on","render_index","motion_blur_path"],array:{stickers:{type:"object",clsName:()=>s.Ox},video_effects:{type:"object",clsName:()=>l.Q3},video_capacity:{type:"object",clsName:()=>u.P7},background_effects:{type:"object",clsName:()=>l.Q3}},object:{lyric_canvas_blend:{type:()=>a.W9,nullable:!0},lyric_canvas_color:{type:()=>o.f6},video_animations:{type:()=>d.PA},canvas_config:{type:()=>c.jh}}},g=(0,r.I2)(p,[]);class f extends n.u2{static deserialize(e){let t=new f;return(0,r.Tz)(t,e,p,!0),t}static serialize(e){return(0,r.o8)(e,p,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new f;return(0,r.he)(this,t,p,e,!1,!0),t}constructor(e={}){super(),this[n._n]=h,(0,r.fZ)(this,e,g)}}},365013:function(e,t,i){i.d(t,{BQ:function(){return c},k1:function(){return l}});var r=i(287165),n=i(669686),a=i(150251);let o={common:["id","cur_camera_track_id","pre_compile_to_normal_video"],array:{audio_open_track_id_list:{type:"common"}}},s=(0,n.I2)(o,[]);class l extends a.w8{static deserialize(e){let t=new l;return(0,n.Tz)(t,e,o),t}static serialize(e){return(0,n.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,n.he)(this,t,o,e,["id"]),t}constructor(e={}){super(),this[a.I9]=c,this.id=(0,r.p)(),this.curCameraTrackId="",this.audioOpenTrackIdList=[],this.preCompileToNormalVideo=!1,(0,n.tZ)(this,e,s)}}let u={common:["id","cur_camera_track_id","pre_compile_to_normal_video"],array:{audio_open_track_id_list:{type:"common"}}},d=(0,n.I2)(u,[]);class c extends a.u2{static deserialize(e){let t=new c;return(0,n.Tz)(t,e,u,!0),t}static serialize(e){return(0,n.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,n.he)(this,t,u,e,["id"],!0),t}constructor(e={}){super(),this[a._n]=l,(0,n.fZ)(this,e,d)}}},907350:function(e,t,i){i.d(t,{GZ:function(){return _},O3:function(){return u}});var r=i(602777),n=i(287165),a=i(669686),o=i(150251);let s={common:["id","type","crop_ratio","stability","track_speed","cache_path","apply_source"]},l=(0,a.I2)(s,[]);class u extends o.w8{static deserialize(e){let t=new u;return(0,a.Tz)(t,e,s),t}static serialize(e){return(0,a.o8)(e,s)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new u;return(0,a.he)(this,t,s,e,["id"]),t}constructor(e={}){super(),this[o.I9]=_,this.id=(0,n.p)(),this.type=r.cV.MetaTypeSmartCrop,this.cropRatio="original",this.stability=2,this.trackSpeed=1,this.cachePath="",this.applySource=0,(0,a.tZ)(this,e,l)}}let d={common:["id","type","crop_ratio","stability","track_speed","cache_path","apply_source"]},c=(0,a.I2)(d,[]);class _ extends o.u2{static deserialize(e){let t=new _;return(0,a.Tz)(t,e,d,!0),t}static serialize(e){return(0,a.o8)(e,d,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new _;return(0,a.he)(this,t,d,e,["id"],!0),t}constructor(e={}){super(),this[o._n]=u,(0,a.fZ)(this,e,c)}}},667693:function(e,t,i){i.d(t,{Wk:function(){return d},q0:function(){return s}});var r=i(669686),n=i(150251);let a={common:["shape_type"],array:{roundness:{type:"common"},custom_points:{type:"common"},shape_size:{type:"common"}}},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.shapeType=0,this.roundness=[],this.customPoints=[],this.shapeSize=[],(0,r.tZ)(this,e,o)}}let l={common:["shape_type"],array:{roundness:{type:"common"},custom_points:{type:"common"},shape_size:{type:"common"}}},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},232959:function(e,t,i){i.d(t,{WQ:function(){return h},_0:function(){return f}});var r=i(602777),n=i(287165),a=i(669686),o=i(150251),s=i(41750),l=i(691600),u=i(917062),d=i(512116),c=i(159088);let _={common:["id","version","effect_id","resource_id","third_resource_id","name","type","path","category_id","category_name","platform","source_platform","formula_id","check_flag","text_template_preset_resource_id","is_3d","is_pre_rendered","aigc_type","text_template_resource_type","request_id","is_lyric_effect","lyric_group_id"],array:{text_to_audio_ids:{type:"common"},resources:{type:"object",clsName:()=>s.r8},text_info_resources:{type:"object",clsName:()=>l.P$},non_text_info_resources:{type:"object",clsName:()=>u.Mm}},object:{aigc_config:{type:()=>d.sc,nullable:!0},origin_word_info:{type:()=>c.$t},current_word_info:{type:()=>c.$t}}},m=(0,a.I2)(_,[]);class h extends o.w8{static deserialize(e){let t=new h;return(0,a.Tz)(t,e,_),t}static serialize(e){return(0,a.o8)(e,_)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new h;return(0,a.he)(this,t,_,e,["id"]),t}constructor(e={}){super(),this[o.I9]=f,this.id=(0,n.p)(),this.version="",this.effectId="",this.resourceId="",this.thirdResourceId="",this.name="",this.type=r.cV.MetaTypeTextTemplate,this.path="",this.categoryId="",this.categoryName="",this.platform="all",this.textToAudioIds=[],this.sourcePlatform=r.nj.EffectPlatformLoki,this.resources=[],this.formulaId="",this.textInfoResources=[],this.nonTextInfoResources=[],this.checkFlag=7,this.textTemplatePresetResourceId="",this.is3d=!1,this.isPreRendered=!1,this.aigcType=r.Eg.AIGCTypeNone,this.textTemplateResourceType=r.dm.TextTemplate,this.requestId="",this.originWordInfo=new c.$t,this.currentWordInfo=new c.$t,this.isLyricEffect=!1,this.lyricGroupId="",(0,a.tZ)(this,e,m)}}let p={common:["id","version","effect_id","resource_id","third_resource_id","name","type","path","category_id","category_name","platform","source_platform","formula_id","check_flag","text_template_preset_resource_id","is_3d","is_pre_rendered","aigc_type","text_template_resource_type","request_id","is_lyric_effect","lyric_group_id"],array:{text_to_audio_ids:{type:"common"},resources:{type:"object",clsName:()=>s.r8},text_info_resources:{type:"object",clsName:()=>l.P$},non_text_info_resources:{type:"object",clsName:()=>u.Mm}},object:{aigc_config:{type:()=>d.Rg,nullable:!0},origin_word_info:{type:()=>c.ir},current_word_info:{type:()=>c.ir}}},g=(0,a.I2)(p,[]);class f extends o.u2{static deserialize(e){let t=new f;return(0,a.Tz)(t,e,p,!0),t}static serialize(e){return(0,a.o8)(e,p,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new f;return(0,a.he)(this,t,p,e,["id"],!0),t}constructor(e={}){super(),this[o._n]=h,(0,a.fZ)(this,e,g)}}},380009:function(e,t,i){i.d(t,{Ax:function(){return l}});var r=i(669686),n=i(150251),a=i(185236);let o={common:["resource_id","third_resource_id","source_platform","resource_name","path"],array:{color:{type:"common"},adjust_params:{type:"object",clsName:()=>a.VB}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.resourceId="",this.thirdResourceId="",this.sourcePlatform=0,this.resourceName="",this.path="",this.color=[],this.adjustParams=[],(0,r.tZ)(this,e,s)}}let u={common:["resource_id","third_resource_id","source_platform","resource_name","path"],array:{color:{type:"common"},adjust_params:{type:"object",clsName:()=>a.VB}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},274120:function(e,t,i){i.d(t,{DR:function(){return d},wd:function(){return s}});var r=i(669686),n=i(150251);let a={common:["first_gray_words","title_gray_words","screen_info_gray_words"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.firstGrayWords="",this.titleGrayWords="",this.screenInfoGrayWords="",(0,r.tZ)(this,e,o)}}let l={common:["first_gray_words","title_gray_words","screen_info_gray_words"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},767348:function(e,t,i){i.d(t,{hm:function(){return s}});var r=i(669686),n=i(150251);let a={common:["time_range","video_duration"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.timeRange="",this.videoDuration=0,(0,r.tZ)(this,e,o)}}let l={common:["time_range","video_duration"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},189190:function(e,t,i){i.d(t,{fK:function(){return s}});var r=i(669686),n=i(150251);let a={bigint:{start:{},end:{}}},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.start=0n,this.end=0n,(0,r.tZ)(this,e,o)}}let l={bigint:{start:{},end:{}}},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},25588:function(e,t,i){i.d(t,{jU:function(){return s}});var r=i(669686),n=i(150251);let a={common:["segment_id","chapter_id"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.segmentId="",this.chapterId=0,(0,r.tZ)(this,e,o)}}let l={common:["segment_id","chapter_id"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},300472:function(e,t,i){i.d(t,{nO:function(){return _},xJ:function(){return u}});var r=i(669686),n=i(150251),a=i(889803),o=i(883501);let s={common:["rotation"],object:{scale:{type:()=>a.Ci},transform:{type:()=>o.wx}}},l=(0,r.I2)(s,[]);class u extends n.w8{static deserialize(e){let t=new u;return(0,r.Tz)(t,e,s),t}static serialize(e){return(0,r.o8)(e,s)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new u;return(0,r.he)(this,t,s,e),t}constructor(e={}){super(),this[n.I9]=_,this.scale=new a.Ci,this.rotation=0,this.transform=new o.wx,(0,r.tZ)(this,e,l)}}let d={common:["rotation"],object:{scale:{type:()=>a.o_},transform:{type:()=>o.jP}}},c=(0,r.I2)(d,[]);class _ extends n.u2{static deserialize(e){let t=new _;return(0,r.Tz)(t,e,d,!0),t}static serialize(e){return(0,r.o8)(e,d,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new _;return(0,r.he)(this,t,d,e,!1,!0),t}constructor(e={}){super(),this[n._n]=u,(0,r.fZ)(this,e,c)}}},653094:function(e,t,i){i.d(t,{XK:function(){return d}});var r=i(602777),n=i(669686),a=i(150251),o=i(238830),s=i(95477);let l={common:["language","material_id","animations_id","translation","translation_source","type"],array:{extra_material_refs:{type:"common"},diff_list:{type:"common"}},object:{clip:{type:()=>o.bX},responsive_layout:{type:()=>s.bN}}},u=(0,n.I2)(l,[]);class d extends a.w8{static deserialize(e){let t=new d;return(0,n.Tz)(t,e,l),t}static serialize(e){return(0,n.o8)(e,l)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,n.he)(this,t,l,e),t}constructor(e={}){super(),this[a.I9]=m,this.language=r.Hw.MultiLanguageNone,this.materialId="",this.animationsId="",this.translation="",this.translationSource="",this.extraMaterialRefs=[],this.diffList=[],this.clip=new o.bX,this.responsiveLayout=new s.bN,this.type="",(0,n.tZ)(this,e,u)}}let c={common:["language","material_id","animations_id","translation","translation_source","type"],array:{extra_material_refs:{type:"common"},diff_list:{type:"common"}},object:{clip:{type:()=>o.tL},responsive_layout:{type:()=>s.Xy}}},_=(0,n.I2)(c,[]);class m extends a.u2{static deserialize(e){let t=new m;return(0,n.Tz)(t,e,c,!0),t}static serialize(e){return(0,n.o8)(e,c,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new m;return(0,n.he)(this,t,c,e,!1,!0),t}constructor(e={}){super(),this[a._n]=d,(0,n.fZ)(this,e,_)}}},956969:function(e,t,i){i.d(t,{HI:function(){return s}});var r=i(669686),n=i(150251);let a={common:["id","platform","cover_path","relation_video_group","freeze_group","is_user_modified","source_type","relation_segment_id"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.id="",this.platform="all",this.coverPath="",this.relationVideoGroup="",this.freezeGroup="",this.isUserModified=!1,this.sourceType=0,this.relationSegmentId="",(0,r.tZ)(this,e,o)}}let l={common:["id","platform","cover_path","relation_video_group","freeze_group","is_user_modified","source_type","relation_segment_id"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},911217:function(e,t,i){i.d(t,{Av:function(){return c},tQ:function(){return l}});var r=i(602777),n=i(669686),a=i(150251);let o={common:["level"]},s=(0,n.I2)(o,[]);class l extends a.w8{static deserialize(e){let t=new l;return(0,n.Tz)(t,e,o),t}static serialize(e){return(0,n.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,n.he)(this,t,o,e),t}constructor(e={}){super(),this[a.I9]=c,this.level=r.rq.Weak_NR,(0,n.tZ)(this,e,s)}}let u={common:["level"]},d=(0,n.I2)(u,[]);class c extends a.u2{static deserialize(e){let t=new c;return(0,n.Tz)(t,e,u,!0),t}static serialize(e){return(0,n.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,n.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[a._n]=l,(0,n.fZ)(this,e,d)}}},498798:function(e,t,i){i.d(t,{b5:function(){return d},we:function(){return s}});var r=i(669686),n=i(150251);let a={common:["left_ratio","right_ratio","top_ratio","bottom_ratio"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.leftRatio=0,this.rightRatio=0,this.topRatio=0,this.bottomRatio=0,(0,r.tZ)(this,e,o)}}let l={common:["left_ratio","right_ratio","top_ratio","bottom_ratio"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},785108:function(e,t,i){i.d(t,{oG:function(){return d},wo:function(){return s}});var r=i(669686),n=i(150251);let a={common:["text_to_video_input_type","text_to_video_script_id","text_to_video_script_category","text_to_video_intelligent_script_type","text_to_video_theme","text_to_video_theme_id","text_to_video_product_details","text_to_video_prompt_text_detail","text_to_video_result_id","text_to_video_yuntu_script_id","text_to_video_script_detail","text_to_video_real_detail","text_to_video_type","is_text_to_video_new","edit_prompt_area","edit_prompt_area_cnt","text_to_video_theme_from_anchor","text_to_video_intelligent_match_method"],bigint:{text_to_video_conver_method:{},text_to_video_video_cnt:{}}},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.textToVideoInputType="",this.textToVideoScriptId="",this.textToVideoScriptCategory="",this.textToVideoConverMethod=0n,this.textToVideoVideoCnt=0n,this.textToVideoIntelligentScriptType="",this.textToVideoTheme="",this.textToVideoThemeId="",this.textToVideoProductDetails="",this.textToVideoPromptTextDetail="",this.textToVideoResultId="",this.textToVideoYuntuScriptId="",this.textToVideoScriptDetail="",this.textToVideoRealDetail="",this.textToVideoType="",this.isTextToVideoNew=0,this.editPromptArea="",this.editPromptAreaCnt=0,this.textToVideoThemeFromAnchor="",this.textToVideoIntelligentMatchMethod="",(0,r.tZ)(this,e,o)}}let l={common:["text_to_video_input_type","text_to_video_script_id","text_to_video_script_category","text_to_video_intelligent_script_type","text_to_video_theme","text_to_video_theme_id","text_to_video_product_details","text_to_video_prompt_text_detail","text_to_video_result_id","text_to_video_yuntu_script_id","text_to_video_script_detail","text_to_video_real_detail","text_to_video_type","is_text_to_video_new","edit_prompt_area","edit_prompt_area_cnt","text_to_video_theme_from_anchor","text_to_video_intelligent_match_method"],bigint:{text_to_video_conver_method:{},text_to_video_video_cnt:{}}},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},249321:function(e,t,i){i.d(t,{CR:function(){return d},Df:function(){return s}});var r=i(669686),n=i(150251);let a={common:["product_id","currency_code","need_purchase","info_del","need_unlock_by_ad","json_str","sign","countdown_type"],bigint:{amount:{}}},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.amount=0n,this.productId="",this.currencyCode="",this.needPurchase=!1,this.infoDel=!1,this.needUnlockByAd=!1,this.jsonStr="",this.sign="",this.countdownType=0,(0,r.tZ)(this,e,o)}}let l={common:["product_id","currency_code","need_purchase","info_del","need_unlock_by_ad","json_str","sign","countdown_type"],bigint:{amount:{}}},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},948180:function(e,t,i){i.d(t,{eF:function(){return l},k3:function(){return c}});var r=i(602777),n=i(669686),a=i(150251);let o={common:["request_id","material_feature","music_segment_id","music_id","music_name","template_id","last_action","track_material_duration_detail","track_material_video_cnt","track_material_photo_cnt","track_material_live_photo_cnt","is_slow_speed_spot"],bigint:{music_duration:{}}},s=(0,n.I2)(o,[]);class l extends a.w8{static deserialize(e){let t=new l;return(0,n.Tz)(t,e,o),t}static serialize(e){return(0,n.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,n.he)(this,t,o,e),t}constructor(e={}){super(),this[a.I9]=c,this.requestId="",this.materialFeature="",this.musicSegmentId="",this.musicId="",this.musicName="",this.musicDuration=0n,this.templateId="",this.lastAction=r.bq.QuickEditNone,this.trackMaterialDurationDetail="",this.trackMaterialVideoCnt=0,this.trackMaterialPhotoCnt=0,this.trackMaterialLivePhotoCnt=0,this.isSlowSpeedSpot=!1,(0,n.tZ)(this,e,s)}}let u={common:["request_id","material_feature","music_segment_id","music_id","music_name","template_id","last_action","track_material_duration_detail","track_material_video_cnt","track_material_photo_cnt","track_material_live_photo_cnt","is_slow_speed_spot"],bigint:{music_duration:{}}},d=(0,n.I2)(u,[]);class c extends a.u2{static deserialize(e){let t=new c;return(0,n.Tz)(t,e,u,!0),t}static serialize(e){return(0,n.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,n.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[a._n]=l,(0,n.fZ)(this,e,d)}}},253777:function(e,t,i){i.d(t,{hy:function(){return s}});var r=i(669686),n=i(150251);let a={common:["id","type","language","content","remove_invalid_task_id","ai_accurate_recognize_enable"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.id="",this.type=0,this.language="",this.content="",this.removeInvalidTaskId="",this.aiAccurateRecognizeEnable=!1,(0,r.tZ)(this,e,o)}}let l={common:["id","type","language","content","remove_invalid_task_id","ai_accurate_recognize_enable"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},832497:function(e,t,i){i.d(t,{Ae:function(){return d},ke:function(){return s}});var r=i(669686),n=i(150251);let a={common:["template_id","template_category_id","template_category_name"],array:{applied_text_effect_ids:{type:"common"},applied_text_shape_ids:{type:"common"}}},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.templateId="",this.templateCategoryId="",this.templateCategoryName="",this.appliedTextEffectIds=[],this.appliedTextShapeIds=[],(0,r.tZ)(this,e,o)}}let l={common:["template_id","template_category_id","template_category_name"],array:{applied_text_effect_ids:{type:"common"},applied_text_shape_ids:{type:"common"}}},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},940931:function(e,t,i){i.d(t,{E8:function(){return u},lM:function(){return _}});var r=i(669686),n=i(150251),a=i(355399),o=i(834072);let s={object:{template_:{type:()=>a.D4},draft_segment_id_map:{type:()=>o.Bh,nullable:!0}}},l=(0,r.I2)(s,[]);class u extends n.w8{static deserialize(e){let t=new u;return(0,r.Tz)(t,e,s),t}static serialize(e){return(0,r.o8)(e,s)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new u;return(0,r.he)(this,t,s,e),t}constructor(e={}){super(),this[n.I9]=_,this.template=new a.D4,(0,r.tZ)(this,e,l)}}let d={object:{template_:{type:()=>a.ng},draft_segment_id_map:{type:()=>o.pB,nullable:!0}}},c=(0,r.I2)(d,[]);class _ extends n.u2{static deserialize(e){let t=new _;return(0,r.Tz)(t,e,d,!0),t}static serialize(e){return(0,r.o8)(e,d,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new _;return(0,r.he)(this,t,d,e,!1,!0),t}constructor(e={}){super(),this[n._n]=u,(0,r.fZ)(this,e,c)}}},864670:function(e,t,i){i.d(t,{IZ:function(){return l}});var r=i(669686),n=i(150251),a=i(706719);let o={common:["id"],bigint:{target_start_time:{}},array:{sentences:{type:"object",clsName:()=>a.VQ}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.id="",this.targetStartTime=0n,this.sentences=[],(0,r.tZ)(this,e,s)}}let u={common:["id"],bigint:{target_start_time:{}},array:{sentences:{type:"object",clsName:()=>a.VQ}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},706719:function(e,t,i){i.d(t,{VQ:function(){return l}});var r=i(669686),n=i(150251),a=i(267693);let o={common:["id","speaker_type","speaker_id","caption_segment_id","original_text"],array:{words:{type:"object",clsName:()=>a.j}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.id="",this.speakerType="",this.speakerId="",this.captionSegmentId="",this.originalText="",this.words=[],(0,r.tZ)(this,e,s)}}let u={common:["id","speaker_type","speaker_id","caption_segment_id","original_text"],array:{words:{type:"object",clsName:()=>a.j}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},969577:function(e,t,i){i.d(t,{Lt:function(){return h},nk:function(){return c}});var r=i(602777),n=i(669686),a=i(150251),o=i(569566),s=i(177611),l=i(53823);let u={extend:l.xV,common:["apply_type","apply_segment_id"],array:{keyframes:{type:"object",clsName:()=>s.Hf}},object:{material:{type:()=>o.a8}}},d=(0,n.I2)(u,[]);class c extends l.XX{static deserialize(e){let t=new c;return(0,n.Tz)(t,e,u),t}static serialize(e){return(0,n.o8)(e,u)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,n.he)(this,t,u,e,!0),t}constructor(e={}){super(e),this[a.I9]=h,this.__segment_struct_type=r.Oc.SegmentVideoEffect,this.applyType=0,this.applySegmentId="",this.material=new o.a8,this.keyframes=[],(0,n.tZ)(this,e,d)}}let _={extend:l.FX,common:["apply_type","apply_segment_id"],array:{keyframes:{type:"object",clsName:()=>s.Hf}},object:{material:{type:()=>o.UJ}}},m=(0,n.I2)(_,[]);class h extends l.Ev{static deserialize(e){let t=new h;return(0,n.Tz)(t,e,_,!0),t}static serialize(e){return(0,n.o8)(e,_,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new h;return(0,n.he)(this,t,_,e,!0,!0),t}constructor(e={}){super(),this[a._n]=c,this.__segment_struct_type=r.Oc.SegmentVideoEffect,(0,n.fZ)(this,e,m)}}},135158:function(e,t,i){i.d(t,{DZ:function(){return s},VY:function(){return d}});var r=i(669686),n=i(150251);let a={common:["color","alpha"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.color="#FFFFFF",this.alpha=1,(0,r.tZ)(this,e,o)}}let l={common:["color","alpha"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},401611:function(e,t,i){i.d(t,{FJ:function(){return d}});var r=i(602777),n=i(287165),a=i(669686),o=i(150251),s=i(760941);let l={common:[{name:"id",rename:"effectId"},"type","path","platform","resource_id","third_resource_id","source_platform","name","category_id","category_name","panel","material_type","request_id"],bigint:{start:{},duration:{}},object:{anim_adjust_params:{type:()=>s.Hc,nullable:!0}}},u=(0,a.I2)(l,["effectId"]);class d extends o.w8{static deserialize(e){let t=new d;return(0,a.Tz)(t,e,l),t}static serialize(e){return(0,a.o8)(e,l)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,a.he)(this,t,l,e),t.effectId=this.effectId,t}constructor(e={}){super(),this[o.I9]=m,this.id=(0,n.p)(),this.effectId="",this.type=r.VA.Anim_None,this.start=0n,this.duration=0n,this.path="",this.platform="all",this.resourceId="",this.thirdResourceId="",this.sourcePlatform=0,this.name="",this.categoryId="",this.categoryName="",this.panel="",this.materialType="",this.requestId="",(0,a.tZ)(this,e,u)}}let c={common:[{name:"id",rename:"effectId"},"type","path","platform","resource_id","third_resource_id","source_platform","name","category_id","category_name","panel","material_type","request_id"],bigint:{start:{},duration:{}},object:{anim_adjust_params:{type:()=>s.Zw,nullable:!0}}},_=(0,a.I2)(c,["effectId"]);class m extends o.u2{static deserialize(e){let t=new m;return(0,a.Tz)(t,e,c,!0),t}static serialize(e){return(0,a.o8)(e,c,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new m;return(0,a.he)(this,t,c,e,!1,!0),null!==this.id&&void 0!==this.id&&(t.id=this.id),t}constructor(e={}){super(),this[o._n]=d,(0,a.fZ)(this,e,_)}}},542926:function(e,t,i){i.d(t,{Fd:function(){return s},I:function(){return d}});var r=i(669686),n=i(150251);let a={common:["styles","font_size_ratio","subtitle_template_original_font_size","subtitle_template_keywords_original_font_size","subtitle_template_font_size","is_change_font_size"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.styles="",this.fontSizeRatio=1,this.subtitleTemplateOriginalFontSize=0,this.subtitleTemplateKeywordsOriginalFontSize=0,this.subtitleTemplateFontSize=0,this.isChangeFontSize=!1,(0,r.tZ)(this,e,o)}}let l={common:["styles","font_size_ratio","subtitle_template_original_font_size","subtitle_template_keywords_original_font_size","subtitle_template_font_size","is_change_font_size"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},450911:function(e,t,i){i.d(t,{BO:function(){return l}});var r=i(669686),n=i(150251),a=i(775690);let o={common:["script","tts_url"],bigint:{section_idx:{}},array:{subtitle_ids:{type:"common"},subtitles_time_range:{type:"object",clsName:()=>a.Mt}}},s=(0,r.I2)(o,[]);class l extends n.w8{static deserialize(e){let t=new l;return(0,r.Tz)(t,e,o),t}static serialize(e){return(0,r.o8)(e,o)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new l;return(0,r.he)(this,t,o,e),t}constructor(e={}){super(),this[n.I9]=c,this.script="",this.subtitleIds=[],this.sectionIdx=0n,this.ttsUrl="",this.subtitlesTimeRange=[],(0,r.tZ)(this,e,s)}}let u={common:["script","tts_url"],bigint:{section_idx:{}},array:{subtitle_ids:{type:"common"},subtitles_time_range:{type:"object",clsName:()=>a.Mt}}},d=(0,r.I2)(u,[]);class c extends n.u2{static deserialize(e){let t=new c;return(0,r.Tz)(t,e,u,!0),t}static serialize(e){return(0,r.o8)(e,u,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new c;return(0,r.he)(this,t,u,e,!1,!0),t}constructor(e={}){super(),this[n._n]=l,(0,r.fZ)(this,e,d)}}},775690:function(e,t,i){i.d(t,{Mt:function(){return s}});var r=i(669686),n=i(150251);let a={bigint:{start_time:{},end_time:{}}},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.startTime=0n,this.endTime=0n,(0,r.tZ)(this,e,o)}}let l={bigint:{start_time:{},end_time:{}}},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},937998:function(e,t,i){i.d(t,{es:function(){return s}});var r=i(669686),n=i(150251);let a={common:["target_segment_id","data_path"]},o=(0,r.I2)(a,[]);class s extends n.w8{static deserialize(e){let t=new s;return(0,r.Tz)(t,e,a),t}static serialize(e){return(0,r.o8)(e,a)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new s;return(0,r.he)(this,t,a,e),t}constructor(e={}){super(),this[n.I9]=d,this.targetSegmentId="",this.dataPath="",(0,r.tZ)(this,e,o)}}let l={common:["target_segment_id","data_path"]},u=(0,r.I2)(l,[]);class d extends n.u2{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l,!0),t}static serialize(e){return(0,r.o8)(e,l,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e,!1,!0),t}constructor(e={}){super(),this[n._n]=s,(0,r.fZ)(this,e,u)}}},823152:function(e,t,i){i.d(t,{PD:function(){return d},to:function(){return m}});var r=i(669686),n=i(150251),a=i(215040),o=i(734879),s=i(363651);let l={common:["id","read_protocol_version"],array:{vip_materials:{type:"object",clsName:()=>a.ak},vip_features:{type:"object",clsName:()=>o.He},materials_from_template:{type:"object",clsName:()=>a.ak},features_from_template:{type:"object",clsName:()=>o.He}},object:{vip_handwrite:{type:()=>s.Nk}}},u=(0,r.I2)(l,[]);class d extends n.w8{static deserialize(e){let t=new d;return(0,r.Tz)(t,e,l),t}static serialize(e){return(0,r.o8)(e,l)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new d;return(0,r.he)(this,t,l,e),t}constructor(e={}){super(),this[n.I9]=m,this.id="",this.readProtocolVersion=0,this.vipMaterials=[],this.vipFeatures=[],this.materialsFromTemplate=[],this.featuresFromTemplate=[],this.vipHandwrite=new s.Nk,(0,r.tZ)(this,e,u)}}let c={common:["id","read_protocol_version"],array:{vip_materials:{type:"object",clsName:()=>a.ak},vip_features:{type:"object",clsName:()=>o.He},materials_from_template:{type:"object",clsName:()=>a.ak},features_from_template:{type:"object",clsName:()=>o.He}},object:{vip_handwrite:{type:()=>s.tg}}},_=(0,r.I2)(c,[]);class m extends n.u2{static deserialize(e){let t=new m;return(0,r.Tz)(t,e,c,!0),t}static serialize(e){return(0,r.o8)(e,c,!0)}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new m;return(0,r.he)(this,t,c,e,!1,!0),t}constructor(e={}){super(),this[n._n]=d,(0,r.fZ)(this,e,_)}}},410256:function(e,t,i){i.d(t,{v:function(){return n}});var r=i(361708);class n{getSegmentByIdRecursive(e){return this.__utils__.subDraft.getSegmentByIdRecursive(e)}getVideoDocumentByPath(e){let t;if(e.length<1)return this;for(let i of e.slice(0,-1)){let e=this.getSegmentById(i);if(!e||!r.b.isCombination(e))break;t=e.materialDraft.draft}return null!=t?t:this}enumSegmentsRecursion(e,t,i,r){return this.__utils__.subDraft.enumSegmentsRecursion(e,t,i,r)}getSegmentPath(e){return this.__utils__.segment.query.getSegmentPath(e)}collectSubDraft(e){let t=[e];for(let i of e.getAllTracks())for(let e of i.segments)r.b.isCombination(e)&&(t=[...t,...this.collectSubDraft(e.materialDraft.draft)]);return t}getSegmentsByTrackTypeRecursive(e){return this.__utils__.subDraft.getSegmentsByTrackTypeRecursive(e)}getSegmentsByTrackType(e){return this.__utils__.subDraft.getSegmentsByTrackType(e)}getAllSubDraft(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return this.__utils__.subDraft.getAllSubDraft(e)}isMainTrack(e){return this.__utils__.track.query.isMainTrack(e)}isSubVideoTrack(e){return this.__utils__.track.query.isSubVideoTrack(e)}getAllTracks(){return this.__utils__.track.query.getAllTracks()}getMainTrack(){return this.__utils__.track.query.getMainTrack()}getTrackById(e,t){return this.__utils__.track.query.getTrackById(e,t)}getTrackByIndex(e){return this.__utils__.track.query.getTrackByIndex(e)}getTrackBySegmentId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return this.__utils__.track.query.getTrackBySegmentId(e,t,i)}getTracksByType(e){return this.__utils__.track.query.getTracksByType(e)}getTracksByTypes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.__utils__.track.query.getTracksByTypes(e)}getTracksByTypeAndFlag(e,t){return this.__utils__.track.query.getTracksByTypeAndFlag(e,t)}getTracksByTypesAndFlag(e,t){return this.__utils__.track.query.getTracksByTypesAndFlag(e,t)}getTrackNodeBySegmentId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.__utils__.track.query.getTrackNodeBySegmentId(e,t,i)}getTrackIndexBySegmentId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.__utils__.track.query.getTrackIndexBySegmentId(e,t)}getTrackIndexById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.__utils__.track.query.getTrackIndexById(e,t)}getFirstTrackIndexByTrackType(e){return this.__utils__.track.query.getFirstTrackIndexByTrackType(e)}getLastTrackIndexExcludeTrackType(e){return this.__utils__.track.query.getLastTrackIndexExcludeTrackType(e)}getTrackDuration(e){return this.__utils__.track.query.getTrackDuration(e)}getTrackStartTime(e){return this.__utils__.track.query.getTrackStartTime(e)}findTargetTrackIndexByTimeRange(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return this.__utils__.track.query.findTargetTrackIndexByTimeRange(e,t,i,r,n)}findTargetTrackIndex(e,t,i,r,n,a){return this.__utils__.track.query.findTargetTrackIndex(e,t,i,r,n,a)}findTargetTrackIndexWithExclude(e,t,i,r){return this.__utils__.track.query.findTargetTrackIndexWithExclude(e,t,i,r)}findTargetTrackIndexWithFlags(e,t,i,r,n){return this.__utils__.track.query.findTargetTrackIndexWithFlags(e,t,i,r,n)}getTrackNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.__utils__.track.query.getTrackNode(e,t,i)}findTrackIndexToInsert(e,t,i,r){return this.__utils__.track.query.findTrackIndexToInsert(e,t,i,r)}findAboveTrackIndexToInsert(e,t,i,r,n){return this.__utils__.track.query.findAboveTrackIndexToInsert(e,t,i,r,n)}findVectIndex(e,t){return this.__utils__.track.query.findVectIndex(e,t)}getCopyGroupBySegment(e,t){return this.__utils__.segment.query.getCopyGroupBySegment(e,t)}getGroupBySegmentId(e){return this.__utils__.segment.query.getGroupBySegmentId(e)}getGroupBySegment(e,t){return this.__utils__.segment.query.getGroupBySegment(e,t)}isFigureDisabled(e){return this.__utils__.segment.query.isFigureDisabled(e)}getSegmentsByMaterialTypes(e,t){return this.__utils__.segment.query.getSegmentsByMaterialTypes(e,t)}getSegmentIndexByTrackIdAndSegmentId(e,t){return this.__utils__.segment.query.getSegmentIndexByTrackIdAndSegmentId(e,t)}getSegmentInsertIndexByStartTime(e,t){return this.__utils__.segment.query.getSegmentInsertIndexByStartTime(e,t)}getSegmentsByTimeRange(e,t){return this.__utils__.segment.query.getSegmentsByTimeRange(e,t)}getTargetTimeRangeByCompositionSegment(e){return this.__utils__.segment.query.getTargetTimeRangeByCompositionSegment(e)}getTargetTimeRangeBySegmentId(e){return this.__utils__.segment.query.getTargetTimeRangeBySegmentId(e)}getTargetTimeRangeByOriginTargetTimeRange(e,t){return this.__utils__.segment.query.getTargetTimeRangeByOriginTargetTimeRange(e,t)}getTargetStartBySpeed(e,t,i){return this.__utils__.segment.query.getTargetStartBySpeed(e,t,i)}getSegmentByTextMaterialId(e){return this.__utils__.segment.query.getSegmentByTextMaterialId(e)}getQuickImportSegments(){return this.__utils__.segment.query.getQuickImportSegments()}getSegmentsByTrackTypeAndMaterialType(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.__utils__.segment.query.getSegmentsByTrackTypeAndMaterialType(e,t,i)}getMixedStyles(e,t){return this.__utils__.segment.query.getMixedStyles(e,t)}getSegmentsByTrackTypes(e){return this.__utils__.segment.query.getSegmentsByTrackTypes(e)}getSegmentTextTemplateByTextTemplateMaterialId(e){return this.__utils__.segment.query.getSegmentTextTemplateByTextTemplateMaterialId(e)}getGroupFromSegment(e){return this.__utils__.segment.query.getGroupFromSegment(e)}getSegmentsByTrackId(e){return this.__utils__.segment.query.getSegmentsByTrackId(e)}getSegmentIndex(e,t){return this.__utils__.segment.query.getSegmentIndex(e,t)}getSegmentInsertIndexByTimeRange(e,t){return this.__utils__.segment.query.getSegmentInsertIndexByTimeRange(e,t)}getAllSegments(){return this.__utils__.segment.query.getAllSegments()}getSegmentsByMaterialId(e){return this.__utils__.segment.query.getSegmentsByMaterialId(e)}getSegmentNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.__utils__.segment.query.getSegmentNode(e,t)}isTTSAutoUpdate(e){return this.__utils__.segment.query.isTTSAutoUpdate(e)}isRichText(e){return this.__utils__.segment.query.isRichText(e)}getSegmentByTrackType(e,t){return this.__utils__.segment.query.getSegmentByTrackType(e,t)}getSegmentNodeById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.__utils__.segment.query.getSegmentNodeById(e,t)}getDraftIdAndSegById(e,t,i){return this.__utils__.segment.query.getDraftIdAndSegById(e,t,i)}getSegmentById(e,t,i){return this.__utils__.segment.query.getSegmentById(e,t,i)}findSegmentInsertIndexByTimeRange(e,t){return this.__utils__.segment.query.findSegmentInsertIndexByTimeRange(e,t)}isSegmentInTrack(e,t){return this.__utils__.segment.query.isSegmentInTrack(e,t)}getTrackTypesBySegment(e){return this.__utils__.track.query.getTrackTypesBySegment(e)}findSegmentIndex(e,t){return this.__utils__.segment.query.findSegmentIndex(e,t)}findNextSegment(e){return this.__utils__.segment.query.findNextSegment(e)}getMultiplePropertyValues(e,t,i){return this.__utils__.segment.query.getMultiplePropertyValues(e,t,i)}getAllSubtitles(){return this.__utils__.segment.query.getAllSubtitles()}getAllLyrics(){return this.__utils__.segment.query.getAllLyrics()}getAllEffects(){return this.__utils__.segment.query.getAllEffects()}getAllAudioBeats(e){return this.__utils__.segment.query.getAllAudioBeats(e)}getGroupIdBySegment(e){return this.__utils__.segment.query.getGroupIdBySegment(e)}isContainVideoAlgorithm(e,t){return this.__utils__.segment.query.isContainVideoAlgorithm(e,t)}getSegmentAtPositionById(e){return this.__utils__.segment.query.getSegmentAtPositionById(e)}getSegmentsByAbilities(e){return this.__utils__.segment.query.getSegmentsByAbilities(e)}getCurrentKeyframeId(e,t,i){return this.__utils__.keyframe.query.getCurrentKeyframeId(e,t,i)}getKeyframeTimeOffsetByPlayHead(e,t){return this.__utils__.keyframe.query.getKeyframeTimeOffsetByPlayHead(e,t)}getPlayHeadByKeyframeTimeOffset(e,t){return this.__utils__.keyframe.query.getPlayHeadByKeyframeTimeOffset(e,t)}getDuration(){return this.__utils__.draft.query.getDuration()}getDraftDuration(){return this.__utils__.draft.query.getDraftDuration()}getDraftStartTime(){return this.__utils__.draft.query.getDraftStartTime()}getDraftId(){return this.__utils__.draft.query.getDraftId()}getDraftName(){return this.__utils__.draft.query.getDraftName()}getCanvasConfig(){return this.__utils__.draft.query.getCanvasConfig()}getCover(){return this.__utils__.draft.query.getCover()}getDraftProperty(){return this.__utils__.draft.query.getDraftProperty()}getDraftMetadata(){return this.__utils__.draft.query.getDraftMetadata()}getDraftDroupContainer(){return this.__utils__.draft.query.getDraftDroupContainer()}getDefaultCanvasSize(e,t){return this.__utils__.draft.query.getDefaultCanvasSize(e,t)}getUsedAbilities(){return this.__utils__.draft.query.getUsedAbilities()}getMaterialDraft(e){return this.__utils__.segment.query.getMaterialDraft(e)}getVideoTracking(e){return this.__utils__.segment.query.getVideoTracking(e)}getSegmentByTransitionId(e){return this.__utils__.segment.query.getSegmentByTransitionId(e)}getAsyncTask(e){return this.__utils__.attachment.query.getAsyncTask(e)}getAsyncTaskMap(){return this.__utils__.attachment.query.getAsyncTaskMap()}getVideoAlgorithm(e){return this.__utils__.attachment.query.getVideoAlgorithm(e)}getVideoAlgorithmMap(){return this.__utils__.attachment.query.getVideoAlgorithmMap()}getAiWriterInfo(e){return this.__utils__.attachment.query.getAiWriterInfo(e)}getAICreator(){return this.__utils__.attachment.query.getAICreator()}getAiWriterInfoMap(){return this.__utils__.attachment.query.getAiWriterInfoMap()}isAICreatorEmptyShots(){return this.__utils__.attachment.query.isAICreatorEmptyShots()}getAiStoryAllAlternativeMaterials(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.__utils__.attachment.query.getAiStoryAllAlternativeMaterials(...t)}getAiStoryAlternativeMaterialBySegmentId(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.__utils__.attachment.query.getAiStoryAlternativeMaterialBySegmentId(...t)}getAiStoryAlternativeMaterialBySegmentIdAndAlternativeId(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.__utils__.attachment.query.getAiStoryAlternativeMaterialBySegmentIdAndAlternativeId(...t)}getAiStoryAlternativeMaterialByAlternativeId(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.__utils__.attachment.query.getAiStoryAlternativeMaterialByAlternativeId(...t)}getAiStoryAlternativeMaterialAtPositionByAlternativeId(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.__utils__.attachment.query.getAiStoryAlternativeMaterialAtPositionByAlternativeId(...t)}getAiStoryGlobalConfig(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.__utils__.attachment.query.getAiStoryGlobalConfig(...t)}getAiStoryId(){return this.__utils__.attachment.query.getAiStoryId()}getAiStoryMeta(){return this.__utils__.attachment.query.getAiStoryMeta()}getAiStoryAlternativeMaterialStatusBySegmentId(e){return this.__utils__.attachment.query.getAiStoryAlternativeMaterialStatusBySegmentId(e)}getAiStoryCurrentAlternativeMaterialBySegmentId(e){return this.__utils__.attachment.query.getAiStoryCurrentAlternativeMaterialBySegmentId(e)}}},742143:function(e,t,i){i.d(t,{E:function(){return o},h:function(){return a}});var r=i(686513),n=i(903849);function a(e,t,i,a){a.material=(0,n.t0)(e.materials,"effects",[a.materialId],void 0,r.eA),a.keyframes=(0,n.tI)(e.keyframes,"filters",a.keyframeRefs),(0,n.j)(e.keyframeGraphList,a)}function o(e,t,i,r,a,o){o.materialId=a.material.id,(0,n.af)(e.materials,"effects",a.material),(0,n.u4)(e.keyframes,"filters",r,a.keyframes),(0,n.P$)(i,t,a.id),(0,n.SQ)(e.keyframeGraphList,a,o)}},774902:function(e,t,i){i.d(t,{T:function(){return o},e:function(){return a}});var r=i(973815),n=i(903849);function a(e,t,i,a){a.material=(0,n.t0)(e.materials,"images",[a.materialId],void 0,r._Z),a.animations=(0,n.t0)(e.materials,"materialAnimations",a.extraMaterialRefs),a.videoTracking=(0,n.t0)(e.materials,"videoTrackings",a.extraMaterialRefs),a.keyframes=(0,n.tI)(e.keyframes,"stickers",a.keyframeRefs),(0,n.j)(e.keyframeGraphList,a)}function o(e,t,i,r,a,o){o.materialId=a.material.id,(0,n.af)(e.materials,"images",a.material),(0,n.u$)(e.materials,"materialAnimations",i,a.animations),(0,n.u$)(e.materials,"videoTrackings",i,a.videoTracking),(0,n.u4)(e.keyframes,"stickers",r,a.keyframes),(0,n.P$)(i,t,a.id),(0,n.SQ)(e.keyframeGraphList,a,o)}},903849:function(e,t,i){i.d(t,{In:function(){return v},JY:function(){return g},P$:function(){return f},QN:function(){return m},SQ:function(){return y},Ul:function(){return l},Vm:function(){return d},Xb:function(){return E},af:function(){return c},j:function(){return T},t0:function(){return u},tI:function(){return h},u$:function(){return _},u4:function(){return p}});var r=i(414516),n=i(519769),a=i(602777),o=i(481631);function s(e,t){return e.find(e=>{let{id:i}=e;return i===t})}function l(e,t){var i,r,n;if(s(e.materials.tailLeaders,t.materialId))return a.Oc.SegmentTailLeader;if(s(e.materials.videos,t.materialId))return a.Oc.SegmentVideo;if(s(e.materials.audios,t.materialId))return a.Oc.SegmentAudio;else if(s(e.materials.videoEffects,t.materialId))return a.Oc.SegmentVideoEffect;else if((null===(i=s(e.materials.effects,t.materialId))||void 0===i?void 0:i.type)===a.cV.MetaTypeFilter)return a.Oc.SegmentFilter;else if(s(e.materials.placeholders,t.materialId))return a.Oc.SegmentPictureAdjust;else if(s(e.materials.images,t.materialId))return a.Oc.SegmentImageSticker;else if(s(e.materials.stickers,t.materialId))return a.Oc.SegmentSticker;else if(s(e.materials.textTemplates,t.materialId))return a.Oc.SegmentTextTemplate;else if(s(e.materials.texts,t.materialId))return a.Oc.SegmentText;else if((null===(r=s(e.materials.drafts,t.materialId))||void 0===r?void 0:r.type)===a.cV.MetaTypeComposition)return a.Oc.SegmentComposition;else if((null===(n=s(e.materials.drafts,t.materialId))||void 0===n?void 0:n.type)===a.cV.MetaTypeAdCube)return a.Oc.SegmentAdcube;else if(s(e.materials.pluginEffects,t.materialId))return a.Oc.SegmentPluginEffect;else if(s(e.materials.handwrites,t.materialId))return a.Oc.SegmentHandwrite;else if(s(e.materials.shapes,t.materialId))return a.Oc.SegmentShape;else throw Error("unrecognized segment type")}function u(e,t,i,r,n){var a,o,s,l;let u=(a=e,o=t,s=i,l=r,a[o].find(e=>void 0===l?s.includes(e.id):e.type===l&&s.includes(e.id)));return u?u:n?new n:void 0}function d(e,t,i,r){return function(e,t,i,r){let n=new Set;return e[t].filter(e=>!!((void 0===r||e.type===r)&&i.includes(e.id))&&!n.has(e.id)&&(n.add(e.id),!0))}(e,t,i,r)}function c(e,t,i){!Array.isArray(e[t])&&(e[t]=[]),e[t].push(i)}function _(e,t,i,r){r&&(i.add(r.id),c(e,t,r))}function m(e,t,i,r){if(!!r)for(let n of(!Array.isArray(e[t])&&(e[t]=[]),r))i.add(n.id),e[t].push(n)}function h(e,t,i){var r,n,a;return r=e,n=t,a=i,r[n].filter(e=>a.includes(e.id))}function p(e,t,i,r){if(!!r)for(let n of(!Array.isArray(e[t])&&(e[t]=[]),r))i.add(n.id),e[t].push(n)}function g(e,t){for(let i of e)for(let e of i.segments)if(e.extraMaterialRefs.includes(t))return e.id;return""}function f(e,t,i){for(let r of t)for(let t of r.segments)((0,o.w5)(t)||(0,o.Kj)(t))&&t.applySegmentId===i&&e.add(t.material.id)}function T(e,t){for(let i of t.commonKeyframes)for(let t of i.keyframeList)if(t.graphId){let i=e.find(e=>{let{id:i}=e;return i===t.graphId});i&&(t.graph=i)}}function y(e,t,i){for(let i of t.commonKeyframes)for(let t of i.keyframeList)t.graph&&(e.push(t.graph),t.graphId=t.graph.id);i.commonKeyframes=t.commonKeyframes.map(e=>e.clone())}function v(e,t,i,n){var s,l,c;let _=u(e,"placeholders",[i]),m=new r.sq;return(0,o.E6)(n)&&!_?m:((0,o.E6)(n)&&(n.name=null!==(s=null==_?void 0:_.name)&&void 0!==s?s:""),m.id=null!==(l=null==_?void 0:_.id)&&void 0!==l?l:m.id,m.brightness=u(e,"effects",t,a.cV.MetaTypeBrightness),m.contrast=u(e,"effects",t,a.cV.MetaTypeContrast),m.saturation=u(e,"effects",t,a.cV.MetaTypeSaturation),m.sharpening=u(e,"effects",t,a.cV.MetaTypeSharpen),m.highlight=u(e,"effects",t,a.cV.MetaTypeHighlight),m.shadow=u(e,"effects",t,a.cV.MetaTypeShadow),m.colorTemperature=u(e,"effects",t,a.cV.MetaTypeTemperature),m.hue=u(e,"effects",t,a.cV.MetaTypeHue),m.fade=u(e,"effects",t,a.cV.MetaTypeFade),m.lightSensation=u(e,"effects",t,a.cV.MetaTypeLightSensation),m.vignetting=u(e,"effects",t,a.cV.MetaTypeVignetting),m.particle=u(e,"effects",t,a.cV.MetaTypeParticle),m.lut=u(e,"effects",t,a.cV.MetaTypeLUT),m.hsl=d(e,"hsl",t),m.enableLut=n.enableLut,m.enableAdjust=n.enableAdjust,m.enableColorCurves=n.enableColorCurves,m.colorCurves=u(e,"colorCurves",t),m.enableColorWheels=n.enableColorWheels,m.primaryColorWheels=u(e,"primaryColorWheels",t),m.logColorWheels=u(e,"logColorWheels",t),!(0,o.he)(n)&&(m.filter=u(e,"effects",t,a.cV.MetaTypeFilter)),m.smartAdjustColor=u(e,"effects",t,a.cV.MetaTypeSmartColorAdjust),m.adjustPresetResourceId=null!==(c=null==_?void 0:_.materialResourceId)&&void 0!==c?c:"",m.enableSmartColorAdjust=n.enableSmartColorAdjust,m)}function E(e,t,i,r){let s;if((0,o.E6)(i)?{material:s}=i:(0,o.he)(i)&&(s=i.adjust),!!s)(0,o.E6)(i)&&c(e,"placeholders",new n.sV({id:i.material.id,name:i.name,type:a.cV.MetaTypeAdjust,materialResourceId:s.adjustPresetResourceId})),_(e,"effects",t,s.brightness),_(e,"effects",t,s.contrast),_(e,"effects",t,s.saturation),_(e,"effects",t,s.sharpening),_(e,"effects",t,s.highlight),_(e,"effects",t,s.shadow),_(e,"effects",t,s.colorTemperature),_(e,"effects",t,s.hue),_(e,"effects",t,s.fade),_(e,"effects",t,s.lightSensation),_(e,"effects",t,s.vignetting),_(e,"effects",t,s.particle),_(e,"effects",t,s.lut),m(e,"hsl",t,s.hsl),_(e,"colorCurves",t,s.colorCurves),_(e,"primaryColorWheels",t,s.primaryColorWheels),_(e,"logColorWheels",t,s.logColorWheels),_(e,"effects",t,s.filter),_(e,"effects",t,s.smartAdjustColor),r.enableLut=s.enableLut,r.enableAdjust=s.enableAdjust,r.enableColorCurves=s.enableColorCurves,r.enableColorWheels=s.enableColorWheels,r.enableSmartColorAdjust=s.enableSmartColorAdjust}},645869:function(e,t,i){i.d(t,{T:function(){return m}});var r=i(211561),n=i(268468),a=i(417273),o=i(558515),s=i(825245),l=i(524595),u=i(534418),d=i(859874),c=i(481631),_=i(280700);class m{static toModel(e){let t=new a.pN,{metadata:i,property:r}=t;i.id=e.id,i.version=e.version,i.newVersion=e.newVersion,i.duration=e.duration,i.createTime=e.createTime,i.updateTime=e.updateTime,i.source=e.source,r.name=e.name,r.fps=e.fps,r.colorSpace=e.colorSpace,r.canvasConfig=e.canvasConfig,r.platform=e.platform,r.lastModifiedPlatform=e.lastModifiedPlatform,r.mutableConfig=e.mutableConfig,r.cover=e.cover?n.q7.deserialize(e,e.cover):void 0,r.retouchCover=e.retouchCover,r.staticCoverImagePath=e.staticCoverImagePath,r.extraInfo=e.extraInfo,r.relationships=e.relationships,r.renderIndexTrackModeOn=e.renderIndexTrackModeOn,r.freeRenderIndexModeOn=e.freeRenderIndexModeOn;let{config:o}=e;return r.videoMute=o.videoMute,r.recordAudioLastIndex=o.recordAudioLastIndex,r.extractAudioLastIndex=o.extractAudioLastIndex,r.originalSoundLastIndex=o.originalSoundLastIndex,r.subtitleRecognitionId=o.subtitleRecognitionId,r.subtitleTaskinfo=o.subtitleTaskinfo,r.lyricsRecognitionId=o.lyricsRecognitionId,r.lyricsTaskinfo=o.lyricsTaskinfo,r.subtitleSync=o.subtitleSync,r.lyricsSync=o.lyricsSync,r.stickerMaxIndex=o.stickerMaxIndex,r.adjustMaxIndex=o.adjustMaxIndex,r.materialSaveMode=o.materialSaveMode,r.exportRange=o.exportRange,r.maintrackAdsorb=o.maintrackAdsorb,r.combinationMaxIndex=o.combinationMaxIndex,r.attachmentInfo=o.attachmentInfo,r.zoomInfoParams=o.zoomInfoParams,r.systemFontList=o.systemFontList,r.multiLanguageMode=o.multiLanguageMode,r.multiLanguageMain=o.multiLanguageMain,r.multiLanguageCurrent=o.multiLanguageCurrent,r.multiLanguageList=o.multiLanguageList,r.subtitleKeywordsConfig=o.subtitleKeywordsConfig,t.tracks=e.tracks.map(t=>_.aK.deserialize(e,t)),t.groupContainer=e.groupContainer,t}static toDraft(e){let t=new n.nu,{metadata:i,property:a}=e;t.id=i.id,t.version=i.version,t.newVersion=i.newVersion,t.duration=i.duration,t.createTime=i.createTime,t.updateTime=i.updateTime,t.source=i.source,t.name=a.name,t.fps=a.fps,t.colorSpace=a.colorSpace,t.canvasConfig=a.canvasConfig,t.platform=a.platform,t.lastModifiedPlatform=a.lastModifiedPlatform,t.mutableConfig=a.mutableConfig,t.cover=a.cover?n.q7.serialize(t,a.cover):void 0,t.retouchCover=a.retouchCover,t.staticCoverImagePath=a.staticCoverImagePath,t.extraInfo=a.extraInfo,t.relationships=a.relationships,t.renderIndexTrackModeOn=a.renderIndexTrackModeOn,t.freeRenderIndexModeOn=a.freeRenderIndexModeOn,t.config=new r.DeH({videoMute:a.videoMute,recordAudioLastIndex:a.recordAudioLastIndex,extractAudioLastIndex:a.extractAudioLastIndex,originalSoundLastIndex:a.originalSoundLastIndex,subtitleRecognitionId:a.subtitleRecognitionId,subtitleTaskinfo:a.subtitleTaskinfo,lyricsRecognitionId:a.lyricsRecognitionId,lyricsTaskinfo:a.lyricsTaskinfo,subtitleSync:a.subtitleSync,lyricsSync:a.lyricsSync,stickerMaxIndex:a.stickerMaxIndex,adjustMaxIndex:a.adjustMaxIndex,materialSaveMode:a.materialSaveMode,exportRange:a.exportRange,maintrackAdsorb:a.maintrackAdsorb,combinationMaxIndex:a.combinationMaxIndex,attachmentInfo:a.attachmentInfo,zoomInfoParams:a.zoomInfoParams,systemFontList:a.systemFontList,multiLanguageMode:a.multiLanguageMode,multiLanguageMain:a.multiLanguageMain,multiLanguageCurrent:a.multiLanguageCurrent,multiLanguageList:a.multiLanguageList,subtitleKeywordsConfig:a.subtitleKeywordsConfig}),t.groupContainer=e.groupContainer;let o=new r.dlq({...t,tracks:[]});return o.tracks=e.tracks.map(e=>_.aK.serialize(t,e)),o}static toPersistDraft(e){return new r.dlq({...e,tracks:e.tracks.map(m.toPersistTrack)})}static toPersistTrack(e){return new r.$2y({...e,segments:e.segments.map(m.toPersistSegment)})}static toPersistSegment(e){return new r.iEA({...e,speed:(0,c.he)(e)||(0,c.Y9)(e)?e.speed.speed:void 0})}static fromPersistDraft(e){return new n.nu({...e,tracks:e.tracks.map(m.fromPersistTrack)})}static fromPersistTrack(e){return new r.fQ8({...e,segments:e.segments.map(m.fromPersistSegment)})}static fromPersistSegment(e){return new r.XX7({...e})}static toModelAttachmentAsyncTask(e){let t=new s.i;for(let i of e.tasks){let e=o.I8.deserialize({local_task_id:i.localTaskId,server_task_id:i.serverTaskId,batch_task_id:i.batchTaskId,draft_id:i.draftId,type:i.type,algo_type:i.algoType,status:i.status,detail_info:i.detailInfo,request_payload:i.requestPayload,context:i.context,attachment_params:i.attachmentParams,result_payload:i.resultPayload,duration:i.duration,create_time:i.createTime,in_queue_amount:i.inQueueAmount,in_queue_time:i.inQueueTime,expect_cost_time:i.expectCostTime,first_request_time:i.firstRequestTime,next_request_time:i.nextRequestTime,token:i.token,pre_create_expect_cost_time:i.preCreateExpectCostTime,enter_from:i.enterFrom,err_code:i.errCode,err_msg:i.errMsg,...i});t.asyncTaskMap.set(e.localTaskId,e)}return t}static toPersistentAttachmentAsyncTask(e){let t=[];for(let i of e.asyncTaskMap.values())t.push(o.I8.serialize(i));return{common_info:{version:1},tasks:t}}static toModelAttachmentVideoAlgorithms(e){let t=new l.c;for(let i of e.video_algorithms){let e=r.e_Q.deserialize({track_id:i.trackId,segment_id:i.segmentId,material_id:i.materialId,pipeline_id:i.pipelineId,...i});t.algorithms.set(e.segmentId,e)}return t}static toPersistentAttachmentVideoAlgorithms(e){let t={video_algorithms:[]};return e.algorithms.forEach(e=>t.video_algorithms.push({...e,...r.e_Q.serialize(e)})),t}static toModelAttachmentAiWriter(e){let t=new u.b;for(let[i,n]of Object.entries(e))t.aiWriterInfos.set(i,r.C8D.deserialize({segment_id:n.segmentId,ai_writer_type:n.aiWriterType,...n}));return t}static toPersistentAttachmentAiWriter(e){let t={};for(let[i,n]of e.aiWriterInfos.entries())t[i]=r.C8D.serialize(n);return t}static toModelAttachmentAiStory(e){return new d.c({materials:e.alternativeMaterialList.reduce((e,t)=>(e.set(t.segmentId,t),e),new Map),globalConfig:e.globalConfig,meta:e.meta,version:e.version})}static toPersistentAttachmentAiStory(e){return new r.z8z({alternativeMaterialList:Array.from(e.materials.values()),globalConfig:e.globalConfig,meta:e.meta,version:e.version})}}},669686:function(e,t,i){i.d(t,{I2:function(){return d},Tz:function(){return p},fZ:function(){return _},he:function(){return f},o8:function(){return g},tZ:function(){return c}});var r=i(467187),n=i(722169),a=i(572662),o=i(150251),s=i(283751);let l=Symbol("camelCase2");function u(e){let t=a.T.getInstance(l),i=t.get(e);if(i)return i;let n=e.match(/^(_+)/),o=(n?"_".repeat(n[1].length):"")+(0,r.eV)(e).replace(/_(\d)/g,"$1");return t.set(e,o),o}let d=(e,t)=>{var i,r,n,a,o,s;return new Set([...(null!==(i=e.common)&&void 0!==i?i:[]).map(e=>"string"==typeof e?u(e):u(e.name)),...(null!==(r=e.common)&&void 0!==r?r:[]).filter(e=>"string"!=typeof e).map(e=>u(e.rename)),...Object.keys(null!==(n=e.bigint)&&void 0!==n?n:{}).map(u),...Object.keys(null!==(a=e.array)&&void 0!==a?a:{}).map(u),...Object.keys(null!==(o=e.object)&&void 0!==o?o:{}).map(u),...t,...e.extend?d(null!==(s=e.extend)&&void 0!==s?s:{},[]):[]])},c=(e,t,i)=>{for(let[r,n]of Object.entries(t))i.has(r)&&void 0!==n&&(e[r]=n)},_=(e,t,i)=>{for(let[r,a]of Object.entries(t)){let t=(0,o.It)(a);t?e[r]=new t(a):(0,s.S)(a)?e[r]=a.clone(!0):i.has(r)&&void 0!==a&&(e[r]=(0,n.cloneDeep)(a))}},m=(e,t,i,r)=>{let n=null!=r?r:u(i);void 0!==t[i]&&null!==t[i]&&(e[n]=t[i])},h=(e,t,i,r)=>{let n=e=>r&&void 0===t[e];Object.keys(i).forEach(r=>{if(n(r))return;let a=u(r);switch(i[r].type){case"common":e[a]=((null==t?void 0:t[r])||[]).map(e=>e);break;case"bigint":e[a]=((null==t?void 0:t[r])||[]).map(e=>"bigint"==typeof e?e:BigInt(Math.floor(e)));break;case"object":e[a]=((null==t?void 0:t[r])||[]).map(e=>i[r].clsName().deserialize(e))}})},p=(e,t,i,r)=>{let{extend:n,common:a,bigint:o,object:s,array:l}=i;n&&p(e,t,n,r),a&&a.forEach(i=>{"object"==typeof i?m(e,t,i.name,i.rename):m(e,t,i)}),o&&Object.keys(o).forEach(i=>{var n,a,s,l;let d=r||o[i].nullable;n=e,a=t,s=i,l=d,n[u(s)]=void 0!==a[s]&&null!==a[s]?BigInt("bigint"==typeof a[s]?a[s]:Math.floor(a[s])):l?void 0:0n}),s&&Object.keys(s).forEach(i=>{let{type:n}=s[i],{nullable:a}=s[i];!function(e,t,i,r,n,a){let o=u(i);if(a){void 0===t[o]||(null===t[o]?e[o]=null:e[o]=r.deserialize(t[o]));return}void 0!==t[i]&&null!==t[i]?e[o]=r.deserialize(t[i]):!n&&(e[o]=new r)}(e,t,i,n(),a,r)}),l&&h(e,t,l,r)},g=(e,t,i)=>{let r;let{extend:n,common:a,bigint:o,object:s,array:l}=t,d=t=>i&&void 0===e[t];return r=n?g(e,n,i):{},a&&a.forEach(t=>{if("object"==typeof t){if(!d(t.rename))r[t.name]=e[t.rename]}else{let i=u(t);if(d(i))return;r[t]=e[i]}}),o&&Object.keys(o).forEach(t=>{let i=u(t);if(!d(i))r[t]=e[i]}),s&&Object.keys(s).forEach(t=>{let{type:n,nullable:a}=s[t],o=u(t);if(d(o))return;let l=n();if(i){if(void 0===e[o])return;null===e[o]?r[o]=null:r[o]=l.serialize(e[o])}else r[t]=void 0!==e[o]&&null!==e[o]?l.serialize(e[o]):a?null:l.serialize(new l)}),l&&Object.keys(l).forEach(t=>{let i=u(t);if(!d(i))switch(l[t].type){case"common":case"bigint":r[t]=((null==e?void 0:e[i])||[]).map(e=>e);break;case"object":r[t]=((null==e?void 0:e[i])||[]).map(e=>l[t].clsName().serialize(e))}}),e.__segment_struct_type&&(r.__segment_struct_type=e.__segment_struct_type),r},f=function(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t=>a&&void 0===e[t],{extend:s,common:l,bigint:d,object:c,array:_}=i;s&&f(e,t,s,r,n,a),l&&l.forEach(i=>{if(Array.isArray(n)){let e="string"==typeof i?i:i.name;if(r&&n.includes(e))return}else if(n&&r&&"id"===i)return;let a="object"==typeof i?u(i.name):u(i);if(!o(a))t[a]=e[a]}),d&&Object.keys(d).forEach(i=>{let r=u(i);if(!o(r))t[r]=e[r]}),c&&Object.keys(c).forEach(i=>{let{type:n,nullable:s}=c[i],l=u(i);if(o(l))return;let d=n();a?t[l]=e[l]?e[l].clone(r):e[l]:t[l]=e[l]?e[l].clone(r):s?e[l]:new d}),_&&Object.keys(_).forEach(i=>{let n=u(i);if(!o(n))switch(_[i].type){case"common":case"bigint":t[n]=((null==e?void 0:e[n])||[]).map(e=>e);break;case"object":t[n]=((null==e?void 0:e[n])||[]).map(e=>e.clone(r))}})}},150251:function(e,t,i){i.d(t,{A9:function(){return o},I9:function(){return n},It:function(){return a},_n:function(){return r},u2:function(){return l},w8:function(){return s}});let r="__propertyConstructor__",n="__deltaConstructor__",a=e=>{if(e&&void 0!==e[n])return e[n]},o=e=>{if(e&&void 0!==e[r])return e[r]};class s{}class l{}},280700:function(e,t,i){i.d(t,{Cm:function(){return c},DI:function(){return u},MD:function(){return l},aK:function(){return _},tE:function(){return d}});var r=i(81649),n=i(340294),a=i(211561),o=i(268468),s=i(481631);function l(e){let{type:t,flag:i}=e;return t===a.pNd.TrackTypeVideo&&i===a.w9k.FlagNone}function u(e){return e.some(e=>l(e))}function d(e,t,i){return e.type===a.pNd.TrackTypeVideo?function(e,t,i){let{segments:a}=e,o=t.targetTimerange.start;for(let e=0;e<a.length;e++){let t=a[e];if("SegmentTailLeader"===t.__segment_struct_type)return e;let{start:s,duration:l}=t.targetTimerange,u=n.pM.plus(s,n.pM.div(l,2),"bigint");if(r.ME.compareAlignTime(u,o,1e6/i)>0)return e}return a.length}(e,t,i.fps):function(e,t){let{segments:i}=e,r=t.targetTimerange.start;for(let e=0;e<i.length;e++){let{start:t}=i[e].targetTimerange;if(r<=t)return e}return i.length}(e,t)}function c(e,t){for(let[i,r]of e.entries())for(let[e,n]of r.segments.entries())if(n.id===t)return{trackId:r.id,trackIndex:i,segmentId:t,segmentIndex:e}}class _{static serialize(e,t){let i=new a.$2y;for(let e of Object.keys(t))i[e]=t[e];return i.segments=t.segments.map(t=>s.b2.serialize(e,t)),i}static deserialize(e,t){let i=new o.fQ;for(let e of Object.keys(t))i[e]=t[e];return i.segments=t.segments.map(t=>s.b2.deserialize(e,t)),i}}},76592:function(e,t,i){i.d(t,{h:function(){return f}});var r=i(282192),n=i(331509),a=i(475028),o=i(690613),s=i(800788),l=i(340294),u=i(198544),d=i(381119);let c=(0,a.i)(u.m.DeleteAttachmentKeyNotExist,"");class _{check(e){return void 0===this.getData(e)?c(`attachment key not exist: ${this.key}`):(0,o.ly)()}constructor(e){this.key=e}}class m extends _{static deserialize(e){return new m(e.key)}serialize(){return{key:this.key}}getInvertMutation(e){return new d.Q({attachmentKey:n.d3.AsyncTask,key:this.key,value:e.getAsyncTask(this.key).clone()})}getData(e){return e.getAsyncTask(this.key)}deleteData(e){e.attachmentAsyncTask.asyncTaskMap.delete(this.key)}transform(e,t,i){return[e]}constructor(e){super(e),this.key=e}}class h extends _{static deserialize(e){return new h(e.key)}serialize(){return{key:this.key}}getInvertMutation(e){return new d.Q({attachmentKey:n.d3.VideoAlgorithm,key:this.key,value:e.getVideoAlgorithm(this.key).clone()})}getData(e){return e.getVideoAlgorithm(this.key)}deleteData(e){e.attachmentVideoAlgorithms.algorithms.delete(this.key)}transform(e,t,i){return[e]}constructor(e){super(e),this.key=e}}class p extends _{static deserialize(e){return new p(e.key)}serialize(){return{key:this.key}}getInvertMutation(e){return new d.Q({attachmentKey:n.d3.AiWriter,key:this.key,value:e.getAiWriterInfo(this.key).clone()})}getData(e){return e.getAiWriterInfo(this.key)}deleteData(e){e.attachmentAiWriter.aiWriterInfos.delete(this.key)}transform(e,t,i){return[e]}constructor(e){super(e),this.key=e}}class g extends _{static deserialize(e){return new g(e.key)}serialize(){return{key:this.key}}getInvertMutation(e){return new d.Q({attachmentKey:n.d3.AiStoryAlternativeMaterial,key:this.key,value:{draftId:e.getDraftId(),trackId:e.getTrackBySegmentId(this.key).id,trackIndex:e.getTrackIndexBySegmentId(this.key),material:e.getAiStoryAlternativeMaterialBySegmentId(this.key).clone()}})}getData(e){return e.getAiStoryAlternativeMaterialBySegmentId(this.key)}deleteData(e){e.attachmentAiStory.deleteMaterial(this.key)}transform(e,t,i){let n={[r.x1.AttachmentDeleteMutation]:this._transformWithAttachmentDeleteMutation.bind(this,e,t,i)};return n[t.type]?n[t.type]():[e]}_transformWithAttachmentDeleteMutation(e,t,i){return e.options.key!==t.options.key?[e]:[]}constructor(e){super(e),this.key=e}}class f extends r.mm{static deserialize(e){let t;switch(e.attachmentKey){case n.d3.AsyncTask:{let i=m.deserialize(e.data);t={attachmentKey:e.attachmentKey,key:i.key};break}case n.d3.VideoAlgorithm:{let i=h.deserialize(e.data);t={attachmentKey:e.attachmentKey,key:i.key};break}case n.d3.AiWriter:{let i=p.deserialize(e.data);t={attachmentKey:e.attachmentKey,key:i.key};break}case n.d3.AiStoryAlternativeMaterial:{let i=g.deserialize(e.data);t={attachmentKey:e.attachmentKey,key:i.key};break}case n.d3.AiStoryGlobalId:(0,s.Y2)(!1,"couldn't delete ai-story id");case n.d3.AiStoryMeta:(0,s.Y2)(!1,"couldn't delete ai story meta");case n.d3.AiCreator:(0,s.Y2)(!1,"couldn't delete ai creator");default:(0,s.bP)(e.attachmentKey)}return new f(t)}static serialize(e){let t={attachmentKey:e.options.attachmentKey,data:e.executor.serialize(),version:e.version,type:e.type};return l.HH.stringify(t)}get type(){return f.type}invert(e){return[this.executor.getInvertMutation(e)]}transform(e,t){return this.executor.transform(this,e,t)}clone(){return new f(this.options)}check(e){return this.executor.check(e)}runOnModel(e){this.executor.deleteData(e)}constructor(e){switch(super(),this.options=e,e.attachmentKey){case n.d3.AsyncTask:this.executor=new m(e.key);break;case n.d3.VideoAlgorithm:this.executor=new h(e.key);break;case n.d3.AiWriter:this.executor=new p(e.key);break;case n.d3.AiStoryAlternativeMaterial:this.executor=new g(e.key);break;default:(0,s.bP)(e)}}}f.type=r.x1.AttachmentDeleteMutation},282192:function(e,t,i){i.d(t,{DG:function(){return a.DG},mm:function(){return r.m},x1:function(){return n.x}});var r=i(932422),n=i(392742),a=i(567837);i(331509)},333217:function(e,t,i){i.d(t,{c:function(){return f}});var r=i(475028),n=i(690613),a=i(268468),o=i(280700),s=i(932422),l=i(198544),u=i(392742),d=i(430832),c=i(340294),_=i(417609);let m=(0,r.i)(l.m.InsertTrackIdDuplicate,""),h=(0,r.i)(l.m.InsertTrackMainTrackAlreadyExist,""),p=(0,r.i)(l.m.InsertTrackMainTrackIndexInvalid,""),g=(0,r.i)(l.m.InsertTrackIndexInvalid,"");class f extends s.m{static deserialize(e){let t=new f({...e});return t.updateDataVersion(e.version),t}static serialize(e){let t="{";return e.draftId&&(t+=`"draftId":"${e.draftId}",`),t+=`"trackIndex":${e.trackIndex},"trackProperty":${c.HH.stringify(e.trackProperty)},"version":"${e.version}","type":${e.type}}`}invert(e){return[new d.R({draftId:this.draftId,trackId:this.trackProperty.id,trackIndex:this.trackIndex,trackProperty:this.trackProperty})]}transform(e,t){let i={[u.x.InsertTrack]:this._transformWithInsertTrackMutation.bind(this,e,t),[u.x.DeleteTrack]:this._transformWithDeleteTrackMutation.bind(this,e,t),[u.x.MoveSegment]:this._transformWithMoveSegmentMutation.bind(this,e,t)};return i[e.type]?i[e.type]():[this]}check(e){var t;let{trackIndex:i}=this,{id:r,type:a,flag:s}=this.trackProperty,l=null!==(t=e.getDraftById(this.draftId))&&void 0!==t?t:e;if(l.getTrackById(r))return m(`id duplicate: ${r}`);if((0,o.MD)({type:a,flag:s})){if((0,o.DI)(l.tracks))return h();if(0!==i)return p()}else if(!(i>0&&i<=l.tracks.length))return g(`index is invalid: ${i}`);return(0,n.ly)()}runOnModel(e){var t;let i=null!==(t=e.getDraftById(this.draftId))&&void 0!==t?t:e,r=new a.wO;r.id=this.trackProperty.id,r.type=this.trackProperty.type,r.flag=this.trackProperty.flag,r.name=this.trackProperty.name,r.attribute=this.trackProperty.attribute;i.insertTrack(this.trackIndex,r)}_transformWithInsertTrackMutation(e,t){let{trackProperty:i,trackIndex:r,draftId:n}=this,{trackIndex:o,trackProperty:s,draftId:l}=e,u=new a.C4(i);return 0===r&&0===o?t?[new _.t({trackId:s.id,trackDelta:u})]:[]:r===o&&t?[new f({trackProperty:i,trackIndex:r+1,draftId:n})]:[this]}_transformWithDeleteTrackMutation(e,t){let{trackProperty:i,trackIndex:r,draftId:n}=this,{trackIndex:a}=e;return r>a&&t?[new f({trackProperty:i,trackIndex:r-1,draftId:n})]:[this]}_transformWithMoveSegmentMutation(e,t){return[this]}clone(){return new f({draftId:this.draftId,trackIndex:this.trackIndex,trackProperty:this.trackProperty})}constructor(e){super(),this.type=u.x.InsertTrack,this.draftId=e.draftId,this.trackIndex=e.trackIndex,this.trackProperty=e.trackProperty}}},537004:function(e,t,i){function r(e,t){if(e===t)return 0;let i=e.split("."),r=t.split("."),n=0;for(;i[n]&&r[n];){if(+i[n]==+r[n]){n+=1;continue}return+i[n]>+r[n]?1:-1}return i[n]?1:r[n]?-1:0}function n(e,t){if(0===e.length)return t;let i=null!=t?t:e[0].version;return e.forEach(e=>{-1===r(i,e.version)&&(i=e.version)}),i}i.d(t,{Cb:function(){return r},Zq:function(){return n}})},642366:function(e,t,i){function r(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[r,n,a]=t;return r.editor.commit(()=>{r.pictureAdjust.add(n,a)}),!0}function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[r,n,a,o]=t;return r.editor.commit(()=>{r.pictureAdjust.update(n,a,o)}),!0}function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[r,n]=t;return r.editor.commit(()=>{r.pictureAdjust.remove(n)}),!0}i.d(t,{Jm:function(){return r},dK:function(){return a},xo:function(){return n}})},677408:function(e,t,i){i.d(t,{Lw:function(){return s},Se:function(){return o},ZT:function(){return a},uE:function(){return l}});var r=i(283751),n=i(481631);function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[r,n,a]=t;return r.editor.commit(()=>{r.videoEffect.add(n,a)}),!0}function o(){for(var e,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];let[n,a,o,s]=i;return n.editor.commit(()=>{n.videoEffect.update(a,o,s)}),(null===(e=o.targetTimerange)||void 0===e?void 0:e.start)!==void 0}function s(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[a,o,s,l]=t,u=l.getSegmentById(o),d=u.clone();return s?(r.T.merge(d,s),a.editor.commit(()=>{a.videoEffect.updatePreview(o,d,s)}),!1):(a.editor.commit(()=>{a.videoEffect.updatePreview(o,d,(0,n.xX)(u))}),!1)}function l(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[r,a,o,s]=t,l=s.getSegmentById(a);if(l)return r.editor.commit(()=>{r.videoEffect.updatePreview(a,l,(0,n.xX)(l))}),!1}},667688:function(e,t,i){i.d(t,{ze:()=>h,CM:()=>p,E:()=>m,p4:()=>f,hs:()=>g});var r=i("211561"),n=i("239648"),a=i("358324"),o=i("481631"),s=i("13242");let l=(e,t)=>!s.U.isValidValue(e,t,r.Eu.KFTypeChromaIntensity,[0]);var u=i("361708"),d=i("283751"),c=i("342040"),_=i("298188");function m(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[a,s,d]=t;return!!(0,o.he)(s)&&(a.editor.commit(()=>{var e,t,i,o,c,_,m,h;if(!a.video.add(s,d).ok)return;if(u.b.isCombination(s)&&a.draft.subDraftExecuteAdd(s),void 0!==s.speed&&a.video.updateTimeInfo(s),(void 0!==s.clip||void 0!==s.material.cropScale||void 0!==s.mixMode)&&a.video.updateTransform(s.id,s.clip,s.material.cropScale,s.mixMode,d),(null===(e=s.material)||void 0===e?void 0:e.crop)!==void 0&&a.video.updateCrop(s.id,s.material.crop),void 0!==s.background&&0===d.getTrackIndexBySegmentId(s.id,[r.pNd.TrackTypeVideo])&&a.video.updateBackground(s.id,s.background),(null===(t=s.material)||void 0===t?void 0:t.matting)!==void 0&&a.video.updateMatting(s.id,s.material.matting),void 0!==s.volume||void 0!==s.lastNonzeroVolume||(null===(i=s.material)||void 0===i?void 0:i.extraTypeOption)!==void 0||void 0!==s.trackAttribute){let{volume:e}=s;(s.material.extraTypeOption&r.Yzk.HasSeparatedAudio||BigInt(s.trackAttribute)&r.$SW.MuteFlag)&&(e=0),a.video.updateVolume(s.id,e,d)}void 0!==s.material.audioFade&&a.video.updateAudioFade(s.id,s.material.audioFade),void 0!==s.isToneModify&&a.video.updateTone(s.id,s.isToneModify),void 0!==s.voiceChange&&a.video.updateVoiceChange(s.id,s.voiceChange,d),void 0!==s.realtimeDenoise&&a.video.updateRealtimeDenoise(s.id,s.realtimeDenoise),void 0!==s.animations&&a.video.updateAnimations(s.id,s.animations),void 0!==s.videoMask&&a.video.updateMask(s.id,s,d),void 0!==s.chroma&&!l(d,s)&&a.video.updateChroma(s.id,s.chroma,d),(null===(o=s.videoEffects)||void 0===o?void 0:o.length)&&a.video.updateEffect(s.id,s.videoEffects,d),void 0!==s.filter&&a.video.updateFilter(s.id,s.filter,d),void 0!==s.adjust&&a.video.updateVideoAdjust(s,d,null),void 0!==s.smartCrop&&a.video.updateSmartCrop(s),void 0!==s.figures&&a.video.updateVideoFigure(s.figures,s,d),(null===(c=s.digitalHuman)||void 0===c?void 0:c.background)!==void 0&&a.video.updateDigitalHumanBackground(s.id,s,s),(null===(_=s.digitalHuman)||void 0===_?void 0:_.mask)!==void 0&&a.video.updateDigitalHumanMask(s.id,s,s);let p=d.getTrackBySegmentId(s.id);if(!p)return!1;let g=new n.Uo().findPrevSegment(p,s);s.transition&&""!==s.transition.path&&(a.transition.add(s,d),(null===(m=s.transition)||void 0===m?void 0:m.isOverlap)&&a.video.setClipInfoForOverlapTransition(s.transition,s.id,d)),(null==g?void 0:g.transition)&&""!==g.transition.path&&(a.transition.add(g,d),(null==g?void 0:null===(h=g.transition)||void 0===h?void 0:h.isOverlap)&&a.video.setClipInfoForOverlapTransition(null==g?void 0:g.transition,g.id,d)),void 0!==s.material.objectLocked&&a.video.updateObjectLock(s.id,d,s)}),!0)}function h(){for(var e,t,i,s,l,u,d,h,p,g,f,T,y,v,E=arguments.length,I=Array(E),A=0;A<E;A++)I[A]=arguments[A];let[S,k,M,w]=I;if(!(0,o.RF)(M))return!1;let C=w.getSegmentById(k);if(!C)return!1;let O=S.editor.getClipBase(C.id);if(!O)return!1;let D=w.getTrackBySegmentId(C.id);if(!D)return!1;let x=(0,_.u)(C),b=c.k.getInstance().pathRecords.get(x.path)||void 0;return void 0!==M.reverse||(null===(e=M.material)||void 0===e?void 0:e.reversePath)!==void 0||(null===(i=M.material)||void 0===i?void 0:null===(t=i.videoAlgorithm)||void 0===t?void 0:t.path)!==void 0||(null===(s=M.material)||void 0===s?void 0:s.path)!==void 0||(null===(l=M.materialDraft)||void 0===l?void 0:l.draft)!==void 0||b!==(null===(u=O.data.bind_audio_info)||void 0===u?void 0:u.filePath)||(null===(d=M.material)||void 0===d?void 0:d.matting)!==void 0&&(0,o.NH)(C)?((0,a.iB)(S,C.id,C),m(S,C,w)):(S.editor.commit(()=>{var e,t,i,a,s,l,u,d,c,_,m,h,p,g,f;if((void 0!==M.speed||void 0!==M.sourceTimerange||void 0!==M.targetTimerange)&&S.video.updateTimeInfo(C),(void 0!==M.clip||(null===(e=M.material)||void 0===e?void 0:e.cropScale)!==void 0||void 0!==M.mixMode||void 0!==M.commonKeyframes||void 0!==M.targetTimerange)&&S.video.updateTransform(C.id,C.clip,C.material.cropScale,C.mixMode,w,M),(null===(t=M.material)||void 0===t?void 0:t.crop)!==void 0&&S.video.updateCrop(C.id,C.material.crop),void 0!==M.background&&0===w.getTrackIndexBySegmentId(k,[r.pNd.TrackTypeVideo])&&S.video.updateBackground(C.id,C.background),(null===(i=M.material)||void 0===i?void 0:i.matting)!==void 0&&S.video.updateMatting(C.id,C.material.matting),(null===(a=M.digitalHuman)||void 0===a?void 0:a.background)!==void 0&&S.video.updateDigitalHumanBackground(C.id,C,M),(null===(s=M.digitalHuman)||void 0===s?void 0:s.mask)!==void 0&&S.video.updateDigitalHumanMask(C.id,C,M),void 0!==M.volume||void 0!==M.lastNonzeroVolume||(null===(l=M.material)||void 0===l?void 0:l.extraTypeOption)!==void 0||void 0!==M.commonKeyframes||void 0!==M.targetTimerange||void 0!==M.trackAttribute&&null!==M.trackAttribute){let{volume:e}=C;(C.material.extraTypeOption&r.Yzk.HasSeparatedAudio||BigInt(D.attribute)&r.$SW.MuteFlag)&&(e=0),S.video.updateVolume(C.id,e,w,M)}if((null===(u=M.material)||void 0===u?void 0:u.audioFade)!==void 0&&S.video.updateAudioFade(C.id,C.material.audioFade),void 0!==M.isToneModify&&S.video.updateTone(C.id,C.isToneModify),(void 0!==M.voiceChange||void 0!==M.commonKeyframes||void 0!==M.targetTimerange)&&S.video.updateVoiceChange(C.id,C.voiceChange,w,M),void 0!==M.realtimeDenoise&&S.video.updateRealtimeDenoise(C.id,C.realtimeDenoise),void 0!==M.animations&&S.video.updateAnimations(C.id,C.animations),(void 0!==M.videoMask||void 0!==M.commonKeyframes||void 0!==M.targetTimerange)&&S.video.updateMask(C.id,C,w,M),(void 0!==C.chroma||void 0!==M.chroma||void 0!==M.commonKeyframes)&&S.video.updateChroma(C.id,C.chroma,w,M),(null===(d=C.videoEffects)||void 0===d?void 0:d.length)&&S.video.updateEffect(C.id,C.videoEffects,w),void 0!==M.filter&&S.video.updateFilter(C.id,C.filter,w),(void 0!==M.adjust||void 0!==M.commonKeyframes||void 0!==M.targetTimerange)&&S.video.updateVideoAdjust(C,w,null!==(h=M.adjust)&&void 0!==h?h:null),void 0!==M.smartCrop&&S.video.updateSmartCrop(C),void 0!==M.transition)null===M.transition?(S.transition.remove(C.id,w),S.video.setClipInfoForRemoveOverlapTransition(C,w)):(M.transition.id?S.video.setClipInfoForRemoveOverlapTransition(C,w):((null===(p=C.transition)||void 0===p?void 0:p.isOverlap)&&S.video.setClipInfoForRemoveOverlapTransition(C,w),S.transition.remove(C.id,w)),S.transition.add(C,w));else if(void 0!==M.trackRenderIndex&&M.targetTimerange){C.transition&&((null===(g=C.transition)||void 0===g?void 0:g.isOverlap)&&S.video.setClipInfoForRemoveOverlapTransition(C,w),S.transition.remove(C.id,w),S.transition.add(C,w));let e=new n.Uo().findPrevSegment(D,C);e&&(0,o.he)(e)&&(null==e?void 0:e.transition)&&""!==e.transition.path&&(S.transition.remove(e.id,w),S.transition.add(e,w),(null==e?void 0:null===(f=e.transition)||void 0===f?void 0:f.isOverlap)&&S.video.setClipInfoForOverlapTransition(null==e?void 0:e.transition,e.id,w))}void 0!==M.visible&&S.editor.updateVisible(C.id,C.visible);let T=new n.Uo().findPrevSegment(D,C);(null===(c=C.transition)||void 0===c?void 0:c.isOverlap)&&S.video.setClipInfoForOverlapTransition(C.transition,C.id,w),(null==T?void 0:null===(_=T.transition)||void 0===_?void 0:_.isOverlap)&&S.video.setClipInfoForOverlapTransition(null==T?void 0:T.transition,T.id,w),void 0!==M.figures&&S.video.updateVideoFigure(C.figures,C,w),(null===(m=M.material)||void 0===m?void 0:m.objectLocked)!==void 0&&S.video.updateObjectLock(C.id,w,M)}),!!((null===(p=M.material)||void 0===p?void 0:null===(h=p.matting)||void 0===h?void 0:h.flag)||(null===(f=M.material)||void 0===f?void 0:null===(g=f.matting)||void 0===g?void 0:g.path)||(null===(T=M.sourceTimerange)||void 0===T?void 0:T.start)!==void 0||(null===(y=M.targetTimerange)||void 0===y?void 0:y.start)!==void 0||void 0!==M.speed||(null===(v=M.digitalHuman)||void 0===v?void 0:v.background)))}function p(){for(var e,t,i=arguments.length,n=Array(i),s=0;s<i;s++)n[s]=arguments[s];let[l,u,_,h]=n,p=h.getSegmentById(u);if(!p||!(0,o.he)(p)||!(0,o.RF)(_))return!1;let{figures:g,mixMode:f,digitalHuman:T,material:y,voiceChange:v,clip:E}=_;if(null==y?void 0:y.path){let e=p.clone();return d.T.merge(e,_,(0,o.xX)({__segment_struct_type:p.__segment_struct_type})),l.video.remove(p.id),m(l,e,h)}if(void 0!==g)return l.editor.commit(()=>{l.video.updateVideoFigure(g,p,h)}),!1;if(void 0!==f||void 0!==E)return l.editor.commit(()=>{let e=p.clip.clone(),t=_.clip?d.T.merge(e,_.clip):e;l.video.updateTransform(p.id,t,p.material.cropScale,_.mixMode?{path:_.mixMode.path}:void 0,h,_)}),!1;if(void 0!==T)return l.editor.commit(()=>{let e=p.clone();return d.T.merge(e,_,(0,o.xX)({__segment_struct_type:p.__segment_struct_type})),(null==T?void 0:T.mask)!==void 0&&l.video.updateDigitalHumanMask(p.id,e,_),(null==T?void 0:T.background)!==void 0&&l.video.updateDigitalHumanBackground(p.id,e,_),!!(null==T?void 0:T.background)}),!!(null==T?void 0:T.background);if(v){let i=(null===(e=v[0])||void 0===e?void 0:e.subType)===r.xbm.AudioEffectTypeVCVoiceChange?v[0].productionPath:"",n=c.k.getInstance().pathRecords.get(i)||void 0;if(n!==(null===(t=l.editor.getClipBase(u).data.bind_audio_info)||void 0===t?void 0:t.filePath)){(0,a.iB)(l,u,p);let e=p.clone();return e.voiceChange=v,m(l,e,h)}return l.editor.commit(()=>{l.video.updateVoiceChange(p.id,v,h,_)})}return!1}function g(){for(var e,t,i,n,s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];let[d,_,h,p]=l,g=p.getSegmentById(_);if(!g||!(0,o.he)(g)||!(0,o.RF)(h))return!1;let{figures:f,mixMode:T,digitalHuman:y,material:v,voiceChange:E}=h;if(null==v?void 0:v.path)return(0,a.iB)(d,_,g),m(d,g,p);let I=(null===(t=g.voiceChange)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.subType)===r.xbm.AudioEffectTypeVCVoiceChange?null===(i=g.voiceChange)||void 0===i?void 0:i[0].productionPath:"",A=c.k.getInstance().pathRecords.get(I)||void 0;if(A!==(null===(n=d.editor.getClipBase(_).data.bind_audio_info)||void 0===n?void 0:n.filePath))return(0,a.iB)(d,_,g),m(d,g,p);d.editor.commit(()=>{let e=!1;return f&&d.video.updateVideoFigure(g.figures,g,p),T&&d.video.updateTransform(g.id,g.clip,g.material.cropScale,g.mixMode,p,new r.NOn(g)),(null==y?void 0:y.background)!==void 0&&(d.video.updateDigitalHumanBackground(g.id,g,new r.NOn(g),!0),e=!0),(null==y?void 0:y.mask)!==void 0&&d.video.updateDigitalHumanMask(g.id,g,new r.NOn(g),!0),E&&d.video.updateVoiceChange(g.id,g.voiceChange,p),e})}function f(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let[r,n]=t,a=r.editor.commit(()=>{r.video.remove(n)}),{preview:o}=r.editor.render;return null==o||o.seekWithoutCallback(o.progress),a}},664678:function(e,t,i){i.d(t,{o:function(){return p}});var r=i(59670),n=i(632634),a=i(396402),o=i(378188),s=i(729951),l=i(481631),u=i(690613),d=i(733353),c=i(185400),_=i(342040),m=i(285474),h=i(438176);class p extends r.D{add(e,t){let{editor:i}=this._render;if(!i)return(0,u.wf)(n.FF.editorNotInit,"editor not init");let r=(0,o.so)(e);if(!r)return(0,u.wf)(n.FF.addClipFail,"add sticker failed");let s=this.getRenderIndex(e),p=i.addTrack(a.u2.EffectTrack,s);if(!p)return(0,u.wf)(n.FF.addTrackFail,"add sticker track fail");r.filter.filterLayer=BigInt(s);let g={start:e.offset+e.targetTimerange.start,duration:e.targetTimerange.duration},f=i.addClip(p,r,g.start,g.start+g.duration);h.R?i.infoSticker&&(0,m.iE)(e,i):f.then(()=>{i.infoSticker&&(0,m.iE)(e,i)});let T=1,{material:y}=e;if((null==y?void 0:y.type)==="image"){var v,E;let e=JSON.stringify({sticker_path:_.k.getInstance().pathRecords.get(y.path),canvas_size:[100,100]}),t=JSON.parse(i.utils.getInfoStickerData(e));T=y.width/(null!==(E=null===(v=t.original_size)||void 0===v?void 0:v[0])&&void 0!==E?E:y.width)}let I=(0,l.P7)(e)?e.material.initialScale:1;return this.updateTransform(e.id,e.clip,t,I*T),this.updateAnimations(e,!0),d.Rj.executeUpdateByTypeList({render:this._render,videoDocument:t,clipId:r.id,parentId:r.id,keyframeTypeList:c.Q0}),(0,u.ly)()}update(e,t){let i=t.getSegmentById(e);if(!i||!(0,l.P2)(i))return(0,u.wf)(n.FF.segmentInvalid,"not filter segment");if(i.targetTimerange.duration<=0)return(0,u.wf)(n.FF.segmentInvalid,"invalid target duration");let{editor:r}=this._render;return r?(r.updateClipSequenceTime(e,i.targetTimerange.start,i.targetTimerange.start+i.targetTimerange.duration),(0,u.ly)()):(0,u.wf)(n.FF.editorNotInit,"editor not init")}updateTransform(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4?arguments[4]:void 0;if(!e)return(0,u.wf)(n.FF.segmentInvalid,"segment id empty");if(!t)return(0,u.wf)(n.FF.segmentInvalid,"no segment clip");let{editor:l}=this._render;if(!l)return(0,u.wf)(n.FF.editorNotInit,"editor not init");let _=(0,s.$F)(t,r);return _?(_.id=`${e}_${a.UO.Transform}`,l.getFilterById(e,_.id)?l.updateFilter(_):l.addFilter(_,e),d.Rj.executeUpdateByTypeList({render:this._render,videoDocument:i,clipId:e,parentId:e,keyframeTypeList:c.Q0,delta:o}),(0,u.ly)()):(0,u.wf)(n.FF.updateFilterFail,"make sticker transform filter fail")}updateAnimations(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return(0,u.wf)(n.FF.segmentInvalid,"segment is empty");let{editor:i}=this._render;if(!i)return(0,u.wf)(n.FF.editorNotInit,"editor not init");let r=(0,s.yR)(e);return r?(r.id=`${e.id}_${a.UO.StickerAnimation}`,i.getFilterById(e.id,r.id)?i.updateFilter(r):i.addFilter(r,e.id),(0,u.ly)()):t?void 0:(i.removeFilter(`${e.id}_${a.UO.StickerAnimation}`),(0,u.ly)())}async removeClip(e){let{editor:t}=this._render;return t?new Promise(i=>{t.commit(()=>{t.removeClip(e),i((0,u.ly)())})}):(0,u.wf)(n.FF.editorNotInit,"editor not init")}updateVideoTracking(e,t){if(!(0,l.P2)(e)){console.error("segment is invalid");return}let{editor:i}=this._render;if(!(null==i?void 0:i.infoSticker))return(0,u.wf)(n.FF.editorNotInit,"infoSticker not init");(0,m.vT)(e,t,i).then(()=>{null==i||i.commit(()=>!0)})}}},745609:function(e,t,i){i.d(t,{Bc:function(){return _},HT:function(){return h},KL:function(){return g},a7:function(){return p},a9:function(){return c},dK:function(){return f},fA:function(){return T},qY:function(){return y},vD:function(){return E}});var r,n=i(342040),a=i(211561),o=i(378188),s=i(448220),l=i(78975),u=i(438176),d=i(396402);var c=((r={})[r.kBeauty=0]="kBeauty",r[r.kReshape=1]="kReshape",r[r.kMakeUp=2]="kMakeUp",r[r.kBody=3]="kBody",r);class _{constructor(){this.path="",this.strength=1,this.resource_id="",this.sub_type=a.DeX.MetaSubTypeNone,this.extra_params={},this.algorithm_cache_folder="",this.intensity_key="",this.exclusion_group=[],this.face_adjust_params={},this.catetory=3}}let m=e=>{let t=d.Np.NONE;switch(e){case 3:t=d.Np.BODY;break;case 0:t=d.Np.BEAUTY;break;case 1:t=d.Np.MODEL;break;case 2:t=d.Np.MAKEUPS}return t},h=(e,t,i,r)=>{let s={},{sub_type:l,intensity_key:u,extra_params:d,strength:c,algorithm_cache_folder:_,face_adjust_params:m}=t;switch(l){case a.DeX.MetaSubTypeAutoBeauty:let h=[];for(let e in d){let t={id:Number(e),intensity:d[e]};h.push(t)}let p={id:-1,intensity:t.strength};h.push(p),s.algorithm_cache_folder=n.k.getInstance().pathRecords.get(_)||_,u?s[u]=h:s.face_adjust=h;break;case a.DeX.MetaSubTypeExclusion:case a.DeX.MetaSubTypeExclusionFace:let g={};for(let e in m){let{disable_part:t,adjust_params:i,enable:r}=m[e];for(let n in i){let a={intensity:r?i[n]:0,id:Number(e),disable_part:t};g[n]?g[n].push(a):g[n]=[a]}}for(let e in g)s[e]=g[e];s.algorithm_cache_folder=_;break;default:s.intensity=c}return(0,o.Uo)({id:i,renderIndex:BigInt(e),param:JSON.stringify(s),visible:r,res:t.path})},p=(e,t,i,r)=>{var s,l,d,c,_,h,p;let g={},f="";Object.keys(null!==(l=null==t?void 0:t.figureMap)&&void 0!==l?l:{}).forEach(e=>{var i;let r=null==t?void 0:null===(i=t.figureMap)||void 0===i?void 0:i[e],{sub_type:n,face_adjust_params:o,extra_params:s,intensity_key:l}=r||{};switch(n){case a.DeX.MetaSubTypeExclusion:case a.DeX.MetaSubTypeExclusionFace:let u={};for(let e in o){let{enable:t,disable_part:i,adjust_params:n}=o[e];for(let a in n){let o={intensity:t?n[a]:0,id:Number(e),disable_part:i,path:r.path};u[a]?u[a].push(o):u[a]=[o]}}for(let e in u)g[e]=u[e];f=r.resource_id;break;case a.DeX.MetaSubTypeAutoBeauty:default:let d=[];for(let e in s){let t={id:Number(e),intensity:s[e]};d.push(t)}let c={id:-1,intensity:r.strength};d.push(c),g[l]=d}f=r.resource_id});let T=null==t?void 0:null===(s=t.figureMap)||void 0===s?void 0:s[f];g.algorithm_cache_folder=null!==(c=n.k.getInstance().pathRecords.get(null!==(d=null==T?void 0:T.algorithm_cache_folder)&&void 0!==d?d:"")||(null==T?void 0:T.algorithm_cache_folder))&&void 0!==c?c:"";let y="";y=u.H?`/__opfs_system_root${null!==(_=null==r?void 0:r.path)&&void 0!==_?_:""}`:n.k.getInstance().pathRecords.get(null!==(h=null==r?void 0:r.path)&&void 0!==h?h:"");let v=null!==(p=r?y:null==T?void 0:T.path)&&void 0!==p?p:"",E=(0,o.Uo)({id:e,renderIndex:BigInt(i),param:JSON.stringify(g),visible:!0,res:v});return E.amazing_body_type=m(t.catetory),E},g=e=>{let{strength:t,extra_params:i,face_adjust_params:r}=e;if(Math.abs(t)>0)return!1;for(let e in i)if(Math.abs(i[e])>0)return!1;for(let e in r){let{enable:t,adjust_params:i}=r[e];for(let e in i)if(Math.abs(t?i[e]:0)>0)return!1}return!0},f=e=>{if(!e)return!0;let{figureMap:t}=e;if(!t)return!0;for(let e of Object.values(t))if(!g(e))return!1;return!0},T=e=>{if(!e)return;let{algorithm_cache_folder:t}=e;u.R||l.P.instance.createFolder(t)},y=e=>s.h[e]||4e3,v=0,E=e=>(v+=1,`${e}_${v}_videoFigure`)},592444:function(e,t,i){i.d(t,{H:function(){return r}});class r{}},232383:function(e,t,i){i.d(t,{Ni:function(){return l},Oz:function(){return s},RF:function(){return r},Xi:function(){return a},ZA:function(){return c},_4:function(){return n},gJ:function(){return d},je:function(){return _},oW:function(){return o},q1:function(){return u}});let r="preview_editor",n="#000000FF",a="ve_enbale_sub_sequence",o="ve_enable_model_hot_update",s="SetStickerResolutionWithHeight",l="vesdk_web_stream_audio_avsync",u="vesdk_web_stream_fetch_opt",d="vesdk_enable_use_pre_frame_strict",c="vesdk_enable_ff264_strict",_="ve_enable_skip_drop_frame"},231536:function(e,t,i){i.d(t,{$l:function(){return a},LO:function(){return l},Xl:function(){return n},o:function(){return o},wy:function(){return u}});let r=new Map;function n(e){return r.has(e)}function a(e,t){r.set(e,t)}function o(e){var t;return null!==(t=r.get(e))&&void 0!==t?t:""}let s=new Map;function l(e){var t;return null!==(t=s.get(e))&&void 0!==t?t:""}function u(e){s.delete(e),r.delete(e)}},469042:function(e,t,i){i.d(t,{s:function(){return g},u:function(){return y}});var r=i(602777),n=i(481631),a=i(363397),o=i(361708),s=i(340294),l=i(408059),u=i(13242),d=i(556784),c=i(802195),_=i(396402),m=i(398262),h=i(438176),p=i(342040);let g=e=>{switch(e){case r.rx.CanvasRatio16To9:return 16/9;case r.rx.CanvasRatio9To16:return 9/16;case r.rx.CanvasRatio4To3:return 4/3;case r.rx.CanvasRatio3To4:return 3/4;case r.rx.CanvasRatio1To1:return 1;case r.rx.CanvasRatio2To1:return 2;case r.rx.CanvasRatio2_35To1:return 2.35;case r.rx.CanvasRatio1_85To1:return 1.85;case r.rx.CanvasRatio1_125To2_436:return 1.125/2.436;default:return null}};function f(e){return e/2+.5}async function T(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];try{var n,a;let o=r[r.length-1],s=await (null===(a=e.editor)||void 0===a?void 0:null===(n=a.infoSticker)||void 0===n?void 0:n.getStickerBoundingBox(t,i,o));if(!s)return{top:-1,bottom:-1,left:-1,right:-1};return{top:isNaN(s.top)||!isFinite(s.top)?-1:s.top,bottom:isNaN(s.bottom)||!isFinite(s.bottom)?-1:s.bottom,left:isNaN(s.left)||!isFinite(s.left)?-1:s.left,right:isNaN(s.right)||!isFinite(s.right)?-1:s.right}}catch(e){return{top:-1,bottom:-1,left:-1,right:-1}}}async function y(e){var t,i,v,E,I;let{canvasSize:A,renderSdk:S,segIds:k,getSegmentById:M,parentSegIds:w=[],parentRect:C,draftView:O,selectedSegmentsIds:D}=e;if(!(null==S?void 0:S.preview))return[];let x=null!==(t=e.current)&&void 0!==t?t:S.preview.progress,b=[];if(0===k.length)return console.error("segIds is empty"),b;let R=A[0],N=A[1];for(let e of k){let t=M(e);if(!(null==t?void 0:t.clip))continue;let{transform:V,scale:F,rotation:P}=t.clip;if((0,n.he)(t)){let i=function(e,t,i,n,o,d,c){var m;let f=i[0],T=i[1],y=null===(m=n.editor)||void 0===m?void 0:m.getFilterByIdRecursively([...d,t.id],`${t.id}_${_.UO.Transform}`);if(!y)return null;let{material:v,smartCrop:E}=t,{crop:I}=v,A=v.width,S=v.height,k=A,M=S;if(E&&0!==M){let e=E.cropRatio===r.rx.CanvasRatioCustom?function(e,t){let i=t.endsWith("totalCacheV2")?t:`${t}/totalCacheV2`,r=`/__opfs_system_root/${i}`;h.R&&(r=p.k.getInstance().pathRecords.get(i));try{let{custom_ratio:t}=JSON.parse(e.fs.readFileSync(r,{encoding:"utf8"}));return t}catch{}return null}(n,E.cachePath):g(E.cropRatio);null!==e&&0!==e&&(k/M>e?k=M*e:M=k/e)}else I&&(k=(0,s.Et)(I.upperLeftX*A,-I.upperLeftY*S,I.upperRightX*A,-I.upperRightY*S),M=(0,s.Et)(I.upperLeftX*A,-I.upperLeftY*S,I.lowerLeftX*A,-I.lowerLeftY*S));let w=(0,a.Cy)(f,T,k,M),C=w[0],O=w[1],D={x:y.scale_x/v.cropScale,y:y.scale_y/v.cropScale},x=u.U.getKeyframeValueFromTimeline(e,t,r.Eu.KFTypeScaleX,o,D.x),b=u.U.getKeyframeValueFromTimeline(e,t,r.Eu.KFTypeScaleY,o,D.y),R=u.U.getKeyframeValueFromTimeline(e,t,r.Eu.KFTypePositionX,o,y.position_x)/2,N=-.5*u.U.getKeyframeValueFromTimeline(e,t,r.Eu.KFTypePositionY,o,y.position_y),V=u.U.getKeyframeValueFromTimeline(e,t,r.Eu.KFTypeRotation,o,y.rotation_z),F={};return F.id=t.id,F.originalWidth=C,F.originalHeight=O,F.width=F.originalWidth*x*1,F.height=F.originalHeight*b*1,F.originalX=f/2+-(1*(F.originalWidth*x/2)),F.originalY=T/2-F.originalHeight*b/2*1,F.x=F.originalX+R*f,F.y=F.originalY+N*T,F.rotate=V,F.subRects=[],F=(0,l.Pv)(F,c)}(O,t,A,S,x,w,C);if(!i)continue;if(o.b.isCombination(t)){let{materialDraft:r}=t,{draft:n}=r;i.subRects=await y({draftView:O,selectedSegmentsIds:D,getSegmentById:e=>M(e,n),canvasSize:[i.width,i.height],segIds:k,renderSdk:S,parentSegIds:[...w,e],parentRect:i})}b.push(i);continue}if(((0,n.Ft)(t)||(0,n.P2)(t))&&t.clip){let a=(null===(i=t.videoTracking)||void 0===i?void 0:i.enableVideoTracking)&&t.videoTracking.trackers.length>0,{scaleX:o,scaleY:s,transformX:d,transformY:c,rotate:_}=function(e){let{seg:t,current:i,draftView:n}=e,{transform:a,scale:o,rotation:s}=t.clip,l={x:o.x,y:o.y},d=u.U.getKeyframeValueFromTimeline(n,t,r.Eu.KFTypeScaleX,i,l.x),c=u.U.getKeyframeValueFromTimeline(n,t,r.Eu.KFTypeScaleY,i,l.y),_=u.U.getKeyframeValueFromTimeline(n,t,r.Eu.KFTypePositionX,i,a.x)/2,m=u.U.getKeyframeValueFromTimeline(n,t,r.Eu.KFTypePositionY,i,a.y)/2;return{scaleX:d,scaleY:c,transformX:_,transformY:m,rotate:u.U.getKeyframeValueFromTimeline(n,t,r.Eu.KFTypeRotation,i,s)}}({seg:t,current:x,draftView:O}),h=async()=>{let i=a||(0,n.Ft)(t)&&D.includes(t.id)?null:(0,m.GB)(t,{canvasSize:A,current:x});if(!i){let r=await T(S,e,!1,w);return 0!==(i={left:r.left/o,top:r.top/s,right:r.right/o,bottom:r.bottom/s}).left&&0!==i.top&&(0,m.Ik)(t,i,{canvasSize:A,current:x}),r}return{left:i.left*o,top:i.top*s,right:i.right*o,bottom:i.bottom*s}},p=await h(),g=f(p.left),y=f(p.right),I=f(p.top),k=f(p.bottom),M={};if(M.id=e,M.width=R*(y-g),M.height=N*(k-I),a){let e=await (null===(E=S.editor)||void 0===E?void 0:null===(v=E.infoSticker)||void 0===v?void 0:v.getStickerPosition(t.id,null==C?void 0:C.id));if(e){let t=e.x/2+.5,i=1-(e.y/2+.5);M.originalX=(t-(y-g)/2)*R,M.originalY=(i-(k-I)/2)*N}else M.originalX=R*g,M.originalY=N*I}else M.originalX=R*g,M.originalY=N*I;if((0,n.Ft)(t)&&(0===M.height||0===M.width)){let e=t.material,i=R/130*e.fontSize*s,n=Math.max(i/2,20);e.typesetting===r.v$.Vertical?[i,n]=[n,i]:e.fixedWidth>0&&(n=e.fixedWidth*R/720*o),M.height=i,M.originalY-=i/2,M.width=n,e.fixedWidth<=0&&(M.originalX-=n/2)}M.originalWidth=M.width/o,M.originalHeight=M.height/s,a?(M.x=M.originalX,M.y=M.originalY):(M.x=M.originalX+d*R,M.y=M.originalY-c*N),M.rotate=_,M.subRects=[],M=(0,l.Pv)(M,C),b.push(M);continue}if((0,n.Q2)(t)){let i;let n=c.y.isNewTextTemplateSegment(t.material),a=await c.y.getTextTemplateParamsWithCache(e,n,w[0]);if(a)try{i=JSON.parse(a)}catch(e){console.error(`parse text template params fail, text: ${a}`);continue}else{console.error(`parse text template params is null, text: ${a}`);continue}let o=i.bounding_box,s=o[0]/2+.5,_=.5-o[1]/2,m=o[2]/2+.5,h=.5-o[3]/2,p={x:i.scale[0],y:i.scale[1]},g=u.U.getKeyframeValueFromTimeline(O,t,r.Eu.KFTypeScaleX,x,p.x),f=u.U.getKeyframeValueFromTimeline(O,t,r.Eu.KFTypeScaleY,x,p.y),T=0,y=0;if(n){let e=d.I.getCur().getCanvasSize();T=u.U.getKeyframeValueFromTimeline(O,t,r.Eu.KFTypePositionX,x,i.position[0]/e[0]*2)/2,y=u.U.getKeyframeValueFromTimeline(O,t,r.Eu.KFTypePositionY,x,i.position[1]/e[1]*2)/2}else T=u.U.getKeyframeValueFromTimeline(O,t,r.Eu.KFTypePositionX,x,V.x)/2,y=u.U.getKeyframeValueFromTimeline(O,t,r.Eu.KFTypePositionY,x,V.y)/2;let v=u.U.getKeyframeValueFromTimeline(O,t,r.Eu.KFTypeRotation,x,-i.rotation),E={id:e,width:R*(m-s),height:N*(_-h),originalWidth:R*(m-s)/g,originalHeight:N*(_-h)/f,x:R*s,y:N*h,originalX:R*s-T*R,originalY:N*h+y*N,rotate:v,subRects:[]},A=[];for(let e of null!==(I=null==i?void 0:i.text_list)&&void 0!==I?I:[]){let t=e.bounding_box,i=t[0]/2+.5,r=.5-t[1]/2,a=t[2]/2+.5,o=.5-t[3]/2,s={id:"",width:R*(a-i),height:N*(r-o),originalWidth:R*(a-i)/g,originalHeight:N*(r-o)/f,x:R*i,y:N*o,originalX:R*i-T*R,originalY:N*o+y*N,rotate:n?v-e.rotation:v,subRects:[]};A.push((0,l.Pv)(s,C))}E.subRects=A,E=(0,l.Pv)(E,C),b.push(E)}}return b}},729951:function(e,t,i){i.d(t,{$F:function(){return g},$v:function(){return m},Wv:function(){return _},cW:function(){return c},jT:function(){return h},yR:function(){return p}});var r=i(90844),n=i(192131),a=i(396402),o=i(433188),s=i(521641),l=i(266302),u=i(481631),d=i(342040);function c(e){var t,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,u=JSON.stringify((0,n.F)(e.material,e.shape,e.bloom,!1,o,l)),d=e.material.richTextCommand,c=(null==d?void 0:d.iOpCode)>=0&&!s?{iOpCode:d.iOpCode,iParam1:d.iParam1,iParam2:d.iParam2,iParam3:d.iParam3,iParam4:d.iParam4,pParam5:d.iParam5}:new r.kT;return -1===c.iOpCode&&(c.iOpCode=r.wI.CT_EDIT_TEXT_PARAM),c.iOpCode===r.wI.CT_EDIT_TEXT_PARAM&&""===c.pParam5&&(c.pParam5=u),c.iOpCode===r.wI.CT_EDIT_TEXT_PARAM&&(c.iParam1=1),{type:a.UO.TextSticker,is_richtext:!0,rich_text:u,filterLayer:-1n,editRT_param:c,visible:e.visible,textLocale:null!==(t=o.enableRtlTextRender)&&void 0!==t&&t,directionLevel:null!==(i=o.directionLevel)&&void 0!==i?i:0}}function _(e,t){return{id:t,type:a.UO.AudioVolume,sequence_in:0n,sequence_out:-1n,volume:e}}function m(e,t){return{id:t,priv:{},type:a.UO.AudioFade,visible:!0,fade_in:{"time.us":e.fadeInDuration},fade_out:{"time.us":e.fadeOutDuration},curve_type:a.LW.Default}}function h(e,t){return{id:t,type:a.UO.AudioNoiseFilter,denoiseRate:e.denoiseRate,modelPath:d.k.getInstance().pathRecords.get(e.path),noiseMode:e.denoiseMode,openNoiseFilter:e.isDenoise}}function p(e){var t,i;if(!(0,u.P2)(e)&&!(0,u.Ft)(e)&&!(0,u.P7)(e)||void 0===e.animations||0===e.animations.animations.length)return null;let r={};if(e.animations.animations.forEach(e=>{r[e.type]=e}),!r.in&&!r.out&&!r.loop&&!r.caption)return null;let n={type:a.UO.StickerAnimation,visible:!0};if((0,u.Ft)(e)&&(null===(t=r.caption)||void 0===t?void 0:t.path)){let t=(0,l.q)(e.material.words,e.material.text,BigInt(new s.Z(r.caption.duration.toString()).div(1e3).toString().split(".")[0]));(null===(i=e.material.subtitleKeywords)||void 0===i?void 0:i.range.length)&&(t=(0,l.s)(t,e.material.subtitleKeywords)),n={...n,anim_in:"",anim_out:"",anim_loop_path:d.k.getInstance().pathRecords.get(r.caption.path),anim_loop:!!r.caption.path,anim_loop_duration:{"time.se":new s.Z(r.caption.duration.toString()).div(1e6).toNumber(),"time.us":r.caption.duration},anim_property_key:"caption_duration_info",anim_property_value:JSON.stringify({words:t})}}else{if(r.in){n.anim_in=d.k.getInstance().pathRecords.get(r.in.path),n.anim_in_duration={"time.se":new s.Z(r.in.duration.toString()).div(1e6).toNumber(),"time.us":r.in.duration};let e=(0,o.sm)(r.in);e&&(n.anim_in_property_key="common_parameters_adjustment",n.anim_in_property_value=e)}if(r.out){n.anim_out=d.k.getInstance().pathRecords.get(r.out.path),n.anim_out_duration={"time.se":new s.Z(r.out.duration.toString()).div(1e6).toNumber(),"time.us":r.out.duration};let e=(0,o.sm)(r.out);e&&(n.anim_out_property_key="common_parameters_adjustment",n.anim_out_property_value=e)}if(r.loop){n.anim_loop=!!r.loop.path,n.anim_loop_path=d.k.getInstance().pathRecords.get(r.loop.path),n.anim_loop_duration={"time.se":new s.Z(r.loop.duration.toString()).div(1e6).toNumber(),"time.us":r.loop.duration};let e=(0,o.sm)(r.loop);e&&(n.anim_loop_property_key="common_parameters_adjustment",n.anim_loop_property_value=e)}}return n}let g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{id:"",type:a.UO.Transform,visible:!0,filterLayer:-1,alpha:1,anchor_x:0,anchor_y:0,blend_mode:"",border_color:"",border_width:0,flip_x:e.flip.horizontal,flip_y:e.flip.vertical,is_auto_fit_scale:!0,position_x:e.transform.x,position_y:e.transform.y,rotation:e.rotation,scale_x:e.scale.x*t,scale_y:e.scale.y*t}}},396402:function(e,t,i){i.d(t,{AM:function(){return m},LW:function(){return g},Np:function(){return T},Q:function(){return f},UO:function(){return h},r0:function(){return c},u2:function(){return p},vG:function(){return _}});var r,n,a,o,s,l,u,d,c=((r={})[r.NONE=0]="NONE",r[r.STOP_MOTION=1]="STOP_MOTION",r);var _=((n={}).AudioOnly="AUDIO_ONLY",n.AudioVideo="AUDIO_VIDEO",n.ImageOnly="IMAGE_ONLY",n.RawRgba="RAW_RGBA",n.VideoOnly="VIDEO_ONLY",n);var m=((a={}).Audio="AUDIO",a.AudioVideo="AUDIO_VIDEO",a.Camera="CAMERA",a.CameraMic="CAMERA_MIC",a.ClipRef="CLIP_REF",a.Color="COLOR",a.Effect="EFFECT",a.Image="IMAGE",a.Mic="MIC",a.Sequence="SEQUENCE",a.StreamVideo="STREAM_VIDEO",a.Video="VIDEO",a);var h=((o={}).AiCutOutClipFilter="AI_CUT_OUT_CLIP_FILTER",o.AmazingEffect="AMAZING_EFFECT",o.AudioDsp="AUDIO_DSP",o.AudioEffect="AUDIO_EFFECT",o.AudioFade="AUDIO_FADE",o.AudioLoudnessBalanceFilter="AUDIO_LOUDNESS_BALANCE_FILTER",o.AudioMatrix="AUDIO_MATRIX",o.AudioNoiseFilter="AUDIO_NOISE_FILTER",o.AudioPreprocessFilter="AUDIO_PREPROCESS_FILTER",o.AudioSamiAECFilter="AUDIO_SAMI_AEC_FILTER",o.AudioSamiFilter="AUDIO_SAMI_FILTER",o.AudioSamiProcessorFilter="SAMI_PROCESSOR_FILTER",o.AudioSpeed="AUDIO_SPEED",o.AudioVolume="AUDIO_VOLUME",o.BefColor="BEF_COLOR",o.BefEffect="BEF_EFFECT",o.BrickFilter="BRICK_FILTER",o.BrushSticker="BRUSH_STICKER",o.ColorHslFilter="COLOR_HSL_FILTER",o.Composer="COMPOSER",o.CustomPostFilter="CUSTOM_POST_FILTER",o.CustomPreFilter="CUSTOM_PRE_FILTER",o.CustomSwingFilter="CUSTOM_SWING_FILTER",o.EmojiSticker="EMOJI_STICKER",o.GreenEditing="GREEN_EDITING",o.HdrEnhancement="HDR_ENHANCEMENT",o.ImageTransformFilter="IMAGE_TRANSFORM_FILTER",o.InfoSticker="INFO_STICKER",o.LayerSticker="LAYER_STICKER",o.LeaderSecurityDetect="LEADER_SECURITY_DETECT",o.LensDeflicker="LENS_DEFLICKER",o.LensHdr="LENS_HDR",o.LensOneKeyHdr="LENS_ONE_KEY_HDR",o.LensVFI="LENS_VFI",o.LensVideoDenoise="LENS_VIDEO_DENOISE",o.LimiterFilter="LIMITER_FILTER",o.MagnifierFilter="MAGNIFIER_FILTER",o.Makeup="MAKEUP",o.MotionBlur="MOTION_BLUR",o.MusicSrtSticker="MUSIC_SRT_STICKER",o.PluginFilter="PLUGIN_FILTER",o.PreviewTransformFilter="PREVIEW_TRANSFORM_FILTER",o.ReverseAudioVideo="REVERSE_AUDIO_VIDEO",o.SAMIProcessorFilter="SAMI_PROCESSOR_FILTER",o.ScriptSticker="SCRIPT_STICKER",o.StickerAnimation="STICKER_ANIMATION",o.StickerTemplate="STICKER_TEMPLATE",o.Stream="STREAM",o.TextSticker="TEXT_STICKER",o.Transform="TRANSFORM",o.Unknown="UNKNOWN",o.VideoAnimation="VIDEO_ANIMATION",o.VideoBlur="VIDEO_BLUR",o.VideoCanvas="VIDEO_CANVAS",o.VideoCanvasTransformAnimationFilter="VIDEO_CANVAS_TRANSFORM_ANIMATION_FILTER",o.VideoCrop="VIDEO_CROP",o.VideoStableFilter="VIDEO_STABLE_FILTER",o.VideoStableFilterEx="VIDEO_STABLE_FILTER_EX",o.VideoFigure="VIDEO_FIGURE",o.VideoBackground="VIDEO_BACKGROUND",o.VideoTransition="VIDEO_TRANSITION",o);var p=((s={}).AudioTrack="AUDIO_TRACK",s.EffectTrack="EFFECT_TRACK",s.VideoTrack="VIDEO_TRACK",s);var g=((l={})[l.Default=0]="Default",l[l.Sine=1]="Sine",l[l.Linear=2]="Linear",l[l.Log=3]="Log",l[l.Exp=4]="Exp",l);var f=((u={}).AudioKeyframe="AUDIO_KEYFRAME",u.ChromaKeyframe="CHROMA_KEYFRAME",u.FilterKeyframe="FILTER_KEYFRAME",u.MaskKeyframe="MASK_KEYFRAME",u.StickerKeyframe="STICKER_KEYFRAME",u.TextKeyframe="TEXT_KEYFRAME",u.VideoKeyframe="VIDEO_KEYFRAME",u.SAMIProcessorKeyframe="SAMI_PROCESSOR_KEYFRAME",u.PluginKeyFrame="PLUGIN_KEYFRAME",u);var T=((d={})[d.NONE=0]="NONE",d[d.BEAUTY=1]="BEAUTY",d[d.MODEL=2]="MODEL",d[d.MAKEUPS=3]="MAKEUPS",d[d.BODY=4]="BODY",d)},542240:function(e,t,i){i.d(t,{CT:function(){return g},D5:function(){return h},JE:function(){return _},Vz:function(){return m},Zx:function(){return d},je:function(){return p},mA:function(){return c}});var r,n,a,o,s,l,u,d=((r={})[r.MATTING_BLEND_MODE_NORMAL=0]="MATTING_BLEND_MODE_NORMAL",r[r.MATTING_BLEND_MODE_PREVIEW=1]="MATTING_BLEND_MODE_PREVIEW",r);var c=((n={})[n.MATTING_TYPE_NONE=0]="MATTING_TYPE_NONE",n[n.MATTING_TYPE_PORTRAIT=1]="MATTING_TYPE_PORTRAIT",n[n.MATTING_TYPE_HEAD=2]="MATTING_TYPE_HEAD",n[n.MATTING_TYPE_INTERACTIVE=3]="MATTING_TYPE_INTERACTIVE",n[n.MATTING_TYPE_FOLLOW=4]="MATTING_TYPE_FOLLOW",n[n.MATTING_TYPE_COMBINE=5]="MATTING_TYPE_COMBINE",n);var _=((a={})[a.NONE=0]="NONE",a[a.MULTI_IMAGE_AI=1]="MULTI_IMAGE_AI",a);var m=((o={})[o.PREVIEW_COMPILE=0]="PREVIEW_COMPILE",o[o.PREVIEW_ONLY=1]="PREVIEW_ONLY",o[o.COMPILE_ONLY=2]="COMPILE_ONLY",o[o.SNAPSHOT=3]="SNAPSHOT",o);var h=((s={})[s.VE_STATE_ENGINE_NOT_CREATED=-2e4]="VE_STATE_ENGINE_NOT_CREATED",s[s.VE_STATE_ERROR=-1]="VE_STATE_ERROR",s[s.VE_STATE_IDLE=1]="VE_STATE_IDLE",s[s.VE_STATE_INITIALIZED=2]="VE_STATE_INITIALIZED",s[s.VE_STATE_PREPARED=4]="VE_STATE_PREPARED",s[s.VE_STATE_STARTED=8]="VE_STATE_STARTED",s[s.VE_STATE_PAUSED=16]="VE_STATE_PAUSED",s[s.VE_STATE_SEEKING=32]="VE_STATE_SEEKING",s[s.VE_STATE_STOPPED=64]="VE_STATE_STOPPED",s[s.VE_STATE_COMPLETED=128]="VE_STATE_COMPLETED",s);var p=((l={})[l.UNKNOWN=0]="UNKNOWN",l[l.PLAYING=1]="PLAYING",l[l.PAUSED=2]="PAUSED",l[l.STOPPED=3]="STOPPED",l[l.PLAY_EOF=4]="PLAY_EOF",l[l.SEEKING=5]="SEEKING",l[l.SEEK_DONE=6]="SEEK_DONE",l[l.SEEK_WAIT_PLAY=7]="SEEK_WAIT_PLAY",l[l.PREPARED=8]="PREPARED",l[l.IDLE=9]="IDLE",l[l.ERR=10]="ERR",l);var g=((u={})[u.VE_SEEK_FLAG_OnGoing=0]="VE_SEEK_FLAG_OnGoing",u[u.VE_SEEK_FLAG_LastSeek=1]="VE_SEEK_FLAG_LastSeek",u[u.VE_SEEK_FLAG_ToIframe=2]="VE_SEEK_FLAG_ToIframe",u[u.VE_SEEK_FLAG_LAST_UpdateIn=5]="VE_SEEK_FLAG_LAST_UpdateIn",u[u.VE_SEEK_FLAG_LAST_UpdateOut=9]="VE_SEEK_FLAG_LAST_UpdateOut",u[u.VE_SEEK_FLAG_LAST_UpdateInOut=17]="VE_SEEK_FLAG_LAST_UpdateInOut",u[u.VE_SEEK_FLAG_Forward=128]="VE_SEEK_FLAG_Forward",u[u.VE_SEEK_FLAG_LAST_Forward=129]="VE_SEEK_FLAG_LAST_Forward",u[u.VE_SEEK_FLAG_LAST_Clear=257]="VE_SEEK_FLAG_LAST_Clear",u[u.VE_SEEK_FLAG_Accurate=512]="VE_SEEK_FLAG_Accurate",u[u.VE_SEEK_FLAG_Refresh=1024]="VE_SEEK_FLAG_Refresh",u[u.VE_SEEK_FLAG_LAST_Accurate=641]="VE_SEEK_FLAG_LAST_Accurate",u[u.VE_SEEK_FLAG_LAST_Accurate_Clear=897]="VE_SEEK_FLAG_LAST_Accurate_Clear",u[u.VE_SEEK_FLAG_LAST_Without_EffectAndSticker=24577]="VE_SEEK_FLAG_LAST_Without_EffectAndSticker",u[u.VE_SEEK_FLAG_REFRSH_SYNC_MODE=65536]="VE_SEEK_FLAG_REFRSH_SYNC_MODE",u[u.VE_SEEK_FLAG_LAST_SEEK_CAN_DROP=0x1000000]="VE_SEEK_FLAG_LAST_SEEK_CAN_DROP",u[u.VE_SEEK_REFRESH_MODE_FORCE=0x20000000]="VE_SEEK_REFRESH_MODE_FORCE",u[u.VE_SEEK_FLAG_PRELOAD_EFFECT_MODE=0x40000000]="VE_SEEK_FLAG_PRELOAD_EFFECT_MODE",u[u.VE_SEEK_FLAG_Video_Deoise=16]="VE_SEEK_FLAG_Video_Deoise",u[u.VE_SEEK_FLAG_AFTER_PAUSE_RIGHTNOW=32]="VE_SEEK_FLAG_AFTER_PAUSE_RIGHTNOW",u)},307497:function(e,t,i){i.d(t,{G:function(){return n}});var r=i(337609);class n{getReaderInstance(e){return!this._readerInstanceMap[e]&&(this._readerInstanceMap[e]=this._utilWrapper.createSubtitleReader(e)),this._readerInstanceMap[e]}getWriterInstance(e){return!this._writerInstanceMap[e]&&(this._writerInstanceMap[e]=this._utilWrapper.createSubtitleWriter(e)),this._writerInstanceMap[e]}parseSubtitleInfo(e,t){return(0,r.kB)(this.getReaderInstance(t).parseSubtitleInfo(e,t),"","parseSubtitleInfo")}writeSubtitle(e,t,i){return(0,r.kB)(this.getWriterInstance(i).writeSubtitle(e,t,i),"","writeSubtitle")}constructor({utilWrapper:e}){this._readerInstanceMap={},this._writerInstanceMap={},this._utilWrapper=e}}},695780:function(e,t,i){i.d(t,{Q:function(){return c}});var r=i(862213),n=i(790820),a=i(819120),o=i(602777),s=i(211561),l=i(481631),u=i(469042),d=i(340294);class c{static getMutableVideosActionOptions(e,t){let i=t.getSegmentsByTrackTypes([o.pN.TrackTypeVideo]),r=this.getMutableMaterials(t),n=new Map;for(let e of i)if((0,l.he)(e)){let t=e.material.id;if(t){if(!r.has(t))continue;n.set(t,e)}}let{mutableConfig:a}=t.getDraftProperty(),s=o._T.AlignModeCanvas;a&&(s=a.alignMode);let u=Array.from(e,()=>null);for(let t=0;t<e.length;t++){let i=e[t];if(!n.has(i.id))continue;let r=n.get(i.id);if(r){let e=this._getMutableVideoOptions(r,i,s,(null==a?void 0:a.mutableMaterials)||[]);e&&(u[t]=e)}}return u}static getMutableMaterials(e){var t;let i=new Map,{mutableConfig:r}=e.getDraftProperty();for(let e of null!==(t=null==r?void 0:r.mutableMaterials)&&void 0!==t?t:[])i.set(e.id,e);return i}static _getMutableVideoOptions(e,t,i,a){var s,l,u;let _=t.path,m=t.originalPath,{material:h}=e,p=(0,r.lF)();c._adjustVideoParam(p,t.width,t.height,t.mediaType,t.duration);let{initialSpeed:g}=t;!g&&(g=1);let f=e.targetTimerange.duration,T=g;if(p.type===o.cV.MetaTypeVideo){if(p.duration<(0,d.k3)((0,d.k3)(.5,g),f))return;let e=BigInt(Math.round((0,d.k3)((0,d.k3)(1,g),f)));p.sourceDuration=p.duration>e?e:p.duration,p.sourceDuration===p.duration&&(T=(0,d.NN)(p.duration,f))}else p.duration=f,p.sourceDuration=f;let y=p.size.width,v=p.size.height;if(0===y||0===v)return;let E={segId:e.id,cropRatio:o.j8.CropRatioFree};E.segId=e.id,t.crop.length>=8&&([E.upperLeftX,E.upperLeftY,E.upperRightX,E.upperRightY,E.lowerLeftX,E.lowerLeftY,E.lowerRightX,E.lowerRightY]=t.crop);let I=null===(s=e.material)||void 0===s?void 0:s.path,A=null===(l=a.find(e=>{let{id:t}=e;return t===h.id}))||void 0===l?void 0:l.coverPath;i===o._T.AlignModeVideo&&_===A&&Math.abs(t.width/t.height-h.width/h.height)>=.01&&this.fixCropParams(E,e,t.width,t.height,t.rotation),_===m&&(!I||I!==_)&&this._adjustCropParam(E,e,i,t.width,t.height,t.rotation),p.hasAudio="AudioVideo"===t.mediaType,p.sourceStartTime=t.sourceStart,p.path=_,p.categoryId=h.categoryId,p.categoryName=h.categoryName,p.sourcePlatform=t.sourcePlatform,p.materialId=t.materialId,p.originMaterialId=null!==(u=t.originMaterialId)&&void 0!==u?u:"",p.materialName=t.materialName;let{clip:S}=e;S&&(p.clip.flipHorizontal=S.flip.horizontal,p.clip.flipVertical=S.flip.vertical,p.clip.scaleX=S.scale.x,p.clip.scaleY=S.scale.y,p.clip.transformX=S.transform.x,p.clip.transformY=S.transform.y,p.clip.rotation=S.rotation);let k={segmentId:e.id,video:p},M=(0,n.f)({segmentId:e.id,mode:e.speed.mode,normalSpeed:T}),w={segmentIds:[e.id],volume:t.volume};return{templateReplaceVideoActionOptions:k,cropVideoActionOptions:E,templateSetVideoSpeedActionOptions:M,templateSetVideoVolumeOptions:w,segmentVisibleActionOptions:void 0!==t.visible?{segmentId:e.id,visible:t.visible}:void 0}}static _adjustVideoParam(e,t,i,r,n){if(!a.z.isVideoType(r)&&!a.z.isImageType(r)){console.error(`invalid type [${r}]`);return}a.z.isVideoType(r)?e.type=o.cV.MetaTypeVideo:a.z.isGifType(r)?e.type=o.cV.MetaTypeGif:e.type=o.cV.MetaTypePhoto,e.size.width=t,e.size.height=i,e.hasAudio="AudioVideo"===r,e.duration=n}static fixCropParams(e,t,i,r,n){var a;if(!(i<=0)&&!(r<=0))this.updateCropParams(e,t,i,r,n,e.cropRatio!==o.j8.CropRatioFree&&null!==(a=(0,u.s)(e.cropRatio))&&void 0!==a?a:void 0)}static _adjustCropParam(e,t,i,r,n,a){if(e.enableCropScale=!1,i===o._T.AlignModeCanvas){this.setFullCropParams(e);return}if(t.material.width===r&&t.material.height===n){this.tinyUpdateCropParams(e);return}i===o._T.AlignModeVideo&&r>0&&n>0&&this.updateCropParams(e,t,r,n,a)}static updateCropParams(e,t,i,r,n,a){(90===n||270===n)&&([i,r]=[r,i]);let s=function(e,t,i,r,n,a){return Math.sqrt(Math.pow(Math.abs(e-i)*n,2)+Math.pow(Math.abs(t-r)*a,2))},l=i/r,u={segId:"",cropRatio:o.j8.CropRatioFree},{crop:d}=t.material;[u.upperLeftX,u.upperLeftY,u.upperRightX,u.upperRightY,u.lowerLeftX,u.lowerLeftY,u.lowerRightX,u.lowerRightY]=[d.upperLeftX,d.upperLeftY,d.upperRightX,d.upperRightY,d.lowerLeftX,d.lowerLeftY,d.lowerRightX,d.lowerRightY];let c=null!=a?a:function(e,t,i){let r=s(e.upperLeftX,e.upperLeftY,e.upperRightX,e.upperRightY,t,i);return r/s(e.upperLeftX,e.upperLeftY,e.lowerLeftX,e.lowerLeftY,t,i)}(u,t.material.width,t.material.height);if(.01>Math.abs(l-c))e.upperLeftY=0,e.upperRightY=0,e.lowerLeftY=1,e.lowerRightY=1,e.upperLeftX=0,e.lowerLeftX=0,e.upperRightX=1,e.lowerRightX=1;else if(l>c){e.upperLeftY=0,e.upperRightY=0,e.lowerLeftY=1,e.lowerRightY=1;let t=(i-r*c)/2,n=t/i;e.upperLeftX=n,e.lowerLeftX=n;let a=(i-t)/i;e.upperRightX=a,e.lowerRightX=a}else{e.upperLeftX=0,e.lowerLeftX=0,e.upperRightX=1,e.lowerRightX=1;let t=(r-i/c)/2,n=t/r;e.upperLeftY=n,e.upperRightY=n;let a=(r-t)/r;e.lowerLeftY=a,e.lowerRightY=a}}static tinyUpdateCropParams(e){e.upperLeftX&&e.upperRightX&&(e.upperLeftX+=1e-5,e.upperRightX+=1e-5)}static setFullCropParams(e){let t=new s.oIP;e.upperLeftX=t.upperLeftX,e.upperLeftY=t.upperLeftY,e.upperRightX=t.upperRightX,e.upperRightY=t.upperRightY,e.lowerLeftX=t.lowerLeftX,e.lowerLeftY=t.lowerLeftY,e.lowerRightX=t.lowerRightX,e.lowerRightY=t.lowerRightY}}},383933:function(e,t,i){i.d(t,{L:function(){return r}});class r{getAsyncTask(e){return this._videoDocument.attachmentAsyncTask.asyncTaskMap.get(e)}getAsyncTaskMap(){return this._videoDocument.attachmentAsyncTask.asyncTaskMap}getVideoAlgorithm(e){return this._videoDocument.attachmentVideoAlgorithms.algorithms.get(e)}getVideoAlgorithmMap(){return this._videoDocument.attachmentVideoAlgorithms.algorithms}getAiWriterInfo(e){return this._videoDocument.attachmentAiWriter.aiWriterInfos.get(e)}getAICreator(){return this._videoDocument.aiCreator}isAICreatorEmptyShots(){var e;let t=null===(e=this.getAICreator())||void 0===e?void 0:e.content;if(t){let e=JSON.parse(t);return 1===e.shotDataList.length&&""===e.shotDataList[0].content&&0===this._videoDocument.getAllSegments().length}return!1}getAiWriterInfoMap(){return this._videoDocument.attachmentAiWriter.aiWriterInfos}getAiStoryAllAlternativeMaterials(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._videoDocument.attachmentAiStory.query.getAiStoryAllAlternativeMaterials(...t)}getAiStoryAlternativeMaterialBySegmentId(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._videoDocument.attachmentAiStory.query.getAiStoryAlternativeMaterialBySegmentId(...t)}getAiStoryAlternativeMaterialBySegmentIdAndAlternativeId(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._videoDocument.attachmentAiStory.query.getAiStoryAlternativeMaterialBySegmentIdAndAlternativeId(...t)}getAiStoryAlternativeMaterialByAlternativeId(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._videoDocument.attachmentAiStory.query.getAiStoryAlternativeMaterialByAlternativeId(...t)}getAiStoryAlternativeMaterialAtPositionByAlternativeId(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._videoDocument.attachmentAiStory.query.getAiStoryAlternativeMaterialAtPositionByAlternativeId(...t)}getAiStoryGlobalConfig(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._videoDocument.attachmentAiStory.query.getAiStoryGlobalConfig(...t)}getAiStoryId(){return this._videoDocument.attachmentAiStory.query.getAiStoryId()}getAiStoryMeta(){return this._videoDocument.attachmentAiStory.query.getAiStoryMeta()}getAiStoryAlternativeMaterialStatusBySegmentId(e){return this._videoDocument.attachmentAiStory.query.getAiStoryAlternativeMaterialStatusBySegmentId(e,this._videoDocument)}getAiStoryCurrentAlternativeMaterialBySegmentId(e){return this._videoDocument.attachmentAiStory.query.getAiStoryCurrentAlternativeMaterialBySegmentId(e,this._videoDocument)}constructor(e){this._videoDocument=e}}},325784:function(e,t,i){i.d(t,{GG:function(){return d},US:function(){return l},vi:function(){return m}});var r=i(392742),n=i(587892),a=i(340294),o=i(862213);let s=new n.Q,l={event:s.event,execute(e){s.fire(e)}};function u(e,t){var i,n;if(![r.x.AttachmentInsertMutation,r.x.AttachmentUpdateMutation].includes(e.type))return;let{identifier:s,substitute:l}=t;if(e.type===r.x.AttachmentInsertMutation){let{options:t}=e;t.attachmentKey===o.d3.AiStoryAlternativeMaterial&&(null===(i=t.value.material.alternatives)||void 0===i||i.forEach(e=>{(0,a.nr)(e,s)&&(0,a.pc)(e,l,!0)}))}else if(e.type===r.x.AttachmentUpdateMutation){let{options:t,executor:i}=e;t.attachmentKey===o.d3.AiStoryAlternativeMaterial&&(null===(n=t.delta.alternatives)||void 0===n||n.forEach((e,t)=>{if((0,a.nr)(e,s)){(0,a.pc)(e,l);i.delta.alternatives&&(0,a.pc)(i.delta.alternatives[t],l)}}))}}function d(e,t){e.undoStack.forEach(e=>{e.undoCommand.mutations.forEach(e=>{u(e,t)}),e.redoCommand.mutations.forEach(e=>{u(e,t)})}),e.redoStack.forEach(e=>{e.undoCommand.mutations.forEach(e=>{u(e,t)}),e.redoCommand.mutations.forEach(e=>{u(e,t)})})}function c(e){return`${e.aigcHistoryId}_${e.aigcItemId}_${e.taskStatus}`}function _(e,t,i){var n,a;if(!![r.x.AttachmentInsertMutation,r.x.AttachmentUpdateMutation].includes(e.type)){if(e.type===r.x.AttachmentInsertMutation){let{options:r}=e;r.attachmentKey===o.d3.AiStoryAlternativeMaterial&&(null===(n=r.value.material.alternatives)||void 0===n||n.forEach(e=>{e.submitId===t&&e.aigcHistoryId&&!i.has(c(e))&&i.set(c(e),{aigcHistoryId:e.aigcHistoryId,aigcItemId:e.aigcItemId,taskStatus:e.taskStatus})}))}else if(e.type===r.x.AttachmentUpdateMutation){let{options:r,executor:n}=e;r.attachmentKey===o.d3.AiStoryAlternativeMaterial&&(null===(a=r.delta.alternatives)||void 0===a||a.forEach((e,r)=>{e.submitId===t&&e.aigcHistoryId&&!i.has(c(e))&&i.set(c(e),{aigcHistoryId:e.aigcHistoryId,aigcItemId:e.aigcItemId,taskStatus:e.taskStatus})}))}}}function m(e,t){if(!t)return[];let i=new Map;return e.undoStack.forEach(e=>{e.undoCommand.mutations.forEach(e=>{_(e,t,i)}),e.redoCommand.mutations.forEach(e=>{_(e,t,i)})}),e.redoStack.forEach(e=>{e.undoCommand.mutations.forEach(e=>{_(e,t,i)}),e.redoCommand.mutations.forEach(e=>{_(e,t,i)})}),[...i.values()]}},99372:function(e,t,i){i.d(t,{m:function(){return a}});var r=i(211561),n=i(481631);class a{static getAudioAlgorithmProductionPath(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o="";if((0,n.he)(e)&&a.hasVideoSpeechToSong(e)&&!i)return{path:o,timeRange:new r.tnv};let s=null===(t=e.voiceChange)||void 0===t?void 0:t.find(e=>e.subType===r.xbm.AudioEffectTypeVCVoiceChange);if(s){if(o=s.productionPath,!s.timeRange)return{path:o,timeRange:new r.tnv({start:0n,duration:e.material.duration})};{let t=new r.tnv;return{path:o,timeRange:t=0n!==s.timeRange.start&&0n!==s.timeRange.duration?new r.tnv(e.sourceTimerange):new r.tnv(s.timeRange)}}}let{vocalBeautify:l}=e;if(l){o=l.productionPath;let{timeRange:e}=l;if(e)return{path:o,timeRange:e}}let{vocalSeparation:u}=e;if(u.choice!==r.ZTd.None){o=u.productionPath;let{timeRange:e}=u;if(e)return{path:o,timeRange:e}}return{path:"",timeRange:new r.tnv}}static hasVideoSpeechToSong(e){return!!(a.getAudioEffect(e,r.xbm.AudioEffectTypeSpeechToSong)&&(!e.material.videoAlgorithm||e.material.videoAlgorithm.algorithms.find(e=>e.type===r.zzh.SpeechToSong)))&&a.hasVideoAlgorithm(e)}static hasVideoAlgorithm(e){if(e.material.videoAlgorithm.path){let{timeRange:t}=e.material.videoAlgorithm;return!!t&&(0n!==t.start||0n!==t.duration)||!1}return!1}static getAudioEffect(e,t){if(e.voiceChange){for(let i of e.voiceChange)if(i.subType===t)return i}return null}}},363397:function(e,t,i){i.d(t,{Cy:function(){return l},fr:function(){return s},g7:function(){return u}});var r=i(268468),n=i(696011),a=i(211561),o=i(700857);let s=(e,t,i)=>{let s={...t.getDraftProperty().canvasConfig.clone()};s.ratio=e.ratio,-1!==e.domWidth&&-1!==e.domHeight&&(s.domWidth=e.domWidth,s.domHeight=e.domHeight),0!==e.containerWidth&&0!==e.containerHeight?(s.width=e.containerWidth,s.height=e.containerHeight):e.ratio===a.rxY.CanvasRatioCustom&&((0===e.customWidth||0===e.customHeight)&&(e.customWidth=n.Ye,e.customHeight=n.Bk),s.width=e.customWidth,s.height=e.customHeight);let l=new r.ry,u=new a.jhR(s);l.canvasConfig=u,i(new o.W({propertyDelta:l}))},l=(e,t,i,r)=>{let n=0!==r?i/r:0;return(0!==t?e/t:0)>n?[t*n,t]:[e,e/n]},u=e=>{switch(e){case a.rxY.CanvasRatioOriginal:return"original";case a.rxY.CanvasRatio16To9:return"16:9";case a.rxY.CanvasRatio9To16:return"9:16";case a.rxY.CanvasRatio4To3:return"4:3";case a.rxY.CanvasRatio3To4:return"3:4";case a.rxY.CanvasRatio1To1:return"1:1";case a.rxY.CanvasRatio2To1:return"2:1";case a.rxY.CanvasRatio2_35To1:return"2.35:1";case a.rxY.CanvasRatio1_85To1:return"1.85:1";case a.rxY.CanvasRatio1_125To2_436:return"1.125:2.436";case a.rxY.CanvasRatioCustom:return"custom";default:return"original"}}},361708:function(e,t,i){i.d(t,{P:function(){return d},b:function(){return c}});var r=i(211561),n=i(268468),a=i(387232),o=i(417273),s=i(481631),l=i(508115),u=i(127926);let d=-1,c={isCombinationVideo(e){var t;return!!((null==e?void 0:e.material)&&(0,s.he)(e))&&!!(null===(t=e.materialDraft)||void 0===t?void 0:t.draft)},isCombination:function(e){return!!(e&&((0,s.he)(e)||(0,s.Y9)(e)))&&void 0!==e.materialDraft&&null!==e.materialDraft.draft},isCombinationIntegrated:e=>c.isCombination(e)&&""!==(0,l.dM)(e,!1),hasAudio(e){if(e.getSegmentsByTrackTypes([r.pNd.TrackTypeAudio]).length>0)return!0;for(let a of e.getSegmentsByTrackTypes([r.pNd.TrackTypeVideo])){var t,i,n;if(!a)continue;let e=null!==(n=null===(t=a.material)||void 0===t?void 0:t.hasAudio)&&void 0!==n&&n,o=(null===(i=a.material)||void 0===i?void 0:i.extraTypeOption)&r.Yzk.HasSeparatedAudio;if(e&&!o)return!0}return!1},findSegments(e,t){let i=[];for(let r of t){let t=[];e.enumSegmentsRecursion((e,i,n)=>i.id===r&&(t=[...e,i],!0),!0),i.push(t)}return i},videoCombinationToAudioOne(e){let{tracks:t}=e,i=new o.pN;for(let o of t){let t=o.type;if(!!(t===r.pNd.TrackTypeVideo||t===r.pNd.TrackTypeAudio||t===r.pNd.TrackTypeComposition))if(t===r.pNd.TrackTypeVideo){let t=o.segments,l=new n.wO;l.type=r.pNd.TrackTypeAudio;let c=[];for(let i of(c.push(l),t)){if(!(0,s.he)(i))continue;let t=i.material;if(!t)return;if(t.extraTypeOption&r.Yzk.HasSeparatedAudio||!t.hasAudio)continue;let o=u.OL.findKeyframes(i,r.Eu.KFTypeVolume);if(0===i.volume&&(!o||o.keyframeList.every(e=>0===e.values[0])))continue;let _=(0,a.xM)(i);if(!!_&&!!(0,s.Y9)(_)){if(this.isCombinationVideo(i)){let e=this.videoCombinationToAudio(i.materialDraft);_.materialDraft=null!=e?e:void 0}if(e.findSegmentInsertIndexByTimeRange(l.segments,_.targetTimerange)===d){let e=new n.wO;e.type=r.pNd.TrackTypeAudio,c.push(e),l=e}l.segments.push(_)}}for(let e of c)0!==e.segments.length&&i.tracks.push(e)}else if(t===r.pNd.TrackTypeAudio){let e=o.clone(!0);i.tracks.push(e)}else throw Error("there is no such case to create audio")}return i},videoCombinationToAudio(e){let t=this.videoCombinationToAudioOne(e.draft);if(!t)return null;let i=new r.WuX;return i.type=e.type,i.combinationId=e.combinationId,i.draft=t,i},getVideoBackground(e){let{video:t,isMainSequence:i=!0}=e,{background:n}=t;return i||!n||n.color?n:new r.fln({...n,color:"#00000000"})}}},156216:function(e,t,i){i.d(t,{S:function(){return r}});function r(e,t,i){let r=e.length-t;for(;r>0;)e.pop(),r--;for(;r<0;)e.push(i),r++}},567142:function(e,t,i){i.d(t,{H:function(){return n}});var r=i(340294);class n{transferTrimPointXtoSeqPointX(e,t){if(0===e.length||0===t.length)return[];let i=0,r=e.length,n=[];n[0]=0;for(let a=0;a<r-1;a++){let r=(t[a+1]+t[a])*.5;i+=(e[a+1]-e[a])/r,n[a+1]=i}for(let e=1;e<r;e++)n[e]=n[e]/i;return n}setCurveSpeed(e,t){if(0===e.length||0===t.length)return!1;let i=this.transferTrimPointXtoSeqPointX(e,t);return 0!==i.length&&i.length===t.length&&!(i.length<2)&&(this._pointX=i,this._pointY=t,this._anchorNum=i.length,this._aveSpeed=this._calculateAveCurveSpeedRatio(),!0)}getAveCurveSpeed(){return 0===this._pointX.length||0===this._pointY.length?0:this._aveSpeed}setSeqDuration(e){this._seqDuration=e}getCurveSpeedWithSeqDelta(e){if(this._pointX.length<2||this._pointX.length!==this._pointY.length)return 0;let t=e;t<0n&&(t=0n);let i=1;for(let e=0;e<this._pointX.length-1;e++){let n=r.pM.times(this._pointX[e],this._seqDuration),a=this._pointY[e],o=r.pM.times(this._pointY[e+1]+this._pointY[e],.5),s=r.pM.times(this._pointX[e+1]-this._pointX[e],this._seqDuration),l=r.pM.times(this._pointX[e+1],this._seqDuration),u=this._pointY[e+1],d=.5*r.pM.times(this._pointX[e+1]+this._pointX[e],this._seqDuration),c=this._pointY[e+1]-this._pointY[e],_=-(.2951*s)+d,m=.2951*s+d,h=0,p=0;t>=n&&t<=_?p=a-(h=.19999999999999996*c/(s*(1-.5902)))*n:t>_&&t<=m?(h=.8*c/(2*s*.2951),p=o-.8*c/(2*s*.2951)*d):p=u-(h=.19999999999999996*c/(s*(1-.5902)))*l,i=r.pM.times(h,t)+p;break}return i}mapSeqDeltaToTrimDelta(e){if(this._pointX.length<2||this._pointX.length!==this._pointY.length)return e;let t=e;t<0n&&(t=0n);let i=0;for(let e=0;e<this._pointX.length-1;e++){let n=r.pM.times(this._pointX[e],this._seqDuration),a=this._pointY[e],o=(this._pointY[e+1]+this._pointY[e])*.5,s=r.pM.times(this._pointX[e+1]-this._pointX[e],this._seqDuration),l=r.pM.times(this._pointX[e+1],this._seqDuration),u=this._pointY[e+1];if(t>l)i+=o*s;else{let d=.5*r.pM.times(this._pointX[e+1]+this._pointX[e],this._seqDuration),c=this._pointY[e+1]-this._pointY[e],_=-(.2951*s)+d,m=-(.8*c)/2+o,h=.2951*s+d,p=.8*c/2+o,g=0;if(t>=n&&t<=_){let e=.19999999999999996*c/(s*(1-.5902)),i=a-e*n;g=r.pM.times(e/2,t*t)+r.pM.times(i,t)-e/2*(n*n)-i*n}else if(t>_&&t<=h){let e=.8*c/(2*s*.2951),i=o-.8*c/(2*s*.2951)*d;g=r.pM.times(e/2,t*t)+r.pM.times(i,t)-e/2*(_*_)-i*_+(m+a)*(_-n)/2}else if(t>h&&t<=l){let e=.19999999999999996*c/(s*(1-.5902)),i=u-e*l;g=r.pM.times(e/2,t*t)+r.pM.times(i,t)-e/2*(h*h)-i*h+(p+m)*(h-_)/2+(m+a)*(_-n)/2}i+=g;break}}return BigInt(Math.floor(i+.5))}mapTrimDeltaToSeqDelta(e){if(this._pointX.length<2||this._pointX.length!==this._pointY.length)return e;let t=e;t<0n&&(t=0n);let i=0,n=0;for(let e=0;e<this._pointX.length-1;e++){let a=r.pM.times(this._pointX[e],this._seqDuration),o=this._pointY[e],s=(this._pointY[e+1]+this._pointY[e])*.5,l=r.pM.times(this._pointX[e+1]-this._pointX[e],this._seqDuration),u=r.pM.times(this._pointX[e+1],this._seqDuration),d=this._pointY[e+1];if(t>=(n+=s*l))i=u;else{let c,_,m,h=r.pM.minus(t,n-s*l),p=.5*r.pM.times(this._pointX[e+1]+this._pointX[e],this._seqDuration),g=this._pointY[e+1]-this._pointY[e];if(0===g){i=a+h/this._pointY[e];break}let f=-(.2951*l)+p,T=-(.8*g)/2+s,y=.2951*l+p,v=.5*(o+T)*(f-a),E=.5*(T+(.8*g/2+s))*(y-f)+v;if(h>=0&&h<=v){let e=.19999999999999996*g/(l*(1-.5902)),t=o-e*a;c=e/2,_=t,m=-e/2*(a*a)-t*a}else if(h>v&&h<=E){let e=.8*g/(2*l*.2951),t=s-.8*g/(2*l*.2951)*p;c=e/2,_=t,m=v-e/2*f*f-t*f}else if(h>E&&h<=s*l){let e=.19999999999999996*g/(l*(1-.5902)),t=d-e*u;c=e/2,_=t,m=E-e/2*y*y-t*y}else c=1,_=0,m=0,h=0;i=(Math.sqrt(4*c*h-4*c*m+_*_)-_)/(2*c);break}}return BigInt(Math.floor(i+.5))}calcAnotherPointSpeed(e,t){return 2*e-t}_calculateAveCurveSpeedRatio(){if(0===this._pointX.length||0===this._pointY.length)return 0;let e=0;for(let t=0;t<this._anchorNum-1;t++){let i=(this._pointY[t+1]+this._pointY[t])*.5;e+=i*(this._pointX[t+1]-this._pointX[t])}return e}constructor(){this._pointX=[],this._pointY=[],this._anchorNum=0,this._aveSpeed=0,this._seqDuration=0n}}},78975:function(e,t,i){i.d(t,{P:function(){return d}});var r=i(827322),n=i(234075),a=i.n(n),o=i(298069),s=i(417597),l=i(287165),u=i(805794);class d{static SetInstance(e){return this.instance=new d(e),this.instance}static ensureRootPath(e){return!e.startsWith("/")&&(e=`/${e}`),o.B.ensureRootPath(e)}readFile(e){return this._fs.readFileSync(e,"utf-8")}copyFile(e,t){let i=this._fs.readFileSync(e,"binary");if(!i.length)return u.B.log("[Business]: copy_file error for read file error:"),!1;let r=this._fs.writeFileSync(t,i);return r?u.B.log("[Business]: copy_file success !"):u.B.log("[Business]: copy_file error for  write_file error!"),r}copyFileOrDir(e,t){if(!this._fs.isExist(e)){u.B.log(`copy_file_or_dir: not exists ${e}`);return}!this._fs.isExist(t)&&this._fs.isDir(e)&&this._fs.mkdir(t,{recursive:!0,skipExist:!0}),this.copyFile(e,t)}deleteFileOrDir(e){}createFolder(e){this._fs.mkdir(e,{skipExist:!0,recursive:!0})}combineFilePath(e,t){if(!e)return t;if(!t)return e;let i="/"===e[e.length-1],r="/"===t[0];return i&&r?e.substring(0,e.length-1)+t:i||r?e+t:`${e}/${t}`}mkdirSync(e,t){return this._fs.mkdir(e,t)}writeFileSync(e,t,i){let{skipExist:r=!0,recursive:n=!0}=null!=i?i:{};if(this.isExist(e)){if(r)return;this.rmSync(e)}n&&this.mkdirSync(a().dirname(e),{recursive:!0}),!("string"==typeof t||ArrayBuffer.isView(t))&&(t=new Uint8Array(t));let o=this._fs.writeFileSync(e,t);if(o<0)throw Error(`writeFile failed: ${o}`)}rmSync(e){if(!this.isExist(e)){console.warn(`can not rm, file not exist at ${e}!`);return}if(this.isDir(e)){console.warn(`can not rm, ${e} is a dir`);return}this._fs.unlink(e)}rmdirSync(e,t){if(!this.isExist(e)){console.warn(`can not rmdir, directory not exist at ${e}!`);return}if(!this.isDir(e)){console.warn(`can not rmdir, ${e} is not a dir`);return}(null==t?void 0:t.recursive)?this.isExist(e)&&(this.readdirSync(e).filter(e=>"."!==e&&".."!==e).forEach(t=>{let i=a().join(e,t);this.isDir(i)?this.rmdirSync(i,{recursive:!0}):this.rmSync(i)}),this._fs.rmdir(e)):this._fs.rmdir(e)}readdirSync(e){return this._fs.readDir(e).filter(e=>!/^\.+$/.test(e))}readFileSync(e,t){let{encoding:i="binary"}=null!=t?t:{};return this._fs.readFileSync(e,i)}statSync(e){let t=this._fs.stat(e);return"number"==typeof t?(console.warn(`can not stat, nothing exist at ${e}!`),{}):t}isDir(e){return this._fs.isDir(e)}isFile(e){return this._fs.isFile(e)}isExist(e,t){if(!e)return!1;let i=this._fs.isExist(e);if(i&&(null==t?void 0:t.useSize)){let t=this._fs.stat(e);return"number"!=typeof t&&0!==t.size}return i}createTempFile(e,t,i){let r=d.ensureRootPath(a().join("/tmp",`${(0,l.p)()}${e}`));return void 0!==t&&this.writeFileSync(r,t,i),{path:r,recycle:()=>this.rmSync(r)}}async unzip(e){let{entries:t}=await s.Ri(e),i={};for(let[e,r]of Object.entries(t)){if(!(e.startsWith("__MACOSX")||e.includes(".DS_Store")))i[e]={name:e,content:await r.arrayBuffer(),isDirectory:r.isDirectory}}return i}_saveEntriesToPath(e){let{entries:t,destPath:i}=e;for(let e in t)if(t[e].isDirectory)this.mkdirSync(a().join(i,e),{recursive:!0});else{var r,n;let o=/^(.+\/)*(.+)$/.exec(e),s=null!==(r=null==o?void 0:o[1])&&void 0!==r?r:"",l=null!==(n=null==o?void 0:o[2])&&void 0!==n?n:"";this.writeFileSync(a().join(i,s,l),t[e].content,{recursive:!0})}}async unzipToPath(e){let{src:t,destPath:i}=e,r=await this.unzip(t);this._saveEntriesToPath({entries:r,destPath:i})}async unzipFromFSToPath(e){let{fromPath:t,toPath:i=a().join(a().dirname(t),a().basename(t,".zip"))}=e;if(this.isExist(t,{useSize:!0})){let e=this.readFileSync(t,{encoding:"binary"});await this.unzipToPath({src:(0,r.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),destPath:i}).catch(e=>{throw e.message=`unzip from ${t}; error: ${e.message}`,e})}else throw Error(`.zip file not exist, can not unzip., ${JSON.stringify(e)}`)}mkdir(e,t){this._fs.mkdir(e,t)}constructor(e){this._fs=e}}},522960:function(e,t,i){i.d(t,{Z:function(){return n}});var r=i(955072);class n{constructor(e){this.query=new r.A(e)}}},52386:function(e,t,i){i.d(t,{s:function(){return a},u:function(){return n}});var r=i(361708);let n=e=>!!e.draftId,a=(e,t)=>{for(let i of e.getAllSegments())if(r.b.isCombination(i)&&i.materialDraft.draft.getDraftId()===t)return i}},459892:function(e,t,i){i.d(t,{D:function(){return r}});function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e?{scale:{x:e.scale.x*t,y:e.scale.y*t},rotation:e.rotation,translation:{x:e.transform.x,y:e.transform.y},flip:e.flip}:{scale:{x:1,y:1},rotation:0,translation:{x:0,y:0},flip:{vertical:!1,horizontal:!1}}}},33926:function(e,t,i){i.d(t,{D:function(){return s},g:function(){return l}});var r=i(481631),n=i(211561),a=i(340294),o=i(426336);let s=30n*60n*1000000n;class l{static start(e,t,i){let l=0n,u=null,d=null,c=!1;for(let i of e.getAllTracks()){let{segments:e}=i;for(let r of e)if(r.id===t)u=i,d=r,c=!0;else if(c)break;if(u)break}if(!c||!u||!d)return null;let _=null;if(i===n.ZXd.ClipStart){if((0,r.Y9)(d)&&(l=0n),(0,r.he)(d)){if(_=d,u.flag===n.w9k.FlagSubVideo)l=0n;else{let e=1;_.speed&&(e=_.speed.speed),l=_.targetTimerange.start-a.pM.div(_.sourceTimerange.start,e,"bigint")}}}else l=e.getDraftMetadata().duration+s,_=(0,r.he)(d)?d:null;return o.c8l._calcTimeRange(e,{track:u,segment:d},l,i,[])}}l.undoId=""},394205:function(e,t,i){i.d(t,{E:function(){return a}});var r=i(602777),n=i(217201);function a(e,t,i){let{segmentId:a,clipTime:o,clipType:s}=t,l=e.getSegmentById(a),u=0n,d=l.targetTimerange.start,c=l.targetTimerange.duration+d;switch(s){case r.ZX.ClipStart:if(0n===(u=o-d))return;if(u<0)d=o;else if(u>0){let e=o;o>=c&&(u=(e=c)-d),d=e}break;case r.ZX.ClipDuration:if(0n===(u=o-c))return;u>0?c=o:u<0&&(c=o)<d&&(u+=(c=d)-o)}n.c8.updateSegmentTimeRange(e,a,o,s,[],!0,!1,i)}},274092:function(e,t,i){i.d(t,{A:function(){return l}});var r=i(722169),n=i(211561),a=i(222298),o=i(350902);let s=e=>{if(!e||e.type!==n.cVg.MetaTypeFigure)return!1;switch(e.subType){case n.DeX.MetaSubTypeExclusionFace:case n.DeX.MetaSubTypeExclusion:return e.faceAdjustParams.every(e=>!e.enable);default:return!1}},l=e=>{let{faceIds:t,resourceIds:i,figures:l}=e,u=(0,r.cloneDeep)(l);for(let e of l){let{resourceId:d,adjustParams:c,faceAdjustParams:_,subType:m}=e;if(!i.includes(d))continue;if(null==c?void 0:c.length){let i=[...c];for(let e of c)if(t.includes(e.name)){let t=i.findIndex(t=>t.name===e.name);i.splice(t,1)}let r=u.findIndex(t=>t.resourceId===e.resourceId);u[r].adjustParams=i}if(null==_?void 0:_.length){let i=[..._];for(let a of _){if(t.includes(a.faceId)){let e=i.findIndex(e=>e.faceId===a.faceId);i.splice(e,1)}if(m===n.DeX.MetaSubTypeExclusionFace){let t=function(e,t,i,r){for(let n of e){if(n.subType===t&&(0,o.E3)(r,n.exclusionGroup)===o.Fl.Component){for(let e of n.faceAdjustParams)if(e.faceId===i)return n}}return null}(l,m,a.faceId,e.exclusionGroup);if(t){let i=function(e,t,i){if(!(null==i?void 0:i.length)||!e)return;let a=(0,r.cloneDeep)(e);for(let r of e.faceAdjustParams){if(r.faceId!==t)continue;let e=[...r.disablePart];for(let t of i){var o;if(!(null===(o=r.disablePart)||void 0===o?void 0:o.includes(t)))continue;let i=e.indexOf(t);e.splice(i,1)}let s=a.faceAdjustParams.findIndex(e=>e.faceId===r.faceId);a.faceAdjustParams.splice(s,1,new n.m4H({...r,disablePart:e}))}return a}(t,a.faceId,e.exclusionGroup);if(i){let e=u.findIndex(e=>e.resourceId===i.resourceId);u[e]=i}}}}let a=u.findIndex(t=>t.resourceId===e.resourceId);u[a].faceAdjustParams=i}if(!c.length&&!_.length){let t=u.findIndex(t=>t.resourceId===e.resourceId);u[t].value=0}let h=u.findIndex(t=>t.resourceId===e.resourceId),p=u[h];p&&(s(p)||(0,a.W)(p))&&u.splice(h,1)}return u}},453138:function(e,t,i){i.d(t,{P:function(){return n}});var r=i(673118);let n={setEffectAdjustParam(e,t,i){return this.setEffectAdjustParamInner(e,t,i)},setEffectAdjustParamInner(e,t,i){let{voiceChange:n}=e;if(n){let e=[];for(let r of n){let n=r.clone(),a=n.audioAdjustParams;a.length>t&&a[t]&&(a[t].value=i),e.push(n)}let a=new r.CC;return a.voiceChange=e,a}}}},834916:function(e,t,i){i.d(t,{Y:function(){return r}});let r=(e,t)=>e.commonKeyframes&&e.commonKeyframes.length>0?[...e.clone().commonKeyframes.filter(e=>t.every(t=>t.propertyType!==e.propertyType)),...t]:t},982811:function(e,t,i){i.d(t,{Y:function(){return r}});class r{static getInstance(){return!r._instance&&(r._instance=new r),r._instance}setKeyframeCaptureProc(e){this._keyframeContextInfoProc=e}removeKeyframeCaptureProc(){this._keyframeContextInfoProc=null}getCaptureContextInfo(){return this._keyframeContextInfoProc?this._keyframeContextInfoProc():null}getTraditionalVideoKeyframeFlag(){}getPlayHead(){return this._keyframeContextInfoProc&&this._keyframeContextInfoProc()?this._keyframeContextInfoProc().playHead:-1n}constructor(){this._keyframeContextInfoProc=null}}},423193:function(e,t,i){i.d(t,{O:function(){return a}});var r=i(660533),n=i(340294);let a={unPack(e,t){if("number"==typeof t)return e.length<1?t:e[0];if("object"==typeof t)return e.length<2?t:{x:e[0],y:e[1]};{if(e.length<3)return t;let i=(0,n.jg)(e);return 9===i.length&&(i=i.substring(0,7)),i}},pack(e){let t=(0,r.n)(e,1,1);return[t.length>0,t]}}},853585:function(e,t,i){i.d(t,{I:function(){return l}});var r=i(211561),n=i(527730),a=i(829813),o=i(91118),s=i(807844);let l={getSegmentProperty(e,t){let i=n.s.getBaseProperty(e,t);if(i.length||(i=this.getMaskProperty(e,t)).length||(i=this.getChromaProperty(e,t)).length||(i=this.getFigureProperty(e,t)).length)return i;if(t===r.Eu.KFTypeFilter){let{filter:t}=e,r=t?t.value:0;return i.push(r),i}let s=o.R.getAdjustProperty(e.adjust,t);if(void 0!==s)return i.push(s),i;let l=a.r.getSegmentProperty(e,t)[0];return void 0!==l?(i.push(l),i):(t===r.Eu.KFTypeAlpha?i.push(e.clip.alpha):t===r.Eu.KFTypeLastVolume&&i.push(e.lastNonzeroVolume),i)},setSegmentProperty(e,t,i){let s=n.s.setBaseProperty(e,t,i);if(s)return s;let l=this.setMaskProperty(e,t,i);if(l)return l;let u=this.setFigureProperty(e,t,i);if(u)return u;let d=this.setChromaProperty(e,t,i);if(d)return d;let c=a.r.setSegmentAudioProperty(e,t,i[0]);if(c)return c;let _=o.R.setAdjustProperty(e.adjust,t,i);if(_)return _;let m=new r.NOn;if(t===r.Eu.KFTypeAlpha&&e.clip)return m.clip=new r.tLq,[m.clip.alpha]=i,m;if(t===r.Eu.KFTypeLastVolume)return[m.lastNonzeroVolume]=i,m;if(t===r.Eu.KFTypeFilter){if(e.filter)return m.filter=new r.W9x,[m.filter.value]=i,m}else if(t===r.Eu.KFTypeSlim)return this.setFigureValue(e,r.DeX.MetaSubTypeManualSlim,i[0]);else if(t===r.Eu.KFTypeStretch)return this.setFigureValue(e,r.DeX.MetaSubTypeManualStretch,i[0]);else if(t===r.Eu.KFTypeZoom)return this.setFigureValue(e,r.DeX.MetaSubTypeManualZoom,i[0])},getMaskProperty(e,t){var i,n,a;let{videoMask:o}=e;if(!(null==o?void 0:o.length))return[];let s=o[0],l=s?s.config:new r.W$k;if(t===r.Eu.KFTypeCommonMaskPositionX){if(l)return[l.centerX]}else if(t===r.Eu.KFTypeCommonMaskPositionY){if(l)return[l.centerY]}else if(t===r.Eu.KFTypeCommonMaskSizeWidth){if(l)return[l.width]}else if(t===r.Eu.KFTypeCommonMaskSizeHeight){if(l)return[l.height]}else if(t===r.Eu.KFTypeCommonMaskRotation)return[null!==(i=l.rotation)&&void 0!==i?i:0];else if(t===r.Eu.KFTypeCommonMaskFeather)return[null!==(n=l.feather)&&void 0!==n?n:0];else if(t===r.Eu.KFTypeCommonMaskRoundCorner)return[null!==(a=l.roundCorner)&&void 0!==a?a:0];return[]},setMaskProperty(e,t,i){let{videoMask:n}=e;if(!(null==n?void 0:n.length))return;let a=n[0];if(!(null==a?void 0:a.config))return;let o=a.clone(),s=new r.NOn;switch(t){case r.Eu.KFTypeMaskPostion:[o.config.centerX,o.config.centerY]=i;break;case r.Eu.KFTypeCommonMaskRoundCorner:[o.config.roundCorner]=i;break;case r.Eu.KFTypeCommonMaskFeather:[o.config.feather]=i;break;case r.Eu.KFTypeCommonMaskRotation:[o.config.rotation]=i;break;case r.Eu.KFTypeMaskSize:[o.config.width,o.config.height]=i;break;default:return}return s.videoMask=[o],s},getFigureProperty(e,t){if(t===r.Eu.KFTypeStretch){let{figures:t}=e,i=t.find(e=>e.subType===r.DeX.MetaSubTypeManualStretch),n=i?(0,s.zI)(i):new r.anD;return[n.intensity,n.upper,n.bottom]}if(t===r.Eu.KFTypeSlim){let{figures:t}=e,i=t.find(e=>e.subType===r.DeX.MetaSubTypeManualSlim),n=i?(0,s.Z_)(i):new r.zs3;return[n.intensity,n.x,n.y,n.width,n.height,n.rotation]}if(t===r.Eu.KFTypeZoom){let{figures:t}=e,i=t.find(e=>e.subType===r.DeX.MetaSubTypeManualZoom),n=i?(0,s.E0)(i):new r.TkD;return[n.intensity,n.x,n.y,n.radius]}return[]},setFigureProperty(e,t,i){let{figures:n}=e;if(!n||t!==r.Eu.KFTypeSlim&&t!==r.Eu.KFTypeStretch&&t!==r.Eu.KFTypeZoom)return;let a=new Map([[r.Eu.KFTypeStretch,r.DeX.MetaSubTypeManualStretch],[r.Eu.KFTypeSlim,r.DeX.MetaSubTypeManualSlim],[r.Eu.KFTypeZoom,r.DeX.MetaSubTypeManualZoom]]);if(!a.has(t))return;let o=new r.NOn,s=n.find(e=>e.subType===a.get(t));if(!!s){if(s.value=i[0],t===r.Eu.KFTypeSlim)for(let e of s.adjustParams)"x"===e.name&&(e.value=i[1]),"y"===e.name&&(e.value=i[2]),"width"===e.name&&(e.value=i[3]),"height"===e.name&&(e.value=i[4]),"rotation"===e.name&&(e.value=i[5]);else if(t===r.Eu.KFTypeStretch)for(let e of s.adjustParams)"upper"===e.name&&(e.value=i[1]),"bottom"===e.name&&(e.value=i[2]);else if(t!==r.Eu.KFTypeZoom)return;else for(let e of s.adjustParams)"x"===e.name&&(e.value=i[1]),"y"===e.name&&(e.value=i[2]),"r"===e.name&&(e.value=i[3]);return o.figures=n,o}},getChromaProperty(e,t){var i,n,a,o,s,l,u,d;if(t===r.Eu.KFTypeChromaIntensity)return[null!==(n=null===(i=e.chroma)||void 0===i?void 0:i.intensityValue)&&void 0!==n?n:0];if(t===r.Eu.KFTypeChromaShadow)return[null!==(o=null===(a=e.chroma)||void 0===a?void 0:a.shadowValue)&&void 0!==o?o:0];if(t===r.Eu.KFTypeChromaEdgeSmooth)return[null!==(l=null===(s=e.chroma)||void 0===s?void 0:s.edgeSmoothValue)&&void 0!==l?l:0];else if(t===r.Eu.KFTypeChromaSpill)return[null!==(d=null===(u=e.chroma)||void 0===u?void 0:u.spillValue)&&void 0!==d?d:0];return[]},setChromaProperty(e,t,i){let{chroma:n}=e;if(!n)return;let a=new r.NOn;if(a.chroma=new r.Xkj,t===r.Eu.KFTypeChromaIntensity)[a.chroma.intensityValue]=i;else if(t===r.Eu.KFTypeChromaShadow)[a.chroma.shadowValue]=i;else if(t===r.Eu.KFTypeChromaEdgeSmooth)[a.chroma.edgeSmoothValue]=i;else{if(t!==r.Eu.KFTypeChromaSpill)return;[a.chroma.spillValue]=i}return a},setFigureValue(e,t,i){let n=new r.NOn;for(let r of e.figures){r.subType===t&&(r.value=i);break}return n.figures=e.figures,n}}},566349:function(e,t,i){i.d(t,{X:function(){return n}});var r=i(211561);let n=(e,t,i,n)=>{let a=new r.yP4;for(let o of(a.id=e,a.name=t,a.sourcePlatform=n,i)){let e=new r.nR_;e.x=o.x,e.y=o.y,a.speedPoints.push(e)}return a}},933199:function(e,t,i){i.d(t,{z:function(){return p}});var r=i(81649),n=i(211561),a=i(481631),o=i(879566),s=i(770868),l=i(13242),u=i(361708),d=i(280700),c=i(340294),_=i(203447),m=i(270519),h=i(6342);class p{getSegmentsByMaterialTypes(e,t){let i=[];for(let r of this._videoDocument.getTracksByType(e))for(let e of r.segments)e.material&&t.includes(e.material.type)&&i.push(e);return i}getSegmentInsertIndexByStartTime(e,t){let{segments:i}=e;for(let e=0;e<i.length;e++){let a=i[e];if(a.__segment_struct_type===n.Ocy.SegmentTailLeader)return e;let{start:o,duration:s}=a.targetTimerange,l=new r.O1(this._videoDocument.property.fps).gen(o+s/2n).tail;if(r.ME.compareAlignTime(l,t,1e6/this._videoDocument.property.fps)>0)return e}return i.length}getSegmentByTextMaterialId(e){for(let t of this.getSegmentsByTrackTypes([n.pNd.TrackTypeSticker,n.pNd.TrackTypeText]))if((0,a.Ft)(t)&&t.material.id===e)return t}getSegmentsByTrackTypeAndMaterialType(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[];for(let a of this._videoDocument.getTracksByType(e))for(let e of a.segments){var n;if((null===(n=e.material)||void 0===n?void 0:n.type)===t&&(0===i.length||!!i.includes(e.id)))r.push(e)}return r}getSegmentsByTrackTypes(e){let t=this._videoDocument.getTracksByTypes(e),i=[];for(let e of t)i.push(...e.segments);return i}getSegmentTextTemplateByTextTemplateMaterialId(e){for(let t of this.getSegmentsByTrackTypes([n.pNd.TrackTypeSticker,n.pNd.TrackTypeText]))if((0,a.Q2)(t)&&t.material.id===e)return t}getGroupFromSegment(e){let{groupContainer:t}=this._videoDocument;if(t){let{groups:i}=t;for(let t of i){if(!!t){if(t.groupMembers.find(t=>t===e))return t}}}}getSegmentsByTrackId(e){let t=this._videoDocument.getTrackById(e);return t?t.segments:[]}getSegmentIndex(e,t){if(e.length<=0)return 0;let i=-1,r=-1n,n=t.start,a=n+t.duration;for(let t of e){i++;let e=t.targetTimerange,{start:o}=e,s=e.duration+o;if(o>=n&&o<a||s>n&&s<=a)return -1;if(r<=n&&o>=a)return i;r=s}return r<=n?i:-1}getSegmentInsertIndexByTimeRange(e,t){if(e.length<=0)return 0;let i=-1n,n=t.start,a=new r.O1(30),o=a.gen(n+t.duration).tail;for(let t=0;t<e.length;t++){let r=e[t].targetTimerange,{start:s}=r,l=a.gen(r.duration+s).tail;if(s>=n&&s<o||l>n&&l<=o)return -1;if(i<=n&&o<=s)return t;i=l}return i<=n?e.length:-1}getAllSegments(){let e=[];for(let t of this._videoDocument.tracks)e.push(...t.segments);return e}getSegmentNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this._videoDocument.getTracksByTypes(t);for(let t=0;t<i.length;t++){let r=i[t],{segments:n}=r;for(let i=0;i<n.length;++i)if(n[i].id===e)return{trackNode:{track:r,i:t},segment:n[i],segIndex:i}}}isTTSAutoUpdate(e){if(!e)return!1;let t=this.getSegmentByTextMaterialId(e);if(t&&(0,a.Ft)(t))return t.material.ttsAutoUpdate;let i=this.getSegmentTextTemplateByTextTemplateMaterialId(e);return!!i&&!!i.material.textInfoResources.find(e=>e.textMaterial.ttsAutoUpdate)}getSegmentByTrackType(e,t){for(let i of this._videoDocument.tracks){if(i.type===t){for(let t of i.segments)if(t.id===e)return t}}}getSegmentPath(e){let t=this.getAllSegments();for(let i=0;i<t.length;i++){let r=[t[i].id];if(r[0]===e)return r;if(u.b.isCombination(t[i])){let n=t[i].materialDraft.draft.getAllSegments();for(let t=0;t<n.length;t++)if(n[t].id===e)return r.push(e),r}}return[]}getSegmentNodeById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let i=0;i<this._videoDocument.tracks.length;i++){let r=this._videoDocument.tracks[i];if(0===t.length||!!t.includes(r.type))for(let t=0;t<r.segments.length;t++){let n=r.segments[t];if(n.id===e)return{trackNode:{track:r,trackIndex:i},segment:n,segmentIndex:t}}}}getDraftIdAndSegById(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=t?this._videoDocument.getDraftById(t.getDraftId()):this._videoDocument;if(!r)return;let n=r.getDraftMetadata().id,a=r.getAllTracks();if(r.__quick__query__.get(e))return r.__quick__query__.get(e);for(let t of a)for(let r of t.segments){var o;if(r.id===e)return{draftId:n,segment:r};if(!i||!u.b.isCombination(r))continue;let t=null===(o=r.materialDraft)||void 0===o?void 0:o.draft;if(!t)return;let a=this.getDraftIdAndSegById(e,t,!1);if(a)return a}}getSegmentById(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=t?this._videoDocument.getDraftById(t.getDraftId()):this._videoDocument;if(null==r?void 0:r.__quick__query__.has(e))return r.__quick__query__.get(e).segment;let n=this.getDraftIdAndSegById(e,t,i);if(n)return null==r||r.__quick__query__.set(e,n),n.segment}findSegmentInsertIndexByTimeRange(e,t){if(e.length<=0)return 0;let i=-1n,n=t.start,a=new r.O1(30),o=a.gen(n+t.duration).tail;for(let t=0;t<e.length;t++){let r=e[t].targetTimerange,{start:s}=r,l=a.gen(r.duration+s).tail;if(s>=n&&s<o||l>n&&l<=o)return -1;if(i<=n&&o<=s)return t;i=l}return i<=n?e.length:-1}findSegmentIndex(e,t){if(e.length<=0)return 0;let i=-1,r=-1n,n=t.start,a=n+t.duration;for(let t of e){i++;let e=t.targetTimerange,{start:o}=e,s=e.duration+o;if(o>=n&&o<a||s>n&&s<=a)return -1;if(r<=n&&o>=a)return i;r=s}return r<=n?i:-1}getGroupBySegmentId(e){let{groupContainer:t}=this._videoDocument;if(t){let{groups:i}=t;for(let t of i){if(!!t){if(t.groupMembers.includes(e))return t}}}}getGroupBySegment(e,t){for(let i of e){if(!!i){if(i.groupMembers.includes(t))return i}}}isFigureDisabled(e){if(!e||e.type!==n.cVg.MetaTypeFigure)return!1;switch(e.subType){case n.DeX.MetaSubTypeExclusionFace:case n.DeX.MetaSubTypeExclusion:return e.faceAdjustParams.every(e=>!e.enable);default:return!1}}getMultiplePropertyValues(e,t,i){let r=this._videoDocument.getSegmentById(e);return r?t.map(e=>l.U.getPropertyValues(this._videoDocument,r,e,i)):[]}getAllSubtitles(){return this.getAllSegments().filter(e=>!!(0,a.Ft)(e)&&e.material.type===n.cVg.MetaTypeSubtitle)}getAllLyrics(){return this.getAllSegments().filter(e=>!!(0,a.Ft)(e)&&e.material.type===n.cVg.MetaTypeLyrics)}getAllEffects(){return this.getAllSegments().filter(e=>(0,a.w5)(e))}getSegmentsByAbilities(e){let t=e&&e.length>0?e:this._videoDocument.getUsedAbilities(),i=h.W.filter(e=>t.includes(e.ability)),r={};for(let e of this._videoDocument.tracks)for(let t of e.segments)i.forEach(e=>{e.check(t)&&(!r[e.ability]&&(r[e.ability]=[]),r[e.ability].push(t))});return r}getVideoMaterialPath(e){if(!(0,a.he)(e))return"";let t=e.material;if(!t)return"";if(t.type===n.cVg.MetaTypeVideo){if(e.reverse&&e.intensifiesAudio)return t.reverseIntensifiesPath;if(e.reverse&&t.reversePath)return t.reversePath;if(e.intensifiesAudio&&t.intensifiesPath)return t.intensifiesPath}let i=(0,m.Mn)(t);return(null==i?void 0:i.algorithm)&&i.path?i.path:t.path}getGroupIdBySegment(e){return(0,a.P2)(e)||(0,a.Ft)(e)||(0,a.Q2)(e)||(0,a.E6)(e)||(0,a.w5)(e)||(0,a.he)(e)||(0,a.Si)(e)||(0,a.P7)(e)||(0,a.WX)(e)||(0,a.Y9)(e)?e.groupId:""}isContainVideoAlgorithm(e,t){var i;if(!e||!(0,a.he)(e))return!1;let{videoAlgorithm:r}=e.material;for(let e of null!==(i=null==r?void 0:r.algorithms)&&void 0!==i?i:[])if(e.type===t)return!0;return!1}getMaterialDraft(e){return(0,a.he)(e)||(0,a.Y9)(e)?e.materialDraft:(0,a.kj)(e)||(0,a.Um)(e)?e.material:void 0}getSegmentAtPositionById(e){let{tracks:t}=this._videoDocument;for(let[i,r]of t.entries())for(let[t,n]of r.segments.entries())if(n.id===e)return{trackId:r.id,trackIndex:i,segmentId:e,segmentIndex:t,segment:n}}isSegmentInTrack(e,t){if(!e)return!1;let{segments:i}=e;for(let e of i)if(e.id===t)return!0;return!1}getCopyGroupBySegment(e,t){for(let i of e){if(!!i){if(i.groupMembers.includes(t))return i.clone()}}}getQuickImportSegments(){let e=[];return this._videoDocument.tracks.forEach(t=>{t.segments.forEach(t=>{if((0,a.Y9)(t)||(0,a.he)(t)){var i;(null===(i=t.material)||void 0===i?void 0:i.path.startsWith("blob:"))&&e.push(t)}})}),e}isRichText(e){if(!e)return!1;let t=this._videoDocument.getSegmentById(e);return!!(t&&(0,a.Ft)(t))&&o.hM.isRichText(t.material.baseContent||t.material.content)}getMixedStyles(e,t){return o.hM.getMixedStyles(e,{begin:t.start,end:t.start+t.length})}getVideoTracking(e){return(0,a.P2)(e)||(0,a.P7)(e)||(0,a.WX)(e)||(0,a.Ft)(e)||(0,a.Q2)(e)||(0,a.he)(e)?e.videoTracking:null}getAllAudioBeats(e){return s.z.getInstance().getAllAudioBeats(this._videoDocument,e)}getSegmentByTransitionId(e){for(let i of this.getSegmentsByTrackTypes([n.pNd.TrackTypeVideo])){var t;if((null===(t=i.transition)||void 0===t?void 0:t.id)===e)return i}}getSegmentsByTimeRange(e,t){let{segments:i}=e,n=[],a=t.start,o=t.start+t.duration;for(let e=0;e<i.length;e++){let t=i[e],{start:s,duration:l}=t.targetTimerange,u=new r.O1(this._videoDocument.property.fps).gen(s+l).tail;s>=a&&u<=o&&n.push(t)}return n}findNextSegment(e){let t=this.getSegmentNodeById(e,[]);if(t){let{segmentIndex:e,trackNode:i}=t,{track:r}=i;if(e+1<r.segments.length)return r.segments[e+1]}}getSegmentIndexByTrackIdAndSegmentId(e,t){let i=this._videoDocument.getTrackById(e);return i?i.segments.findIndex(e=>t===e.id):-1}getTargetTimeRangeByCompositionSegment(e){let t=this.getSegmentPath(e);if(t.length<=0)return;let i=t[0],r=this.getSegmentById(i);if((0,a.it)(r)||(0,a.du)(r)){let e=r.materialDraft.draft.clone();if(r.speed)return this._transformTargetTimeRangeBySpeed(e,r.speed,r)}}getTargetTimeRangeBySegmentId(e){let t=this.getSegmentPath(e);if(t.length<=0)return;let i=t[0],r=this.getSegmentById(i),n=this.getSegmentById(e);if(1===t.length&&n)return{start:n.targetTimerange.start,duration:n.targetTimerange.duration};let o=n.targetTimerange.start+n.targetTimerange.duration>=r.sourceTimerange.start&&n.targetTimerange.start<=r.sourceTimerange.start+r.sourceTimerange.duration;if(n&&r&&((0,a.it)(r)||(0,a.du)(r))&&r.speed&&o)return this.getTargetTimeRangeByOriginTargetTimeRange(n.targetTimerange,r)}getTargetTimeRangeByOriginTargetTimeRange(e,t){let i=e.start-t.sourceTimerange.start,r=this.getTargetStartBySpeed(i>0n?i:0n,t.targetTimerange.duration,t.speed)+t.targetTimerange.start,n=t.sourceTimerange.start+t.sourceTimerange.duration,a=e.start+e.duration;return{start:r,duration:t.targetTimerange.start+(a>=n?t.targetTimerange.duration:this.getTargetStartBySpeed(a-t.sourceTimerange.start,t.targetTimerange.duration,t.speed))-r}}getSegmentsByMaterialId(e){let t=[];return this.getAllSegments().forEach(i=>{if((0,a.Y9)(i)&&i.material.musicId===e||(0,a.Ft)(i)&&i.material.presetId===e||(0,a.he)(i)&&i.material.type===n.cVg.MetaTypePhoto&&i.material.materialId===e){t.push(i);return}}),t}getTargetStartBySpeed(e,t,i){return 0!==i.mode&&i.curveSpeed?new _.C().mapTrimDeltaToSeqDelta(e,t,i.curveSpeed.speedPoints):1===i.speed?e:c.pM.div(e,i.speed,"bigint")}_transformTargetTimeRangeBySpeed(e,t,i){let r=i.targetTimerange.duration,n=i.sourceTimerange.start,a=i.sourceTimerange.start+i.sourceTimerange.duration,o=-1n,s=(e,i)=>{if((0,d.MD)(e))return o<0n?0n:o;{let e=this.getTargetStartBySpeed(i-n,r,t);return e<o?o:e}};return e.tracks.forEach(e=>{e.segments=e.segments.filter(e=>e.targetTimerange.start+e.targetTimerange.duration>=n&&e.targetTimerange.start<=a),e.segments.forEach(i=>{let{start:l}=i.targetTimerange,u=i.targetTimerange.start+i.targetTimerange.duration;l<n&&u>a?(i.targetTimerange.start=0n,i.targetTimerange.duration=r):l<n&&u>n?(i.targetTimerange.start=0n,i.targetTimerange.duration=this.getTargetStartBySpeed(u-n,r,t)):l>=n&&u<=a?(i.targetTimerange.start=s(e,l),i.targetTimerange.duration=this.getTargetStartBySpeed(u-n,r,t)-i.targetTimerange.start):l<a&&u>a&&(i.targetTimerange.start=s(e,l),i.targetTimerange.duration=r-i.targetTimerange.start),o=i.targetTimerange.start+i.targetTimerange.duration}),o=-1n}),e}constructor(e){this._videoDocument=e}}},290719:function(e,t,i){i.d(t,{o:function(){return n}});var r=i(211561);let n=function(e,t,i){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1n,s=e.getSegmentById(t);if(!s)return[];let l=[],u=null===(n=s.material)||void 0===n?void 0:n.type;if((i||0!==a.length)&&(u===r.cVg.MetaTypeSubtitle||u===r.cVg.MetaTypeLyrics||u===r.cVg.MetaTypeText)){let t=r.pNd.TrackTypeText;l=e.getSegmentsByTrackTypeAndMaterialType(t,u,i?void 0:a)}else l.push(s);return o>=0n?l.filter(e=>{let t=o-e.targetTimerange.start;return t>=0n&&t<=e.targetTimerange.duration}):l}},642213:function(e,t,i){i.d(t,{Hd:function(){return s},_Z:function(){return u},dl:function(){return l}});var r,n,a=i(211890);let o=(e,t,i)=>Math.max(Math.min(e,i),t);var s=((r={})[r.NORMAL=0]="NORMAL",r[r.BOLD=1]="BOLD",r[r.ITALIC=2]="ITALIC",r[r.BOLD_ITALIC=3]="BOLD_ITALIC",r);var l=((n={})[n.NONE=0]="NONE",n[n.UNDERLINE=1]="UNDERLINE",n[n.OVERLINE=2]="OVERLINE",n[n.LINE_THROUGH=4]="LINE_THROUGH",n);class u{getEffectId(){return this._mEffectId}getEffectPath(){return this._mEffectPath}getFontId(){return this._mFontId}getFontFamily(){return this._mFontFamily}getFontStyle(){return this._mFontStyle}getFontSize(){return this._mFontSize}setFontId(e){this._mFontId!==e&&(this._mFontId=e)}setFontFamily(e){this._mFontFamily!==e&&(this._mFontFamily=e)}setFontStyle(e){this._mFontStyle!==e&&(this._mFontStyle=e)}setFontSize(e){let t=Math.max(0,e);Math.abs(this._mFontSize-t)>a.n9&&(this._mFontSize=t)}getLetterColor(){return this._mLetterColor}setLetterColor(e){let t=a.rf.clamp(e,new a.rf(0,0,0),new a.rf(1,1,1));this._mLetterColor!==t&&(this._mLetterColor=t)}getLetterAlpha(){return this._mLetterAlpha}setLetterAlpha(e){let t=o(e,0,1);Math.abs(this._mLetterAlpha-t)>a.n9&&(this._mLetterAlpha=t)}getLetterBgColor(){return this._mLetterBgColor}setLetterBgColor(e){let t=a.rf.clamp(e,new a.rf(0,0,0),new a.rf(1,1,1));this._mLetterBgColor!==t&&(this._mLetterBgColor=t)}setFontDecoration(e){this._mFontDecoration!==e&&(this._mFontDecoration=e)}getFontDecoration(){return this._mFontDecoration}isOutlineEnabled(){return this._mOutlineEnabled}setOutlineEnabled(e){this._mOutlineEnabled!==e&&(this._mOutlineEnabled=e)}getOutlineColor(){return new a.rf(this._mOutlineColor.x,this._mOutlineColor.y,this._mOutlineColor.z)}getOutlineWidth(){return this._mOutlineWidth}getOutLineColorAlpha(){return this._mOutlineColor.w}setOutlineColor(e){let t=a.lT.clamp(e,new a.lT(0,0,0,0),new a.lT(1,1,1,1));this._mOutlineColor!==t&&(this._mOutlineColor=t)}setOutlineWidth(e){let t=o(e,0,.2);Math.abs(this._mOutlineWidth-t)>a.n9&&(this._mOutlineWidth=t)}isShadowEnabled(){return this._mShadowEnabled}setShadowEnabled(e){this._mShadowEnabled!==e&&(this._mShadowEnabled=e)}getShadowColor(){return new a.rf(this._mShadowColor.x,this._mShadowColor.y,this._mShadowColor.z)}getShadowColorAlpha(){return this._mShadowColor.w}setShadowColor(e){let t=a.lT.clamp(e,new a.lT(0,0,0,0),new a.lT(1,1,1,1));this._mShadowColor!==t&&(this._mShadowColor=t)}setShadowOffset(e){this._mShadowOffset!==e&&(this._mShadowOffset=e)}getShadowOffset(){return this._mShadowOffset}setShadowSmoothing(e){let t=e<0?0:e;Math.abs(this._mShadowSmooth-t)>a.n9&&(this._mShadowSmooth=t)}getShadowSmoothing(){return this._mShadowSmooth}setShadowAngle(e){Math.abs(this._mShadowAngle-e)>a.n9&&(this._mShadowAngle=e)}getShadowAngle(){return this._mShadowAngle}setEffectId(e){this._mEffectId!==e&&(this._mEffectId=e)}setEffectPath(e){this._mEffectPath!==e&&(this._mEffectPath=e)}setSelected(e){this._mBSelected!==e&&(this._mBSelected=e)}getLetterBgAlpha(){return this._mLetterBgAlpha}constructor(){this._mFontId="",this._mFontFamily="",this._mEffectId="",this._mEffectPath="",this._mLetterColor=new a.rf(1,1,1),this._mLetterAlpha=1,this._mLetterBgColor=new a.rf(0,0,0),this._mLetterBgAlpha=0,this._mFontSize=48,this._mFontStyle=0,this._mFontDecoration=0,this._mOutlineEnabled=!1,this._mOutlineColor=new a.lT(0,0,0,0),this._mOutlineWidth=.08,this._mShadowEnabled=!1,this._mShadowColor=new a.lT(0,0,0,0),this._mShadowOffset=new a.Sh(.05656854435801506,-.05656854435801506),this._mShadowSmooth=.05554999907811482,this._mShadowAngle=-45,this._mBSelected=!1}}},339636:function(e,t,i){i.d(t,{e:function(){return u}});var r=i(734668),n=i(849250),a=i(10011),o=i(642213),s=i(211890),l=i(312473);class u{static async UpdateAMGLetter(e,t,i){if(i){let i=l.p.CreateVEUtils(),n=await i.getLetterSegment(e);if(""===n)return;let{letterSegments:a}=JSON.parse(n);for(let e of a){let i=new r.J;i.setUTF8(e),t.push(i)}return}let a=e.length,o=[];for(let t=0;t<a;++t){let i="";for(i+=e[t];t<a-1;)if(this.ExtentionCh.has(e.codePointAt(t+1)))i+=e[t+1],++t;else if(this.ThaiCh.has(e.codePointAt(t+1))){if(n.d.IsThai(e,t)&&!this.ThaiCh.has(i.codePointAt(0)))i+=e[t+1],++t;else break}else break;e.codePointAt(t)>=127462&&127487>=e.codePointAt(t)&&t+1<a&&(i+=e[t+1],++t),o.push(i)}a=o.length;let s=String.fromCharCode(8205);for(let e=0;e<a;++e){let i=o[e];for(;e+2<a&&o[e+1]===s;)i=i+s+o[e+2],e+=2;let n=new r.J;n.setUTF8(i),t.push(n)}}parseRichText(e){let t=`<root>${e}</root>`,i=new a.q;if(!i.parseFromString(t))return[];let r=i.getRootElement(),n=[];return this.visitElement(r,n),n}visitElement(e,t){if(null===e)return;let i=[];if(""!==e.getText()){u.UpdateAMGLetter(e.getText(),i,this.enableRtl);let t=e;for(;null!==t;){let e=this._mTagTables[t.getName()];void 0!==e&&i.length>0&&e.mTagVisitHangler(i[0],t.getAllAttribute()),t=t.getParent()}for(let e=1;e<i.length;++e)i[e].setSharedLetterStyle(i[0].getSharedLetterStyle())}for(let e of i)t.push(e);for(let i of e.getAllChildren())this.visitElement(i,t)}setTagDescription(e,t,i){this._mTagTables[e]={mIsRootElement:t,mTagVisitHangler:i}}constructor(){this.enableRtl=!1,this._mTagTables={},this.setTagDescription("root",!0,e=>{e.getOrCreateSharedLetterStyle()}),this.setTagDescription("font",!1,(e,t)=>{if(t.id&&e.getOrCreateSharedLetterStyle().setFontId(t.id),t.path){let i=t.path;e.getOrCreateSharedLetterStyle().setFontFamily(i)}}),this.setTagDescription("color",!1,(e,t)=>{if(t[""]){let i=t[""],r=n.d.convert2Vector4f(i);e.getOrCreateSharedLetterStyle().setLetterColor(new s.rf(r.x,r.y,r.z)),e.getOrCreateSharedLetterStyle().setLetterAlpha(r.w)}}),this.setTagDescription("alpha",!1,(e,t)=>{if(t[""]){let i=t[""];e.getOrCreateSharedLetterStyle().setLetterAlpha(parseFloat(i))}}),this.setTagDescription("bgcolor",!1,(e,t)=>{if(t[""]){let i=t[""],r=n.d.convert2Vector4f(i);e.getOrCreateSharedLetterStyle().setLetterBgColor(new s.rf(r.x,r.y,r.z)),e.getOrCreateSharedLetterStyle().setLetterAlpha(r.w)}}),this.setTagDescription("bgalpha",!1,(e,t)=>{if(t[""]){let i=t[""];e.getOrCreateSharedLetterStyle().setLetterAlpha(parseFloat(i))}}),this.setTagDescription("size",!1,(e,t)=>{if(t[""]){let i=t[""];e.getOrCreateSharedLetterStyle().setFontSize(parseFloat(i))}}),this.setTagDescription("b",!1,e=>{e.getOrCreateSharedLetterStyle().getFontStyle()===o.Hd.ITALIC?e.getOrCreateSharedLetterStyle().setFontStyle(o.Hd.BOLD_ITALIC):e.getOrCreateSharedLetterStyle().setFontStyle(o.Hd.BOLD)}),this.setTagDescription("i",!1,e=>{e.getOrCreateSharedLetterStyle().getFontStyle()===o.Hd.BOLD?e.getOrCreateSharedLetterStyle().setFontStyle(o.Hd.BOLD_ITALIC):e.getOrCreateSharedLetterStyle().setFontStyle(o.Hd.ITALIC)}),this.setTagDescription("u",!1,e=>{e.getOrCreateSharedLetterStyle().setFontDecoration(o.dl.UNDERLINE)}),this.setTagDescription("outline",!1,(e,t)=>{if(e.getOrCreateSharedLetterStyle().setOutlineEnabled(!0),t.color){let i=t.color;e.getOrCreateSharedLetterStyle().setOutlineColor(n.d.convert2Vector4f(i))}if(t.width){let i=t.width;e.getOrCreateSharedLetterStyle().setOutlineWidth(parseFloat(i))}}),this.setTagDescription("shadow",!1,(e,t)=>{if(e.getOrCreateSharedLetterStyle().setShadowEnabled(!0),t.color){let i=t.color;e.getOrCreateSharedLetterStyle().setShadowColor(n.d.convert2Vector4f(i))}if(t.offset){let i=t.offset;e.getOrCreateSharedLetterStyle().setShadowOffset(n.d.convert2Vector2f(i))}if(t.smooth){let i=t.smooth;e.getOrCreateSharedLetterStyle().setShadowSmoothing(parseFloat(i))}if(t.angle){let i=t.angle;e.getOrCreateSharedLetterStyle().setShadowAngle(parseFloat(i))}}),this.setTagDescription("effectStyle",!1,(e,t)=>{if(e.getOrCreateSharedLetterStyle(),t.id){let i=t.id||"";e.getOrCreateSharedLetterStyle().setEffectId(i)}if(t.path){let i=t.path||"";e.getOrCreateSharedLetterStyle().setEffectPath(i)}}),this.setTagDescription("select",!1,e=>{e.getOrCreateSharedLetterStyle().setSelected(!0)})}}u.ExtentionCh=new Set([65038,65039,127995,127996,127997,127998,127999,8419]),u.ThaiCh=new Set([3633,3636,3637,3638,3639,3640,3641,3655,3656,3657,3658,3659,3660,3661,3662])},275102:function(e,t,i){i.d(t,{j:()=>s});var r=i("849250");class n{get string(){return this._data}get index(){return this._index}get remaining(){return this._data.substring(this._index)}char(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._index;return this._data[e]}move(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._index+=e}isEnd(){return this._index>=this._data.length}previous(){return this._data[this._index-1]}next(){return this._data[this._index+1]}remainingLength(){return this._data.length-this._index}moveToEnd(){this._index=this._data.length}constructor(e,t=0){this._data=e,this._index=t}}let a=e=>/^[A-Z]$/i.test(e),o=e=>/^[0-9A-Z]$/i.test(e);class s{parseFrom(e){this._mMapAttribute={},this._mAryChildren=[];let t=new n(e);return this.parseData(t)}parseData(e){if(e.isEnd())return!1;if(r.d.SkipWhiteSpace(e),!e.char()||"<"!==e.char())return!1;if(e.move(),!this.parseName(e)||0===this._mStrName.length)return!1;let t="</";if(t+=this._mStrName,t+=">",r.d.SkipWhiteSpace(e),!e.char()||!this.parseAttribute(e))return!1;if(r.d.SkipWhiteSpace(e),!e.char())return!1;if(r.d.Strstart(e,"/>"))return e.move(2),!0;if(r.d.SkipWhiteSpace(e),!e.char()||">"!==e.char())return!1;if(e.move(),!e.char())return!1;for(;e.char()&&">"!==e.char();){if("<"!==e.char())this.parseText(e);else{let t=new s(this._mParser,this,"");if(!t.parseData(e))return!1;this._mAryChildren.push(t)}if(r.d.SkipWhiteSpace(e),r.d.Strstart(e,t))return e.move(t.length),!0}return!1}parseName(e){if(!(null==e?void 0:e.char())||!a(e.char()))return!1;let t=e.index;for(;e.char();)if(o(e.char())||"_"===e.char()||"-"===e.char()||"."===e.char()||":"===e.char())e.move();else break;return e.index-t>0&&(this._mStrName=e.string.substring(t,e.index)),!0}parseAttribute(e){if(!e)return!1;let t=e.index,i="";for(;e.char&&(r.d.SkipWhiteSpace(e),">"!==e.char());){;for(t=e.index;e.char()&&">"!==e.char()&&"="!==e.char();){;if(!o(e.char())&&"_"!==e.char()&&"-"!==e.char()&&"."!==e.char()&&":"!==e.char())return!1;e.move()}if(i=e.index-t==0?"":e.string.substring(t,e.index),e.move(),r.d.SkipWhiteSpace(e),!e.char())return!1;t=e.index;let n=!1;"("===e.char()&&(n=!0);let a=!1;"\\"===e.char()&&'"'===e.next()&&(a=!0,e.move(),e.move(),t=e.index);let s=!1;for('"'===e.char()&&(s=!0,e.move(),t=e.index);;){if(!e.char)return!1;if(n){if(")"===e.char()||">"===e.char()){let r="";r=e.string.substring(t,e.index+1),this._mMapAttribute[i]=r,")"===e.char()&&e.move();break}}else if(a){if('"'===e.char()&&"\\"===e.previous()||">"===e.char()){let r="";r=e.string.substring(t,e.index-1),this._mMapAttribute[i]=r,'"'===e.char()&&e.move();break}}else if(s){if('"'===e.char()||">"===e.char()){let r="";r=e.string.substring(t,e.index),this._mMapAttribute[i]=r,'"'===e.char()&&e.move();break}}else if(r.d.IsWhiteSpace(e.char())||">"===e.char()){let n="";n=e.string.substring(t,e.index),this._mMapAttribute[i]=n,r.d.IsWhiteSpace(e.char())&&e.move();break}e.move()}}return!0}parseText(e){if(e.isEnd())return!1;let t=e.index,i=!1;for("["===e.char()&&(i=!0,e.move(),t=e.index);!e.isEnd();){if("<"===e.char()){if(!i&&"\\"!==e.previous())break;if("]"!==e.previous()){e.move();continue}let r=e.index-1,n=0;for(;r>=t&&"]"===e.char(r);){;n++,r--}if(n%2!=0)break}e.move()}if(e.index-t>0){let r=new s(this._mParser,this,""),n="",a=t,o=e.index;for(i&&o--;a<o;){if("]"===e.char(a)&&"]"===e.char(a+1)){n+="]",a+=2;continue}n+=e.char(a),a++}r.setText(n),this._mAryChildren.push(r)}return!0}setText(e){this._mStrText!==e&&(this._mStrText=e)}getText(){return this._mStrText}getName(){return this._mStrName}getAllAttribute(){return this._mMapAttribute}getParent(){return this._mParent}getAllChildren(){return this._mAryChildren}constructor(e,t,i){this._mStrText="",this._mMapAttribute={},this._mAryChildren=[],this._mParser=e,this._mParent=t,this._mStrName=i}}},929576:function(e,t,i){i.d(t,{O:function(){return a}});var r=i(879566),n=i(211561);class a{static getFirstNoKeywordLocation(e,t){if(!t.length)return 0;let i=-1,n=r.hM.getOriginContentFromContent(e).length;for(let e=0;e<n;e++)if(!t.some(t=>e>=t.location&&e<t.location+t.length)){i=e;break}return i}static getRichTextResourcesFromKeywordsConfig(e,t){let i=e.getDraftProperty().subtitleKeywordsConfig;if(!(null==i?void 0:i.styles))return{fonts:[],effects:[]};let{fontIdPathsOut:n,effectIdPathsOut:a}=r.hM.getAllFontAndEffectIdsFromText(i.styles),o=new Set(n.map(e=>e.id)),s=new Set(a.map(e=>e.id)),l=t.material.fonts.filter(e=>o.has(e.resourceId));return{fonts:l,effects:t.effects.filter(e=>s.has(e.resourceId))}}static updateKeywordsConfigOnTextChange(e,t,i){let r=i.range.map(e=>t.slice(e.location,e.location+e.length)),a=[],o={};return r.forEach(t=>{var i;let r=e.indexOf(t,null!==(i=o[t])&&void 0!==i?i:0);-1!==r&&(a.push(new n.SVG({location:r,length:t.length})),o[t]=r+t.length)}),new n.OfV({range:a})}}},242905:function(e,t,i){i.d(t,{F:function(){return o},u:function(){return a}});var r=i(481631),n=i(285474);let a=(e,t)=>{t&&((0,r.P2)(t)?e.sticker.updateVideoTracking(t,null):(0,r.Ft)(t)?e.text.updateVideoTracking(t,null):(0,r.Q2)(t)&&e.textTemplate.updateVideoTracking(t,null))},o=(e,t,i)=>{let a=[],{infoSticker:o}=e;if(!o)return Promise.all(a);let{trackerMap:s}=o;for(let[a,o]of s.entries())o.forEach(o=>{if(o.targetSegmentId===t.id){let o=i.getSegmentById(a);if(o&&((0,r.Ft)(o)||(0,r.Q2)(o)||(0,r.P2)(o))&&o.videoTracking){let i=o.videoTracking.trackers.find(e=>e.targetSegmentId===t.id);i&&(0,n.pd)({editor:e,tracker:i,trackingClipId:a,trackingMode:(0,n.sk)(o.videoTracking)})}}});return Promise.all(a)}},887214:function(e,t,i){i.d(t,{J4:function(){return n},sg:function(){return a}});var r=i(537004);let n="1.0.0";class a{updateVersion(e){-1===(0,r.Cb)(this._version,e)&&(this._version=e)}getVersion(){return this._version}constructor(){this._version=n}}},159845:function(e){e.exports=JSON.parse('{"Hv":{"NO":"344273037","b2":"15.4.0"}}')}}]);