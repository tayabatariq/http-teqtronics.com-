(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([["6493"],{835446:function(){},752945:function(){},956616:function(){},397983:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});let r={"navigator-bar-size":"58px",navigatorBarSize:"58px","tab-header-size":"76px",tabHeaderSize:"76px","attribute-view-width":"56px",attributeViewWidth:"56px","attribute-view-top-position":"66px",attributeViewTopPosition:"66px","attribute-view-right-position":"8px",attributeViewRightPosition:"8px","attribute-panel-header-height":"52px",attributePanelHeaderHeight:"52px","attribute-panel-horizontal-padding":"16px",attributePanelHorizontalPadding:"16px","attribute-panel-vertical-margin":"16px",attributePanelVerticalMargin:"16px"}},794579:function(){},666302:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});let r={"image-wrapper":"image-wrapper-EC2B31",imageWrapper:"image-wrapper-EC2B31","loader-music":"loader-music-EJtMN7",loaderMusic:"loader-music-EJtMN7",image:"image-H3DQKC","image-skeleton":"image-skeleton-pSujTi",imageSkeleton:"image-skeleton-pSujTi",loading:"loading-zOgh9D"}},547501:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});let r={"animate-loading-g":"animate-loading-g-ffjHKi",animateLoadingG:"animate-loading-g-ffjHKi",light:"light-IZD3t6","responsive-skeleton":"responsive-skeleton-LeImo_",responsiveSkeleton:"responsive-skeleton-LeImo_","responsive-skeleton__bar":"responsive-skeleton__bar-E_nwF5",responsiveSkeletonBar:"responsive-skeleton__bar-E_nwF5","responsive-skeleton__upload-action":"responsive-skeleton__upload-action-XWDXzL",responsiveSkeletonUploadAction:"responsive-skeleton__upload-action-XWDXzL","responsive-skeleton__upload-action-main":"responsive-skeleton__upload-action-main-oVCMft",responsiveSkeletonUploadActionMain:"responsive-skeleton__upload-action-main-oVCMft","responsive-skeleton__upload-action-separate-entries":"responsive-skeleton__upload-action-separate-entries-jdB1Lk",responsiveSkeletonUploadActionSeparateEntries:"responsive-skeleton__upload-action-separate-entries-jdB1Lk","responsive-skeleton__upload-action-separate-entries-item":"responsive-skeleton__upload-action-separate-entries-item-h63wco",responsiveSkeletonUploadActionSeparateEntriesItem:"responsive-skeleton__upload-action-separate-entries-item-h63wco","responsive-skeleton__small-bar":"responsive-skeleton__small-bar-Ru9dq6",responsiveSkeletonSmallBar:"responsive-skeleton__small-bar-Ru9dq6","responsive-skeleton__cloud-cards":"responsive-skeleton__cloud-cards-WMU5Ue",responsiveSkeletonCloudCards:"responsive-skeleton__cloud-cards-WMU5Ue","card-row":"card-row-qQOlZZ",cardRow:"card-row-qQOlZZ","card-content":"card-content-FwQhDW",cardContent:"card-content-FwQhDW","card-bar":"card-bar-O3nleZ",cardBar:"card-bar-O3nleZ","responsive-skeleton__tags":"responsive-skeleton__tags-g9p7CR",responsiveSkeletonTags:"responsive-skeleton__tags-g9p7CR",tag:"tag-vHHvx0","responsive-skeleton__song-cate-list":"responsive-skeleton__song-cate-list-ZzOswu",responsiveSkeletonSongCateList:"responsive-skeleton__song-cate-list-ZzOswu",column:"column-zunrJm",row:"row-hR_yC6","responsive-skeleton__base-list":"responsive-skeleton__base-list-PZJMlu",responsiveSkeletonBaseList:"responsive-skeleton__base-list-PZJMlu","responsive-skeleton__ai-creator-voice":"responsive-skeleton__ai-creator-voice-zbK1ST",responsiveSkeletonAiCreatorVoice:"responsive-skeleton__ai-creator-voice-zbK1ST","responsive-skeleton__ai-creator-digital-human":"responsive-skeleton__ai-creator-digital-human-cXsscb",responsiveSkeletonAiCreatorDigitalHuman:"responsive-skeleton__ai-creator-digital-human-cXsscb","responsive-skeleton__base-title-list":"responsive-skeleton__base-title-list-dVBlgD",responsiveSkeletonBaseTitleList:"responsive-skeleton__base-title-list-dVBlgD","column-content":"column-content-NNSqEK",columnContent:"column-content-NNSqEK","column-title":"column-title-V1vKj1",columnTitle:"column-title-V1vKj1","responsive-skeleton__item-with-label":"responsive-skeleton__item-with-label-g5Sf9L",responsiveSkeletonItemWithLabel:"responsive-skeleton__item-with-label-g5Sf9L","item-with-label-cover":"item-with-label-cover-bSGxi4",itemWithLabelCover:"item-with-label-cover-bSGxi4","item-with-label-title":"item-with-label-title-FAvAnv",itemWithLabelTitle:"item-with-label-title-FAvAnv","responsive-skeleton__song-list":"responsive-skeleton__song-list-pHObPp",responsiveSkeletonSongList:"responsive-skeleton__song-list-pHObPp","song-items":"song-items-dsswbl",songItems:"song-items-dsswbl","song-item":"song-item-DfpDht",songItem:"song-item-DfpDht","song-item-cover":"song-item-cover-DC0Foc",songItemCover:"song-item-cover-DC0Foc","song-item-info":"song-item-info-A07saU",songItemInfo:"song-item-info-A07saU","song-item-title":"song-item-title-Z08ldp",songItemTitle:"song-item-title-Z08ldp","song-item-detail":"song-item-detail-SG3r60",songItemDetail:"song-item-detail-SG3r60","responsive-skeleton__image":"responsive-skeleton__image-du8_PM",responsiveSkeletonImage:"responsive-skeleton__image-du8_PM","image-items":"image-items-xYkeQ4",imageItems:"image-items-xYkeQ4","image-item":"image-item-CqizJC",imageItem:"image-item-CqizJC","image-item-cover":"image-item-cover-N7fQ9K",imageItemCover:"image-item-cover-N7fQ9K","image-item-info":"image-item-info-f465kL",imageItemInfo:"image-item-info-f465kL","image-item-title":"image-item-title-q7mSSe",imageItemTitle:"image-item-title-q7mSSe","image-item-detail":"image-item-detail-gkk54j",imageItemDetail:"image-item-detail-gkk54j","responsive-skeleton__masonry-list":"responsive-skeleton__masonry-list-iypZLt",responsiveSkeletonMasonryList:"responsive-skeleton__masonry-list-iypZLt",item:"item-OaPBW6","responsive-skeleton__combine-wrap":"responsive-skeleton__combine-wrap-wtOo7P",responsiveSkeletonCombineWrap:"responsive-skeleton__combine-wrap-wtOo7P","responsive-skeleton__combine-wrap__poly-cate":"responsive-skeleton__combine-wrap__poly-cate-ZrmsHk",responsiveSkeletonCombineWrapPolyCate:"responsive-skeleton__combine-wrap__poly-cate-ZrmsHk","responsive-skeleton__combine-wrap__poly-cate-with-label":"responsive-skeleton__combine-wrap__poly-cate-with-label-WUdVZC",responsiveSkeletonCombineWrapPolyCateWithLabel:"responsive-skeleton__combine-wrap__poly-cate-with-label-WUdVZC","combine-header":"combine-header-tcBNIy",combineHeader:"combine-header-tcBNIy","combine-header_title":"combine-header_title-ph6WuJ",combineHeaderTitle:"combine-header_title-ph6WuJ","combine-header_handle":"combine-header_handle-VcazmH",combineHeaderHandle:"combine-header_handle-VcazmH","combine-list":"combine-list-rowO_3",combineList:"combine-list-rowO_3","combine-list-row":"combine-list-row-fd8M0v",combineListRow:"combine-list-row-fd8M0v","combine-list_item":"combine-list_item-whmG58",combineListItem:"combine-list_item-whmG58","combine-list__square":"combine-list__square-ftLlrO",combineListSquare:"combine-list__square-ftLlrO","combine-list_item__lg":"combine-list_item__lg-SrK_EN",combineListItemLg:"combine-list_item__lg-SrK_EN","combine-list_item-wide":"combine-list_item-wide-CP4tCQ",combineListItemWide:"combine-list_item-wide-CP4tCQ","combine-list_item-narrow":"combine-list_item-narrow-PHEB69",combineListItemNarrow:"combine-list_item-narrow-PHEB69","combine-list_item__xl":"combine-list_item__xl-ZldaVe",combineListItemXl:"combine-list_item__xl-ZldaVe","combine-list__ai-character":"combine-list__ai-character-huU0rN",combineListAiCharacter:"combine-list__ai-character-huU0rN","responsive-skeleton__sub-list-ctner":"responsive-skeleton__sub-list-ctner-NN0EW8",responsiveSkeletonSubListCtner:"responsive-skeleton__sub-list-ctner-NN0EW8","responsive-skeleton__waterfall-hori-list":"responsive-skeleton__waterfall-hori-list-TgfKnq",responsiveSkeletonWaterfallHoriList:"responsive-skeleton__waterfall-hori-list-TgfKnq","responsive-skeleton__sub-list-header":"responsive-skeleton__sub-list-header-oSmKbH",responsiveSkeletonSubListHeader:"responsive-skeleton__sub-list-header-oSmKbH","sub-title":"sub-title-PUD1sk",subTitle:"sub-title-PUD1sk","sub-opt":"sub-opt-SyMwTm",subOpt:"sub-opt-SyMwTm",base_list_column_loading:"base_list_column_loading-lnevGn",baseListColumnLoading:"base_list_column_loading-lnevGn",mweb_list_column_loading:"mweb_list_column_loading-x6sUgH",mwebListColumnLoading:"mweb_list_column_loading-x6sUgH","base_title_list_column_loading-content":"base_title_list_column_loading-content-H35yii",baseTitleListColumnLoadingContent:"base_title_list_column_loading-content-H35yii","base_title_list_column_loading-title":"base_title_list_column_loading-title-PpI6ry",baseTitleListColumnLoadingTitle:"base_title_list_column_loading-title-PpI6ry","card-container":"card-container-kt1pD2",cardContainer:"card-container-kt1pD2"}},15036:function(){},870076:function(){},879794:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id="879794",e.exports=t},478007:function(e,t,i){"use strict";e.exports=i.p+"static/image/ai-writer-prompt-loading.cc0edf54.webp"},596014:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXxSURBVHgB7VpJq1xFFP76dWIShxfnOIFGxae4cSYLUQSRgEZUNCqo4EI3LlyoEF3oD3DY6M6Nm2wccCdu1WCioi6imGBISN4jic/E4PAy6OvXfl9ulV1dt27f6jt02+R+cKiu291V53x1zqnpAg0aNGjQoEGDUxUtjADdbvdMFndSZiiXUK6lTFNWU6aMHKDsp+ykfEXZ0Wq15lAzaiPAGP0I5SbKzegZ2nI+Z4n9zU+U9yjbSMYsakDlBBjDHzaiUR5koP3cDnz2f/cB5a2qiaiUABr/JBLDz8JwIx7rESpFwuuoCJUQQMPXsHiNcjXSCreduj+6bee5/5sQcfaZcsMDJGIfSmIKJUHj72bxDmWtqo7AlEvuz53v4D0X3AFpDZDLKZ+x73tREqUIoAKPs3iecjr6jc8y3CXG975QfZCcTdlMHV5GCRQmgB0/xuJRW0XP6G6GwPktvOctp3TDJ0ZeoS73oSAK5QB2eBuLTZ6ioZh3ZYHyJeV7ys+UA4zhP017SpqXUa6jrKOsRzLCbQyePWy5hW2tRwEMTQCVvZDFG5QzHCWA7IR1iPIR5VMq+dcQ/Wxk8QKSeM+aGf4jn22vQgEUIUAJb42pZnmAHfHNVOxjlAD7ewaJt52Dfg9z+9zHfmZQAEPlACqjOf58hGN+ySm1rH2urPEC23iXxV2UWaQJt/UvUBDRBNB4Gf4QEgOtdL26ZBdlExX/BRXBzPcbKD8gbfx2yosoiOgQIAHPsrjDVKec/7rKKN5fpcLzqAnU4wkW95v+Pmdfb6MEoggwo/8m+j3GT0THKS9RoV8xQVgW+TttX+XuHfRIkLtbd9R370+a8UIsAVruWoM76B95GX+Yxn+CCUQuAXT/85AsUiwB1miXhA8xoYjxAM2vdl1vDYZTHuPob8GEIoaAS9EbfcFfv3+HCUYMAXL/0MbFft6B/wEYqrLFJmjpukjP7Ob9L4YALUHdEOh6n2s5q4sFDZcepyEdmsv43fE8EoYlAF4nwiGMFzK+7dRd3VYgWZ9kIoaArlfaTk7OBMQxjBfLkZ2fchFDQMdp1Hen6I5qRDvwzE7TuXudGAKOUlZmfMcw664alxeY+LdL8tCpUy5iCViB9HmerStHjCsM7CkykCbArlpzG8jDnGkoawt8McYHxb/djba9z6GQTSGGgN/Qf+gh6aBHyhUYHxSabaTPDi0JlXiALiz9UbeEqIMZxuJKjAc6jg8dktqyEgJ+RH8ILDl1lZqHb8CIYe4glcPc2yX/lunvvHZyCWCG10JiN8Lxb73gVowe52LwkbmWwpV4gLAH4SRoPWGaI3ILRgT2pZlHnjfohnkhpq1YArYimepco10y9Ox2KrYaNYN9KPPriC7vsuRETHtRBJgwEAnuVZedCSwJUmwjFZxGTTDGr0US+1nTn8qj1Hkxps1YDxC+Rs8L/PsA6wVKTBvMVVelYJtyeRmvRZk/3/u3RUdi240mwHjBNqTzgHsTrFLJ6cEqSTDGX4PkOs431j+dPhI7+kCxq7GnWVyAntH+rZAVEfYNldmOEmB/FyF5sWoKadL926kT7G/PEM0XIkCJ7ikkWdh/HyBExB+Ub6nYriH6UIzr/lHL7OVI3z75uUjQqO9mP/9gCBTazlLB61ncY6vIDouOo6Sy8l7KQSQxumCVNclNq0n76pxOot0RDxHgk7HXXrcPg8L7eSqte/x1CCdEf6HkP18MfOfuLzoIrzfcUXf7PFj0Om6YWaAP7FAJcSvCt8PuMxf2eWj/3vIEXn0q4/l8mbvI0ic69IQrkVxfKyeEEpS/h3DDI7S/iHV7hc8sjT+MEqjkSMtMebqx1TrAd88sY0IGDzp3cD1Ly9ydND53s5OHSs/0SIReib0RaYWXIsQnxY11W5fB+6t8h7jyQ02zTRUJVyF7FAcRENpxnnR3JMZHL3JiUNupriFCc7mu1jW15ZER+l7TpU6k5qo23GIkx9okQ0tYvV2mV99Eht7o0rxvjZZra53wO5JDWC2e5usyukGDBg0aNGjQQPgXMlOg8AMh+0wAAAAASUVORK5CYII="},291018:function(e,t,i){"use strict";e.exports=i.p+"static/image/loading-85.cc0edf54.webp"},217193:function(e,t,i){"use strict";i.d(t,{Z:()=>tg}),i("701174");var r,n=i("144144"),o=i("808839"),a=i("425427"),s=i("789786"),l=i("593642"),c=i("614363"),d=i("768362"),u=i("690613"),p=i("800788"),_=i("861810"),g=i("915065"),h=i("978112"),m=i("550624"),v=i("909319"),f=i("933096"),y=i("860933"),w=i("775352"),b=i("849830"),S=i("108692"),C=i("896413"),k=i("687869"),E=i("544688"),I=i("200247");class P extends k.g{async _validatePermission(e){let[t,i,r]=e.invokeFunction(e=>[e.get(I.D),e.get(E.c),e.get(a.rO)]),{hasLogin:n}=t;if(!n)return{canView:!1,canSave:!1};let[o,s]=(await i.getUserPermission({})).pair();if(o)throw o;return s.publishWebTemplatePermission?{canView:!0,canSave:r.isDebug}:r.isDebug?{canView:!0,canSave:!1}:{canSave:!1,canView:!1}}async run(e){let t=await this._validatePermission(e);if(!t.canSave){let[t,i]=e.invokeFunction(e=>[e.get(S.n),e.get(C.a)]);t.saveManager.lockSave(),i.setDisableSave(!0)}return t}constructor(...e){super(...e),this.taskName="INIT_PREVIEW_TEMPLATE"}}var A=i("801497"),R=i("165625");var x=((r=x||{})[r.InvalidTemplate=-1200]="InvalidTemplate",r[r.SyncTemplateResourcesFail=-1300]="SyncTemplateResourcesFail",r);let N={...R.IC,...x},L={[N.SyncTemplateResourcesFail]:()=>({title:A.ZP.t("web_material_title_service_undo",{},"Couldn\u2019t save project"),content:A.ZP.t("web_material_text_network_error",{},"Something went wrong. Refresh to continue editing.")})};var O=i("859445"),M=i("535075"),D=i("974904");class j extends k.g{run(e,t,i){(e.dataSdk.cutSame.getMutableVideos().length<=0||i)&&t.timelineManager.timelineUI.panel.switchNormalTimelinePanel()}constructor(...e){super(...e),this.taskName="SWITCH_TIMELINE_MODE_BY_MUTABLE_SLOTS"}}(0,s.gn)([D.V,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof IMainDraftService?Object:IMainDraftService,"undefined"==typeof IMainEditorWidgetService?Object:IMainEditorWidgetService,Boolean]),(0,s.w6)("design:returntype",void 0)],j.prototype,"run",null);var F=i("196269"),U=i("937567");let{GET_TEMPLATE_INFO:B}=U;class H extends k.g{run(e,t){return(0,F.BE)(e,t)}constructor(...e){super(...e),this.taskName=B}}(0,s.gn)([D.V,(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof IInstantiationService?Object:IInstantiationService,String]),(0,s.w6)("design:returntype",void 0)],H.prototype,"run",null);var G=i("564676"),W=i("803003"),V=i("39116");class Z extends k.g{run(e,t){return e.preloadTemplateResources(t,{shouldMeasure:!0})}constructor(...e){super(...e),this.taskName="PRELOAD_TEMPLATE_RESOURCES"}}var z=i("938918"),$=i("139536"),K=i("205874"),q=i("359802"),Y=i("235684"),J=i("389301");let Q=[$.P,J.P,q.P,K.P,Y.P];var X=i("804251"),ee=i("308260"),et=i("824271"),ei=i("49189"),er=i("998559"),en=i("735842");let eo=[ei.P,er.P,en.P,X.P,ee.P,et.P];var ea=i("931753"),es=i("367152"),el=i("730592");let ec=[ea.P,es.P,el.P];var ed=i("753696"),eu=i("644715");let ep=e=>{let{isEmptyTemplate:t}=e;return{[z.f.Started]:[],[z.f.WorkbenchLoaded]:[],[z.f.DraftLoaded]:[],[z.f.Restored]:[t?{...eu.p2,prefetchPhase:z.f.WorkbenchLoaded}:eu.p2,t?eu.WE:{...eu.WE,prefetchPhase:z.f.WorkbenchLoaded},eu.Vm,eu.LJ,eu.xY,eu.tC],[z.f.Completed]:[]}};var e_=i("414506");let eg=e=>{let{isNewDraft:t,isDebug:i}=e,r=[t?e_.TK:{...e_.TK,prefetchPhase:z.f.WorkbenchLoaded},e_.qq,e_.ei,e_.RR,e_.oW,e_.ZR,e_.Br,e_.vg,e_.oZ,e_.ug,e_.y_],n=[e_.CY];return{[z.f.Started]:[],[z.f.WorkbenchLoaded]:[],[z.f.DraftLoaded]:[],[z.f.Restored]:i?[...r,...n]:r,[z.f.Completed]:[]}};var eh=i("326029");let em=()=>({[z.f.Started]:[],[z.f.WorkbenchLoaded]:[],[z.f.DraftLoaded]:[],[z.f.Restored]:[eh.pr,eh.h9,eh.e],[z.f.Completed]:[]});var ev=i("167341");let ef=e=>({[z.f.Started]:[],[z.f.WorkbenchLoaded]:[],[z.f.DraftLoaded]:[ev.JE],[z.f.Restored]:[ev.O,ev.lB,ev.Mg,ev.VD,ev._O,ev.I9,ev.tY],[z.f.Completed]:[]});var ey=i("308460");let ew=e=>({[z.f.Started]:[],[z.f.WorkbenchLoaded]:[],[z.f.DraftLoaded]:[ey.GP],[z.f.Restored]:[ey.i6,ey.uw,ey.Vc,ey.ps,ey.Ys,ey.mA],[z.f.Completed]:[]}),eb=e=>{let t=ep(e),i=eg(e),r=em(),n=ef(e),o=ew(e),a={[z.f.Started]:[],[z.f.WorkbenchLoaded]:[],[z.f.DraftLoaded]:[],[z.f.Restored]:[],[z.f.Completed]:[]};for(let e of ed.B)a[e]=[...t[e],...i[e],...r[e],...n[e],...o[e]];return{config:{titlebar:eo,siderMenu:Q,toolbar:ec},contribution:a}};var eS=i("728631"),eC=i("260301"),ek=i("147264"),eE=i("531632"),eI=i("805675"),eT=i("426336"),eP=i("108917"),eA=i("210823");function eR(e){let t=e.get(eA.e),i=e.get(S.n);e.get(C.a).selection.onChange(e=>{!function(e,t,i){if((null==i?void 0:i.length)===1){let r=e.dataSdk.draftView.getSegmentById(i[0]);if((0,eT.Y9Q)(r)){t.updateToolBarViewMode({showGroup:eP.D.Mutable,selectionIds:i,activePanelName:eS.j.ToolbarMutableAudioBasic});return}if((0,eT.Ftn)(r)||(0,eT.Q2R)(r)){t.updateToolBarViewMode({showGroup:eP.D.Mutable,selectionIds:i,activePanelName:eS.j.ToolbarMutableTextBasic});return}}t.updateToolBarViewMode({showGroup:eP.D.Mutable,selectionIds:i})}(i,t,e.selectedData.segmentIds)})}var ex=i("641276"),eN=i("176022");let eL="AttributePanel",eO="AttributeView",eM=()=>({[eL]:{key:eL,steps:[{target:()=>{let e=document.querySelectorAll(".attribute-view-menus");return e.length?e[0]:null},title:A.ZP.t("adjust_web_area",{},"\u5C5E\u6027\u4FEE\u6539\u533A"),content:A.ZP.t("you_web_can_web_adjust",{},"\u4F60\u53EF\u4EE5\u5728\u8FD9\u91CC\u8C03\u6574\u6548\u679C\u5C5E\u6027"),placement:"left",confirm:()=>{}}],showSkipButton:!1,closable:!0,okText:A.ZP.t("web_a_template_got_it",{},"Got it"),placeholderRadius:16},[eO]:{key:eO,steps:[{target:()=>{let e=document.querySelectorAll(".workbench-tool-bars");return e.length?e[0]:null},title:A.ZP.t("web_materialSearch_text_bring_reference_panel",{},"Open floating panel"),content:A.ZP.t("web_materialSearch_text_double_clicking_element",{},"Click here or double-click the canvas or timeline to open the floating panel."),placement:"left",confirm:()=>{}}],showSkipButton:!1,closable:!0,okText:A.ZP.t("web_a_template_got_it",{},"Got it"),placeholderRadius:8}});function eD(e){let t=e.get(C.a),i=e.get(eN.W);(0,ex.V)(t.selection.onChange)(()=>{setTimeout(()=>{i.trigger(eM()[eL])},500)})}var ej=i("432871");class eF{loaded(e){if(0!==this._waitLoaded.size){if(this._waitLoaded.delete(e),0===this._waitLoaded.size){var t;null===(t=this._loadedCallback)||void 0===t||t.call(this)}}}completed(e){if(0!==this._waitCompleted.size){if(this._waitCompleted.delete(e),0===this._waitCompleted.size){var t;null===(t=this._completedCallback)||void 0===t||t.call(this)}}}constructor(e){var t,i;this._waitLoaded=new Set(null!==(t=e.waitLoaded)&&void 0!==t?t:[]),this._loadedCallback=e.loadedCallback,this._waitCompleted=new Set(null!==(i=e.waitCompleted)&&void 0!==i?i:[]),this._completedCallback=e.completedCallback}}class eU extends eC.N{_whenWorkbenchLoaded(){let e=super._whenWorkbenchLoaded(),t=!this._environmentService.draftIdFromUrl&&!this._environmentService.templateIdFromUrl;return t?this._workbenchService.activeSiderMenuByName(eS.j.SiderTabTemplate,"auto"):this._accountService.hasLogin?this._workbenchService.activeSiderMenuByName(eS.j.SiderMenuMedia,"auto"):(this._expandSiderMenuWhenLogin(),this._workbenchService.unActiveSidebarMenu()),(0,ek.C)(),!function(e){e.invokeFunction(eR)}(this._containerService),!function(e){e.invokeFunction(eD)}(this._containerService),t?(0,eE.J)(this._containerService):(0,eI._S)(this._containerService),e}_expandSiderMenuWhenLogin(){this._accountService.onDidLogin(()=>{var e;(null===(e=this._workbenchService.getActiveSideMenConfig())||void 0===e?void 0:e.name)||this._workbenchService.activeSiderMenuByName(eS.j.SiderMenuMedia,"auto")})}constructor(e,t,i,r,n,o){super(e,t,i),this._containerService=r,this._environmentService=n,this._accountService=o,this._groupBarriers.push(new eF({waitLoaded:em()[z.f.Restored].map(e=>e.id),loadedCallback:()=>{this._workbenchService.updateToolBarViewMode({showGroup:"mutable",selectionIds:[],panelActivationMode:ej.B.ForceAct,activePanelName:eS.j.ToolbarMutableTextBasic})}})),!this._environmentService.draftIdFromUrl&&this._groupBarriers.push(new eF({waitLoaded:e.contribution[z.f.WorkbenchLoaded].map(e=>e.id),loadedCallback:()=>{var e;null===(e=document.getElementById("ssr-root"))||void 0===e||e.remove()}}))}}var eB=i("772322"),eH=i("875297"),eG=i("298654"),eW=i("990948"),eV=i("218571"),eZ=i("504826"),ez=i("150564"),e$=i("112143"),eK=i("53600"),eq=i("32508");let{COMPATIBLE:eY,NOT_COMPATIBLE:eJ,CROSS_REGION:eQ,PLATFORM:eX,OFFLINE:e0,BANNED:e1,REVIEWING:e2,SELFVIEW:e6,DELETED:e3,OTHER:e4}=eZ.Cd,e5=e=>{let{status:t,templateListPath:i="/templates/"}=e,r=(0,eV.useMemo)(()=>{if(t===eQ)return ez.l2;return ez.mn3},[t]),n=(0,eV.useMemo)(()=>{switch(t){case eY:case eJ:case eX:case e0:case e1:case eQ:case R.JO.InvalidParams:case R.JO.InvalidTemplate:return A.oc.t("web_link_abnormal_text_no_edit",{},"Couldn\u2019t edit this template");default:return A.oc.t("web_link_abnormal_text_no_edit_current",{},"Couldn\u2019t edit this template right now")}},[t]),o=(0,eV.useMemo)(()=>{switch(t){case eQ:case R.JO.InvalidParams:case R.JO.InvalidTemplate:return A.oc.t("web_link_abnormal_text_unavailable",{},"This template is unavailable in your country or region. Try other templates.");default:return A.oc.t("web_link_abnormal_text_try_other",{},"Try other templates.")}},[t]);return(0,eB.jsx)(eq.L,{className:"template-error-page__container",children:(0,eB.jsx)(e$.N,{icon:(0,eB.jsx)(r,{}),title:n,description:o,actions:[{label:A.oc.t("web_link_abnormal_button_view_other",{},"View other templates"),clickHandler:()=>{(0,eK.Vh)(i,eK.u8)}}]})})};var e8=i("624515");async function e7(e,t,i,r){if(!await (0,eH.U)(e,t,i))switch(i.invokeFunction(e=>e.get(e8.O)).cancelGlobalExitConfirm(),e.code){case N.InvalidTemplate:var n;(0,eW.a)((0,eB.jsx)(e5,{templateListPath:r,status:null===(n=e.cause)||void 0===n?void 0:n.cause}));break;case N.SyncTemplateResourcesFail:(0,eG.x)(L[N.SyncTemplateResourcesFail]);break;default:(0,eG.x)(R.m4[R.IC.Unknown])}}var e9=i("606527"),te=i("217123"),tt=i("798184"),ti=i("401846"),tr=i("651717"),tn=i("9080"),to=i("128563"),ta=i("431535"),ts=i("212664"),tl=i("371290"),tc=i("544724"),td=i("948328");class tu extends tr.xO{initBusinessAppService(e,t){var i;i=t,(0,v.v)(i,{useInCN:!1,disableUserBrand:!0,editorCategory:"template_editor",isSupportMultiWorkSpace:!1})}initBusinessContainerService(e,t,i){var r,n,o;r=e,n=t,o=i,(0,g.m)(r,{toolbarFontService:{params:{useCommercial:!1}}},n,o),r.register(w.ec,new _.M(b.P,[{uploaderConfig:{type:"vod"}}])),r.register(f.l,y.G),r.register(h.A,m.E)}async loadBusinessDraft(e,t){try{var r,o,a,s,c,d,_,g,h,m,v;let f,y,w,b;let{isPreviewTemplate:k,currentTemplateId:E}=this._environmentService,I=this.getMainEditorService(),[A,R,x,L,D]=await t,F=!0,B=!1;if(this._isNewDraft){Promise.all([i.e("6440"),i.e("8263")]).then(i.bind(i,514089));let e=await D;if(f=null!==(r=null==e?void 0:e.preload.json)&&void 0!==r?r:null,w=(0,l.k7)(),e){let t=!0;if(B=e.mute,!function(e,t){e.invokeFunction(e=>{var i,r,n,o,a,s,l,c;let d=e.get(S.n);d.draftTemplateManager.setTemplate(t.id,t.templateType);let{searchParams:u}=new URL(window.location.href);d.draftTemplateManager.addTemplateMetaInfo({template_id:t.id,template_from:null!==(r=u.get("work_space_template_from"))&&void 0!==r?r:"",template_search_id:null!==(n=u.get("template_search_id"))&&void 0!==n?n:"",template_search_keyword:null!==(o=u.get("template_search_keyword"))&&void 0!==o?o:"",template_search_keyword_source:null!==(a=u.get("template_search_keyword_source"))&&void 0!==a?a:"",template_search_scene:null!==(s=u.get("template_search_scene"))&&void 0!==s?s:"",template_source_tab_name:null!==(l=u.get("template_tab_name"))&&void 0!==l?l:"",work_space_template_from:null!==(c=u.get("work_space_template_from"))&&void 0!==c?c:""}),null===(i=e.get(C.a).canvasManager.modules.templateManager)||void 0===i||i.setTemplateInfo(t.id,t)})}(this._containerService,e),k&&({canView:t,canSave:F}=await (0,tn.b)(P,this._containerService)),e.status!==eZ.Cd.NORMAL&&!(k&&t))throw this._reportService.reportDevEvent("editor_init_template_status_error",{status:e.status,currentTemplateId:null!=E?E:""}),(0,u.Mx)(N.InvalidTemplate,"template status is not normal",Error("template status is not normal",{cause:e.status}));R.then(t=>{let{preloadEffectItems:i,preloadMaterialItems:r}=t;(0,to.n)(this._containerService,e,r,i,"new")})}}else{let[e,t]=(await A).pair();e&&(0,p.ZB)(t),y=t,f=null!==(s=null==y?void 0:y.template)&&void 0!==s?s:null,b=null==y?void 0:null===(a=y.meta)||void 0===a?void 0:null===(o=a.uploadSource)||void 0===o?void 0:o.draft_ve_version,D.then(e=>{!function(e,t){e.invokeFunction(e=>{var i;e.get(S.n).draftTemplateManager.setTemplate(t.id,t.templateType),null===(i=e.get(C.a).canvasManager.modules.templateManager)||void 0===i||i.setTemplateInfo(t.id,t)})}(this._containerService,e)})}if(!this._isNewDraft&&y&&((0,O.o)(this._containerService,y),await this._containerService.invokeFunction(t=>{let i=t.get(C.a),r=t.get(S.n),n=t.get(e9._);return(0,M.v)(e,i,this._containerService,r.draftWorkspaceManager.workspaceId,n,{draftId:this._environmentService.draftIdFromUrl,preloadData:y},{setRepairQuickImportFlow:()=>{this._isRepairQuickImportFlow=!0}})})),this._isNewDraft&&E){let{preloadMaterialItems:e}=await R;I.preloadManager.syncTemplateResources(E,e,!F,e=>{(0,ta.O)(this._containerService,e),e.some(e=>"fail"===e.status&&(null==e?void 0:e.code)!==te.f.USER_SPACE_NOT_ENOUGH)&&this.handleError((0,u.Mx)(N.SyncTemplateResourcesFail,"sync template resources fail",Error(JSON.stringify(e))),!1)})}if(f){!w&&(this._environmentService.draftIdFromUrl||(null==y?void 0:null===(d=y.meta)||void 0===d?void 0:null===(c=d.draft)||void 0===c?void 0:c.id))&&(w=null!==(v=this._environmentService.draftIdFromUrl)&&void 0!==v?v:null==y?void 0:null===(m=y.meta)||void 0===m?void 0:null===(h=m.draft)||void 0===h?void 0:h.id);let e=this._isNewDraft?"":null==y?void 0:null===(g=y.meta)||void 0===g?void 0:null===(_=g.draft)||void 0===_?void 0:_.name;await this.restoreDraft({draftJson:f,preloadResourcePromise:R,overrideDraftId:w,overrideDraftName:e,draftDataVersion:b}),this._isNewDraft&&this.getMainDraftService().dataSdk.api.draft.clearCover(!1),B&&(0,ts.t)(this.getMainDraftService(),ts.Z.Init),(0,tn.b)(j,this.getMainDraftService(),I,B)}else(0,n.Ie)(U.GET_TEMPLATE_INFO),(0,n.oe)(U.GET_TEMPLATE_INFO),(0,n.Ie)(U.EDITOR_LOAD_DRAFT),(0,n.oe)(U.EDITOR_LOAD_DRAFT),(0,n.Ie)(U.RESTORE_FIRST_FRAME),(0,n.oe)(U.RESTORE_FIRST_FRAME),this._containerService.invokeFunction(e=>{e.get(td.D).bootstrap({materials:[]}),(0,n.AO)(`${U.INIT_PROJECT_TAB}_END`)})}finally{(0,tl.EL)(this._containerService,{}),(0,tl.D$)(this._containerService,{})}}preload(e,t){let i;let{draftIdFromUrl:r,templateIdFromUrl:n}=this._environmentService,o=this.getMainEditorService(),{canvasManager:a,preloadManager:s}=o,l=Promise.resolve(null);if(n){let e=(0,tn.b)(H,this._containerService,n);if(l=e.pTemplateInfo,i=e.templateResource,!r&&n){let e=i.getCoverResourceToken();(0,tt.x)(e).then(e=>{if(e.ok){let t=new Blob([e.value.buffer],{type:"image/jpg"}),i=URL.createObjectURL(t);a.setCoverUrl(i)}}).catch(e=>{console.log(e,"[flow] fail to fetch cover photo",e)})}}let c=o.ensureManager.ensureDefaultResources();if(r){let a=(0,tn.b)(G.E,e,this._containerService,o.preloadManager,r,t);!n&&a.then(e=>{var t,r;let[n,o]=e.pair();n&&(0,p.ZB)(o);let a=null==o?void 0:null===(r=o.meta)||void 0===r?void 0:null===(t=r.draft)||void 0===t?void 0:t.templateId;if(a){this._environmentService.currentTemplateId=a;let e=(0,tn.b)(H,this._containerService,a);l=e.pTemplateInfo,i=e.templateResource}});let d=(0,tn.b)(W.M,e,s,a);return(0,tn.b)(V.P,e,this._containerService,a),[a,d,l,c,l,i]}{let e=(0,tn.b)(Z,s,i);return[Promise.resolve((0,u.oW)(null)),e,l,c,l,i]}}async loadNewDraftMaterials(e){try{var t;await (null===(t=await e)||void 0===t?void 0:t.waitForEnsureFinished())}catch(e){}}async runBusinessPostRestoreTasks(){await super.runBusinessPostRestoreTasks();let e=performance.now(),t=this.getMainDraftService(),i=t.draftTemplateManager.getTemplateId(),r=null;i&&(r=await t.draftTemplateManager.getTemplate(i)),(0,tl.MO)(this._containerService,{loadTime:e,template:r});let n=new URL(window.location.href).searchParams.get("source_template_id");!t.draftTemplateManager.getSourceTemplateId()&&n&&t.draftTemplateManager.setSourceTemplateId(n)}_startContributionJob(e){if(this._environmentService.isAutoTest)return;(0,n.Ie)(U.LOAD_CONTRIBUTIONS);let t=new eU(eb({isNewDraft:!this._environmentService.draftIdFromUrl,isEmptyTemplate:!this._environmentService.draftIdFromUrl&&!this._environmentService.templateIdFromUrl,isDebug:this._environmentService.isDebug}),this._workbenchService,(0,c.ko)(this._containerService,ti.Q),this._containerService,this._environmentService,this._accountService);this._jobScheduler.addJob(t),(0,n.oe)(U.LOAD_CONTRIBUTIONS)}registerEVReporters(){super.registerEVReporters(),this._onErrorCallbacks.push((0,tc.c)(this._containerService))}reportEnterEditorPage(e){super.reportEnterEditorPage(e)}handleError(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!this._lifecycleService.isDestroyed&&-1!==e.code)super.handleError(e,t),e7(e,this._environmentService,this._containerService)}}(0,s.gn)([(0,d.lI)("template-flow","loadBusinessDraft"),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,void 0]),(0,s.w6)("design:returntype",Promise)],tu.prototype,"loadBusinessDraft",null),(0,s.gn)([(0,d.lI)("template-flow","preload"),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,Boolean]),(0,s.w6)("design:returntype","undefined"==typeof BasePreloadResult?Object:BasePreloadResult)],tu.prototype,"preload",null),(0,s.gn)([(0,d.lI)("template-flow","startContributionJob"),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,s.w6)("design:returntype",void 0)],tu.prototype,"_startContributionJob",null);var tp=i("434316");i("835446"),i("752945"),i("870076"),i("235066"),i("89387"),i("266285"),i("678671"),i("141157"),i("94548"),i("410079"),i("367253"),i("603190"),i("47043"),i("680306"),i("296805"),i("15036");var t_=i("134429");new class e{start(){let e=new o.y({isDev:!1,isProd:!0,isInternal:!1,appScmBuildVersion:"1.0.1.5131",appScmBuildBranch:"release/1260",veBuildId:"344273037",veFullBuildVersion:"1.0.1.344273037",appVersion:t_.$U,sdkVersion:t_.f4,draftVersion:t_.Mr});if(!0===(0,a.JY)(e))this._flow=new tu({environmentService:e});else(0,p.ss)("undefined flow");this._flow.startLifeCycle((0,tp.e1)())}}().start(),(0,n.oe)(U.ENTRY_SCRIPT_EXECUTION);let tg=()=>null},946543:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});let r=()=>{}},701174:function(e,t,i){var r,n,o=i(499845);(null==o?void 0:o.env.EDENX_TARGET)!=="node"&&(null===(n=performance)||void 0===n||null===(r=n.mark)||void 0===r||r.call(n,"ENTRY_SCRIPT_EXECUTION_START"))},651717:function(e,t,i){"use strict";i.d(t,{xO:()=>dU});var r,n,o,a,s,l,c,d,u,p,_,g,h,m,v,f,y,w,b=i("789786"),S=i("593642"),C=i("861810"),k=i("614363"),E=i("768362"),I=i("690613"),P=i("800788"),A=i("805794"),R=i("426336"),x=i("961298"),N=i("137309"),L=i("938918"),O=i("160391"),M=i("948328"),D=i("305872"),j=i("495567"),F=i("937567"),U=i("797913"),B=i("425427"),H=i("108692"),G=i("782153"),W=i("896413"),V=i("202159"),Z=i("165145"),z=i("594735"),$=i("462132"),K=i("526867"),q=i("905948"),Y=i("344085"),J=i("9080"),Q=i("782350"),X=i("687869");class ee extends X.g{run(e,t){return t.invokeFunction(async t=>{let i=t.get(Q.W);return await i.initialize(e),i})}constructor(...e){super(...e),this.taskName="INIT_WORKSPACE_SERVICE"}}(0,b.gn)([(0,E.lI)("task","initWorkspaceService"),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IInstantiationService?Object:IInstantiationService]),(0,b.w6)("design:returntype",void 0)],ee.prototype,"run",null);var et=i("290568"),ei=i("966697"),er=i("702049");function en(e){let{userProfile:t}=e;if(t.newIdc&&t.reqDomain){let{reqDomain:e,newIdc:i}=t,r=(0,er.TO)(e,i);r&&er._L.setVars(r)}}let eo=[],ea=e=>(eo.push(e),()=>{let t=eo.findIndex(t=>e===t);return -1!==t&&(eo.splice(t,1),!0)}),es=()=>{let e=XMLHttpRequest.prototype.open,t=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];this.url=i[1],e.apply(this,i)},XMLHttpRequest.prototype.send=function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];let n=this.url,o=eo.reduce((e,t)=>({...e,...t(n)}),{});Object.keys(o).forEach(e=>{this.setRequestHeader.call(this,e,o[e])}),t.apply(this,i)}},el=!1,ec=(e,t)=>{!el&&(el=!0,es()),ea(i=>{if(t(i))return{...e}})};var ed=i("200247");async function eu(e){let{showModal:t,getNotification:r}=await i.e("2449").then(i.bind(i,37803)),n=r(e);if(!!n)t({notification:n,uuid:e})}var ep=i("639605"),e_=i("795772"),eg=i("756024"),eh=i("826843"),em=i("764091"),ev=i("801003"),ef=i("482707"),ey=i("277714"),ew=i("858725"),eb=i("692060"),eS=i("803894"),eC=i("527898"),ek=i("354714"),eE=i("899797"),eI=i("572029"),eT=i("97506"),eP=i("127830");let eA=(e,t)=>{switch((0,eh.d)(t)){case eP._g.Video:return(0,em.Mk)(e,!0);case eP._g.Photo:return(0,ev.Ar)(e,!0);case eP._g.Sticker:return(0,ef.jh)(e,void 0,!0);case eP._g.Audio:return(0,ey.Fi)(e,void 0,!0);case eP._g.TextTemplate:return(0,ew.K3)(e,!0);case eP._g.TextPreset:return(0,eb.Ck)(e,!0);case eP._g.AdjustmentPreset:return(0,eS.J)(e);case eP._g.VideoBackground:return(0,eC.ll)(e,void 0,!0);case eP._g.BrandColor:return(0,ek.T)(e);case eP._g.Font:return(0,eE.ey)(e,void 0,!0)}};var eR=i("460492"),ex=i("475590");class eN{setConfig(e){this._sdk("config",e)}setEventParams(e){let{metrics:t,categories:i}=this._separateEventParams(e);this._eventMetrics={...this._eventMetrics,...t},this._eventCategories={...this._eventCategories,...i}}setLogParams(e){this._logParams={...this._logParams,...e}}setCaptureParams(e){this._captureParams={...this._captureParams,...e}}captureException(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,n={...this._captureParams,...i,label:e},o=this._findJsError(t);this._sdk("captureException",o,n,r)}sendEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=this._separateEventParams(t);this._sdk("sendEvent",{name:e,attached_log:i,metrics:{...this._eventMetrics,...r.metrics},categories:{...this._eventCategories,...r.categories}})}sendLog(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._sdk("sendLog",{level:e,content:t,extra:{...this._logParams,...i}})}sendCustomPerfMetric(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._sdk("sendCustomPerfMetric",{name:e,value:t,type:"perf",extra:{...this._logParams,...i}})}reportResource(e){this._sdk("report",{ev_type:"resource",payload:e})}bindSlardarHook(e,t){this._sdk("on",e,t)}unbindSlardarHook(e,t){this._sdk("off",e,t)}waitLcpSummary(){return this._lcpSummaryDefer.promise}_findJsError(e){let t=e;for(;t;){if(t instanceof Error)return t;t=t.cause}return e.toString()}_separateEventParams(e){let t={},i={};return Object.keys(e).forEach(r=>{"string"==typeof e[r]?i[r]=e[r]:"number"==typeof e[r]&&(t[r]=e[r])}),{metrics:t,categories:i}}_waitForLcp(){let e=t=>{var i,r,n,o,a,s,l,c;(null==t?void 0:t.ev_type)==="performance"?(("fp"===(null==t?void 0:null===(i=t.payload)||void 0===i?void 0:i.name)||"fcp"===(null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.name))&&t.payload.value&&(this._lcpSummary[t.payload.name]=t.payload.value),"lcp"===(null==t?void 0:null===(n=t.payload)||void 0===n?void 0:n.name)&&(t.payload.value&&(this._lcpSummary.lcp=t.payload.value),(null===(o=t.payload.extra)||void 0===o?void 0:o.element)&&(this._lcpSummary.lcpElement=t.payload.extra.element),(null===(a=t.common)||void 0===a?void 0:a.url)&&(this._lcpSummary.lcpUrl=t.common.url),(null===(s=t.common)||void 0===s?void 0:s.pid)&&(this._lcpSummary.pid=null===(l=t.common)||void 0===l?void 0:l.pid),this.unbindSlardarHook("send",e),0===t.payload.value?(this._lcpSummary={fp:0,fcp:0,lcp:0,lcpElement:"",lcpUrl:"",pid:""},this._lcpSummaryDefer.resolve((0,I.wf)(-1,"page routed"))):this._lcpSummaryDefer.resolve((0,I.oW)(this._lcpSummary)))):(null==t?void 0:t.ev_type)==="pageview"&&(!(null==t?void 0:null===(c=t.common)||void 0===c?void 0:c.pid)||!location.pathname.includes(t.common.pid))&&this.unbindSlardarHook("send",e)};this.bindSlardarHook("send",e)}constructor(e,t,i,r,n){this._sdk=e,this._logParams=i,this._captureParams=r,this._options=n,this._lcpSummary={fp:0,fcp:0,lcp:0,lcpElement:"",lcpUrl:"",pid:""},this._lcpSummaryDefer=(0,ex.PQ)();let{metrics:o,categories:a}=this._separateEventParams(t);this._eventMetrics=o,this._eventCategories=a,(null==n?void 0:n.lcpSummary)&&this._waitForLcp()}}class eL extends X.g{run(e,t){window.__trace_consumer__=E.Cz,E.Cz.registerReport(e=>(function(e,t){try{var i,r;if(0===e.spans.length)return;e.process=e.process.map(e=>e.name);let n=e.spans[0].startTime,o=["startTime","duration","operationName","processName","references","tags","logs","hasError","error","errorCode"];Object.assign(e,{spanValues:e.spans.map(t=>{t.references=t.references.map(t=>t.traceId===e.traceId?[t.refType,e.spans.findIndex(e=>{let{spanId:i}=e;return i===t.spanId})]:[t.refType,t.spanId,t.traceId]),t.startTime-=n,t.processName=e.process.indexOf(t.processName);let i=o.map(e=>t[e]),r=i.length;for(let e=1;e<=6;e++){var a;if(i[i.length-e]&&(null===(a=i[i.length-e])||void 0===a?void 0:a.length)!==0)break;r--}return i.length=r,i})}),delete e.spans;let{metrics:a}=e;delete e.metrics,t.sendEvent("trace",{...a,trace_version:2,trace_name:e.traceName,trace_id:e.traceId,duration:e.duration,has_error:String(e.hasError),errors:null!==(i=e.errors)&&void 0!==i?i:"",error_code:null!==(r=e.errorCode)&&void 0!==r?r:"",process:e.process.reduce((e,t)=>`${e}|${t.name}`,""),is_timeout:String(e.isTimeout),retrieval:String(!!e.retrieval),timestamp:n},JSON.stringify(e))}catch(e){t.captureException("trace-json-error",e),console.error(e)}})(e.toJSON(),t)),E.Cz.registerReportMetrics(e=>(function(e,t){try{let{traceName:i,traceId:r,duration:n,process:o,metrics:a}=e.toJSON(!1);Object.keys(a).length>0&&t.sendEvent("trace",{...a,trace_version:2,trace_name:i,trace_id:r,duration:n,process:o.reduce((e,t)=>`${e}|${t.name}`,""),timestamp:e.spans[0].startTime})}catch(e){t.captureException("trace-json-error",e),console.error(e)}})(e,t))}constructor(...e){super(...e),this.taskName="REGISTER_TRACE_REPORT_METHOD"}}var eO=i("405051"),eM=i("641276"),eD=i("690465");let ej=(0,E.Tx)("task",async(e,t,i)=>{eO.yk.setApiSetting(i);let r=await t.invokeFunction(async e=>{let t=e.get(ei.Gw);await t.initialize(),i.updateRequestSetting(t.regionSettings)});return!function(e){e.invokeFunction(e=>{let t=e.get(ei.Gw),i=e.get(eD.x),r=()=>{let e=t.userProfile;i.updateRequestInfo({domainMap:{[eD.Y.DEFAULT]:e.reqDomain.web_domain,[eD.Y.TTS]:e.reqDomain.web_domain,[eD.Y.SAMI]:e.reqDomain.web_domain,[eD.Y.FRONTIER]:e.reqDomain.frontier_domain,[eD.Y.COMMERCE]:e.reqDomain.commerce_domain,[eD.Y.JIANYING]:e.reqDomain.web_domain},locationInfo:{region:e.region,idc:e.newIdc,idcEnum:e.idc}})};t.hasLogin?r():(r(),(0,eM.V)(t.onDidLogin)(()=>{r()}))})}(t),r},"setApiRouteSetting");var eF=i("772322"),eU=i("570126"),eB=i("218571");let eH=(0,eB.lazy)(async()=>{let{LvCookieBanner:e}=await i.e("4831").then(i.bind(i,181335));return{default:t=>(0,eF.jsx)(e,{...t})}}),eG=e=>(0,eF.jsx)(eB.Suspense,{children:(0,eF.jsx)(eH,{...e})});var eW=i("123869"),eV=i("402655");class eZ extends eV.JT{get currentPhase(){return this._currentPhase}addJob(e){(0,P.Y2)(!this._jobPools.has(e.name),"cant duplicate add job."),this._jobPools.set(e.name,e)}removeJob(e){this._jobPools.delete(e)}prepare(e,t){let{span:i}=(0,E.VL)(e,"job-scheduler",`prepare-${t}`);for(let[,i]of this._jobPools)i.prepare(e,t);i.end()}async wait(e,t){let{span:i}=(0,E.VL)(e,"job-scheduler",`wait-${t}`),r=[];for(let[,i]of this._jobPools)r.push(i.wait(e,t));try{return await Promise.all(r),this._currentPhase=t,(0,I.ly)()}finally{i.end()}}dispose(){this._jobPools.forEach(e=>e.dispose()),this._jobPools.clear(),super.dispose()}constructor(e){super(),this._currentPhase=e,this._jobPools=new Map}}var ez=i("165625");class e$ extends X.g{run(e,t){let{debugConsoleStatus:i,isProd:r}=t;!1===i||r&&!0!==i?eg.t.hideConsole():(eg.t.showConsole(),eg.t.setEnvironmentFlag(r))}constructor(...e){super(...e),this.taskName="INIT_CONSOLE_LOG_TASK"}}var eK=i("102054");class eq extends X.g{run(e,t){if(!t.isProd||t.isDebug){let e=document.createElement("div");document.body.append(e),(0,eU.createRoot)(e).render((0,eF.jsx)(eB.Suspense,{children:(0,eF.jsx)(eK.N,{environmentService:t})}))}}constructor(...e){super(...e),this.taskName="INIT_DEV_PANEL"}}var eY=i("974904"),eJ=i("627084");let{INIT_EVER_CLOUD_TOKEN:eQ}=F;class eX extends X.g{run(e,t){if(window.__userInfo)try{return t.invokeFunction(e=>e.get(eJ.o)).getEvercloudToken()}catch(e){}return Promise.resolve()}constructor(...e){super(...e),this.taskName=eQ}}(0,b.gn)([eY.V,(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IInstantiationService?Object:IInstantiationService]),(0,b.w6)("design:returntype",void 0)],eX.prototype,"run",null);var e0=i("255605"),e1=i("332557"),e2=i("168550"),e6=i("320271");let{PRELOAD_INJECTED_DRAFT_RESOURCES:e3}=F;class e4 extends X.g{async run(e,t,i){let{draftIdFromUrl:r}=i;if(r&&document.getElementById("GTW_DRAFT_JSONP"))try{var n,o;let e=await (0,e0.bA)(t);if(i.isDebug&&console.log("[Preload] Begin preload resources"),!e.ok||e.msg||!(null===(o=e.value)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.material_list))return;let r=R.HHr.parse(e.value.data.material_list);t.invokeFunction(e=>{let t=e.get(e1.U),n=e.get(e2.tx),o=t.keyValue.query("DRAFT_PRELOAD_RECORD_KEY");o.ok&&o.value&&JSON.parse(o.value),r.forEach(e=>{if(!e.loki_item||e.loki_item.Panel!==e6.U_.Fonts)return;let t=e.loki_item,r=`${eP._g.Font}_${t.ResourceId}_${t.EffectId}_content`,o=t.FileUrl.UrlList[0],a=t.FileUrl.Uri;i.isDebug&&console.log("[Preload] will preload a resource",t),n.download({key:r,url:o,uniqueId:a,decryptHash:""},{downloadType:e2._5.Eager,databaseFirst:!0})})})}catch(e){console.log("Failed to preload package info",e)}}constructor(...e){super(...e),this.taskName=e3}}(0,b.gn)([eY.V,(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IInstantiationService?Object:IInstantiationService,"undefined"==typeof IVideoEnvironmentService?Object:IVideoEnvironmentService]),(0,b.w6)("design:returntype",Promise)],e4.prototype,"run",null);var e5=i("183346"),e8=i("255623"),e7=i("155841");let e9=(0,E.Tx)("task",function(e,t){var i,r;let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[o,a,s,l]=t.invokeFunction(e=>[e.get(ei.Gw),e.get(Q.W),e.get(B.rO),e.get(H.n)]),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){if(t)throw(0,I.Mx)(ez.IC.WorkspaceNotPermitted,"workspace no permission",Error("workspace no permission"));throw(0,I.Mx)(ez.IC.WorkspaceInitError,"workspace not found",Error("workspace not found"))}if(n)return l.draftWorkspaceManager.updateWorkspaceId(e);l.draftWorkspaceManager.updateWorkspaceId(e)},{userProfile:d}=o,{workspaceList:u}=a,{draftIdFromUrl:p,workspaceIdFromUrl:_}=s,g=null!==(r=null==d?void 0:null===(i=d.defaultSpaceInfo)||void 0===i?void 0:i.workspaceId)&&void 0!==r?r:d.spaceInfo.workspaceId;if(!p){if(!_||"0"===_)return c(g);else{let e=null==u?void 0:u.find(e=>e.workspace_id===_);return c(null==e?void 0:e.workspace_id,!0)}}if("0"!==_&&_)return c(_,!0);if(!g||"0"===g)return c(g);{let e=u.find(e=>e.space_type===e7.iv.WebTransition&&"owner"===e.role);return c(null==e?void 0:e.workspace_id)}},"setWorkspaceInfo");var te=i("417597");let tt=`/* unzipit@1.4.0, license MIT */
'use strict';(function(w){"function"===typeof define&&define.amd?define(w):w()})(function(){function w(a,b){var e=a.length;if(b<=e)return a;b=new Uint8Array(Math.max(e<<1,b));b.set(a,0);return b}function X(a,b,e,g){for(var f=0,c=0,m=g.length>>>1;c<e;){var p=a[c+b];g[c<<1]=0;g[(c<<1)+1]=p;p>f&&(f=p);c++}for(;c<m;)g[c<<1]=0,g[(c<<1)+1]=0,c++;return f}function z(a,b){var e=a.length,g,f;var c=d.bl_count;for(f=0;f<=b;f++)c[f]=0;for(f=1;f<e;f+=2)c[a[f]]++;f=d.next_code;var m=0;c[0]=0;for(g=1;g<=b;g++)m=
m+c[g-1]<<1,f[g]=m;for(b=0;b<e;b+=2)c=a[b+1],0!=c&&(a[b]=f[c],f[c]++)}function A(a,b,e){for(var g=a.length,f=d.rev15,c=0;c<g;c+=2)if(0!=a[c+1]){var m=a[c+1],p=c>>1<<4|m,t=b-m;m=a[c]<<t;for(t=m+(1<<t);m!=t;)e[f[m]>>>15-b]=p,m++}}function Y(a,b){for(var e=d.rev15,g=15-b,f=0;f<a.length;f+=2)a[f]=e[a[f]<<b-a[f+1]]>>>g}function x(a,b,e){return(a[b>>>3]|a[(b>>>3)+1]<<8)>>>(b&7)&(1<<e)-1}function K(a,b,e){return(a[b>>>3]|a[(b>>>3)+1]<<8|a[(b>>>3)+2]<<16)>>>(b&7)&(1<<e)-1}function L(a,b){return(a[b>>>3]|
a[(b>>>3)+1]<<8|a[(b>>>3)+2]<<16)>>>(b&7)}function fa(a){return a.arrayBuffer?a.arrayBuffer():new Promise((b,e)=>{const g=new FileReader;g.addEventListener("loadend",()=>{b(g.result)});g.addEventListener("error",e);g.readAsArrayBuffer(a)})}async function ha(a){a=await fa(a);return new Uint8Array(a)}const d=function(){var a=Uint16Array,b=Uint32Array;return{next_code:new a(16),bl_count:new a(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,
51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new a(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new b(32),flmap:new a(512),fltree:[],fdmap:new a(32),fdtree:[],lmap:new a(32768),ltree:[],ttree:[],dmap:new a(32768),dtree:[],imap:new a(512),itree:[],
rev15:new a(32768),lhst:new b(286),dhst:new b(30),ihst:new b(19),lits:new b(15E3),strt:new a(65536),prev:new a(32768)}}();(function(){function a(g,f,c){for(;0!=f--;)g.push(0,c)}for(var b=0;32768>b;b++){var e=b;e=(e&2863311530)>>>1|(e&1431655765)<<1;e=(e&3435973836)>>>2|(e&858993459)<<2;e=(e&4042322160)>>>4|(e&252645135)<<4;e=(e&4278255360)>>>8|(e&16711935)<<8;d.rev15[b]=(e>>>16|e<<16)>>>17}for(b=0;32>b;b++)d.ldef[b]=d.of0[b]<<3|d.exb[b],d.ddef[b]=d.df0[b]<<4|d.dxb[b];a(d.fltree,144,8);a(d.fltree,
112,9);a(d.fltree,24,7);a(d.fltree,8,8);z(d.fltree,9);A(d.fltree,9,d.flmap);Y(d.fltree,9);a(d.fdtree,32,5);z(d.fdtree,5);A(d.fdtree,5,d.fdmap);Y(d.fdtree,5);a(d.itree,19,0);a(d.ltree,286,0);a(d.dtree,30,0);a(d.ttree,320,0)})();const Z={table:function(){for(var a=new Uint32Array(256),b=0;256>b;b++){for(var e=b,g=0;8>g;g++)e=e&1?3988292384^e>>>1:e>>>1;a[b]=e}return a}(),update:function(a,b,e,g){for(var f=0;f<g;f++)a=Z.table[(a^b[e+f])&255]^a>>>8;return a},crc:function(a,b,e){return Z.update(4294967295,
a,b,e)^4294967295}},aa="undefined"!==typeof process&&process.versions&&"undefined"!==typeof process.versions.node&&"undefined"===typeof process.versions.electron,B=function(){if(aa){const {parentPort:a}=require("worker_threads");return{postMessage:a.postMessage.bind(a),addEventListener:a.on.bind(a)}}return{postMessage:self.postMessage.bind(self),addEventListener(a,b){self.addEventListener(a,e=>{b(e.data)})}}}(),ka={inflate:async function(a){const {id:b,src:e,uncompressedSize:g,type:f}=a;try{var c=
"undefined"!==typeof Blob&&e instanceof Blob?await ha(e):new Uint8Array(e);const y=new Uint8Array(g);a=c;c=y;var m=Uint8Array;if(3==a[0]&&0==a[1])c||new m(0);else{var p=null==c;p&&(c=new m(a.length>>>2<<3));for(var t=0,u,C,M,N,O=0,P=0,l=0,h=0,D,E;0==t;)if(t=K(a,h,1),u=K(a,h+1,2),h+=3,0==u){0!=(h&7)&&(h+=8-(h&7));var k=(h>>>3)+4,F=a[k-4]|a[k-3]<<8;p&&(c=w(c,l+F));c.set(new m(a.buffer,a.byteOffset+k,F),l);h=k+F<<3;l+=F}else{p&&(c=w(c,l+131072));1==u&&(D=d.flmap,E=d.fdmap,O=511,P=31);if(2==u){C=x(a,
h,5)+257;M=x(a,h+5,5)+1;N=x(a,h+10,4)+4;h+=14;for(k=0;38>k;k+=2)d.itree[k]=0,d.itree[k+1]=0;var n=1;for(k=0;k<N;k++){var Q=x(a,h+3*k,3);d.itree[(d.ordr[k]<<1)+1]=Q;Q>n&&(n=Q)}h+=3*N;z(d.itree,n);A(d.itree,n,d.imap);D=d.lmap;E=d.dmap;var ia=d.imap;k=(1<<n)-1;n=C+M;for(var G=a,q=h,R=d.ttree,S=x,ja=L,r=0;r<n;){var ba=ia[ja(G,q)&k];q+=ba&15;var v=ba>>>4;if(15>=v)R[r]=v,r++;else{var ca=0,H=0;16==v?(H=3+S(G,q,2),q+=2,ca=R[r-1]):17==v?(H=3+S(G,q,3),q+=3):18==v&&(H=11+S(G,q,7),q+=7);for(v=r+H;r<v;)R[r]=ca,
r++}}h=q;var T=X(d.ttree,0,C,d.ltree);O=(1<<T)-1;var U=X(d.ttree,C,M,d.dtree);P=(1<<U)-1;z(d.ltree,T);A(d.ltree,T,D);z(d.dtree,U);A(d.dtree,U,E)}for(;;){var da=D[L(a,h)&O];h+=da&15;k=da>>>4;if(0==k>>>8)c[l++]=k;else if(256==k)break;else{n=l+k-254;if(264<k){var V=d.ldef[k-257];n=l+(V>>>3)+x(a,h,V&7);h+=V&7}var ea=E[L(a,h)&P];h+=ea&15;var W=d.ddef[ea>>>4],I=(W>>>4)+K(a,h,W&15);h+=W&15;for(p&&(c=w(c,l+131072));l<n;)c[l]=c[l++-I],c[l]=c[l++-I],c[l]=c[l++-I],c[l]=c[l++-I];l=n}}}c.length==l||c.slice(0,
l)}u=[];let J;f?J=new Blob([y],{type:f}):(J=y.buffer,u.push(J));B.postMessage({id:b,data:J},u)}catch(y){console.error(y),B.postMessage({id:b,error:\`\${y.toString()}\`})}}};B.addEventListener("message",function(a){const {type:b,data:e}=a;a=ka[b];if(!a)throw Error("no handler for type: "+b);a(e)});aa||B.postMessage("start")});`;class ti extends X.g{run(e){let t=new Blob([tt],{type:"plain/text"}),i=URL.createObjectURL(t);te.Ov({workerURL:i,numWorkers:2})}constructor(...e){super(...e),this.taskName="WARMUP_UNZIPIT_WORKER"}}var tr=i("461571");let tn=e=>{let[t,i,r]=e.invokeFunction(e=>[e.get(G.u),e.get(ed.D),e.get(B.rO)]);if(!r.draftIdFromUrl&&(t.setDraftPermission(tr.O.editable),t.updateDraftDuplicatePermission(!0),i.hasLogin)){let{uid:e,name:r}=i.userProfile;t.setDraftOwner(e,r),t.setDraftEditor(e)}};var to=i("995370"),ta=i("732599"),ts=i("594670"),tl=i("315201"),tc=i("504826"),td=i("827084"),tu=i("420072"),tp=i("433140"),t_=i("596112"),tg=i("786377"),th=i("605723");async function tm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,th.C)();await i.init({autoReport:t.autoReport}),i.start();let{campaign:r,term:n,channel:o,extraCommonParams:a}=i.getParams(),s={campaign_id:r,...a,...o,keywords:n};e.setCustomParams(s)}let tv={userId:(null===(s=window.__userInfo)||void 0===s?void 0:null===(a=s.user_info)||void 0===a?void 0:a.user_id)||"",region:(null===(l=window.__locationInfo)||void 0===l?void 0:l.code)||"",hasLogin:!!(null===(d=window.__userInfo)||void 0===d?void 0:null===(c=d.user_info)||void 0===c?void 0:c.user_id)},tf=null!==(_=null===(p=window.__userInfo)||void 0===p?void 0:null===(u=p.subscribe_info)||void 0===u?void 0:u.flag)&&void 0!==_&&_;function ty(e,t){return t.enable?{cpu_cores:e.host_env.cpu_cores,device_memory:e.host_env.device_memory,business:e.business}:{}}let tw=(0,E.Tx)("task",async(e,t,i,r)=>{var n,o,a,s,l,c,d,u;let{appVersion:p,veBuildId:_,isSIMD:g,sdkVersion:h}=i,{searchParams:m}=new URL(window.location.href),v=document.createElement("canvas").getContext("webgl") instanceof WebGLRenderingContext?"1":"0";""===document.title&&(document.title=(0,B.JY)(i)?"All-in-one video template editor\uFF5CCapCut":"CapCut | Video Editor | All-In-One Video Editing Software | CapCut"),t.setCommonEventParams({is_pwa:(0,ta.tc)()?1:0,open_from_pwa:(0,ta.XX)()?1:0,pwa_from:(0,ta.MY)(),current_page:(0,B.JY)(i)?"template_editor":"editor"});let f={channel:"googleadwords_int"===m.get("ad_platform_id")?"google sem":"direct",url:location.href,branch:window._currentBranch,resolution:null!==(s=window._canvas_resolution)&&void 0!==s?s:480,gpu_exist:v,network_type:null!==(l=null===(n=navigator.connection)||void 0===n?void 0:n.effectiveType)&&void 0!==l?l:"",downlink:null!==(c=null===(o=navigator.connection)||void 0===o?void 0:o.downlink)&&void 0!==c?c:"",rtt:null!==(d=null===(a=navigator.connection)||void 0===a?void 0:a.rtt)&&void 0!==d?d:"",lyra_version:p,ve_build_id:_,ve_is_simd:g?1:0,ve_version:h,gray_config_key:window.__gray_config_key,lvweb_env:window.__lvweb_env,web_id:await t.getWebId(),is_arc_browser:(0,to.$n)(),...ty(i,r)};let y=(null==(u=tg.Z.get("capcut_locale"))?void 0:u.toLowerCase())==="es-la"?"es-ES":u;void 0!==y&&(f.lang=y),t.setCustomParams(f),t.setConfig({...tv}),tv.hasLogin&&t.setCustomParams({is_vip:Number(tf)}),await tm(t),i.isFromThirdPartPlatform&&!function(e){e.setCustomParams({channel_level1:"Referral",channel_level2:"extension",channel_level3:"chatgpt"})}(t)},"initTeaParams");function tb(e,t,i){(0,P.Y2)(t.hasLogin);let{uid:r,register_source:n,career:o}=t.userProfile;e.setConfig({userId:r,hasLogin:t.hasLogin,region:t.userProfile.region,...null==i?void 0:i.configParams}),e.setCustomParams({register_channel:n,...null==i?void 0:i.customParams}),void 0!==o&&e.setCustomParams({career:o})}function tS(e,t){let i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,P.Y2)((0,tl.R)(t.value)),348188===t.value.producerAppId?i=4:t.value.templateType===tc.WY.BUSINESS?i=r?tc.WY.BUSINESS:1:t.value.templateType===tc.WY.CONSUMER&&(i=0),e.setCommonEventParams({video_type_id:i})}function tC(e,t,i,r){var n;let o=i.get((0,td.Bc)(e),eP._g.VideoTemplate),a=null!==(n=r.getAppConfigurationValue("template.inCommercial"))&&void 0!==n&&n;(0,tl.R)(o.value)?tS(t,o,a):(0,tu.Z)(o).then(()=>{tS(t,o,a)})}function tk(e,t){let i={578169:"InspireVid",581541:"Speech"},r={create_time:t.createSource.createTime};t.draft.transferredApp&&i[t.draft.transferredApp]&&(r.enter_from=i[t.draft.transferredApp]),e.setCommonEventParams(r)}var tE=i("237225"),tI=i("685795"),tT=i("570444"),tP=i("136877"),tA=i("763832");async function tR(e){return await e.waitForDefaultFontsLoaded,Promise.race([new Promise(t=>{let i=e.onFrameRender(()=>{null==i||i.dispose(),t(null)})}),(0,tA.D)(500)])}let tx=(0,E.Tx)("task",(e,t,i)=>{if(t.cloudMetaManager.getMeta().draft.transferedFrom===tP.ZZ.ad_script){var r;if(i.selection.getSelectedSegmentsIds().length)return;let e=t.dataSdk.draftView.getAllTracks().slice(1).filter(e=>e.type===R.pNd.TrackTypeText).reverse();(null===(r=e[0])||void 0===r?void 0:r.segments.length)&&tR(i.renderManager).then(()=>i.segmentSelection.setSelectedData({segmentIds:[e[0].segments[0].id]}))}},"selectFirstTextSegmentForAdScript");i("966156");var tN=i("368100"),tL=i("848339"),tO=i("332970"),tM=i("74457"),tD=i("153334"),tj=i("801497"),tF=i("230982"),tU=i("375197"),tB=i("314181"),tH=i("744268"),tG=i("838180"),tW=i("317832"),tV=i("865632"),tZ=i("210823"),tz=i("315529");i("784923");var t$=i("498417"),tK=i("911227"),tq=i("764749"),tY=i("215179"),tJ=i("813072");function tQ(e,t){return e<t?-1:1}let tX=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];console.log("[startup]",t)},t0=Promise.resolve([]),t1=async function(e,t,i,r,n,o,a,s,l){var c,d,u,p,_,g,h,m;let v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:t0,f=[],y=[],w=[],b=await v;if(a){let{quickImportMaterials:e}=a;f=a.unresolvedOnlineMaterials,((y=a.unresolvedEverCloudMaterials).length||e.length)&&tX("lost_media",{count:y.length,quick_import_materials_count:e.length})}s&&(w=s.unresolvedEffects);let S=[...i.failedResourceMap.values()],C=[...w,...f.map(e=>{var t;return null==e?void 0:null===(t=e.preloadMaterial)||void 0===t?void 0:t.schema})].map(e=>{var t;return null===(t=(0,tq.f)(e))||void 0===t?void 0:t.id}).filter(Boolean);C.push(...S.map(e=>{var t,i;return(null===(t=(null!==(i=e.key)&&void 0!==i?i:"").split("_"))||void 0===t?void 0:t[1])||e.key})),t.addErrorResourceIds(C);let k=[];for(let e of r.draftView.getAllTracks())for(let t of e.segments){let e=(0,tY.d0)(t);(0,tK.Z)(C,e).length&&k.push(t.id)}if(!function(e){let{dataSdk:t,isTemplate:i,draftPathStore:r}=e;R.lLh.getInstance().get("attachment_video_algorithm.json");let n=t.draftView.getVideoAlgorithmMap(),o=t.draftView.getAllTracks(),a=new Set;o.forEach(e=>{e.segments.forEach(e=>{if(!![R.cVg.MetaTypeVideo,R.cVg.MetaTypePhoto].some(t=>{var i;return t===(null===(i=e.material)||void 0===i?void 0:i.type)})){if(!i){var t,o,s,l,c;let i=(function(e){var t,i,r,n,o,a,s,l,c,d,u,p;let _=!!(null===(t=e.adjust)||void 0===t?void 0:t.enableSmartColorAdjust),g=!!(null===(r=e.material)||void 0===r?void 0:null===(i=r.stable)||void 0===i?void 0:i.stableLevel),h=!!(null===(a=e.material)||void 0===a?void 0:null===(o=a.videoAlgorithm)||void 0===o?void 0:null===(n=o.algorithms)||void 0===n?void 0:n.find(e=>e.type===R.zzh.ComplementFrame)),m=null===(c=e.material)||void 0===c?void 0:null===(l=c.videoAlgorithm)||void 0===l?void 0:null===(s=l.algorithms)||void 0===s?void 0:s.some(e=>e.type===R.zzh.NoiseReduction),v=null===(p=e.material)||void 0===p?void 0:null===(u=p.videoAlgorithm)||void 0===u?void 0:null===(d=u.algorithms)||void 0===d?void 0:d.some(e=>e.type===R.zzh.Deflicker),f=[];return _&&f.push(R.G3_.SmartColor),g&&f.push(R.G3_.Stable),h&&f.push(R.G3_.ComplementFrame),m&&f.push(R.G3_.NoiseReduction),v&&f.push(R.G3_.Deflicker),f})(e).sort(tQ),d=n.get(e.id),u=null!==(c=null==d?void 0:null===(o=d.algorithms)||void 0===o?void 0:null===(t=o.map(e=>e.type))||void 0===t?void 0:t.sort(tQ))&&void 0!==c?c:[];!(0,tJ.Z)(i,u)&&a.add(e);let p=null===(l=e.material)||void 0===l?void 0:null===(s=l.videoAlgorithm)||void 0===s?void 0:s.path;p&&!r.getResourceKeyFromDraftPath(p)&&a.add(e)}}})}),a.forEach(e=>{!function(e,t){var i,r,n,o,a,s,l,c,d,u,p;let _=e.api.batch.batchStart(),g=t.id;t.reverse&&e.api.video.reverse({segId:g,isReverse:!1,reversePath:""},!1,!1),(null===(r=t.material)||void 0===r?void 0:null===(i=r.matting)||void 0===i?void 0:i.flag)&&e.api.video.clearMatting({segId:g,path:""},!1,!1),(null===(n=t.adjust)||void 0===n?void 0:n.enableSmartColorAdjust)&&e.api.video.setSmartColorAdjust({enable:!1,segmentId:g,path:null,smartAdjustColor:void 0},!1,!1),(null===(a=t.material)||void 0===a?void 0:null===(o=a.stable)||void 0===o?void 0:o.stableLevel)&&e.api.video.setStable({stableLevel:0,matrixPath:"",segmentId:g,path:""},!1,!1);let h=!!(null===(c=t.material)||void 0===c?void 0:null===(l=c.videoAlgorithm)||void 0===l?void 0:null===(s=l.algorithms)||void 0===s?void 0:s.find(e=>e.type===R.zzh.ComplementFrame)),m=null===(p=t.material)||void 0===p?void 0:null===(u=p.videoAlgorithm)||void 0===u?void 0:null===(d=u.algorithms)||void 0===d?void 0:d.some(e=>e.type===R.zzh.NoiseReduction);h&&e.api.video.setVideoAlgorithm({segmentId:g,path:"",enable:!1,algorithm:{algorithmId:"",type:R.zzh.ComplementFrame},complementFrameConfig:{mode:R.zAn.OpticalFlow}},!1,!1),m&&e.api.video.setVideoAlgorithm({segmentId:g,path:"",enable:!1,algorithm:{algorithmId:"",type:R.zzh.NoiseReduction}},!1,!1),e.api.batch.batchEnd(_)}(t,e)})}({dataSdk:r,draftPathStore:n,isTemplate:o}),k.length?(t.addErrorSegmentIds(k),t$.Z.normal({get content(){if(o)return tj.oc.t("web_due_to_copyright_issues",{},"\u56E0\u7248\u6743\u95EE\u9898\uFF0C\u5F53\u524D\u6A21\u7248\u4E2D\u90E8\u5206\u7D20\u6750\u4E0D\u53EF\u5728\u4F7F\u7528\uFF0C\u8BF7\u786E\u8BA4\u6548\u679C\u540E\u518D\u5BFC\u51FA");return tj.oc.t("material_lost_toast",{},"\u5DF2\u6DFB\u52A0\u5728\u8F68\u9053\u7684\u90E8\u5206\u5728\u7EBF\u7D20\u6750\u5DF2\u4E0B\u7EBF\uFF0C\u8BF7\u66FF\u6362")}})):((null==a?void 0:null===(c=a.quickImportMaterials)||void 0===c?void 0:c.length)||(null==l?void 0:l.length)||(null==y?void 0:y.length))&&t.triggerResourceErrorChange(),f.length||y.length||w.length||S.length||(null==l?void 0:l.length)||(null==a?void 0:null===(d=a.quickImportMaterials)||void 0===d?void 0:d.length)||b.length){let t=f.length>0||y.length>0||w.length>0,i=S.length>0,r=(null!==(p=null==l?void 0:l.length)&&void 0!==p?p:0)>0,n=(null!==(_=null==a?void 0:null===(u=a.quickImportMaterials)||void 0===u?void 0:u.length)&&void 0!==_?_:0)>0,o=b.length>0,s=e=>e?"true":"false";try{let c={hasUnresolvedMaterials:s(t),unresolvedOnlineMaterialCount:f.length,unresolvedEverCloudMaterialCount:y.length,unresolvedEffectCount:w.length,hasFailedResource:s(i),failedResourceCount:S.length,failedResourceTypes:S.map(e=>e.resourceType).join(","),failedResourceKeys:S.map(e=>e.key).join(","),hasInvalidMaterialLifecycles:s(r),invalidMaterialLifecycleCount:null!==(h=null==l?void 0:l.length)&&void 0!==h?h:0,hasQuickImportMaterials:s(n),quickImportMaterialCount:null!==(m=null==a?void 0:null===(g=a.quickImportMaterials)||void 0===g?void 0:g.length)&&void 0!==m?m:0,hasEmptyBuiltInMaterials:s(o),emptyBuiltInMaterialCount:b.length};e.reportDevEvent("preload_resource_errors",c)}catch(e){}}};var t2=i("787076"),t6=i("847083");function t3(e,t){(null==e?void 0:e.ret)==="1003"&&t$.Z.error(tj.ZP.t("web_request_failed_by_risk",{},"Request error.")),((null==e?void 0:e.ret)==="1004"||429===t)&&t$.Z.error(tj.ZP.t("web_request_failed_by_frequency",{},"The operation is too frequent, please try again later."))}let t4={type:t6.U.Shark,func:e=>{e.interceptors.response.use(e=>(t3(null==e?void 0:e.data,e.status),e),e=>{var t,i;return t3(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data,null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.status),Promise.reject(e)})}};var t5=i("629351"),t8=i("415266"),t7=i("291081"),t9=i("926770"),ie=i("3375"),it=i("608339"),ii=i("725466"),ir=i("825067"),io=i("31463"),ia=i("588415"),is=i("28791"),il=i("87967"),ic=i("544688"),id=i("604571"),iu=i("462235"),ip=i("855909"),i_=i("10092"),ig=i("146293"),ih=i("983233"),im=i("459924"),iv=i("430687"),iy=i("474955"),iw=i("378481"),ib=i("285633"),iS=i("978112"),iC=i("550624"),ik=i("484719"),iE=i("306125"),iI=i("910408"),iT=i("26713"),iP=i("699338"),iA=i("503125"),iR=i("801868"),ix=i("956797"),iN=i("176151"),iL=i("655499"),iO=i("390129"),iM=i("806337"),iD=i("131829"),ij=i("857116"),iF=i("196563"),iU=i("419516"),iB=i("618009"),iH=i("842005"),iG=i("927221"),iW=i("613447"),iV=i("235297"),iZ=i("63276"),iz=i("198104"),i$=i("177146"),iK=i("852968"),iq=i("121761"),iY=i("278433"),iJ=i("49698"),iQ=i("381516"),iX=i("991335"),i0=i("968474"),i1=i("949322"),i2=i("575755"),i6=i("340163"),i3=i("654042"),i4=i("688193"),i5=i("358243"),i8=i("611968"),i7=i("611654"),i9=i("593815"),re=i("457775"),rt=i("720709"),ri=i("541295"),rr=i("498435"),rn=i("850513"),ro=i("542901"),ra=i("117641"),rs=i("263539"),rl=i("738253"),rc=i("317419"),rd=i("444036"),ru=i("59315"),rp=i("74493"),r_=i("342317"),rg=i("550626"),rh=i("265796"),rm=i("952898"),rv=i("616315"),rf=i("743327"),ry=i("537745"),rw=i("283213"),rb=i("317550"),rS=i("144760"),rC=i("930447"),rk=i("565018"),rE=i("266649"),rI=i("75897"),rT=i("940939"),rP=i("19623"),rA=i("493034"),rR=i("505790"),rx=i("299675"),rN=i("517300"),rL=i("195511"),rO=i("133597"),rM=i("223706"),rD=i("584827"),rj=i("784958"),rF=i("185097"),rU=i("287524"),rB=i("259406"),rH=i("916636"),rG=i("100095"),rW=i("93090"),rV=i("257402"),rZ=i("466854"),rz=i("390908"),r$=i("593853"),rK=i("93476"),rq=i("100808"),rY=i("311452"),rJ=i("117082"),rQ=i("844763"),rX=i("405650"),r0=i("865214"),r1=i("208066"),r2=i("930826"),r6=i("928566"),r3=i("414104"),r4=i("275481"),r5=i("322141"),r8=i("898875"),r7=i("679565"),r9=i("390701"),ne=i("446768"),nt=i("658435"),ni=i("555515"),nr=i("253055"),nn=i("660323"),no=i("706707"),na=i("458871"),ns=i("14716"),nl=i("618439"),nc=i("164479"),nd=i("244393"),nu=i("250978"),np=i("78002"),n_=i("594062"),ng=i("483268"),nh=i("587892"),nm=i("669698"),nv=i("813417"),nf=i("760616");class ny extends eV.JT{get dangerUsedUserMachineService(){return this._userService}get loginFrom(){return this._loginFrom}registerTransition(e){this._userService.onTransition(e)}login(e){this._loginFrom=null==e?void 0:e.moduleLoginFrom,this._userService.send({type:"SIGN_IN",preExecTaskWhenLogin:null==e?void 0:e.execAfterLogin})}logout(e){this._userService.send({type:"SIGN_OUT",redirectUrl:e})}changeWorkspaceId(e){this._userService.send({type:"CHANGE_WORKSPACE",data:{workspace_id:e}}),this._userService.send({type:"UPDATE_WORKSPACE",workspaceId:e})}listenOnUserStatusChange(e){nm.O.listenUserWholeStatus(e)}constructor(e,t=!1){super(),this._onDidWorkspaceChange=this._store.add(new nh.Q),this.onDidWorkspaceChange=this._onDidWorkspaceChange.event;let i=(0,nf.kJ)(nv.Zj.withContext({...nv.Zj.context,...null!=e?e:{},shouldFetchLocation:!0,refreshWorkspaceListCb:e=>{e.length&&this._onDidWorkspaceChange.fire(e)}}),{devTools:t});i.start(),this._userService=i,nm.O.init({userService:i})}}var nw=i("282893"),nb=i("403209"),nS=i("523267"),nC=i("789738"),nk=i("788081");let nE=e=>{let{service:t,options:i,fallback:r,fixedTheme:n}=e,[o,a]=(0,nS.SN)(!n),[s,l]=(0,nw.L)(t),c=["unknown","fetchingLocation"].some(s.matches),d=(null==i?void 0:i.shouldFetchLocation)&&c;(0,eB.useEffect)(()=>{l({type:"CHANGE_CONTEXT",context:{...i,showRestoreModal:nb.m}})},[i]),(0,eB.useEffect)(()=>{var e;null==i||null===(e=i.onContextChange)||void 0===e||e.call(i,s.context)},[i,s.context]);let u=(0,eB.useMemo)(()=>(0,nC.d)(),[]);return d?null!=r?r:null:(0,eF.jsx)(nk.Z.Provider,{value:{userService:t,theme:null!=n?n:o,setTheme:a,locale:u},children:e.children})};i("853675"),i("55041"),i("931598"),i("360987"),i("225572");var nI=i("47525"),nT=i("302204"),nP=i("519065"),nA=i("16464"),nR=i("824860"),nx=i("97257"),nN=i("827322"),nL=i("568998"),nO=i("150564"),nM=i("621238"),nD=i("161670"),nj=i("120272"),nF=i("149803");class nU{report(e,t){let{immediately:i}=t||{};i?this.reporter.reportBecon("click_personal_profile",e):this.reporter.report("click_personal_profile",e)}constructor(){this.reporter=(0,nF.y)()}}var nB=i("804846"),nH=i("545778"),nG=i("560439"),nW=i("4597"),nV=i("287272"),nZ=i("496171"),nz=i("474447"),n$=i("270767");i("837510");var nK=i("152155"),nq=i.n(nK);var nY=((r={})[r.logIn=0]="logIn",r[r.signUp=1]="signUp",r[r.forgetPwd=2]="forgetPwd",r[r.invite=3]="invite",r),nJ=i("948747"),nQ=i("109620"),nX=i("793676"),n0=i("306224"),n1=i("400387");let n2=()=>{let e=new URLSearchParams(window.location.search),t=!!parseInt(e.get("from_team_invite")||"0");return{isFromTeamInvite:t,isFromTeamApply:!!parseInt(e.get("from_team_apply")||"0")}};i("960560");var n6=i("928881");let n3=e=>{let{send:t,email:i,toEmailLogIn:r,toEmailSignIn:n}=e,[o,a]=(0,eB.useState)(""),[s,l]=(0,eB.useState)(!1),c=()=>{if(!s){if(!i||!n1.s9.test(i.trim())){a(tj.oc.t("email_contain_at"));return}l(!0),t({type:"CHECK_EMAIL_HAS_REGISTER",email:i,checkEmailHasRegisterCb:e=>{l(!1);try{e?null==r||r():null==n||n()}catch(e){console.error(e)}},onError:()=>{t$.Z.error({content:tj.oc.t("web_server_error_text_internal_error",{},"Something went wrong. Try again."),style:{zIndex:1104}}),l(!1)}})}};return(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide_verify_email",children:[(0,eF.jsx)("form",{onSubmit:e=>{e.preventDefault(),c()},children:(0,eF.jsx)(n6.Z,{className:nq()("lv_sign_in_panel_wide-input",{"lv_sign_in_panel_wide-input-warn":""!==o}),name:"signUsername",autoComplete:"username",placeholder:tj.oc.t("web_signin_placeholder_enter_email",{},"Enter email"),onChange:e=>{t({type:"SAVE_EMAIL",email:e})},onBlur:e=>{let{value:t}=e.target;t&&!n1.s9.test(t.trim())?a(tj.oc.t("email_contain_at")):a("")},defaultValue:i})}),""!==o?(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide_error-info",children:o}):null,(0,eF.jsx)(nx.Z,{type:"primary",className:nq()("lv_sign_in_panel_wide-primary-button"),loading:s,onClick:c,children:tj.oc.t("web_signin_button_continue_signin",{},"Continue")})]})},n4="inviting_email",n5=e=>{let{inviterName:t,inviterImg:i}=e;return(0,eF.jsxs)("div",{className:"invite-info-header",children:[(0,eF.jsx)(nR.Z,{style:{backgroundColor:"var(--lvv-color-text-content-3)"},size:48,children:i&&(0,eF.jsx)("img",{alt:"avatar",src:(0,nN.C)(i,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),crossOrigin:"anonymous"})}),(0,eF.jsx)("div",{className:"invite-info-header-user",children:(0,eF.jsx)("h4",{children:tj.oc.t("web_personal_invite_title",{"color-strong":e=>(0,eF.jsx)("strong",{style:{fontWeight:600},children:e}),placeholder0:t})})})]})},n8=e=>{let{searchParams:t}=new URL(window.location.href),i=t.get(n4),r=t.get("workspaceName");return(0,eF.jsxs)("div",{className:nq()("invite-info-header","team-invite-info-header"),children:[(0,eF.jsx)("div",{className:"invite-info-header-title",children:tj.oc.t("web_signin_title_join_space",{},"Join space")}),(0,eF.jsx)("div",{className:"invite-info-header-text",children:(()=>{if("invite"===e.type){var t,n,o;return(0,eF.jsx)(eF.Fragment,{children:i?tj.oc.t("web_space_apply_text_use_email",{string0:i,string1:null===(t=e.joinInfo)||void 0===t?void 0:t.workspaceName},"{string0} invites you to join {string1}."):tj.oc.t("web_signin_desc_join_space",{string0:(0,eF.jsx)("strong",{children:null===(n=e.joinInfo)||void 0===n?void 0:n.inviterNickName}),string1:(0,eF.jsx)("strong",{children:null===(o=e.joinInfo)||void 0===o?void 0:o.workspaceName})},"{string0} invites you to join {string1}.")})}return"apply"===e.type?(0,eF.jsx)(eF.Fragment,{children:r?tj.oc.t("web_space_apply_button_join_space",{string0:r},"Request to join {string0}\u2019s space"):""}):(0,eF.jsx)(eF.Fragment,{})})()})]})};var n7=i("406617");let n9=e=>{let{thirdPartSignIn:t,isFromModal:i,showTeamInviteInfo:r,title:n,toEmailSignIn:o,toEmailLogIn:a}=e,s=(0,nM.t)(),[l]=(0,nw.L)(s);l.context.thirdPartSignInRef;let c=l.context.emailSignInRef,[,d]=(0,nw.L)(c),u=(0,nX.v)(c,e=>e.context.email),p=l.context.teamInviteRef,[_]=(0,nw.L)(p),{workspaceInfo:g}=_.context,h=l.context.userInviteRef,[m]=(0,nw.L)(h),{isInvitePage:v,invitedCode:f,inviteDetail:y}=m.context,w=v&&f,{isFromTeamInvite:b,isFromTeamApply:S}=n2(),C=(0,eB.useRef)((0,n7.S7)().isMobile);return(0,eF.jsx)("div",{className:nq()("lv_sign_in_panel_wide_base_page",{modal:i,mobile:C.current}),children:(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide_base_page-content",children:[!i&&(0,eF.jsx)("img",{className:"lv_sign_in_panel_wide_base_page-logo",src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/capcut-logo-dark.png",width:119,height:"auto",draggable:!1,crossOrigin:"anonymous"}),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide_base_page-main-content",children:[(0,eF.jsx)(()=>w?(0,eF.jsx)(n5,{inviterImg:null==y?void 0:y.inviterImg,invitedSpaceCap:null==y?void 0:y.invitedSpaceCap,inviterName:null==y?void 0:y.inviterName}):b?(0,eF.jsx)(n8,{type:"invite",joinInfo:{workspaceName:null==g?void 0:g.name,inviterNickName:null==g?void 0:g.inviter_nickname}}):S?(0,eF.jsx)(n8,{type:"apply"}):(0,eF.jsx)("h2",{className:"lv_sign_in_panel_wide_base_page-title",children:(null==n?void 0:n.length)?n:tj.oc.t("web_signin_title_signin_capcut",{},"Welcome to CapCut")}),{}),!i&&!r&&!w&&(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide_base_page-subtitle",children:tj.oc.t("web_signin_desc_signin_capcut",{},"Sign in to unlock all features")}),t,(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide_base_page-or-line",children:(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide_base_page-or-line-label",children:tj.oc.t("web_signin_text_other_ways_signin",{},"OR")})}),(0,eF.jsx)("div",{children:(0,eF.jsx)(n3,{send:d,email:u,toEmailSignIn:o,toEmailLogIn:a})})]}),(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-policy",children:tj.oc.t("web_signin_text_continue_agreement",{strong0:e=>e,href0:e=>{var t;return(0,eF.jsx)("a",{target:"__blank",id:"termsOfCapCut",href:n0.yM.TERMS_OF_CAPCUT({region:null===(t=l.context.userInfo)||void 0===t?void 0:t.region,lang:tj.oc.language}),className:"policy",children:e},"terms-of-user")},href1:e=>{var t;return(0,eF.jsx)("a",{target:"_blank",id:"privacyPolicy",href:n0.yM.PRIVACY_POLICY({region:null===(t=l.context.userInfo)||void 0===t?void 0:t.region,lang:tj.oc.language}),className:"policy",rel:"noreferrer",children:e},"privacy-policy")}},"By clicking <strong0>Continue</strong0>, you accept the <href0>Terms of Use</href0> and <href1>Privacy Policy</href1>.")})]})})};var oe=i("966090");let ot=e=>{let{defaultEmail:t,defaultPassword:i,disableBtton:r=!1}=e,[n,o]=(0,eB.useState)(t||""),[a,s]=(0,eB.useState)(i||""),[l,c]=(0,eB.useState)(!1),d=(0,eB.useRef)(null),u=t=>{var i;o(t),null===(i=e.onEmailChange)||void 0===i||i.call(e,t)},p=t=>{var i;s(t),null===(i=e.onPasswordChange)||void 0===i||i.call(e,t)};(0,eB.useEffect)(()=>{u(n),p(a)},[]);let _=()=>{e.onSignIn(n,a)},{emailWarn:g,passwordWarn:h,confirmText:m,loading:v}=e;return(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-content",children:(0,eF.jsx)("form",{children:(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-form",children:[(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_wide-form-email"),children:[(0,eF.jsx)(n6.Z,{className:nq()("lv_sign_in_panel_wide-input",{"lv_sign_in_panel_wide-input-warn ":""!==g}),value:n,placeholder:tj.oc.t("web_signin_placeholder_enter_email",{},"Enter email"),onChange:u,onPressEnter:()=>{var e,t;null===(t=d.current)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t)}}),""!==g?(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-warn",children:g}):null]}),(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_wide-form-password",{"lv_sign_in_panel_wide-form-password-warn":""!==h}),children:[(0,eF.jsx)(n6.Z,{ref:d,type:l?"text":"password",className:"lv_sign_in_panel_wide-input-without-default",value:a,placeholder:tj.oc.t("web_signin_placeholder_enter_password",{},"Enter password"),onChange:p,onPressEnter:_,suffix:l?(0,eF.jsx)(nL.bEM,{onClick:()=>{c(!1)}}):(0,eF.jsx)(nL.lLW,{onClick:()=>{c(!0)}})}),""!==h?(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-warn",children:h}):null]}),(0,eF.jsx)(nx.Z,{className:"lv_sign_in_panel_wide-sign-in-button lv_sign_in_panel_wide-primary-button",type:"primary",size:"large",onClick:_,loading:v,disabled:r,children:m})]})})})},oi=e=>(0,eF.jsxs)("div",{className:"back_to_third_party",...e,children:[(0,eF.jsx)("span",{className:"back_to_third_party-btn lv_sign_in_panel_wide-secondary-button",children:(0,eF.jsx)(nL.JJ,{className:"back_to_third_party-icon"})}),(0,eF.jsx)("span",{className:"back_to_third_party-label",children:tj.ZP.t("web_signin_button_go_back_signin",{action0:e=>e},"Go back")})]});var or=i("394567");let on=e=>{let{toForgetPwd:t}=e;return(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-log-in-footer",children:(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-forget-container",children:(0,eF.jsx)("div",{onClick:t,className:"forget-pwd-btn",children:tj.oc.t("web_signin_button_forgot_password",{},"Forgot password?")})})})},oo=e=>{let{toForgetPwd:t,toBasePage:i}=e,r=(0,nM.t)(),[n]=(0,nw.L)(r),o=n.context.emailSignInRef,a=n.context.loginReportParams,[s,l]=(0,nw.L)(o),[c,d]=(0,eB.useState)(""),[u,p]=(0,eB.useState)(""),[_,g]=(0,eB.useState)(!1),h=(0,nX.v)(o,e=>e.matches("signInSuccess")),m=e=>{l({type:"RESTORE_ACCOUNT",token:e,restoreType:1})},v=e=>{new oe.S().report({action:e,current_page:(null==a?void 0:a.currentPage)||"login"})},f=e=>{let t=tN.Z.confirm({focusLock:!1,className:"lv_sign_in_panel_wide-restore-account",title:(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-restore-account-title",children:[(0,eF.jsx)(nL.rLP,{size:24,color:"#2668FF"}),tj.oc.t("web_deactivate_button_delete_restore",{},"Restore deleted account")]}),content:(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-restore-account-content",children:tj.oc.t("web_deactivate_text_trying_sign_into",{},"You\u2019re trying to sign into a deleted account. By signing in, your account will be restored. If you don\u2019t restore the account, it will be permanently deleted in 30 days.")}),maskStyle:{zIndex:1103},wrapStyle:{zIndex:1103},onOk:()=>{v("restore"),m(e),t.close()},onCancel:()=>v("cancel"),okText:tj.oc.t("web_deactivate_button_restore_confirm",{},"Restore account"),cancelText:tj.oc.t("web_deactivate_button_cancel_restore",{},"Cancel"),okButtonProps:{type:"primary"},icon:null,closeIcon:(0,eF.jsx)(nL.bMz,{size:20,onClick:()=>v("cancel")})})};return(0,eB.useEffect)(()=>{l({type:"INIT_LOGIN_ERROR_CB",func:(e,t)=>{var i;let r=parseInt(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.message,10);r===or.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_NOT_EXITE||r===or.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.PASSWORD_WRONG?p(tj.oc.t("web_signin_error_text_valid_email",{},"Enter a valid email or password")):t&&r===or.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_ACCOUNT_CANCEL?(v("show"),f(t)):t$.Z.error(tj.oc.t("log_fail_try_again")),g(!1)}})},[]),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-detail",children:[(0,eF.jsx)(oi,{onClick:i}),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-detail-content",children:[(0,eF.jsx)("h2",{className:"lv_sign_in_panel_wide-title",children:tj.oc.t("web_signin_title_welcome_back",{},"Welcome back")}),(0,eF.jsx)(ot,{disableBtton:h,loading:!h&&_,defaultEmail:s.context.email,defaultPassword:s.context.password,confirmText:tj.oc.t("web_signin_button_sign_in",{},"Sign in"),emailWarn:c,passwordWarn:u,onEmailChange:e=>{l({type:"SAVE_EMAIL",email:e}),""===e||n1.s9.test(e.trim())?d(""):d(tj.oc.t("email_contain_at")),u===tj.oc.t("web_signin_error_text_valid_email",{},"Enter a valid email of password")&&p("")},onPasswordChange:e=>{l({type:"SAVE_PASSWORD",password:e}),""===e||n1.lI.test(e)?p(""):p(tj.oc.t("set_password_rule"))},onSignIn:(e,t)=>{if(""===e||""===t){""===e&&d(tj.oc.t("fill_the_text")),""===t&&p(tj.oc.t("fill_the_text"));return}if(""===c&&""===u)l({type:"CONFIRM_SIGN",email:e,password:t}),g(!0)}}),(0,eF.jsx)(on,{toForgetPwd:t})]})]})};i("353772");var oa=i("638432"),os=i("199000"),ol=i("59426");class oc{report(e){this.reporter.report("edm_status",e)}constructor(){this.reporter=(0,nF.y)()}}let od=e=>{let{toLogIn:t,isInvitePage:i}=e;return(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-sign-up-footer",children:!i&&(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-footer-switch",children:[(0,eF.jsx)("span",{className:"lv_sign_in_panel_wide-footer-switch-text",children:tj.ZP.t("web_signin_text_have_account",{},"Already have an account?")}),(0,eF.jsx)("span",{onClick:t,className:"lv_sign_in_panel_wide-footer-switch-button",children:tj.ZP.t("web_signin_button_siginin_old_account",{},"Sign in")})]})})},ou=e=>{let{toLogIn:t,toBasePage:i}=e,r=(0,nM.t)(),[n,o]=(0,nw.L)(r),[a,s]=(0,nw.L)(n.context.emailSignInRef),[l,c]=(0,eB.useState)(""),[d,u]=(0,eB.useState)(""),[p,_]=(0,eB.useState)(!1),g=n.context.userInviteRef,[h]=(0,nw.L)(g),{isInvitePage:m}=h.context,{searchParams:v}=new URL(window.location.href),f=(0,oa.default)(!1),y=(0,oa.default)(!1);return(0,eB.useEffect)(()=>{var e;if(!["DE","LU","NO","CH","AT","GR","BR","US","MX","CA"].includes(null!==(e=window.__locationCountryCode)&&void 0!==e?e:""))y.setTrue()},[]),(0,eB.useEffect)(()=>{s({type:"INIT_SEND_CODE_ERROR_CB",func:e=>{var t;let i=parseInt(null===(t=e.data)||void 0===t?void 0:t.message,10);_(!1),i===or.B.SIGN_UP_CODE.SEND_CODE_ERROR_CODE.EMAIL_ERROR?c(tj.ZP.t("email_contain_at")):i===or.B.SIGN_UP_CODE.SEND_CODE_ERROR_CODE.SENDING_FREQUENTLY?t$.Z.error(tj.ZP.t("many_code_later")):t$.Z.error(tj.ZP.t("fail_sign_try_again")),s({type:"BACK_TO_FILL_REGISTER_INFO"})}})},[]),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-detail","data-lv-theme-force":"light",children:[(0,eF.jsx)(oi,{onClick:i}),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-detail-content",children:[(0,eF.jsx)("h2",{className:"lv_sign_in_panel_wide-title",children:tj.ZP.t("web_signin_title_create_account",{},"Create an account")}),(0,eF.jsx)(ot,{defaultEmail:v.get(n4)||a.context.email,defaultPassword:a.context.password,confirmText:tj.ZP.t("sign_up"),emailWarn:l,passwordWarn:d,loading:p,onEmailChange:e=>{s({type:"SAVE_EMAIL",email:e}),""===e||n1.s9.test(e.trim())?c(""):c(tj.ZP.t("email_contain_at"))},onPasswordChange:e=>{s({type:"SAVE_PASSWORD",password:e}),""===e||n1.lI.test(e)?u(""):u(tj.ZP.t("set_password_rule"))},onSignIn:(e,t)=>{if(""===e||""===t){""===e&&c(tj.ZP.t("fill_the_text")),""===t&&u(tj.ZP.t("fill_the_text"));return}if(""===l&&""===d){if(n.context.enableDeviceAgeBan&&n.context.ageGateChecker.ageDeviceBan.isBeingBanned()){tN.Z.warning({closable:!1,maskStyle:{zIndex:10003},wrapStyle:{zIndex:10003},title:tj.ZP.t("web_age_gate_too_yong_title",{},"Age requirement not met"),content:tj.ZP.t("web_age_gate_too_yong_desc",{},"Sorry, we are unable to create your account right now. We appreciate you checking us out!"),okText:tj.ZP.t("web_age_gate_too_yong_ok_button",{},"OK")});return}_(!0),y.state&&o({type:"SET_USER_LOGINED_CB",callback:()=>{if(f.state){let e=new oc,t={is_edm:1,enter_from:"sign up"};ol.B.edmAuthorize({checked:!0}).then(()=>{e.report({...t,status:"success"})}).catch(i=>{var r;let{data:n}=i;e.report({...t,status:"fail",fail_reason:`ret: ${n.ret}  errmsg: ${null!==(r=n.errmsg)&&void 0!==r?r:""}`})})}}}),s({type:"NEXT",email:e,password:t,emailHasRegisterCb:()=>{_(!1),c(tj.ZP.t("email_ registered"))},onError:e=>{_(!1),1031===e.error_code?c(tj.ZP.t("email_contain_at")):t$.Z.error(tj.ZP.t("fail_sign_try_again"))}})}}}),y.state?(0,eF.jsx)("div",{style:{marginTop:"16px",whiteSpace:"normal",textAlign:"left"},children:(0,eF.jsx)(os.Z,{className:"edm-auth-checkbox",value:f.state,onChange:e=>{e?f.setTrue():f.setFalse()},children:tj.ZP.t("web_edm_authorization_checkbox_get_email",{},"Get trending content, newsletters, promotions, recommendations, and account updates sent to your email")})}):(0,eF.jsx)(eF.Fragment,{}),(0,eF.jsx)(od,{isInvitePage:m,toLogIn:t})]})]})},op=e=>{let{toLogIn:t,send:i,email:r}=e,[n,o]=(0,eB.useState)(""),[a,s]=(0,eB.useState)(!1);return(0,eF.jsxs)("div",{className:nq()("lv_forget_pwd_panel-content","lv_forget_pwd_panel_email_fill"),children:[(0,eF.jsx)(oi,{onClick:()=>{i("BACK_SIGN_IN"),t()}}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-icon-wrapper",children:(0,eF.jsx)("img",{src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/signin_panel_reset.png",className:"lv_forget_pwd_panel-icon lv_forget_pwd_panel-icon-reset",alt:"ForgetPasswordPNG",crossOrigin:"anonymous"})}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-title lv_forget_pwd_panel-title-reset",children:tj.oc.t("web_signin_title_reset_password",{},"Reset password")}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-description lv_forget_pwd_panel-description-reset",children:tj.oc.t("web_signin_desc_reset_password",{},"We\u2019ll email you a link to reset your password.")}),(0,eF.jsx)("form",{children:(0,eF.jsx)(n6.Z,{value:r,onChange:e=>{i({type:"SAVE_EMAIL",email:e}),e&&!n1.s9.test(e)?o(tj.oc.t("web_signin_error_text_invalid_email",{},"Enter a valid email")):o("")},className:nq()("lv_forget_pwd_panel-input lv_forget_pwd_panel-input-reset lv_sign_in_panel_wide-input",{"lv_sign_in_panel_wide-input-warn":""!==n}),placeholder:tj.oc.t("web_signin_placeholder_enter_email_reset",{},"Enter email")})}),""!==n?(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-warn",children:n}):null,(0,eF.jsx)(nx.Z,{loading:a,onClick:()=>{if(!a){if(!r||!n1.s9.test(r.trim())){o(tj.oc.t("email_contain_at"));return}s(!0),i({type:"INIT_RESET_EMAIL_ERROR_CB",func:e=>{o(e.description),s(!1)}}),i({type:"SEND_EMAIL",email:r,emailNotRegisterCb:()=>{o(tj.oc.t("email_contain_at")),s(!1)},onError:()=>{s(!1)}})}},type:"primary",className:nq()("lv_forget_pwd_panel-btn lv_forget_pwd_panel-btn-reset lv_sign_in_panel_wide-primary-button",{"lv_forget_pwd_panel-email-warn":""!==n}),children:tj.oc.t("web_signin_button_confirm_password",{},"Confirm")})]})},o_=e=>{let{resendEmailCodeCountDown:t,email:i,onBackClick:r,send:n}=e,o=(0,eB.useMemo)(()=>{let e=void 0===t?n1.tF:t;return tj.oc.t("web_signin_desc_send_code",{number0:e},"You can resend the link in {number0} seconds.").replace(/\d+/,e=>`<span class="lv_forget_pwd_panel-count-down-num">${e}</span>`)},[t]);return(0,eF.jsxs)("div",{className:"lv_forget_pwd_panel-resend",children:[(0,eF.jsx)(oi,{onClick:r}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-icon-wrapper ",children:(0,eF.jsx)("img",{className:"lv_forget_pwd_panel-icon lv_forget_pwd_panel-icon-resend",src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/signin_panel_send.png",alt:"ForgetEmailPNG",crossOrigin:"anonymous"})}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-title lv_forget_pwd_panel-title-reset",children:tj.oc.t("web_signin_title_email_sent",{},"Email sent")}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-tip",children:tj.oc.t("web_signin_desc_email_sent",{string0:i},"Your link was emailed to {string0}")}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-resend-footer-container",children:0!==t?(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-count-down",dangerouslySetInnerHTML:{__html:(0,nN.J)(o,null,{logType:"react.dangerouslySetInnerHTML",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}}):(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-resend-btn-container",children:(0,eF.jsx)(nx.Z,{className:"lv_sign_in_panel_wide-primary-button",onClick:()=>{n("RESEND")},children:tj.oc.t("web_signin_button_resend_email",{},"Resend email")})})})]})},og=e=>{let t=!1;return Object.values(n0.b7).forEach(i=>{i.aid===e&&(t=!0)}),t},oh=e=>{let{warning:t,onInputChange:i,placeholder:r,style:n,className:o}=e,a=(0,eB.useRef)(null),[s,l]=(0,eB.useState)(!1);return(0,eB.useEffect)(()=>{var e,i;t.length?null===(e=a.current)||void 0===e||e.dom.classList.add("lv_forget_pwd_panel-warn-input"):null===(i=a.current)||void 0===i||i.dom.classList.remove("lv_forget_pwd_panel-warn-input")},[t]),(0,eF.jsxs)("div",{className:`lv_forget_pwd_panel-input-container ${o}`,style:n,children:[(0,eF.jsx)("form",{children:(0,eF.jsxs)("div",{onMouseEnter:()=>{var e;null===(e=a.current)||void 0===e||e.dom.classList.add("lv_forget_pwd_panel-hover-input")},onMouseLeave:()=>{var e;null===(e=a.current)||void 0===e||e.dom.classList.remove("lv_forget_pwd_panel-hover-input")},className:"lv_forget_pwd_panel-input-wrapper",children:[(0,eF.jsx)(n6.Z,{type:s?"text":"password",ref:a,onBlur:()=>{var e;null===(e=a.current)||void 0===e||e.dom.classList.remove("lv_forget_pwd_panel-hover-input")},onChange:i,className:nq()("lv_sign_in_panel_wide-input",{"lv_sign_in_panel_wide-input-warn":t.length}),placeholder:r}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-input-suffix",children:s?(0,eF.jsx)(nL.bEM,{onMouseDown:e=>{e.preventDefault()},onClick:()=>{var e;null===(e=a.current)||void 0===e||e.focus(),l(!1)}}):(0,eF.jsx)(nL.lLW,{onMouseDown:e=>{e.preventDefault()},onClick:()=>{var e;null===(e=a.current)||void 0===e||e.focus(),l(!0)}})})]})}),t.length&&(0,eF.jsxs)("div",{className:"lv_forget_pwd_panel-warn-text",children:[" ",t," "]})||null]})},om=e=>{let{className:t,toLogIn:i}=e;return(0,eB.useEffect)(()=>{let e=document.getElementById("back-login-btn");e&&(e.onclick=i)},[]),(0,eF.jsxs)("div",{className:nq()(t,"lv_sign_in_panel_wide-footer-switch-text"),children:[tj.oc.t("web_signin_text_go_back_signin",{},"Go back to"),(0,eF.jsx)("span",{id:"back-login-btn",className:"lv_sign_in_panel_wide-footer-switch-button",children:tj.oc.t("web_signin_button_sign_in",{},"Sign in")})]})},ov=e=>{let{toLogIn:t,send:i,appId:r}=e,n=!!r&&og(r),[o,a]=(0,eB.useState)(""),[s,l]=(0,eB.useState)(""),[c,d]=(0,eB.useState)(""),[u,p]=(0,eB.useState)(""),[_,g]=(0,eB.useState)(!1);return(0,eB.useEffect)(()=>{i({type:"INIT_RESET_SUCCESS_CB",func:()=>{t$.Z.success(tj.oc.t("password_reset_successfully")),g(!1)}})},[]),(0,eF.jsxs)("div",{className:nq()("lv_forget_pwd_panel-content","lv_forget_pwd_panel_reset_pwd"),children:[(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-icon-wrapper",children:(0,eF.jsx)("img",{src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/signin_panel_reset.png",className:"lv_forget_pwd_panel-icon lv_forget_pwd_panel-icon-reset",alt:"ForgetPasswordPNG",crossOrigin:"anonymous"})}),(0,eF.jsx)("div",{className:"lv_forget_pwd_panel-title lv_forget_pwd_panel-title-reset",children:tj.oc.t("set_new_password")}),(0,eF.jsx)(oh,{className:"lv_forget_pwd_panel-input-reset  ",warning:c,onInputChange:e=>(a(e),!n1.lI.test(e)&&e?d(tj.oc.t("set_password_rule")):d(""),e),value:o,placeholder:tj.oc.t("web_signin_placeholder_new_password",{},"Enter new password")}),(0,eF.jsx)(oh,{className:nq()("lv_forget_pwd_panel-input-reset-pwd"),warning:u,onInputChange:e=>(l(e),e!==o?p(tj.oc.t("web_signin_error_text_same_password",{},"Enter the same password as the above line")):p(""),e),value:s,placeholder:tj.oc.t("web_signin_placeholder_new_password_again",{},"Enter new password again")}),(0,eF.jsx)(nx.Z,{loading:_,onClick:()=>{if(!!n1.lI.test(o)&&o===s)g(!0),i({type:"CONFIRM_PASSWORD",pwd:s})},type:"primary",className:"lv_forget_pwd_panel-btn lv_forget_pwd_panel-btn-reset lv_sign_in_panel_wide-primary-button",children:tj.oc.t("confirm_key")}),String(r)!==n0.yM.APP_ID&&!n&&(0,eF.jsx)(om,{toLogIn:()=>{i("BACK_SIGN_IN"),t()}})]})},of=e=>{let{toLogIn:t}=e,i=(0,nM.t)(),[r]=(0,nw.L)(i),{appId:n}=r.context,o=r.context.emailSignInRef,[,a]=(0,nw.L)(o),s=(0,nX.v)(o,e=>e.context.step)||n1.GH.FillInEmail,l=(0,nX.v)(o,e=>e.context.email),c=(0,nX.v)(o,e=>e.context.resendEmailCodeCountDown),d=new URLSearchParams(location.search),u=d.get("showType")||"email";return(0,eB.useEffect)(()=>{switch(u){case"email":a("TO_SEND_RESET_EMAIL_INFO");break;case"password":let e=d.get("email"),i=d.get("code");e&&i&&(a({type:"SAVE_PWD_CODE",code:i,email:e}),a({type:"TO_RESET_PASSWORD",func:()=>{t$.Z.warning(tj.oc.t("link_lose_efficacy")),n&&og(n)?setTimeout(()=>{location.href=(0,nN.C)(location.origin,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},1e3):t()}}))}},[u]),(0,eF.jsxs)("div",{className:"lv_forget_pwd_panel",children:[s===n1.GH.FillInEmail?(0,eF.jsx)(op,{send:a,email:l,toLogIn:t}):null,s===n1.GH.ResendEmail?(0,eF.jsx)(o_,{email:l,send:a,resendEmailCodeCountDown:c,toLogIn:t,onBackClick:()=>{a({type:"TO_SEND_RESET_EMAIL_INFO"})}}):null,s===n1.GH.ResetPwd?(0,eF.jsx)(ov,{appId:n,email:l,send:a,toLogIn:t}):null]})};var oy=i("394154"),ow=i("216158"),ob=i("207118"),oS=i("856135");let oC=e=>{let{progress:t,total:i}=e;return(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide_progress-wrapper",children:[(0,eF.jsx)("span",{className:"lv_sign_in_panel_wide_progress-num",children:t})," / ",i]})},ok=e=>{let{isFromModal:t,isMobile:i,isThirdPartFillBirthday:r}=e,n=(0,nM.t)(),[o]=(0,nw.L)(n),a=(0,nX.v)(n,e=>{var t,i;return null!==(i=null===(t=e.context.userInfo)||void 0===t?void 0:t.region)&&void 0!==i?i:ow.yp.US}),s=(0,nX.v)(n,e=>{var t;return null===(t=e.context.ipLocationInfo)||void 0===t?void 0:t.Subdivisions}),l=(0,nX.v)(n,e=>e.context.emailSignInRef),c=o.context.emailSignInRef,d=(0,nX.v)(c,e=>e.context.birthday),u=o.context.thirdPartSignInRef,[,p]=(0,nw.L)(u),[,_]=(0,nw.L)(l),[g,h]=(0,eB.useState)(""),[m,v]=(0,eB.useState)(!1),[f,y]=(0,eB.useState)(!1),w=[{key:"",fallback:""},{key:"web_age_gate_jan",fallback:"January"},{key:"web_age_gate_feb",fallback:"February"},{key:"web_age_gate_mar",fallback:"March"},{key:"web_age_gate_apr",fallback:"April"},{key:"web_age_gate_may",fallback:"May"},{key:"web_age_gate_jun",fallback:"June"},{key:"web_age_gate_jul",fallback:"July"},{key:"web_age_gate_aug",fallback:"August"},{key:"web_age_gate_sep",fallback:"September"},{key:"web_age_gate_oct",fallback:"October"},{key:"web_age_gate_nov",fallback:"November"},{key:"web_age_gate_dec",fallback:"December"}].map(e=>{let{key:t,fallback:i}=e;return t?tj.ZP.t(t,{},i):t}),b=(0,eB.useCallback)(e=>{h(e)},[]),S=(0,eB.useCallback)(e=>new Promise(t=>{if(m){t(!1);return}let[i,r,n]=e.split("-").map(e=>Number(e));tN.Z.warning({className:"lv_sign_in_panel_wide-birthday-modal",maskStyle:{zIndex:1103},wrapStyle:{zIndex:1103},title:tj.ZP.t("web_age_gate_review_birthdate_title",{},"Review your date of birth"),content:tj.ZP.t("web_age_gate_review_birthdate_desc",{date:`${w[r]} ${n}, ${i}`},`You entered: ${w[r]} ${n}, ${i}`),okText:tj.ZP.t("web_age_gate_review_birthdate_ok_btn",{},"OK"),onOk:()=>{v(!0),t(!0)},onCancel:()=>{v(!0),t(!0)}})}),[m]),C=(0,eB.useCallback)(async()=>{var e;let t=(0,oS.Ig)(a,g,(null==s?void 0:null===(e=s.map)||void 0===e?void 0:e.call(s,e=>e.GeoNameID))||[]),[i,l,c]=g.split("-").map(e=>Number(e));if(!((0,oS.tN)(g)&&await S(g))){if(t){if(r){p({type:"SET_THIRD_PARTY_BIRTHDAY",birthday:g});return}n.send({type:"UPDATE_REPORT_PARAMS",params:{age_year:i,age_month:l,age_date:c}}),_({type:"CONFIRM_BIRTHDAY",value:g,region:a})}else o.context.ageGateChecker.ageDeviceBan.ban(),tN.Z.warning({className:"lv_sign_in_panel_wide-birthday-modal",maskStyle:{zIndex:1103},wrapStyle:{zIndex:1103},closable:!1,title:tj.ZP.t("web_age_gate_too_yong_title",{},"Age requirement not met"),content:tj.ZP.t("web_age_gate_too_yong_desc",{},"Sorry, we are unable to create your account right now. We appreciate you checking us out!"),okText:tj.ZP.t("web_age_gate_too_yong_ok_button",{},"OK"),onOk:()=>{if(r){p({type:"AUTH_FAIL"});return}_("RETURN_SIGN_IN")}});new oy.S().report({action:"next",age_year:i,age_month:l,age_date:c})}},[a,g,n,_,m]);return(0,eB.useEffect)(()=>{new oy.S().report({action:"show"})},[]),(0,eB.useMemo)(()=>{if(!g)return!1;let e=(0,oS.ZN)(g),t=Number(null==g?void 0:g.split("-")[0]);return t>=1e3&&t>=new Date().getFullYear()-130&&t<new Date().getFullYear()+1&&!e},[g]),(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_wide-enter-code-wrapper"),children:[(0,eF.jsx)(oi,{style:{top:40,zIndex:99},onClick:()=>{if(r){p({type:"AUTH_FAIL"});return}_({type:"RETURN_SIGN_IN"})}}),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-birthday-detail",children:[(0,eF.jsx)(oC,{progress:1,total:t||i?2:3}),(0,eF.jsx)("img",{className:"lv_sign_in_panel_wide-birthday-cover",src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/signin_panel_birthday.png",alt:tj.ZP.t("web_age_gate_title",{},"When\u2019s your birthday?"),crossOrigin:"anonymous"}),(0,eF.jsx)("h2",{className:"lv_sign_in_panel_wide-birthday-title",children:tj.ZP.t("web_age_gate_title",{},"When\u2019s your birthday?")}),(0,eF.jsx)("p",{className:"lv_sign_in_panel_wide-birthday-subtitle",children:tj.ZP.t("web_age_gate_desc",{},"Your birthday won\u2019t be shown publicly.")}),(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-birthday-picker",children:(0,eF.jsx)(ob.i,{mode:"custom",theme:n$.Q.Light,birthdayStr:d,onChange:b,setIsBirthdayValid:y})}),(0,eF.jsx)(nx.Z,{className:"lv_sign_in_panel_wide-birthday-next lv_sign_in_panel_wide-primary-button",disabled:""===g||!f,type:"primary",onClick:C,children:tj.ZP.t("web_age_gate_next_btn",{},"Next")}),m?(0,eF.jsx)("p",{className:"lv_sign_in_panel_wide-birthday-desc",children:tj.ZP.t("web_age_gate_edit_date_note",{},'If this date is correct, tap "Next". If needed, you can edit the date before continuing.')}):null]})]})};i("827782");var oE=i("835628"),oI=i("81946"),oT=i("598565");i("956616");let oP=e=>{let{title:t,desc:i,subTitle:r,content:n,imgSrc:o,imgWebp:a,modalImg:s,isFromModal:l}=e;return(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_left_carousel_page"),children:[(0,eF.jsx)("div",{className:"lv_sign_in_panel_left_carousel_img_wrapper",children:(0,eF.jsx)(oT.Z,{src:l?s:o,responsiveImageWebp:l?void 0:{srcSet:a},alt:"login panel carousel picture",height:"100%",width:"100%",style:{height:"100%",width:"100%"},imgStyle:{height:"100%",width:"100%",objectFit:"cover",objectPosition:"center"}})}),(0,eF.jsx)("h2",{className:"lv_sign_in_panel_left_carousel_title",children:t}),r?(0,eF.jsx)("h3",{className:"lv_sign_in_panel_left_carousel_subtitle",children:r}):null,n?(0,eF.jsx)("div",{className:"lv_sign_in_panel_left_carousel_content",children:n}):null,!l&&(0,eF.jsx)("p",{className:"lv_sign_in_panel_left_carousel_desc",children:i})]})},oA=e=>{let{isFromModal:t,firstPageIndex:i=0,resourceList:r=[]}=e,n=()=>[{title:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_title_stunning_videos",{strong0:e=>(0,eF.jsx)("strong",{children:e},"strong0")},"Create stunning videos online with unlimited possibilities")}),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_stunning_videos",{},"Craft masterpieces with keyframes, speed curves, and more! From novices to experts, we empower your creativity.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/6cbffc0644f2011cc0087b6379fe297d.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/6cbffc0644f2011cc0087b6379fe297d.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-1.png"},{title:tj.ZP.t("web_signin_title_brilliant_images",{strong0:e=>(0,eF.jsx)("strong",{children:e},"strong0")},"Make high-quality images effortlessly"),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_brilliant_images",{},"Top features at your fingertips! Craft multi-page designs, enjoy smart color themes, and resize your pages smoothly.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/97148902b0919c6f29fd34d2e56bd0bf.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/97148902b0919c6f29fd34d2e56bd0bf.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-2.png"},{title:tj.ZP.t("web_signin_title_million_templates",{strong0:e=>(0,eF.jsx)("strong",{children:e},"strong0")},"Millions of video and image templates for all your design needs"),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_million_templates",{},"Find your perfect template from millions available - designed for social promotions, vlogs, lifestyle showcases, and more.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/3c610623884eb6883d10746c0c5173c4.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/3c610623884eb6883d10746c0c5173c4.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-3.png"},{title:tj.ZP.t("web_signin_title_ai_power",{strong0:e=>(0,eF.jsx)("strong",{children:e},"strong0")},"Magic tools: smartly edit and process your footage"),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_ai_power",{},"Discover the effortless route to polished content with our cutout, upscaler, and automatic image generation tools.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/51d58d1206ffb41072c008bde7ead07b.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/51d58d1206ffb41072c008bde7ead07b.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-4.png"},{title:tj.ZP.t("web_signin_title_share_review",{strong0:e=>(0,eF.jsx)("strong",{children:e},"strong0")},"Share and review projects with your team in real time"),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_share_review",{},"Cloud collaboration for efficient teamwork; share projects instantly for fast reviews and quick presentation.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/5994623b142cee9e54c7bfce3b525a6a.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/5994623b142cee9e54c7bfce3b525a6a.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-5.png"}],o=(0,eB.useMemo)(()=>r&&0!==r.length?r:n(),[]),[a,s]=(0,eB.useState)(i),[l,c]=(0,oE.default)(),d=(0,eB.useRef)(null);return(0,eF.jsx)("div",{className:nq()("lv_sign_in_panel_left_carousel_wrapper",{modal:t}),children:(0,eF.jsxs)("div",{className:"lv_sign_in_panel_left_carousel_main",ref:l,children:[(0,eF.jsx)(oI.Z,{className:"lv_sign_in_panel_left_carousel",indicatorType:"line",showArrow:"never",autoPlay:!c&&{interval:5e3,hoverToPause:!1},currentIndex:a,onChange:(e,t)=>{s(e)},carousel:d,animation:"fade",children:o.map((e,i)=>(0,eF.jsx)("div",{children:(0,eF.jsx)(oP,{...e,isFromModal:t})},i))}),o.length>1?(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsx)("div",{className:"lv_sign_in_panel_left_carousel_arrow-left",onClick:()=>{d.current.goto({index:(a-1)%o.length,isManual:!0,isNegative:!0})},children:(0,eF.jsx)(nL.JJ,{fill:"currentColor"})}),(0,eF.jsx)("div",{className:"lv_sign_in_panel_left_carousel_arrow-right",onClick:()=>{d.current.goto({index:(a+1)%o.length,isManual:!0})},children:(0,eF.jsx)(nL.JJ,{fill:"currentColor"})})]}):null]})})};var oR=i("353808");let ox=e=>{let{value:t="",warn:i,size:r,newVersion:n,...o}=e,a=(0,eB.useRef)(null),[s,l]=(0,eB.useState)(!1),c=(0,eB.useMemo)(()=>{let e=String(t).split("").slice(0,6);return e.length<6&&e.push(...Array(6-e.length).fill("")),e},[t]),d=()=>{var e,t;null===(t=a.current)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t)},u=(0,eB.useCallback)(e=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)&&e.preventDefault()},[]),p=e=>!(e.length>1)&&e.replace(/[^a-zA-Z0-9]/g,"");return(0,eB.useEffect)(()=>{d()},[]),(0,eF.jsxs)("div",{className:nq()(r,"verification_code_input-wrapper",{"verification_code_input-wrapper-focus":s},{"verification_code_input-wrapper-new":n}),onClick:()=>{d()},children:[(0,eF.jsx)("div",{className:"verification_code_input-number-wrapper",children:c.slice(0,3).map((e,r)=>(0,eF.jsx)("div",{className:nq()("verification_code_input-number",{"verification_code_input-number-focus":Math.max(t.length,0)===r,"verification_code_input-number-warn":i}),children:e},`${r}-${e}`))}),!n&&(0,eF.jsx)("div",{className:"verification_code_input-number-divider"}),(0,eF.jsx)("div",{className:"verification_code_input-number-wrapper",children:c.slice(3).map((e,r)=>(0,eF.jsx)("div",{className:nq()("verification_code_input-number",{"verification_code_input-number-focus":t.length-3===r,"verification_code_input-number-warn":i}),children:e},`${r+3}-${e}`))}),(0,eF.jsx)(n6.Z,{ref:a,style:{width:"100px",opacity:0,position:"absolute"},maxLength:6,onFocus:()=>{l(!0)},onBlur:()=>{l(!1)},onKeyDown:u,...o,onChange:(e,t)=>{var i;let r=e.split("").map(e=>p(e)).join("");null===(i=o.onChange)||void 0===i||i.call(o,r,t)}})]})},oN=e=>{let{isFromModal:t,isMobile:i}=e,[r,n]=(0,eB.useState)(""),o=(0,nM.t)(),[a,s]=(0,eB.useState)(""),[l,c]=(0,eB.useState)(0),[d,u]=(0,eB.useState)(0),[p]=(0,nw.L)(o),_=p.context.emailSignInRef,[,g]=(0,nw.L)(_),h=(0,nX.v)(_,e=>e.context.email),m=(0,nX.v)(_,e=>e.context.resendEmailCodeCountDown),v=(0,nX.v)(_,e=>e.matches("signUp.sendingEmailCode")),f=(0,eB.useMemo)(()=>{let e=void 0===m?n1.tF:m;return tj.oc.t("web_signin_text_code_sent",{number0:e},"Code sent. You can resend the code in {number0}s.").replace(/\d+/,e=>`<span class="lv_sign_in_panel_wide-code-count-down-num">${e}</span>`)},[m]);(0,eB.useEffect)(()=>{g({type:"INIT_SEND_CODE_ERROR_CB",func:e=>{var t;parseInt(null===(t=e.data)||void 0===t?void 0:t.message,10)===or.B.SIGN_UP_CODE.SEND_CODE_ERROR_CODE.SENDING_FREQUENTLY?t$.Z.error(tj.oc.t("many_code_later")):t$.Z.error(tj.oc.t("fail_sign_try_again")),g({type:"BACK_TO_ENTER_CODE"})}})},[]);let y=(0,eB.useCallback)(e=>{var t;let i=null===(t=e.data)||void 0===t?void 0:t.message;parseInt(i,10)===or.B.SIGN_UP_CODE.REGISTER_ERROR_CODE.CODE_WRONG||parseInt(i,10)===or.B.SIGN_UP_CODE.REGISTER_ERROR_CODE.CODE_EXPIRED?(s(tj.oc.t("web_signin_error_wrong_verification_code",{},"Wrong verification code. Try again.")),c(l+1)):t$.Z.error(tj.oc.t("fail_sign_try_again"))},[l,s,c]);(0,eB.useEffect)(()=>{g({type:"INIT_REGISTER_ERROR_CB",func:y})},[y]),(0,eB.useEffect)(()=>{let e=null;return 10===l&&(e=setTimeout(()=>{c(0)},18e5)),()=>{e&&clearTimeout(e)}},[l]),(0,eB.useEffect)(()=>{let e=null;return 5===d&&(e=setTimeout(()=>{u(0)},18e5)),()=>{e&&clearTimeout(e)}},[d]);let w=()=>{if(!v&&5!==d)u(d+1),g({type:"REPORT_SIGN_IN_ACTION",action:"resend"}),g({type:"RESEND",code:oR.SEND_CODE_TYPE.REGISTER_RETRY})},b=e=>{let t=e||r;if(""===t){s(tj.oc.t("fill_the_text"));return}g({type:"CONFIRM_REGISTER",code:t})};return(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_wide-enter-code-wrapper"),children:[(0,eF.jsx)(oi,{style:{top:40,zIndex:99},onClick:()=>{g({type:"BACK_TO_BIRTHDAY"})}}),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-code-detail",children:[(0,eF.jsx)(oC,{progress:2,total:t||i?2:3}),(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-code-logo"}),(0,eF.jsx)("h2",{className:"lv_sign_in_panel_wide-code-title",children:tj.oc.t("web_age_gate_confirm_email_title",{},"Confirm your email")}),(0,eF.jsx)("span",{className:"lv_sign_in_panel_wide-code-tip",children:tj.oc.t("web_age_gate_confirm_email_desc",{email:` ${h}`},`Your verification code was sent to ${h}`)}),(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_wide-code-input-wrapper",{"lv_sign_in_panel_wide-code-input-wrapper-warn":""!==a}),children:[(0,eF.jsx)(ox,{value:r,onChange:e=>{n(e),s(""),(null==e?void 0:e.length)===6&&b(e)},onPressEnter:b,warn:!!a,size:i?"small":"default"}),""!==a?(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-code-warn",children:a}):null]}),0===m||5===d?(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_wide-code-resend",{disbaled:v||5===d}),children:[tj.oc.t("web_age_gate_no_email",{},"Didn\u2019t receive email?")," ",(0,eF.jsx)("br",{}),tj.oc.t("web_age_gate_no_email_p2",{action0:e=>(0,eF.jsx)("span",{onClick:w,className:nq()("lv_sign_in_panel_wide-code-resend-button"),children:e})},"Check your spam folder or <action0>resend code</action0>")]}):(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-code-count-down",dangerouslySetInnerHTML:{__html:(0,nN.J)(f,null,{logType:"react.dangerouslySetInnerHTML",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}})]})]})};var oL=i("462934"),oO=i("722169");let oM=e=>{let{thirdPartList:t,service:i,handleClick:r,signType:n=nY.logIn,showGoogleBtn:o}=e,[a,s]=(0,nw.L)(i),[l,c]=(0,eB.useState)(o);return(0,eB.useEffect)(()=>{var e,t,i,r,n;!(null===(e=document)||void 0===e?void 0:e.getElementById("g_id_onload"))&&!(0,oO.isNil)(null===(n=window)||void 0===n?void 0:null===(r=n.google)||void 0===r?void 0:null===(i=r.accounts)||void 0===i?void 0:null===(t=i.id)||void 0===t?void 0:t.renderButton)&&c(!1)},[]),(0,eB.useEffect)(()=>{let e=document.getElementById("signinDiv");if(e){var t,i,r,o;null===(o=window)||void 0===o||null===(r=o.google)||void 0===r||null===(i=r.accounts)||void 0===i||null===(t=i.id)||void 0===t||t.renderButton(e,{theme:"outline",size:"large",type:"standard",shape:"rectangular",width:e.clientWidth,text:"continue_with",logo_alignment:"left",click_listener:()=>{s({type:"REPORT_SIGN_IN_ACTION",action:"google",source:n===nY.logIn?nH.C.LoginIn:nH.C.SignUp})},locale:tj.ZP.language})}},[l,s,n]),(0,eF.jsxs)("div",{className:"lv_third_part_sign_in_expand-wrapper",children:[l?(0,eF.jsx)("div",{className:"lv_google_sign_in_btn-expand-wrapper",children:(0,eF.jsx)("div",{id:"signinDiv"})}):(0,eF.jsxs)("div",{className:nq()("lv_third_part_sign_in_expand_new-button"),onClick:()=>r(t[0]),children:[t[0].icon,(0,eF.jsx)("span",{className:"lv_third_part_sign_in_expand-label",children:t[0].label})]},t[0].platformAppId),null==t?void 0:t.slice(1).map(e=>(0,eF.jsxs)("div",{className:nq()("lv_third_part_sign_in_expand_new-button"),onClick:()=>r(e),children:[e.icon,(0,eF.jsx)("span",{className:"lv_third_part_sign_in_expand-label",children:e.label})]},e.platformAppId))]})},oD=e=>{let{service:t,newVersion:i=!1,signType:r=nY.logIn,isBOE:n,accountConfig:o,showGoogleBtn:a,showAppleLogin:s}=e,[l,c]=(0,eB.useState)(a);(0,eB.useEffect)(()=>{var e,t,i,r,n;!(null===(e=document)||void 0===e?void 0:e.getElementById("g_id_onload"))&&!(0,oO.isNil)(null===(n=window)||void 0===n?void 0:null===(r=n.google)||void 0===r?void 0:null===(i=r.accounts)||void 0===i?void 0:null===(t=i.id)||void 0===t?void 0:t.renderButton)&&c(!1)},[]);let d=(0,eB.useMemo)(()=>[{label:tj.ZP.t("web_signin_button_signin_google",{},"Continue with Google"),name:"google",platformAppId:(0,oL.g4)(o,oL.nw.Google,n),icon:(0,eF.jsx)(nL.vYD,{className:"lv_third_part_sign_in_expand-icon"})},{label:tj.ZP.t("web_signin_button_signin_tiktok",{},"Continue with TikTok"),name:"tiktok",platformAppId:(0,oL.g4)(o,oL.nw.TikTok,n),icon:(0,eF.jsx)(nL.$hL,{className:"lv_third_part_sign_in_expand-icon"})},{label:tj.ZP.t("web_signin_button_signin_facebook",{},"Continue with Facebook"),name:"facebook",platformAppId:(0,oL.g4)(o,oL.nw.Facebook,n),icon:(0,eF.jsx)(nL.zJ_,{className:"lv_third_part_sign_in_expand-icon"})},s&&{label:tj.ZP.t("compliance_sheet_button12",{},"Continue with Apple"),name:"apple",platformAppId:(0,oL.g4)(o,oL.nw.Apple,n),icon:(0,eF.jsx)(nO.ACs,{className:"lv_third_part_sign_in_expand-icon"})}].filter(Boolean),[r,n,o,s]),[,u]=(0,nw.L)(t);(0,eB.useEffect)(()=>{let e=document.getElementById("signinDiv");if(e){var t,i,n,o;null===(o=window)||void 0===o||null===(n=o.google)||void 0===n||null===(i=n.accounts)||void 0===i||null===(t=i.id)||void 0===t||t.renderButton(e,{theme:"outline",size:"large",type:"standard",shape:"rectangular",width:e.clientWidth,text:"continue_with",logo_alignment:"left",click_listener:()=>{u({type:"REPORT_SIGN_IN_ACTION",action:"google",source:r===nY.logIn?nH.C.LoginIn:nH.C.SignUp})},locale:tj.ZP.language})}},[l,u,r]);let p=e=>{u({type:"AUTH",platform:e.platformAppId,name:e.name,source:r===nY.logIn?nH.C.LoginIn:nH.C.SignUp}),u({type:"REPORT_SIGN_IN_ACTION",action:e.name})};return i?(0,eF.jsx)(oM,{thirdPartList:d,service:t,handleClick:p,showGoogleBtn:a}):(0,eF.jsx)(eF.Fragment,{children:(0,eF.jsxs)("div",{className:"lv_third_part_sign_in_expand-wrapper",children:[l?(0,eF.jsx)("div",{className:"lv_google_sign_in_btn-expand-wrapper",children:(0,eF.jsx)("div",{id:"signinDiv"})}):(0,eF.jsxs)("div",{className:nq()("lv_third_part_sign_in_expand-button"),onClick:()=>p(d[0]),children:[d[0].icon,(0,eF.jsx)("span",{className:"lv_third_part_sign_in_expand-label",children:d[0].label})]},d[0].platformAppId),null==d?void 0:d.slice(1).map(e=>(0,eF.jsxs)("div",{className:nq()("lv_third_part_sign_in_expand-button"),onClick:()=>p(e),children:[e.icon,(0,eF.jsx)("span",{className:"lv_third_part_sign_in_expand-label",children:e.label})]},e.platformAppId))]})})},oj=e=>{let{service:t,signType:i=nY.logIn,style:r,label:n,newVersion:o}=e,a=(0,nM.t)(),[s]=(0,nw.L)(a),{loginReportParams:l}=s.context,c={label:tj.ZP.t("web_signin_button_signin_capcut_mobile",{},"Continue with CapCut Mobile"),name:"scan_code",platformAppId:nz._K.ScanCode,shouldExpand:!1,icon:(0,eF.jsx)(nL.V2Y,{className:"lv_third_part_sign_in_expand-icon",fill:"#090C14"}),action:"scan_code_click"},[,d]=(0,nw.L)(t),u=e=>{var t;d({type:"AUTH",platform:e.platformAppId,name:e.name,source:i===nY.logIn?nH.C.LoginIn:nH.C.SignUp,scanCodeParams:{enter_from:null==l?void 0:l.pageEnterFrom,current_page:null==l?void 0:l.currentPage,article_type:null==l?void 0:l.articleType,article_title:null==l?void 0:l.articleTitle,tool_type:null==l?void 0:l.toolType}}),d({type:"REPORT_SIGN_IN_ACTION",action:null!==(t=e.action)&&void 0!==t?t:e.name})};return(0,eF.jsxs)("div",{className:nq()(["lv_third_part_sign_in_expand-button","lv_third_part_sign_in_qr_code",{"lv_third_part_sign_in_expand_new-button":o}]),style:r,onClick:()=>u(c),children:[c.icon,(0,eF.jsx)("span",{className:"lv_third_part_sign_in_expand-label",children:null!=n?n:c.label})]},c.platformAppId)},oF=e=>(0,eF.jsxs)("div",{className:"lv_third_part_sign_in_expand-button lv_phone_login_button",onClick:e.onClick,children:[(0,eF.jsx)(nO.Dr9,{className:"lv_third_part_sign_in_expand-icon"}),(0,eF.jsx)("span",{className:"lv_third_part_sign_in_expand-label",children:tj.ZP.t("compliance_sheet_button15",{},"Continue with phone")})]});i("35867");var oU=i("113152");let oB=[{label:"A",lists:[{key:"afghanistan",code:93,region:"AF"},{key:"albania",code:355,region:"AL"},{key:"algeria",code:213,region:"DZ"},{key:"angola",code:244,region:"AO"},{key:"anguilla",code:1264,region:"AI"},{key:"antigua_and_barbuda",code:1268,region:"AG"},{key:"argentina",code:54,region:"AR"},{key:"armenia",code:374,region:"AM"},{key:"australia",code:61,region:"AU"},{key:"austria",code:43,region:"AT"},{key:"azerbaijan",code:994,region:"AZ"}]},{label:"B",lists:[{key:"bahamas",code:1242,region:"BS"},{key:"bahrain",code:973,region:"BH"},{key:"barbados",code:1246,region:"BB"},{key:"belarus",code:375,region:"BY"},{key:"belgium",code:32,region:"BE"},{key:"belize",code:501,region:"BZ"},{key:"bermuda",code:1441,region:"BM"},{key:"bhutan",code:975,region:"BT"},{key:"bolivia",code:591,region:"BO"},{key:"bosnia_and_herzegovina",code:387,region:"BA"},{key:"botswana",code:267,region:"BW"},{key:"brazil",code:55,region:"BR"},{key:"british_virgin_islands",code:1284,region:"VG"},{key:"brunei",code:673,region:"BN"},{key:"bulgaria",code:359,region:"BG"},{key:"burkina_faso",code:226,region:"BF"}]},{label:"C",lists:[{key:"cameroon",code:237,region:"CM"},{key:"canada",code:1,region:"CA"},{key:"cape_verde",code:238,region:"CV"},{key:"cayman_islands",code:1345,region:"KY"},{key:"chad",code:235,region:"TD"},{key:"china",code:86,region:"CN"},{key:"congo_democratic_republic_of",code:243,region:"CD"},{key:"congo_republic_of_the",code:242,region:"CG"},{key:"cote_d_ivoire",code:225,region:"CI"},{key:"croatia",code:385,region:"HR"},{key:"cyprus",code:357,region:"CY"},{key:"czech_republic",code:420,region:"CZ"}]},{label:"D",lists:[{key:"denmark",code:45,region:"DK"},{key:"dominica",code:1767,region:"DM"},{key:"dominican_republic",code:1,region:"DO"}]},{label:"E",lists:[{key:"el_salvador",code:503,region:"SV"},{key:"ecuador",code:593,region:"EC"},{key:"egypt",code:20,region:"EG"},{key:"estonia",code:372,region:"EE"}]},{label:"F",lists:[{key:"fiji",code:679,region:"FJ"},{key:"finland",code:358,region:"FI"},{key:"france",code:33,region:"FR"}]},{label:"G",lists:[{key:"gabon",code:241,region:"GA"},{key:"gambia",code:220,region:"GM"},{key:"georgia_state",code:995,region:"GE"},{key:"germany",code:49,region:"DE"},{key:"ghana",code:233,region:"GH"},{key:"greece",code:30,region:"GR"},{key:"grenada",code:1473,region:"GD"},{key:"guatemala",code:502,region:"GT"},{key:"guinea_bissau",code:245,region:"GW"},{key:"guyana",code:592,region:"GY"}]},{label:"H",lists:[{key:"honduras",code:504,region:"HN"},{key:"hongkong",code:852,region:"HK"},{key:"hungary",code:36,region:"HU"}]},{label:"I",lists:[{key:"iceland",code:354,region:"IS"},{key:"india",code:91,region:"IN"},{key:"indonesia",code:62,region:"ID"},{key:"iraq",code:964,region:"IQ"},{key:"ireland",code:353,region:"IE"},{key:"israel",code:972,region:"IL"},{key:"italy",code:39,region:"IT"}]},{label:"J",lists:[{key:"jamaica",code:1876,region:"JM"},{key:"japan",code:81,region:"JP"},{key:"jordan",code:962,region:"JO"}]},{label:"K",lists:[{key:"cambodia",code:855,region:"KH"},{key:"kazakhstan",code:76,region:"KZ"},{key:"kazakhstan",code:77,region:"KZ"},{key:"kosovo",code:383,region:"XK"},{key:"kuwait",code:965,region:"KW"},{key:"kyrgyzstan",code:996,region:"KG"}]},{label:"L",lists:[{key:"laos",code:856,region:"LA"},{key:"latvia",code:371,region:"LV"},{key:"lebanon",code:961,region:"LB"},{key:"liberia",code:231,region:"LR"},{key:"libya",code:218,region:"LY"},{key:"lithuania",code:370,region:"LT"}]},{label:"M",lists:[{key:"macao",code:853,region:"MO"},{key:"madagascar",code:261,region:"MG"},{key:"malawi",code:265,region:"MW"},{key:"malaysia",code:60,region:"MY"},{key:"maldives",code:960,region:"MV"},{key:"mali",code:223,region:"ML"},{key:"malta",code:356,region:"MT"},{key:"mauritania",code:222,region:"MR"},{key:"mauritius",code:230,region:"MU"},{key:"mexico",code:52,region:"MX"},{key:"moldova",code:373,region:"MD"},{key:"mongolia",code:976,region:"MN"},{key:"montenegro",code:382,region:"ME"},{key:"montserrat",code:1664,region:"MS"},{key:"morocco",code:212,region:"MA"},{key:"myanmar",code:95,region:"MM"}]},{label:"N",lists:[{key:"namibia",code:264,region:"NA"},{key:"nauru",code:674,region:"NR"},{key:"nepal",code:977,region:"NP"},{key:"netherlands",code:31,region:"NL"},{key:"new_zealand",code:64,region:"NZ"},{key:"nicaragua",code:505,region:"NI"},{key:"niger",code:227,region:"NE"},{key:"nigeria",code:234,region:"NG"},{key:"macedonia",code:389,region:"MK"},{key:"norway",code:47,region:"NO"}]},{label:"O",lists:[{key:"oman",code:968,region:"OM"}]},{label:"P",lists:[{key:"pakistan",code:92,region:"PK"},{key:"palau",code:680,region:"PW"},{key:"panama",code:507,region:"PA"},{key:"papua_new_guinea",code:675,region:"PG"},{key:"paraguay",code:595,region:"PY"},{key:"peru",code:51,region:"PE"},{key:"philippines",code:63,region:"PH"},{key:"poland",code:48,region:"PL"},{key:"portugal",code:351,region:"PT"}]},{label:"Q",lists:[{key:"qatar",code:974,region:"QA"}]},{label:"R",lists:[{key:"romania",code:40,region:"RO"},{key:"russia",code:7,region:"RU"},{key:"rwanda",code:250,region:"RW"},{key:"republic_of_korea",code:82,region:"KR"}]},{label:"S",lists:[{key:"sao_tome_and_principe",code:239,region:"ST"},{key:"saudi_arabia",code:966,region:"SA"},{key:"senegal",code:221,region:"SN"},{key:"serbia",code:381,region:"RS"},{key:"seychelles",code:248,region:"SC"},{key:"sierra_leone",code:232,region:"SL"},{key:"singapore",code:65,region:"SG"},{key:"slovakia",code:421,region:"SK"},{key:"slovenia",code:386,region:"SI"},{key:"solomon_islands",code:677,region:"SB"},{key:"south_africa",code:27,region:"ZA"},{key:"spain",code:34,region:"ES"},{key:"sri_lanka",code:94,region:"LK"},{key:"st_lucia",code:1758,region:"LC"},{key:"st_vincent_and_grenadines",code:1784,region:"VC"},{key:"swaziland",code:268,region:"SZ"},{key:"sweden",code:46,region:"SE"}]},{label:"T",lists:[{key:"taiwan",code:886,region:"TW"},{key:"tajikistan",code:992,region:"TJ"},{key:"tanzania",code:255,region:"TZ"},{key:"thailand",code:66,region:"TH"},{key:"tonga",code:676,region:"TO"},{key:"trinidad_and_tobago",code:1868,region:"TT"},{key:"tunisia",code:216,region:"TN"},{key:"turkey",code:90,region:"TR"},{key:"turkmenistan",code:993,region:"TM"},{key:"turks_and_caicos_islands",code:1649,region:"TC"}]},{label:"U",lists:[{key:"uganda",code:256,region:"UG"},{key:"ukraine",code:380,region:"UA"},{key:"united_arab_emirates",code:971,region:"AE"},{key:"united_kingdom",code:44,region:"UK"},{key:"united_states",code:1,region:"US"},{key:"uruguay",code:598,region:"UY"},{key:"uzbekistan",code:998,region:"UZ"}]},{label:"V",lists:[{key:"vanuatu",code:678,region:"VU"},{key:"venezuela",code:58,region:"VE"},{key:"vietnam",code:84,region:"VN"}]},{label:"Y",lists:[{key:"yemen",code:967,region:"YE"}]},{label:"Z",lists:[{key:"zambia",code:260,region:"ZM"},{key:"zimbabwe",code:263,region:"ZW"}]}],oH=e=>{let t=(0,nM.t)(),[i,r]=(0,nw.L)(t),n=i.context.emailSignInRef,{loginReportParams:o}=i.context,[,a]=(0,nw.L)(n),[s,l]=(0,eB.useState)([]),[c,d]=(0,eB.useState)({}),[u,p]=(0,eB.useState)(""),[_,g]=(0,eB.useState)(""),[h,m]=(0,eB.useState)(""),[v,f]=(0,eB.useState)(0),[y,w]=(0,eB.useState)(!1),b=e=>{f(e),e>0&&window.setTimeout(()=>{b(e-1)},1e3)},S=e=>{a({type:"RESTORE_ACCOUNT",token:e,restoreType:1})},C=e=>{new oe.S().report({action:e,current_page:(null==o?void 0:o.currentPage)||"login"})},k=e=>{let t=tN.Z.confirm({focusLock:!1,className:"lv_sign_in_panel_wide-restore-account",title:(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-restore-account-title",children:[(0,eF.jsx)(nL.rLP,{size:24,color:"#2668FF"}),tj.oc.t("web_deactivate_button_delete_restore",{},"Restore deleted account")]}),content:(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-restore-account-content",children:tj.oc.t("web_deactivate_text_trying_sign_into",{},"You\u2019re trying to sign into a deleted account. By signing in, your account will be restored. If you don\u2019t restore the account, it will be permanently deleted in 30 days.")}),maskStyle:{zIndex:1103},wrapStyle:{zIndex:1103},onOk:()=>{C("restore"),S(e),t.close()},onCancel:()=>C("cancel"),okText:tj.oc.t("web_deactivate_button_restore_confirm",{},"Restore account"),cancelText:tj.oc.t("web_deactivate_button_cancel_restore",{},"Cancel"),okButtonProps:{type:"primary"},icon:null,closeIcon:(0,eF.jsx)(nL.bMz,{size:20,onClick:()=>C("cancel")})})};return(0,eB.useEffect)(()=>{var e,t;let i=window.__locationCountryCode||(null===(t=window.ip_location_info)||void 0===t?void 0:null===(e=t.Country)||void 0===e?void 0:e.Code),r={},n=[];oB.map(e=>e.lists).flat().forEach(e=>{n.push({value:e.region,label:tj.oc.t(e.key,{},e.key)}),r[e.region]={code:"+"+e.code,output:`${e.region} +${e.code}`},i===e.region&&p(e.region)}),l(n),d(r)},[]),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-detail lv_phone_login_detail",children:[(0,eF.jsx)(oi,{onClick:e.toBasePage}),(0,eF.jsxs)("div",{className:"lv_sign_in_panel_wide-detail-content",children:[(0,eF.jsx)("h2",{className:"lv_sign_in_panel_wide-title lv_phone_login_detail-title",children:tj.oc.t("compliance_sheet_button15",{},"Continue with phone")}),(0,eF.jsx)("div",{className:"lv_phone_login_detail-desc",children:tj.oc.t("compliance_sheet_desc16",{},"If you cannot log into your account, please contact us at capcut.support@bytedance.com")}),(0,eF.jsxs)(n6.Z.Group,{compact:!0,children:[(0,eF.jsx)(oU.Z,{options:s,value:u,renderFormat:e=>{var t;return null===(t=c[(null==e?void 0:e.value)||""])||void 0===t?void 0:t.output},dropdownMenuStyle:{maxHeight:"248px"},triggerProps:{autoAlignPopupMinWidth:!0,autoAlignPopupWidth:!1,position:"bl"},onChange:e=>p(e)}),(0,eF.jsx)(n6.Z,{className:"lv_phone_login_detail-input",placeholder:tj.oc.t("compliance_sheet_placeholder_phonenumber",{},"Phone number"),value:_,onChange:e=>g(e)})]}),(0,eF.jsxs)(n6.Z.Group,{compact:!0,children:[(0,eF.jsx)(n6.Z,{className:"lv_phone_login_detail-input",placeholder:tj.oc.t("compliance_sheet_placeholder_enter6digitcode",{},"Enter 6-digit code"),value:h,onChange:e=>m(e)}),(0,eF.jsx)(nx.Z,{disabled:!u||!_||v>0,onClick:()=>{var e,t,r;if(v>0)return;let n=null===(e=c[u])||void 0===e?void 0:e.code;null===(t=(r=i.context).passport)||void 0===t||t.call(r).then(e=>{e.sendPhoneCode({mobile:n+_,extra_params:{is6Digits:1}}).then(e=>{b(e.retry_time)}).catch(e=>{t$.Z.error(e.description||tj.oc.t("web_network_error",{},"An error occurred. Try again later."))})})},children:v>0?tj.oc.t("compliance_sheet_button_resendins",{num:v},"Resend in {num}s"):tj.oc.t("compliance_sheet_button_sendcode",{},"Send code")})]}),(0,eF.jsx)(nx.Z,{className:"lv_phone_login_detail-submit",long:!0,type:"primary",disabled:!u||!_||6!==h.length,loading:y,onClick:()=>{var e,t,n;let o=null===(e=c[u])||void 0===e?void 0:e.code;w(!0),null===(t=(n=i.context).passport)||void 0===t||t.call(n).then(e=>{e.phoneCodeLogin({mobile:o+_,code:h,login_only:!0}).then(()=>{w(!1),r({type:"SIGN_IN_SUCCESS",params:{source:nH.C.LoginIn,type:"phone"},extra:{isNewSignupUser:!1}})}).catch(e=>{w(!1);let{error_code:t,description:i,token:r}=e;if(r&&t===or.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_ACCOUNT_CANCEL){k(r);return}t$.Z.error(e.description||tj.oc.t("web_network_error",{},"An error occurred. Try again later."))})})},children:tj.oc.t("compliance_sheet_button_continue",{},"Continue")})]})]})},oG=e=>{let{isFromModal:t,center:i,signType:r=nY.signUp,onLoginSuccess:n,toSignUpCb:o,toLogInCb:a,toForgetPwdCb:s,onClose:l,params:c,isMobile:d=!1,resourceList:u,title:p,showAppleLogin:_,showPhoneLogin:g,hideQrcodeLogin:h}=e,m=(0,nM.t)(),[v,f]=(0,nw.L)(m),{loginReportParams:y,appId:w}=v.context,b=v.context.emailSignInRef,S=v.context.thirdPartSignInRef,C=v.context.teamInviteRef,k=v.context.userInviteRef,[E]=(0,nw.L)(k),[I,P]=(0,nw.L)(C),[A,R]=(0,nw.L)(b),[x,N]=(0,nw.L)(S),L=(0,nX.v)(m,e=>e.context.isBOE),O=(0,nX.v)(b,e=>e.context.source),M=(0,nX.v)(b,e=>e.context.currentWindow);(0,nX.v)(m,e=>e.context.enableThirdPartySignAgeGate);let D=(0,nX.v)(m,e=>{var t,i;return null===(i=e.context)||void 0===i?void 0:null===(t=i.inviteInfo)||void 0===t?void 0:t.isInvitePage}),j=(0,nX.v)(m,e=>e.context.passport),[F,U]=(0,eB.useState)(!1),[B,H]=(0,eB.useState)(!1),G=new URLSearchParams(window.location.search),W=["fillBirthday.fillingBirthday","fillingBirthday"].some(x.matches),{isFromTeamInvite:V,isFromTeamApply:Z}=n2(),z=V||Z;(0,eB.useEffect)(()=>{f({type:"UPDATE_REPORT_PARAMS",params:{pageEnterFrom:(null==y?void 0:y.pageEnterFrom)||"",currentPage:(null==y?void 0:y.currentPage)||"",statusEnterFrom:(null==y?void 0:y.statusEnterFrom)||"",...c}})},[]),(0,eB.useEffect)(()=>{let e=G.get("redirect_url");V&&e&&P({type:"REFRESH",newLink:`${location.origin}${decodeURIComponent(e)}`})},[]),(0,eB.useEffect)(()=>{R({type:"INIT_LOGIN_SUCCESS_CB",func:()=>{null==n||n()}}),N({type:"INIT_LOGIN_SUCCESS_CB",func:()=>{null==n||n()}})},[]),(0,eB.useEffect)(()=>{switch(r){case nY.logIn:R("TO_SIGN_IN");break;case nY.signUp:R("TO_SIGN_UP");break;case nY.forgetPwd:R("TO_FORGET_PWD")}},[r]),(0,eB.useEffect)(()=>{(async function e(){await j()})()},[j]);let $=()=>{R({type:"REPORT_SIGN_IN_ACTION",action:"sign_up"}),R({type:"SAVE_PASSWORD",password:""}),o?o():R("TO_SIGN_UP")},K=()=>{R({type:"REPORT_SIGN_IN_ACTION",action:"log_in"}),R({type:"SAVE_PASSWORD",password:""}),a?a():R("TO_SIGN_IN")},q=w&&String(w)!==n0.yM.APP_ID;return(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_wide-wrapper",{modal:t,center:i,mobile:d},{"lv_sign_in_panel_wide-wrapper-1-col":w&&String(w)!==n0.yM.APP_ID}),children:[!d&&!q&&(0,eF.jsx)(oA,{isFromModal:t,resourceList:u}),(0,eF.jsx)(nJ.Z,{webp:!0,loading:["noSign.checking","hasSign"].some(v.matches)||["forgetPwd.checkResetCode","signUp.registering"].some(A.matches)||["unknow"].some(E.matches)||V&&!["error","hasInfo"].some(I.matches),size:28,children:(0,eF.jsxs)(nQ.ZP,{className:nq()("focus-lock-wrapper"),children:[M!==n1.L4.FILL_IN_BASE_INFO||F||W?null:(0,eF.jsx)("div",{className:nq()("lv_sign_in_panel_wide-right-wrapper"),children:(0,eF.jsx)(n9,{showTeamInviteInfo:z,thirdPartSignIn:(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsx)(oD,{service:S,signType:O===nH.C.LoginIn?nY.logIn:nY.signUp,isBOE:L,showGoogleBtn:!t,showAppleLogin:_}),!h&&(0,eF.jsx)(oj,{service:S,signType:O===nH.C.LoginIn?nY.logIn:nY.signUp}),g&&(0,eF.jsx)(oF,{onClick:()=>H(!0)})]}),title:p,isFromModal:t,toEmailSignIn:()=>{U(!0),$()},toEmailLogIn:()=>{U(!0),K()}})}),M===n1.L4.FILL_IN_BASE_INFO&&F&&(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_wide-right-wrapper"),children:[O===nH.C.LoginIn?(0,eF.jsx)(oo,{showTeamInviteInfo:z,toForgetPwd:()=>{R({type:"SAVE_PASSWORD",password:""}),s?s():R("TO_FORGET_PWD")},toSignUp:$,toBasePage:()=>{U(!1)}}):null,O===nH.C.SignUp?(0,eF.jsx)(ou,{showTeamInviteInfo:z,toLogIn:K,toBasePage:()=>{U(!1)}}):null]}),M===n1.L4.FILL_IN_BASE_INFO&&B&&(0,eF.jsx)("div",{className:"lv_sign_in_panel_wide-right-wrapper phone-login-detail-wrapper",children:(0,eF.jsx)(oH,{toBasePage:()=>H(!1)})}),M===n1.L4.ENTER_BIRTHDAY||W?(0,eF.jsx)(ok,{isMobile:d,isFromModal:t,isThirdPartFillBirthday:W}):null,M===n1.L4.ENTER_VERIFICATION_CODE?(0,eF.jsx)(oN,{isInvitePage:D,onBackToLoginIn:()=>{a?a():R("TO_SIGN_IN")},isFromModal:t,isMobile:d}):null,M===n1.L4.FORGET_PWD_INFO?(0,eF.jsx)("div",{className:nq()("lv_sign_in_panel_wide-enter-code-wrapper"),children:(0,eF.jsx)(of,{toLogIn:K})}):null]})}),l&&(M===n1.L4.FILL_IN_BASE_INFO||M===n1.L4.ENTER_VERIFICATION_CODE)&&(0,eF.jsx)(nL.BKp,{className:"lv_sign_in_panel_wide-close",onClick:()=>{R({type:"REPORT_SIGN_IN_ACTION",action:"close"}),null==l||l()},fill:"currentColor"})]})},oW=e=>{let{visible:t,signType:i,closable:r,maskClosable:n=!1,closableABTest:o,params:a={},setVisible:s,onLoginSuccess:l,title:c,resourceList:d,...u}=e,[p,_]=(0,eB.useState)(void 0),g=(0,eB.useMemo)(()=>"boolean"==typeof r?!r:p,[r,p]);function h(){null==s||s(!1)}return(0,eB.useEffect)(()=>{o&&(0,nF.y)().getABTestConfigSilent("login_modal_closable",!0).then(e=>{_(!e)}),_(!r)},[o,r]),(0,eB.useEffect)(()=>{o&&t&&void 0!==p&&(0,nF.y)().getABTestConfig("login_modal_closable",!0)},[t,o,p]),(0,eF.jsx)(tN.Z,{visible:t,modalRender:function(){return(0,eF.jsx)(oG,{signType:i,onLoginSuccess:l,onClose:g?void 0:h,params:{...a,pageType:"popup"},center:!0,isFromModal:!0,title:c,resourceList:d})},onCancel:g?void 0:h,unmountOnExit:!0,maskStyle:{zIndex:1102},wrapStyle:{zIndex:1102},maskClosable:n,...u})};var oV=i("946464");let oZ=(0,eB.createContext)({showAppleLogin:!1,showPhoneLogin:!1,hideQrcodeLogin:!1,showCCWebLogin:!1,hideSignUp:!1}),oz=e=>{let{clientKey:t,loadGoogleAuthSdk:i,onGoogleAuthSdkLoaded:r}=e,[n,o]=(0,eB.useState)(0);return(0,eB.useEffect)(()=>{if([2,1].includes(n))return;o(1);let e=document.createElement("script");e.src="https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/googleClient/googleClient.min.js",e.onload=()=>{o(2),null==r||r()},e.onerror=()=>{o(3)},document.body.append(e)},[i,r]),(0,eB.useEffect)(()=>{window.handleToken=function(e){if(window.SignInWithGoogleBtnResults=[],window.SignInWithGoogleBtnResults.push(e),"function"==typeof window.handleSignInWithGoogleBtnResult){window.handleSignInWithGoogleBtnResult();return}}},[]),(0,eF.jsx)("div",{id:"g_id_onload","data-client_id":t,"data-context":"signin","data-ux_mode":"popup","data-auto_prompt":"false","data-callback":"handleToken"})},o$=e=>{let{accountConfig:t,service:i,signType:r=nY.logIn,showGoogleBtn:n,isBOE:o,onClickItem:a}=e,[s,l]=(0,nw.L)(i),[c,d]=(0,eB.useState)(n),u=(0,eB.useMemo)(()=>[{label:tj.ZP.t("web_signin_button_signin_google",{},"Continue with Google"),name:"google",platformAppId:(0,oL.g4)(t,oL.nw.Google,o),icon:(0,eF.jsx)(nL.vYD,{className:"lv_new_third_part_sign_in_expand-icon"})},{label:tj.ZP.t("web_signin_button_signin_tiktok",{},"Continue with TikTok"),name:"tiktok",platformAppId:(0,oL.g4)(t,oL.nw.TikTok,o),icon:(0,eF.jsx)(nL.$hL,{className:"lv_new_third_part_sign_in_expand-icon"})},{label:tj.ZP.t("web_signin_button_signin_facebook",{},"Continue with Facebook"),name:"facebook",platformAppId:(0,oL.g4)(t,oL.nw.Facebook,o),icon:(0,eF.jsx)(nL.zJ_,{className:"lv_new_third_part_sign_in_expand-icon"})}],[r,o,t]);(0,eB.useEffect)(()=>{var e,t,i,r,n;!(null===(e=document)||void 0===e?void 0:e.getElementById("g_id_onload"))&&!(0,oO.isNil)(null===(n=window)||void 0===n?void 0:null===(r=n.google)||void 0===r?void 0:null===(i=r.accounts)||void 0===i?void 0:null===(t=i.id)||void 0===t?void 0:t.renderButton)&&d(!1)},[]);let p=()=>{let e=document.getElementById("signinDiv");if(e){var t,i,n,o;null===(o=window)||void 0===o||null===(n=o.google)||void 0===n||null===(i=n.accounts)||void 0===i||null===(t=i.id)||void 0===t||t.renderButton(e,{theme:"outline",size:"large",type:"standard",shape:"rectangular",width:e.clientWidth,text:"continue_with",logo_alignment:"left",click_listener:()=>{l({type:"REPORT_SIGN_IN_ACTION",action:"google",source:r===nY.logIn?nH.C.LoginIn:nH.C.SignUp})},locale:tj.ZP.language})}},_=e=>{l({type:"AUTH",platform:e.platformAppId,name:e.name,source:r===nY.logIn?nH.C.LoginIn:nH.C.SignUp}),l({type:"REPORT_SIGN_IN_ACTION",action:e.name}),null==a||a(e)};return(0,eF.jsxs)("div",{className:"lv_new_third_part_sign_in_expand-wrapper",children:[c?(0,eF.jsxs)("div",{className:"lv_new_google_sign_in_btn-expand-wrapper",children:[(0,eF.jsx)(oz,{clientKey:(0,oL.ze)(t,oL.nw.Google,o),loadGoogleAuthSdk:!0,onGoogleAuthSdkLoaded:p}),(0,eF.jsxs)("div",{className:nq()("lv_new_third_part_sign_in_expand-button"),children:[u[0].icon,(0,eF.jsx)("span",{className:"lv_new_third_part_sign_in_expand-label",children:u[0].label}),(0,eF.jsx)("div",{id:"signinDiv"})]},u[0].platformAppId)]}):(0,eF.jsxs)("div",{className:nq()("lv_new_third_part_sign_in_expand-button"),onClick:()=>_(u[0]),children:[u[0].icon,(0,eF.jsx)("span",{className:"lv_new_third_part_sign_in_expand-label",children:u[0].label})]},u[0].platformAppId),null==u?void 0:u.slice(1).map(e=>(0,eF.jsxs)("div",{className:nq()("lv_new_third_part_sign_in_expand-button"),onClick:()=>_(e),children:[e.icon,(0,eF.jsx)("span",{className:"lv_new_third_part_sign_in_expand-label",children:e.label})]},e.platformAppId))]})},oK=e=>{let{toEmailTypeSignIn:t,toEmailTypeSignUp:i}=e;return(0,eF.jsxs)("div",{className:"lv_new_third_part_sign_in_expand-wrapper",children:[(0,eF.jsx)("div",{className:nq()("lv_new_third_part_sign_in_expand-button","sign-in"),onClick:t,children:tj.ZP.t("web_signin_button_sign_in",{},"Sign in")}),(0,eF.jsx)("div",{className:nq()("lv_new_third_part_sign_in_expand-button","sign-up"),onClick:i,children:tj.ZP.t("web_accounts_btn_sign_up_if_no_account",{},"Sign up")})]})},oq=e=>{let{toEmailTypeSignIn:t,handleClick:i,isBeta:r}=e;return(0,eF.jsx)("div",{className:"lv_new_third_part_sign_in_expand-wrapper",children:(0,eF.jsxs)("div",{className:nq()("lv_new_third_part_sign_in_expand-button",{"lv_new_third_part_sign_in_expand-last-button":r}),onClick:()=>{t(),null==i||i()},children:[(0,eF.jsx)(nL.Yur,{size:20,className:"lv_new_third_part_sign_in_expand-icon"}),(0,eF.jsx)("span",{className:"lv_new_third_part_sign_in_expand-label",children:tj.ZP.t("web_accounts_placeholder_enter_email",{},"Continue with Email")})]})})},oY=e=>e.isBeta?(0,eF.jsx)(oK,{...e}):(0,eF.jsx)(oq,{...e});var oJ=((n={})[n.logIn=0]="logIn",n[n.signUp=1]="signUp",n[n.forgetPwd=2]="forgetPwd",n[n.invite=3]="invite",n);nV.l.LOGIN,nV.l.SIGN_UP,nV.l.FORGET_PWD,nV.l.INVITE;let oQ=e=>{let{service:t,signType:i=oJ.logIn,style:r,label:n,newVersion:o}=e,a=(0,nM.t)(),[s]=(0,nw.L)(a),{loginReportParams:l}=s.context,c={label:tj.ZP.t("web_signin_button_signin_capcut_mobile",{},"Continue with CapCut Mobile"),name:"scan_code",platformAppId:nz._K.ScanCode,icon:(0,eF.jsx)(nL.V2Y,{className:"lv_new_third_part_sign_in_expand-icon"}),action:"scan_code_click"},[,d]=(0,nw.L)(t),u=e=>{var t;d({type:"AUTH",platform:e.platformAppId,name:e.name,source:i===oJ.logIn?nH.C.LoginIn:nH.C.SignUp,scanCodeParams:{enter_from:null==l?void 0:l.pageEnterFrom,current_page:null==l?void 0:l.currentPage,article_type:null==l?void 0:l.articleType,article_title:null==l?void 0:l.articleTitle,tool_type:null==l?void 0:l.toolType}}),d({type:"REPORT_SIGN_IN_ACTION",action:null!==(t=e.action)&&void 0!==t?t:e.name})};return(0,eF.jsxs)("div",{className:nq()(["lv_new_third_part_sign_in_expand-button","lv_new_third_part_sign_in_qr_code",{"lv_new_third_part_sign_in_expand_new-button":o}]),style:r,onClick:()=>u(c),children:[c.icon,(0,eF.jsx)("span",{className:"lv_new_third_part_sign_in_expand-label",children:null!=n?n:c.label})]},c.platformAppId)};var oX=i("733458"),o0=i("957104");let o1=e=>(0,eF.jsxs)("svg",{width:"75",height:"16",viewBox:"0 0 75 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,eF.jsx)("path",{d:"M28.2142 12.5659C24.8954 12.5659 22.5781 10.4588 22.5781 7.44088C22.5781 4.42295 24.8954 2.31592 28.2142 2.31592C29.0512 2.31592 30.035 2.41065 31.5424 3.09669V5.24328C30.4514 4.63532 29.3729 4.32718 28.3371 4.32718C26.2581 4.32718 24.8059 5.60764 24.8059 7.43984C24.8059 9.27205 26.2581 10.5536 28.3371 10.5536C29.3448 10.5536 30.4524 10.2392 31.5424 9.64473V11.784C30.0339 12.4701 29.0512 12.5648 28.2142 12.5648V12.5659Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M35.9875 12.5658C34.0262 12.5658 32.6562 11.0761 32.6562 8.94307C32.6562 6.81001 34.0856 5.30469 36.0542 5.30469C37.142 5.30469 37.8989 5.63677 38.5068 6.38319L38.5557 6.44253V5.65864H40.4743V12.4107H38.5557V11.4519L38.5058 11.5238C38.0123 12.2348 37.2118 12.5658 35.9875 12.5658ZM36.6507 6.91411C35.5014 6.91411 34.6675 7.76775 34.6675 8.94307C34.6675 10.1184 35.5014 10.9564 36.6507 10.9564C37.8 10.9564 38.6494 10.109 38.6494 8.94307C38.6494 7.77712 37.8093 6.91411 36.6507 6.91411Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M41.9297 15.3527V5.65864H43.8639V6.50187L43.9139 6.43212C44.2855 5.91161 45.1642 5.30469 46.4196 5.30469C48.3486 5.30469 49.7478 6.83499 49.7478 8.94307C49.7478 11.0511 48.3726 12.5658 46.404 12.5658C45.2297 12.5658 44.3917 12.2275 43.9139 11.5592L43.8639 11.4894V15.3527H41.9297ZM45.7534 6.91411C44.6041 6.91411 43.7713 7.76775 43.7713 8.94307C43.7713 10.1184 44.6051 10.9564 45.7534 10.9564C46.9016 10.9564 47.7209 10.109 47.7209 8.94307C47.7209 7.77712 46.8933 6.91411 45.7534 6.91411Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M56.5658 12.5659C53.247 12.5659 50.9297 10.4588 50.9297 7.44088C50.9297 4.42295 53.247 2.31592 56.5658 2.31592C57.4028 2.31592 58.3866 2.41065 59.894 3.09669V5.24328C58.803 4.63532 57.7245 4.32718 56.6897 4.32718C54.6108 4.32718 53.1585 5.60764 53.1585 7.43984C53.1585 9.27205 54.6108 10.5536 56.6897 10.5536C57.6974 10.5536 58.805 10.2392 59.894 9.64473V11.784C58.3855 12.4701 57.4028 12.5648 56.5658 12.5648V12.5659Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M64.6267 12.5665C62.4635 12.5665 61.0664 11.5452 61.0664 9.96601V5.46045H62.985V9.40802C62.985 10.3783 63.5992 10.9571 64.6267 10.9571C65.6542 10.9571 66.2382 10.3783 66.2382 9.40802V5.46045H68.1568V9.96601C68.1568 11.5463 66.7712 12.5665 64.6267 12.5665Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M72.3912 12.566C70.2665 12.566 69.5117 11.2481 69.5117 10.1196V4.08789H71.4303V5.45892H74.0787V7.02879H71.4303V9.73233C71.4303 10.0956 71.5688 10.941 72.8555 10.941C73.2126 10.941 73.656 10.8462 74.0777 10.6817V12.2995C73.4062 12.5452 72.6181 12.565 72.3902 12.565L72.3912 12.566Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M18.2831 3.38605V0.634624L14.9737 2.3721V2.26903C14.9737 1.17283 14.1877 0.510742 13.0499 0.510742H2.56053C1.36127 0.510742 0.636719 1.17283 0.636719 2.26903V5.04128L5.27032 7.44085L0.636719 9.86123V12.6335C0.636719 13.7089 1.36127 14.371 2.56053 14.371H13.0489C14.1867 14.371 14.9727 13.7089 14.9727 12.6335V12.4888L18.2821 14.2471V11.454L10.5868 7.44085L18.2821 3.38605H18.2831ZM7.91869 8.80667L13.6079 11.7861H2.20867L7.91869 8.80667ZM13.5662 3.09665L7.91869 6.05524L2.20867 3.09665H13.5662Z",fill:"currentColor"})]}),o2=e=>(0,eF.jsxs)("svg",{width:"54",height:"14",viewBox:"0 0 54 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,eF.jsx)("path",{d:"M5.8898 10.9481C2.44693 10.9481 0.0429688 8.76229 0.0429688 5.63152C0.0429688 2.50075 2.44693 0.314941 5.8898 0.314941C6.75808 0.314941 7.77863 0.413217 9.34239 1.1249V3.35175C8.21061 2.72106 7.09178 2.4014 6.01723 2.4014C3.86058 2.4014 2.35406 3.72973 2.35406 5.63044C2.35406 7.53115 3.86058 8.86056 6.01723 8.86056C7.06262 8.86056 8.21169 8.53442 9.34239 7.91777V10.1371C7.77755 10.8487 6.75808 10.947 5.8898 10.947V10.9481Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M13.9519 10.9482C11.9173 10.9482 10.4961 9.40275 10.4961 7.18994C10.4961 4.97713 11.9789 3.41553 14.021 3.41553C15.1496 3.41553 15.9347 3.76003 16.5654 4.53435L16.6162 4.59591V3.78271H18.6065V10.7872H16.6162V9.79261L16.5643 9.86713C16.0524 10.6047 15.2219 10.9482 13.9519 10.9482ZM14.6399 5.08513C13.4476 5.08513 12.5826 5.97068 12.5826 7.18994C12.5826 8.4092 13.4476 9.27856 14.6399 9.27856C15.8321 9.27856 16.7133 8.39948 16.7133 7.18994C16.7133 5.9804 15.8418 5.08513 14.6399 5.08513Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M20.1172 13.8392V3.78271H22.1237V4.65747L22.1756 4.58511C22.5611 4.04514 23.4726 3.41553 24.775 3.41553C26.7761 3.41553 28.2276 5.00305 28.2276 7.18994C28.2276 9.37684 26.801 10.9482 24.7588 10.9482C23.5406 10.9482 22.6713 10.5972 22.1756 9.90385L22.1237 9.83149V13.8392H20.1172ZM24.0838 5.08513C22.8916 5.08513 22.0276 5.97068 22.0276 7.18994C22.0276 8.4092 22.8926 9.27856 24.0838 9.27856C25.275 9.27856 26.1249 8.39948 26.1249 7.18994C26.1249 5.9804 25.2664 5.08513 24.0838 5.08513Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M35.3019 10.9481C31.859 10.9481 29.4551 8.76229 29.4551 5.63152C29.4551 2.50075 31.859 0.314941 35.3019 0.314941C36.1702 0.314941 37.1907 0.413217 38.7545 1.1249V3.35175C37.6227 2.72106 36.5039 2.4014 35.4304 2.4014C33.2738 2.4014 31.7672 3.72973 31.7672 5.63044C31.7672 7.53115 33.2738 8.86056 35.4304 8.86056C36.4758 8.86056 37.6249 8.53442 38.7545 7.91777V10.1371C37.1897 10.8487 36.1702 10.947 35.3019 10.947V10.9481Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M43.6622 10.9484C41.418 10.9484 39.9688 9.88895 39.9688 8.25067V3.57666H41.9591V7.67182C41.9591 8.67833 42.5963 9.27878 43.6622 9.27878C44.7281 9.27878 45.3339 8.67833 45.3339 7.67182V3.57666H47.3243V8.25067C47.3243 9.89003 45.8869 10.9484 43.6622 10.9484Z",fill:"currentColor"}),(0,eF.jsx)("path",{d:"M51.7176 10.9479C49.5134 10.9479 48.7305 9.58071 48.7305 8.41005V2.15283H50.7208V3.57512H53.4682V5.20368H50.7208V8.0083C50.7208 8.38521 50.8644 9.26212 52.1993 9.26212C52.5697 9.26212 53.0297 9.16385 53.4671 8.99322V10.6715C52.7706 10.9263 51.953 10.9468 51.7165 10.9468L51.7176 10.9479Z",fill:"currentColor"})]}),o6=()=>(0,eF.jsxs)("div",{className:"lv_brand_notice_panel_wide-footer",children:[(0,eF.jsx)(o1,{className:"loading-icon",style:{marginRight:4.2}}),(0,eF.jsx)("span",{children:tj.ZP.t("web_feedback_button_account_account",{},"Account")})]}),o3=e=>{let{brandLogo:t,brandName:i,theme:r=n$.Q.Light,brandNameIcon:n,hideLogo:o,onClose:a,appId:s}=e,[l,c]=(0,eB.useState)(!1),d=(0,nM.t)(),[u]=(0,nw.L)(d),{isFirstLogin:p,timeStampForCc4b:_}=(0,nX.v)(d,e=>e.context);(0,eB.useEffect)(()=>{if(p&&0!==_){var e,t,i,r;let n=oX.m.getString(o0.g.LOGIN_TYPE_FOR_FIRST_LOGIN_NOTICE);new oV.F().report({action:"authorize_popup_show",login_type:n||(null===(e=u.context.loginReportParams)||void 0===e?void 0:e.type),enter_from:null===(t=u.context.loginReportParams)||void 0===t?void 0:t.pageEnterFrom,page_from:null!==(r=null===(i=u.context.loginReportParams)||void 0===i?void 0:i.fromPage)&&void 0!==r?r:""}),c(!0)}},[p,_]);let g=e=>{c(!1),localStorage.removeItem("show_branch_rel"),s===n0._S.commerce?e?d.send({type:"CONTINUE_TO_BUSINESS_LOGIN",isConfirmToBusinessLogin:e}):d.send({type:"ABORT_TO_BUSINESS_LOGIN",isConfirmToBusinessLogin:e}):d.send({type:"UPDATE_FIRST_LOGIN_NOTICE_CLOSE",isFirstLoginNoticeClose:!0}),null==a||a()},h=[{desc:tj.ZP.t("web_accounts_text_personal_info",{},"The email address and account password"),name:"info"},{desc:tj.ZP.t("web_accounts_text_3rd_party_platforms",{},"Third-party bound account relationship"),name:"bind"},{desc:tj.ZP.t("web_accounts_text_account_uid",{},"Your account name and other personal information"),name:"account"}];return(0,eF.jsx)(tN.Z,{maskStyle:{zIndex:1990},wrapStyle:{zIndex:1990},visible:l,footer:null,closeIcon:null,focusLock:!1,className:"lv_brand_notice_panel_wide-modal",children:(0,eF.jsxs)("div",{className:"lv_brand_notice_panel_wide-wrapper","data-lv-theme-force":r===n$.Q.Dark?"dark":"light",children:[(0,eF.jsx)("div",{className:"lv_brand_notice_panel_wide-content",children:(0,eF.jsxs)("div",{className:"lv_brand_notice_panel_wide-detail",children:[(0,eF.jsxs)("div",{className:"lv_brand_notice_panel_wide-branches",children:[(0,eF.jsxs)("div",{className:"lv_brand_notice_panel_wide-branches-item",children:[t&&(0,eF.jsx)("div",{className:"account-icon",children:t})||!o&&(0,eF.jsx)(nL.yr6,{className:"account-icon"}),(0,eF.jsx)("span",{className:"brand-name",children:null!=n?n:i})]}),(0,eF.jsx)(nL.VpD,{size:24}),(0,eF.jsxs)("div",{className:"lv_brand_notice_panel_wide-branches-item",children:[(0,eF.jsx)(nL.yr6,{className:"account-icon"}),(0,eF.jsxs)("div",{className:"brand-name",children:[(0,eF.jsx)(o2,{className:"brand-capcut-logo"}),(0,eF.jsx)("span",{className:"brand-capcut-name-text",children:tj.ZP.t("web_feedback_button_account_account",{},"Account")})]})]})]}),(0,eF.jsxs)("div",{className:"lv_brand_notice_panel_wide-notification",children:[(0,eF.jsx)("div",{className:"lv_brand_notice_panel_wide-notification-title",children:tj.ZP.t("web_accounts_text_capcut_accounts_info",{string0:(0,eF.jsx)(eF.Fragment,{children:i})},"You can manage CapCut account:")}),(0,eF.jsx)("div",{className:"lv_brand_notice_panel_wide-notification-a",children:h.map(e=>(0,eF.jsx)("div",{className:"lv_brand_notice_panel_wide-notification-item",children:(0,eF.jsx)("span",{children:e.desc})},e.name))})]}),(0,eF.jsx)(nx.Z,{className:"lv_brand_notice_panel_wide-primary-button",type:"primary",onClick:()=>g(!0),children:tj.ZP.t("web_accounts_btn_ok_authorization",{},"Got it")}),(0,eF.jsx)(nL.sSQ,{className:"lv_brand_notice_panel_wide-close",onClick:()=>g(!1),fill:"currentColor"})]})}),(0,eF.jsx)(o6,{})]})})},o4=e=>{let{inviterName:t,inviterImg:i}=e;return(0,eF.jsxs)("div",{className:"invite-info-header",children:[(0,eF.jsx)(nR.Z,{style:{backgroundColor:"var(--lvv-color-text-content-3)"},size:48,children:i&&(0,eF.jsx)("img",{alt:"avatar",src:(0,nN.C)(i,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})})}),(0,eF.jsx)("div",{className:"invite-info-header-user",children:(0,eF.jsx)("h4",{children:tj.oc.t("web_personal_invite_title",{"color-strong":e=>(0,eF.jsx)("strong",{style:{fontWeight:600},children:e}),placeholder0:t})})})]})},o5=e=>{let{workspaceInfo:t}=e;return(0,eF.jsxs)("div",{className:nq()("invite-info-header","team-invite-info-header"),children:[(0,eF.jsx)("div",{className:"invite-info-header-title",children:tj.oc.t("web_signin_title_join_space",{},"Join space")}),(0,eF.jsx)("div",{className:"invite-info-header-text",children:tj.oc.t("web_signin_desc_join_space",{string0:(0,eF.jsx)("strong",{children:null==t?void 0:t.inviter_nickname}),string1:(0,eF.jsx)("strong",{children:null==t?void 0:t.name})},"{string0} invites you to join {string1}.")})]})},o8=e=>{let{thirdPartSignIn:t,emailSignIn:i,scanSignIn:r,ccWebSignIn:n,isFromModal:o,showTeamInviteInfo:a,customConfig:s,isShowIcon:l}=e,c=(0,nM.t)(),[d,u]=(0,nw.L)(c),{loginReportParams:p}=d.context,_=d.context.teamInviteRef,[g]=(0,nw.L)(_),{workspaceInfo:h}=g.context,m=d.context.userInviteRef,[v]=(0,nw.L)(m),{isInvitePage:f,invitedCode:y,inviteDetail:w}=v.context,b=f&&y,S=(0,eF.jsx)("p",{className:"lv_new_sign_in_panel_wide_new_base_page-beta-tips",children:tj.oc.t("cc_ecom_signin_desc",{action0:e=>(0,eF.jsx)("a",{target:"__blank",id:"accountOfCapCut",href:n0.yM.CC4B_PAGE(tj.oc.language),children:e},"account-of-user")},"This version is still in the beta stage and is only open to beta users.Please use the email in the questionnaire to sign up or log in or <action0>apply for private account</action0>.")}),C=()=>{var e,t;new oV.F().report({action:"terms",enter_from:null!==(e=null==p?void 0:p.pageEnterFrom)&&void 0!==e?e:"",page_from:null!==(t=null==p?void 0:p.fromPage)&&void 0!==t?t:""})},k=()=>{var e,t;new oV.F().report({action:"privacy",enter_from:null!==(e=null==p?void 0:p.pageEnterFrom)&&void 0!==e?e:"",page_from:null!==(t=null==p?void 0:p.fromPage)&&void 0!==t?t:""})};return(0,eF.jsx)("div",{className:nq()("lv_new_sign_in_panel_wide_new_base_page",{modal:o}),children:(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide_new_base_page-content",children:[!o&&l&&(0,eF.jsx)("img",{className:"lv_new_sign_in_panel_wide_new_base_page-logo",src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/capcut-logo-dark.png",width:119,height:"auto",draggable:!1}),(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide_new_base_page-main-content",children:[(0,eF.jsx)(()=>{var e,t,i;return b?(0,eF.jsx)(o4,{inviterImg:null==w?void 0:w.inviterImg,invitedSpaceCap:null==w?void 0:w.invitedSpaceCap,inviterName:null==w?void 0:w.inviterName}):a?(0,eF.jsx)(o5,{workspaceInfo:h}):(0,eF.jsxs)("h2",{className:"lv_new_sign_in_panel_wide_new_base_page-title",style:(null==s?void 0:s.isBeta)?{marginBottom:12}:void 0,children:[!(null==s?void 0:s.hideLogo)&&(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide_new_base_page-title-logo",children:null!==(e=null==s?void 0:s.logo)&&void 0!==e?e:(0,eF.jsx)(nL.yr6,{})}),(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide_new_base_page-title-name",children:null!==(i=null!==(t=null==s?void 0:s.brandNameIcon)&&void 0!==t?t:null==s?void 0:s.brandName)&&void 0!==i?i:tj.oc.t("web_feedback_button_account_account",{},"CapCut Account")})]})},{}),(null==s?void 0:s.isBeta)?(0,eF.jsxs)(eF.Fragment,{children:[S,i]}):(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide_new_base_page-third",children:[t,i,r,n]})]}),(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-policy",children:tj.oc.t("web_accounts_checkbox_text_agree_to_cintinue",{strong0:e=>e,href0:e=>{var t;return(0,eF.jsx)("a",{target:"__blank",id:"termsOfCapCut",href:n0.yM.TERMS_OF_CAPCUT({region:null===(t=d.context.userInfo)||void 0===t?void 0:t.region,lang:tj.oc.language}),className:"policy",onClick:C,children:e},"terms-of-user")},href1:e=>{var t;return(0,eF.jsx)("a",{target:"_blank",id:"privacyPolicy",href:n0.yM.PRIVACY_POLICY({region:null===(t=d.context.userInfo)||void 0===t?void 0:t.region,lang:tj.oc.language}),className:"policy",rel:"noreferrer",onClick:k,children:e},"privacy-policy")}},"By clicking <strong0>Continue</strong0>, you accept the <href0>Terms of Use</href0> and <href1>Privacy Policy</href1>.")})]})})},o7={"custom-base-page":"custom-base-page-Qwt4Lz",customBasePage:"custom-base-page-Qwt4Lz","custom-base-page-title":"custom-base-page-title-U08grz",customBasePageTitle:"custom-base-page-title-U08grz","custom-base-page-content":"custom-base-page-content-XiINty",customBasePageContent:"custom-base-page-content-XiINty","custom-base-page-main-content":"custom-base-page-main-content-zF8oGF",customBasePageMainContent:"custom-base-page-main-content-zF8oGF","custom-base-page-login-button":"custom-base-page-login-button-q3561r",customBasePageLoginButton:"custom-base-page-login-button-q3561r","custom-base-page-login-button-icon":"custom-base-page-login-button-icon-OgB7VO",customBasePageLoginButtonIcon:"custom-base-page-login-button-icon-OgB7VO","custom-base-page-login-button-label":"custom-base-page-login-button-label-lr3GtD",customBasePageLoginButtonLabel:"custom-base-page-login-button-label-lr3GtD","custom-base-page-google":"custom-base-page-google-LSc9oA",customBasePageGoogle:"custom-base-page-google-LSc9oA","custom-base-page-email":"custom-base-page-email-GjHjaF",customBasePageEmail:"custom-base-page-email-GjHjaF","custom-base-page-other-login-wrapper":"custom-base-page-other-login-wrapper-s96Fvk",customBasePageOtherLoginWrapper:"custom-base-page-other-login-wrapper-s96Fvk","custom-base-page-other-login-divider":"custom-base-page-other-login-divider-I4yFK1",customBasePageOtherLoginDivider:"custom-base-page-other-login-divider-I4yFK1","custom-base-page-policy":"custom-base-page-policy-NLmpFw",customBasePagePolicy:"custom-base-page-policy-NLmpFw"},o9=e=>{var t,i;let{customConfig:r}=e;return(0,eF.jsx)("h2",{className:o7.customBasePageTitle,children:(0,eF.jsx)("div",{className:o7.customBasePageTitleName,children:null!==(i=null!==(t=null==r?void 0:r.brandNameIcon)&&void 0!==t?t:null==r?void 0:r.brandName)&&void 0!==i?i:tj.oc.t("web_feedback_button_account_account",{},"CapCut Account")})})},ae=e=>{let{accountConfig:t,isBOE:i,signType:r,toEmailTypeSignIn:n,toEmailTypeSignUp:o,customConfig:a}=e,s=(0,nM.t)(),[l,c]=(0,nw.L)(s),{loginReportParams:d}=l.context,u=l.context.thirdPartSignInRef,[p,_]=(0,nw.L)(u),g=()=>{var e,t;new oV.F().report({action:"terms",enter_from:null!==(e=null==d?void 0:d.pageEnterFrom)&&void 0!==e?e:"",page_from:null!==(t=null==d?void 0:d.fromPage)&&void 0!==t?t:""})},h=()=>{var e,t;new oV.F().report({action:"privacy",enter_from:null!==(e=null==d?void 0:d.pageEnterFrom)&&void 0!==e?e:"",page_from:null!==(t=null==d?void 0:d.fromPage)&&void 0!==t?t:""})},m=e=>{_({type:"AUTH",platform:e.platformAppId,name:e.name,source:r===nY.logIn?nH.C.LoginIn:nH.C.SignUp}),_({type:"REPORT_SIGN_IN_ACTION",action:e.action,source:nH.C.LoginIn}),c({type:"UPDATE_REPORT_PARAMS",params:{type:e.type,source:nH.C.LoginIn}})},v=e=>{_({type:"AUTH",platform:e.platformAppId,name:e.name,source:r===nY.logIn?nH.C.LoginIn:nH.C.SignUp,scanCodeParams:{enter_from:null==d?void 0:d.pageEnterFrom,current_page:null==d?void 0:d.currentPage,article_type:null==d?void 0:d.articleType,article_title:null==d?void 0:d.articleTitle,tool_type:null==d?void 0:d.toolType}}),_({type:"REPORT_SIGN_IN_ACTION",action:e.action,source:nH.C.LoginIn}),c({type:"UPDATE_REPORT_PARAMS",params:{type:e.type,source:nH.C.LoginIn}})},f=()=>{n()},y={label:tj.oc.t("web_signin_button_signin_google",{},"Continue with Google"),name:"google",action:"google",type:"google",platformAppId:(0,oL.g4)(t,oL.nw.Google,i),icon:(0,eF.jsx)(nL.vYD,{className:o7.customBasePageLoginButtonIcon}),onClick:()=>m(y)},w={label:"TikTok",name:"tiktok",action:"tiktok",type:"tiktok",platformAppId:(0,oL.g4)(t,oL.nw.TikTok,i),icon:(0,eF.jsx)(nL.$hL,{className:o7.customBasePageLoginButtonIcon}),onClick:()=>m(w)},b={label:"Facebook",name:"facebook",action:"facebook",type:"facebook",platformAppId:(0,oL.g4)(t,oL.nw.Facebook,i),icon:(0,eF.jsx)(nL.zJ_,{className:o7.customBasePageLoginButtonIcon}),onClick:()=>m(b)},S={label:"CapCut App",name:"scan_code",action:"scan_code_click",type:"scan_code",platformAppId:nz._K.ScanCode,icon:(0,eF.jsx)(nL.V2Y,{className:o7.customBasePageLoginButtonIcon}),onClick:()=>v(S)},C={label:tj.oc.t("web_accounts_placeholder_enter_email",{},"Continue with Email"),name:"scan_code",icon:(0,eF.jsx)(nL.Yur,{className:o7.customBasePageLoginButtonIcon}),onClick:()=>f()};return(0,eF.jsx)("div",{className:o7.customBasePage,children:(0,eF.jsxs)("div",{className:o7.customBasePageContent,children:[(0,eF.jsxs)("div",{className:o7.customBasePageMainContent,children:[(0,eF.jsx)(o9,{customConfig:a}),(0,eF.jsxs)("div",{children:[(0,eF.jsxs)("div",{className:nq()(o7.customBasePageLoginButton,o7.customBasePageGoogle),onClick:y.onClick,children:[y.icon,(0,eF.jsx)("span",{className:o7.customBasePageLoginButtonLabel,children:y.label})]},y.platformAppId),(0,eF.jsxs)("div",{className:nq()(o7.customBasePageLoginButton,o7.customBasePageEmail),onClick:C.onClick,children:[C.icon,(0,eF.jsx)("span",{className:o7.customBasePageLoginButtonLabel,children:C.label})]}),(0,eF.jsx)("div",{className:o7.customBasePageOtherLoginDivider,children:tj.oc.t("web_signin_text_other_ways_signin",{},"or")}),(0,eF.jsxs)("div",{className:o7.customBasePageOtherLoginWrapper,children:[(0,eF.jsxs)("div",{className:o7.customBasePageLoginButton,onClick:w.onClick,children:[w.icon,(0,eF.jsx)("span",{className:o7.customBasePageLoginButtonLabel,children:w.label})]},w.platformAppId),(0,eF.jsxs)("div",{className:o7.customBasePageLoginButton,onClick:b.onClick,children:[b.icon,(0,eF.jsx)("span",{className:o7.customBasePageLoginButtonLabel,children:b.label})]},b.platformAppId),(0,eF.jsxs)("div",{className:o7.customBasePageLoginButton,onClick:S.onClick,children:[S.icon,(0,eF.jsx)("span",{className:o7.customBasePageLoginButtonLabel,children:S.label})]},S.platformAppId)]})]})]}),(0,eF.jsx)("div",{className:o7.customBasePagePolicy,children:tj.oc.t("web_accounts_checkbox_text_agree_to_cintinue",{strong0:e=>e,href0:e=>{var t;return(0,eF.jsx)("a",{target:"__blank",id:"termsOfCapCut",href:n0.yM.TERMS_OF_CAPCUT({region:null===(t=l.context.userInfo)||void 0===t?void 0:t.region,lang:tj.oc.language}),className:"policy",onClick:g,children:e},"terms-of-user")},href1:e=>{var t;return(0,eF.jsx)("a",{target:"_blank",id:"privacyPolicy",href:n0.yM.PRIVACY_POLICY({region:null===(t=l.context.userInfo)||void 0===t?void 0:t.region,lang:tj.oc.language}),className:"policy",rel:"noreferrer",onClick:h,children:e},"privacy-policy")}},"By clicking <strong0>Continue</strong0>, you accept the <href0>Terms of Use</href0> and <href1>Privacy Policy</href1>.")})]})})};i("563698");var at=i("334630");let ai=e=>{let{defaultEmail:t,defaultPassword:i,disableButton:r=!1}=e,[n,o]=(0,eB.useState)(t||""),[a,s]=(0,eB.useState)(i||""),[l,c]=(0,eB.useState)(!1),d=(0,eB.useRef)(null),u=(0,eB.useRef)(null),p=t=>{var i;o(t),null===(i=e.onEmailChange)||void 0===i||i.call(e,t,u)},_=t=>{var i;s(t),null===(i=e.onPasswordChange)||void 0===i||i.call(e,t)};(0,eB.useEffect)(()=>{p(n),_(a)},[]);let g=()=>{e.onSignIn(n,a)},{emailWarn:h,passwordWarn:m,confirmText:v,loading:f}=e;return(0,eB.useEffect)(()=>{setTimeout(()=>{d.current.dom.setSelectionRange(a.length,a.length)})},[l]),(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-content",children:(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-form",children:[(0,eF.jsxs)("div",{style:{marginBottom:28},children:[(0,eF.jsxs)("div",{className:nq()("lv_new_sign_in_panel_wide-form-email"),children:[(0,eF.jsx)(n6.Z,{autoComplete:"on",className:nq()("lv_new_sign_in_panel_wide-input",{"lv_new_sign_in_panel_wide-input-warn ":""!==h},{"lv_new_sign_in_panel_wide-warn-hide":!h.length}),value:n,placeholder:tj.oc.t("web_signin_placeholder_enter_email",{},"Enter email"),onChange:p,onBlur:()=>{var t;null===(t=e.onEmailBlur)||void 0===t||t.call(e)},onPressEnter:()=>{var e,t;null===(t=d.current)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t)},ref:u}),""!==h?(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-warn",children:h}):null]}),(0,eF.jsxs)("div",{className:nq()("lv_new_sign_in_panel_wide-form-password",{"lv_new_sign_in_panel_wide-form-password-warn":""!==m}),children:[(0,eF.jsx)(n6.Z,{ref:d,type:l?"text":"password",className:"lv_new_sign_in_panel_wide-input-without-default",value:a,placeholder:tj.oc.t("web_signin_placeholder_enter_password",{},"Enter password"),onChange:_,onBlur:()=>{var t;null===(t=e.onPasswordBlur)||void 0===t||t.call(e)},onPressEnter:g,suffix:l?(0,eF.jsx)(nL.bEM,{onClick:()=>{c(!1)}}):(0,eF.jsx)(nL.lLW,{onClick:()=>{c(!0)}})}),(0,eF.jsx)("div",{className:nq()(["lv_new_sign_in_panel_wide-warn"],{"lv_new_sign_in_panel_wide-warn-hide":!m.length}),children:null!=m?m:""})]})]}),(0,eF.jsx)(nx.Z,{className:"lv_new_sign_in_panel_wide-sign-in-button lv_new_sign_in_panel_wide-primary-button",type:"primary",size:"large",onClick:g,loading:f,disabled:r,children:v})]})})},ar=e=>{var t;return(0,eF.jsxs)("div",{className:"new_back_to_third_party",...e,children:[(0,eF.jsx)("span",{className:"new_back_to_third_party-btn",children:(0,eF.jsx)(nL.ed9,{className:"new_back_to_third_party-icon"})}),(0,eF.jsx)("span",{className:"new_back_to_third_party-label",children:null!==(t=e.text)&&void 0!==t?t:tj.ZP.t("web_signin_button_go_back_signin",{action0:e=>e},"Go back")})]})},an=e=>{let{toSignUp:t,toForgetPwd:i,hideSignUp:r}=e;return(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-log-in-footer",children:(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-forget-container",children:[!r&&(0,eF.jsxs)(at.Z,{size:8,children:[(0,eF.jsx)("span",{className:"footer-switch-text",children:tj.oc.t("web_accounts_text_dont_have_account",{},"Don't have an account?")}),(0,eF.jsx)("span",{onClick:t,className:"new-forget-pwd-btn",children:tj.oc.t("web_accounts_btn_sign_up_if_no_account",{},"Sign up")})]}),(0,eF.jsx)("div",{onClick:i,className:"new-forget-pwd-btn",children:tj.oc.t("web_accounts_btn_forgot_password",{},"Forgot password?")})]})})},ao=e=>{let{toBasePage:t,toForgetPwd:i,toSignUp:r,hideSignUp:n}=e,o=(0,nM.t)(),[a]=(0,nw.L)(o),s=a.context.newEmailSignInRef,{loginReportParams:l}=a.context,[c,d]=(0,nw.L)(s),[u,p]=(0,eB.useState)(""),[_,g]=(0,eB.useState)(""),[h,m]=(0,eB.useState)(!1),[v,f]=(0,eB.useState)(!1),y=(0,nX.v)(s,e=>e.matches("signInSuccess")),w=e=>{d({type:"RESTORE_ACCOUNT",token:e,restoreType:1})},b=e=>{new oe.S().report({action:e,current_page:(null==l?void 0:l.currentPage)||"login"})},S=e=>{let t=tN.Z.confirm({focusLock:!1,className:"lv_new_sign_in_panel_wide-restore-account",title:(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-restore-account-title",children:[(0,eF.jsx)(nL.rLP,{size:24,color:"#2668FF"}),tj.oc.t("web_deactivate_button_delete_restore",{},"Restore deleted account")]}),content:(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-restore-account-content",children:tj.oc.t("web_deactivate_text_trying_sign_into",{},"You\u2019re trying to sign into a deleted account. By signing in, your account will be restored. If you don\u2019t restore the account, it will be permanently deleted in 30 days.")}),maskStyle:{zIndex:1103},wrapStyle:{zIndex:1103},onOk:()=>{b("restore"),w(e),t.close()},onCancel:()=>b("cancel"),okText:tj.oc.t("web_deactivate_button_restore_confirm",{},"Restore account"),cancelText:tj.oc.t("web_deactivate_button_cancel_restore",{},"Cancel"),okButtonProps:{type:"primary"},icon:null,closeIcon:(0,eF.jsx)(nL.bMz,{size:20,onClick:()=>b("cancel")})})};return(0,eB.useEffect)(()=>{d({type:"INIT_LOGIN_ERROR_CB",func:(e,t)=>{var i;let r=parseInt(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.message,10);r===or.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_NOT_EXITE||r===or.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.PASSWORD_WRONG?g(tj.oc.t("web_signin_error_text_valid_email",{},"Enter a valid email or password")):t&&r===or.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_ACCOUNT_CANCEL?(b("show"),S(t)):t$.Z.error(tj.oc.t("log_fail_try_again")),m(!1)}})},[]),(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-detail",children:[(0,eF.jsx)(ar,{onClick:t,text:tj.oc.t("web_accounts_title_sign_in",{},"Sign in")}),(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-detail-content",children:[(0,eF.jsx)("h2",{className:"lv_new_sign_in_panel_wide-title",children:tj.oc.t("web_signin_title_welcome_back",{},"Welcome back")}),(0,eF.jsx)(ai,{disableButton:!a.matches("businessLoginFail")&&(y||v),loading:!y&&h,defaultEmail:c.context.email,defaultPassword:c.context.password,confirmText:tj.oc.t("web_continue",{},"Continue"),emailWarn:u,passwordWarn:_,onEmailChange:(e,t)=>{d({type:"SAVE_EMAIL",email:e}),t.current&&""===e&&t.current.focus(),(""===e||u&&n1.s9.test(e.trim()))&&p(""),_===tj.oc.t("web_signin_error_text_valid_email",{},"Enter a valid email of password")&&g("")},onPasswordChange:e=>{d({type:"SAVE_PASSWORD",password:e}),(""===e||_&&n1.lI.test(e))&&g("")},onPasswordBlur:()=>{""===c.context.password||n1.lI.test(c.context.password)?g(""):g(tj.oc.t("set_password_rule"))},onEmailBlur:()=>{""===c.context.email||n1.s9.test(c.context.email.trim())?(p(""),f(!1)):(p(tj.oc.t("email_contain_at")),f(!0))},onSignIn:(e,t)=>{if(""===e||""===t){""===e&&p(tj.oc.t("fill_the_text")),""===t&&g(tj.oc.t("fill_the_text"));return}if(""===u&&""===_)d({type:"CONFIRM_SIGN",email:e,password:t}),m(!0)}}),(0,eF.jsx)(an,{toForgetPwd:i,toSignUp:r,hideSignUp:n})]})]})},aa="emailSubscribe-yeS9f9",as=["BR","US","MX","CA","EG-Egypt","ID-Indonesia","PH-Philippines","TH-Thailand","PK-Pakistan"],al=[...as,"DE","LU","NO","CH","AT","GR"],ac=()=>{let e=(0,nM.t)(),[t,i]=(0,nw.L)(e),r=(0,nX.v)(e,e=>{var t,i;return null!==(i=null===(t=e.context.userInfo)||void 0===t?void 0:t.region)&&void 0!==i?i:ow.yp.US});return((0,eB.useEffect)(()=>{al.includes(r)?i({type:"SET_EMAIL_SUBSCRIBE_CHECKED",value:!!as.includes(r)}):i({type:"SET_EMAIL_SUBSCRIBE_CHECKED",value:!1})},[r]),al.includes(r))?null:(0,eF.jsx)(os.Z,{size:"small",checked:t.context.isEmailSubscribeChecked,className:aa,onChange:e=>{i({type:"SET_EMAIL_SUBSCRIBE_CHECKED",value:e})},children:tj.oc.t("cc4b_linkemail_desc_clickingcheckbox",{},"By clicking this checkbox, you agree to get the latest updates on features, creative campaigns, and trending video and poster templates by email.")})},ad=e=>{let{toLogIn:t,isInvitePage:i}=e;return(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-sign-up-footer",children:!i&&(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-footer-switch",children:[(0,eF.jsx)("span",{className:"lv_new_sign_in_panel_wide-footer-switch-text",children:tj.ZP.t("web_signin_text_have_account",{},"Have an account?")}),(0,eF.jsx)("span",{onClick:t,className:"lv_new_sign_in_panel_wide-footer-switch-button",children:tj.ZP.t("web_signin_button_sign_in",{},"Sign in")})]})})},au=e=>{let{toLogIn:t,toBasePage:i,customConfig:r}=e,n=(0,nM.t)(),[o,a]=(0,nw.L)(n),[s,l]=(0,nw.L)(o.context.newEmailSignInRef),[c,d]=(0,eB.useState)(""),[u,p]=(0,eB.useState)(""),[_,g]=(0,eB.useState)(!1),[h,m]=(0,eB.useState)(!1),v=o.context.userInviteRef,[f]=(0,nw.L)(v),{isInvitePage:y}=f.context,{searchParams:w}=new URL(window.location.href);return(0,eB.useEffect)(()=>{l({type:"INIT_SEND_CODE_ERROR_CB",func:e=>{var t;let i=parseInt(null===(t=e.data)||void 0===t?void 0:t.message,10);g(!1),i===or.B.SIGN_UP_CODE.SEND_CODE_ERROR_CODE.EMAIL_ERROR?d(tj.ZP.t("email_contain_at")):i===or.B.SIGN_UP_CODE.REGISTER_ERROR_CODE.LINKED_EMAIL?d(tj.ZP.t("web_accounts_text_email_already_signed_up")):i===or.B.SIGN_UP_CODE.SEND_CODE_ERROR_CODE.SENDING_FREQUENTLY?t$.Z.error(tj.ZP.t("many_code_later")):t$.Z.error(tj.ZP.t("fail_sign_try_again")),l({type:"BACK_TO_FILL_REGISTER_INFO"})}})},[]),(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-detail",children:[(0,eF.jsx)(ar,{onClick:i,text:tj.ZP.t("web_accounts_btn_sign_up_if_no_account",{},"Sign up")}),(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-detail-content",children:[(0,eF.jsx)("h2",{className:"lv_new_sign_in_panel_wide-title",children:tj.ZP.t("web_signin_title_create_account",{},"Create an account")}),(0,eF.jsx)(ai,{disableButton:h,defaultEmail:w.get(n4)||s.context.email,defaultPassword:s.context.password,confirmText:tj.ZP.t("web_continue",{},"Continue"),emailWarn:c,passwordWarn:u,loading:_,onEmailChange:(e,t)=>{l({type:"SAVE_EMAIL",email:e}),t.current&&""===e&&t.current.focus(),(""===e||c&&n1.s9.test(e.trim()))&&d("")},onEmailBlur:()=>{""===s.context.email||n1.s9.test(s.context.email.trim())?(d(""),m(!1)):(d(tj.ZP.t("email_contain_at")),m(!0))},onPasswordChange:e=>{l({type:"SAVE_PASSWORD",password:e}),(""===e||u&&n1.lI.test(e))&&p("")},onPasswordBlur:()=>{""===s.context.password||n1.lI.test(s.context.password)?p(""):p(tj.ZP.t("set_password_rule"))},onSignIn:(e,t)=>{if(""===e||""===t){""===e&&d(tj.ZP.t("fill_the_text")),""===t&&p(tj.ZP.t("fill_the_text"));return}if(""===c&&""===u){if(o.context.enableDeviceAgeBan&&o.context.ageGateChecker.ageDeviceBan.isBeingBanned()){tN.Z.warning({closable:!1,maskStyle:{zIndex:10003},wrapStyle:{zIndex:10003},title:tj.ZP.t("web_age_gate_too_yong_title",{},"Age requirement not met"),content:tj.ZP.t("web_age_gate_too_yong_desc",{},"Sorry, we are unable to create your account right now. We appreciate you checking us out!"),okText:tj.ZP.t("web_age_gate_too_yong_ok_button",{},"OK")});return}g(!0),l({type:"SEND_EMAIL_CODE",email:e,password:t,onError:e=>{g(!1),1031===e.error_code?d(tj.ZP.t("email_contain_at")):t$.Z.error(tj.ZP.t("fail_sign_try_again"))}})}}}),(null==r?void 0:r.emailSubscribe)&&(0,eF.jsx)(ac,{}),(0,eF.jsx)(ad,{isInvitePage:y,toLogIn:t})]})]})},ap=e=>{let{send:t,email:i,onBack:r}=e,[n,o]=(0,eB.useState)(0),[a,s]=(0,eB.useState)(""),[l,c]=(0,eB.useState)(!1),d=(0,eB.useRef)(null),u=(0,nM.t)(),[p]=(0,nw.L)(u),_=p.context.newEmailSignInRef,g=(0,nX.v)(_,e=>e.context.resendEmailCodeCountDown);return(0,eB.useEffect)(()=>{c(0!==n&&0!==g)},[n,g]),(0,eB.useEffect)(()=>{var e,t;null===(t=d.current)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t)},[]),(0,eF.jsxs)("div",{className:nq()("lv_new_forget_pwd_panel-content","lv_new_forget_pwd_panel_email_fill"),children:[(0,eF.jsx)(ar,{onClick:r,text:tj.oc.t("web_accounts_title_forgot_password",{},"Forget Password")}),(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-title lv_new_forget_pwd_panel-title-reset",children:tj.oc.t("web_signin_title_reset_password",{},"Reset password")}),(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-description lv_new_forget_pwd_panel-description-reset",children:tj.oc.t("web_signin_desc_reset_password",{},"We\u2019ll email you a link to reset your password.")}),(0,eF.jsx)(n6.Z,{ref:d,value:i,onChange:e=>{t({type:"SAVE_EMAIL",email:e})},onBlur:()=>{i&&!n1.s9.test(i)?s(tj.oc.t("web_signin_error_text_invalid_email",{},"Enter a valid email")):s("")},className:nq()("lv_new_forget_pwd_panel-input",{"lv_new_sign_in_panel_wide-input-warn":""!==a}),placeholder:tj.oc.t("web_signin_placeholder_enter_email_reset",{},"Enter email")}),""!==a?(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-warn",children:a}):null,(0,eF.jsx)(nx.Z,{disabled:l,onClick:()=>{if(!i||!n1.s9.test(i.trim())){s(tj.oc.t("email_contain_at"));return}c(!0),o(n+1),t({type:"INIT_RESET_EMAIL_ERROR_CB",func:e=>{s(e.description),o(0)}}),t({type:"SEND_EMAIL",email:i,emailNotRegisterCb:()=>{s(tj.oc.t("email_contain_at"))},onError:()=>{c(!1)}})},type:"primary",className:nq()("lv_new_forget_pwd_panel-btn lv_new_forget_pwd_panel-btn-reset lv_new_sign_in_panel_wide-primary-button",{"lv_new_forget_pwd_panel-email-warn":""!==a}),children:tj.oc.t("web_signin_button_confirm_password",{},"Confirm")})]})},a_=e=>{let{resendEmailCodeCountDown:t,email:i,onBack:r,send:n}=e,[o,a]=(0,eB.useState)(""),s=(0,eB.useMemo)(()=>{let e=void 0===t?n1.tF:t;return tj.oc.t("web_signin_desc_send_code",{number0:e},"You can resend the link in {number0} seconds.").replace(/\d+/,e=>`<span class="lv_new_forget_pwd_panel-count-down-num">${e}</span>`)},[t]);return(0,eF.jsxs)("div",{className:"lv_new_forget_pwd_panel-resend",children:[(0,eF.jsx)(ar,{onClick:r,text:tj.oc.t("web_accounts_title_forgot_password",{},"Forget Password")}),(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-title lv_new_forget_pwd_panel-title-reset",children:tj.oc.t("web_signin_title_reset_password",{},"Reset password")}),(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-description lv_new_forget_pwd_panel-description-reset",children:tj.oc.t("web_signin_desc_reset_password",{},"We\u2019ll email you a link to reset your password.")}),(0,eF.jsxs)("div",{className:"lv_new_forget_pwd_panel-resend-footer-container",children:[(0,eF.jsx)(n6.Z,{value:i,onChange:e=>{n({type:"SAVE_EMAIL",email:e}),e&&!n1.s9.test(e)?a(tj.oc.t("web_signin_error_text_invalid_email",{},"Enter a valid email")):a("")},className:nq()("lv_new_forget_pwd_panel-input lv_new_forget_pwd_panel-input-reset lv_new_sign_in_panel_wide-input",{"lv_new_sign_in_panel_wide-input-warn":""!==o}),placeholder:tj.oc.t("web_signin_placeholder_enter_email_reset",{},"Enter email")}),""!==o?(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-warn",children:o}):null,0!==t?(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-resend-btn-container",children:(0,eF.jsx)(nx.Z,{disabled:!0,type:"primary",className:"lv_new_sign_in_panel_wide-primary-button",children:(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-count-down",dangerouslySetInnerHTML:{__html:(0,nN.J)(s,null,{logType:"react.dangerouslySetInnerHTML",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}})})}):(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-resend-btn-container",children:(0,eF.jsx)(nx.Z,{className:"lv_new_sign_in_panel_wide-primary-button",type:"primary",onClick:()=>{n("RESEND")},children:tj.oc.t("web_signin_button_resend_code_email",{action0:e=>(0,eF.jsx)("span",{className:nq()("lv_new_forget_pwd_panel-resend-button"),children:e})},"Resend email")})})]})]})},ag=e=>{let{warning:t,onInputChange:i,placeholder:r,style:n,className:o}=e,a=(0,eB.useRef)(null),[s,l]=(0,eB.useState)(!1);return(0,eB.useEffect)(()=>{var e,i;t.length?null===(e=a.current)||void 0===e||e.dom.classList.add("lv_new_forget_pwd_panel-warn-input"):null===(i=a.current)||void 0===i||i.dom.classList.remove("lv_new_forget_pwd_panel-warn-input")},[t]),(0,eF.jsxs)("div",{className:`lv_new_forget_pwd_panel-input-container ${o}`,style:n,children:[(0,eF.jsxs)("div",{onMouseEnter:()=>{var e;null===(e=a.current)||void 0===e||e.dom.classList.add("lv_new_forget_pwd_panel-hover-input")},onMouseLeave:()=>{var e;null===(e=a.current)||void 0===e||e.dom.classList.remove("lv_new_forget_pwd_panel-hover-input")},className:"lv_new_forget_pwd_panel-input-wrapper",children:[(0,eF.jsx)(n6.Z,{type:s?"text":"password",ref:a,onBlur:()=>{var e;null===(e=a.current)||void 0===e||e.dom.classList.remove("lv_new_forget_pwd_panel-hover-input")},onChange:i,className:nq()("lv_new_sign_in_panel_wide-input",{"lv_new_sign_in_panel_wide-input-warn":t.length}),placeholder:r}),(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-input-suffix",children:s?(0,eF.jsx)(nL.bEM,{onMouseDown:e=>{e.preventDefault()},onClick:()=>{var e;null===(e=a.current)||void 0===e||e.focus(),l(!1)}}):(0,eF.jsx)(nL.lLW,{onMouseDown:e=>{e.preventDefault()},onClick:()=>{var e;null===(e=a.current)||void 0===e||e.focus(),l(!0)}})})]}),t.length&&(0,eF.jsxs)("div",{className:"lv_new_forget_pwd_panel-warn-text",children:[" ",t," "]})||null]})},ah=e=>{let{toLogIn:t,send:i}=e,[r,n]=(0,eB.useState)(""),[o,a]=(0,eB.useState)(""),[s,l]=(0,eB.useState)(""),[c,d]=(0,eB.useState)(""),[u,p]=(0,eB.useState)(!1),_=new URLSearchParams(location.search).get("aid");return(0,eB.useEffect)(()=>{i({type:"INIT_RESET_SUCCESS_CB",func:()=>{t$.Z.success(tj.oc.t("password_reset_successfully")),p(!1)}})},[]),(0,eF.jsxs)("div",{className:nq()("lv_new_forget_pwd_panel-content","lv_forget_pwd_panel_reset_pwd"),children:[(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-icon-wrapper",children:(0,eF.jsx)("img",{src:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/signin_panel_reset.png",className:"lv_new_forget_pwd_panel-icon lv_new_forget_pwd_panel-icon-reset",alt:"ForgetPasswordPNG"})}),(0,eF.jsx)("div",{className:"lv_new_forget_pwd_panel-title lv_new_forget_pwd_panel-title-reset",children:tj.oc.t("set_new_password")}),(0,eF.jsx)(ag,{className:"lv_new_forget_pwd_panel-input-reset  ",warning:s,onInputChange:e=>(n(e),!n1.lI.test(e)&&e?l(tj.oc.t("set_password_rule")):l(""),e),value:r,placeholder:tj.oc.t("web_signin_placeholder_new_password",{},"Enter new password")}),(0,eF.jsx)(ag,{className:nq()("lv_new_forget_pwd_panel-input-reset-pwd"),warning:c,onInputChange:e=>(a(e),e!==r?d(tj.oc.t("web_signin_error_text_same_password",{},"Enter the same password as the above line")):d(""),e),value:o,placeholder:tj.oc.t("web_signin_placeholder_new_password_again",{},"Enter new password again")}),(0,eF.jsx)(nx.Z,{loading:u,onClick:()=>{if(!!n1.lI.test(r)&&r===o)p(!0),i({type:"CONFIRM_PASSWORD",pwd:o})},type:"primary",className:"lv_new_forget_pwd_panel-btn lv_new_forget_pwd_panel-btn-reset lv_new_sign_in_panel_wide-primary-button",children:tj.oc.t("confirm_key")}),_===n0.yM.APP_ID&&(0,eF.jsx)(ar,{onClick:()=>{i("BACK_SIGN_IN"),t()}})]})},am=e=>{let{toLogIn:t}=e,i=(0,nM.t)(),[r]=(0,nw.L)(i),n=r.context.newEmailSignInRef,[,o]=(0,nw.L)(n),a=(0,nX.v)(n,e=>e.context.step)||n1.GH.FillInEmail,s=(0,nX.v)(n,e=>e.context.email),l=(0,nX.v)(n,e=>e.context.resendEmailCodeCountDown),c=new URLSearchParams(location.search),d=c.get("showType")||"email";(0,eB.useEffect)(()=>{switch(d){case"email":o("TO_SEND_RESET_EMAIL_INFO");break;case"password":let e=c.get("email"),i=c.get("code");e&&i&&(o({type:"SAVE_PWD_CODE",code:i,email:e}),o({type:"TO_RESET_PASSWORD",func:()=>{t(),t$.Z.warning(tj.oc.t("link_lose_efficacy"))}}))}},[d]);let u=()=>{o("BACK_SIGN_IN"),t()};return(0,eF.jsxs)("div",{className:"lv_new_forget_pwd_panel",children:[a===n1.GH.FillInEmail?(0,eF.jsx)(ap,{send:o,email:s,toLogIn:t,onBack:u}):null,a===n1.GH.ResendEmail?(0,eF.jsx)(a_,{email:s,send:o,resendEmailCodeCountDown:l,toLogIn:t,onBack:u}):null,a===n1.GH.ResetPwd?(0,eF.jsx)(ah,{email:s,send:o,onBack:u,toLogIn:t}):null]})};var av=i("41723"),af=i.n(av);let ay=e=>{let{theme:t,onBack:i,onAgeErrorBack:r,openUnderAgeModal:n,customAgeValidateRule:o}=e,a=(0,nM.t)(),s=(0,nX.v)(a,e=>{var t,i;return null!==(i=null===(t=e.context.userInfo)||void 0===t?void 0:t.region)&&void 0!==i?i:ow.yp.US}),l=(0,nX.v)(a,e=>{var t;return null===(t=e.context.ipLocationInfo)||void 0===t?void 0:t.Subdivisions}),c=(0,nX.v)(a,e=>e.context.loginMode),d=(0,nX.v)(a,e=>{var t,i;return null===(i=e.context)||void 0===i?void 0:null===(t=i.loginReportParams)||void 0===t?void 0:t.type}),u=(0,nX.v)(a,e=>e.context.newEmailSignInRef),[p]=(0,nw.L)(a),_=p.context.newEmailSignInRef,g=(0,nX.v)(_,e=>e.context.birthday),h=(0,nX.v)(_,e=>e.context.currentWindow),m=p.context.thirdPartSignInRef,[v,f]=(0,nw.L)(m),[,y]=(0,nw.L)(u),[w,b]=(0,eB.useState)(""),[S,C]=(0,eB.useState)(!1),[k,E]=(0,eB.useState)(!1),[I,P]=(0,eB.useState)({error:!1}),A=h===n1.L4.ENTER_BIRTHDAY,R=[{key:"",fallback:""},{key:"web_age_gate_jan",fallback:"January"},{key:"web_age_gate_feb",fallback:"February"},{key:"web_age_gate_mar",fallback:"March"},{key:"web_age_gate_apr",fallback:"April"},{key:"web_age_gate_may",fallback:"May"},{key:"web_age_gate_jun",fallback:"June"},{key:"web_age_gate_jul",fallback:"July"},{key:"web_age_gate_aug",fallback:"August"},{key:"web_age_gate_sep",fallback:"September"},{key:"web_age_gate_oct",fallback:"October"},{key:"web_age_gate_nov",fallback:"November"},{key:"web_age_gate_dec",fallback:"December"}].map(e=>{let{key:t,fallback:i}=e;return t?tj.ZP.t(t,{},i):t}),x=e=>{var t;if(null==o?void 0:o.submitValidator){let t=null==o?void 0:o.submitValidator(e);return P(t),{pass:!t.error,message:null==t?void 0:t.message}}let i=(0,oS.Ig)(s,null!=e?e:w,(null==l?void 0:null===(t=l.map)||void 0===t?void 0:t.call(l,e=>e.GeoNameID))||[]);return P({error:!i}),{pass:i}},N=e=>{let t=S;if(null==o?void 0:o.inputValidator){var i;t=!(null==o?void 0:null===(i=o.inputValidator(e))||void 0===i?void 0:i.error)}if(t&&(null==o?void 0:o.autoSubmit)){let{pass:t}=x(e),i=(0,oS.tN)(null!=e?e:"");t&&!i&&M(af()(e).format("YYYY-MM-DD"))}else P({error:!1}),C(!1)},L=(0,eB.useCallback)(e=>{if(b(e),"business"===c){let t=af()(e).isBefore(af()().subtract(18,"year")),[i,r,n]=e.split("-").map(e=>Number(e));new oy.S().report({action:"select_age",age_year:i,age_month:r,age_date:n,signup_type:d,age_requirement_met:t?1:0})}N(e)},[c,d]),O=(0,eB.useCallback)(e=>new Promise(t=>{if(k){t(!1);return}let[i,r,n]=e.split("-").map(e=>Number(e));tN.Z.warning({className:"lv_sign_in_panel_wide-birthday-modal",maskStyle:{zIndex:10003},wrapStyle:{zIndex:10003},title:tj.ZP.t("web_age_gate_review_birthdate_title",{},"Review your date of birth"),content:tj.ZP.t("web_age_gate_review_birthdate_desc",{date:`${R[r]} ${n}, ${i}`},`You entered: ${R[r]} ${n}, ${i}`),okText:tj.ZP.t("web_age_gate_review_birthdate_ok_btn",{},"OK"),onOk:()=>{E(!0),t(!0)},onCancel:()=>{E(!0),t(!0)}})}),[k]),M=(0,eB.useCallback)(async e=>{let t=null!=e?e:w,{pass:i}=x(t),[o,l,u]=t.split("-").map(e=>Number(e)),_=(0,oS.tN)(t);if("business"===c&&new oy.S().report({action:"confirm",age_year:o,age_month:l,age_date:u,signup_type:d,age_requirement_met:i?1:0}),_&&await O(t))return;let g=e=>{"business"===c?new oy.S().report({action:"close",signup_type:d}):new oy.S().report({action:e,signup_type:"email"}),r()};if(i)A?(a.send({type:"UPDATE_REPORT_PARAMS",params:{age_year:o,age_month:l,age_date:u}}),y({type:"CONFIRM_BIRTHDAY",value:t,region:s})):f({type:"SET_THIRD_PARTY_BIRTHDAY",birthday:t});else{if(p.context.ageGateChecker.ageDeviceBan.ban(),n?n():tN.Z.warning({closable:!1,className:"lv_new_sign_in_panel_wide-birthday-modal",maskStyle:{zIndex:1103},wrapStyle:{zIndex:1103},title:tj.ZP.t("web_age_gate_too_yong_title",{},"Age requirement not met"),content:tj.ZP.t("web_age_gate_too_yong_desc",{},"Sorry, we are unable to create your account right now. We appreciate you checking us out!"),okText:tj.ZP.t("web_age_gate_too_yong_ok_button",{},"OK"),onOk:()=>g("got_it"),onCancel:()=>g("close")}),"business"===c)return;new oy.S().report({action:"show",signup_type:"email"})}},[s,w,a,y,k,c,d]);return(0,eB.useEffect)(()=>{"business"===c&&new oy.S().report({action:"show",signup_type:d})},[]),(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-birthday-detail",children:[(0,eF.jsx)(ar,{style:{top:32,zIndex:99},onClick:i,text:tj.ZP.t("web_accounts_btn_sign_up_if_no_account",{},"Sign up")}),(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-birthday-wrapper",children:[(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-birthday-title-wrapper",children:[(0,eF.jsxs)("div",{children:[(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-birthday-title",children:tj.ZP.t("web_age_gate_title",{},"When\u2019s your birthday?")}),(0,eF.jsx)("p",{className:"lv_new_sign_in_panel_wide-birthday-subtitle",children:tj.ZP.t("web_age_gate_desc",{},"Your birthday won\u2019t be shown publicly.")})]}),(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-birthday-picker",children:(0,eF.jsx)(ob.i,{theme:t,mode:"custom",birthdayStr:g,onChange:L,setIsBirthdayValid:C,customAgeValidateRule:o})})]}),(0,eF.jsx)(nx.Z,{className:nq()("lv_new_sign_in_panel_wide-birthday-next","lv_new_sign_in_panel_wide-primary-button",{"lv_new_sign_in_panel_wide-birthday-smallgap":k}),disabled:""===w||!S||(null==I?void 0:I.error),type:"primary",onClick:()=>M(),children:tj.ZP.t("web_age_gate_next_btn",{},"Next")}),(null==I?void 0:I.error)&&(null==I?void 0:I.message)&&(0,eF.jsx)("div",{className:"gate_birthday-error_text",children:null==I?void 0:I.message}),k?(0,eF.jsx)("p",{className:"lv_new_sign_in_panel_wide-birthday-desc",children:tj.ZP.t("web_age_gate_edit_date_note",{},'If this date is correct, tap "Next". If needed, you can edit the date before continuing.')}):null]})]})},aw=e=>{let{isMobile:t,onBackToSignUp:i}=e,[r,n]=(0,eB.useState)(""),o=(0,nM.t)(),[a,s]=(0,eB.useState)(""),[l,c]=(0,eB.useState)(!1),[d,u]=(0,eB.useState)(0),[p,_]=(0,eB.useState)(0),[g]=(0,nw.L)(o),h=g.context.newEmailSignInRef,[,m]=(0,nw.L)(h),v=(0,nX.v)(h,e=>e.context.email),f=(0,nX.v)(h,e=>e.context.resendEmailCodeCountDown),y=(0,nX.v)(h,e=>e.matches("signUp.sendingEmailCode")),w=(0,eB.useMemo)(()=>{let e=void 0===f?n1.tF:f;return tj.oc.t("web_accounts_text_recend_code",{number0:e},"Resend code in {number0}s").replace(/\d+/,e=>`<span class="lv_new_sign_in_panel_wide-code-count-down-num">${e}</span>`)},[f]);(0,eB.useEffect)(()=>{m({type:"INIT_SEND_CODE_ERROR_CB",func:e=>{parseInt(null==e?void 0:e.error_code,10)===or.B.SIGN_UP_CODE.SEND_CODE_ERROR_CODE.SENDING_FREQUENTLY?t$.Z.error(tj.oc.t("many_code_later")):t$.Z.error(tj.oc.t("fail_sign_try_again")),m({type:"BACK_TO_ENTER_CODE"})}})},[]),(0,eB.useEffect)(()=>{let e=null;return 10===d&&(e=setTimeout(()=>{u(0)},18e5)),()=>{e&&clearTimeout(e)}},[d]),(0,eB.useEffect)(()=>{let e=null;return 5===p&&(e=setTimeout(()=>{_(0)},18e5)),()=>{e&&clearTimeout(e)}},[p]);let b=()=>{if(!y&&5!==p)_(p+1),m({type:"REPORT_SIGN_IN_ACTION",action:"resend"}),m({type:"RESEND",code:oR.SEND_CODE_TYPE.REGISTER_RETRY})},S=(0,eB.useCallback)(e=>{c(!1);let t=null==e?void 0:e.data.message;parseInt(t,10)===or.B.SIGN_UP_CODE.REGISTER_ERROR_CODE.CODE_WRONG||parseInt(t,10)===or.B.SIGN_UP_CODE.REGISTER_ERROR_CODE.CODE_EXPIRED||1702===parseInt(t,10)?(s(tj.oc.t("web_signin_error_wrong_verification_code",{},"Wrong verification code. Try again.")),u(d+1)):t$.Z.error(tj.oc.t("fail_sign_try_again"))},[d,s,u]),C=e=>{let t=e||r;if(""===t){s(tj.oc.t("fill_the_text"));return}c(!0),m({type:"VERIFY_EMAIL_CODE",emailCode:t,onPass:()=>{c(!1)},onError:S})};return(0,eF.jsxs)("div",{className:"lv_new_sign_in_panel_wide-code-detail",children:[(0,eF.jsx)(ar,{style:{top:32,zIndex:99},onClick:i,text:tj.oc.t("web_accounts_btn_sign_up_if_no_account",{},"Sign up")}),(0,eF.jsx)("h2",{className:"lv_new_sign_in_panel_wide-code-title",children:tj.oc.t("web_age_gate_confirm_email_title",{},"Confirm your email")}),(0,eF.jsx)("span",{className:"lv_new_sign_in_panel_wide-code-tip",children:tj.oc.t("web_age_gate_confirm_email_desc",{email:` ${v}`},`Your verification code was sent to ${v}`)}),l&&(0,eF.jsx)(nJ.Z,{loading:l,className:"lv_new_sign_in_panel_wide-code-loading",children:(0,eF.jsx)(eF.Fragment,{})}),(0,eF.jsxs)("div",{className:nq()("lv_new_sign_in_panel_wide-code-input-wrapper",{"lv_new_sign_in_panel_wide-code-input-wrapper-warn":""!==a}),children:[(0,eF.jsx)(ox,{value:r,onChange:e=>{m({type:"SAVE_EMAIL_CODE",emailCode:e}),n(e),s(""),(null==e?void 0:e.length)===6&&C(e)},onPressEnter:C,warn:!!a,size:t?"small":"default",newVersion:!0}),""!==a?(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-code-warn",children:a}):null]}),0===f||5===p?(0,eF.jsx)("div",{className:nq()("lv_new_sign_in_panel_wide-code-resend",{disbaled:y||5===p}),children:tj.oc.t("web_age_gate_no_email_p2",{action0:e=>(0,eF.jsx)("span",{onClick:b,className:nq()("lv_new_sign_in_panel_wide-code-resend-button"),children:e})},"Check your spam folder or <action0>resend code</action0>")}):(0,eF.jsx)("div",{className:"lv_new_sign_in_panel_wide-code-count-down",dangerouslySetInnerHTML:{__html:(0,nN.J)(w,null,{logType:"react.dangerouslySetInnerHTML",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}})]})},ab=e=>{let{title:t,subTitle:i,content:r,desc:n,imgSrc:o,imgWebp:a,modalImg:s,isFromModal:l}=e;return(0,eF.jsxs)("div",{className:nq()("lv_sign_in_panel_left_carousel_page"),children:[(0,eF.jsx)("div",{className:"lv_sign_in_panel_left_carousel_img_wrapper",children:(0,eF.jsx)(oT.Z,{src:l?s:o,responsiveImageWebp:l?void 0:{srcSet:a},alt:"login panel carousel picture",height:"100%",width:"100%",style:{height:"100%",width:"100%"},imgStyle:{height:"100%",width:"100%",objectFit:"cover",objectPosition:"center"}})}),(0,eF.jsx)("h2",{className:"lv_sign_in_panel_left_carousel_title",children:t}),i?(0,eF.jsx)("h3",{className:"lv_sign_in_panel_left_carousel_subtitle",children:i}):null,r?(0,eF.jsx)("div",{className:"lv_sign_in_panel_left_carousel_content",children:r}):null,!l&&(0,eF.jsx)("p",{className:"lv_sign_in_panel_left_carousel_desc",children:n})]})},aS=e=>{let{isFromModal:t,firstPageIndex:i=0,loginMode:r,resourceList:n=[]}=e,o=()=>[{title:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_title_stunning_videos",{strong0:e=>(0,eF.jsx)("strong",{children:e})},"Create stunning videos online with unlimited possibilities")}),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_stunning_videos",{},"Craft masterpieces with keyframes, speed curves, and more! From novices to experts, we empower your creativity.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/6cbffc0644f2011cc0087b6379fe297d.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/6cbffc0644f2011cc0087b6379fe297d.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-1.png"},{title:tj.ZP.t("web_signin_title_brilliant_images",{strong0:e=>(0,eF.jsx)("strong",{children:e})},"Make high-quality images effortlessly"),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_brilliant_images",{},"Top features at your fingertips! Craft multi-page designs, enjoy smart color themes, and resize your pages smoothly.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/97148902b0919c6f29fd34d2e56bd0bf.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/97148902b0919c6f29fd34d2e56bd0bf.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-2.png"},{title:tj.ZP.t("web_signin_title_million_templates",{strong0:e=>(0,eF.jsx)("strong",{children:e})},"Millions of video and image templates for all your design needs"),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_million_templates",{},"Find your perfect template from millions available - designed for social promotions, vlogs, lifestyle showcases, and more.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/3c610623884eb6883d10746c0c5173c4.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/3c610623884eb6883d10746c0c5173c4.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-3.png"},{title:tj.ZP.t("web_signin_title_ai_power",{strong0:e=>(0,eF.jsx)("strong",{children:e})},"Magic tools: smartly edit and process your footage"),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_ai_power",{},"Discover the effortless route to polished content with our cutout, upscaler, and automatic image generation tools.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/51d58d1206ffb41072c008bde7ead07b.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/51d58d1206ffb41072c008bde7ead07b.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-4.png"},{title:tj.ZP.t("web_signin_title_share_review",{strong0:e=>(0,eF.jsx)("strong",{children:e})},"Share and review projects with your team in real time"),desc:(0,eF.jsx)(eF.Fragment,{children:tj.ZP.t("web_signin_desc_share_review",{},"Cloud collaboration for efficient teamwork; share projects instantly for fast reviews and quick presentation.")}),imgSrc:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/5994623b142cee9e54c7bfce3b525a6a.png~tplv-hk1xnajzr6-image.image",imgWebp:"https://p16-capcut-va.capcut.com/tos-maliva-i-hk1xnajzr6-us/5994623b142cee9e54c7bfce3b525a6a.png~tplv-hk1xnajzr6-webp.webp",modalImg:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/paltformSSR-image/login-modal-5.png"}],a=(0,eB.useMemo)(()=>n&&0!==n.length?n:"business"===r?[]:o(),[]),[s,l]=(0,eB.useState)(i),[c,d]=(0,oE.default)(),u=(0,eB.useRef)(null);return(0,eF.jsx)("div",{className:nq()("lv_sign_in_panel_left_carousel_wrapper",{modal:t}),children:(0,eF.jsxs)("div",{className:"lv_sign_in_panel_left_carousel_main",ref:c,children:[(0,eF.jsx)(oI.Z,{className:"lv_sign_in_panel_left_carousel",indicatorType:"line",showArrow:"never",autoPlay:!d&&{interval:5e3,hoverToPause:!1},currentIndex:s,onChange:(e,t)=>{l(e)},carousel:u,animation:"fade",children:a.map((e,i)=>(0,eF.jsx)("div",{children:(0,eF.jsx)(ab,{...e,isFromModal:t})},i))}),a.length>1?(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsx)("div",{className:"lv_sign_in_panel_left_carousel_arrow-left",onClick:()=>{u.current.goto({index:(s-1)%a.length,isManual:!0,isNegative:!0})},children:(0,eF.jsx)(nL.JJ,{fill:"currentColor"})}),(0,eF.jsx)("div",{className:"lv_sign_in_panel_left_carousel_arrow-right",onClick:()=>{u.current.goto({index:(s+1)%a.length,isManual:!0})},children:(0,eF.jsx)(nL.JJ,{fill:"currentColor"})})]}):null]})})},aC=e=>(0,eF.jsxs)("div",{className:nq()(["lv_new_third_part_sign_in_expand-button","lv_new_third_part_sign_in_qr_code",{"lv_new_third_part_sign_in_expand_new-button":e.newVersion}]),style:e.style,onClick:e.onClick,children:[(0,eF.jsx)(nL.fiT,{color:"#fff",width:20,height:20}),(0,eF.jsx)("span",{className:"lv_new_third_part_sign_in_expand-label",children:tj.oc.t("compliance_sheet_button13",{},"Continue with CapCut")})]}),ak=e=>{var t;let{isFromModal:i,isShowIcon:r=!1,center:n=!0,signType:o=nY.signUp,params:a,isMobile:s=!1,resourceList:l,title:c,customConfig:d,openUnderAgeModal:u,onLoginSuccess:p,toSignUpCb:_,toLogInCb:g,toForgetPwdCb:h,onClose:m}=e,v=(0,nM.t)(),[f,y]=(0,nw.L)(v),{loginReportParams:w}=f.context,b=f.context.newEmailSignInRef,S=f.context.thirdPartSignInRef,C=f.context.teamInviteRef,k=f.context.userInviteRef,[E]=(0,nw.L)(k),[I,P]=(0,nw.L)(C),[A,R]=(0,nw.L)(b),[x,N]=(0,nw.L)(S),L=(0,nX.v)(v,e=>e.context.isBOE),O=(0,nX.v)(v,e=>e.context.accountConfig),M=(0,nX.v)(v,e=>e.context.loginMode);(0,nX.v)(v,e=>e.context.enableThirdPartySignAgeGate);let D=(0,nX.v)(v,e=>{var t,i;return null===(i=e.context)||void 0===i?void 0:null===(t=i.inviteInfo)||void 0===t?void 0:t.isInvitePage}),j=(0,nX.v)(b,e=>e.context.source),F=(0,nX.v)(b,e=>e.context.currentWindow),U=(0,nX.v)(v,e=>e.context.passport),[B,H]=(0,eB.useState)(!1),G=["fillBirthday.fillingBirthday","fillingBirthday"].some(x.matches),W=new URLSearchParams(window.location.search),{isFromTeamInvite:V,isFromTeamApply:Z}=n2(),z=V||Z,{hideQrcodeLogin:$,showCCWebLogin:K,hideSignUp:q,ccwebLoginCb:Y}=(0,eB.useContext)(oZ);(0,eB.useEffect)(()=>{y({type:"UPDATE_REPORT_PARAMS",params:{pageEnterFrom:(null==w?void 0:w.pageEnterFrom)||"",currentPage:(null==w?void 0:w.currentPage)||"",statusEnterFrom:(null==w?void 0:w.statusEnterFrom)||"",...a}})},[]),(0,eB.useEffect)(()=>{let e=W.get("redirect_url");V&&e&&P({type:"REFRESH",newLink:`${location.origin}${decodeURIComponent(e)}`})},[]),(0,eB.useEffect)(()=>{R({type:"INIT_LOGIN_SUCCESS_CB",func:()=>{null==p||p()}}),N({type:"INIT_LOGIN_SUCCESS_CB",func:()=>{null==p||p()}})},[]),(0,eB.useEffect)(()=>{switch(o){case nY.logIn:R("TO_SIGN_IN");break;case nY.signUp:R("TO_SIGN_UP");break;case nY.forgetPwd:R("TO_FORGET_PWD")}},[o]),(0,eB.useEffect)(()=>{(async function e(){await U()})()},[U]);let J=()=>{R({type:"REPORT_SIGN_IN_ACTION",action:"sign_up"}),R({type:"SAVE_PASSWORD",password:""}),_?_():R("TO_SIGN_UP")},Q=()=>{H(!0),R({type:"REPORT_SIGN_IN_ACTION",action:"email"}),v.send({type:"UPDATE_REPORT_PARAMS",params:{pageEnterFrom:(null==w?void 0:w.pageEnterFrom)||"",currentPage:(null==w?void 0:w.currentPage)||"",statusEnterFrom:(null==w?void 0:w.statusEnterFrom)||"",type:"email"}}),o===nY.logIn?R("TO_SIGN_IN"):R("TO_SIGN_UP")},X=()=>{H(!0),R({type:"REPORT_SIGN_IN_ACTION",action:"sign_up"}),v.send({type:"UPDATE_REPORT_PARAMS",params:{pageEnterFrom:(null==w?void 0:w.pageEnterFrom)||"",currentPage:(null==w?void 0:w.currentPage)||"",statusEnterFrom:(null==w?void 0:w.statusEnterFrom)||"",type:"email"}}),R({type:"SAVE_PASSWORD",password:""}),_?_():R("TO_SIGN_UP")},ee=()=>{if("business"===M){var e,t;new oV.F().report({action:"back",enter_from:null!==(e=null==w?void 0:w.pageEnterFrom)&&void 0!==e?e:"",page_from:null!==(t=null==w?void 0:w.fromPage)&&void 0!==t?t:""},{immediately:!0})}R({type:"SAVE_EMAIL",email:""}),R({type:"SAVE_PASSWORD",password:""}),H(!1)};return(0,eF.jsxs)("div",{className:nq()(`lv_new_sign_in_panel_wide-${null!==(t=null==d?void 0:d.col)&&void 0!==t?t:1}-col-wrapper`,{modal:i,center:n,mobile:s}),"data-lv-theme-force":(null==d?void 0:d.theme)===n$.Q.Dark?"dark":"light",children:[!s&&(null==d?void 0:d.col)===2&&(0,eF.jsx)(aS,{loginMode:M,isFromModal:i,resourceList:l}),(0,eF.jsxs)(nJ.Z,{loading:["noSign.checking","hasSign","loginOrganization","showTrustModal","waitBusinessLogin"].some(f.matches)||["forgetPwd.checkResetCode","signUp.registering"].some(A.matches)||["unknow"].some(E.matches)||V&&!["error","hasInfo"].some(I.matches),size:28,children:[(0,eF.jsx)(nQ.ZP,{className:nq()("focus-lock-wrapper"),children:(0,eF.jsxs)(eF.Fragment,{children:[F!==n1.L4.FILL_IN_BASE_INFO||B||G?null:(0,eF.jsx)("div",{className:nq()("lv_new_sign_in_panel_wide-right-wrapper"),children:(null==d?void 0:d.customBasePage)?(0,eF.jsx)(ae,{accountConfig:O,toEmailTypeSignIn:Q,toEmailTypeSignUp:X,customConfig:d}):(0,eF.jsx)(o8,{showTeamInviteInfo:z,isShowIcon:r,thirdPartSignIn:(0,eF.jsx)(o$,{service:S,signType:o,isBOE:L,accountConfig:O,showGoogleBtn:!i}),emailSignIn:(0,eF.jsx)(oY,{toEmailTypeSignIn:Q,toEmailTypeSignUp:X,isBeta:null==d?void 0:d.isBeta}),scanSignIn:$?null:(0,eF.jsx)(oQ,{service:S,signType:o,newVersion:!0}),ccWebSignIn:K?(0,eF.jsx)(aC,{onClick:()=>{null==Y||Y()},newVersion:!0}):null,customConfig:d,title:c,isFromModal:i})}),F===n1.L4.FILL_IN_BASE_INFO&&B&&(0,eF.jsxs)("div",{className:nq()("lv_new_sign_in_panel_wide-right-wrapper"),children:[j===nH.C.LoginIn?(0,eF.jsx)(ao,{showTeamInviteInfo:z,hideSignUp:q,toForgetPwd:()=>{R({type:"SAVE_PASSWORD",password:""}),h?h():R("TO_FORGET_PWD")},toSignUp:J,toBasePage:ee}):null,j===nH.C.SignUp?(0,eF.jsx)(au,{showTeamInviteInfo:z,toLogIn:()=>{R({type:"REPORT_SIGN_IN_ACTION",action:"log_in"}),R({type:"SAVE_PASSWORD",password:""}),g?g():R("TO_SIGN_IN")},toBasePage:ee,customConfig:d}):null]}),F===n1.L4.FORGET_PWD_INFO?(0,eF.jsx)("div",{className:nq()("lv_new_sign_in_panel_wide-enter-code-wrapper"),children:(0,eF.jsx)(am,{toLogIn:()=>{"business"!==M&&R({type:"REPORT_SIGN_IN_ACTION",action:"log_in"}),R({type:"SAVE_PASSWORD",password:""}),g?g():R("TO_SIGN_IN")}})}):null,F===n1.L4.ENTER_VERIFICATION_CODE?(0,eF.jsx)("div",{className:nq()("lv_new_sign_in_panel_wide-enter-code-wrapper"),children:(0,eF.jsx)(aw,{isInvitePage:D,onBackToSignUp:J,isFromModal:i,isMobile:s})}):null,(F===n1.L4.ENTER_BIRTHDAY||G)&&(0,eF.jsx)("div",{className:nq()("lv_new_sign_in_panel_wide-enter-code-wrapper"),children:(0,eF.jsx)(ay,{theme:null==d?void 0:d.theme,isFromModal:i,isMobile:s,brandName:null==d?void 0:d.brandName,customAgeValidateRule:null==d?void 0:d.customAgeValidateRule,onBack:()=>{if(G){N({type:"AUTH_FAIL"});return}R({type:"BACK_TO_ENTER_CODE"})},onAgeErrorBack:()=>{if(G){N({type:"AUTH_FAIL"});return}R({type:"RETURN_SIGN_IN"}),H(!1)},openUnderAgeModal:u})})]})}),(0,eF.jsx)(o6,{})]}),m&&(0,eF.jsx)(nL.sSQ,{size:20,className:"lv_new_sign_in_panel_wide-close",onClick:()=>{R({type:"REPORT_SIGN_IN_ACTION",action:"close"}),null==m||m()},fill:"currentColor"})]})},aE=e=>{let{visible:t,signType:i,closable:r,maskClosable:n=!1,closableABTest:o,params:a={},setVisible:s,onLoginSuccess:l,title:c,resourceList:d,customConfig:u,className:p,openUnderAgeModal:_,...g}=e,[h,m]=(0,eB.useState)(void 0),v=(0,eB.useMemo)(()=>"boolean"==typeof r?!r:h,[r,h]),f=(0,nM.t)(),[y,w]=(0,nw.L)(f),{loginReportParams:b}=y.context,S=(0,nX.v)(f,e=>e.context.loginMode);function C(){null==s||s(!1)}return(0,eB.useEffect)(()=>{o&&(0,nF.y)().getABTestConfigSilent("login_modal_closable",!0).then(e=>{m(!e)}),m(!r)},[o,r]),(0,eB.useEffect)(()=>{if("business"!==S){if(t){var e,i;new oV.F().report({action:"show",enter_from:null!==(e=null==b?void 0:b.pageEnterFrom)&&void 0!==e?e:"",page_from:null!==(i=null==b?void 0:b.fromPage)&&void 0!==i?i:""})}o&&t&&void 0!==h&&(0,nF.y)().getABTestConfig("login_modal_closable",!0)}},[t,o,h,S]),(0,eB.useEffect)(()=>{if("business"===S){if(t){var e,i;new oV.F().report({action:"show",enter_from:null!==(e=null==b?void 0:b.pageEnterFrom)&&void 0!==e?e:"",page_from:null!==(i=null==b?void 0:b.fromPage)&&void 0!==i?i:""})}}},[t,S]),(0,eB.useEffect)(()=>{if("business"===S)o&&t&&void 0!==h&&(0,nF.y)().getABTestConfig("login_modal_closable",!0)},[t,o,h,S]),(0,eF.jsx)(tN.Z,{visible:t,modalRender:function(){return(0,eF.jsx)(ak,{signType:i,onLoginSuccess:l,onClose:v?void 0:C,params:{...a,pageType:"popup"},center:!0,isFromModal:!0,title:c,resourceList:d,customConfig:u,openUnderAgeModal:_})},onCancel:v?void 0:C,unmountOnExit:!0,maskStyle:{zIndex:1002},wrapStyle:{zIndex:1002},maskClosable:n,autoFocus:!1,...g})},aI=e=>{let{onThemeChange:t}=e,[,i]=(0,nS.Fg)(),r=[{label:tj.ZP.t("web_Bright_color_mode",{},"Light mode"),value:n$.Q.Light},{label:tj.ZP.t("web_dark_mode",{},"Dark mode"),value:n$.Q.Dark}];return(0,eF.jsx)(nP.Z.SubMenu,{className:"lv-user__theme-selector",triggerProps:{className:"lv-user__theme-selector__dropdown"},title:(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsxs)("div",{className:"lv-user__theme-selector__item",children:[(0,eF.jsx)(nL.G7B,{className:"user-menu-icon"}),tj.ZP.t("web_Pattern",{},"Theme")]}),(0,eF.jsx)("div",{className:"lv-user__theme-selector__item",children:(0,eF.jsx)(nL.cW1,{size:20})})]}),children:r.map(e=>(0,eF.jsx)(nP.Z.Item,{onClick:()=>{var r;return r=e.value,void(null==t||t(r),i(r))},selectable:!0,children:e.label},e.value))},"theme")};class aT{report(e){this.reporter.reportBecon("switch_website_language",e)}constructor(){this.reporter=(0,nF.y)()}}var aP=i("783055");let aA=e=>{let{onLanguageChange:t,params:i,supportLocales:r,enableLocaleRoute:n=!0}=e,o=(0,nC.b)(),a=o.getSupportLocales().filter(e=>!Array.isArray(r)||r.find(t=>t===e.locale)),s=(e,r)=>{var a;new nU().report({click:r,current_page:null!==(a=null==i?void 0:i.currentPage)&&void 0!==a?a:""}),new aT().report({current_page:null==i?void 0:i.currentPage,language_before:o.getCurrentLocale(),language_after:e,position:"personal_profile"}),null==t||t(),o.setCurrentLocale(e);let s=`${location.pathname}${location.search}`,l=o.formatLocalePath({path:s,locale:e});!n&&(l=aP.uL.getOriginalUrl(s)),s===l?window.location.reload():window.location.href=(0,nN.C)(l,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})};return(0,eF.jsx)(nP.Z.SubMenu,{className:"lv-user__locale-selector",triggerProps:{className:"lv-user__locale-selector__dropdown"},title:(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsxs)("div",{className:"lv-user__locale-selector__item",children:[(0,eF.jsx)(nL.kvV,{className:"user-menu-icon"}),tj.ZP.t("web_language",{},"Language")]}),(0,eF.jsx)("div",{className:"lv-user__locale-selector__item",children:(0,eF.jsx)(nL.cW1,{size:20})})]}),children:a.map(e=>(0,eF.jsx)(nP.Z.Item,{onClick:()=>s(e.locale,e.text),selectable:!0,children:e.text},e.locale))},"locale")},aR=e=>{let{legalData:t,region:i}=e,r=(0,eB.useMemo)(()=>{switch(t.href_target){case"blank":return"_blank";case"self":return"_self";case"parent":return"_parent";case"top":return"_top";default:return t.href_target}},[t.href_target]),n=(0,eF.jsx)(nP.Z.Item,{className:"lv-user__policy-selector__menu-item",children:(0,eF.jsx)("span",{style:{display:"inline-block",width:"100%",height:"100%"},children:(0,eF.jsxs)("a",{href:`${t.href}`,target:r,className:"lv-user__policy-selector__item-anchor",children:[(0,eF.jsx)("span",{className:"text-wrapper",children:(0,eF.jsx)(nT.Z.Text,{className:"text",ellipsis:{cssEllipsis:!0,showTooltip:!0},children:t.title})}),t.icon&&(0,eF.jsx)("span",{className:"icon",style:{backgroundImage:`url(${t.icon})`}})]})})},t._id);return t.country.length&&t.filter_type?"include"===t.filter_type?t.country.includes(i.toLocaleLowerCase())?n:null:null:n},ax=()=>{var e;let t=(0,nM.t)(),[i]=(0,nw.L)(t),r=null===(e=i.context.userInfo)||void 0===e?void 0:e.region,n=(0,nC.b)().getCurrentLocale(),o=(0,eB.useMemo)(()=>[{_id:"65a89591b3f85202789cddf1",title:tj.ZP.t("web_home_legal_terms_of_service",{},"Terms of Service"),href:(0,nN.C)(n0.yM.TERMS_OF_CAPCUT({region:r,lang:n}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",country:[]},{_id:"65a89591b3f85202789cddf4",title:tj.ZP.t("web_home_legal_privacy_policy",{},"Privacy Policy"),href:(0,nN.C)(n0.yM.PRIVACY_POLICY({region:r,lang:n}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",country:[]},{_id:"65a89591b3f85202789cddf5",title:tj.ZP.t("web_home_legal_cookies_policy",{},"Cookies Policy"),href:(0,nN.C)(n0.yM.COOKIE_POLICY({region:r,lang:n}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",country:[]},{_id:"65a89591b3f85202789cddf6",title:tj.ZP.t("web_home_legal_license_agreement",{},"License Agreement"),href:(0,nN.C)(n0.yM.MATERIALS_POLICY({region:r,lang:n}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",country:[]},{_id:"65a89591b3f85202789cddf7",title:tj.ZP.t("web_home_legal_creator_terms_of_use",{},"Creator Terms of Service"),href:(0,nN.C)(n0.yM.CREATOR_AGREEMENT({region:r,lang:n}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",country:[]},{_id:"65a89591b3f85202789cddf8",title:tj.ZP.t("web_home_legal_community_guidelines",{},"Community Guidelines"),href:(0,nN.C)(n0.yM.COMMUNITY_GUIDELINE({region:r,lang:n}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",country:[]},{_id:"65a89591b3f85202789cdd09",title:tj.ZP.t("Compliance_title_australianonlinesafety",{},"Australian Online Safety"),href:(0,nN.C)(n0.yM.AUSTRALIAN_ONLINE_SAFETY({region:r,lang:n}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",filter_type:"include",country:["au"]},{_id:"65a89591b3f85202789cdd10",title:tj.ZP.t("dsa_compliance",{},"DSA Compliance"),href:(0,nN.C)(n0.yM.DSA_COMPLIANCE({region:r,lang:n}),null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",filter_type:"include",country:["fr","de","it","se","ro","pl","nl","es","pt","gb","at","be","bg","hr","cy","cz","dk","fi","gr","hu","is","ie","lv","lu","mt","no","li","sk","si"]},{_id:"65a89591b3f85202789cdd11",title:tj.ZP.t("web_gpc_title_privacy_choice",{},"Your Privacy Choices"),href:(0,nN.C)("./cookie-settings",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),href_target:"blank",country:[]}],[r,n]);return o?(0,eF.jsx)(nP.Z.SubMenu,{className:"lv-user__policy-selector",triggerProps:{className:"lv-user__policy-selector__dropdown"},title:(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsxs)("div",{className:"lv-user__policy-selector__item",children:[(0,eF.jsx)(nO.X8k,{className:"user-menu-icon"}),tj.ZP.t("web_policy",{},"Policy")]}),(0,eF.jsx)("div",{className:"lv-user__policy-selector__item",children:(0,eF.jsx)(nL.cW1,{size:20})})]}),children:o.map((e,t)=>(0,eF.jsx)(eF.Fragment,{children:(0,eF.jsx)(aR,{legalData:e,region:r},t)}))},"policy"):null};var aN=i("789962"),aL=i("209616"),aO=i("598321");let aM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAcHSURBVHgB5ZtPUBN3FMffbxMUsEgiqLXWMXQSiZ3OlN56M/bEn7YwvfWGPbUn9NqL4qntpdhbT+qtR2g7A53pDOHmqcJMO2LJjLEWZRRIEAoByW7fd0NoQrNkk32/GMbPDO4m/naz7/3ee7/fe7/fKtJMd/dAiCgbU0p1EamzSlHIsiiAY2E7/i7J36VzR2vGssxpy/JPT0yMJkkjijTAQrPA5gDfvn+voFWQ5L+4aWZvT0z8HCdhxBQQiw0EmpvNIe7py+hh0gOs41o2a0xJWYZnBdRI8CJyrmKNmKZx26sifOSBnp6BocOHrVF+pG7+2Ei1g39LsZvRwLlznem5ufszVCVVWQACG5viTX6AGNUHSdNUF6uxhootAL3u81k/8GmU6geMKoPh8LnNROLPO5VcWJEC+vo+/pYP16i25u6WRo5D3ZFIJ7FLTLm9yLUCenv7b7LHfE51j4pFItEQK2HMVWs3jVj4u3zoogMEj0jx8fGxi+XaGeUa5Hr+YAkPEKB3nn1f9nWB3t6Bq3y4TAeXrnC4M5BI3P/FqYGjCyDa81A3QoJsb7+g1dU1ymQ2+Hzb/gwMw6BDhw5Tc3MzHTlyhPz+BpKE84or4+M/lZSlpAIwzvNQd1dqZgdhnz17agvuhtdea6FgMCipiDTPE94rNU8oGQMMw5qUEn5lZYXm5x+5Fh6sra3So0d/USqVIiECmLiV+o//xYDe3o8G2TAGSQAIkEotsQlaVA05pSlqamoiryAr5YnSyt6JUpELwPTR+3waIo9A+HR6mSQIBI7ZLiFAen1ddcTjo+n8F0Uu4POZQyQgPHxeSniAe1XiQvuAzLVoVNtVQK5yI2P6T548Jmnk4oEaQgqf/7SrAMPIxiQC38bGxu7wJgksQIcVFLiAcZUEQATXxeqq1L3VUP7MVgBqeCTg+yCTyZAu1tf/ISEC3d0fxnBiK4ALmIMkgGmaWsxfx/2VMgZw3FGAukACbG5ukm6gBAlY5n77uDP2PyABEAAXFuRHgEJOnXqDGhu9T4wAT487DKW2xVLdhgbZJKYUSJzk7pWNsQIMMQVIPpwTyBqlsCzVxU+s3iUhoAAp8yxFY6NsKZLnPSF0WYgEkX7IQlpajpIkHAjPQgGiqzmtrQEtruD3+8WVyxliQNwCIPzRo60kTUtLi3iliAlpiVrB4DHRYIXeR0qsA21h++TJ10V6DMJj7NeFNgXkH9yLEiTuUQ4oIEmagACnT79ZVUxobW3la89oFZ5J+vmfNGkEQbGtrd0eHVKpZTtbdEpo0BYVYQivWXAbngekoYAk1WDlB9Zw/PgJ+3xra3PPuoCPg+Yh0cDpBi7WPmQFWA81bRVyBILWWthSsMFNcwywpukVJZv13TVM0xenVxRsx7Ntn1dRUQ8IkQZQI4DPI/htbW1xDp51LGogCCL4IV4gJiCxklgUKQX2I/LyeYd/5+NYYaHQKxAQS2LPn6crquCgLZSFv1z9L7WTAzRJrxUiD4jj6M/9sDHKVSHPCoAAqN9DcCkwWqDSjD/JRVNsvMRxN/z39fWnvKwLoMexgiNVs3MinxcgOaoWlvMBm/9bODf++1LdoCpZWlqi5eVF7cIDWMTi4lP7N6uFZR3On+8qgGPOCHZgUgVAYCyDSZq8W/Cb8/N/V6N0POzuLrLd5fHZ2dlMJHIeITdGLnn8eJ5L4foWQsqRzWbtUnxl7mB9zeY/mv9UlA1WYgUwQUTrlw3WC926A3yfA/6twu+KNkjACsLh85ushO79boSIjI0P9QKsEPlEuZIZ+/6ViYnRok2UJZOAnp7+Sad9wAhC8HudS2DVgEnUmTNnHeuRhZG/6LrSjdUlJ1dASltvwoP8HMQBHuLVB6X+o6QCsJuKl42G936fn5TUK04zTxb+utNOcseNkonE7J1IpDPIXvJ+/rulpUV7Pl/PcK1/T/5gDbPpf+XUft+donNz9yfC4c6O3AtPxJOdpZpMdryADgoEchuquOBxa3z8xyv7tS9bFOUbDPJhWtfWF2nQQRgaOehN8rNfKtfe1XZ5toTvg8G2DlbAgdg0zV5wa2rq10/ctHX9vsDCwvxoe/sJVUevyZQCOzJvzMz89oXbCyp6Y4STkHhb2/EVw7ADY129NcIdw2Og9eW9e38MV3QdVUE0Gg0p5Zvky0P08sFO3DgP0p/xTDZJFeKpHByNvj3IPnH1ZSkCvc7SX+der3pbv6f3BhcXn023t7eNKWUgNuAtspq4RU5w+mZjY+3TRGIuTh4QWxCAW/CoGtNoERam5zzKfZfJrI0kk0mRIoSWFZFo9B1WhDXIpxc8KGNnj71KcuY/ZlnG2Ozs73ESRvuSUC5gNnSxr3ZxD2I/Uoh/lmuPVqi4peLSvIVeTfJ05qFl+WaIXsSrCWyV8C+Ugf9/ttPT2QAAAABJRU5ErkJggg==",aD=e=>{let{onClick:t,avatar:i}=e;return(0,nI.default)(()=>{let e=document.getElementById("js-ssr-user-avatar");null==e||e.remove()}),(0,eF.jsx)(nR.Z,{className:"user-avatar",size:32,onClick:t,children:(0,eF.jsx)("img",{alt:"avatar",src:null!=i?i:aM,crossOrigin:"anonymous"})})},aj=()=>{let e=location.href,t={};try{let i=new URL(e);for(let[e,r]of new URLSearchParams(i.search))t[e]=r;e=i.href.replace(i.search,"")}catch(e){}let i=encodeURIComponent(e),r=(0,nG.G3)(nV.l.LOGIN.PATH,{...t,current_page:"share_page",redirect_url:i});(0,nW.gB)(r)};function aF(e){var t,i,r;let{mode:n="button",showMenu:o=!0,shouldRedirect:a=!1,params:s,enableReporter:l=!1,cookieConsent:c,logOutRedirectUrl:d,language:u,enableLocaleRoute:p=!0,onhandleClick:_,enableLangSelector:g=!0,enableThemeSelector:h=!0,signModalClosable:m,signModalClosableABTest:v,showProfile:f=!0,afterModalClose:y,expandModalInstance:w,eventParams:b,resourceList:S,title:C,customConfig:k,modalProps:E,openUnderAgeModal:I}=e,P=(0,nM.t)(),[A,R]=(0,nw.L)(P),x=A.context.thirdPartSignInRef,[,N]=(0,nw.L)(x),{userInfo:L,isBOE:O}=A.context,M=A.matches("noSign"),D=A.matches("hasSign"),j=(0,aL.k6)(),F=A.matches({noSign:"googleDriveConfirmSigning"}),U=A.matches({noSign:"thirdPartyConfirmSigning"}),[B,H]=(0,eB.useState)(A.matches({noSign:"signing"})),G=A.matches({hasSign:"preExec"});(0,eB.useEffect)(()=>{let e=A.matches({noSign:"signing"})||A.matches({noSign:"checking"})||A.matches({loginOrganization:"fetchingList"})||A.matches({loginOrganization:"autoSelectSubject"})||A.matches({loginOrganization:"getBusinessUserInfoAfterLogin"})||A.matches("showTrustModal");H(t=>{let i=A.matches({noSign:"checking"})||A.matches({noSign:"checkingThirdOpenId"}),r=A.matches({loginOrganization:"getBusinessUserInfo"});return(!!t||!i)&&(r?t:!F&&!U&&(!!t&&!e&&!!G||e))})},[A.value]);let W=()=>{new nj.H().report({target:"login_profile",position:nj.q.HEADER}),a?aj():R({type:"SIGN_IN"}),null==_||_()},V=(0,eB.useCallback)(()=>{var e,t;new nU().report({click:"account_setting",current_page:null!==(e=null==s?void 0:s.currentPage)&&void 0!==e?e:""}),(0,nW.gB)(nV.l.SETTINGS.PATH,{from_page:null!==(t=null==s?void 0:s.currentPage)&&void 0!==t?t:"",settings_tab:"info_page"})},[s]),Z=()=>{var e;new nB.V().authorizeWindowReport({current_page:(null===(e=location.pathname)||void 0===e?void 0:e.includes(nV.l.EDITOR_GRAPHIC.PATH))?nZ.B.PictureEdit:nZ.B.Editor,source:"authorize_fail",action:"continue",window_type:"google_drive"}),R({type:"CONFIRM_THIRD_LOGIN"}),N({type:"AUTH",platform:O?nz.Lt.Google:nz._K.Google,name:"google",source:nH.C.LoginIn,callback:e=>{((null==e?void 0:e.errorCode)||(null==e?void 0:e.errorMsg))&&console.warn("error",e)}})},z=e=>{!e&&R("EXIT_SIGN_IN")};(0,nD.d)(c,l),(0,eB.useEffect)(()=>{s&&R({type:"UPDATE_REPORT_PARAMS",params:s})},[s]);let[$]=(0,nS.Fg)(),K=[$,(0,nC.b)().getCurrentLocale()];(0,eB.useEffect)(()=>{var e,t;if(F){new nB.V().authorizeWindowReport({current_page:(null===(e=location.pathname)||void 0===e?void 0:e.includes(nV.l.EDITOR_GRAPHIC.PATH))?nZ.B.PictureEdit:nZ.B.Editor,source:"authorize_fail",action:"show",window_type:"authorize_fail"});let t=tj.ZP.t("web_marketplace_text_can_not_access_google",{},"You need to sign in to sync media from Google Drive."),i=tj.ZP.t("web_marketplace_text_log_in"),r=tj.ZP.t("web_marketplace_text_cancelled"),n=tN.Z.confirm({content:t,title:tj.ZP.t("web_maketplace_title_no_log_in",{},"You are not signed in"),footer:(0,eF.jsxs)("div",{className:"lv-modal-footer lv-user",children:[(0,eF.jsx)(nx.Z,{type:"outline",onClick:()=>{R({type:"CONFIRM_THIRD_LOGIN",cancel:!0}),null==n||n.close()},children:r}),(0,eF.jsx)(nx.Z,{type:"primary",onClick:()=>{Z(),null==n||n.close()},children:i})]}),onCancel:()=>{R({type:"CONFIRM_THIRD_LOGIN",cancel:!0})},focusLock:!1,maskClosable:!1})}else if(U){let e=new nB.V,i=(null===(t=location.pathname)||void 0===t?void 0:t.includes(nV.l.EDITOR_GRAPHIC.PATH))?nZ.B.PictureEdit:nZ.B.Editor;e.notLoginPopupReport({current_page:i,action:"show"});let r=tj.ZP.t("web_shopify_text_can_not_access_sign_in",{},"You need to sign in to upload files from shopify."),n=tj.ZP.t("web_shopify_text_log_in",{},"Sign in"),o=tj.ZP.t("web_shopify_text_calcelling",{},"Cancel"),a=tN.Z.confirm({content:r,title:tj.ZP.t("web_shopify_title_no_log_in",{},"You are not signed in"),footer:(0,eF.jsxs)("div",{className:"lv-modal-footer lv-user",children:[(0,eF.jsx)(nx.Z,{type:"outline",onClick:()=>{R({type:"CANCEL_THIRD_LOGIN"}),e.notLoginPopupReport({current_page:i,action:"cancel"}),null==a||a.close()},children:o}),(0,eF.jsx)(nx.Z,{type:"primary",onClick:()=>{R({type:"SIGN_IN"}),e.notLoginPopupReport({current_page:i,action:"login"}),null==a||a.close()},children:n})]}),onCancel:()=>{R({type:"CANCEL_THIRD_LOGIN"})},focusLock:!1,maskClosable:!1})}},[F,U]);let q=(0,aO.i)();return(0,eF.jsxs)(eF.Fragment,{children:[M&&(0,eF.jsxs)(eF.Fragment,{children:["button"===n&&(0,eF.jsx)(nx.Z,{type:"primary",className:"sign-up-btn",onClick:W,children:tj.ZP.t("log_in")}),"avatar"===n&&(0,eF.jsx)(nR.Z,{className:"user-avatar",size:32,onClick:W,children:(0,eF.jsx)("img",{src:(0,nN.C)(aM,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),alt:tj.ZP.t("log_in"),crossOrigin:"anonymous"})})]}),D&&(o?(0,eF.jsx)(nA.Z,{position:"br",trigger:"click",triggerProps:{autoFitPosition:!1},focusLock:!0,droplist:(0,eF.jsxs)(nP.Z,{className:q?"user-menu--new":"user-menu",style:{top:"-15px"},selectable:!1,selectedKeys:K,children:[(null==L?void 0:L.name)?(0,eF.jsxs)("div",{className:"user-info",children:[(0,eF.jsxs)("div",{className:"info",children:[(0,eF.jsx)("img",{className:"user-info-avatar",src:null==L?void 0:L.avatar,alt:"avatar",width:28,height:28,crossOrigin:"anonymous"}),(0,eF.jsxs)("span",{className:"user-info-detail",children:[(0,eF.jsx)(nT.Z.Text,{className:"detail-item nickname",ellipsis:{cssEllipsis:!0,showTooltip:!0,rows:1},children:null==L?void 0:L.name}),(null==L?void 0:L.email)&&(0,eF.jsx)(nT.Z.Text,{className:"detail-item email",ellipsis:{cssEllipsis:!0,showTooltip:!0,rows:1},children:null==L?void 0:L.email})]})]}),w&&(0,eF.jsx)(aN.O,{eventParams:{pageFrom:"profile_icon_upgrade",currentPage:null==s?void 0:s.currentPage,...b},expandModalInstance:w})]}):null,(0,eF.jsxs)(nP.Z.ItemGroup,{children:[f&&(0,eF.jsx)(nP.Z.Item,{onClick:()=>{var e,t,i;let r=(0,nG.G3)(nV.l.WORKSPACE.CHILD.PROFILE.PATH,{enter_from:"click_view_personal_page",from_page:null!==(e=null==s?void 0:s.currentPage)&&void 0!==e?e:"personal_page"});(null==j?void 0:j.push)?null==j||null===(t=j.push)||void 0===t||t.call(j,r):(0,nW.gB)(nV.l.WORKSPACE.CHILD.PROFILE.PATH,{enter_from:"click_view_personal_page",from_page:null!==(i=null==s?void 0:s.currentPage)&&void 0!==i?i:"personal_page"})},children:(0,eF.jsxs)("div",{className:"user-menu-item",children:[(0,eF.jsx)(nL.N0W,{className:"user-menu-icon"}),tj.ZP.t("web_personal_page_text_view_home_page",{},"View profile")]})},"homepage"),h&&(0,eF.jsx)(aI,{onThemeChange:e=>{var t;new nU().report({click:e===n$.Q.Dark?"dark_mode":"light_mode",current_page:null!==(t=null==s?void 0:s.currentPage)&&void 0!==t?t:""})}}),g&&(0,eF.jsx)(aA,{enableLocaleRoute:p,onLanguageChange:()=>null==_?void 0:_(),params:s,...u}),(0,eF.jsx)(nP.Z.Item,{onClick:V,style:{margin:"8px 0"},children:(0,eF.jsxs)("div",{className:"user-menu-item",children:[(0,eF.jsx)(nL.ZRo,{className:"user-menu-icon"}),tj.ZP.t("web_deactivate_button_settings",{},"Settings")]})},"settings"),(0,eF.jsx)(ax,{}),(0,eF.jsx)(nP.Z.Item,{onClick:()=>{var e,t,i,r,n;new nU().report({click:"log_out",current_page:null!==(n=null==s?void 0:s.currentPage)&&void 0!==n?n:""}),nS.VO.clear(),R({type:"SIGN_OUT",redirectUrl:d}),null===(r=window)||void 0===r||null===(i=r.google)||void 0===i||null===(t=i.accounts)||void 0===t||null===(e=t.id)||void 0===e||e.disableAutoSelect(),null==_||_()},children:(0,eF.jsxs)("div",{className:"user-menu-item",children:[(0,eF.jsx)(nO.f3G,{className:"user-menu-icon"}),tj.ZP.t("log_out")]})},"logout")]})]}),children:(0,eF.jsx)(aD,{avatar:null!==(i=null===(t=A.context.userInfo)||void 0===t?void 0:t.avatar)&&void 0!==i?i:"",onClick:()=>{var e;if(!!o)new nU().report({click:"portrait",current_page:null!==(e=null==s?void 0:s.currentPage)&&void 0!==e?e:""})}})}):(0,eF.jsx)(aD,{avatar:""})),(null==k?void 0:k.newVersion)?(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsx)(aE,{signType:nY.logIn,visible:B,setVisible:z,closable:m,closableABTest:v,afterClose:y,customConfig:k,resourceList:S,openUnderAgeModal:I,params:s}),!(null==k?void 0:k.hideFirstLoginNotice)&&(0,eF.jsx)(o3,{appId:k.appId,theme:null==k?void 0:k.theme,hideLogo:null==k?void 0:k.hideLogo,brandLogo:null==k?void 0:k.logo,brandNameIcon:null==k?void 0:k.brandNameIcon,brandName:null!==(r=null==k?void 0:k.brandName)&&void 0!==r?r:""})]}):(0,eF.jsx)(oW,{...E,signType:nY.logIn,visible:B,setVisible:z,closable:m,closableABTest:v,afterClose:y,resourceList:S,title:C})]})}var aU=i("905806");class aB extends eV.JT{onUserTransition(e){var t,i;if(!e)return;if("SIGN_OUT"===e.event.type){this._onDidLogout.fire();return}let r=null===(t=e.context)||void 0===t?void 0:t.userInfo,n=null===(i=e.context)||void 0===i?void 0:i.vipInfo;!(0,tJ.Z)(this._userProfile,r)&&(!r.hasLogin&&""===this._unloginRegion&&(this._unloginRegion=r.region),this._userProfile=r,this._onDidChangeProfile.fire(r)),!(0,tJ.Z)(this._userVipInfo,n)&&(this._userVipInfo=n,this._onDidChangeVipInfo.fire(n))}get unloginRegion(){return this._unloginRegion}get regionSettings(){var e;return(0,P.Y2)(this._userProfile,"user profile is undefined"),{webIdc:this._userProfile.newIdc,region:this._userProfile.region,domain:{[ei.b_.Default]:null===(e=this._userProfile.reqDomain)||void 0===e?void 0:e.web_domain}}}get userProfile(){return(0,P.Y2)(this._userProfile,"user profile is undefined"),this._userProfile}get isVip(){var e;return!!(null===(e=this._userVipInfo)||void 0===e?void 0:e.flag)}get userVipInfo(){return this._userVipInfo}get loginFrom(){return this.userService.loginFrom}get uniqueId(){return this.hasLogin?this.userProfile.uid:this._webId}get region(){var e,t;if(null===(e=this._userProfile)||void 0===e?void 0:e.region)return this._userProfile.region;let i=window.__userInfo;if(i)return(0,P.Y2)(null===(t=i.location)||void 0===t?void 0:t.code,"user region is not injected"),i.location.code;(0,P.ss)("no user region was found")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{needFireLoginCallback:t}=e;return new Promise((e,i)=>{this.userService.listenOnUserStatusChange(r=>{let{hasSign:n,noSign:o,initFailed:a}=r;if(a&&i(Error("[user-plugin]: init user-os module failure.")),o||n){let i=n&&!this.hasLogin;this.hasLogin=!!n;let r=nm.O.getUserInfo();this.teaReportService.getWebId().then(e=>{this._webId=e}).finally(()=>{this._userProfile={...r,webId:this._webId},i&&(null==t||t(),this._onDidLogin.fire()),e()})}})})}login(e){var t;(null==e?void 0:e.reportParams)&&(e.reportParams.pageEnterFrom&&!e.reportParams.statusEnterFrom&&(e.reportParams.statusEnterFrom=e.reportParams.pageEnterFrom),this.userService.dangerUsedUserMachineService.send({type:"UPDATE_REPORT_PARAMS",params:{currentPage:this._currentPage,...e.reportParams}})),this._signModalClosable=null===(t=null==e?void 0:e.signModalClosable)||void 0===t||t,this._render(),this.userService.login(e)}loginWithAuthToken(e){return new Promise(t=>{let i=(0,eM.V)(this.onDidLogin)(()=>{t((0,I.ly)())});this.userService.dangerUsedUserMachineService.send({type:"SIGN_IN_WITH_AUTH_TOKEN",data:{token:e.token,state:e.state,aid:e.aid,onFailure:e=>{i.dispose(),t((0,I.wf)(-1,null==e?void 0:e.message))}}})})}logout(e){this.userService.logout(e)}resetAndReload(){}getAgeGateChecker(){return nm.O.getAgeGateChecker()}_render(){return this._domContainer.render((0,eF.jsx)(nE,{showFallback:!0,service:this.userService.dangerUsedUserMachineService,options:{isBOE:!1},children:(0,eF.jsx)(aF,{enableReporter:!0,cookieConsent:aU.gx,signModalClosable:this._signModalClosable,showProfile:!1})}))}constructor(e,t,i){super(),this._currentPage=e,this.teaReportService=t,this.userService=i,this._onDidLogin=this._store.add(new nh.Q),this.onDidLogin=this._onDidLogin.event,this._onDidLogout=this._store.add(new nh.Q),this.onDidLogout=this._onDidLogout.event,this._onDidChangeProfile=this._store.add(new nh.Q),this.onDidChangeProfile=this._onDidChangeProfile.event,this._onDidChangeVipInfo=this._store.add(new nh.Q),this.onDidChangeVipInfo=this._onDidChangeVipInfo.event,this._signModalClosable=!0,this._unloginRegion="",this._webId="";let r=window.document.createElement("div");r.id="account-service-container",window.document.body.append(r),this._domContainer=eU.createRoot(r),this._render(),this.userService.registerTransition(this.onUserTransition.bind(this))}}aB=(0,b.gn)([(0,b.fM)(1,t_.w),(0,b.fM)(2,et.S),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[String,void 0===t_.w?Object:t_.w,void 0===et.S?Object:et.S])],aB);var aH=i("141314"),aG=i("786022"),aW=i("246457"),aV=i("709037"),aZ=i("971420"),az=i("609591"),a$=i("396570"),aK=i("753637"),aq=i("321327"),aY=i("613069"),aJ=i("993757"),aQ=i("343828"),aX=i("691805"),a0=i("554170"),a1=i("597623"),a2=i("691065"),a6=i("610142"),a3=i("605405"),a4=i("214312"),a5=i("498166"),a8=i("134392"),a7=i("221643"),a9=i("176022"),se=i("867206"),st=i("757907"),si=i("8441"),sr=i("273238"),sn=i("28392"),so=i("745299"),sa=i("763580"),ss=i("250851"),sl=i("587232"),sc=i("225698"),sd=i("688923"),su=i("551377"),sp=i("783122"),s_=i("485572"),sg=i("683728"),sh=i("374381"),sm=i("376915"),sv=i("114021"),sf=i("861807"),sy=i("384833"),sw=i("174745"),sb=i("290563"),sS=i("982313"),sC=i("437513");let sk=(0,E.Tx)("task",(e,t,i,r)=>{var n,o,a,s,l,c,d,u,p,_,g,h,m,v,f,y,w,b,S;t.register(aW.d,new C.M(aV.z,[[t7.g,t9.P,ie.L]],!1)),t.register(eD.x,it.s),t.register(tz.J,new C.M(aZ.e,[],!1)),t.register(t6.a,new C.M(ii.E,[[t4]],!1)),t.register(az.i,a$.v),t.register(aK.L,aq._),t.register(et.S,new C.M(null!==(v=null===(n=i.userService)||void 0===n?void 0:n.service)&&void 0!==v?v:ny,(null===(o=i.userService)||void 0===o?void 0:o.params)||[{isNewPageLoginFacebook:!0,enableDeviceAgeBan:null===(a=window._libra_abtest_uuid)||void 0===a?void 0:a.enable_age_gate_signup,enableThirdPartySignAgeGate:null===(s=window._libra_abtest_uuid)||void 0===s?void 0:s.enable_age_gate_signup}],!1)),t.register(aY.H,aJ.$),t.register(ei.Gw,new C.M(null!==(f=null===(l=i.capcutAccountService)||void 0===l?void 0:l.service)&&void 0!==f?f:aB,[r?"template_editor":"editor"],!1)),t.register(Q.W,null!==(y=null===(c=i.workspaceService)||void 0===c?void 0:c.service)&&void 0!==y?y:ir.A),!function(e,t){var i;let r;let{localesMap:n,pI18nResult:o,__lng:a}=window;n&&o&&a&&(r={lng:a,resources:(async()=>{try{if(await o,window.__lngResource)return{[a]:{translation:window.__lngResource}};return}catch(e){return}})()}),e.register(eW.S,new C.M(sm.D,[{locale:(0,sv.o)({locale:null!==(i=new URLSearchParams(window.location.search).get("lang"))&&void 0!==i?i:void 0}),...null!=t?t:{},injectI18nResource:r}],!1))}(t,null===(d=i.i18nService)||void 0===d?void 0:d.params),t.register(ts.X,aQ.f),t.register(aX.U,a0.E),t.register(a1.lT,a2.g),t.register(a6.L,a3.t),t.register(a4.u,a5.g),t.register(a8.d,a7.J),t.register(a9.W,se.C),t.register(sf.u,sy.O),t.register(io.m,new C.M(ia.r,[function(){let e=(0,t2.e)({headers:{"Content-Type":"application/json"}});(0,t5.V)(e,{appVersion:"999.999.999"});let t=new aH.w(t8.c);return function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{header:o,user:a,evtParams:s}=n;e.request({method:"POST",url:t.url("EVENT_REPORT"),data:{event_name:i,custom_info:JSON.stringify({header:o,client_ip:"",params:s,user:a}),params:JSON.stringify(r),region:er._L.getVar("country_code"),app_id:aG.kJ},withCredentials:!0})}}()],!1));t.register(is.yR,il.g),t.register(ic.c,id.c),t.register(iu.B,new C.M(ip.Y,[],!1)),t.register(i_.R,ig.m),t.register(ih.p,im.l),t.register(iv.u,new C.M(iy.E,[],!1)),t.register(iw.F,new C.M(ib.i,[null==i?void 0:null===(u=i.audioDataService)||void 0===u?void 0:u.params],!1)),t.register(iS.A,iC.E),t.register(ik.T,iE.g),t.register(iI.m,iT.Z),t.register(iP.Y,iA.b),t.register(iR.hv,ix.I),t.register(iN.s,iL.L),t.register(iO.m,new C.M(iM.l,[{}],!1)),t.register(iD.k,ij.Z),t.register(iF.j,iU.H),t.register(iB.u,iH.z),t.register(iG.i,iW.q),t.register(iV.o,iZ.R),t.register(iz.n,i$.S),t.register(iK.X,new C.M(iq.i,[null!==(w=null===(p=i.autoBeautyDataService)||void 0===p?void 0:p.params)&&void 0!==w?w:{}],!1)),t.register(iY.u,iJ.x),t.register(iQ._,iX.h),t.register(i0.l,i1.x),t.register(i2.C,i6.I),t.register(i3.H,i4.u),t.register(i5.g,new C.M(i8.H,[null==i?void 0:null===(_=i.collectionService)||void 0===_?void 0:_.params],!1)),t.register(i7.B,new C.M(i9.u,[null!==(b=null===(g=i.subtitleTemplateDataService)||void 0===g?void 0:g.params)&&void 0!==b?b:{}],!1)),t.register(re.i,rt.K),t.register(ri.Z,rr.w),t.register(rn.J,new C.M(ro._,[null==i?void 0:null===(h=i.collectionService)||void 0===h?void 0:h.params],!1)),t.register(eJ.o,ra._),t.register(rs.E,rl.T),t.register(rc.s,new C.M(rd.f,[],!1)),t.register(ru.m,rp.b),t.register(r_.s,rg.g),t.register(rh.V,rm.a),t.register(rv.N,rf.P),t.register(ry.T,new C.M(rw.$,[],!1)),t.register(rb._,rS.b),t.register(rC.i,rk.Q),t.register(rE.Q,rI.p),t.register(rT.Z,rP.o),t.register(rA.d,rR.j),t.register(rx.z,rN.b),t.register(rL.o,rO.q),t.register(rM.f,rD.w),t.register(rj.W,rF.q),t.register(rU.a,rB.o),t.register(rH.c,rG.s),t.register(rW.R,rV.p),t.register(rZ.b,rz.G),t.register(r$.D,rK.Q),t.register(rq.g,rY.H),t.register(rJ.l,rQ.e),t.register(rX.e,r0.t),t.register(r1.J,r2.p),t.register(r6.Z,r3.Q),t.register(r4.U,r5.m),t.register(r8.i,r7.L),t.register(st.L,si.V),t.register(r9.j,new C.M(ne.o,[null!==(S=null===(m=i.cloneVoiceDataService)||void 0===m?void 0:m.params)&&void 0!==S?S:{}],!1)),t.register(nt.x,ni.m),t.register(nr.Q,nn.W),t.register(no.z,na.y),t.register(ns.e,nl.j),t.register(nc.H,nd.f),t.register(sr.b,new C.M(sn.x,[!0])),t.register(so.S,sa.u),t.register(ss.r,sl.S),t.register(sc.w,(0,sC.n)(sd.q,[su.x])),t.register(nu.C,np.r),t.register(e2.tx,n_.V),t.register(tp.c,ng.z),t.register(sp.E,(0,sC.n)(s_.i)),t.register(sg.Z,sh.C),t.register(e5.AS,sw.k),t.register(sb.k,sS.M)},"registerAppService");var sE=i("593062"),sI=i("606386"),sT=i("205271"),sP=i("570895"),sA=i("592040"),sR=i("396190"),sx=i("30947"),sN=i("160100");let sL=e=>{e.invokeFunction(async e=>{let t=e.get(ed.D),i=e.get(rW.R),r=e.get(e1.U),n=e.get(t_.w),o=e.get(sR.Y),a=e.get(sN.n),s=await n.getWebId(),l=o.sdkVersion,c=ty(o,a),d=await i.getEffectSettings({aid:aG.kJ,webId:s,uid:t.userProfile.uid,veVersion:l,...c});if(d.ok){let e=d.value;(e=>{var t,i;let r=Object.keys(e).filter(e=>e.startsWith("ab_expo_launch_"));null===(i=e.ab_expo_config)||void 0===i||null===(t=i.launch)||void 0===t||t.forEach(t=>{void 0!==e[t]&&r.push(t)}),new Set(r).forEach(e=>{n.getABTestVar(e,null)})})(e),(0,sx.PS)(r,e,s,l)}else console.error("[startup] failed to fetch effect settings")})};var sO=i("730963"),sM=i("820193"),sD=i("144144");let sj="/lv/v1",sF=["/sf/13/v5/CreatePartUpload",`${sj}/upload/create_upload_task`,`${sj}/render_task/create`,`${sj}/share_task/publish_asset_to_third_party_platform`];async function sU(){try{var e;(0,sD.Ie)(F.INIT_WEBMS_SDK),await function(){var e,t;let i=document.createElement("script");i.src=(0,nN.C)("https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/webmssdk/1.0.0.666/webmssdk.js",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),i.async=!0;let r=new Promise(e=>{i.onload=function(){e(!0)}});return null===(t=document.getElementsByTagName("head"))||void 0===t||null===(e=t[0])||void 0===e||e.appendChild(i),r}();let t="sg1"===er._L.getVar("web_idc")?"sg-capcut":"va-capcut";null===(e=window.byted_acrawler)||void 0===e||e.init({aid:348188,isSDK:!1,region:t,boe:!1,enablePathList:sF,mode:514}),(0,sD.oe)(F.INIT_WEBMS_SDK)}catch{}}var sB=i("838587");let sH=()=>{let e="",t=document.createElement("canvas").getContext("webgl"),i=null==t?void 0:t.getExtension("WEBGL_debug_renderer_info");return i&&t&&(e=t.getParameter(i.UNMASKED_RENDERER_WEBGL)),e},sG=async()=>{if("function"!=typeof navigator.getBattery)return{};let e=await navigator.getBattery();return{isCharging:e.charging,batteryRemain:e.level}},sW=async e=>{let t=(0,sB.XU)(),i=await (0,sB.v1)(),r=(0,sB._z)();if(t.ok){let[,i]=t.pair();if(i<e)return{status:"DEVICE_MEMORY_NOT_ENOUGH",deviceMemory:i}}if(t.ok&&i.ok){let[,r]=t.pair(),[,n]=i.pair(),{bytes:o}=n;return r-o/1e9>e?{status:"PASS",deviceMemory:r,memoryMeasurementResult:n}:{status:"CURRENT_REMAINING_MEMORY_NOT_ENOUGH",deviceMemory:r,memoryMeasurementResult:n}}if(r.ok){let[,e]=r.pair(),{totalJSHeapSize:t,jsHeapSizeLimit:i}=e;return{status:"PASS",memoryMeasurementResultLegacy:e}}return{status:"FEATURE_NOT_SUPPORT"}},sV=async(e,t)=>{let{memoryRequirement:i}=t,r=await e.ensureManager.ensureModel("tt_skeleton");await r.waitForResourceValueReady();let n=await sG(),o=async t=>{let{status:r,...a}=await sW(i);if("FEATURE_NOT_SUPPORT"===r||"DEVICE_MEMORY_NOT_ENOUGH"===r)return;if("CURRENT_REMAINING_MEMORY_NOT_ENOUGH"===r){t.execute(o,{priorityLevel:tU.q.IdlePriority});return}let s={cpuCoreCount:navigator.hardwareConcurrency,gpuInfo:sH(),memoryInfo:a,...n};e.renderManager.runDevicesScoreReport(1280,720,JSON.stringify(s))};(0,tF.n)(o,{priorityLevel:tU.q.IdlePriority})};class sZ extends X.g{run(e,t){e.getABTestVar("ccweb_device_score_test",{enable:!1,memory_requirement_by_gibs:3}).then(e=>{let{enable:i=!1,memory_requirement_by_gibs:r}=e;if(!!i)sV(t,{memoryRequirement:r})})}constructor(...e){super(...e),this.taskName="DEVICE_SCORE_TEST"}}var sz=i("930997");async function s$(e){let t=await (0,sB.v1)();if(!t.ok)return;let[,i]=t.pair();(0,sz.c)(e,i),setTimeout(()=>{s$(e)},-(3e5*Math.log(Math.random())))}class sK extends X.g{run(e){s$(e)}constructor(...e){super(...e),this.taskName="MEMORY_MEASURE_REPORT"}}var sq=i("938228");class sY{get enable(){return this._enable}constructor(){this._onEnableChange=new nh.Q,this._enable=!1,this.onEnableChange=this._onEnableChange.event;let{firstPartyAnalytics:e}=aU.gx.getSettings();this._enable=e,aU.gx.onChange(e=>{this._enable=e.firstPartyAnalytics,this._onEnableChange.fire(this._enable)})}}var sJ=i("892292"),sQ=i("110608"),sX=i("64765"),s0=i("64537"),s1=i("528426");let s2="undefined"==typeof window||window.WorkbenchSSR;void 0!==i.g&&i.g.Math===Math?i.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")();var s6=i("287280"),s3=i("933447"),s4=i("871254"),s5=i("283304"),s8=i("975349"),s7=i("789002"),s9=i("309110");let le="lvve_sider_width";class lt{static getPanelSizeByCookie(){let e=tg.Z.get(le);return e?Number(e):void 0}static updatePanelSizeByCookie(e){tg.Z.set(le,`${e}`)}}class li{static getMetadata(e){return s5.S.getOwn(s5.h.WORKBENCH_SETTINGS,e)}forEach(e,t){return this.map.forEach(e,t)}bootstrap(e,t){var i,r,n,o;if(!((null===(r=e.siderMenu)||void 0===r?void 0:null===(i=r.panelSize)||void 0===i?void 0:i.current)!==void 0)&&(null===(o=e.siderMenu)||void 0===o?void 0:null===(n=o.panelSize)||void 0===n?void 0:n.cache)){let t=lt.getPanelSizeByCookie();t&&(0,oO.merge)(e,{siderMenu:{panelSize:{current:t}}})}this.set(e,t)}set(e,t){"string"==typeof e?(!function(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",n=e.split(r),o=(e,r)=>r?("function"==typeof i.set?i.set(e,t):i[e]=t,!1):("function"==typeof i.set?(!i.has(e)&&i.set(e,{}),i=i.get(e)):i=i[e]||{},!0);for(;o(n.shift(),!n.length););}(e,t,this.map),Object.values(s7.R).includes(e)&&this.store.upsert(e,t)):(Object.keys(e).forEach(t=>{Object.getOwnPropertyDescriptor(li.prototype,t)&&-1===["set","map","forEach","shallow"].indexOf(t)?this[t]=e[t]:this.set(t,e[t])}),this.forEach((e,t)=>{if(["useLogger","container"].includes(t)){this[t]=e;return}this.map.set(t,this.resolve(e))}))}get(e){return function(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",n=e.split(r),o=e=>"function"==typeof t.get?t.get(e):t[e];for(;(t=o(n.shift()))&&n.length;);return void 0===t?i:t}(e,this.map)}resolve(e){return"object"==typeof e&&Object.keys(e).forEach(t=>{e[t]=this.resolve(e[t])}),e}addMountSettings(e){let t=Object.values(s7.e);Object.entries(e).forEach(e=>{let i=e[0],r=e[1];t.includes(i)&&(this.store.upsert(i,r),Array.isArray(this.mount[i])&&Array.isArray(r)&&this.mount[i].concat(r))})}get platform(){var e;return null!==(e=this.map.get("platform"))&&void 0!==e?e:"pc"}set platform(e){this.map.set("platform",e)}get container(){return this.map.get("container")}set container(e){this.map.set("container",e)}set useLogger(e){this.map.set("useLogger",e)}get useLogger(){return this.map.get("useLogger")}set mount(e){this.shallow("mount",e)}get mount(){return this.map.get("mount")}set namespace(e){this.map.set("namespace",e)}get namespace(){return this.map.get("namespace")}set debugMode(e){this.map.set("debugMode",e)}get debugMode(){return this.map.get("debugMode")}get titleBar(){return this.map.get("titleBar")}set titleBar(e){this.set("titleBar",e)}get hideTitleBar(){return this.map.get("hideTitleBar")}set hideTitleBar(e){this.set("hideTitleBar",e)}get hideToolBar(){return this.map.get("hideToolBar")}set hideToolBar(e){this.set("hideToolBar",e)}get toolBar(){return this.map.get("toolBar")}set toolBar(e){this.set("toolBar",e)}get siderMenu(){return this.map.get("siderMenu")}set siderMenu(e){let t=this.siderMenu;this.set("siderMenu",(0,oO.merge)({},t,e))}updateSiderMenu(e,t){var i,r,n,o;let a=this.siderMenu;this.siderMenu=e,(null==a?void 0:null===(i=a.panelSize)||void 0===i?void 0:i.current)!==(null==e?void 0:null===(r=e.panelSize)||void 0===r?void 0:r.current)&&(this._onSiderMenuPanelWidthChange.fire(t),"manuel"===t&&(null===(o=this.siderMenu)||void 0===o?void 0:null===(n=o.panelSize)||void 0===n?void 0:n.cache)&&lt.updatePanelSizeByCookie(e.panelSize.current))}reiszeEndSiderMenu(e){this._onSiderMenuPanelResize.fire(e)}get visible(){return this.map.get("visible")}set visible(e){this.set("visible",e)}get workbenchMode(){return this.map.get("workbenchMode")}set workbenchMode(e){this.set("workbenchMode",e)}get workbenchClassName(){return this.map.get("workbenchClassName")}set workbenchClassName(e){this.set("workbenchClassName",e)}get hideLogo(){return this.map.get("hideLogo")}set hideLogo(e){this.set("hideLogo",e)}get backLogoConfirguation(){return this.map.get("backLogoConfirguation")}set backLogoConfirguation(e){this.set("backLogoConfirguation",e)}get hideSiderMenu(){return this.map.get("hideSiderMenu")}set hideSiderMenu(e){this.set("hideSiderMenu",e)}get notAccesableSiderMenu(){return this.map.get("notAccesableSiderMenu")}set notAccesableSiderMenu(e){this.set("notAccesableSiderMenu",e)}shallow(e,t){Object.keys(t).forEach(i=>{this.set(`${e}.${i}`,t[i])})}constructor(e,t,i,r){this.store=e,this.map=new Map,this._onSiderMenuPanelWidthChange=new nh.Q,this.onSiderMenuPanelWidthChange=this._onSiderMenuPanelWidthChange.event,this._onSiderMenuPanelResize=new nh.Q,this.onSiderMenuPanelResize=this._onSiderMenuPanelResize.event,this.namespace="workbench",this.platform=i,this.debugMode=!1,this.container=t,this.mount={controllers:[],services:[]},this.visible=!0,this.titleBar={...null!=r?r:{},containerHeight:56,containerPaddingX:[16,16],centerBoxPaddingX:30,iconBtnWidth:32},this.siderMenu={clearPreRenderWhenResize:!0,isPreRenderPanelWhenIdle:!0,disableFloatMode:!1,hiddenWhenSmallScreenInBootstrap:!0,cacheRenderedPanelDom:{enable:!0},menuSize:{width:76},panelSize:{cache:!1,min:240,default:280,max:700,current:280}},this.toolBar={panelMode:s9._.FLOAT,enableFixedMode:!1}}}li=(0,b.gn)([(0,s4.t)(),(0,b.fM)(1,(0,s3.t)("container")),(0,b.fM)(2,(0,s3.t)("platform")),(0,b.fM)(3,(0,s3.t)("titleBar")),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O,"undefined"==typeof HTMLElement?Object:HTMLElement,Object,Object])],li);let lr=Symbol("service:start-up");var ln=i("193477"),lo=i("407797"),la=i("469254"),ls=i("740175");let ll={success:"#2e7d32",stop:"#bf360c",error:"#d32f2f",skip:"#757575"};class lc extends Function{getNext(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=()=>{};if(t.hasCalled=this.hasCalled,this.hasNext()){this.index+=1;let i=this.middlewares[this.index];(t=()=>(t.hasCalled=!0,i(this,e))).hasCalled=this.hasCalled}return this.hasCalled=!1,t}merge(e){let t=new lc(e.concat(this.middlewares),this.point,this.context.metadata);return t.debug=this.debug,t}setOnCall(e){this.onCall=e}setContext(e){Object.assign(this.context,e)}hasNext(){return this.index<this.middlewares.length-1}get next(){return this.getNext()}get skip(){return this.getNext(!0)}get data(){return this.result}run(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this.rawArguments=t,this.index=-1,this.debugInfo=[],this.runningHandlerInfo={},this.onCall&&this.onCall(),this.next(),(this.debug||s6.A.get(s8.O).getValue(s7.R.DebugMode))&&this.printDebugInfo();let{data:r}=this;return this.cleanResult(),r}cleanResult(){this.result=void 0}traceStart(e,t){let i=Date.now();this.runningHandlerInfo[e]={start:i,type:t}}traceEnd(e,t){let i=Date.now(),r=this.runningHandlerInfo[e];r&&this.debugInfo.push([e,r.type,t,i-r.start])}storeData(e){this.result=e}stop(){this.hasCalled=!0}getArguments(){return this.rawArguments}printDebugInfo(){console.group(`%c@${this.point.from}(${this.point.name}, ${this.point.trigger})`,"font-family: Consolas, monospace;display: inline-block;padding: 2px;border: 1px solid #ffa000;background-color: #ffd14933"),this.debugInfo.forEach(e=>{let[t,i,r,n]=e;console.log(`${`%c${r}%c`.padEnd(14," ")} [%c${i}%c]: ${n}ms --> ${t}`,`color: white; background-color: ${ll[r]};`,"color: unset",`color: ${"controller"===i?"#66bb6a":"#42a5f5"}`,"color: unset")}),console.groupEnd()}constructor(e,t,i={}){super(),this.middlewares=e,this.rawArguments=[],this.debug=!1,this.debugInfo=[],this.runningHandlerInfo={},this.index=0,this.hasCalled=!1;let r=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.run(...t)};return r.middlewares=e,r.context={metadata:i},r.point=null!=t?t:{name:"",from:"",trigger:"",path:[]},Object.setPrototypeOf(r,new.target.prototype)}}class ld{invoke(e){if(!this.outerContainer)throw Error("It's not set outerContainer before invoke services, please check your logic");return this.outerContainer.createInstance(e)}setOuterInstantiationService(e){this.outerContainer=e}invokeFunction(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return(0,P.Y2)(this.outerContainer,"It's not set outerContainer before invoke services, please check your logic"),this.outerContainer.invokeFunction(e,...i)}constructor(){this.outerContainer=null}}s6.A.factory(ld,new ld);var lu=i("531596"),lp=i("974701"),l_=i("513478"),lg=i("266686"),lh=i("733999");class lm{resolve(){let e=this.handler;if(l_.Q.has(this.handler)){let t=l_.Q.get(this.handler);this.handlerType="middleware",this.methodKey="use",e=t.useClass}else lp.p.has(this.handler)&&(this.handlerType="controller");this.methodKey&&(this.injectable=lh.d.isInjectable(e,this.methodKey))}get type(){return this.handlerType}get methodName(){return this.methodKey}get hasNextFunction(){return this.nextFunction}get target(){return this.handler}get services(){return this.injectable?lh.d.getParams(this.target,this.methodName):[]}constructor(e,t){this.handler=e,this.methodKey=t,this.handlerType="function",this.injectable=!1,this.nextFunction=!1,this.resolve()}}(0,b.gn)([(0,lg.NG)(),(0,b.w6)("design:type",String)],lm.prototype,"handlerType",void 0),(0,b.gn)([(0,lg.NG)()],lm.prototype,"injectable",void 0),(0,b.gn)([(0,lg.NG)()],lm.prototype,"nextFunction",void 0);var lv=i("308961"),lf=i("678128");class ly{get context(){return this.workbenchContext}inject(e,t){if(e in lf.x9.prototype){ls.r.error(`Duplicate injection for key: ${e}`);return}let i=()=>t;"function"==typeof t&&(i=t),Object.defineProperty(lf.x9.prototype,e,{get:i})}constructor(e){this.workbenchContext=e}}ly=(0,b.gn)([(0,s4.t)(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===lf.x9?Object:lf.x9])],ly);class lw{static from(e){return e instanceof lv.P?new lw(new lm(e.target,e.methodName)):new lw(new lm(e))}build(){return(e,t)=>this.invoke(e,t)}middlewareHandler(){let e=l_.Q.get(this.handlerMetadata.target);if(!e)throw Error(`${(0,ln.FM)(this.handlerMetadata.target)} middleware component not found in the MiddlewareRegistry`);let{instance:t}=e;return!t&&(t=s6.A.get(ld).invoke(e.useClass)),function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.use.bind(t),t.use(...i)}}controlHandler(){let e=lp.p.get(this.handlerMetadata.target);if(!e)throw Error("Controller component not found in the ControllerRegistry");let t=e.useClass;return void 0===e.instance&&(e.instance=s6.A.get(ld).invoke(t)),e.instance[this.handlerMetadata.methodName].bind(e.instance)}getHandler(){if(this.handler)return this.handler;switch(this.handlerMetadata.type){default:case"function":this.handler=this.handlerMetadata.target;break;case"middleware":this.handler=this.middlewareHandler();break;case"controller":this.handler=this.controlHandler()}return this.handler}invoke(e){var t,i,r,n,o;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let n;let{target:o,methodName:s,type:l}=this.handlerMetadata;if(e.traceStart(`${o.name} # ${s}`,l),a){e.traceEnd(`${o.name} # ${s}`,"skip"),null===(t=e.skip)||void 0===t||t.call(e);return}let c=this.runPreHandlers(e);if("controller"===l){let t=c.findIndex(e=>void 0!==e),i=e.getArguments();if(t<0)c=i;else for(let e=t-1,r=0;e>=0;e-=1,r+=1)c[e]=i[r]}("middleware"===l||"controller"===l)&&(n=this.getHandler()(...c)),void 0!==n&&"function"!==l&&e.storeData(n),e.hasCalled?(e.traceEnd(`${o.name} # ${s}`,"stop"),null===(r=e.skip)||void 0===r||r.call(e)):(e.traceEnd(`${o.name} # ${s}`,"success"),null===(i=e.next)||void 0===i||i.call(e))}catch(r){let{target:t,methodName:i}=this.handlerMetadata;ls.r.error(null!==(o=r.stack)&&void 0!==o?o:`Error occured at ${t.name} # ${i}: ${r}`),e.traceEnd(`${t.name} # ${i}`,"error"),null===(n=e.skip)||void 0===n||n.call(e)}}runPreHandlers(e){let{context:t}=s6.A.get(ly);return this.handlerMetadata.services.map(i=>{var r;return null===(r=lu.A.get(i.service))||void 0===r?void 0:r({context:t,runner:e,param:i})})}constructor(e){this.handlerMetadata=e}}function lb(e){return!!e.includes(":")||!1}var lS=i("758119"),lC=i.n(lS);class lk{addMatchPoint(e){lb(e)&&!this.namedPlaceholders.includes(e)&&this.namedPlaceholders.push(e)}getMatchPoint(e){let t=this.namedPlaceholders.filter(t=>{var i,r;return i=t,r=e,RegExp(`^${i.replace(/:\w+/g,"\\w+")}$`).test(r)});if(t.length>1)throw Error(`Ambiguous match points found for key ${e}, match points ${t}`);return t[0]}matchPointMemoizedCacheKey(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.namedPlaceholders.length+t[0]}constructor(){this.getMemorizedMatchPoint=lC()(this.getMatchPoint,this.matchPointMemoizedCacheKey),this.namedPlaceholders=[]}}class lE{set(e,t){this.configs.set(e,t),lb(e)&&this.namedPlaceHolder.addMatchPoint(e)}remove(e){if(!this.configs.has(e)){ls.r.warn(`The config "${e}" does not exist, thus ignored.`);return}this.configs.delete(e)}has(e){let t=this.configs.has(e);return t?t:(this.namedPlaceHolder.getMatchPoint(e)&&(t=!0),t)}get(e){let t=this.configs.get(e);if(t)return t;let i=this.namedPlaceHolder.getMatchPoint(e);if(i){let r=this.configs.get(i);r&&(t={...r,name:e})}return t}getAllKeys(){let e=[];for(let t of this.configs.keys())e.push(t);return e}constructor(){this.configs=new Map,this.namedPlaceHolder=new lk}}class lI{getAll(e){var t,i;let r=new Map,n=this.namedPlaceHolder.getMemorizedMatchPoint(e);return null===(t=this.callbacks.get(null!=n?n:""))||void 0===t||t.forEach((e,t)=>r.set(t,e)),null===(i=this.callbacks.get(e))||void 0===i||i.forEach((e,t)=>r.set(t,e)),r}get(e){return this.callbacks.get(e)}set(e,t){this.callbacks.set(e,t),lb(e)&&this.namedPlaceHolder.addMatchPoint(e)}getMatchPoint(e){return this.namedPlaceHolder.getMatchPoint(e)}constructor(){this.callbacks=new Map,this.namedPlaceHolder=new lk}}class lT{register(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.hasConfig(e.name),this.configs.set(e.name,e),t&&this.updateState()}remove(e){this.configs.remove(e)}hasConfig(e){return this.configs.has(e)}onUpdate(e){}getMergedConfig(e){if(this.hasConfig(e)){let t=this.getUIConfig(e),i=this.callbacks.getAll(e),r={};i.forEach((e,t)=>{r[t]=e}),this.middlewares.forEach((e,t)=>{r[t]?r[t]=r[t].merge(e):r[t]=new lc(e)});let n={...t,...r};return this.updateActionPoint(n),n}}updateActionPoint(e){let t=this.callbacks.getMatchPoint(e.name);for(let[r,n]of Object.entries(e)){var i;if("function"==typeof(i=n)&&i.point&&i.context&&i.hasNext&&i.stop)n.point={...n.point,from:(0,ln.tr)(this.constructor),name:e.name,trigger:r,matchPoint:t}}}get(e,t){let i=this.getMergedConfig(e);return i?i:t}getUIConfig(e){return this.configs.get(e)}getConfigs(){let e=new Map;return this.configs.getAllKeys().forEach(t=>{let i=this.getMergedConfig(t);i&&e.set(t,i)}),e}updateState(){let e=this.getConfigs();this.subject.next(e)}update(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?this.$forceUpdate():this.updateState()}bind(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.callbacks.get(e);!n&&(n=new Map,this.callbacks.set(e,n));let o=n.get(t);o&&ls.r.warn(`There is already a "${String(t)}" action point for config "${e}" and will be override by duplicate declaration. Search "@${o.point.from}('${e}', '${String(t)}')" in your codebase to find it.`),n.set(t,i),r&&this.updateState()}use(e,t){let i=lw.from(e).build(),r=this.middlewares.get(t);r?r.unshift(i):r=[i],this.middlewares.set(t,r),this.update()}getCallbackConfig(e){return this.callbacks.get(e)}constructor(){this.configs=new lE,this.callbacks=new lI,this.middlewares=new Map,this.subject=new lo.X(new Map),this.subject.asObservable().pipe((0,la.T)(1)).subscribe(e=>this.onUpdate(e))}}var lP=i("943478");class lA{get services(){return[...this.serviceMap.values()]}getControllerRelatedUIServices(){return this.serviceMap}has(e){return this.serviceMap.has((0,ln.tr)(e))}add(e,t){let i=(0,ln.tr)(e);this.serviceMap.set(i,e),t&&this.serviceOptions.set(i,t)}get(e){return this.serviceMap.get(e)}getItemName(e){var t,i;return null!==(i=null===(t=this.serviceOptions.get(e))||void 0===t?void 0:t.itemName)&&void 0!==i?i:lP.eo[e]}updateUIStateByServiceName(e){this.getControllerRelatedUIServices().forEach((t,i)=>{e.has(i)&&t.updateState()})}constructor(...e){for(let t of(this.serviceMap=new Map,this.serviceOptions=new Map,e))t instanceof lT&&this.serviceMap.set((0,ln.tr)(t),t)}}lA=(0,b.gn)([(0,s4.t)(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[Array])],lA);var lR=i("864123"),lx=i("574785"),lN=i("380130");class lL extends lT{getPathByConfig(e){var t;return null!==(t=this.pathMap.get(e))&&void 0!==t?t:[]}getConfigByPath(e){return Array.isArray(e)?this.reversedPathMap.get(e.join("/")):this.reversedPathMap.get(e)}setPathToActionInfoInConfig(e,t){let i=[];t&&i.push(...t),i.push(e.name),this.pathMap.set(e,i),this.reversedPathMap.set(i.join("/"),e),Object.entries(e).forEach(t=>{let[i,r]=t;if(r instanceof lc){let t=r.merge([]),n=this.getPathByConfig(e);t.point={...r.point,path:n,name:e.name},e[i]=t}})}onUpdate(){this.pathMap.clear(),this.reversedPathMap.clear()}forceUpdateWithStore(e,t){let i=e.getValue(t);if(null===i){this.onUpdate();return}if(Array.isArray(i)){e.get(t).next(i.slice());return}if("object"==typeof i){e.get(t).next({...i});return}e.get(t).next(i)}constructor(...e){super(...e),this.pathMap=new Map,this.reversedPathMap=new Map}}var lO=i("302343");var lM=((o={})[o.collapsed=0]="collapsed",o[o.expanded=1]="expanded",o[o.shrinking=2]="shrinking",o[o.growing=3]="growing",o),lD=i("260963");class lj extends lL{get activeSiderMenu(){return this._activeSiderMenu}get activeSiderMenuMode(){return this._activeSiderMode}get isSidebarCollapsed(){return this._isSidebarCollapsed}get siderTransitionState(){return this._siderTransitionState}get forceActivateTransition(){return this.observableData.forceActivateTransition}get activeExtraParams(){return this._activeExtraParams}$forceUpdate(){this.forceUpdateWithStore(this.store,lN.j.WorkbenchSiderMenu)}onUpdate(){super.onUpdate();let e=this.getConfigs(),t=[],i=[];e.forEach(e=>{"top"===e.position?t.push(e):i.push(e)}),this.updateActionInfoInConfig();let r={activeTarget:this._activeSiderMenu,activeMode:this._activeSiderMode,top:(0,lO.l)({list:t}),bottom:(0,lO.l)({list:i}),siderTransitionState:this._siderTransitionState};this.store.get(lN.j.WorkbenchSiderMenu).next(r)}register(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];super.register(e,t)}get(e){return super.get(e,{name:"none",title:()=>"",icon:()=>eB.createElement("div"),position:"top",orderLevel:lO.r.default,order:1})}highlightSiderMenuPanel(){if(!this.observableData.highlight)(0,lD.z)(()=>{this.observableData.highlight=!0,setTimeout(()=>{this.observableData.highlight=!1},1e3)})}activeMenuByName(e,t,i){var r,n;if(e===(null===(r=this._activeSiderMenu)||void 0===r?void 0:r.name)&&(null==i?void 0:i.extraParams)===this._activeExtraParams)return;this._activeExtraParams=null==i?void 0:i.extraParams;let o=this.get(e);if((0,P.Y2)(!!o,"not found target menu, please check logic"),!!this.store.get(lN.j.WorkbenchSiderMenuPanel).getValue().panelItems.has(e))this._lastActiveSiderName=null===(n=this._activeSiderMenu)||void 0===n?void 0:n.name,this._activeSiderMenu=o,this._activeSiderMode=t,this._siderTransitionState=lM.expanded,this.onUpdate()}unActiveMenu(){var e;if(!!this._activeSiderMenu||this._siderTransitionState!==lM.collapsed)this._lastActiveSiderName=null===(e=this._activeSiderMenu)||void 0===e?void 0:e.name,this._activeSiderMenu=void 0,this._activeSiderMode=void 0,this._activeExtraParams=void 0,this._siderTransitionState=lM.collapsed,this.onUpdate()}toggleMenuPanelByName(e){var t,i;let r;let n=!(null===(t=this._activeSiderMenu)||void 0===t?void 0:t.name);return(null===(i=this._activeSiderMenu)||void 0===i?void 0:i.name)===e?(r=!0,this.unActiveMenu()):(this.activeMenuByName(e,"manual"),r=!1),n!==r&&this._onSiderMenuExpandedChange.fire({mode:"manual",actionType:"click_tab",visible:!r}),r}toggleMenuPanel(e){let t;if(this._activeSiderMenu)this.unActiveMenu(),t=!1;else{var i;let e=this.store.get(lN.j.WorkbenchSiderMenu),r=this._lastActiveSiderName?this._lastActiveSiderName:null===(i=e.value.top)||void 0===i?void 0:i[0].name;this.activeMenuByName(r,"manual"),t=!0}return this._onSiderMenuExpandedChange.fire({mode:e.mode,actionType:e.actionType,visible:t}),t}setSiderTransitionState(e){this._siderTransitionState=e,this.onUpdate()}forceSetActivateTransition(e){(0,lD.z)(()=>{this.observableData.forceActivateTransition=e})}toggleResizeBarVisible(e){(0,lD.z)(()=>{this.observableData.resizeBarVisible=e})}updateActionInfoInConfig(){this.getConfigs().forEach(e=>{this.setPathToActionInfoInConfig(e,[])})}constructor(e){super(),this.store=e,this.observableData=(0,lD.LO)({highlight:!1,forceActivateTransition:!1,resizeBarVisible:!0}),this._activeSiderMenu=void 0,this._activeSiderMode=void 0,this._isSidebarCollapsed=!1,this._siderTransitionState=lM.expanded,this._activeExtraParams=void 0,this._onSiderMenuExpandedChange=new nh.Q,this.onSiderMenuExpandedChange=this._onSiderMenuExpandedChange.event,this.store.register(lN.j.WorkbenchSiderMenu,{activeTarget:void 0,activeMode:void 0,top:[],bottom:[],siderTransitionState:this._siderTransitionState})}}lj=(0,b.gn)([(0,s4.t)({overridable:!0,scope:"ui:service",name:lP.Mp.SiderMenu}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],lj);class lF extends lL{get activeTarget(){return this._activeTarget}$forceUpdate(){this.forceUpdateWithStore(this.store,lN.j.WorkbenchSiderMenuPanel)}onUpdate(){var e,t,i,r,n;super.onUpdate();let o=this.store.get(lN.j.WorkbenchSiderMenuPanel),a=null===(e=this.workbenchSiderMenuService.activeSiderMenu)||void 0===e?void 0:e.name;a!==o.value.activeTarget&&this._updatePanelRenderTags(a,o.value.activeTarget);let s={activeTarget:a,panelItems:this.getConfigs(),panelRenderTags:this._panelRenderTags,extraParams:this.workbenchSiderMenuService.activeExtraParams};o.value.activeTarget!==s.activeTarget&&(o.value.activeTarget&&(null===(i=o.value.panelItems.get(o.value.activeTarget))||void 0===i||null===(t=i.onActiveChange)||void 0===t||t.call(i,{active:!1})),s.activeTarget&&(null===(n=s.panelItems.get(s.activeTarget))||void 0===n||null===(r=n.onActiveChange)||void 0===r||r.call(n,{active:!0,activeMode:this.workbenchSiderMenuService.activeSiderMenuMode,extraParams:s.extraParams}),this._activeTarget=s.activeTarget)),this.updateActionInfoInConfig(),o.next(s)}register(e){var t;let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];super.register(e,i),!this._panelRenderTags.has(e.name)&&this._panelRenderTags.set(e.name,{hasRendered:!1,needPreRender:!1,name:e.name}),(null===(t=this.workbenchSettingsService.siderMenu)||void 0===t?void 0:t.isPreRenderPanelWhenIdle)&&this._preRenderMenuPanel(e.name)}get(e){return super.get(e,{name:"none"})}dispose(){var e;null===(e=this._subscribe)||void 0===e||e.unsubscribe()}clearAllPreRenderPanel(){var e;if(!(null===(e=this.workbenchSettingsService.siderMenu)||void 0===e?void 0:e.clearPreRenderWhenResize))return;let t=this.activeTarget;this._panelRenderTags.forEach(e=>{t!==e.name&&(e.hasRendered=!1,e.needPreRender=!1)})}reTriggerPreRenderPanel(){var e;if(!!(null===(e=this.workbenchSettingsService.siderMenu)||void 0===e?void 0:e.isPreRenderPanelWhenIdle))this._panelRenderTags.forEach(e=>{this._preRenderMenuPanel(e.name)})}onResizeStart(){this.outerInjectedService.invokeFunction(e=>{e.get(tZ.e).internalFireSiderPanelResizeStart()})}onResize(e){this.outerInjectedService.invokeFunction(t=>{t.get(tZ.e).internalFireSiderPanelResize(e)})}onResizeEnd(){this.outerInjectedService.invokeFunction(e=>{e.get(tZ.e).internalFireSiderPanelResizeEnd()})}updateActionInfoInConfig(){this.getConfigs().forEach(e=>{this.setPathToActionInfoInConfig(e,[])})}_updatePanelRenderTags(e,t){let i=(e,t)=>{let i=this._panelRenderTags.get(e);if(!i)return;let r={...i,hasRendered:t};this._panelRenderTags.set(e,r)};if(i(e,!0),t){var r,n;if(null===(n=this.workbenchSettingsService.siderMenu)||void 0===n?void 0:null===(r=n.cacheRenderedPanelDom)||void 0===r?void 0:r.enable){let e=this.getConfigs().get(t);(null==e?void 0:e.disableCacheRenderedDom)&&i(t,!1)}else i(t,!1)}}_preRenderMenuPanel(e){let t=this._panelRenderTags.get(e);if((0,P.ZB)(t),this.getConfigs().get(e),null==t?!void 0:!t.needPreRender)(0,tF.n)(()=>{this._panelRenderTags.set(e,{...t,needPreRender:!0}),this.onUpdate()})}constructor(e,t,i,r){super(),this.store=e,this.workbenchSiderMenuService=t,this.outerInjectedService=i,this.workbenchSettingsService=r,this._panelRenderTags=new Map,this.store.register(lN.j.WorkbenchSiderMenuPanel,{activeTarget:void 0,panelItems:new Map,panelRenderTags:this._panelRenderTags});let n=e.get(lN.j.WorkbenchSiderMenu).subscribe(()=>{this.onUpdate()});this._subscribe=n}}lF=(0,b.gn)([(0,s4.t)({overridable:!0,scope:"ui:service",name:lP.Mp.SiderMenuPanel}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O,void 0===lj?Object:lj,ld,void 0===li?Object:li])],lF);var lU=i("326106");class lB extends lL{$forceUpdate(){this.forceUpdateWithStore(this.store,lN.j.WorkbenchTitleBar)}onUpdate(){super.onUpdate();let e=this.getConfigs(),t=[],i=[],r=[];e.forEach(e=>{switch(e.position){case"left":t.push(e);break;case"center":i.push(e);break;case"right":r.push(e);break;default:(0,P.bP)(e.position,"title bar invalid position")}}),this.updateActionInfoInConfig();let n={left:(0,lO.l)({list:t}),center:(0,lO.l)({list:i}),right:(0,lO.l)({list:r}),moreMenuConfig:{menuStatus:this._moreMenuConfig.menuStatus,menuNumber:this._moreMenuConfig.menuNumber}};this.store.get(lN.j.WorkbenchTitleBar).next(n)}register(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];super.register(e,t)}get(e){return super.get(e,{name:"none",type:lU._.IconBtn,icon:eB.createElement("div"),activeIcon:eB.createElement("div"),position:"left",orderLevel:lO.r.default,order:1})}updateActionInfoInConfig(){this.getConfigs().forEach(e=>{this.setPathToActionInfoInConfig(e,[])})}setMenuConfig(e){let t=!1;(void 0!==e.menuNumber&&e.menuNumber!==this._moreMenuConfig.menuNumber||void 0!==e.menuStatus||e.menuStatus!==this._moreMenuConfig.menuStatus)&&(t=!0),this._moreMenuConfig={...this._moreMenuConfig,...null!=e?e:{}},t&&this.onUpdate()}constructor(e){super(),this.store=e,this._moreMenuConfig={menuStatus:"none",menuNumber:0},this.store.register(lN.j.WorkbenchTitleBar,{left:[],center:[],right:[],moreMenuConfig:{menuStatus:this._moreMenuConfig.menuStatus,menuNumber:this._moreMenuConfig.menuNumber}})}}lB=(0,b.gn)([(0,s4.t)({overridable:!0,scope:"ui:service",name:lP.Mp.TitleBar}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],lB);var lH=i("131805"),lG=i("432871");let lW="unselected";class lV extends lL{get activePinToolBar(){return this._activePinToolBar}get activeUnPinToolBar(){return this._activeUnPinToolBar}get sourceActionType(){return this._sourceActionType}get isManualOpenPanel(){return this._isManualOpenPanel}get unPinSelectionUid(){var e;let t=this._toolBarViewMode;return(null==t?void 0:null===(e=t.selectionIds)||void 0===e?void 0:e.length)?this._toolBarViewMode.selectionIds.sort().join(""):""}$forceUpdate(){this.onUpdate(),this.forceUpdateWithStore(this.store,lN.j.WorkbenchToolBar)}onUpdate(){var e,t;super.onUpdate();let i=this.getConfigs(),r=[],n=[];i.forEach(e=>{"pin"===e.type?r.push(e):n.push(e)}),this.updateActionInfoInConfig();let o=(0,lO.l)({list:this.getShowUnPinToolBarByViewMode(n)});this.resetActiveUnPinBar(o);let a={showUnPinToolBar:!!o.length,activePinBarName:null===(e=this._activePinToolBar)||void 0===e?void 0:e.name,activeUnPinBarName:null===(t=this._activeUnPinToolBar)||void 0===t?void 0:t.name,pin:(0,lO.l)({list:r}),unpin:o,isManualOpenPanel:this._isManualOpenPanel};this.store.get(lN.j.WorkbenchToolBar).next(a)}register(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];super.register(e,t)}get(e){return super.get(e,{name:"none",title:()=>"",icon:()=>eB.createElement("div"),type:"pin"})}getActiveToolbarName(){var e,t,i,r;return null!==(r=null!==(i=null===(e=this._activePinToolBar)||void 0===e?void 0:e.name)&&void 0!==i?i:null===(t=this._activeUnPinToolBar)||void 0===t?void 0:t.name)&&void 0!==r?r:null}activeToolBarByName(e){var t;let i=this.get(e);(0,P.Y2)(!!i,"not found target toolBar, please check logic");let r="pin"===i.type?"_activePinToolBar":"_activeUnPinToolBar";if(e!==(null===(t=this[r])||void 0===t?void 0:t.name)&&!!this._isPanelCanSwitch(e))"unpin"===i.type&&(this._isManualOpenPanel=!0,this._unPinActiveCache.put(this.unPinSelectionUid,i.name)),this._sourceActionType=lG.c.Direct,this[r]=i,this.onUpdate(),this._onToolBarActiveChange.fire({id:i.id,name:e,mode:"active"})}triggerToolbarHover(e){this._onToolBarActiveChange.fire({id:e.id,name:e.name,mode:"hover"})}unActiveToolBarByName(e){var t;let i=this.get(e);(0,P.Y2)(!!i,"not found target toolBar, please check logic");let r="pin"===i.type?"_activePinToolBar":"_activeUnPinToolBar";if((null===(t=this[r])||void 0===t?void 0:t.name)===e)"unpin"===i.type&&(this._isManualOpenPanel=!1),this[r]=void 0,this.isActiveShowGroupUnselected()&&this.unActiveToolbarUnselectedGuide(),this.onUpdate()}activeDefaultToolbar(){var e;null===(e=this._toolBarViewMode)||void 0===e||e.showGroup,this._isManualOpenPanel=!0;let t=this._getDefaultToolbarName();if(!t)return this.onUpdate();this.activeToolBarByName(t)}registerDefaultActiveGroup(e,t){e.forEach(e=>{!this._defaultActiveGroupMap.has(e)&&this._defaultActiveGroupMap.set(e,t)})}unActiveFixedPanel(){this._isManualOpenPanel=!1,this._activeUnPinToolBar=void 0,this.onUpdate()}updateToolBarViewMode(e){this._toolBarViewMode=e,e.activePanelName&&this._isPanelCanSwitch(e.activePanelName)&&this.unPinSelectionUid&&this._unPinActiveCache.put(this.unPinSelectionUid,e.activePanelName),e.panelActivationMode===lG.B.ForceAct?this._isManualOpenPanel=!0:e.panelActivationMode===lG.B.ForceUnAct&&(this._isManualOpenPanel=!1,this._activeUnPinToolBar=void 0),this._sourceActionType=e.sourceActionType,this.onUpdate()}_getDefaultToolbarName(){var e;let t=null===(e=this._toolBarViewMode)||void 0===e?void 0:e.showGroup;if(t)return this._defaultActiveGroupMap.get(t)}_isPanelCanSwitch(e){return this.store.get(lN.j.WorkbenchToolBarPanel).value.panelItems.has(e)}updateActionInfoInConfig(){this.getConfigs().forEach(e=>{this.setPathToActionInfoInConfig(e,[])})}getShowUnPinToolBarByViewMode(e){var t;let{showGroup:i}=null!==(t=this._toolBarViewMode)&&void 0!==t?t:{};return e.filter(e=>{var t,r,n,o;return!e.groups||(this.isActiveShowGroupUnselected()?e.groups.includes(null!=i?i:""):e.groups.includes(null!=i?i:"")&&!(null!==(o=null!==(n=null===(t=e.shouldHide)||void 0===t?void 0:t.call(e))&&void 0!==n?n:null==e?void 0:null===(r=e.shouldHidden)||void 0===r?void 0:r.call(e))&&void 0!==o&&o))})}resetActiveUnPinBar(e){if(!this._isManualOpenPanel)return;let t=this._unPinActiveCache.get(this.unPinSelectionUid);if(t){let i=e.find(e=>e.name===t);if(i){this._activeUnPinToolBar!==i&&this._onToolBarActiveChange.fire({mode:"active",name:i.name}),this._activeUnPinToolBar=i;return}}if(this._isManualOpenPanel&&e.length){let t=this._getDefaultToolbarName(),i=e.find(e=>e.name===t),r=e[0];i&&t&&(r=i),this._activeUnPinToolBar!==r&&this._onToolBarActiveChange.fire({mode:"active",name:r.name}),this._activeUnPinToolBar=r;return}this._activeUnPinToolBar=void 0}getIsShowUnPinToolBar(){return this.store.get(lN.j.WorkbenchToolBar).value.showUnPinToolBar}fireToolbarPanelClose(){this._onToolbarPanelClose.fire({triggerBy:"manual"})}setConfig(e){let{enableUnselectedGuideInFloat:t}=e;t&&!this._toolBarViewMode&&this.activeToolbarUnselectedGuide(),this.onUpdate()}activeToolbarUnselectedGuide(){this._toolBarViewMode={showGroup:lW,selectionIds:[],panelActivationMode:lG.B.Default,activePanelName:"toolbarUnselectedGuide",sourceActionType:lG.c.Direct}}unActiveToolbarUnselectedGuide(){this._toolBarViewMode=void 0}isActiveShowGroupUnselected(){var e;let{showGroup:t}=null!==(e=this._toolBarViewMode)&&void 0!==e?e:{};return t===lW}constructor(e){super(),this.store=e,this._activePinToolBar=void 0,this._activeUnPinToolBar=void 0,this._unPinActiveCache=new lH.z(100),this._isManualOpenPanel=!0,this._defaultActiveGroupMap=new Map,this._onToolBarActiveChange=new nh.Q,this.onToolBarActiveChange=this._onToolBarActiveChange.event,this._onDidToolBarHover=new nh.Q,this.onDidToolBarHover=this._onDidToolBarHover.event,this._onToolbarPanelClose=new nh.Q,this.onToolbarPanelClose=this._onToolbarPanelClose.event,this.store.register(lN.j.WorkbenchToolBar,{showUnPinToolBar:!1,activePinBarName:void 0,activeUnPinBarName:void 0,isManualOpenPanel:!1,pin:[],unpin:[]})}}lV=(0,b.gn)([(0,s4.t)({overridable:!0,scope:"ui:service",name:lP.Mp.ToolBar}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],lV);class lZ extends lL{$forceUpdate(){this.forceUpdateWithStore(this.store,lN.j.WorkbenchToolBarPanel)}onUpdate(){super.onUpdate();let e=this.store.get(lN.j.WorkbenchToolBarPanel),t=this.getConfigs(),i=new Map,r=[],{activePinToolBar:n,activeUnPinToolBar:o,sourceActionType:a}=this.workbenchToolBarService;t.forEach(e=>{i.set(e.name,e),((null==n?void 0:n.name)===e.name||(null==o?void 0:o.name)===e.name)&&r.push(e.name)});let s={activePanels:r,panelItems:i},l=e=>{var t;return null===(t=e.activePanels)||void 0===t?void 0:t.join(".")};if(l(e.value)!==l(s)){var c,d,u,p,_,g;let t=(null!==(_=null===(c=e.value.activePanels)||void 0===c?void 0:c.length)&&void 0!==_?_:0)>0&&(null!==(g=null===(d=s.activePanels)||void 0===d?void 0:d.length)&&void 0!==g?g:0)>0;null===(u=e.value.activePanels)||void 0===u||u.forEach(e=>{var i,r,n;!(null===(i=s.activePanels)||void 0===i?void 0:i.includes(e))&&(null===(n=s.panelItems.get(e))||void 0===n||null===(r=n.onActiveChange)||void 0===r||r.call(n,{active:!1,isSwitch:t}))}),null===(p=s.activePanels)||void 0===p||p.forEach(i=>{var r,n,o;!(null===(r=e.value.activePanels)||void 0===r?void 0:r.includes(i))&&(null===(o=s.panelItems.get(i))||void 0===o||null===(n=o.onActiveChange)||void 0===n||n.call(o,{active:!0,isSwitch:t,sourceActionType:a}))})}this.updateActionInfoInConfig(),this.store.get(lN.j.WorkbenchToolBarPanel).next(s)}register(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];super.register(e,t)}get(e){return super.get(e,{name:"none",title:()=>""})}dispose(){var e;null===(e=this._subscribe)||void 0===e||e.unsubscribe()}updateActionInfoInConfig(){this.getConfigs().forEach(e=>{this.setPathToActionInfoInConfig(e,[])})}constructor(e,t){super(),this.store=e,this.workbenchToolBarService=t,this.store.register(lN.j.WorkbenchToolBarPanel,{activePanels:void 0,panelItems:new Map});let i=e.get(lN.j.WorkbenchToolBar).subscribe(()=>{this.onUpdate()});this._subscribe=i}}lZ=(0,b.gn)([(0,s4.t)({overridable:!0,scope:"ui:service",name:lP.Mp.ToolBarPanel}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O,void 0===lV?Object:lV])],lZ);class lz extends lL{$forceUpdate(){this.forceUpdateWithStore(this.store,lN.j.WorkbenchEditorContainer)}onUpdate(){super.onUpdate();let e=this.store.get(lN.j.WorkbenchEditorContainer),t=this.getConfigs(),i=[];t.forEach(e=>{i.push(e)});this.updateActionInfoInConfig(),e.next({editors:i})}register(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];super.register(e,t)}get(e){return super.get(e,{name:"none"})}dispose(){}updateActionInfoInConfig(){this.getConfigs().forEach(e=>{this.setPathToActionInfoInConfig(e,[])})}constructor(e){super(),this.store=e,this.store.register(lN.j.WorkbenchEditorContainer,{editors:[]})}}lz=(0,b.gn)([(0,s4.t)({overridable:!0,scope:"ui:service",name:lP.Mp.EditorContainer}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],lz);class l$ extends lL{$forceUpdate(){this.forceUpdateWithStore(this.store,lN.j.WorkbenchOperateDetailsPage)}onUpdate(){var e,t,i,r,n;super.onUpdate();let o=this.store.get(lN.j.WorkbenchOperateDetailsPage),a={activeTarget:null===(e=this._currentActivePage)||void 0===e?void 0:e.name,pages:this.getConfigs()};o.value.activeTarget&&(null===(i=o.value.pages.get(o.value.activeTarget))||void 0===i||null===(t=i.onActiveChange)||void 0===t||t.call(i,{active:!1})),a.activeTarget&&(null===(n=a.pages.get(a.activeTarget))||void 0===n||null===(r=n.onActiveChange)||void 0===r||r.call(n,{active:!0,extraParams:this._activeExtraParams})),this.updateActionInfoInConfig(),o.next(a)}get(e){return super.get(e,{name:"none"})}dispose(){var e;null===(e=this._subscribe)||void 0===e||e.unsubscribe()}openOperateDetailPage(e,t){var i;if(e===(null===(i=this._currentActivePage)||void 0===i?void 0:i.name))return;let r=this.get(e);(0,P.Y2)(!!r,"not found target menu, please check logic"),this._currentActivePage=r,this._activeExtraParams=t,this.outerInjectedService.invokeFunction(e=>{e.get(tZ.e).internalFireOperateDetailPageStatus("open")}),this.onUpdate()}closeOperateDetailsPage(){this._currentActivePage=void 0,this.outerInjectedService.invokeFunction(e=>{e.get(tZ.e).internalFireOperateDetailPageStatus("close")}),this.onUpdate()}updateActionInfoInConfig(){this.getConfigs().forEach(e=>{this.setPathToActionInfoInConfig(e,[])})}constructor(e,t){super(),this.store=e,this.outerInjectedService=t,this.store.register(lN.j.WorkbenchOperateDetailsPage,{activeTarget:void 0,pages:new Map})}}l$=(0,b.gn)([(0,s4.t)({overridable:!0,scope:"ui:service",name:lP.Mp.OperateDetailsPage}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O,ld])],l$);class lK extends lL{$forceUpdate(){this.forceUpdateWithStore(this.store,lN.j.WorkbenchOperateDetailsPagePanel)}onUpdate(){super.onUpdate();let e=this.store.get(lN.j.WorkbenchOperateDetailsPagePanel),t=this.store.get(lN.j.WorkbenchOperateDetailsPage),i={activeGroup:null==t?void 0:t.value.activeTarget,panels:this.getConfigs()};this.updateActionInfoInConfig(),e.next(i)}get(e){return super.get(e,{name:"none",group:""})}dispose(){var e;null===(e=this._subscribe)||void 0===e||e.unsubscribe()}updateActionInfoInConfig(){this.getConfigs().forEach(e=>{this.setPathToActionInfoInConfig(e,[])})}constructor(e,t){super(),this.store=e,this.outerInjectedService=t,this.store.register(lN.j.WorkbenchOperateDetailsPagePanel,{activeGroup:void 0,panels:new Map});let i=e.get(lN.j.WorkbenchOperateDetailsPage).subscribe(()=>{this.onUpdate()});this._subscribe=i}}lK=(0,b.gn)([(0,s4.t)({overridable:!0,scope:"ui:service",name:lP.Mp.OperateDetailsPagePanel}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O,ld])],lK);var lq=i("508540"),lY=i("335280"),lJ=i("565872"),lQ=i("416394");i("17435");var lX=i("629913"),l0=i("105789"),l1=i.n(l0),l2=i("958444"),l6=i("44203");let l3={Windows:null!==(f=null===(g=i.g.navigator)||void 0===g?void 0:g.platform.startsWith("Win"))&&void 0!==f&&f,MacOS:null!==(y=null===(h=i.g.navigator)||void 0===h?void 0:h.platform.startsWith("Mac"))&&void 0!==y&&y,Linux:null!==(w=null===(m=i.g.navigator)||void 0===m?void 0:m.platform.startsWith("Linux"))&&void 0!==w&&w,IOS:["iPhone","iPad","iPod"].indexOf(null===(v=i.g.navigator)||void 0===v?void 0:v.platform)>=0},l4=e=>{let{updateSidebarWidth:t,isSiderCollapsed:i,resizeEndContentWidth:r}=e,n=(0,eB.useRef)(!1),o=(0,eB.useRef)(!1),[a,s]=(0,eB.useState)(!1),l=(0,eB.useRef)(null),c=(0,lJ.Y)(lP.Mp.SiderMenu),d=(0,lJ.Y)(lP.Mp.SiderMenuPanel),u=(0,l6.k)(c,e=>{var t;return null===(t=e.observableData.resizeBarVisible)||void 0===t||t}),p=(0,eB.useRef)(0),_=(0,eB.useCallback)(e=>{if(o.current||l.current&&(e.target===l.current||l.current.contains(e.target)))return;n.current=(null==c?void 0:c.forceActivateTransition)||!1,null==c||c.forceSetActivateTransition(!1),null==d||d.clearAllPreRenderPanel(),s(!0),o.current=!0,p.current=e.clientX,null==d||d.onResizeStart();let i=(0,oO.throttle)(e=>{if(!o.current)return;let i=e.clientX;e.stopImmediatePropagation(),t(i),null==d||d.onResize(i)},33),a=e=>{o.current=!1,null==c||c.forceSetActivateTransition(n.current),s(!1),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",a),null==d||d.reTriggerPreRenderPanel(),r(e.clientX-p.current),null==d||d.onResizeEnd()};window.addEventListener("mouseup",a),window.addEventListener("mousemove",i)},[t]);return(0,eF.jsx)(eF.Fragment,{children:(0,eF.jsxs)("div",{className:l1()("resize-bar-container",a?"active":void 0,{"is-collapsed":i}),children:[(0,eF.jsx)("div",{className:"resize-trigger-content",onMouseDown:_,children:(0,eF.jsx)("div",{className:l1()("resize-high-light-bar")})}),u?(0,eF.jsx)(lX.Z,{className:"resize-bar-tooltips-container",position:"right",triggerProps:{trigger:"hover",autoFitPosition:!1},content:(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsx)("span",{children:tj.ZP.t("web_keyboard_text_Show_hide_panel",{},"Show or hide panel")}),(0,eF.jsx)("span",{className:"tooltip-shortcut-tips",children:l3.MacOS?" \u2318/ ":" Ctrl+/ "})]}),children:(0,eF.jsx)("span",{className:"resize-handler-btn",ref:l,onClick:()=>{null==c||c.toggleMenuPanel({mode:"manual",actionType:"click"})},children:i?(0,eF.jsx)(l2.WFs,{size:16,className:"arrow"}):(0,eF.jsx)(l2.GBr,{size:16,className:"arrow"})})}):null]})})};var l5=i("170882"),l8=i("544633"),l7=i("57429"),l9=i("141913");let ce=(0,eB.memo)(e=>{let{[s7.R.SiderMenu]:t}=e,i=()=>{let{activeTarget:t}=e,{panelItems:i}=e[lN.j.WorkbenchSiderMenuPanel];return t&&i.has(t)?i.get(t):void 0},[r,n]=(0,eB.useState)({initializing:!0,menuPanelConfig:i()});(0,eB.useEffect)(()=>{n({initializing:!0,menuPanelConfig:i()});let e=i();if(null==e?void 0:e.lazyLoadSource){var t;let i=null===(t=e.lazyLoadSource)||void 0===t?void 0:t.call(e);i instanceof Promise?i.then(()=>{n(e=>({...e,initializing:!1}))}):n(e=>({...e,initializing:!1}))}else(null==e?void 0:e.content)&&n(e=>({...e,initializing:!1}))},[e[lN.j.WorkbenchSiderMenuPanel]]);let{initializing:o,menuPanelConfig:a}=r,s=(0,l7.k)(null==a?void 0:a.skeleton,null,{containerWidth:null==t?void 0:t.panelSize.current}),l=(0,l8.default)(()=>{var e;null==a||null===(e=a.onClick)||void 0===e||e.call(a,a)}),c=(0,l8.default)(()=>{var e;null==a||null===(e=a.onHover)||void 0===e||e.call(a,a)}),d=(0,l8.default)(()=>{var e;null==a||null===(e=a.onEnter)||void 0===e||e.call(a,a)});return(0,eF.jsx)("div",{id:null==a?void 0:a.id,className:l1()("workbench-sider-menu-panel-container",{highlight:e.isHighlight},(0,l7.k)(null==a?void 0:a.className,"")),onClick:l,onMouseEnter:d,onMouseOver:c,children:(0,eF.jsx)(l9.SV,{fallback:(0,eF.jsx)("div",{}),children:o?s:(0,l7.k)(null==a?void 0:a.content,null,{extraParams:e.extraParams})})})}),ct=(0,lQ.x)([s7.R.SiderMenu,lN.j.WorkbenchSiderMenuPanel])(ce),ci=(0,lQ.x)([lN.j.WorkbenchSiderMenu,lN.j.WorkbenchSiderMenuPanel])(e=>{let t=(0,lJ.Y)(lP.Mp.SiderMenu),[i,r]=(0,l6.k)(t,e=>[e.observableData.highlight,e.forceActivateTransition]),n=e[lN.j.WorkbenchSiderMenu],o=e[lN.j.WorkbenchSiderMenuPanel];return(0,eF.jsx)("div",{className:l1()("layout-container","lv-theme-force_dark",{"smooth-width-transition":r}),"lv-theme-version":"2.0","data-lv-theme-force":"dark",children:(()=>{let e=[];for(let s of o.panelRenderTags.values())if(s.hasRendered||s.needPreRender){var t,r,a;e.push((0,eF.jsx)("div",{className:"menu-panel-list-wrapper",style:(null===(t=n.activeTarget)||void 0===t?void 0:t.name)===s.name?{}:{zIndex:-1,opacity:0,pointerEvents:"none"},children:(0,eF.jsx)(ct,{isHighlight:i&&(null===(r=n.activeTarget)||void 0===r?void 0:r.name)===s.name,activeTarget:s.name,extraParams:(null===(a=n.activeTarget)||void 0===a?void 0:a.name)===s.name?o.extraParams:void 0})},s.name))}return e})()})}),cr=e=>{var t;let{data:i}=e,r=(0,l7.k)(i.tooltips,""),n=(0,oO.merge)({className:"wb-icon-btn-tooltips",position:"bottom",triggerProps:{trigger:"hover",popupAlign:{bottom:5}},content:r,style:{zIndex:10001}},null!==(t=i.tooltipProps)&&void 0!==t?t:{}),o=(0,eF.jsx)(l9.SV,{fallback:(0,eF.jsx)("div",{}),children:(0,eF.jsxs)("div",{className:"sider-menu-action",onClick:()=>{var e;return null===(e=i.onClick)||void 0===e?void 0:e.call(i)},onMouseOver:()=>{var e;return null==i?void 0:null===(e=i.onHover)||void 0===e?void 0:e.call(i)},onMouseEnter:()=>{var e;return null===(e=i.onEnter)||void 0===e?void 0:e.call(i)},children:[(0,l7.k)(i.icon,null),i.title?(0,eF.jsx)("span",{className:"workbench-action-item-title",children:i.title()}):null]})});return r?(0,eF.jsx)(lX.Z,{...n,children:o}):o},cn=e=>{var t,i;let{data:r,active:n,onClick:o,onHover:a,notAccessible:s,onEnter:l}=e,c=null===(t=r.title)||void 0===t?void 0:t.call(r),d=(null!==(i=null==c?void 0:c.split(" ").length)&&void 0!==i?i:0)>1;return(0,eF.jsx)(lX.Z,{disabled:!s,content:tj.ZP.t("web_collaborate_text_unable_edit_viewing",{},"You can\u2019t edit this project with \u201CCan view\u201D permission"),position:"right",triggerProps:{popupAlign:{right:13}},style:{maxWidth:"365px"},children:(0,eF.jsx)(nP.Z.Item,{id:(0,l7.k)(r.id,void 0),className:l1()("workbench-menu-item",{disabled:(0,l7.k)(r.shouldDisabled,!1),active:n},`${r.name}-menu`,{"not-accessible":s}),onClick:()=>{!(0,l7.k)(r.shouldDisabled,!1)&&!(0,l7.k)(r.disabledClick,!1)&&!s&&o(r)},onMouseOver:()=>{a(r)},onMouseEnter:()=>{l(r)},children:(0,eF.jsxs)(l9.SV,{fallback:(0,eF.jsx)("div",{}),children:[(0,eF.jsxs)("div",{className:"menu-inner-box",children:[(0,l7.k)(r.icon,null),c?(0,eF.jsx)(lX.Z,{checkOverflow:!0,content:c,position:"right",trigger:"hover",children:d?(0,eF.jsx)(eF.Fragment,{children:c.split(" ").map(e=>(0,eF.jsx)("span",{className:"workbench-menu-item-title",children:e},e))}):(0,eF.jsx)("span",{className:"workbench-menu-item-title",children:c})}):null]}),(0,eF.jsx)("div",{className:"bg-box"})]})},r.name)})},co=e=>{let{type:t,visible:i,onClick:r}=e;return(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsx)("span",{className:l1()("sider-menu--chevron_icon","custom-style",t,{visible:i}),onClick:()=>r(t),children:"up"===t?(0,eF.jsx)(nL.O_V,{size:10}):(0,eF.jsx)(nL.h1J,{size:10})}),(0,eF.jsx)("div",{className:l1()("sider-menu--chevron_bg",t,{visible:i})})]})},ca=(0,lQ.x)([s7.R.SiderMenu,lN.j.WorkbenchSiderMenu,s7.R.AccesableSiderMenu])(e=>{var t,i,r;let{onSiderFadeInLeft:n}=e,o=(0,lJ.Y)(lP.Mp.SiderMenu),a=(0,eB.useMemo)(()=>{var t,i;let r=e[lN.j.WorkbenchSiderMenu];return{...r,top:null===(t=r.top)||void 0===t?void 0:t.filter(e=>{var t;return!(null===(t=e.shouldHide)||void 0===t?void 0:t.call(e))}),bottom:null===(i=r.bottom)||void 0===i?void 0:i.filter(e=>{var t;return!(null===(t=e.shouldHide)||void 0===t?void 0:t.call(e))})}},[e[lN.j.WorkbenchSiderMenu]]),[s,l]=(0,eB.useState)(!1),[c,d]=(0,eB.useState)(!1),[u,p]=(0,eB.useState)(!1),_=(0,eB.useRef)(null),{exclude:g,hackPadding:h}=null!==(r=null===(t=e[s7.R.SiderMenu])||void 0===t?void 0:t.footerConfig)&&void 0!==r?r:{},m=e[s7.R.AccesableSiderMenu],v=()=>{var e;null===(e=_.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})},f=()=>{var e;null===(e=_.current)||void 0===e||e.scrollTo({top:1e4,behavior:"smooth"})},y=()=>(0,eF.jsx)("div",{className:l1()("menu-list-foot","sider-menu-actions",{"hack-padding":h}),children:a.bottom.map(e=>(0,eF.jsx)(cr,{data:e},e.name))}),w=(0,eB.useCallback)(e=>{var t;null===(t=e.onClick)||void 0===t||t.call(e),n(!!(null==o?void 0:o.toggleMenuPanelByName(e.name)))},[n,o]),b=(0,eB.useCallback)(e=>{var t;null===(t=e.onHover)||void 0===t||t.call(e)},[]),S=(0,eB.useCallback)(e=>{var t;null===(t=e.onEnter)||void 0===t||t.call(e)},[]),C=()=>{let e=_.current;e.scrollTop>0?d(!0):d(!1),Math.ceil(e.scrollTop)+e.clientHeight>=e.scrollHeight?p(!1):p(!0)},k=e=>{let t=e.offsetHeight;e.scrollHeight>t?(C(),l(!0)):l(!1)};return(0,eB.useEffect)(()=>{let e=new ResizeObserver(e=>{for(let t of e)k(t.target)}),t=()=>C();return _.current&&(e.observe(_.current),_.current.addEventListener("scroll",t),k(_.current)),()=>{_.current&&(e.unobserve(_.current),_.current.removeEventListener("scroll",t))}},[_]),(0,eB.useEffect)(()=>{setTimeout(()=>{_.current&&k(_.current)},10)},[a.top.length,a.bottom.length]),(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsxs)("div",{className:"workbench-layout-sider-scroll__container",children:[s&&(0,eF.jsx)(co,{type:"up",onClick:()=>v(),visible:c}),(0,eF.jsxs)("div",{ref:_,className:l1()("workbench-layout-sider-scroll"),children:[(0,eF.jsx)(nP.Z,{className:"menu-item-container",tooltipProps:{disabled:!0},children:null===(i=a.top)||void 0===i?void 0:i.map(e=>{var t;return(0,eF.jsxs)(eB.Fragment,{children:[e.appendDividerBefore?(0,eF.jsx)("div",{className:"sider-menu-divider"}):null,(0,eF.jsx)(cn,{active:e.name===(null===(t=a.activeTarget)||void 0===t?void 0:t.name),data:e,onClick:w,onHover:b,notAccessible:m,onEnter:S},e.name),e.appendDividerAfter?(0,eF.jsx)("div",{className:"sider-menu-divider"}):null]},e.name)})}),!g&&y()]}),s&&(0,eF.jsx)(co,{type:"down",onClick:()=>f(),visible:u})]}),g&&y()]})}),cs=(0,lQ.x)([s7.R.HideLogo,s7.R.BackLogoConfirguation,s7.R.SiderMenu,s7.R.AccesableSiderMenu,lN.j.WorkbenchSiderMenuPanel])(e=>{var t,i;let{className:r,style:n,onSiderFadeInLeft:o,isSiderCollapsed:a,displayMode:s,updateSidebarWidth:l,resizeEndContentWidth:c,forwardedRef:d,...u}=e,p=(0,lJ.Y)(lP.Mp.SiderMenu),_=u[s7.R.HideLogo],g=u[s7.R.BackLogoConfirguation],h=u[s7.R.AccesableSiderMenu],m=u[s7.R.SiderMenu],[v]=(0,l6.k)(p,e=>[e.forceActivateTransition]),f=()=>{var e,t,i;if(null==g||null===(e=g.onClickCb)||void 0===e||e.call(g),null==g?!void 0:null===(t=g.disableLogoRedirect)||void 0===t?!void 0:!t.call(g))window.location.href=(0,nN.C)(`${window.location.origin}${null!==(i=null==g?void 0:g.backPath)&&void 0!==i?i:l5.O}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},y=(0,eB.useRef)(),w=(0,eB.useRef)((()=>{let e=window.document.querySelector("#ssr-root .workbench-layout-sider"),t="";if(!e)return null;y.current=e.className;for(let i=0;i<e.children.length;i++)t+=e.children[i].outerHTML;return t})()),b=!1;for(let e of u[lN.j.WorkbenchSiderMenuPanel].panelItems.values()){if(b)break;b=!!e.content&&!!e.skeleton}if(w.current&&!b&&!h)return(0,eF.jsx)("div",{className:y.current,dangerouslySetInnerHTML:{__html:(0,nN.J)(w.current,null,{logType:"react.dangerouslySetInnerHTML",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}});return(0,eF.jsxs)("div",{className:l1()("workbench-layout-sider",r,{"is-collapsed":a,"smooth-width-transition":v}),style:n,ref:d,children:[(0,eF.jsxs)("div",{className:"menu-list","lv-theme-version":"2.0","data-lv-theme-force":"dark",children:[(0,eF.jsx)("div",{className:"menu-list-head",children:_?null:(null==m?void 0:m.customLogo)?m.customLogo():(0,eF.jsx)(lX.Z,{disabled:!(null==g?void 0:g.showToolTip),content:tj.ZP.t("web_back_to_top",{},"Home"),children:(0,eF.jsx)("div",{className:l1()("logo",{cursor:!(null==g?void 0:g.disableBackCursor)}),onClick:f,children:null!==(i=null==g?void 0:null===(t=g.customLogoIcon)||void 0===t?void 0:t.call(g))&&void 0!==i?i:(0,eF.jsx)(l2.RqY,{width:25.46,height:20})})})}),(0,eF.jsx)(ca,{onSiderFadeInLeft:o})]}),h&&a?null:(0,eF.jsx)(ci,{}),!h&&(0,eF.jsx)(l4,{isSiderCollapsed:a,updateSidebarWidth:l,resizeEndContentWidth:c})]})}),cl=(0,eB.forwardRef)((e,t)=>(0,eF.jsx)(cs,{...e,forwardedRef:t}));var cc=i("569471");i("701840");var cd=i("794571");let cu=e=>{let{menuItems:t,moreMenuConfig:i}=e,r=(0,eB.useMemo)(()=>{t.sort((e,t)=>{var i,r;return((null===(i=e.showInMenu)||void 0===i?void 0:i.priorityInMenu)||0)-((null===(r=t.showInMenu)||void 0===r?void 0:r.priorityInMenu)||0)});let e={};for(let a of t){var i,r,n,o;let t=null!==(r=null===(i=a.showInMenu)||void 0===i?void 0:i.group)&&void 0!==r?r:"none";!((0,oO.isFunction)(a.menuRender)&&null===a.menuRender())&&(!e[t]&&(e[t]=[]),null===(o=e[t])||void 0===o||null===(n=o.push)||void 0===n||n.call(o,a))}return e},[t]),n=(0,eB.useMemo)(()=>Object.keys(r),[r]),[o,a]=(0,eB.useState)(!1),s=(0,eF.jsxs)("div",{className:l1()("title-bar-more-menu-btn",o&&"lv-dropdown-popup-visible"),children:[(0,eF.jsx)(nL.PI0,{fontSize:18}),("fail"===i.menuStatus||i.menuNumber)&&(0,eF.jsx)("div",{className:"red-point-tip",children:"fail"===i.menuStatus?"!":i.menuNumber})||null]});return(0,eF.jsx)(nA.Z,{trigger:"click",unmountOnExit:!1,onVisibleChange:e=>{a(e)},popupAlign:{bottom:[0,10]},droplist:(0,eF.jsx)(nP.Z,{className:"title-bar-more-menu",children:n.map((e,t)=>(0,eF.jsxs)(eB.Fragment,{children:[r[e].length&&(0,eF.jsx)(nP.Z.ItemGroup,{title:cw(e),className:`${e} title-bar-more-menu-group`,children:r[e].map(e=>{var t,i,r;return(null==e?void 0:null===(t=e.showInMenu)||void 0===t?void 0:t.withMenu)?(0,eF.jsx)(nP.Z.Item,{children:null===(i=e.menuRender)||void 0===i?void 0:i.call(e)},e.name):(0,eF.jsxs)(eB.Fragment,{children:[" ",null===(r=e.menuRender)||void 0===r?void 0:r.call(e)," "]},e.name)})},e),t<Object.keys(n).length-1&&(0,eF.jsx)(cd.Z,{className:"title-bar-more-menu-divider"})]},e))}),position:"br",children:o?s:(0,eF.jsx)(lX.Z,{content:tj.ZP.t("web_suspend_tool_button_more",{},"More"),children:s})})},cp=e=>{let{data:t,headerLayoutWidth:i}=e,r="function"==typeof t.content?t.content(t):t.content||null,n=eB.Children.toArray(r).map((e,t)=>eB.isValidElement(e)?eB.cloneElement(e,{headerlayoutwidth:i,key:t}):e);return(0,eF.jsx)(eF.Fragment,{children:n})},c_=e=>{var t;let i,{data:r}=e,n=(0,l7.k)(null==r?void 0:r.isActive,!1),o=(0,l7.k)(null==r?void 0:r.isDisable,!1),a=(0,l7.k)(null==r?void 0:r.className,"");"function"==typeof(null==r?void 0:r.tooltips)?i=(0,l7.k)(null==r?void 0:r.tooltips(),void 0):"object"==typeof(null==r?void 0:r.tooltips)&&(i=(0,eF.jsxs)("div",{className:"wb-icon-btn-tooltips-content",children:[(0,eF.jsx)("span",{children:r.tooltips.content()}),r.tooltips.subContent?(0,eF.jsx)("span",{className:"content-tips",children:r.tooltips.subContent()}):null]}));let s=(0,oO.merge)({className:"wb-icon-btn-tooltips",position:"bottom",triggerProps:{trigger:"hover",popupAlign:{bottom:5}},content:i},null!==(t=r.tooltipProps)&&void 0!==t?t:{}),l=(0,eF.jsx)("div",{className:l1()("title-bar-icon-btn",{active:n,disable:o,[a]:!!a}),onClick:()=>{var e;return null===(e=r.onClick)||void 0===e?void 0:e.call(r)},onMouseOver:()=>{var e;return null===(e=r.onHover)||void 0===e?void 0:e.call(r)},children:n?r.activeIcon:r.icon});return i?(0,eF.jsx)(lX.Z,{...s,children:l}):l},cg="btn-ruevlZ",ch=e=>{var t;let i,{data:r}=e,n=(0,l7.k)(null==r?void 0:r.isDisable,!1);"function"==typeof(null==r?void 0:r.tooltips)&&(i=(0,l7.k)(null==r?void 0:r.tooltips(),void 0));let o=(0,oO.merge)({className:"wb-btn-tooltips",position:"bottom",triggerProps:{trigger:"hover",popupAlign:{bottom:5}},content:i},null!==(t=r.tooltipProps)&&void 0!==t?t:{}),{btnProps:a}=r,s=(0,eF.jsx)(nx.Z,{...a,className:l1()("title-bar-btn",cg,(0,l7.k)(r.className,""),{disable:n}),disabled:n,loading:(0,l7.k)(r.isLoading,!1),onClick:()=>{var e;null===(e=r.onClick)||void 0===e||e.call(r)},onMouseOver:()=>{var e;return null===(e=r.onHover)||void 0===e?void 0:e.call(r)},children:(0,l7.k)(r.text,"")});return i?(0,eF.jsx)(lX.Z,{...o,children:s}):s},cm=e=>{let{data:t,headerLayoutWidth:i}=e;switch(t.type){case lU._.IconBtn:return(0,eF.jsx)(l9.SV,{fallback:(0,eF.jsx)("div",{}),children:(0,eF.jsx)(c_,{data:t})});case lU._.Custom:return(0,eF.jsx)(l9.SV,{fallback:(0,eF.jsx)("div",{}),children:(0,eF.jsx)(cp,{data:t,headerLayoutWidth:i})});case lU._.Btn:return(0,eF.jsx)(l9.SV,{fallback:(0,eF.jsx)("div",{}),children:(0,eF.jsx)(ch,{data:t})});default:return null}},cv={left:265,center:330,right:265},cf="titleBarMoreMenu";function cy(e,t,i,r){var n,o,a,s,l,c;switch(e.position){case"left":t.totalWidth-=null!==(o=null===(n=t[e.name])||void 0===n?void 0:n.width)&&void 0!==o?o:0;break;case"right":r.totalWidth-=null!==(s=null===(a=r[e.name])||void 0===a?void 0:a.width)&&void 0!==s?s:0;break;case"center":i.totalWidth-=null!==(c=null===(l=i[e.name])||void 0===l?void 0:l.width)&&void 0!==c?c:0;break;default:(0,P.bP)(e.position)}}let cw=e=>{var t;return null!==(t=({help:tj.ZP.t("workspace_feedbackwe",{},"Help"),options:"Options",none:"",untitled:"",settings:tj.ZP.t("web_teamNewUser_button_settings",{},"Settings"),"sign-in":""})[e])&&void 0!==t?t:""},cb=e=>"function"==typeof e.style?e.style():e.style,cS=(e,t)=>(0,l7.k)(e.shouldHidden,!1)||t===lq.w.readonly&&e.onlyShowedWhenEditable,cC=(e,t,i)=>cS(e,i)?null:(0,eF.jsxs)(eB.Fragment,{children:[e.appendDividerBefore?(0,eF.jsx)("div",{className:"title-bar-divider"}):null,(0,eF.jsx)("div",{"data-id":e.name,style:cb(e),children:(0,eF.jsx)(cm,{data:e,headerLayoutWidth:t})}),e.appendDividerAfter?(0,eF.jsx)("div",{className:"title-bar-divider"}):null]},e.name),ck=(e,t)=>{let i=e||{left:[],center:[],right:[],moreMenuConfig:{menuStatus:"none",menuNumber:0}};if("undefined"!=typeof window&&window.location.search.includes("__ssr_pending__"))return{left:[],center:[],right:[],moreMenuConfig:{menuStatus:"none",menuNumber:0}};let r=e=>e.filter(e=>t?(e.group===t||"all"===e.group)&&!(0,l7.k)(e.shouldHidden,!1):(!e.group||"all"===e.group)&&!(0,l7.k)(e.shouldHidden,!1));return{left:r(i.left),center:r(i.center),right:r(i.right),moreMenuConfig:{menuStatus:i.moreMenuConfig.menuStatus,menuNumber:i.moreMenuConfig.menuNumber}}},cE=(e,t)=>{let i=(0,oO.cloneDeep)(e);if(!t)return i;for(let o of Object.keys(i)){let a=t[o],s=e[o],l=Object.keys(a),c=new Set([...l,...Object.keys(s)]);c.delete("totalWidth"),c.delete(cf);let d=0;for(let e of c){var r,n;let t=a[e],l=s[e];i[o][e]=l&&(null==l?void 0:l.width)!==0?(0,cc.I)(l):(0,cc.I)(t),d+=null!==(n=null===(r=i[o][e])||void 0===r?void 0:r.width)&&void 0!==n?n:0}i[o].totalWidth=d}return i},cI=e=>{let[t,i]=(0,eB.useState)();return(0,eB.useEffect)(()=>{if(e.current){let t=new ResizeObserver(e=>{for(let t of e){let{offsetWidth:e,offsetHeight:r}=t.target;i({width:e,height:r})}});return t.observe(e.current,{box:"border-box"}),()=>{t.disconnect()}}},[e.current]),t};var cT=i("771380");let cP=e=>`fake-render-title-bar-${e}`,cA=(0,oO.throttle)(e=>{let t,{renderMenus:i,setHeaderIconSizeMap:r,selector:n}=e,o={left:{totalWidth:0},center:{totalWidth:0},right:{totalWidth:0}};for(let e=0;e<i.length;e++){let t=i[e],r=window.document.querySelector(`#${n(e)}`);if(null!==r){let e=r.getBoundingClientRect();o[t.position][t.name]={width:e.width,height:e.height},o[t.position].totalWidth+=e.width}}if((t=o).left.totalWidth||t.right.totalWidth||t.center.totalWidth)r(o)},300);var cR=i("651248");let cx=()=>{let[e,t]=(0,eB.useState)({left:{totalWidth:0},center:{totalWidth:0},right:{totalWidth:0}});return{csrHeaderIconSizeMap:e,handleResize:(e,i,r)=>{t(t=>{var n,o,a;let s=(0,cR.Sw)(t);return s[r].totalWidth-=null!==(a=null===(o=s[r])||void 0===o?void 0:null===(n=o[e])||void 0===n?void 0:n.width)&&void 0!==a?a:0,s[r][e]=i,s[r].totalWidth+=i.width,s})}}};var cN=i("445080");let cL=e=>{let{item:t,headerBarWidth:i,workbenchMode:r,position:n,handleResize:o}=e;(0,eB.useEffect)(()=>()=>{o(t.name,{width:0,height:0},n)},[]);let a=(0,eB.useRef)(null),s=(0,eB.useRef)(0);return(0,cN.y)(a,e=>{let{width:i,height:r}=e[0].contentRect;s.current!==i&&(o(t.name,{width:i,height:r},n),s.current=i)},{box:"border-box"}),(0,eF.jsx)("div",{className:"header-title-bar-render-compoents",style:t.wrapperStyle,ref:a,children:cC(t,i,r)})},cO=(0,eB.memo)(e=>{var t,i,r,n,o;let{group:a,...s}=e,{className:l,containerPaddingX:c,centerBoxPaddingX:d,iconBtnWidth:u,renderMenuConfig:p,titleBarMinWidth:_=cv}=s[s7.R.TitleBar],g=s[s7.R.HideTitleBar],h=s[s7.R.WorkbenchMode],m=(0,eB.useMemo)(()=>ck(s[lN.j.WorkbenchTitleBar],a),[s[lN.j.WorkbenchTitleBar]]),v=(0,eB.useMemo)(()=>(function(e){let t=[];return Object.values(e).forEach(e=>{e instanceof Array&&e.forEach(e=>{e.menuRender&&t.push(e)})}),t.sort((e,t)=>{var i,r,n,o;return(null!==(n=null==t?void 0:null===(i=t.showInMenu)||void 0===i?void 0:i.priority)&&void 0!==n?n:0)-(null!==(o=null==e?void 0:null===(r=e.showInMenu)||void 0===r?void 0:r.priority)&&void 0!==o?o:0)})})(m),[m]),f=(0,eB.useRef)(null),y=cI(f),[w,b]=(0,eB.useState)(!0),{ssrHeaderIconSizeMap:S,renderedComponents:C}=function(e){let t=(0,eB.useMemo)(()=>{let{headers:t}=e;return t?[...t.left,...t.center,...t.right]:[]},[e.headers]),[i,r]=(0,eB.useState)();return(0,eB.useLayoutEffect)(()=>cA({renderMenus:t,selector:cP,setHeaderIconSizeMap:r}),[t]),{ssrHeaderIconSizeMap:i,renderedComponents:(0,eB.useMemo)(()=>t.map((e,t)=>{try{return cT.renderToString((0,eF.jsx)("div",{className:"fake-render-title-bar-node",id:cP(t),children:cC(e)}))}catch(e){return""}}),[t])}}({headers:m}),{csrHeaderIconSizeMap:k,handleResize:E}=cx(),I=(0,eB.useMemo)(()=>cE(k,S),[S,k]);(0,eB.useEffect)(()=>{I&&b(!1)},[I]);let[A,R]=(0,eB.useState)(void 0),[x,N]=(0,eB.useState)(void 0),[L,O]=(0,eB.useState)(_.right),[M,D]=(0,eB.useState)({left:[],center:[],right:[]});(0,eB.useEffect)(()=>{var e,t;if(w||!I)return;let i=(0,l7.k)(null==p?void 0:p.style,{marginRight:"8px"}),r=function(e){let{containerDom:t,storeIconSize:i,allowShowInMenu:r,containerBoxRect:n,titleBarMinWidth:o}=e,a=function(e){let{offsetWidth:t,offsetHeight:i}=e;return{width:t,height:i}}(t),s=(0,oO.cloneDeep)(i.left);s.totalWidth+=n.leftBoxPadding;let l=(0,oO.cloneDeep)(i.center);l.totalWidth+=2*n.centerBoxPadding,l.totalWidth=Math.max(l.totalWidth,o.center);let c=(0,oO.cloneDeep)(i.right);c.totalWidth+=n.rightBoxPadding;let d=()=>a.width/2-l.totalWidth/2>=c.totalWidth,u=!1,p=new Set,_=a.width;for(let e of r){var g;(!(null==e?void 0:e.content)&&(null==e?void 0:e.menuRender)||(null==e?void 0:null===(g=e.shouldRenderInMenu)||void 0===g?void 0:g.call(e,_)))&&(cy(e,s,l,c),p.add(e),!u&&(null==e?void 0:e.menuRender)&&(u=!0,c.totalWidth+=n.iconBtnSize))}let h=0;for(;h<r.length;){let e=r[h];h++;let t=p.has(e),i=!d()||0===function(e,t,i,r){var n,o,a,s,l,c;switch(e.position){case"left":return null!==(o=null===(n=t[e.name])||void 0===n?void 0:n.width)&&void 0!==o?o:0;case"right":return null!==(s=null===(a=r[e.name])||void 0===a?void 0:a.width)&&void 0!==s?s:0;case"center":return null!==(c=null===(l=i[e.name])||void 0===l?void 0:l.width)&&void 0!==c?c:0;default:(0,P.bP)(e.position)}}(e,s,l,c)&&u;if(t||!i)continue;p.add(e),cy(e,s,l,c);let o=null==e?void 0:e.menuRender;!u&&o&&(u=!0,c.totalWidth+=n.iconBtnSize)}let m=a.width/2-l.totalWidth/2;return{showInMenu:Array.from(p).sort((e,t)=>{var i,r,n,o;return(null!==(n=null==t?void 0:null===(i=t.showInMenu)||void 0===i?void 0:i.priority)&&void 0!==n?n:0)-(null!==(o=null==e?void 0:null===(r=e.showInMenu)||void 0===r?void 0:r.priority)&&void 0!==o?o:0)}),aroundWidth:m,headerBarWidth:a.width,rightContainerMinWidth:Math.max(c.totalWidth>m?c.totalWidth:o.right,o.right)}}({containerDom:f.current,allowShowInMenu:null!=v?v:[],storeIconSize:I,containerBoxRect:{leftBoxPadding:"number"==typeof c?c:c[0],rightBoxPadding:"number"==typeof c?c:c[1],iconBtnSize:u+(parseFloat(`${null!==(e=null==i?void 0:i.marginRight)&&void 0!==e?e:"0"}`)||0)+(parseFloat(`${null!==(t=null==i?void 0:i.marginLeft)&&void 0!==t?t:"0"}`)||0),centerBoxPadding:d},titleBarMinWidth:_});R(r.aroundWidth),N(r.headerBarWidth),O(r.rightContainerMinWidth),D(function(e,t,i){var r,n,o;if(!t.length)return{left:e.left,center:e.center,right:e.right};let a=(0,oO.cloneDeep)(e),s={type:"Custom",name:cf,position:null!==(r=null==i?void 0:i.position)&&void 0!==r?r:"right",order:null!==(n=null==i?void 0:i.order)&&void 0!==n?n:0,orderLevel:null!==(o=null==i?void 0:i.orderLevel)&&void 0!==o?o:lO.r.low,style:null==i?void 0:i.style,content:()=>(0,eF.jsx)(cu,{menuItems:t,moreMenuConfig:a.moreMenuConfig})},l=a[s.position].findIndex(e=>e.name===s.name);-1===l?a[s.position].push(s):a[s.position][l]=s;let c=t.map(e=>e.name);return{left:(0,lO.l)({list:a.left.filter(e=>!c.includes(e.name))}),center:(0,lO.l)({list:a.center.filter(e=>!c.includes(e.name))}),right:(0,lO.l)({list:a.right.filter(e=>!c.includes(e.name))})}}(m,r.showInMenu.filter(e=>!!(null==e?void 0:e.menuRender)),p))},[null==y?void 0:y.width,I,w,v,m,c,u,d,p]);let j=e=>null==M?void 0:M[e];return(0,eF.jsxs)("div",{className:l1()("workbench-layout-header-container",l),style:{display:g?"none":void 0},ref:f,children:[(0,eF.jsx)("div",{className:"header-left",style:{minWidth:_.left,width:A,paddingLeft:null!==(n=null==c?void 0:c[0])&&void 0!==n?n:c},children:null===(t=j("left"))||void 0===t?void 0:t.map(e=>(0,eF.jsx)(cL,{item:e,headerBarWidth:x,workbenchMode:h,handleResize:E,position:"left"},e.name))}),(0,eF.jsx)("div",{className:"header-center",style:{minWidth:_.center,paddingLeft:d,paddingRight:d},children:null===(i=j("center"))||void 0===i?void 0:i.map(e=>(0,eF.jsx)(cL,{item:e,headerBarWidth:x,workbenchMode:h,handleResize:E,position:"center"},e.name))}),(0,eF.jsx)("div",{className:l1()("header-right"),style:{minWidth:L,width:A,paddingRight:null!==(o=null==c?void 0:c[1])&&void 0!==o?o:c},children:null===(r=j("right"))||void 0===r?void 0:r.map(e=>(0,eF.jsx)(cL,{item:e,headerBarWidth:x,workbenchMode:h,handleResize:E,position:"right"},e.name))}),(0,eF.jsx)("div",{className:"temp-header-for-calc",dangerouslySetInnerHTML:{__html:(0,nN.J)(C.join(""),null,{logType:"react.dangerouslySetInnerHTML",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}})]})}),cM=(0,lQ.x)([lN.j.WorkbenchTitleBar,s7.R.TitleBar,s7.R.HideTitleBar,s7.R.WorkbenchMode])(cO);var cD=i("557844");let cj=(0,lQ.x)([lN.j.WorkbenchEditorContainer])(e=>{var t;let i=(0,eB.useRef)(null),r=e[lN.j.WorkbenchEditorContainer];return(0,eF.jsxs)("div",{id:cD.C,className:"workbench-editor-container",ref:i,children:[null===(t=r.editors)||void 0===t?void 0:t.map(e=>(0,eF.jsx)(eB.Fragment,{children:(0,l7.k)(e.content,null)},e.name)),(0,eF.jsx)(s9.u,{containerRef:i})]})});var cF=i("195291");let cU={container:"container-RWR2Nd",active:"active-aJc93c",content:"content-X19Qi6",actionContainer:"action-container-GqOSyd"};var cB=i("140897"),cH=i("510949"),cG=i("590204");let cW=e=>{var t,i;let{data:r,titleBarHeight:n,boundingBox:o,containerRef:a}=e,s="operate-panel-title",l=(0,l7.k)(r.title,null),c=(()=>{let e=(0,l7.k)(r.titleActions,[]);return e?e instanceof Array?e.map(e=>{var t;let i=(0,oO.merge)({className:"wb-icon-btn-tooltips",position:"bottom",triggerProps:{trigger:"hover",popupAlign:{bottom:5}},content:e.tooltips},null!==(t=e.tooltipProps)&&void 0!==t?t:{});return(0,eF.jsx)(lX.Z,{...i,children:(0,eF.jsx)(nx.Z,{className:l1()("wb-operate-panel-action-btn",{active:null==e?void 0:e.active}),type:"text",disabled:e.disable,icon:e.icon,onClick:e.onClick})})}):e:null})(),d=(0,eB.useMemo)(()=>{var e;let t=document.createElement("div");return t.className="operate-panel-wrapper",null===(e=a.current)||void 0===e||e.appendChild(t),t},[]),u=(0,eB.useRef)(d),p=(0,eB.useRef)({left:window.innerWidth-cG.jt-cG.AH-cG.dd,top:cG.KR,right:cG.jt+cG.AH+cG.dd});return(0,eB.useEffect)(()=>()=>{o.reset(),d.remove()},[r]),(0,eF.jsx)(cH.q,{uniqueId:r.name,draggerHandlerSelection:`.${s}`,popupContainerRef:u,isPinned:!1,onClose:void 0,content:(0,eF.jsxs)("div",{id:r.id,className:l1()("operate-panel-container",(0,l7.k)(r.className,""),{draggable:null===(t=r.draggable)||void 0===t||t}),children:[null!==l?(0,eF.jsxs)("div",{className:l1()(s),children:[(0,eF.jsx)(lX.Z,{position:"bottom",content:(0,l7.k)(r.title,null),checkOverflow:e=>e.scrollWidth>e.clientWidth,triggerProps:{mouseEnterDelay:300},children:(0,eF.jsx)(l9.SV,{fallback:(0,eF.jsx)("div",{}),children:(0,eF.jsx)("div",{className:"title-left",children:(0,l7.k)(r.title,null)})})}),(null===(i=r.draggable)||void 0===i||i)&&(0,eF.jsx)(l2.zsX,{size:24,className:"operate-panel-draggable-icon"}),(0,eF.jsx)("div",{className:"title-actions",children:c})]}):null,(0,eF.jsx)(l9.SV,{fallback:(0,eF.jsx)("div",{}),children:(0,l7.k)(r.content,null)})]}),defaultPosition:p.current,boundOffset:{left:0,top:cG.KR+n,bottom:cG.Bn}})},cV=(0,lQ.x)([s7.R.TitleBar,lN.j.WorkbenchOperateDetailsPagePanel])(e=>{let t=e[s7.R.TitleBar],i=(0,eB.useMemo)(()=>{let t=[],{activeGroup:i,panels:r}=e[lN.j.WorkbenchOperateDetailsPagePanel];for(let e of r.values())e.group===i&&t.push(e);return t},[e[lN.j.WorkbenchOperateDetailsPagePanel]]),r=(0,eB.useRef)(new cB.k);return(0,eF.jsx)(eF.Fragment,{children:null==i?void 0:i.map(i=>(0,eF.jsx)(cW,{data:i,titleBarHeight:t.containerHeight,boundingBox:r.current,containerRef:e.containerRef},i.name))})}),cZ=(0,lQ.x)([lN.j.WorkbenchOperateDetailsPage])(e=>{let{activeTarget:t,pages:i}=e[lN.j.WorkbenchOperateDetailsPage],r=t?i.get(t):void 0,n=(0,eB.useRef)(null),o=(0,eB.useMemo)(()=>{let e=document.createElement("div");return e.className="operate-details-page-container",document.body.appendChild(e),e},[]),a=(0,eB.useRef)(o);return cF.createPortal((0,eF.jsx)("div",{ref:n,className:l1()(cU.container,{[cU.active]:!!r}),children:r?(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsx)(cM,{group:r.name}),(0,eF.jsxs)("div",{className:cU.content,children:[(0,eF.jsx)("div",{className:l1()("workbench-operate-tool",cU.actionContainer),children:(0,eF.jsx)(cV,{containerRef:n})}),(0,l7.k)(r.content,null)]})]}):null}),a.current)}),cz=eB.forwardRef((e,t)=>{let{className:i,collapsed:r,collapsedWidth:n,style:o,children:a}=e;return(0,eF.jsx)("div",{className:l1()("lv-layout-sider",i),style:o,ref:t,children:a})}),c$=(e,t)=>{let i=window.innerWidth-parseInt(e,10);return i-t},cK=(0,lQ.x)([s7.R.WorkbenchClassName,s7.R.SiderMenu,s7.R.TitleBar,s7.R.Visible,s7.R.HideSiderMenu,lN.j.WorkbenchSiderMenu])(e=>{var t;let{[s7.R.SiderMenu]:i,[s7.R.TitleBar]:r,[s7.R.HideSiderMenu]:n,[s7.R.Visible]:o,[s7.R.WorkbenchClassName]:a}=e,{width:s}=i.menuSize,l=null!=s?s:76,{min:c,max:d,default:u,current:p}=i.panelSize,_=null!=c?c:240,g=null!=d?d:700,h=null!=p?p:u,m=724+_+l,v=(0,lJ.Y)(lP.Mp.SiderMenu),f=(0,lJ.Y)(li),y=window.innerWidth<m?1:0,[w,b]=(0,eB.useState)((null==i?void 0:i.disableFloatMode)?0:y),S=(0,eB.useMemo)(()=>1===w,[w]),C=null==v?void 0:v.forceActivateTransition,k=null!==(t=null==v?void 0:v.siderTransitionState)&&void 0!==t?t:lM.expanded;(0,eB.useEffect)(()=>{var t;(null===(t=e[s7.R.SiderMenu])||void 0===t?void 0:t.hiddenWhenSmallScreenInBootstrap)&&(null==v||v.setSiderTransitionState(window.innerWidth<1080?lM.collapsed:lM.expanded))},[v]);let E=(0,eB.useMemo)(()=>k===lM.collapsed,[k]),I=(0,eB.useMemo)(()=>[lM.shrinking,lM.growing].includes(k)||C,[k]),[P,A]=(0,eB.useState)();(0,eB.useEffect)(()=>{A(E?l:h+l)},[E,h]);let R=(0,eB.useRef)(null),x=(0,eB.useRef)(null),N=(0,eB.useRef)(!1),L=(0,eB.useRef)(E),O=(0,eB.useRef)(null),[M,D]=(0,eB.useState)("");(0,eB.useLayoutEffect)(()=>{document.body.setAttribute("lv-theme-version","2.0")},[]);let j=(0,eB.useCallback)(e=>{let t=null!=e?e:!E;return(L.current=!!t,t===E||I)?void 0:S?new Promise(e=>{null==v||v.setSiderTransitionState(t?lM.collapsed:lM.expanded),e(null)}):new Promise(e=>{if(!R.current){e(null);return}null==v||v.setSiderTransitionState(t?lM.collapsed:lM.expanded),A(l+(t?0:h)),e(null)})},[E,I,S,v,h]);(0,eB.useEffect)(()=>{let e=k===lM.collapsed;if(e!==L.current)j(e)},[k]),(0,eB.useEffect)(()=>{E&&(null==v||v.unActiveMenu())},[E,v]);let F=(0,eB.useCallback)(e=>{j(e),N.current=!0},[j]),U=(0,eB.useMemo)(()=>S||E?`${l}px`:P?`${Math.max(P,l)}px`:void 0,[S,E,P]);(0,eB.useEffect)(()=>{if(!!R.current&&void 0!==U)D(c$(U,724)>0?`calc(100vw - ${U})`:"724px")},[U,R]),(0,eB.useEffect)(()=>{if(null==i?void 0:i.disableFloatMode)return;let e=window.innerWidth,t=(0,oO.throttle)(()=>{if(!R.current||!U)return;let t=c$(U,724),i=c$(U,1600),r=window.innerWidth-1956,n=window.innerWidth-2056;D(t>0?`calc(100vw - ${U})`:"724px");let o=window.innerWidth;if(o<e){if(n<0&&r>0){null==f||f.updateSiderMenu({panelSize:{current:h+n}},"auto"),A(h+n+l);return}if(r<0&&t>0){null==f||f.updateSiderMenu({panelSize:{current:u}},"auto"),A(u+l);return}if(t<0){let e=P-(h-_);h+t<_&&((async()=>{await j(!0)})(),b(1)),null==f||f.updateSiderMenu({panelSize:{current:Math.max(_,h+t)}},"auto"),A(Math.max(e,P+t))}}else{if(t>0&&b(0),E&&window.innerWidth>m){null==f||f.updateSiderMenu({panelSize:{current:_}},"auto"),A(_+l),null==v||v.toggleMenuPanel({mode:"auto"});return}h<(i>0?408:u)&&(null==f||f.updateSiderMenu({panelSize:{current:h+10}},"auto"),A(h+10+l)),window.innerWidth>=2056&&(null==f||f.updateSiderMenu({panelSize:{current:408}},"auto"),A(408+l))}e=o},20);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[null==i?void 0:i.disableFloatMode,u,U,h,E]);let B=(0,eB.useCallback)(e=>{N.current=!0;let t=Math.min(Math.max(e-l,_),g);null==f||f.updateSiderMenu({panelSize:{current:t}},"manuel")},[]),H=(0,eB.useCallback)(e=>{null==f||f.reiszeEndSiderMenu(e)},[]);return(0,lY.Z)(x,()=>{S&&j(!0)}),(0,eB.useEffect)(()=>{document.body.setAttribute("style",`--workbench-title-bar-height:${null==r?void 0:r.containerHeight}px`)},[null==r?void 0:r.containerHeight]),(0,eB.useEffect)(()=>{var e;let t=e=>{e.ctrlKey&&e.preventDefault()};return null===(e=O.current)||void 0===e||e.addEventListener("wheel",t,{passive:!1}),()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.removeEventListener("wheel",t)}},[]),(0,eB.useEffect)(()=>{!i.panelSize.cache&&(window.innerWidth>1956?null==f||f.updateSiderMenu({panelSize:{current:408}},"auto"):window.innerWidth>1080&&(null==f||f.updateSiderMenu({panelSize:{current:280}},"auto")))},[f]),(0,eF.jsxs)("div",{id:"workbench",className:l1()("workbench-container",{hidden:!o},a),style:{"--sider-width":n?"0px":null!=U?U:`${h+l}px`,"--editor-container":M,"--sider-expanded-width":`${h}px`,"--workbench-title-bar-height":`${null==r?void 0:r.containerHeight}px`},ref:O,children:[(0,eF.jsx)(cz,{className:l1()("lv-layout-sider"),ref:R,collapsed:E,collapsedWidth:l,style:{display:n?"none":void 0,zIndex:S?999:100,"--sider-expanded-width":P?`${E?0:h}px`:void 0},children:(0,eF.jsx)(cl,{ref:x,onSiderFadeInLeft:F,isSiderCollapsed:E,displayMode:w,updateSidebarWidth:B,resizeEndContentWidth:H})}),(0,eF.jsxs)("div",{className:"lv-layout-content",children:[(0,eF.jsx)(cM,{}),(0,eF.jsx)(cj,{})]}),(0,eF.jsx)(cZ,{})]})});i("914303");var cq=i("694893");let cY=()=>((0,eB.useLayoutEffect)(()=>{document.body.setAttribute("lv-theme-version","2.0")},[]),(0,eF.jsxs)(cq.Z,{id:"workbench",className:"workbench-container workbench-readonly",children:[(0,eF.jsx)(cM,{}),(0,eF.jsx)(cj,{width:"100vw"})]})),cJ=(0,lQ.x)([s7.R.WorkbenchMode])(e=>e[s7.R.WorkbenchMode]===lq.w.editable?(0,eF.jsx)(cK,{}):(0,eF.jsx)(cY,{}));class cQ{initServices(e){s6.A.alias(lP.Mp.SiderMenu,lj),s6.A.alias(lP.Mp.SiderMenuPanel,lF),s6.A.alias(lP.Mp.TitleBar,lB),s6.A.alias(lP.Mp.ToolBar,lV),s6.A.alias(lP.Mp.ToolBarPanel,lZ),s6.A.alias(lP.Mp.EditorContainer,lz),s6.A.alias(lP.Mp.OperateDetailsPage,l$),s6.A.alias(lP.Mp.OperateDetailsPagePanel,lK),this.initServiceCollection()}updateServices(){this.collection.getControllerRelatedUIServices().forEach(e=>{e.updateState()})}initMiddlewares(e){}getComponent(){let e=new lf.x9;return s6.A.factory(lf.x9,e),new Promise((t,i)=>{s6.A.get(ld).invokeFunction(async i=>{let r=i.get(eW.S);await r.allowToRender(),t((0,eF.jsx)(lf.FN.Provider,{value:e,children:(0,eF.jsx)(lR.W,{backend:lx.PD,children:(0,eF.jsx)(cJ,{})})}))})})}attach(e){return new Promise(async t=>{this.collection.services.forEach(e=>{e.$forceUpdate()}),eU.createRoot(e).render(await this.getComponent()),setTimeout(()=>{t()})})}initServiceCollection(){let e=[lj,lF,lB,lV,lZ,lz,l$,lK];this.collection=s6.A.invoke(lA,void 0,e),s6.A.factory(lA,this.collection)}}cQ=(0,b.gn)([(0,s4.t)()],cQ);class cX{static async load(e,t,i){let r=s6.A.invoke(li,new Map([["container",t],["platform","pc"],["titleBar",i]]));s6.A.factory(li,r),s6.A.factory(lr,new cQ);let n=s6.A.invoke(e);return await n.start(),n}}var c0=i("824827");class c1 extends c0.b{$onInit(){s6.A.buildRegistry(l_.Q)}invoke(e){return s6.A.invoke(e)}use(e,t){let i=s6.A.get(t.on);t.callbackNames.forEach(t=>{i.use(e,t)})}constructor(){super(l_.Q)}}c1=(0,b.gn)([(0,s4.t)(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[])],c1);var c2=i("721565"),c6=i("467664"),c3=i("93853");let c4=Symbol("service:controller");class c5{buildActionPointRunner(){var e;let t=null===(e=this.actionPoint.get(`${(0,ln.tr)(this.point.from)}.${this.point.trigger}`))||void 0===e?void 0:e[this.point.name],i=new lc(this.middlewares,this.point,t);return i.debug=this.actionPoint.get("debug"),i}constructor(e,t,i){this.actionPoint=e,this.point=t,this.middlewares=i}}var c8=i("528748");class c7{build(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.buildEntries(),this.buildCallbacks(),e&&this.updateAffectedUIService(),this}getAffectedUIServices(){return this.affectedUIService}buildCallbacks(){this.provider.actionPoints.forEach(e=>{var t,i;let r=(t=this.provider.middlewares,i=e,[].concat(t.useBefore).concat(t.use).concat(i.beforeMiddlewares).concat(i.middlewares).concat([i]).concat(i.afterMiddlewares).concat(t.useAfter).filter(e=>!!e).map(e=>lw.from(e).build()));e.get("points").forEach(t=>{this.buildByPoints(t,r,e)})})}buildByPoints(e,t,i){if(this.uiServiceCollection.getControllerRelatedUIServices().has(e.from)){let r=s6.A.get(e.from),n=new c5(i,e,t).buildActionPointRunner();r.bind(e.name,e.trigger,n),this.trackControllerService.setCallbackController(e.from+e.name,this.provider.useClass),this.affectedUIService.add(e.from)}}buildEntries(){this.uiServiceCollection.getControllerRelatedUIServices().forEach(e=>{let t=(0,ln.tr)(e),i=this.getProviderItemsByName(t);i&&i.forEach(i=>{e.register({...i},!1),this.trackControllerService.setConfigController(t+i.name,this.provider.useClass),this.affectedUIService.add(t)})})}updateAffectedUIService(){this.uiServiceCollection.updateUIStateByServiceName(this.affectedUIService)}getProviderItemsByName(e){return this.serviceToItems.get(e)}constructor(e,t,i){this.provider=e,this.uiServiceCollection=t,this.postDepsConstructorCallback=i,this.affectedUIService=new Set,this.serviceToItems=new Map,this.uiServiceCollection.getControllerRelatedUIServices().forEach((e,t)=>{var i;let r=this.uiServiceCollection.getItemName(t);this.serviceToItems.set(t,null!==(i=this.provider[r])&&void 0!==i?i:[])})}}(0,b.gn)([(0,s3.t)(c8.r),(0,b.w6)("design:type",void 0===c8.r?Object:c8.r)],c7.prototype,"trackControllerService",void 0);class c9 extends c0.b{getControllerInstance(e){let t=lp.p.get(e);return(0,P.ZB)(null==t?void 0:t.instance),null==t?void 0:t.instance}subscribeToControllerChange(){0===this.controllerSettingChange.observers.length&&this.controllerSettingChange.subscribe(e=>{this.buildControllers(e,!0)})}buildControllers(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e?e.forEach(e=>{this.buildController(e,!1)}):lp.p.forEach(e=>{this.buildControllerByProvider(e,!1)}),t&&this.uiServiceCollection.getControllerRelatedUIServices().forEach((e,t)=>{this.affectedUIService.has(t)&&e.updateState()})}buildController(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=lp.p.get(e);if(!i)throw ReferenceError(`Controller ${(0,ln.FM)(e)} is not loaded, make sure target is decorated as Controller`);if("controller"!==i.type)throw TypeError(`Provider ${(0,ln.FM)(e)} is not a controller.`);this.buildControllerByProvider(i,t)}invoke(e){return s6.A.get(ld).invoke(e)}buildControllerByProvider(e,t){let i=new c7(e,this.uiServiceCollection,this.postDepsConstructorCallback).build(t);if(void 0===e.instance)try{e.instance=this.invoke(e.useClass)}catch(t){ls.r.error(`Failed to construct controller ${e.className}, ${t}`);return}for(let e of i.getAffectedUIServices())this.affectedUIService.add(e)}updateAffectedUIService(){this.uiServiceCollection.updateUIStateByServiceName(this.affectedUIService)}constructor(e,t){super(lp.p),this.uiServiceCollection=e,this.store=t,this.controllerSettingChange=new c2.t,this.postConstructorSubject=new c6.x,this.affectedUIService=new Set,this.store.register(s7.e.Controllers,[]).subscribe(this.controllerSettingChange),this.postConstructorSubject.asObservable().pipe((0,c3.p)(20,void 0,{leading:!1,trailing:!0})).subscribe(()=>{this.updateAffectedUIService()}),this.postDepsConstructorCallback=()=>{this.postConstructorSubject.next()}}}c9=(0,b.gn)([(0,s4.t)({overridable:!0,provide:c4}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===lA?Object:lA,void 0===s8.O?Object:s8.O])],c9);var de=i("364578");let dt="logoReadonly-X8kdhl",di=()=>(0,eF.jsx)(lX.Z,{content:tj.oc.t("web_sharereview_button_back_to_space",{},"Back to Space"),children:(0,eF.jsx)("div",{className:dt,onClick:()=>{window.location.href=(0,nN.C)(`${window.location.origin}/my-edit`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},children:(0,eF.jsx)(l2.RqY,{width:28,height:20})})});var dr=i("271368");class dn extends eV.JT{get onToolbarPanelClose(){return s6.A.get(lV).onToolbarPanelClose}get onToolBarActiveChange(){return s6.A.get(lV).onToolBarActiveChange}get onDidToolBarHover(){return s6.A.get(lV).onDidToolBarHover}get onSiderMenuPanelWidthChange(){return s6.A.get(li).onSiderMenuPanelWidthChange}get onSiderMenuPanelResize(){return s6.A.get(li).onSiderMenuPanelResize}get onSiderMenuExpandedChange(){return s6.A.get(lj).onSiderMenuExpandedChange}get visible(){return s6.A.get(li).visible}get options(){return this._options}get container(){return this.options.container}get editorContainerId(){return cD.C}get backLogoConfirguation(){return s6.A.get(li).backLogoConfirguation}async bootstrap(){let{container:e,loader:t,titleBar:i,visible:r}=this._options;await cX.load(t,e,i),s6.A.get(li).visible=null==r||r}show(){let e=s6.A.get(li);if(!e.visible)e.visible=!0,this._onVisibleChange.fire(!0)}hidden(){let e=s6.A.get(li);if(!!e.visible)e.visible=!1,this._onVisibleChange.fire(!1)}getWorkbenchSize(){let{container:e}=s6.A.get(li),t=e.getBoundingClientRect();return{width:t.width,height:t.height}}getSiderBarWidth(){return s6.A.get(li).siderMenu.menuSize.width}getSiderBarPanelWidth(){return s6.A.get(li).siderMenu.panelSize.current}getTitleBarHeight(){return s6.A.get(li).titleBar.containerHeight}getActiveSiderMenuPanelId(){return s6.A.get(lF).activeTarget}getActiveSiderMenuDelta(){let e=s6.A.get(lj);return(0,P.Y2)(e.activeSiderMenu,"unexpected logic"),{mode:e.activeSiderMenuMode,extraParams:e.activeExtraParams}}getToolbarIsfixedPanel(){var e;return(null===(e=s6.A.get(li).toolBar)||void 0===e?void 0:e.panelMode)===s9._.FIXED}getActiveToolbarName(){return s6.A.get(lP.Mp.ToolBar).getActiveToolbarName()}getToolbarIsShow(){return s6.A.get(lP.Mp.ToolBar).getIsShowUnPinToolBar()}getControllerInstance(e){return s6.A.get(c9).getControllerInstance(e)}setToolbarPanelModeConfig(e,t){let i=s6.A.get(li),{toolBar:r={}}=i,n=r.panelMode;i.toolBar={panelMode:e,enableFixedMode:t||r.enableFixedMode},this._onToolbarModeSwitch.fire();let o=s6.A.get(lP.Mp.ToolBar),a=o.getActiveToolbarName();"float"===n&&n!==e&&!a&&o.activeDefaultToolbar()}activeToolBarByName(e){s6.A.get(lP.Mp.ToolBar).activeToolBarByName(e)}highlightSiderMenu(){s6.A.get(lP.Mp.SiderMenu).highlightSiderMenuPanel()}forceSetSiderMenuWidthTransition(e){s6.A.get(lP.Mp.SiderMenu).forceSetActivateTransition(e)}toggleResizeBarVisible(e){s6.A.get(lP.Mp.SiderMenu).toggleResizeBarVisible(e)}setWorkbenchMode(e){s6.A.get(li).workbenchMode=e,e===lq.w.readonly&&this.updateUIConfig({titleBar:[{name:"logo-readonly",type:"Custom",position:"left",appendDividerAfter:!0,style:{marginRight:14},content:()=>(0,eF.jsx)(di,{})}]})}hideLogo(e){s6.A.get(li).hideLogo=e}hideSiderMenu(e){s6.A.get(li).hideSiderMenu=e}setNotAccesableSiderMenu(e){s6.A.get(li).notAccesableSiderMenu=e}hideTitleBar(e){s6.A.get(li).hideTitleBar=e}hideToolBar(e){s6.A.get(li).hideToolBar=e}registerBackLogoConfirguation(e){var t;let i=s6.A.get(li),r={...null!==(t=i.backLogoConfirguation)&&void 0!==t?t:{},...e};i.backLogoConfirguation=r}setInstantiationService(e){this._instantiationService=e,s6.A.get(ld).setOuterInstantiationService(e)}updateUIConfig(e){lp.p.merge(de.m,e),s6.A.get(c9).buildController(de.m,!0);let{toolBar:t}=e;t&&this._registerDefaultActiveGroup(t)}registerContribution(e){this._contributions.push(e),s6.A.get(li).addMountSettings({controllers:[e.controller]}),this._onContributionRegistered.fire(e.id)}unregisterContribution(e){this._contributions.length=0}registerMiddleware(e,t){s6.A.get(c1).use(e,t)}refreshRender(e){e?s6.A.get(e).$forceUpdate():Object.keys(lP.Mp).forEach(e=>{s6.A.get(e).$forceUpdate()})}toggleSiderMenuWidthCache(e){let t=s6.A.get(li);null==t||t.updateSiderMenu({panelSize:{cache:e}},"auto")}setSiderMenuWidth(e,t){let i=s6.A.get(li);null==i||i.updateSiderMenu({panelSize:{current:e}},t)}activeSiderMenuByName(e,t,i){if(!s6.A.get(li).notAccesableSiderMenu)s6.A.get(lP.Mp.SiderMenu).activeMenuByName(e,t,i)}toggleSiderMenuPanel(e,t){if(!s6.A.get(li).notAccesableSiderMenu)s6.A.get(lP.Mp.SiderMenu).toggleMenuPanel({mode:e,actionType:t})}getActiveSideMenConfig(){return s6.A.get(lP.Mp.SiderMenu).activeSiderMenu}unActiveSidebarMenu(){s6.A.get(lP.Mp.SiderMenu).unActiveMenu()}onSiderMenuActiveChange(e){let t;return s6.A.get(s8.O).get(lN.j.WorkbenchSiderMenu).subscribe(i=>{i.activeTarget!==t&&e(t=i.activeTarget)})}updateToolBarViewMode(e){s6.A.get(lP.Mp.ToolBar).updateToolBarViewMode(e)}openOperateDetailsPage(e,t){s6.A.get(lP.Mp.OperateDetailsPage).openOperateDetailPage(e,t)}closeOperateDetailsPage(){s6.A.get(lP.Mp.OperateDetailsPage).closeOperateDetailsPage()}internalFireOperateDetailPageStatus(e){"open"===e?this._onOperateDetailPageOpen.fire():this._onOperateDetailPageClose.fire()}internalFireSiderPanelResizeStart(){this._onSiderPanelResizeStart.fire()}internalFireSiderPanelResize(e){this._onSiderPanelResize.fire(e)}internalFireSiderPanelResizeEnd(){this._onSiderPanelResizeEnd.fire()}_bindingKeyboardActions(){if(!s2)this._keybindingService.getOrCreateContext(i.g.document.body).register({keyBindings:{win:[dr.N9.CTRL_WIN+dr.VD.SLASH],mac:[dr.N9.COMMAND+dr.VD.SLASH]},handler:()=>{s6.A.get(lP.Mp.SiderMenu).toggleMenuPanel({mode:"manual",actionType:"shortkey"})},when:()=>!0})}_registerDefaultActiveGroup(e){let t=s6.A.get(lP.Mp.ToolBar);e.forEach(e=>{let{defaultActiveGroupList:i,name:r}=e;i&&r&&t.registerDefaultActiveGroup(i,r)})}setTitleBarMenuConfig(e){s6.A.get(lP.Mp.TitleBar).setMenuConfig(e)}setWorkbenchClassName(e){s6.A.get(li).workbenchClassName=e}setToolBarConfig(e){s6.A.get(lP.Mp.ToolBar).setConfig(e)}constructor(e,t){super(),this._keybindingService=t,this._contributions=[],this._onVisibleChange=this._store.add(new nh.Q),this.onVisibleChange=this._onVisibleChange.event,this._onOperateDetailPageOpen=this._store.add(new nh.Q),this.onOperateDetailPageOpen=this._onOperateDetailPageOpen.event,this._onOperateDetailPageClose=this._store.add(new nh.Q),this.onOperateDetailPageClose=this._onOperateDetailPageClose.event,this._onToolbarModeSwitch=this._store.add(new nh.Q),this.onToolbarModeSwitch=this._onToolbarModeSwitch.event,this._onSiderPanelResizeStart=this._store.add(new nh.Q),this.onSiderPanelResizeStart=this._onSiderPanelResizeStart.event,this._onSiderPanelResize=this._store.add(new nh.Q),this.onSiderPanelResize=this._onSiderPanelResize.event,this._onSiderPanelResizeEnd=this._store.add(new nh.Q),this.onSiderPanelResizeEnd=this._onSiderPanelResizeEnd.event,this._onContributionRegistered=this._store.add(new nh.Q),this.onContributionRegistered=this._onContributionRegistered.event,this._options=e;let{loader:i,titleBar:r,...n}=e;s5.S.set(s5.h.WORKBENCH_SETTINGS,n,i),this._bindingKeyboardActions()}}dn=(0,b.gn)([(0,b.fM)(1,a8.d),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof WorkbenchServiceProps?Object:WorkbenchServiceProps,void 0===a8.d?Object:a8.d])],dn);let da=new(i("532653")).$$,ds={enableTTWid:!0,ttWidUnionHost:"https://ttwid-va.capcutapi.com"};var dl=i("742431"),dc=i("399715"),dd=i("81296"),du=i("961087");class dp{subscribeToSettingServicesChange(){this.serviceSettingsChange.subscribe(e=>{null==e||e.forEach(e=>s6.A.get(e))})}constructor(e){this.store=e,this.serviceSettingsChange=new c2.t,this.store.register(s7.e.Services,[]).subscribe(this.serviceSettingsChange)}}dp=(0,b.gn)([(0,s4.t)(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],dp);var d_=i("135029"),dg=i("230511"),dh=i("606357");class dm{isDisabled(e){var t,i;let r=e.from,n=this.store.getValue(lN.j.UIServiceSwitchStatus);return null!==(i=null==n?void 0:null===(t=n.get(r))||void 0===t?void 0:t.has(e.name))&&void 0!==i&&i}constructor(e){this.store=e}}dm=(0,b.gn)([(0,s4.t)(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],dm);class dv{isDisabled(e){var t,i,r,n;let o=this.store.getValue(lN.j.ScopeSwitchStatus),a=!1,s=e.configController,l=e.callBackController,c=null!==(r=null===(t=s&&lp.p.get(s))||void 0===t?void 0:t.customScope)&&void 0!==r?r:[],d=null!==(n=null===(i=l&&lp.p.get(l))||void 0===i?void 0:i.customScope)&&void 0!==n?n:[],u=c.concat(d);return null==u||u.forEach(e=>{(null==o?void 0:o.has(e))&&(a=!0)}),a}constructor(e){this.store=e}}dv=(0,b.gn)([(0,s4.t)(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],dv);class df{registerToggle(e){this.toggles.push(e)}get isOn(){let e=!0;return this.toggles.forEach(t=>{let i=t.isDisabled(this.info);e=e&&!i}),e}constructor(e){this.info=e,this.toggles=[]}}class dy{isDisabled(e){let t=this.isDisabledByConfigController(e),i=this.isDisabledByCallbackConfigController(e);return t||i}isDisabledByConfigController(e){var t,i,r;let n=e.configController,o=n&&(null===(t=lp.p.get(n))||void 0===t?void 0:t.name);return null!==(r=o&&(null===(i=this.store.getValue(lN.j.ControllerSwitchStatus))||void 0===i?void 0:i.has(o)))&&void 0!==r&&r}isDisabledByCallbackConfigController(e){var t,i,r,n,o;let a=e.callBackController,s=a&&((null===(t=lp.p.get(a))||void 0===t?void 0:t.name)||(null===(r=lp.p.get(a))||void 0===r?void 0:null===(i=r.provide)||void 0===i?void 0:i.name));return null!==(o=s&&(null===(n=this.store.getValue(lN.j.ControllerSwitchStatus))||void 0===n?void 0:n.has(s)))&&void 0!==o&&o}constructor(e){this.store=e}}dy=(0,b.gn)([(0,s4.t)(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],dy);class dw{use(e,t){let i=new df(e);i.registerToggle(this.uiConfigToggle),i.registerToggle(this.scopeToggle),i.registerToggle(this.controllerToggle);let{isOn:r}=i;if(!r&&(t(),"shouldHide"===e.trigger||"shouldDisabled"===e.trigger))return!0}constructor(e,t,i){this.uiConfigToggle=e,this.scopeToggle=t,this.controllerToggle=i}}(0,b.gn)([(0,b.fM)(0,(0,d_.g)()),(0,b.fM)(1,(0,dg.o)()),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof IActionPointInfoWithController?Object:IActionPointInfoWithController,"undefined"==typeof IStopAction?Object:IStopAction]),(0,b.w6)("design:returntype",void 0)],dw.prototype,"use",null),dw=(0,b.gn)([(0,dh.d)(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===dm?Object:dm,void 0===dv?Object:dv,void 0===dy?Object:dy])],dw);class db{disableController(e){this.disabledController.add(e),this.store.update(lN.j.ControllerSwitchStatus,this.disabledController),this.updateUIService(e)}enableController(e){this.disabledController.delete(e),this.store.update(lN.j.ControllerSwitchStatus,this.disabledController),this.updateUIService(e)}updateUIService(e){this.getUIServiceToBeUpdate(e).forEach(e=>{let t=this.serviceCollection.getControllerRelatedUIServices().get(e);t instanceof lL&&t.update()})}getUIServiceToBeUpdate(e){let t=lp.p.values(),i=t.next(),r=[];for(;!i.done;){if(i.value.name===e||i.value.provide.name===e){Object.keys(i.value).forEach(e=>{let t=lP.hX[e];r.push(t)});break}i=t.next()}return r}constructor(e,t){this.serviceCollection=e,this.store=t,this.disabledController=new Set,this.store.register(lN.j.ControllerSwitchStatus,this.disabledController)}}db=(0,b.gn)([(0,s4.t)({overridable:!0}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===lA?Object:lA,void 0===s8.O?Object:s8.O])],db);class dS{toggleUIService(e,t,i){let r=this.toggleMap.get((0,ln.tr)(e));!r&&(r=new Set,this.toggleMap.set((0,ln.tr)(e),r)),i?r.delete(t):r.add(t),!this.store.has(lN.j.UIServiceSwitchStatus)&&this.store.register(lN.j.UIServiceSwitchStatus,this.toggleMap),this.store.update(lN.j.UIServiceSwitchStatus,this.toggleMap),e instanceof lL&&e.update()}constructor(e){this.store=e,this.toggleMap=new Map}}dS=(0,b.gn)([(0,s4.t)({overridable:!0}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===s8.O?Object:s8.O])],dS);class dC{disableByScope(e){this.disabledScopes.add(e),this.store.update(lN.j.ScopeSwitchStatus,this.disabledScopes),this.updateUIService(e)}enableByScope(e){this.disabledScopes.delete(e),this.store.update(lN.j.ScopeSwitchStatus,this.disabledScopes),this.updateUIService(e)}updateUIService(e){this.getUIServiceToBeUpdate(e).forEach(e=>{let t=this.serviceCollection.getControllerRelatedUIServices().get(e);t instanceof lL&&t.$forceUpdate()})}getUIServiceToBeUpdate(e){let t;let i=lp.p.values(),r=i.next(),n=new Set;for(;!r.done;)(null==(t=r.value)?void 0:t.customScope)&&(null==t?void 0:t.customScope.indexOf(e))!==-1&&this.checkNeedToUpdate(t,n),r=i.next();return n}checkNeedToUpdate(e,t){return Object.keys(e).forEach(i=>{let r=lP.hX[i];r&&Array.isArray(e[i])&&e[i].length>0&&t.add(r)}),t}constructor(e,t){this.serviceCollection=e,this.store=t,this.disabledScopes=new Set,this.store.register(lN.j.ScopeSwitchStatus,this.disabledScopes)}}dC=(0,b.gn)([(0,s4.t)({overridable:!0}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===lA?Object:lA,void 0===s8.O?Object:s8.O])],dC);class dk{turnOffConfig(e,t){this.toggleService(e,t,!1)}turnOnConfig(e,t){this.toggleService(e,t,!0)}turnOffController(e){this.configControllerService.disableController(e)}turnOnController(e){this.configControllerService.enableController(e)}turnOnByScope(e){this.configScopeService.enableByScope(e)}turnOffByScope(e){this.configScopeService.disableByScope(e)}toggleService(e,t,i){let r=this.uiServiceCollection.getControllerRelatedUIServices().get(e);r&&this.configUIService.toggleUIService(r,t,i)}constructor(e,t,i,r,n){this.uiServiceCollection=e,this.configControllerService=t,this.middlewareService=i,this.configUIService=r,this.configScopeService=n,this.uiServiceCollection.getControllerRelatedUIServices().forEach((e,t)=>{e instanceof lL&&this.middlewareService.use(dw,{on:t,callbackNames:["shouldHide"]}),this.middlewareService.use(dw,{on:t,callbackNames:["shouldDisabled"]})})}}dk=(0,b.gn)([(0,s4.t)({overridable:!0}),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[void 0===lA?Object:lA,void 0===db?Object:db,void 0===c1?Object:c1,void 0===dS?Object:dS,void 0===dC?Object:dC])],dk);var dE=new WeakMap;class dI{callHook(e){for(var t,i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];let{extensions:o=[]}=null!==(t=this.settings.mount)&&void 0!==t?t:{};return(o.forEach(t=>{let i=s6.A.get(t);i[e]&&i[e](...r)}),e in this)?this[e](...r):"not implemented"}async start(){try{await this.callHook("$onInit"),this.initServices(),this.initMiddlewares(),await this.callHook("$onMount"),await this.mount(),await this.callHook("$afterControllersInit"),this.attach().then(()=>{this.callHook("$onReady")})}catch(e){if("not implemented"===this.callHook("$onWorkbenchInitError",e))throw e}}getComponent(){return this.startUpService.getComponent()}awaitForRenderDone(){return(0,dl._)(this,dE).awaitForInit()}initServices(){var e;this.startUpService.initServices(this.settings),s6.A.get(c9),s6.A.get(dk),this.settings.useLogger&&this.settings.useLogger!==ls.r&&(ls.r.use=this.settings.useLogger),this.settings.useLogger?ls.r.info(`workbenchVersion:${this.version}`):console.info(`workbenchVersion:${this.version}`),null===(e=this.settings.mount.services)||void 0===e||e.forEach(e=>s6.A.get(e))}initMiddlewares(){let e=s6.A.get(c1);this.startUpService.initMiddlewares(e),e.$onInit()}async attach(){await this.startUpService.attach(this.settings.container)}mount(){return new Promise(e=>{setTimeout(()=>{s6.A.get(c9).subscribeToControllerChange(),s6.A.get(dp).subscribeToSettingServicesChange(),this.settings.addMountSettings(this.settings.mount),e()},0)})}constructor(){(0,dc._)(this,dE,{writable:!0,value:void 0}),this.version="0.0.0-PLACEHOLDER",(0,dd._)(this,dE,new du.G);let e=li.getMetadata(this);e&&this.settings.bootstrap(e)}}(0,b.gn)([(0,s3.t)(li),(0,b.w6)("design:type",void 0===li?Object:li)],dI.prototype,"settings",void 0),(0,b.gn)([(0,s3.t)(lr),(0,b.w6)("design:type",void 0===lr?Object:lr)],dI.prototype,"startUpService",void 0);class dT extends dI{$onMount(){}async $afterControllersInit(){}async $onReady(){}$onWorkbenchInitError(e){console.log(e)}constructor(){super(),window.wbLoader=this}}var dP=i("293698");i("601979"),i("501717");var dA=i("52838"),dR=i("997045");function dx(e){let t=document.getElementsByClassName("workbench-container"),i=document.getElementsByClassName("workbench-tool-bar-container"),r=document.getElementsByClassName("panel-portal-container");Object.values(t).forEach(t=>{t.style.height=`calc(100vh - ${e}px)`}),Object.values(i).forEach(t=>{t.style.top=`${cG.F5+e}px`}),Object.values(r).forEach(t=>{t.style.top=`${cG.F5+e+cG.Ue}px`})}function dN(e){dx(0),cF.unmountComponentAtNode(e)}function dL(e){let t=(0,eB.useCallback)(()=>{e.accountService.login()},[]);return(0,eF.jsx)(dR.Z,{className:"not-login-tips-wrapper",banner:!0,closable:!0,onClose:()=>dN(e.container),showIcon:!1,content:(0,eF.jsxs)(eF.Fragment,{children:[(0,eF.jsx)("span",{children:tj.ZP.t("web_save_draft_text_will_not_permanently",{},"Drafts will not be saved permanently when you aren\u2019t signed in. To avoid losing your drafts, sign into your account.")}),(0,eF.jsx)(dA.Z,{onClick:t,children:(0,eF.jsx)("span",{className:"not-login-tips-login-button",children:tj.ZP.t("web_accounts_title_sign_in",{},"Sign in")})})]})})}let dO=()=>(0,eF.jsx)(lX.Z,{content:tj.ZP.t("web_plugin_hover_open_capcut_homepage",{},"Open homepage in new page"),children:(0,eF.jsx)("div",{className:"logo cursor",onClick:()=>{window.open((0,nN.C)(`${window.location.origin}${l5.O}`,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"_blank")},children:(0,eF.jsx)(l2.RqY,{width:25.46,height:20})})}),dM=["/lv/v1/intelligence/create","/lv/v1/intelligence/render_create","/lv/v1/intelligence/fill_template_package","/lv/v1/render_task/create","/lv/v1/event/report"],dD={Appid:"348188"};function dj(e){return!!(e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok)}let dF=[ez.IC.PasswordAuthenticateFailed,ez.IC.CaptchaAuthenticateFailed];class dU{reportFlowEditorInit(e){return(0,j.Us)(this._containerService,{hasAttemptedUnloadPage:this._hasAttemptedUnloadPage,hasHiddenPage:this._hasHiddenPage,...e})}async startLifeCycle(e){(0,s1.be)(),this.checkCompatibility(),this._onErrorCallbacks.push(this.registerAbnormalFlowListeners()),(0,J.b)(e$,e,this._environmentService),(0,J.b)(eq,e,this._environmentService);try{var t,r,n,o,a;let s=!!this._environmentService.draftIdFromUrl;this.initEnv(),(0,sD.Ie)(F.INIT_GLOBAL_SERVICE);let[l,c]=(await this.initGlobalServices(e)).pair();(0,sD.oe)(F.INIT_GLOBAL_SERVICE),(0,sD.Ie)(F.INIT_CONTAINER_SERVICE),this.initContainerService(e),(0,sD.oe)(F.INIT_CONTAINER_SERVICE),s&&this._containerService.invokeFunction(e=>{e.get(e2.tx).warmup()}),(0,E.xD)(e,E.cl.bool("shouldRestoreDraft",s)),console.log("[startup] did start preload",s),l&&(0,P.ss)("global service initialization failed"),await c,(0,J.b)(eX,e,this._appService),this._accountService=this._appService.invokeFunction(e=>e.get(ed.D)),this._reportService=this.getReportService(),(0,J.b)(e4,e,this._containerService,this._environmentService),(0,sD.Ie)(F.REACT_RENDER),await this.startWorkbenchService(e),(0,sD.oe)(F.REACT_RENDER),!function(e){e.invokeFunction(e=>e.get(e5.AS))}(this._containerService),this._containerService.invokeFunction(e=>{this._configurationService=e.get(U.J)}),this._lifecycleService.setWorkbenchLoaded(e),this._catchVeLoadError();let d=(0,e8.c)(this._containerService);(0,E.xD)(e,E.cl.bool("hasLogin",this._accountService.hasLogin)),this._accountService.hasLogin?((0,sD.Ie)(F.INIT_WORKSPACE_INITIALIZE),await (0,J.b)(ee,e,this._containerService),(0,sD.oe)(F.INIT_WORKSPACE_INITIALIZE),(0,sD.Ie)(F.INIT_WORKSPACE_SET_SPACE_INFO),await e9(e,this._containerService,(0,B.Nn)(this._environmentService)),(0,sD.oe)(F.INIT_WORKSPACE_SET_SPACE_INFO)):this._accountService.onDidLogin(async()=>{await (0,J.b)(ee,e,this._containerService),await e9(e,this._containerService)}),t=this._containerService,r=this._containerService.invokeFunction(e=>e.get(H.n).draftWorkspaceManager),t.invokeFunction(e=>{let t=e.get(et.S);r.onDidWorkspaceChange(()=>{r.workspaceId&&t.changeWorkspaceId(r.workspaceId)})}),(0,J.b)(ti,e);let u=this.preload(e,!1);if((this._environmentService.isDebug||this._environmentService.isPreviewTemplate)&&(window.preloadResult=u),tn(this._containerService),this._startContributionJob(e),this._jobScheduler.prepare(e,L.f.WorkbenchLoaded),"undefined"!=typeof window&&window.location.search.includes("__ssr_pending__"))return(0,E.JJ)(e,E.cl.bool("ssr_pending",!0)),(0,I.ly)();if(!this._accountService.hasLogin){if(!(0,B.Nn)(this._environmentService)&&!this._environmentService.activeSmartTool){let e={pageEnterFrom:ei.d.EditorLoginPopup};(this._environmentService.isInSdkIframe||(0,dP.l0)())&&(e.fromPage=dP.dL),this._accountService.login({reportParams:e})}if(s){this._hasReLogin=!0,d.maskManager.showLoginMask();let{span:t}=(0,E.VL)(e,"base-flow","waitLogin");await new Promise(e=>{this._accountService.onDidLogin(()=>e((0,I.ly)()))}),t.end(),d.maskManager.closeLoginMask(),u=this.preload(e,!0)}}let[p]=u,[_]=(await p).pair();if(_){;if(n=_,dj(n)&&dF.includes(n.code)){this._isPasswordFlow=!0,d.modalManager.showPasswordFlowModal(null);let{span:t}=(0,E.VL)(e,"base-flow","waitPasswordInput");await new Promise((t,i)=>{let r=this._containerService.invokeFunction(e=>e.get(G.u));r.onDraftPermissionFlowUpdate(async n=>{d.modalManager.hidePasswordFlowModal();let o=this.getMainDraftService(),a=this.preload(e,!0,n.packageInfoParams),[s]=a,[l,c]=(await s).pair();return(!l&&c&&(u=a,r.initDraftAllPermission(o.draftWorkspaceManager.workspaceId),t((0,I.ly)())),(null==l?void 0:l.code)===ez.IC.CaptchaAuthenticateFailed)?d.modalManager.showPasswordFlowModal({showCaptcha:!0,idc:this._accountService.userProfile.newIdc,sign:l.errorInfo}):(null==l?void 0:l.code)===ez.IC.PasswordAuthenticateFailed?d.modalManager.showPasswordFlowModal(null):void i(l)})}).finally(()=>{d.modalManager.hidePasswordFlowModal()}),t.end()}else throw _}!function(e){e.invokeFunction(e=>{let t=e.get(et.S),i=e.get(ei.Gw);i.hasLogin?en(i):t.listenOnUserStatusChange(e=>{let{hasSign:t,noSign:r,initFailed:n}=e;(t||r)&&en(i)})})}(this._containerService),!function(e,t){e.invokeFunction(e=>{var i;let r=e.get(ei.Gw),n=e.get(t_.w);n.setCustomParams({user_region:r.userProfile.region}),r.hasLogin?tb(n,r,void 0):(n.setConfig({hasLogin:!1,userId:""}),(0,eM.V)(r.onDidLogin)(()=>{tb(n,r,t)})),(null===(i=r.userVipInfo)||void 0===i?void 0:i.flag)!==void 0&&n.setCustomParams({is_vip:Number(r.userVipInfo.flag)}),r.onDidChangeVipInfo(()=>{var e;(null===(e=r.userVipInfo)||void 0===e?void 0:e.flag)!==void 0&&n.setCustomParams({is_vip:Number(r.userVipInfo.flag)})})})}(this._containerService),!function(e){e.invokeFunction(t=>{let i=t.get(ed.D),r=()=>{e.invokeFunction(e=>{var t;let i=e.get(tI.L),r=null===(t=e.get(ed.D).userProfile)||void 0===t?void 0:t.uid;i.setConfig({userId:r})})};i.hasLogin?r():(0,eM.V)(i.onDidLogin)(()=>{r()})})}(this._containerService),!function(e){e.invokeFunction(e=>{var t;let r=e.get(H.n),n=e.get(t_.w),o=e.get(tI.L),a=e.get(B.rO),s=e=>{o.setEventParams(e);let t=Object.entries(e).reduce((e,t)=>{let[i,r]=t;return void 0!==r&&(e[i]=String(r)),e},{});o.setCaptureParams(t),o.setLogParams(e)};if((0,B.JY)(a)){let{templateIdFromUrl:e}=a;e&&s({templateIds:e}),r.draftTemplateManager.onTemplateIdChange(e=>{if(!!e)s({templateIds:e})})}else r.dataSdk.onChangeDiff(e=>{e[R.u4I.SEGMENT].some(e=>[R.C8.ADD,R.C8.DELETE].includes(e.type)&&!!e.item.segment.templateId)&&s({templateIds:r.draftTemplateManager.getCombinationSegmentTemplateIds().join(",")})});s({...n.getCustomParams(),main_domain_network:void 0!==i.g?`${null===(t=i.g.navigator.connection)||void 0===t?void 0:t.downlink}Mbps`:""})})}(this._containerService),ec(dD,function(){let e="(";for(let t=0;t<dM.length;t++)e+=dM[t],t!==dM.length-1&&(e+="|");let t=new RegExp(e+=")(?![\\w\\d])");return e=>t.test(e)}()),!function(e,t){e.invokeFunction(i=>{let r=i.get(H.n),n=i.get(ts.X),o=i.get(t_.w),a=i.get(B.rO);o.setCommonEventParams({draft_id:t,theme:n.getTheme()}),r.dataSdk.onChangeDraftId(()=>{o.setCommonEventParams({draft_id:r.dataSdk.draftView.getDraftId()})}),n.onDidThemeChange(()=>{o.setCommonEventParams({theme:n.getTheme()})});let s=r.cloudMetaManager.getMeta();s.draft.id?tk(o,s):(0,eM.V)(r.cloudMetaManager.onDidChangeMeta)(()=>{tk(o,r.cloudMetaManager.getMeta())}),(0,B.JY)(a)&&!function(e){e.invokeFunction(e=>{let t=e.get(H.n),i=e.get(t_.w),r=e.get(B.rO),n=e.get(tp.c),o=e.get(U.J);r.templateIdFromUrl&&(i.setCommonEventParams({template_id:r.templateIdFromUrl}),tC(r.templateIdFromUrl,i,n,o)),t.draftTemplateManager.onTemplateIdChange(e=>{if(!!e)i.setCommonEventParams({template_id:e}),tC(e,i,n,o)})})}(e)})}(this._containerService,this._draftIdInFlow),this.registerEVReporters(),this.reportEnterEditorPage(this._isNewDraft),o=this._containerService,(0,tT.y)(o),!function(e){let t=e.invokeFunction(e=>e.get(ed.D)),i="visitor";try{let{uid:e,webId:r}=t.userProfile;i=e||r||i}catch(e){console.warn(e)}eu(i)}(this._containerService),(0,sD.Ie)(F.LOAD_BUSINESS_DRAFT),await this.loadBusinessDraft(e,u);let g=this.getMainDraftService();this._jobScheduler.prepare(e,L.f.DraftLoaded),this._lifecycleService.setDraftLoaded(),(0,sD.oe)(F.LOAD_BUSINESS_DRAFT),!function(e){let[t,i,r,n]=e.invokeFunction(e=>[e.get(H.n),e.get(ei.Gw),e.get(B.rO),e.get(ep.J0)]),o=()=>{n.connect({frontierDomain:i.userProfile.reqDomain.frontier_domain,uid:i.userProfile.uid,workspaceId:t.draftWorkspaceManager.workspaceId,draftId:t.dataSdk.draftView.getDraftId()||r.draftIdFromUrl})};i.onDidLogin(()=>{o()}),t.draftWorkspaceManager.onDidWorkspaceChange(()=>{o()}),t.saveManager.onSuccess(()=>{o()}),o()}(this._containerService),!function(e,t){let{websocketService:i,uerBrandService:r,brandDataService:n,videoDataService:o,photoDataService:a,stickerDataService:s,audioDataService:l,textTemplateDataService:c,textPresetDataService:d,videoBackgroundDataService:u,fontDataService:p}=e.invokeFunction(e=>{let i={};return Object.keys(t).forEach(r=>{i[r]=e.get(t[r])}),{websocketService:e.get(ep.J0),uerBrandService:e.get(e_.C),brandDataService:e.get(eI.X),...i}}),_=async(e,t,i,r)=>{switch((0,eh.d)(e)){case eP._g.Video:return await o.batchGetVideos({resourceIds:t,isFromBrand:!0});case eP._g.Photo:return await a.batchGetPhotos({resourceIds:t,isFromBrand:!0});case eP._g.Sticker:return await s.batchGetStickersByIds({ids:t,isFromBrand:!0});case eP._g.Audio:return await (null==l?void 0:l.batchGetAudios({resourceIds:t,isFromBrand:!0,audioResourceType:eT.b.Music}));case eP._g.TextTemplate:return await (null==c?void 0:c.getTextByIds({ids:t,isFromBrand:!0}));case eP._g.TextPreset:return await (null==d?void 0:d.getTextByIds({ids:t,isFromBrand:!0}));case eP._g.AdjustmentPreset:return await n.getBrandAdjustmentPresetsByIds({ids:t});case eP._g.VideoBackground:return await (null==u?void 0:u.batchGetVideoBackgroundsByIds({ids:t,source:r}));case eP._g.Font:return await (null==p?void 0:p.batchGetFontsByIds({ids:t,isFromBrand:!0}));default:return(0,I.oW)({list:[i]})}},g=(e,t)=>{var i;return null===(i=r.getOrCreateCollectionByWorkspace(null!=e?e:""))||void 0===i?void 0:i.getBrandManagerByType((0,eh.d)(t))},h=async e=>{if(!!e.ok)try{var t;let{resource_info:i,resource_type:r}=e.value,n=JSON.parse(i),o=g(n.common_attr.workspace_id,r);if(!o)return;let{id:a,source:s}=null!==(t=null==n?void 0:n.common_attr)&&void 0!==t?t:{},l=await _(r,[a],eA(n,r),s);if(!(null==l?void 0:l.ok))return l;if(!l.value.list[0])return"not found target";let c=l.value.list[0];o.appendBrand(c)}catch(e){eg.t.error("UploadBrandAssets message fail",e.message)}};[{method:ep.h1.UploadBrandAssets,callback:h},{method:ep.h1.RemoveBrandAssets,callback:e=>{if(!e.ok)return;let{workspace_id:t,resource_id:i,resource_type:r}=e.value,n=g(t,r);if(!!n)n.deleteBrandByIdSync([i])}},{method:ep.h1.RefreshBrandAssets,callback:e=>{if(!e.ok)return;let{workspace_id:t,title:i,resource_id:r,resource_type:n}=e.value,o=g(t,n);if(!!o)o.updateBrandByIdSync([{key:r,title:i,name:i}])}}].forEach(e=>{let{method:t,callback:r}=e;i.registerCallback(t,r)})}(this._containerService,{photoDataService:iu.B,stickerDataService:sJ.c,textTemplateDataService:i5.g,textPresetDataService:rn.J,videoBackgroundDataService:iD.k,videoDataService:iv.u,audioDataService:iw.F,fontDataService:sQ.H}),tx(e,g,d);let h=this.getMainEditorService();(0,sD.Ie)(F.WAIT_EDITOR_WIDGET_LIFECYCLE_CHANGE);let{span:m}=(0,E.VL)(e,"base-flow","waitEditorWidgetLifeCycle");if(await h.when(W.U.Eventually),m.end(),(0,sD.oe)(F.WAIT_EDITOR_WIDGET_LIFECYCLE_CHANGE),!function(e,t){let[i,r]=e.invokeFunction(e=>[e.get(W.a),e.get(ed.D)]),{modalGuard:n}=i.modalManager;if(r.hasLogin)n.isLogin=!0;else{let e=r.onDidLogin(()=>{n.isLogin=!0,e.dispose()})}t.onRestored(()=>{n.state="loaded"})}(this._containerService,this._lifecycleService),!function(e,t){let i=t=>{tN.Z.error({escToExit:!1,maskClosable:!1,closeIcon:null,title:tj.ZP.t("ve_error_title",{},"Render error"),okText:tj.ZP.t("re_fresh",{},"Refresh"),onOk:()=>((0,tL.nV)(e,{action:tL.kw.ReloadClick,cause:t}),location.reload(),Promise.reject(Error("dont close"))),content:tj.ZP.t("ve_error_content",{},"Render error. Please refresh the page and try again.")}),(0,tL.nV)(e,{action:tL.kw.Display,cause:t})};t.renderManager.onCrash((r,n,o,a)=>{if(t.renderManager.hasCrashed)return;i(tL._J.Unknown);let s={msgOrigin:r,stack:n,threadIdOrigin:o,threadStack:a};console.error("veCrash:",s),(0,tO.zo)(e,s),(0,tO.oI)(e,s),(0,tO.J7)(e,s)}),t.renderManager.onStatistics(t=>{let{chEventJson:i,chEventName:r,chEventType:n,reportVESDK:o}=t,a={eventName:r,eventType:n,msg:i,reportVESDK:o};(0,tM.R)(e,a),(0,j.yS)(a)}),t.renderManager.onWebGLContextLost(()=>{i(tL._J.WebGLContextLost)}),e.invokeFunction(i=>{i.get(t_.w).getABTestVar("ccweb_low_frame_rate_report",{enable:!1}).then(i=>{let{enable:r=!1}=i;if(!!r)t.renderManager.onLowFrameRate(t=>{let{intValue:i,fltValue:r,msg:n}=t;(0,tF.n)(()=>(0,tD.v)(e,{min_fps:Number(r),min_fps_progress:Number(i),min_fps_avg_algorithm_cost_time:Number(n)}),{priorityLevel:tU.q.IdlePriority})})})})}(this._containerService,h),!this._accountService.hasLogin){let e=function(e){let t=document.createElement("div");t.classList.add("not-login-tips-container"),dx(52);let i=document.body.childNodes[0];return document.body.insertBefore(t,i),cF.render((0,eF.jsx)(dL,{accountService:e,container:t}),t),()=>dN(t)}(this._accountService);this._accountService.onDidLogin(e)}this._lifecycleService.setRenderLoaded(),a=this._containerService,window.__debugger=a.invokeFunction(e=>{let t;let i=e.get(B.rO),r=e.get(tH.Ui);return{JSONB:R.HHr,AttachmentManager:R.lLh,dataSdk:e.get(H.n).dataSdk,resourceService:e.get(tp.c),mainEditorWidgetService:e.get(W.a),mainDraftService:e.get(H.n),draftMaterialsService:e.get(M.D),videoEnvironmentService:i,renderManager:e.get(W.a).renderManager,exportService:e.get(tB.AA),accountService:e.get(ed.D),resourceDownloadService:e.get(e2.tx),evercloudTokenDataService:e.get(eJ.o),workbenchService:e.get(tZ.e),mediaSiderMenuService:e.get(tG.E),performanceMonitorService:e.get(tz.J),userBrandService:e.get(e_.C),workspaceDirectoryService:e.get(tW.V),draftMaterialsDirectoryService:e.get(tV.b),httpApiSettingService:e.get(eD.x),containerService:a,autoTestService:t,configurationService:r}});let v=u[1],f=u[2],y=u[3],w=u.slice(4);h.renderManager.loadVEPlugin("/mock/path/libsmart_crop.ofx.wasm"),await this.renderDraft(e,v,f,y,w),this._jobScheduler.prepare(e,L.f.Restored),this._lifecycleService.setRestored(),this.reportFlowEditorInit({status:"success",prevCondition:this._getEditorInitPrevCondition(),preloadResourceResult:v}),await this.runBusinessPostRestoreTasks(),v.then(e=>{if(!!e)t1(this.getReportService(),h.resourceErrorManager,h.ensureManager,g.dataSdk,g.draftPathStore,this._isTemplate,e.preloadMaterialItems,e.preloadEffectItems,e.invalidUserMaterialLifeCycles,e.pEmptyBuiltInMaterials)}),this._jobScheduler.prepare(e,L.f.Completed),await this.runEventuallyTasks(e),this.reportPackageOpenTime(),!function(e){e.invokeFunction(e=>{e.get(U.J).abTestManager.initAndExposeAbTest()})}(this._containerService),setTimeout(()=>{this._jobScheduler.wait(e,L.f.Completed),this._lifecycleService.setCompleted()},5e3)}catch(e){console.error("init",e),dj(e)?this.handleError(e):this.handleError((0,I.Mx)(ez.IC.Unknown,"Unknown error has been throw",e))}return(0,I.ly)()}getInjectedDraftPermission(){var e;let t=window.__get_file_edit_owner__,{permissions:i}=null!==(e=null==t?void 0:t.data)&&void 0!==e?e:{};if(!!i)return i.view&&i.edit?tr.O.editable:tr.O.readonly}getInjectedWebId(){let{searchParams:e}=new URL(window.location.href),t=window.GATEWAY_INJECTED_WEB_ID||e.get("debug_web_id");if("string"==typeof t&&t)return t}initEnv(){return(0,I.ly)()}async initGlobalServices(e){var t,i;let r=new E.uS({checkDuplicate:!0});r.registerInstance(B.rO,this._environmentService),r.registerInstance(O.g,this._lifecycleService);let n=new sY;r.registerInstance(sN.n,n),this._teaAdapterService=(t=n,i={initOptions:{appId:aG.kJ,disableAutoPv:!0,autoTrack:{custom:"tea"},enableAbTest:!0,abChannelDomain:"https://vmweb-va.capcutapi.com",channel:"va",webId:this.getInjectedWebId(),maxReportMerge:30,reportInterval:2e3,channelDomain:"https://mcs-va.capcutapi.com",ttWidUnionHost:"https://ttwid-va.capcutapi.com"},config:{...ds,stagingFlag:this._environmentService.isDev?1:0}},new eR.X(i.initOptions,i.config,t)),await tw(e,this._teaAdapterService,this._environmentService,n),r.registerInstance(t_.w,this._teaAdapterService);let o=function(e){var t,i,r;let{sdk:n,skipInit:o=!1,config:a={}}=e;return!o&&n("init",a),n("start"),new eN(e.sdk,null!==(t=e.eventParams)&&void 0!==t?t:{},null!==(i=e.logParams)&&void 0!==i?i:{},null!==(r=e.captureParams)&&void 0!==r?r:{})}({sdk:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return window.ccWebSlardar(...t)},skipInit:!0,...function(e){let{appVersion:t,veBuildId:i,veFullBuildVersion:r,isSIMD:n}=e,o=r.split(".",4).map(e=>(0,tE.hk)(e)),a=`${r}${n?"_simd":""}`,s=(0,to.$n)(),l={templateIds:"",appVersion:t,veVersion:i,videoeditorScmVersion:a,videoeditor_scm_version:a,videoeditorScmVersionV1:o[0],videoeditorScmVersionV2:o[1],videoeditorScmVersionV3:o[2],videoeditorScmVersionV4:o[3],videoeditorScmVersionSIMD:n?"simd":"common",buildCommitId:"",buildTime:"",isArcBrowser:s},c=Object.keys(l).reduce((e,t)=>(e[t]=String(l[t]),e),{});return{eventParams:l,captureParams:c,logParams:l}}(this._environmentService)});r.registerInstance(tI.L,o),(0,J.b)(eL,e,o),r.register(tZ.e,new C.M(dn,[{platform:"pc",container:document.getElementById("csr-root"),loader:dT,siderMenu:{isPreRenderPanelWhenIdle:!1,hiddenWhenSmallScreenInBootstrap:!1,disableFloatMode:!0,cacheRenderedPanelDom:{enable:!0},panelSize:{cache:!0,current:this._isTemplate&&(0,B.xA)(this._environmentService)?0:void 0},footerConfig:{exclude:!0,hackPadding:this._isTemplate},customLogo:this._environmentService.isInSdkIframe?dO:void 0},titleBar:{renderMenuConfig:{position:"right",style:{marginRight:"4px"},orderLevel:lO.r.low,order:0}}}],!1)),this.initBusinessAppService(e,r),sk(e,r,{},this._isTemplate),(0,sD.Ie)(F.INIT_I18N);let{span:a}=(0,E.VL)(e,"base-flow","initI18N");this._appService=new k.FS(r.makeCollection()),this._appService.invokeFunction(e=>{e.get(eW.S).allowToRender().then(()=>{(0,sD.oe)(F.INIT_I18N)}).finally(()=>{a.end()})}),(0,sD.Ie)(F.LOGIN_CHECK);let s=ej(e,this._appService,da);return s.then(()=>{(0,sD.oe)(F.LOGIN_CHECK)}),(0,I.oW)(s)}initContainerService(e){let t=new E.uS;return this.initBusinessContainerService(t,this._preloadVEWasmPromise,this.getInjectedWebId(),this.getInjectedDraftPermission()),this._containerService=new sX.J(t.makeCollection(),this._appService),(0,I.ly)()}async startWorkbenchService(e){var t;return this._workbenchService=(0,k.ko)(this._appService,tZ.e),this._workbenchService.setInstantiationService(this._containerService),(null===(t=window)||void 0===t?void 0:t.pStyleSheet)&&(e.setValue("pStyleSheet",!0),await window.pStyleSheet),await this._workbenchService.bootstrap(),this._workbenchService.forceSetSiderMenuWidthTransition(!0),this._workbenchService.setWorkbenchMode(lq.w.editable),(0,I.ly)()}reportPackageOpenTime(){this._containerService.invokeFunction(e=>{let t=e.get(aY.H),i=e.get(V.v),r=e.get(H.n);i.syncFileOpenTime(),t.onDraftPermissionChange(()=>{i.syncFileOpenTime()}),r.draftWorkspaceManager.onDidWorkspaceChange(()=>{i.syncFileOpenTime()}),r.dataSdk.onChangeDraftId(()=>{i.syncFileOpenTime()})})}async runBusinessPostRestoreTasks(){let e=document.getElementById("ssr-root");e&&e.remove(),await Promise.resolve()}handleError(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t){let{cause:t}=e;!(t instanceof Error)&&(t=Error(JSON.stringify(e.cause))),this.reportEditorInitError(`${e.code}_${e.msg}`,t)}this._lifecycleService.setDestroyed(),(0,Z.U)(this._containerService),this._onErrorCallbacks.forEach(e=>{try{e()}catch(e){}})}_catchVeLoadError(){this._preloadVEWasmPromise.catch(e=>{setTimeout(()=>{this.handleError((0,I.Mx)(ez.IC.DownloadVEError,"download ve error",e))},0)})}changeEditorEditableStatus(e){return this._containerService.invokeFunction(t=>{t.get(tZ.e).setWorkbenchMode(e)})}async restoreDraftMaterials(e){let t=await e;t&&await t.waitForEnsureFinished()}async restoreDraft(e){var t,i,r,n;let{draftJson:o,preloadResourcePromise:a,overrideDraftId:s,overrideDraftName:l,isForceAutoMaterial:c,draftDataVersion:d}=e,u=await a,[p]=this._containerService.invokeFunction(e=>[e.get(M.D)]);if(p.bootstrap({autoMaterials:c?[...null!==(t=null==u?void 0:u.userMaterialLifeCycles)&&void 0!==t?t:[],...null!==(i=null==u?void 0:u.invalidUserMaterialLifeCycles)&&void 0!==i?i:[]]:void 0,materials:c?[]:[...null!==(r=null==u?void 0:u.userMaterialLifeCycles)&&void 0!==r?r:[],...null!==(n=null==u?void 0:u.invalidUserMaterialLifeCycles)&&void 0!==n?n:[]]}),(0,sD.AO)(`${F.INIT_PROJECT_TAB}_END`),!o||!u)throw(0,I.Mx)(ez.IC.InvalidLink,"get empty package info",Error("get empty package info"));let{waitForMetasReady:_,oldResourceIdToNewResourceIdMap:g,rawPreloadMaterialsMap:h}=u;(0,sD.Ie)(F.WAIT_RESOURCE_META),await _(),(0,sD.oe)(F.WAIT_RESOURCE_META),console.log("[startup] resource meta ready");let m=this._containerService.invokeFunction(e=>{try{console.log("[startup] begin draft recovery",this._environmentService.draftIdFromUrl);let t=e.get(W.a),i=e.get(H.n),r=(0,z.V)(t.ensureManager,o,u,s,l);(0,sD.Ie)(F.EDITOR_LOAD_DRAFT);let n=i.dataSdk.recoveryDraft(r);(0,sD.oe)(F.EDITOR_LOAD_DRAFT),d&&i.dataSdk.updateDataVersion(d),console.log("[startup] draft view",n,i.dataSdk.draftView),A.B.log("load_draft",o);return this.changeEditorEditableStatus(lq.w.editable),n}catch(e){console.log("[startup] restore draft failed",e),A.B.error("load_draft_error",o,e)}return null});return console.log("[startup] restored draft",m),(0,I.oW)(m)}getMainEditorService(){return this._containerService.invokeFunction(e=>e.get(W.a))}getMainDraftService(){return this._containerService.invokeFunction(e=>e.get(H.n))}getReportService(){return this._containerService.invokeFunction(e=>e.get(io.m))}async renderDraft(e,t,r,n,o){var a;let s=!this._isTemplate&&this._isNewDraft||this._isTemplate&&!this._environmentService.currentTemplateId,l=this.getMainEditorService(),c=this.getMainDraftService();l.renderManager.setEffectResourceRender(e=>{let t=l.ensureManager.__unsafeGetModelPath(e);return console.log("[ve] model path generated",e,t),t}),r.then(()=>l.timelineManager.bootstrap()),(0,sD.Ie)(F.DOWNLOAD_MATERIALS_DEFAULT);let{pEnsureAudioDenoiseModel:d,pEnsureDefaultAudio:u,pEnsureDefaultSprite:p}=n,_=l.ensureManager.ensureDefaultFontResources(),g=Promise.all([s?Promise.resolve():d,p,u]);p.then(e=>l.timelineManager.resource.setDefaultSprite(e)),g.then(()=>{(0,sD.oe)(F.DOWNLOAD_MATERIALS_DEFAULT)}),await Promise.all([g,this._isNewDraft?this.loadNewDraftMaterials(t):this.restoreDraftMaterials(t)]),(0,sD.Ie)(F.LVVE_SET_MUTABLE),await Promise.all([(0,$.p)(c,l.renderManager,$.y.Init,this._isNewDraft,l.subjectCropManager,null==o?void 0:null===(a=o[1])||void 0===a?void 0:a.getOriginVideoAlgorithmInfo()),(0,x.l)(c.dataSdk,l.renderManager,this._reportService),(0,N.o)(c.dataSdk,l.renderManager)]),(0,sD.oe)(F.LVVE_SET_MUTABLE),l.timelineManager.timelineUI.guide.start(),(0,sD.Ie)(F.RESTORE_FIRST_FRAME),l.renderManager.enableRender(),l.renderManager.flushRender(),l.renderManager.startListener(),console.log("[startup] did start render first frame"),Promise.allSettled([_,l.ensureManager.ensurePostRenderDefaultResources(),!s&&l.ensureManager.ensureEmoji()].filter(Boolean)).then(()=>{l.renderManager.setDefaultFontPath(R.P56)}),!s&&await new Promise(e=>{let t=l.renderManager.onFirstFrameRender(()=>{e(),null==t||t.dispose()})}),(0,sD.oe)(F.RESTORE_FIRST_FRAME),!function(e){e.invokeFunction(e=>{if(e.get(B.rO).draftIdFromUrl)return;let t=e.get(H.n),r=e.get(Q.W);(0,eM.V)(t.saveManager.onSuccess)(()=>{var e;let n=t.draftWorkspaceManager.workspaceId,o=null===(e=r.getWorkspace(n))||void 0===e?void 0:e.space_id;!function(e,t,r){let n=(0,sE.MY)(sI.b),o=`${n({draftId:e})}`,{protocol:a,host:s,search:l}=i.g.location,c=new URLSearchParams(l);if(c.set("workspaceId",t),c.set("spaceId",r),c.get("create_id")){let e=c.get("create_id");c.delete("create_id"),c.set("templateId",e)}c.get("template_draft_id")&&c.delete("template_draft_id");let d=`${a}//${s}${o}?${c.toString()}`;i.g.history.replaceState({},"",d)}(t.dataSdk.draftView.getDraftId(),n,o)})})}(this._containerService)}async runEventuallyTasks(e){let t=this.getMainEditorService(),i=t.timelineManager.timelineUI.zoom.value,{getSiderBarPanelWidth:r,getSiderBarWidth:n}=this._workbenchService,o=r()+n();sT.E.showModal(i,o),(0,Z.U)(this._containerService),!function(e){e.invokeFunction(async e=>{var t;let i=e.get(eW.S);await i.allowToRender();let r=(null===(t=window)||void 0===t?void 0:t.__locationCountryCode)||"",n=document.createElement("div");document.body.append(n),eU.createRoot(n).render((0,eF.jsx)(eG,{countryCode:r}))})}(this._containerService),!function(e){e.invokeFunction(t=>{let i=t.get(tZ.e);i.onSiderMenuExpandedChange(t=>{let{visible:i,mode:r,actionType:n}=t;"manual"===r&&(0,sP.n)(e,{show:i,actionType:n})}),i.onSiderMenuPanelResize(t=>{(0,sA.Wn)(e,{action_line:sA.DK.MATERIAL_PANEL,direction:t>0?sA.d.RIGHT:sA.d.LEFT})})})}(this._containerService),sL(this._containerService),!function(e){e.invokeFunction(e=>{let t=e.get(M.D),i=e.get(tp.c),r=async e=>{if(e.key){let t=(0,sO.G)(e.fileType);if(!i.get(e.key,t)){let r=(0,sM.GL)(e,t);i.add(e.key,r.resource);let n=i.get(e.key,t),o=[];switch(t){case eP._g.UserAudio:break;case eP._g.UserVideo:o.push(...await n.getThumbResourceTokens(),n.getCoverResourceToken());break;case eP._g.UserPhoto:o.push(n.getCoverResourceToken());break;case eP._g.UserFile:break;default:(0,P.bP)(t)}o.forEach(e=>{e.start()})}}else{let i=(0,eM.V)(e.onResourceReady)(()=>{r(t.getMaterialById(e.id))});e.onDidRemove(()=>{i.dispose()})}},n=()=>{let e=t.getMaterials();e.userGeneratedMaterials.forEach(e=>r(e)),e.autoGeneratedMaterials.forEach(e=>r(e)),t.onDidMaterialAdd(e=>{e.forEach(e=>{r(t.getMaterialById(e))})})};t.isReady?n():t.onDidReady(()=>{n()})})}(this._containerService),sU(),(0,J.b)(sZ,this._teaAdapterService,t),(0,J.b)(sK,this._containerService),await Promise.resolve()}registerAbnormalFlowListeners(){let e=()=>{this._hasAttemptedUnloadPage=!0},t=()=>{"visible"!==document.visibilityState&&(this._hasHiddenPage=!0)};return window.addEventListener("beforeunload",e),window.document.addEventListener("visibilitychange",t),()=>{window.removeEventListener("beforeunload",e),window.document.removeEventListener("visibilitychange",t)}}_getEditorInitPrevCondition(){return this._isPasswordFlow?"password":this._isRepairQuickImportFlow?"repairQuickImport":this._hasReLogin?"unlogged":"none"}registerEVReporters(){var e;(0,K.j)(this._containerService),window.addEventListener("beforeunload",()=>{!this._lifecycleService.didPassPhase(L.B.Restored)&&!this._lifecycleService.isDestroyed&&this.reportFlowEditorInit({status:"fail",params:{msg:"user close"},prevCondition:this._getEditorInitPrevCondition(),useBeacon:!0})}),e=this._containerService,window.addEventListener("appinstalled",()=>{"visible"===document.visibilityState&&(0,sq.n)(e)}),(0,q.w)(this._containerService)}reportEditorInitError(e,t){this.reportFlowEditorInit({status:"fail",params:{msg:e},originError:t,prevCondition:this._getEditorInitPrevCondition()})}reportEnterEditorPage(e){let{isFirstVisitPage:t,isSessionStartPage:i}=(0,s0.H)(),r={is_first_visit_page:t?1:0,is_session_start_page:i?1:0};this._containerService.invokeFunction(e=>{var t;let i=e.get(t_.w),n=e.get(ts.X);i.reportPv({...r,draft_id:this._draftIdInFlow,template_id:null!==(t=this._environmentService.templateIdFromUrl)&&void 0!==t?t:"",theme:n.getTheme()})}),(0,Y.T)(this._containerService),(0,th.C)().reportPvImmediately()}checkCompatibility(){window._compatible&&!window._compatible.isCompatible?console.error("[startup] this browser does not meet compatability requirements; therefore, editor is unable to bootstrap",window._compatible):!window._compatible&&console.error("[startup] compatability check happens after starting lifecycle, the loading sequence is incorrect")}constructor({environmentService:e}){var t,i;this._draftIdInFlow="",this._preloadVEWasmPromise=null===(t=window.pWasmResult)||void 0===t?void 0:t.pCreateModule,this._hasReLogin=!1,this._isPasswordFlow=!1,this._isRepairQuickImportFlow=!1,this._hasAttemptedUnloadPage=!1,this._hasHiddenPage=!1,this._onErrorCallbacks=[],this._jobScheduler=new eZ(L.f.Started),this._lifecycleService=new D.b,this._environmentService=e,this._isTemplate=(0,B.JY)(e),this._isNewDraft=!this._environmentService.draftIdFromUrl,this._draftIdInFlow=null!==(i=this._environmentService.draftIdFromUrl)&&void 0!==i?i:(0,S.k7)()}}(0,b.gn)([(0,E.lI)("base-flow","startLifeCycle"),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,b.w6)("design:returntype",Promise)],dU.prototype,"startLifeCycle",null),(0,b.gn)([(0,E.lI)("base-flow","initGlobalServices"),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,b.w6)("design:returntype",Promise)],dU.prototype,"initGlobalServices",null),(0,b.gn)([(0,E.lI)("base-flow","initContainerService"),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,b.w6)("design:returntype","undefined"==typeof ILvErrorRef?Object:ILvErrorRef)],dU.prototype,"initContainerService",null),(0,b.gn)([(0,E.lI)("base-flow","startWorkbenchService"),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,b.w6)("design:returntype",Promise)],dU.prototype,"startWorkbenchService",null),(0,b.gn)([(0,E.lI)("base-flow","renderDraft"),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof PreloadResourceResult?Object:PreloadResourceResult,"undefined"==typeof PreloadTimelineResource?Object:PreloadTimelineResource,"undefined"==typeof EnsureDefaultResourceResult?Object:EnsureDefaultResourceResult,Object]),(0,b.w6)("design:returntype",Promise)],dU.prototype,"renderDraft",null),(0,b.gn)([(0,E.lI)("base-flow","runEventuallyTasks"),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context]),(0,b.w6)("design:returntype",Promise)],dU.prototype,"runEventuallyTasks",null)},299799:function(e,t,i){"use strict";i.d(t,{U:function(){return d}});var r=i(93420),n=i(801497),o=i(306224),a=i(892745),s=i(801410);let l={baseURL:"/lv/v1/user",method:"POST",headers:{loc:o.yM.CHANNEL,lan:n.ZP.language||o.yM.LAN,pf:o.yM.APP_PF,appvr:o.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":o.yM.APP_SDK_VERSION},params:{}},c=r.Z.create(l);c.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=l.headers;return Object.assign(e.headers,(0,s.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),c.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}}),(0,a.Z)(c,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});let d={getLocation:async()=>await c({url:"/web/get_location",data:{}})}},956018:function(e,t,i){"use strict";i.d(t,{k:function(){return b}});var r=i(801497),n=i(121608),o=i.n(n),a=i(722169),s=i(603662),l=i(306224),c=i(612649),d=i(892745),u=i(801410),p=i(362783),_=i(324487);let g="12.4.0",h=(0,_.UO)(),m={baseURL:"/commerce",method:"POST",headers:{appid:l.yM.APP_ID,loc:h,lan:r.ZP.language||l.yM.LAN,pf:l.yM.APP_PF,appvr:g,tdid:"","sign-ver":1,"app-sdk-version":l.yM.APP_SDK_VERSION},useCommerceApi:!0},v=c.ZP.createAxios(m);v.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=m.headers;return Object.assign(e.headers,(0,u.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e});v.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{var t,i,r;let n=e.data;if("0"!==n.ret)return Promise.reject(e);return(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.url)&&e.config.url.indexOf("user_info")>0?Promise.resolve({data:n.data,signContext:{sign:n.sign,ret:n.ret,response:n.response,"device-time":null==e?void 0:null===(r=e.config)||void 0===r?void 0:null===(i=r.headers)||void 0===i?void 0:i["device-time"],systime:null==n?void 0:n.systime}}):Promise.resolve(n.data)}}),(0,d.Z)(v,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:e=>![s.up.CROSS_GROUP,s.up.CROSS_PLATFORM_IOS,s.up.CROSS_PLATFORM_MAC,s.up.RISK_ERROR,s.up.SHARK_RISK_ERROR].includes(e.data.ret)&&!0});let f=e=>{let t=[];return Object.entries(e).forEach(e=>{!(0,a.isNil)(e[1])&&t.push(`${e[0]}=${e[1]}`)}),t.join("&")},y=async(e,t,r)=>{let n=new(await i.e("187").then(i.bind(i,357994))).default;return n.setPublicKey(r),n.verify(e,t,o().SHA256)},w=!0,b={async getSubscriptionUserInfo(e){let{data:t,signContext:i}=await v({url:"/v1/subscription/user_info",data:{aid:l.yM.APP_ID,scene:"vip",from_db:e}}),r={appid:l.yM.APP_ID,appvr:g,"device-time":null==i?void 0:i["device-time"],pf:l.yM.APP_PF,response:null==i?void 0:i.response,ret:i.ret,systime:null==i?void 0:i.systime},{sign:n}=i;if(n){let e=await y(f(r),n,"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1I/Ml9Qkp6reos86Tjbd1R6q+\nbQwviSEmZzqtrhfGI+iMGKA74XSctUu8ZnWhOKsG5+PujMrIJX2WMRP0E5lhJpCh\nfgK3aiNikvgigORzf0Lz39XS46eAHJrPbMaQiabDfd/+CjkvxbV+LW3oPdoZj9Mn\n38OEHt9qVkUlvpv76wIDAQAB\n-----END PUBLIC KEY-----");if(i.sign&&e)return(0,_.GU)(t)}throw Error("Error: Auth sign")},async getEntrances(){w&&performance.mark("GET_ENTRANCES_START");let e="/lv/v1/commerce/get_entrances",t=(0,u.O)({url:e,...m.headers}),i=await (0,p.Z)(()=>{try{let e=window.__entrances;if(e&&"0"===e.ret)return window.__entrances=null,Promise.resolve(e.data)}catch(e){}return v({baseURL:"/",url:e,headers:{...t}})},{cacheKey:"promiseCache_getEntrances"});return w&&performance.mark("GET_ENTRANCES_END"),w=!1,i},async getSpaceList(e){let t="/v1/subscription/workspace/space_list",i=(0,u.O)({url:t,...m.headers}),r=await v({url:t,headers:{...i},data:{aid:Number(l.yM.APP_ID),workspace_id:e}});return{spaceList:r.space_list,isFirstSubscribe:r.is_first_subscribe,isAutoSubscribe:r.is_auto_subscribe,isWebAutoSubscribe:r.is_web_auto_subscribe,isCancelSubscribe:r.is_cancel_subscribe,jointActivitySpaceList:r.joint_activity_space_list}},async getPriceList(e){var t,i,r,n;let o="/v1/subscription/cc_web_price_list",a=(0,u.O)({url:o,...m.headers}),s={aid:Number(l.yM.APP_ID),scene:"workspace",region:e},[c,d]=await (0,p.Z)(()=>Promise.all([v({url:o,headers:{...a},data:s}),v({url:o,headers:{...a},data:{...s,scene:"web"}})]),{cacheKey:`promiseCache_getPriceList_${JSON.stringify(s)}`}),_=(null!==(t=c.all_price_list)&&void 0!==t?t:[]).reduce((e,t)=>(e[t.product_id]=t,e),{}),g=(null!==(i=c.tab_list)&&void 0!==i?i:[]).map(e=>({as_default:e.as_default,products:e.product_ids.map(e=>_[e])}));return{allPriceList:[...null!==(r=c.all_price_list)&&void 0!==r?r:[],...null!==(n=d.all_price_list)&&void 0!==n?n:[]],groupProductList:g,ccWebDisplayInfo:c.cc_web_display_info}},getSubscriptionList:async e=>await v({url:"/v1/subscription/order_record_list",data:{aid:Number(l.yM.APP_ID),workspace_id:e,cursor:0,count:1}}),async getVipPriceList(e){var t,i;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{noCache:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={aid:l.yM.APP_ID,scene:"vip",region:e,language:r},a=await (0,p.Z)(()=>v({url:"/v1/subscription/cc_price_list",data:o}),{cacheKey:`promiseCache_getVipPriceList_${JSON.stringify(o)}`,noCache:n}),s={month:[],year:[]};return(null!==(t=a.all_price_list)&&void 0!==t?t:[]).forEach(e=>{let{cycle_unit:t,subscribe_cycle:i}=e;"MONTH"===t&&12!==i?s.month.push(e):s.year.push(e)}),{allVipPriceList:(null!==(i=a.all_price_list)&&void 0!==i?i:[]).map(e=>({...e,parsed_display_content:(0,_.fH)(e)})),vipGroupProductList:s,ccWebDisplayInfo:a.cc_web_display_info}},async getSubscribeInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return await v({url:"/v1/subscription/get_subscribe_info",data:{language:e}})},async getSubscribeInfoV3(e){let t={...e,app_id:Number(l.yM.APP_ID)};return await (0,p.Z)(()=>v({url:"/v3/trade/subscription_infos",data:t}),{cacheKey:`promiseCache_getSubscribeInfoV3_${JSON.stringify({app_id:t.app_id,scene:t.scene,vip_levels:t.vip_levels})}`,noCache:e.use_master})},async getVimoSlot(e){let{noCache:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="/commerce/v1/resource_position",r=(0,u.O)({url:i,...m.headers});return await (0,p.Z)(()=>v({baseURL:"/",url:i,headers:{...r},data:e}),{cacheKey:`promiseCache_getVimoSlot_${JSON.stringify(e)}`,noCache:t})},async recordVimoSlotAction(e){let t="commerce/v1/record_resource_action",i=(0,u.O)({url:t,...m.headers});return await v({baseURL:"/",url:t,headers:{...i},data:e})},async initTrade(e){var t;let i="/v3/trade/init_trade",r=(0,u.O)({url:i,...m.headers}),n={...e,app_id:Number(l.yM.APP_ID),sku_id:(null===(t=e.sku_id)||void 0===t?void 0:t.length)!==0?e.sku_id:void 0};return await v({url:i,headers:{...r},data:n})},async queryTrade(e){let t="/v3/trade/query_trade",i=(0,u.O)({url:t,...m.headers}),r={...e,app_id:Number(l.yM.APP_ID)};return await v({url:t,headers:{...i},data:r})},async cancelVipSubscription(e){var t;let i="/v3/trade/cancel_subscription",r=(0,u.O)({url:i,...m.headers}),n={...e,app_id:null!==(t=e.app_id)&&void 0!==t?t:Number(l.yM.APP_ID)};return await v({url:i,headers:{...r},data:n})}}},924553:function(e,t,i){"use strict";i.d(t,{p:function(){return u}});var r=i(306224),n=i(394567),o=i(801497),a=i(612649),s=i(801410),l=i(892745);let c={baseURL:"",method:"POST",headers:{loc:r.yM.CHANNEL,lan:o.ZP.language||r.yM.LAN,pf:r.yM.APP_PF,appvr:r.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":r.yM.APP_SDK_VERSION}},d=a.ZP.createAxios(c);d.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}}),(0,l.Z)(d,{retries:3,resetTimeout:!0,retryDelay:1e3,isRetry:e=>{var t,i;return Number(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.ret)!==n.B.EVER_CLOUD.INVALID_IDC&&Number(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.ret)!==n.B.EVER_CLOUD.INSUFFICIENT_SPACE}});let u={async getEverPhotoToken(){let e="/lv/v1/ever_photo/get_token",{pf:t,appvr:i,tdid:r}=c.headers;return await d({url:e,data:{},headers:{...(0,s.O)({url:e,...c.headers,pf:t,appvr:i,tdid:r})}})},async getWorkspaceEverPhotoToken(){let e="/cc/v1/workspace/get_ever_photo_token",{pf:t,appvr:i,tdid:r}=c.headers;return await d({url:e,data:{},headers:{...(0,s.O)({url:e,...c.headers,pf:t,appvr:i,tdid:r})}})},async getEverPhotoUserSpace(e){let t="/lv/v1/ever_photo/get_user_space",{pf:i,appvr:r,tdid:n}=c.headers;return await d({url:t,data:{workspace_id:e},headers:{...(0,s.O)({url:t,...c.headers,pf:i,appvr:r,tdid:n})}})},async promoteAsset(e){let t="/lv/v1/ever_photo/promote_asset",{pf:i,appvr:r,tdid:n}=c.headers;return await d({url:t,data:{asset_id:e.assetId,space_id:e.spaceId,workspace_id:e.workspaceId},headers:{...(0,s.O)({url:t,...c.headers,pf:i,appvr:r,tdid:n})}})},async prepareUpload(e){let t="/lv/v1/asset/prepare_upload_cloud",{pf:i,appvr:r,tdid:n}=c.headers;return await d({url:t,data:{...e,is_web_user:!0},headers:{...(0,s.O)({url:t,...c.headers,pf:i,appvr:r,tdid:n})}})},async createAsset(e){let t="/lv/v1/asset/create_cloud_asset",{pf:i,appvr:r,tdid:n}=c.headers;return await d({url:t,data:{...e,is_web_user:!0},headers:{...(0,s.O)({url:t,...c.headers,pf:i,appvr:r,tdid:n})}})},async getDownloadUrl(e){let t="/lv/v1/ever_photo/get_external_download_url",{pf:i,appvr:r,tdid:n}=c.headers;return await d({url:t,data:{asset_id:e.assetId,workspace_id:e.workspaceId,max_time:e.maxTime,ttl:e.ttl},headers:{...(0,s.O)({url:t,...c.headers,pf:i,appvr:r,tdid:n})}})}}},42028:function(e,t,i){"use strict";let r;i.d(t,{D:function(){return d},q:function(){return g}});var n,o=i(801497),a=i(306224),s=i(612649),l=i(892745),c=i(801410);var d=((n={}).video="video",n.image="image",n.temp="temp",n);let u={baseURL:"/lv/v1",method:"POST",headers:{loc:a.yM.CHANNEL,lan:o.ZP.language||a.yM.LAN,pf:a.yM.APP_PF,appvr:a.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":a.yM.APP_SDK_VERSION},params:{}},p=s.ZP.createAxios(u);p.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}}),(0,l.Z)(p,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:e=>{var t;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.ret)!=="200206"}});let _=()=>r?{[s.R0]:{domain:r}}:{},g={fixRequestDomain(){r=s.ZP.getWebDomain()},async getUploadToken(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",i=arguments.length>1?arguments[1]:void 0,r="/upload_sign";return await p({url:r,headers:{...(0,c.O)({url:`${u.baseURL}${r}`,...u.headers})},data:{key_version:"v5",biz:null!==(e=null==i?void 0:i.biz)&&void 0!==e?e:({video:"web_video",image:"replicate",temp:"temp_file"})[t]},..._()})},async createVideoData(e){let t="/upload/create_upload_task";return(await p({url:t,headers:{...(0,c.O)({url:`${u.baseURL}${t}`,...u.headers})},data:e,..._()})).task_id},async getVideoTaskInfo(e){let t="/upload/get_upload_task";return await p({url:t,[l.R]:{canRetry:!1},headers:{...(0,c.O)({url:`${u.baseURL}${t}`,...u.headers})},data:e,..._()})}}},590610:function(e,t,i){"use strict";i.d(t,{B:function(){return u}});var r=i(93420),n=i(801497),o=i(306224),a=i(612649),s=i(801410);let l={baseURL:"/lv/v1",method:"POST",headers:{loc:o.yM.CHANNEL,lan:n.ZP.language||o.yM.LAN,pf:o.yM.APP_PF,appvr:o.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":o.yM.APP_SDK_VERSION}},c=a.ZP.createAxios(l);c.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=l.headers;return Object.assign(e.headers,(0,s.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),c.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}});let d=r.Z.create({method:"GET"});d.interceptors.response.use(e=>200===e.status?Promise.resolve(e.data):Promise.reject(e));let u={async getShareReportReason(){await a.ZP._locker.awaitForInit();let e=a.ZP.getWebDomain(),t="https://sf16-muse-va.ibytedtos.com/obj/ies-fe-bee-maliva/bee_prod/biz_80/bee_prod_80_bee_publish_4017.json";return e.indexOf("sg")&&(t="https://sf-hs-sg.ibytedtos.com/obj/ies-fe-bee-alisg/bee_prod/biz_80/bee_prod_80_bee_publish_4017.json"),console.error("await jsonFileService.get(url)",await d.get(t)),await d.get(t)},getCommentReportReason:async()=>await d.get(""),async getAIGCReportReason(){try{let e=await d.get("https://sf16-muse-va.ibytedtos.com/obj/ies-fe-bee-maliva/bee_prod/biz_49/bee_prod_49_bee_publish_644.json");if(!e.reasons)throw Error("");return e}catch(e){return{reasons:[{text:"s2v_report_type_violent",cate:"violent",cid:401,tips:"",index:0,sort:0,reportParam:"violent_extremism"},{text:"s2v_report_type_illegal",cate:"illegal",cid:402,tips:"",index:1,sort:1,reportParam:"illegal_activities_and_regulated_goods"},{text:"s2v_report_type_graphic_content",cate:"graphic_content",cid:403,tips:"",index:2,sort:2,reportParam:"violent_and_graphic_content"},{text:"s2v_report_type_dangerous",cate:"dangerous",cid:404,tips:"",index:3,sort:3,reportParam:"suicide_self-harm_and_dangerous_acts"},{text:"s2v_report_type_hateful",cate:"hateful",cid:405,tips:"",index:4,sort:4,reportParam:"hateful_behavior"},{text:"s2v_report_type_harassment",cate:"harassment",cid:406,tips:"",index:5,sort:5,reportParam:"harassment_and_bullying"},{text:"s2v_report_type_adult",cate:"adult",cid:407,tips:"",index:6,sort:6,reportParam:"adult_nudity_and_sexual_activity"},{text:"s2v_report_type_minor",cate:"minor",cid:408,tips:"",index:7,sort:7,reportParam:"minor_safety"},{text:"s2v_report_type_integrity",cate:"integrity",cid:409,tips:"",index:8,sort:8,reportParam:"integrity_and_authenticity"},{text:"s2v_report_type_infringement",cate:"infringement",cid:410,tips:"",index:9,sort:9,reportParam:"intellectual_property_infringement"},{text:"s2v_report_type_other",cate:"other",cid:411,tips:"",index:10,sort:10,reportParam:"other"}]}}},report:async e=>await c.post("/report/report",e),eventReport:async e=>await c.post("/event/report",e),aigcReport:async e=>await c.post("/report/report",e)}},729091:function(e,t,i){"use strict";i.d(t,{E:()=>u});var r=i("801497"),n=i("306224"),o=i("612649");let a=new Map;var s=i("801410"),l=i("722169");let c={baseURL:"/cc/v1/workspace",method:"POST",headers:{loc:n.yM.CHANNEL,lan:r.ZP.language||n.yM.LAN,pf:n.yM.APP_PF,appvr:n.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":n.yM.APP_SDK_VERSION}},d=o.ZP.createAxios(c);d.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=c.headers;return Object.assign(e.headers,(0,s.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),!function(e,t){let{maxAge:i=36e5}={};e.interceptors.request.use(e=>{let{needCache:t}=e.params||{},i=function(e){try{if(!e)return"";let{url:t,data:i}=e;return`${t}${JSON.stringify(i)}`}catch(e){return""}}(e);if(e.cacheKey=i,!t)return a.delete(i),e;let r=a.get(i);if(r){let{data:t,maxAge:n,cacheStartTime:o}=r;Date.now()<n+o?e.adapter=e=>Promise.resolve({data:t,status:200,statusText:"OK",headers:{},config:e}):a.delete(i)}return e}),e.interceptors.response.use(e=>{let{config:t,status:r,data:n}=e,{cacheKey:o}=t||{};return o&&200===r&&(null==n?void 0:n.ret)==="0"&&a.set(o,{data:n,maxAge:i,cacheStartTime:Date.now()}),e})}(d),d.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}});let u={getUserWorkSpace:async e=>await d({url:"/get_user_workspaces",data:e}),createWorkspace:async e=>await d({url:"/create_workspace",data:e}),checkCreateWorkspace:async()=>await d({url:"check_create_workspace"}),getWorkspaceMember:async e=>await d({url:"/get_member",data:e}),async getAllWorkspaceMember(e){var t,i,r,n,o;let a;let s=[];do(null==(a=await d({url:"/get_member",data:{count:50,cursor:(null==a?void 0:null===(r=a.data)||void 0===r?void 0:r.next_cursor)||"0",workspace_id:e.workspace_id}}))?void 0:null===(o=a.data)||void 0===o?void 0:null===(n=o.member_list)||void 0===n?void 0:n.length)&&(s=(0,l.uniqBy)(s.concat(a.data.member_list),"uid"));while(null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.has_more);return{...a,data:{member_list:s,member_cnt:(null==a?void 0:null===(i=a.data)||void 0===i?void 0:i.member_cnt)||0}}},mGetWorkspaceUserInfo:async e=>await d({url:"/mget_workspace_user_info",data:e}),quitWorkspace:async e=>await d({url:"/quit_user",data:e}),mGetWorkspaceInfo:async e=>await d({url:"/mget_workspace_info",data:e}),getWorkspaceInfoEverPhotoToken:async e=>await d({url:"/get_ever_photo_token",data:e}),getInvitationLink:async e=>await d({url:"/get_invitation_link",data:e}),setWorkspaceUser:async e=>await d({url:"/set_user",data:e}),removeWorkspaceUser:async e=>await d({url:"/remove_user",data:e}),updateUserInfo:async e=>await d({url:"/update_user_info",data:e}),updateWorkspaceInfo:async e=>await d({url:"/update_workspace_info",data:e}),joinWorkspace:async e=>await d({url:"/join_workspace",data:e}),getWorkspaceInfoByInvitationLink:async e=>await d({url:"/get_workspace_info_by_invitation_link",data:e}),mGetWorkspaceEverphotoUserInfo:async e=>await d({url:"/mget_workspace_ever_photo_user_info",data:e}),async recentWorkspaceFileOpen(e,t){var i;return await d({url:"/recent_file_list",data:e,params:{needCache:null===(i=null==t?void 0:t.needCache)||void 0===i||i}})},syncWorkspaceInfoFileOpen:async e=>await d({url:"/sync_file_open_time",data:e}),refreshUserWorkspaceInvitationLink:async e=>await d({url:"/refresh_invitation_link",data:e}),updateUserWorkspaceInvitationLinkStatus:async e=>await d({url:"/update_invitation_link_status",data:e}),workspaceDirectionalInvited:async e=>await d({url:"/email_directional_invited_v2",data:e}),getWorkspaceFileEditOwner:async e=>await d({url:"/get_file_edit_owner",data:e}),updateWorkspaceFileEditOwner:async e=>await d({url:"/update_file_edit_owner",data:e}),mgetWorkspaceFileOpenTime:async e=>await d({url:"/mget_file_open_time",data:{...e,workspace_id:e.workspace_id||"0"}}),getWorkspaceUploadLinkInfo:async e=>await d({url:"/get_upload_link_info",data:e}),syncWorkspaceFile:async e=>await d({url:"/sync_file_everphoto",data:e}),syncFileEverphotoState:async e=>await d({url:"/sync_file_everphoto_state",data:e}),workspaceSensitiveWord:async e=>await d({url:"/sensitive_word",data:e}),updateUserWorkspaceUploadLink:async e=>await d({url:"/update_workspace_upload_link",data:e}),getUserWorkspaceUploadLink:async e=>await d({url:"/get_workspace_upload_link",data:e}),getAllEverPhotoUser:async()=>await d({url:"get_all_everphoto_user"}),notifyUploadLink:async e=>await d({url:"upload_link_notify",data:e}),getOnboardSample:async e=>await d({url:"/list_onboard_sample",data:e}),createOnboardDraft:async e=>await d({url:"/create_onboard_draft",data:e}),async checkWorkspaceMember(e){let{data:t}=await d({url:"/member/check",data:{workspace_id:e}});return{isInWorkspace:t.is_in_workspace}},async joinSpace(e){var t,i,r,n,o,a;let s={join_workspace_type:e.joinWorkspaceType,invite_link_param:{invitation_link:null===(t=e.inviteLinkParam)||void 0===t?void 0:t.invitationLink,invite_from:null===(i=e.inviteLinkParam)||void 0===i?void 0:i.inviteFrom},application_param:{workspace_id:null===(r=e.applicationParam)||void 0===r?void 0:r.workspaceId,source_type:null===(n=e.applicationParam)||void 0===n?void 0:n.sourceType,reason:null===(o=e.applicationParam)||void 0===o?void 0:o.reason,file_id:null===(a=e.applicationParam)||void 0===a?void 0:a.fileId}},{data:l}=await d({url:"/join_workspace_with_apply",data:s});return{status:l.status,applicationId:l.application_id,workspaceInfo:l.workspace_info}},dealApplication:async e=>await d({url:"/applications/update",data:{id:e.id,status:e.status}}),dealEmailApplication:async e=>await d({url:"/applications/email_update",data:{id:e.id,status:e.status,token:e.token}}),async getApplicationList(e){var t;let{data:i}=await d({url:"/applications/list",data:{application_ids:e.applicationIds,need_detail:e.needDetail}});return{applications:null===(t=i.applications)||void 0===t?void 0:t.map(e=>{let{has_approve_permission:t,application:i}=e;return{hasApprovePermission:t,application:{id:null==i?void 0:i.id,userId:null==i?void 0:i.user_id,workspaceId:null==i?void 0:i.workspace_id,status:null==i?void 0:i.status,reason:null==i?void 0:i.reason,userName:null==i?void 0:i.user_name,approverId:null==i?void 0:i.approver_id,approverName:null==i?void 0:i.approver_name,roleType:null==i?void 0:i.role_type,workspaceName:null==i?void 0:i.workspace_name,createdAt:null==i?void 0:i.created_at,timeoutAt:null==i?void 0:i.timeout_at}}})}},getInvitationActivityStatus:async e=>await d({url:"/get_invitation_activity_status",data:{workspace_id:e}}),joinInvitationActivity:async e=>await d({url:"/join_invitation_activity",data:{id:e}}),GetWorkspaceInfoExternal:async e=>await d({url:"/get_workspace_info_external",data:e})}},918488:function(e,t,i){"use strict";i.d(t,{$W:function(){return _},hP:function(){return p},ko:function(){return d}});var r=i(93420),n=i(801497),o=i(306224),a=i(970986),s=i(612649),l=i(801410);let c=s.ZP.createAxios();c.interceptors.response.use(e=>200===e.status?Promise.resolve(e.data):Promise.reject(e));let d=async e=>{var t;let i=null!==(t=e.aid)&&void 0!==t?t:o.yM.APP_ID,{token:r,state:n}=e,a=new FormData;return a.append("aid",i),a.append("token",r),a.append("state",n),await c({method:"post",baseURL:`https://${location.hostname}/`,url:"/passport/transfer/token_auth/",data:a,headers:{"Content-Type":"multipart/form-data"}})},u=s.ZP.createAxios(),p=async e=>{var t,i;let{code:r,appName:s,aid:c}=e,d=c?String(c):o.yM.APP_ID,p=(null===(i=window.__locationInfo)||void 0===i?void 0:null===(t=i.domain)||void 0===t?void 0:t.web_domain)||(/^\S+?\.bytedance\.net$/.test(window.location.host)?`https://capcut-web-va.${a.Ee}`:"https://edit-api-va.capcut.com"),_="/lv/v2/oauth/access_token",g={loc:o.yM.CHANNEL,lan:n.ZP.language||o.yM.LAN,pf:o.yM.APP_PF,appvr:o.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":o.yM.APP_SDK_VERSION},h=s?`tiktok_${s.replace(/\s*/g,"").toLowerCase()}`:"tiktok_web",m=await u({method:"post",baseURL:p,url:_,params:{aid:d},data:{code:r,platform:h},headers:{...g,...(0,l.O)({url:`${p}${_}`,pf:g.pf,appvr:g.appvr,tdid:g.tdid})}});if(200!==m.status)return Promise.reject(m);let v=m.data;return"0"!==v.ret?Promise.reject(m):Promise.resolve(v.data)},_=async e=>{let t=await r.Z.request({method:"get",baseURL:"https://open.tiktokapis.com/",url:"/v2/user/info/",params:{fields:"open_id,union_id"},headers:{Authorization:`Bearer ${e}`},withCredentials:!1});if(200!==t.status)return Promise.reject(t);let i=t.data;return"ok"!==i.error.code?Promise.reject(i.error):Promise.resolve(i.data)}},603662:function(e,t,i){"use strict";i.d(t,{EE:function(){return n},K$:function(){return p},p_:function(){return c},rH:function(){return r},up:function(){return d},yh:function(){return u}});let r={pro:"vip",standard:"standard"};function n(e){return(null==e?void 0:e.cur_vip_level)!==void 0||(null==e?!!void 0:!!e.expired_vip_level)||(null==e?!!void 0:!!e.vip_levels)||(null==e?!!void 0:!!e.old_benefit)||!1}var o,a,s,l,c=((o={}).Month="month",o.Year="year",o);var d=((a={}).SHARK_RISK_ERROR="-6",a.RISK_ERROR="36010107",a.CROSS_PLATFORM_MAC="36010109",a.CROSS_PLATFORM_IOS="36010110",a.CROSS_GROUP="36010111",a);var u=((s={})[s.INIT=10]="INIT",s[s.CLOSED=11]="CLOSED",s[s.REVOKE=12]="REVOKE",s[s.EXPIRED=13]="EXPIRED",s[s.PENDING=15]="PENDING",s[s.ACTIVE=20]="ACTIVE",s[s.IN_GRACE_PERIOD=21]="IN_GRACE_PERIOD",s[s.ON_HOLD=22]="ON_HOLD",s[s.CANCELLED=30]="CANCELLED",s);var p=((l={})[l.ANDROID=0]="ANDROID",l[l.IOS=1]="IOS",l[l.WEB=2]="WEB",l[l.WINDOWS=3]="WINDOWS",l[l.MAC=4]="MAC",l)},6689:function(e,t,i){"use strict";i.d(t,{Fm:function(){return f},PP:function(){return v},S_:function(){return g},Tv:function(){return u},UA:function(){return m},hY:function(){return p},x3:function(){return _},zS:function(){return h}});var r,n,o,a,s,l,c,d,u=((r={})[r.Material=0]="Material",r[r.FilmVideo=1]="FilmVideo",r[r.Graphic=3]="Graphic",r);var p=((n={})[n.Underway=0]="Underway",n[n.Success=1]="Success",n[n.Fail=-1]="Fail",n);var _=((o={})[o.Underway=1]="Underway",o[o.UploadSuccess=2]="UploadSuccess",o[o.ShareSuccess=3]="ShareSuccess",o[o.Audit=4]="Audit",o[o.AuditFail=5]="AuditFail",o[o.Fail=6]="Fail",o[o.Timeout=8]="Timeout",o);var g=((a={})[a.Underway=0]="Underway",a[a.Success=1]="Success",a[a.Fail=-1]="Fail",a[a.LackSpace=-2]="LackSpace",a);var h=((s={})[s.Tiktok=1]="Tiktok",s[s.Youtube=2]="Youtube",s[s.Ttam=3]="Ttam",s[s.Facebook=4]="Facebook",s[s.YoutubeShort=5]="YoutubeShort",s[s.FacebookGroup=6]="FacebookGroup",s[s.FacebookPage=7]="FacebookPage",s[s.Ins=8]="Ins",s);var m=((l={})[l.Export=2]="Export",l[l.Download=3]="Download",l[l.Share=4]="Share",l[l.Long2Short=9]="Long2Short",l);var v=((c={})[c.processing=0]="processing",c[c.success=1]="success",c[c.failure=-1]="failure",c[c.fallSpace=-2]="fallSpace",c);var f=((d={})[d.UploadFailed=100001]="UploadFailed",d)},752742:function(e,t,i){"use strict";i.d(t,{EI:function(){return l},ZV:function(){return s},uv:function(){return d},xv:function(){return c}});var r,n,o,a,s=((r={})[r.leaveWorkspace=11005]="leaveWorkspace",r[r.roleChange=11006]="roleChange",r[r.newMember=11007]="newMember",r);var l=((n={})[n.SELF_CREATE=0]="SELF_CREATE",n[n.APP_CONVERT=1]="APP_CONVERT",n[n.WEB_CONVERT=2]="WEB_CONVERT",n);var c=((o={})[o.InviteLink=1]="InviteLink",o[o.Application=2]="Application",o);var d=((a={})[a.Waiting=1]="Waiting",a[a.Passed=2]="Passed",a[a.Rejected=3]="Rejected",a[a.JoinOtherWay=4]="JoinOtherWay",a[a.Timeout=5]="Timeout",a)},515549:function(e,t,i){"use strict";i.d(t,{v4:function(){return o},zw:function(){return n}});var r,n=((r={})[r.Commercial=1]="Commercial",r[r.NonCommercial=0]="NonCommercial",r[r.PlaneCommercial=3]="PlaneCommercial",r[r.WebPublish=4]="WebPublish",r);let o={9001:1,1:0}},848411:function(e,t,i){"use strict";i.d(t,{$C:function(){return d},N$:function(){return c},Sc:function(){return s},Yx:function(){return l}});var r,n,o,a,s=((r={}).TT_USER_INFO="tt_user_info",r.YT_USER_INFO="youtube_user_info",r.FACEBOOK_USER_INFO="facebook_user_info",r);var l=((n={}).CREATOR_AVARTAR_URL="creator_avatar_url",n.CREATOR_USERNAME="creator_username",n.CREATOR_NICKNAME="creator_nickname",n.PRIVACY_LEVEL_OPTIONS="privacy_level_options",n.COMMENT_DISABLED="comment_disabled",n.DUET_DISABLED="duet_disabled",n.STITCH_DISABLED="stitch_disabled",n.REMAINING_API_POST_QUOTA_24HR="remaining_api_post_quota_24hr",n.MAX_VIDEO_POST_DURATION_SEC="max_video_post_duration_sec",n);var c=((o={})[o.NORMAL=0]="NORMAL",o[o.BALCK_LIST_24=1]="BALCK_LIST_24",o[o.BALCK_LIST_FOREVER=2]="BALCK_LIST_FOREVER",o[o.UNDER_AGE_13=3]="UNDER_AGE_13",o[o.UNBLOCK=4]="UNBLOCK",o);var d=((a={})[a.SAME=0]="SAME",a[a.DIFFERENT=1]="DIFFERENT",a)},59426:function(e,t,i){"use strict";i.d(t,{B:function(){return h}});var r=i(801497),n=i(306224),o=i(394567),a=i(472231),s=i(970986),l=i(719369),c=i(612649),d=i(892745),u=i(801410),p=i(848411);let _={baseURL:"/lv/v1/user",method:"POST",headers:{loc:n.yM.CHANNEL,lan:r.ZP.language||n.yM.LAN,pf:n.yM.APP_PF,appvr:n.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":n.yM.APP_SDK_VERSION},params:{}},g=c.ZP.createAxios(_);g.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=_.headers;return Object.assign(e.headers,(0,u.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),g.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}}),(0,d.Z)(g,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:e=>{var t;return![o.B.USER_CODE.NO_LOGIN,o.B.AUTHORIZED.GOOGLE_UNAUTHORIZED].includes(Number(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.ret))}});let h={overWriteIsFirstLogin:async e=>await g({url:`${window.location.origin}/api/account/v1/settings`,data:{app_id:e},[c.R0]:{skipAwaitLocker:!0}}),checkIsFirstLogin:async e=>await g({url:`${window.location.origin}/api/account/v1/login_info`,data:{app_id:e},[c.R0]:{skipAwaitLocker:!0}}),async getAndUpdateUserInfo(e){let t="/web/user_info";return await g({url:a.Z?`${s.JX}${_.baseURL}${t}`:`${window.location.origin}${_.baseURL}${t}`,data:e,[c.R0]:{skipAwaitLocker:!0}})},getUserInfo:async e=>await g({url:`${window.location.origin}${_.baseURL}/web/get_user_info`,data:{uid:e,need_grade:!1},[c.R0]:{skipAwaitLocker:!0}}),updateUser:async e=>await g({url:"/update",data:e}),thirtpartCloudsDeauthorization:async e=>await g({url:"/web/third_party_clouds_deauthorization",data:e}),authorizationCheck:async e=>await g.post("/web/third_party_clouds_authorization_check",e),getShareUserInfo:async e=>await g({url:"/web/share_user_info",data:e}),async getTTShareUserInfo(e){var t;let i=`https://${location.host}/api/account/v1/get_bind_account_list`,r=null===(t=(await g({url:i,data:{platform_type:[1]}})).platform_user_info["1"])||void 0===t?void 0:t[0];return{[p.Sc.TT_USER_INFO]:r?{creator_avatar_url:r.avatar_url,creator_username:r.nickname,creator_nickname:r.nickname,platform_user_id:r.platform_user_id,privacy_level_options:["PUBLIC_TO_EVERYONE","MUTUAL_FOLLOW_FRIENDS","SELF_ONLY"],comment_disabled:!1,duet_disabled:!1,stitch_disabled:!1,remaining_api_post_quota_24hr:0,max_video_post_duration_sec:600}:null,[p.Sc.YT_USER_INFO]:null,[p.Sc.FACEBOOK_USER_INFO]:null,[l.qS.TTAM]:null}},shareUserUnbind:async e=>await g({url:"/web/third_party_platform_deauthorization",data:e}),checkAgeGate:async()=>await g({url:"/check_age_gate",data:{}}),confirmBirthday:async e=>await g({url:"/confirm_birthday",data:e}),updateBirthday:async e=>await g({url:"/update_birthday",data:e}),getFacebookShareList:e=>g.post("/web/get_facebook_page_or_group_list",e),getOpenId:async()=>await g({baseURL:"/lv/v1",url:"/web/openid"}),saveTTScope:async e=>await g({baseURL:"/lv/v1",url:"/third_party_clouds/save_tt_scope",data:e}),checkBindEmailPopup:async()=>await g({url:"/web/check_bind_email_popup"}),edmAuthorize:async e=>await g({url:"/web/edm_authorize",data:{setting_values:(null==e?void 0:e.checked)?"on":"off"}}),getUserContacts:async e=>await g({url:"/web/third_party_get_contacts",data:e}),getAuthorizedUserInfo:async e=>await g({url:"/web/authorized_user_info",data:e}),appealForUser:async(e,t)=>await g({baseURL:"/lv/v1",url:"/appeal/personal_info",data:e,headers:{...(()=>{let e={};return t?("true"===t.enableLooki&&"true"===t.enableLookiDid&&(e["looki-pseudonym-did"]="1"),"true"===t.enableLooki&&"true"===t.enableLookiUid&&(e["looki-pseudonym-uid"]="1"),e):e})()}}),getBanStatus:async e=>await g({url:"/get_ban_status",data:e,[c.R0]:{skipAwaitLocker:!0}})}},707780:function(e,t,i){"use strict";i.d(t,{_:function(){return o}});class r extends Error{constructor(e){super("Page is in background, request cancelled"),this.name="RequestCancelledError",this.url=e}}let n=(e,t)=>t.some(t=>"string"==typeof t?e===t:t.test(e)),o=(e,t)=>{e.interceptors.request.use(e=>{let{enableURL:i}=t,o="undefined"!=typeof document&&document.hidden,a=!!e.url&&n(e.url,i);return o&&a?(console.warn("Page is in background, request cancelled:",e.url),Promise.reject(new r(e.url))):e})}},324487:function(e,t,i){"use strict";i.d(t,{GU:function(){return n},UO:function(){return l},fH:function(){return o}});var r=i(603662);function n(e){if(!(0,r.EE)(e))return e;let t=e.flag&&e.cur_vip_level===r.rH.pro;return{...e,flag:null!=t&&t}}function o(e){try{var t;return JSON.parse(null!==(t=e.display_content)&&void 0!==t?t:"{}")}catch{return{}}}let a="__locationCountryCode",s="__locationInfo";function l(){try{var e,t,i;if(!window)return"US";if(window[a])return null!==(e=window[a])&&void 0!==e?e:"US";if(window[s])return null!==(i=null===(t=window[s])||void 0===t?void 0:t.code)&&void 0!==i?i:"US";return"US"}catch{return"US"}}},362783:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});let r=new Map,n=async function e(e,t){let{cacheKey:i,maxAge:n=36e5,noCache:o=!1}=t,a=r.get(i);if(!o&&a&&new Date().getTime()-a.cacheStartTime<a.maxAge)try{return await a.promise,a.promise}catch{}let s=e();return r.set(i,{promise:s,cacheStartTime:new Date().getTime(),maxAge:n}),s}},892745:function(e,t,i){"use strict";i.d(t,{R:()=>n,Z:()=>c});let r=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]),n="custom-axios-retry",o=["get","head","options"].concat(["put","delete"]);function a(e){let t=(null==e?void 0:e[n])||{canRetry:!0};return t.retryCount=t.retryCount||0,t}let s=()=>0;function l(e){var t,i;return!(t=e).response&&!!t.code&&"ECONNABORTED"!==t.code&&(i=t,!r.has(i&&i.code))||function(e){var t;if(!e.config)return!1;return"ECONNABORTED"!==(t=e).code&&(!t.response||t.response.status>=500&&t.response.status<=599)&&-1!==o.indexOf(e.config.method)}(e)}function c(e,t){return e.interceptors.request.use(e=>{let t=a(e);return t.lastRequestTime=Date.now(),e[n]=t,e}),e.interceptors.response.use(void 0,i=>{let{config:r}=i;if(!r)return Promise.reject(i);let{retries:o=5,isRetry:c=l,retryDelay:d=s,resetTimeout:u=!1}=Object.assign({},t,null==r?void 0:r[n]),p=a(r);if(c(i)&&p.canRetry&&(-1===o||p.retryCount<o)){var _,g;p.retryCount+=1;let t="number"==typeof d?d:d(p.retryCount,i);if(_=e,g=r,_.defaults.agent===g.agent&&delete g.agent,_.defaults.httpAgent===g.httpAgent&&delete g.httpAgent,_.defaults.httpsAgent===g.httpsAgent&&delete g.httpsAgent,!u&&r.timeout&&p.lastRequestTime){let e=Date.now()-p.lastRequestTime;r.timeout=Math.max(r.timeout-e-t,1)}return r.transformRequest=[e=>e],new Promise(i=>setTimeout(()=>i(e(r)),t))}return Promise.reject(i)}),e}},801410:function(e,t,i){"use strict";i.d(t,{O:function(){return o}});var r=i(998498),n=i.n(r);function o(e){let{url:t,pf:i,appvr:r,tdid:o}=e,a=Math.floor(Date.now()/1e3);return{sign:n()(`9e2c|${t.slice(-7)}|${i}|${r}|${a}|${o}|11ac`).toLowerCase(),"device-time":a}}},612649:function(e,t,i){"use strict";i.d(t,{R0:()=>p,ZP:()=>_});var r=i("93420"),n=i("454321"),o=i("582021");function a(e){var t,i;let r={url:e.baseURL&&e.url?function(e,t){var i,r,n;if(e&&(i=t,!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i))){;return r=e,(n=t)?r.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):r}return t}(e.baseURL,e.url):"",method:null==e?void 0:null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),params:"string"==typeof e.params?JSON.parse(e.params):e.params,data:"string"==typeof e.data?JSON.parse(e.data):e.data,needCommonParams:!0,responseType:null!==(i=e.responseType)&&void 0!==i?i:"json"};return o.ZP.app.fetch(r)}async function s(e){let t=await a(e);return new Promise((i,r)=>{if(1!==t.code)r(t);else try{let o={data:JSON.parse(t.data.response),status:t.data.status,config:e,request:a};!function(e,t,i){let r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(new n.d7("Request failed with status code "+i.status,[n.d7.ERR_BAD_REQUEST,n.d7.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}(i,r,o)}catch(e){r(e)}})}var l=i("306224"),c=i("970986"),d=i("472231");class u{get hasBeenDone(){return this._hasBeenDone}get costTimes(){if(!this._initCostTimes)return;let{start:e,end:t}=this._initCostTimes;return(t||Date.now())-e}get initResult(){if(!!this._hasBeenDone)return{resolve:this.resolveResult,reject:this.rejectResult}}get isIniting(){return this._isIniting}awaitForInit(){let e,t,{key:i,timeout:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._hasBeenDone&&this.initResult){let{resolve:e,reject:t}=this.initResult;return t?Promise.reject(t):Promise.resolve(e)}if(i&&this._waitingResolverMap.has("key"))return this._waitingResolverMap.get("key");if(!r){let e=new Promise((e,t)=>{this._waitingResolvers.add([e,t])});return i&&this._waitingResolverMap.set(i,e),e}let n=Promise.race([new Promise((i,r)=>{e=[()=>{clearTimeout(t),i()},r],this._waitingResolvers.add([e,r])}),new Promise((i,n)=>{t=setTimeout(()=>{this._waitingResolvers.delete(e),n(Error("Timed out waiting for init"))},r)})]);return i&&this._waitingResolverMap.set(i,n),n}startToInit(){return!this._hasBeenDone&&!this._isIniting&&(this._isIniting=!0,this._initCostTimes={start:Date.now()},!0)}initDone(e){if(this._hasBeenDone)throw Error("Cannot release an inited locker");this._initCostTimes&&(this._initCostTimes.end=Date.now());let t=!1;for(let i of((null==e?void 0:e.reject)?(t=!0,this.rejectResult=e.reject):this.resolveResult=null==e?void 0:e.resolve,this._waitingResolvers))t?i[1](this.rejectResult):i[0](this.resolveResult);this._waitingResolverMap.clear(),this._waitingResolvers.clear(),this._hasBeenDone=!0,this._isIniting=!1}constructor(){this._hasBeenDone=!1,this._isIniting=!1,this._initCostTimes=void 0,this._waitingResolvers=new Set,this._waitingResolverMap=new Map}}l.yM.CHANNEL,l.yM.APP_PF,l.yM.VERSION,l.yM.APP_SDK_VERSION;let p="custom-request-domain",_=new class e{getWebDomain(){return this._userRequestDomain.domain.web_domain}updateRequestDomain(e){if(e.domain){var t;!this._locker.hasBeenDone&&this._locker.initDone(),this._userRequestDomain={...e||{},domain:{...(null===(t=this._userRequestDomain)||void 0===t?void 0:t.domain)||{},...e.domain}}}}async baseRequestInterceptors(e){var t,i,r,n,o,a,s,l;let u=null===(t=e.baseURL)||void 0===t?void 0:t.startsWith("https");!(null==e?void 0:null===(i=e[p])||void 0===i?void 0:i.skipAwaitLocker)&&!u&&await this._locker.awaitForInit();let _=null==e?void 0:null===(r=e[p])||void 0===r?void 0:r.domain,g=((null==e?void 0:e.useCommerceApi)?c.Ii.COMMERCE:c.Ii.DEFAULT)===c.Ii.COMMERCE?null===(o=this._userRequestDomain)||void 0===o?void 0:null===(n=o.domain)||void 0===n?void 0:n.commerce_domain:d.Z?c.JX:null===(s=this._userRequestDomain)||void 0===s?void 0:null===(a=s.domain)||void 0===a?void 0:a.web_domain,h=_||g;return!u&&h&&(e.baseURL=`${_||h}${null!==(l=e.baseURL)&&void 0!==l?l:""}`),{...e,withCredentials:!0}}createAxios(e){let t=d.Z?r.Z.create({...e,adapter:s}):r.Z.create(e);return t.interceptors.request.use(this.baseRequestInterceptors.bind(this)),t}constructor(){this._locker=new u}}},598565:function(e,t,i){"use strict";i.d(t,{Z:()=>s});var r=i("772322"),n=i("827322");i("218571");var o=i("152155"),a=i.n(o);let s=e=>{let{src:t,alt:i,responsiveImageWebp:o,style:s,imgStyle:l,className:c,imgClassName:d,width:u,height:p,onClick:_,loading:g}=e,h=(null==o?void 0:o.srcSet)||(null==t?void 0:t.replace(/\.image$/,".webp"));return(0,r.jsx)("figure",{className:a()("figure",c),style:s,onClick:_,children:(0,r.jsxs)("picture",{children:[h?(0,r.jsx)("source",{srcSet:h,type:"image/webp"}):null,(0,r.jsx)("img",{className:a()("custom-image",d),src:(0,n.C)(t,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),style:l,alt:i,width:u,height:p,loading:g,crossOrigin:"anonymous"})]})})}},789962:function(e,t,i){"use strict";i.d(t,{O:()=>R});var r,n=i("772322");i("17435");var o=i("629913"),a=i("804929"),s=i("670933"),l=i("793676"),c=i("282893"),d=i("41723"),u=i.n(d),p=i("218571"),_=i("425549"),g=i("474049"),h=i("394741"),m=i("598321"),v=i("366805"),f=i("801497"),y=i("568998"),w=i("715748"),b=i("102219"),S=i("149803");class C{report(e){this._reporter.report(this._type,e)}constructor(e){this._type=e,this._reporter=(0,S.y)()}}var k=((r={}).CAPACITY_INSUFFICIENT="CAPACITY_INSUFFICIENT",r.CAPACITY_INSUFFICIENT_WITH_BUY="CAPACITY_INSUFFICIENT_WITH_BUY",r.CAPACITY_BUY="CAPACITY_BUY",r.VIP_BUY="VIP_BUY",r.MANAGEMENT="MANAGEMENT",r),E=i("800788");let I=(0,s.Pi)(e=>{var t,i,r;let{expandModalInstance:o,eventParams:a}=e,[s,d]=(0,p.useState)(!1),[_,g]=(0,p.useState)({key:"web_first_subscribe_text_upgrading",value:"Upgrade to Pro"}),h=(0,l.v)(null==o?void 0:o.getService(),e=>e.context.enableSubscription),m=async()=>{if(o)return d(await (null==o?void 0:o.isSupportExpand()));d(!1)},[v]=(0,c.L)(null==o?void 0:o.getService()),{flag:w=!1,vipRealEnd:b,canFreeTrial:S=!1,canFreeTrialDays:C=7}=(null==v?void 0:null===(i=v.context)||void 0===i?void 0:null===(t=i.userInfo)||void 0===t?void 0:t.vipInfo)||{};(0,p.useEffect)(()=>{m(),!w&&S&&g({key:"web_first_subscribe_text_conditional_seven_day",value:`${C}-day free trial`})},[w,b,S]);let E=()=>{let e=k.VIP_BUY;w&&(e=k.MANAGEMENT),null==o||o.show({type:e,reporterParams:{pageFrom:"profile_icon_upgrade",...a}})};return(w||h&&s)&&(null==v?void 0:null===(r=v.context)||void 0===r?void 0:r.userInfo)?(0,n.jsx)("div",{className:"lv-vip-entry",children:w?(0,n.jsxs)("div",{onClick:E,className:"lv-vip-card",children:[(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)("div",{className:"name",children:f.ZP.t("web_first_subscribe_text_Cap_cut",{},"CapCut")}),(0,n.jsxs)("div",{className:"time",children:[(0,n.jsx)(y.qSk,{}),(0,n.jsx)("span",{style:{marginLeft:4},children:b?u()(1e3*b).format("YYYY/MM/DD"):"--/-/-"})]})]}),(0,n.jsx)(y.NeZ,{className:"arrow"})]}):(0,n.jsxs)("div",{onClick:E,className:"lv-notVip-card",children:[(0,n.jsxs)("div",{className:"left",children:[(0,n.jsx)(y.t7E,{className:"icon"}),(0,n.jsx)("div",{className:"line"}),(0,n.jsx)("div",{style:{color:"#000000"},children:f.ZP.t(_.key,{number0:C},_.value)})]}),(0,n.jsx)(y.NeZ,{className:"arrow"})]})}):null});function P(e,t){let i=function(e,t){let i=(0,_.uA)(t);switch(i){case g._.NotVip:return{action:e,action_type:"join_pro",user_subscribe_type:"free",user_type:"unsubscribed_user"};case g._.ProVipExpired:case g._.StandardVipExpired:return{action:e,action_type:"renew",user_subscribe_type:"free",user_type:"expired"};case g._.ProVip:case g._.StandardVip:return{action:e,action_type:"renew",user_subscribe_type:i===g._.ProVip?"svip":"vip",user_type:"subscribed_user"};default:(0,E.bP)(i)}}(e,t);if(!!i)new C("profile_vip_icon").report(i)}let A=(0,s.Pi)(e=>{var t,i,r,s,d,m,S,C,E,I,A,R,x,N,L,O,M;let{expandModalInstance:D,eventParams:j}=e,[F,U]=(0,a.default)(),[B,H]=(0,p.useState)(!1),[G,W]=(0,p.useState)({key:"web_first_subscribe_text_upgrading",value:"Upgrade to Pro"}),V=(0,w.x)(b.a),Z=(0,l.v)(null==D?void 0:D.getService(),e=>e.context.enableSubscription),z=async()=>{if(D)return H(await (null==D?void 0:D.isSupportExpand()));H(!1)},[$]=(0,c.L)(null==D?void 0:D.getService()),{flag:K=!1,vipRealEnd:q,canFreeTrial:Y=!1,canFreeTrialDays:J=7}=(null==$?void 0:null===(i=$.context)||void 0===i?void 0:null===(t=i.userInfo)||void 0===t?void 0:t.vipInfo)||{},Q=(0,l.v)(null==D?void 0:D.getService(),e=>{var t;return null===(t=e.context.userInfo)||void 0===t?void 0:t.vipInfo}),X=(0,l.v)(null==D?void 0:D.getService(),e=>{var t;return(0,v.GM)(null===(t=e.context.vipSubscribeInfo)||void 0===t?void 0:t.subscription_infos)}),ee=(0,_.en)(Q);(0,p.useEffect)(()=>{z(),!ee&&Y&&W({key:"web_first_subscribe_text_conditional_seven_day",value:`${J}-day free trial`})},[ee,q,Y]);let et=V?{...V,IconComponent:null}:Q&&function(e,t){let i=(0,_.uA)(e),{content:r,IconComponent:o,clickAction:a,cardType:s="card"}=(()=>{switch(i){case g._.ProVip:var r,o;if((0,_.Uv)(e)){let i=null!==(r=null==t?void 0:t.next_renew_time)&&void 0!==r?r:e.vipRealEnd;return{content:f.ZP.t("web_already_pro_renew_date",{date:i?u()(1e3*i).format("YYYY/MM/DD"):"--/-/-"},"Renews on {date}"),IconComponent:(0,n.jsx)(h.ZN,{type:"pro",size:"medium",withTick:!0,withText:!0}),clickAction:"subscribe_info"}}{let{isAboutToExpired:t,restDays:i}=null!==(o=(0,_.gI)(e))&&void 0!==o?o:{};if(t)return{content:f.ZP.t("web_pro_benefits_will_expire_days",{days:i,num:i},"Your Pro benefits will expire in {days} days"),IconComponent:(0,n.jsx)(h.ZN,{type:"pro",size:"medium",withTick:!0,withText:!0}),clickAction:"product_info"};return{content:f.ZP.t("web_oneoff_pro_renew_date",{date:`${e.vipRealEnd?u()(1e3*e.vipRealEnd).format("YYYY/MM/DD"):"--/-/-"}`},"Expires on {date}"),IconComponent:(0,n.jsx)(h.ZN,{type:"pro",size:"medium",withTick:!0,withText:!0}),clickAction:"product_info"}}case g._.ProVipExpired:let a=(0,_.PT)(e);return{content:f.ZP.t("web_pro_benefits_expired_days",{days:a,num:a},"Your Pro benefits have expired for {days} days"),IconComponent:(0,n.jsx)(h.ZN,{type:"pro",size:"medium",withText:!0,isExpired:!0}),clickAction:"product_info"};case g._.StandardVip:return{content:f.ZP.t("web_logged_standard_user_upgrade_desc",{},"Upgrade to unlock Pro benefits on web app"),IconComponent:(0,n.jsx)(h.ZN,{type:"standard",size:"medium",withTick:!0,withText:!0}),clickAction:"product_info"};case g._.StandardVipExpired:case g._.NotVip:default:return{content:f.ZP.t("web_not_member_upgrade_btn",{},"Upgrade"),clickAction:"product_info",cardType:"button"}}})();return{cardType:s,IconComponent:o,banner:{content:r,clickAction:a},bannerBackground:"card"===s?void 0:{backgroundType:"background-gradient-color",backgroundGradientColor:"radial-gradient(101.9% 414.19% at 100% 18.75%, #c08aff 0%, #a3e7ff 100%)"}}}(Q,X),ei=()=>{let e=null==et?void 0:et.banner.clickAction;if(Q&&P("click",Q),"subscribe_info"===e){null==D||D.show({type:k.MANAGEMENT,reporterParams:{pageFrom:"profile_icon_upgrade",...j}});return}null==D||D.show({type:k.VIP_BUY,reporterParams:{pageFrom:"profile_icon_upgrade",...j}})};return((0,p.useEffect)(()=>{if(null==Q?!void 0:!Q.__isDefault__)U&&Q&&P("show",Q)},[U,Q]),et)?"button"===et.cardType?(0,n.jsx)("div",{className:"lv-vip-entry",ref:F,children:(0,n.jsx)(o.Z,{content:null==et?void 0:null===(A=et.banner)||void 0===A?void 0:A.content,position:"bottom",children:(0,n.jsx)("div",{className:"lv-notVip-card--new",style:{backgroundColor:null==et?void 0:null===(R=et.bannerBackground)||void 0===R?void 0:R.backgroundColor,backgroundImage:(null==et?void 0:null===(x=et.bannerBackground)||void 0===x?void 0:x.backgroundType)==="background-image"?`url(${null==et?void 0:null===(N=et.bannerBackground)||void 0===N?void 0:N.backgroundImageSrc})`:null==et?void 0:null===(L=et.bannerBackground)||void 0===L?void 0:L.backgroundGradientColor,color:null==et?void 0:null===(O=et.banner)||void 0===O?void 0:O.contentTextColor},onClick:ei,children:et.banner.content})})}):(ee||Z&&B)&&(null==$?void 0:null===(r=$.context)||void 0===r?void 0:r.userInfo)?(0,n.jsx)("div",{className:"lv-vip-entry",ref:F,children:(0,n.jsxs)("div",{onClick:ei,className:"lv-vip-card--new",style:{backgroundColor:null==et?void 0:null===(s=et.bannerBackground)||void 0===s?void 0:s.backgroundColor,backgroundImage:(null==et?void 0:null===(d=et.bannerBackground)||void 0===d?void 0:d.backgroundType)==="background-image"?`url(${null===(m=et.bannerBackground)||void 0===m?void 0:m.backgroundImageSrc})`:null===(S=et.bannerBackground)||void 0===S?void 0:S.backgroundGradientColor,color:null===(C=et.banner)||void 0===C?void 0:C.contentTextColor},children:[(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)("div",{className:"name-new",children:null!==(M=et.IconComponent)&&void 0!==M?M:(0,n.jsx)("img",{src:et.banner.vipIcon,crossOrigin:"anonymous"})}),(0,n.jsx)("div",{className:"time",children:(0,n.jsx)("div",{style:{color:null==et?void 0:null===(E=et.banner)||void 0===E?void 0:E.contentTextColor},children:null==et?void 0:null===(I=et.banner)||void 0===I?void 0:I.content})})]}),(0,n.jsx)(y.NeZ,{className:"arrow"})]})}):null:null}),R=e=>(0,m.i)()?(0,n.jsx)(A,{...e}):(0,n.jsx)(I,{...e})},215915:function(e,t,i){"use strict";i.d(t,{F:()=>S});var r=i("772322");i("966156"),i("225572");var n=i("368100"),o=i("97257");i("218571");var a=i("801497"),s=i("827322");let l=i.p+"static/image/max-size-image.7398cc72.png",c=()=>{let e=a.ZP.t("ccug_web2desktop_upldPopup_title",{},"Handle large files easily on desktop"),t=a.ZP.t("ccug_web2desktop_upldPopup_sub",{},"This may take a while to upload. For faster uploads and exports, try our desktop app.");return(0,r.jsxs)("div",{className:"max-size-modal-container",children:[(0,r.jsx)("img",{className:"max-size-modal-image",src:(0,s.C)(l,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),alt:"max size image"}),(0,r.jsxs)("div",{className:"max-size-modal-content",children:[(0,r.jsx)("div",{className:"max-size-modal-title",children:e}),(0,r.jsx)("div",{className:"max-size-modal-description",children:t})]})]})};var d=i("77695"),u=i("406617"),p=i("733458"),_=i("392417"),g=i("258062"),h=i("149803");let m=e=>new Promise(t=>{n.Z.info({className:"max-size-modal",icon:null,title:null,closable:!1,escToExit:!1,maskClosable:!1,wrapStyle:{zIndex:1e5},afterOpen:()=>{new _.n().report({action:"show",current_page:"editor",position:"import_popup"})},onCancel:()=>{new _.n().report({action:"close",current_page:"editor",position:"import_popup"})},footer:(0,r.jsxs)("div",{className:"max-size-modal-bottom",children:[(0,r.jsx)(o.Z,{className:"max-size-modal-button",onClick:()=>{t(!0),n.Z.destroyAll(),new _.n().report({action:"close",current_page:"editor",position:"import_popup"})},children:a.ZP.t("ccug_web2desktop_upldPopup_btn1",{},"Continue uploading")}),(0,r.jsx)(o.Z,{className:"max-size-modal-button",type:"primary",onClick:async()=>{t(!1),n.Z.destroyAll(),new _.n().report({action:"click_to_download",current_page:"editor",position:"import_popup"});let{installer:i}=await (0,d.R0)(e);new g.eG().report({channel:e?g.io.MAC_INSTALLER:g.io.WIN_INSTALLER,position:"import_popup",current_page:"editor",download_url:i,url:i}),i&&(0,d.io)(i,e)},children:a.ZP.t("ccug_web2desktop_upldPopup_btn2",{},"Download for desktop")})]}),content:(0,r.jsx)(c,{})})}),v="UPLOAD_MAX_SIZE_MODAL",f=e=>new Date().getTime()-e>12096e5,y=()=>{let e=(0,u.ZJ)();return!!(null==e?void 0:e.isMac)||!!(null==e?void 0:e.isWin)},w=async()=>[1,3].includes((await (0,h.y)().getABTestConfigSilent("capcut_web_diversion_pc",{ab_group:0})).ab_group),b=async()=>{var e;let t=await m(null===(e=(0,u.ZJ)())||void 0===e?void 0:e.isMac);return p.m.setString(v,new Date().getTime().toString()),t},S=async e=>!(await w()&&f(Number(p.m.getString(v)||"0"))&&y())||(!(e.reduce((e,t)=>e+t.size,0)>0x5a00000)||!!await b())&&!0},725071:function(e,t,i){"use strict";i.d(t,{DE:function(){return n},GW:function(){return o},ZM:function(){return l},pk:function(){return s},t0:function(){return a},xF:function(){return r}});let r=4,n=11,o=13,a=14,s=51,l=130},709451:function(e,t,i){"use strict";function r(e){let t=[];return(null==e?void 0:e.region)&&t.push(`store_region=${e.region.toLowerCase()}`),(null==e?void 0:e.lang)&&t.push(`lang=${e.lang.toLowerCase()}`),t.length>0?`?${t.join("&")}`:""}function n(e){return"/clause/terms-of-service"+r(e)}function o(e){return"/clause/privacy-policy"+r(e)}function a(e){return"/clause/cookies-policy"+r(e)}function s(e){return"/clause/community-guideline"+r(e)}function l(e){return"/clause/australian-online-safety"+r(e)}function c(e){return"/clause/material-license-agreement"+r(e)}function d(e){return"/clause/creator-agreement"+r(e)}function u(e){return"/clause/dsa-compliance-capcut"+r(e)}i.d(t,{FH:function(){return o},Mj:function(){return s},Oi:function(){return n},Or:function(){return c},Yh:function(){return l},cf:function(){return u},n$:function(){return d},ok:function(){return a}})},394567:function(e,t,i){"use strict";i.d(t,{B:()=>c});var r,n,o,a=((r={})[r.TASK_CANNOT_BE_CANCELED=200400]="TASK_CANNOT_BE_CANCELED",r[r.TASK__NOT_EXIST_1=200402]="TASK__NOT_EXIST_1",r[r.TASK__NOT_EXIST_2=1e3]="TASK__NOT_EXIST_2",r);var s=((n={})[n.ERR_CTEATE_WORKSPACE_OVER_MAX_SIZE=2312]="ERR_CTEATE_WORKSPACE_OVER_MAX_SIZE",n[n.ERR_Hit_Sensitive_Word=2334]="ERR_Hit_Sensitive_Word",n);var l=((o={})[o.ERR_UPLOAD_LINK_NOT_EXIST=2341]="ERR_UPLOAD_LINK_NOT_EXIST",o);let c={EVER_CLOUD:{BELOW_VERSION:40008,INSUFFICIENT_SPACE:20113,INVALID_IDC:1037},WEB_CUSTOME_CODE:{ASSET_TRANSCODE_FAIL:-11001},NO_SIGN_UPLOAD:{ACCESS_TIME_LIMIT:"200201",SOURCE_IS_OVERTIME:"200202",VIDEO_TRANSCODE_FAIL:"4010"},COMMENT:{Err_NoCommentPermission:2363,Err_CommentPublishFailed:2364,Err_CommentPublishFailedDuplication:2365,Err_CommentPublishingProhibited:2366,Err_CommentPublishFailedRateLimit:2367,Err_CommentPublishFailedRiskControl:2368,Err_CommentDeletionFailed:2369,Err_DeletionFailedNoPermission:2370,Err_CommentListFetchFailed:2371,Err_ShareToGroupMermberFailed:2372},FILM_CODE:a,COMMERCE:{ALREADY_SUBSCRIBE_USER:"34010104"},SIGN_UP_CODE:{SEND_CODE_ERROR_CODE:{SENDING_FREQUENTLY:1206,EMAIL_ERROR:1044},REGISTER_ERROR_CODE:{CODE_WRONG:1704,CODE_EXPIRED:1703,LINKED_EMAIL:1023},LOGIN_ERROR_CODE:{PASSWORD_WRONG:1009,USER_NOT_EXITE:1011,USER_ACCOUNT_CANCEL:1075}},USER_CODE:{NO_LOGIN:1015},CREATE_WORKSPACE_CODE:s,PIPO:{REFRESH_USER_SPACE_FAILURE:"34100001"},WORKSPACE_UPLOAD_LINK_CODE:l,GROUP:{INVITATION_LINK_REFRESH_TOO_FAST:1270,USER_NOT_IN_GROUP:1363,CREATE_GROUP_TOO_FAST:1269,EXCEEDED_CREATE_GROUPS_MAX_LIMIT:1287,EXCEEDED_USER_GROUPS_MAX_LIMIT:1299,INVITATION_LINK_EXPIRED:1267,ADD_GROUP_TOO_FAST:1268,EXCEEDED_GROUP_MEMBERS_MAX_LIMIT:1280,REPEAT_ADD_GROUP:1286,INVITATION_LINK_ERROR:1367,SHARE_LINK_EXPIRED:1450,GROUP_APPLY_LIMIT:1463,SAME_GROUP_APPLY_LIMIT:1464,GROUP_APPLY_PENDING:1468,GROUP_APPLY_NOT_ALLOW:1469,GROUP_APPLY_PASSED:1286,APPLY_APPROVE_NO_AUTH:1292,NOT_IN_GROUP:1291,APPROVAL_PROCESSED:1467,GROUP_MEMBER_FULL:1280,APPROVAL_EXPIRED:1470},SHARE:{FILE_NO_ACCESS:"2317",FILE_NOT_FOUND:"2345",FILE_BANNED:"2360",SHARE_INFO_NOT_FOUND:"2361",FILE_UPLOADING:"2386",ERROR_GET_SHARED_INFO:"2377"},AUTHORIZED:{GOOGLE_UNAUTHORIZED:1904},SHARE_ERROR_CODE:i("307305").K}},307305:function(e,t,i){"use strict";i.d(t,{K:function(){return n}});var r,n=((r={}).noNormalVideo="fe-200000",r.onlyOneShare="200205",r.fileNotExit="2360",r.fileNotFound="2345",r.fileUnderReviewVisitLimit="2390",r.getFileFailed="2350",r.shareNotExit="2361",r.shareOff="2348",r.notLogin="1015",r.maxVisitors="200212",r.passwordError="2349",r.noVersion="noVersion",r.notCluster="notCluster",r.needIdentifyingCode="2362",r.noAllowJoin="2306",r)},970986:function(e,t,i){"use strict";i.d(t,{Ee:function(){return r},Ii:function(){return o},JX:function(){return c},Vj:function(){return u},hF:function(){return d}});let r="_____________";var n,o=((n={}).DEFAULT="DEFAULT",n.COMMERCE="COMMERCE",n.FRONTIER="FRONTIER",n.TTS="TTS",n);let a={DEFAULT:{VA:`https://capcut-os-boe.${r}`},COMMERCE:{VA:`https://capcut-os-boe.${r}`},FRONTIER:{VA:`wss://capcut-os-boe.${r}`},TTS:{VA:`wss://capcut-os-boe.${r}`}},s={DEFAULT:{VA:`https://capcut-web-va.${r}`},COMMERCE:{VA:`https://commerce-api-va.${r}`},FRONTIER:{VA:`wss://capcut-web-va.${r}`},TTS:{VA:`wss://capcut-web-va.${r}`}},l={DEFAULT:{VA:"https://edit-api-va.capcut.com"},COMMERCE:{VA:"https://commerce-api-va.capcut.com"},FRONTIER:{VA:"wss://frontier-va.capcut.com"},TTS:{VA:"wss://edit-api-va.capcut.com"}},c="https://mweb-api.capcutapi.com",d=()=>{let e;let t=window.location.host.startsWith("capcut-os-boe."),i=window.location.host.startsWith("capcut-os.");if(t)e={web_domain:a.DEFAULT.VA,frontier_domain:a.FRONTIER.VA,commerce_domain:a.COMMERCE.VA,tts_domain:a.TTS.VA};else{let t=i?s.DEFAULT:l.DEFAULT,r=i?s.FRONTIER:l.FRONTIER,n=i?s.COMMERCE:l.COMMERCE,o=i?s.TTS:l.TTS;e={web_domain:t.VA,frontier_domain:r.VA,commerce_domain:n.VA,tts_domain:o.VA}}return e},u={tea:"mcs-va.capcutapi.com",ttwid:"ttwid-va.capcutapi.com",slardar:"mon-va.capcutapi.com",mssdk:"mssdk-va.capcutapi.com",vcs:"vcs-va.capcutapi.com",starling:"starling-va.capcutapi.com",libra:"vmweb-va.capcutapi.com",feelgood:"feed-api-va.capcutapi.com",vcloud:"vod-va.capcutapi.com",imagex:"imagex-va.capcutapi.com"}},472231:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});let r="object"==typeof navigator&&/(capcut.*lv\/([\d+.]+)|lv\/([\d+.]+).*capcut)/i.test(navigator.userAgent)},957104:function(e,t,i){"use strict";i.d(t,{g:function(){return r}});let r={RECENT_LIST_FILE_TYPE:"RECENT_LIST_FILE_TYPE",RECENT_LIST_VIEW_TYPE:"RECENT_LIST_VIEW_TYPE",LIST_VIEW_TYPE:"LIST_VIEW_TYPE",LIST_DISPLAY_TYPE:"LIST_DISPLAY_TYPE",LIST_SORT_BY:"LIST_SORT_BY",RECYCLE_LIST_SORT_BY:"RECYCLE_LIST_SORT_BY",LIST_SORT_DIRECTION:"LIST_SORT_DIRECTION",RECYCLE_LIST_SORT_DIRECTION:"RECYCLE_LIST_SORT_DIRECTION",COOKIE_CONSENT_PROMPT_CONFIG:"COOKIE_CONSENT_PROMPT_CONFIG",THIRTPARTY_FEEDBACK:"THIRTPARTY_FEEDBACK",LV_TASK_CENTER:"LV_TASK_CENTER",THIRDPARTY_CLOUD_AUTH:"THIRDPARTY_CLOUD_AUTH",SURVEY_OPEN:"SURVEY_OPEN",CLOUD_STORAGE_PAYMENT_AND_BINDING:"CLOUD_STORAGE_PAYMENT_AND_BINDING",THIRDPARTY_SHARE_AUTH:"undefined"!=typeof window&&window._IS_FOR_BUSINESS?"PLATFORM_BUSINESS_THIRDPARTY_CLOUD_AUTH":"THIRDPARTY_SHARE_AUTH",CAPCUT_THEME:"CAPCUT_THEME",CAPCUT_TEMPLATE_VIDEO_VOLUME:"CAPCUT_TEMPLATE_VIDEO_VOLUME",GUIDE_FROM_TEAM_INVITE:"GUIDE_FROM_TEAM_INVITE",GUIDE_FROM_SIGN_UP:"GUIDE_FROM_SIGN_UP",COMPREHENSIVE_SEARCH_HISTORY:"COMPREHENSIVE_SEARCH_HISTORY",CC_WEB_IM_CONFIG:"CC_WEB_IM_CONFIG",LOGIN_TYPE_FOR_FIRST_LOGIN_NOTICE:"LOGIN_TYPE_FOR_FIRST_LOGIN_NOTICE",FACEBOOK_AUTH_STORAGE:"FACEBOOK_AUTH_STORAGE",CAPCUT_WORKSPACE_TTS_TCC_CONFIG:"CAPCUT_TTS_TCC_CONFIG",CAPCUT_CATEGORY_AND_VOICE_LIST_STORAGE:"CAPCUT_CATEGORY_AND_VOICE_LIST_STORAGE"}},506464:function(e,t,i){"use strict";i.d(t,{Gp:function(){return s},IG:function(){return a},gE:function(){return n},zE:function(){return r}});let r={Indonesian:{key:"id-ID",pathPrefix:"id-id",disable:!1,matcher:/^id/,text:"Bahasa Indonesia"},German:{key:"de-DE",pathPrefix:"de-de",disable:!1,matcher:/^de/,text:"Deutsch"},English:{key:"en",pathPrefix:"",disable:!1,matcher:/^en/,text:"English"},Spanish:{key:"es-LA",pathPrefix:"es-es",disable:!1,matcher:/^es/,text:"Espa\xf1ol"},French:{key:"fr-FR",pathPrefix:"fr-fr",disable:!1,matcher:/^fr/,text:"Fran\xe7ais"},italian:{key:"it-IT",pathPrefix:"it-it",disable:!1,matcher:/^it/,text:"Italiano"},Malay:{key:"ms-MY",pathPrefix:"ms-my",disable:!1,matcher:/^ms/,text:"Melayu"},Dutch:{key:"nl-NL",pathPrefix:"nl-nl",disable:!1,matcher:/^nl/,text:"Nederlands"},Polish:{key:"pl-PL",pathPrefix:"pl-pl",disable:!1,matcher:/^pl/,text:"Polski"},Portuguese:{key:"pt-BR",pathPrefix:"pt-br",disable:!1,matcher:/^pt/,text:"Portugu\xeas"},Romanian:{key:"ro-RO",pathPrefix:"ro-ro",disable:!1,matcher:/^ro/,text:"Rom\xe2n\u0103"},Swedish:{key:"sv-SE",pathPrefix:"sv-se",disable:!1,matcher:/^sv/,text:"Svenska"},Filipino:{key:"fil-PH",pathPrefix:"tl-ph",disable:!1,matcher:/^(tl|fil)/,text:"Tagalog"},vietnamese:{key:"vi-VN",pathPrefix:"vi-vn",disable:!1,matcher:/^vi/,text:"Ti\u1EBFng Vi\u1EC7t"},Turkey:{key:"tr-TR",pathPrefix:"tr-tr",disable:!1,matcher:/^tr/,text:"T\xfcrk\xe7e"},Thai:{key:"th-TH",pathPrefix:"th-th",disable:!1,matcher:/^th/,text:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22"},Japan:{key:"ja-JP",pathPrefix:"ja-jp",disable:!1,matcher:/^ja/,text:"\u65E5\u672C\u8A9E"},TraditionalChinese:{key:"zh-Hant-TW",pathPrefix:"zh-tw",disable:!1,matcher:/^(zh-hant|zh-tw)/,text:"\u7E41\u9AD4\u4E2D\u6587"},Korea:{key:"ko-KR",pathPrefix:"ko-kr",disable:!1,matcher:/^ko/,text:"\uD55C\uAD6D\uC5B4"}};({...r});let n=Object.values(r).reduce((e,t)=>(t.pathPrefix&&(e[t.key]=t.pathPrefix),e),{});r.Portuguese,r.Portuguese,r.Portuguese,r.Portuguese,r.Portuguese,r.Portuguese,r.Spanish,r.Portuguese,r.Portuguese,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.Spanish,r.German,r.German,r.German,r.German,r.German,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.French,r.Japan,r.Korea,r.Korea,r.Turkey,r.Turkey,r.Turkey,r.italian,r.italian,r.italian,r.Thai,r.Indonesian,r.vietnamese,r.Filipino,r.Malay,r.Malay;let o={AT:{needCookieBanner:!0},BE:{needCookieBanner:!0},BG:{needCookieBanner:!0},HR:{needCookieBanner:!0},CY:{needCookieBanner:!0},CZ:{needCookieBanner:!0},DE:{needCookieBanner:!0},DK:{needCookieBanner:!0},EE:{needCookieBanner:!0},FI:{needCookieBanner:!0},FR:{needCookieBanner:!0},GB:{needCookieBanner:!0},GR:{needCookieBanner:!0},EL:{needCookieBanner:!0},HU:{needCookieBanner:!0},IE:{needCookieBanner:!0},IT:{needCookieBanner:!0},LV:{needCookieBanner:!0},LT:{needCookieBanner:!0},LU:{needCookieBanner:!0},MT:{needCookieBanner:!0},NL:{needCookieBanner:!0},PL:{needCookieBanner:!0},PT:{needCookieBanner:!0},RO:{needCookieBanner:!0},SK:{needCookieBanner:!0},SI:{needCookieBanner:!0},ES:{needCookieBanner:!0},SE:{needCookieBanner:!0},NO:{needCookieBanner:!0},IS:{needCookieBanner:!0},LI:{needCookieBanner:!0},UK:{needCookieBanner:!0},CH:{needCookieBanner:!0},TR:{needCookieBanner:!0}},a=e=>{var t;if(!e)return!0;let{needCookieBanner:i}=null!==(t=o[e])&&void 0!==t?t:{needCookieBanner:!1};return!!i},s="es-ES"},496171:function(e,t,i){"use strict";i.d(t,{B:function(){return n}});var r,n=((r={}).LandingPage="landing_page",r.DetailPage="detail_page",r.Editor="editor",r.WorkSpace="work_space",r.IntegrationPage="integration_page",r.ArticlePage="article_page",r.ArticleGroupPage="article_group_page",r.ExportPage="export_page",r.TowardsPage="towards_page",r.UGTemplateDetail="towards_page_template_detail",r.HashtagPage="hashtag_page",r.CategoryPage="category_page",r.TemplatePage="template_page",r.CreatorPage="creator_page",r.UGArticlePage="ug_article_page",r.TemplateDetailPage="template_detail_page",r.EDMPage="edm_page",r.TemplateEditor="template_editor",r.PictureEdit="picture_edit",r.SmartToolPage="smart_tool_page",r.ActivityMur101="mur101",r.ActivityMur103="mur103",r.SharePage="share_page",r.PersonalPage="personal_page",r.KocR1PC="koc_r1_pc",r)},306224:function(e,t,i){"use strict";i.d(t,{AF:function(){return o},_S:function(){return s},b7:function(){return l},yM:function(){return a}});var r,n=i(709451);let o=348188,a={APP_NAME:"cc_web",APP_ID:`${o}`,APP_PF:"7",CHANNEL:"va",LAN:"en",B_ID:"cc_web",VERSION:"5.8.0",APP_SDK_VERSION:"48.0.0",USER_AGREEMENT:"",CC4B_PAGE:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return"https://www.capcut.com/business/campaign/commercepro-early-bird-recruitment"},PRIVACY_POLICY:e=>(0,n.FH)(e),GOOGLE_PRIVACY_POLICY:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";switch(e){case"tr-TR":return"https://marketingplatform.google.com/about/analytics/terms/tr/";case"ko-KR":return"https://marketingplatform.google.com/about/analytics/terms/kr/";case"ja-JP":return"https://marketingplatform.google.com/about/analytics/terms/jp/";case"pt-BR":return"https://marketingplatform.google.com/about/analytics/terms/br/";case"es-LA":return"https://marketingplatform.google.com/about/analytics/terms/es/";case"fr-FR":return"https://marketingplatform.google.com/about/analytics/terms/fr/";case"de-DE":return"https://marketingplatform.google.com/about/analytics/terms/de/";case"it-IT":return"https://marketingplatform.google.com/about/analytics/terms/it/";case"th-TH":return"https://marketingplatform.google.com/about/analytics/terms/th/";case"id-ID":return"https://marketingplatform.google.com/about/analytics/terms/id/";case"vi-VN":return"https://marketingplatform.google.com/about/analytics/terms/vn/";case"fil-PH":case"tl-PH":return"https://marketingplatform.google.com/about/analytics/terms/ph/";default:return"https://marketingplatform.google.com/about/analytics/terms/us/"}},TERMS_OF_CAPCUT:e=>(0,n.Oi)(e),COOKIE_POLICY:e=>(0,n.ok)(e),MATERIALS_POLICY:e=>(0,n.Or)(e),CREATOR_AGREEMENT:e=>(0,n.n$)(e),COMMUNITY_GUIDELINE:e=>(0,n.Mj)(e),AUSTRALIAN_ONLINE_SAFETY:e=>(0,n.Yh)(e),DSA_COMPLIANCE:e=>(0,n.cf)(e)};var s=((r={})[r.commerce=573081]="commerce",r[r.inspireVid=578169]="inspireVid",r[r.packPic=578251]="packPic",r[r.speech=581541]="speech",r[r.dreamina=513641]="dreamina",r[r.capcut=348188]="capcut",r);let l={commerce:{aid:573081},inspireVid:{aid:578169},packPic:{aid:578251},speech:{aid:581541},dreamina:{aid:513641}}},216158:function(e,t,i){"use strict";i.d(t,{_s:function(){return s},ie:function(){return l},mc:function(){return c},sk:function(){return d},yp:function(){return a}});var r,n,o,a=((r={}).US="US",r.BR="BR",r.SG="SG",r.KR="KR",r.ID="ID",r.GB="GB",r.CA="CA",r.AU="AU",r.NZ="NZ",r.AT="AT",r.BE="BE",r.BG="BG",r.HR="HR",r.CY="CY",r.CZ="CZ",r.DK="DK",r.EE="EE",r.FI="FI",r.FR="FR",r.DE="DE",r.GR="GR",r.HU="HU",r.IS="IS",r.IE="IE",r.IT="IT",r.LV="LV",r.LI="LI",r.LT="LT",r.LU="LU",r.MT="MT",r.NL="NL",r.NO="NO",r.PL="PL",r.PT="PT",r.RO="RO",r.SK="SK",r.SI="SI",r.ES="ES",r.SE="SE",r.IL="IL",r.PS="PS",r.TW="TW",r.HK="HK",r.MO="MO",r);var s=((n={})[n.VA=0]="VA",n[n.GCP=1]="GCP",n[n.SG=2]="SG",n);var l=((o={}).VA="maliva",o.GCP="useast2a",o.SG="sg1",o);let c={1:"gcp",0:"va"},d=6115047},287272:function(e,t,i){"use strict";i.d(t,{l:function(){return r}});let r={HOME:{PATH:"/",LOCALE_PATH:"/:locale/",MATCHER:"/:locale*/",HAS_LOCALE_PREFIX:!0,INDEXING:!0},CREATIVE_SUITE:{PATH:"/creative-suite",LOCALE_PATH:"/:locale/creative-suite",MATCHER:"/:locale*/creative-suite",HAS_LOCALE_PREFIX:!0,INDEXING:!0},APPEAL_PAGE:{PATH:"/appeal-age-restriction",LOCALE_PATH:"/appeal-age-restriction",MATCHER:"/appeal-age-restriction",HAS_LOCALE_PREFIX:!1},WORKSPACE:{CHILD:{MY_DRAFT:{NAME:"my_draft",PATH:"/my-edit",LOCALE_PATH:"/my-edit",MATCHER:"/my-edit",HAS_LOCALE_PREFIX:!1},TEMPLATE:{NAME:"templates",PATH:"/templates",LOCALE_PATH:"/templates",MATCHER:"/templates",HAS_LOCALE_PREFIX:!1},TEMPLATE_DETAIL:{PATH:"/templates/:id",LOCALE_PATH:"/templates/:id",MATCHER:"/templates/:id",HAS_LOCALE_PREFIX:!1,MENU_ACTIVE_KEY:"TEMPLATE"},MAGIC_TOOLS:{NAME:"magic_tools",PATH:"/magic-tools",LOCALE_PATH:"/magic-tools",MATCHER:"/magic-tools",HAS_LOCALE_PREFIX:!1},RECENT_LISTS:{NAME:"recent",PATH:"/recent-list",LOCALE_PATH:"/recent-list",MATCHER:"/recent-list",HAS_LOCALE_PREFIX:!1},VOICE_LISTS:{NAME:"ai_asset_hub",PATH:"/voice-list",LOCALE_PATH:"/voice-list",MATCHER:"/voice-list",HAS_LOCALE_PREFIX:!1},AI_AVATARS:{NAME:"ai_avatars",PATH:"/ai_avatars",LOCALE_PATH:"/ai_avatars",MATCHER:"/ai_avatars",HAS_LOCALE_PREFIX:!1,MENU_ACTIVE_KEY:"VOICE_LISTS"},AI_SEARCH_RESULTS:{NAME:"ai-search-results",PATH:"/ai-search-results",LOCALE_PATH:"/ai-search-results",MATCHER:"/ai-search-results",HAS_LOCALE_PREFIX:!1,MENU_ACTIVE_KEY:"VOICE_LISTS"},MY_FILM:{NAME:"my_file",PATH:"/my-film",LOCALE_PATH:"/my-film",MATCHER:"/my-film",HAS_LOCALE_PREFIX:!1},MY_CLOUD:{NAME:"my_cloud",PATH:"/my-cloud",LOCALE_PATH:"/my-cloud",MATCHER:"/my-cloud",HAS_LOCALE_PREFIX:!1},WORKSPACE_CLOUD:{NAME:"my_cloud",PATH:"/my-cloud/:id",LOCALE_PATH:"/my-cloud/:id",MATCHER:"/my-cloud/:id",HAS_LOCALE_PREFIX:!1},WORKSPACE_CLOUD_TRASH:{NAME:"my_cloud_trash",PATH:"/my-cloud/:id/trash",LOCALE_PATH:"/my-cloud/:id/trash",MATCHER:"/my-cloud/:id/trash",HAS_LOCALE_PREFIX:!1,MENU_ACTIVE_KEY:"WORKSPACE_CLOUD"},WORKSPACE_BRAND_LIBRARY:{NAME:"brand_library",PATH:"/my-cloud/:id/brand-library",LOCALE_PATH:"/my-cloud/:id/brand-library",MATCHER:"/my-cloud/:id/brand-library",HAS_LOCALE_PREFIX:!1,MENU_ACTIVE_KEY:"WORKSPACE_CLOUD"},MY_SHARE:{NAME:"share_records",PATH:"/my-share",LOCALE_PATH:"/my-share",MATCHER:"/my-share",HAS_LOCALE_PREFIX:!1},PUBLISH_CALENDAR:{NAME:"publish_calendar",PATH:"/publish-calendar",LOCALE_PATH:"/publish-calendar",MATCHER:"/publish-calendar",HAS_LOCALE_PREFIX:!1,MENU_ACTIVE_KEY:"MY_SHARE"},PROFILE:{NAME:"profile",PATH:"/profile",LOCALE_PATH:"/profile",MATCHER:"/profile",HAS_LOCALE_PREFIX:!1},SEARCH:{NAME:"search",PATH:"/search",LOCALE_PATH:"/search",MATCHER:"/search",HAS_LOCALE_PREFIX:!1},SEARCH_RESULTS:{NAME:"search-results",PATH:"/search-results",LOCALE_PATH:"/search-results",MATCHER:"/search-results",HAS_LOCALE_PREFIX:!1},THIRDPARTY_START:{NAME:"thirdparty_start",PATH:"/thirdparty-start",LOCALE_PATH:"/thirdparty-start",MATCHER:"/thirdparty-start",HAS_LOCALE_PREFIX:!1},APPROVAL_RESULT:{PATH:"/approval-result",LOCALE_PATH:"/approval-result",MATCHER:"/approval-result",HAS_LOCALE_PREFIX:!0},CREATOR_ACTIVITY:{NAME:"creator_activity",PATH:"/creator-activity",LOCALE_PATH:"/creator-activity",MATCHER:"/creator-activity",HAS_LOCALE_PREFIX:!1},MY_CREATOR_ACTIVITY:{NAME:"my-creator-activities",PATH:"/my-creator-activities",LOCALE_PATH:"/my-creator-activities",MATCHER:"/my-creator-activities",HAS_LOCALE_PREFIX:!1},CREATOR_ACTIVITY_DETAIL:{NAME:"creator-activity-detail",PATH:"/creator-activity/:id",LOCALE_PATH:"/creator-activity/:id",MATCHER:"/creator-activity/:id",HAS_LOCALE_PREFIX:!1}}},LOGIN:{PATH:"/login",LOCALE_PATH:"/:locale/login",MATCHER:"/:locale*/login",HAS_LOCALE_PREFIX:!0,INDEXING:!0},SIGN_UP:{PATH:"/signup",LOCALE_PATH:"/:locale/signup",MATCHER:"/:locale*/signup",HAS_LOCALE_PREFIX:!0,INDEXING:!0},DOWNLOAD_GUIDANCE:{PATH:"/download-guidance",LOCALE_PATH:"/download-guidance",MATCHER:"/download-guidance",HAS_LOCALE_PREFIX:!1},INVITE:{PATH:"/invite",LOCALE_PATH:"/:locale/invite",MATCHER:"/:locale*/invite",HAS_LOCALE_PREFIX:!0},FORGET_PWD:{PATH:"/forget-password",LOCALE_PATH:"/:locale/forget-password",MATCHER:"/:locale*/forget-password",HAS_LOCALE_PREFIX:!0},TEAM_INVITE:{PATH:"/team-invite/:id",LOCALE_PATH:"/team-invite/:id",MATCHER:"/team-invite/:id",HAS_LOCALE_PREFIX:!1},TEAM_APPLY:{PATH:"/team-apply",LOCALE_PATH:"/team-apply",MATCHER:"/team-apply",HAS_LOCALE_PREFIX:!1},LOGIN_STATUS:{PATH:"/loginStatus",LOCALE_PATH:"/loginStatus",MATCHER:"/loginStatus",HAS_LOCALE_PREFIX:!1},COOPERATION:{DETAIL:{PID:"/view/:id",PATH:"/view/:id",LOCALE_PATH:"/view/:id",MATCHER:"/:locale*/view/:id",HAS_LOCALE_PREFIX:!1},EXPERIENCE:{PATH:"/view",LOCALE_PATH:"/view",MATCHER:"/view",HAS_LOCALE_PREFIX:!1},SHARE:{PID:"/share/:id",PATH:"/share/:id",LOCALE_PATH:"/share/:id",MATCHER:"/share/:id",HAS_LOCALE_PREFIX:!1},EMBED:{PID:"/embed/:id",PATH:"/embed/:id",LOCALE_PATH:"/embed/:id",MATCHER:"/embed/:id",HAS_LOCALE_PREFIX:!1},RENDER:{PID:"/render/:id",PATH:"/render/:id",LOCALE_PATH:"/render/:id",MATCHER:"/render/:id",HAS_LOCALE_PREFIX:!1},REPORT:{PID:"/report",PATH:"/report",LOCALE_PATH:"/report",MATCHER:"/report",HAS_LOCALE_PREFIX:!1},DRAFT_PREVIEW:{PID:"/draft-preview/:id",PATH:"/draft-preview/:id",LOCALE_PATH:"/draft-preview/:id",MATCHER:"/draft-preview/:id",HAS_LOCALE_PREFIX:!1}},TOKEN_AUTH:{PATH:"/tokenAuth",LOCALE_PATH:"/tokenAuth",MATCHER:"/tokenAuth",HAS_LOCALE_PREFIX:!1},EDITOR:{PATH:"/editor",LOCALE_PATH:"/editor",MATCHER:"/editor",HAS_LOCALE_PREFIX:!1,INDEXING:!0},TIKTOK_AUTH:{PATH:"/tiktokAuth",LOCALE_PATH:"/tiktokAuth",MATCHER:"/tiktokAuth",HAS_LOCALE_PREFIX:!1},THIRD_PARTY_ENTRANCE:{PATH:"/third-party-entrance",LOCALE_PATH:"/third-party-entrance",MATCHER:"/third-party-entrance",HAS_LOCALE_PREFIX:!1},COOKIE_SETTINGS:{PATH:"/cookie-settings",LOCALE_PATH:"/cookie-settings",MATCHER:"/cookie-settings",HAS_LOCALE_PREFIX:!1,INDEXING:!0},PRIVACY_SETTINGS:{PATH:"/privacy-settings",LOCALE_PATH:"/privacy-settings",MATCHER:"/privacy-settings",HAS_LOCALE_PREFIX:!0,INDEXING:!0},THIRDPARTY_CLOUD_STORAGE_AUTH:{PATH:"/thirdpartyCloudStorageAuth",LOCALE_PATH:"/thirdpartyCloudStorageAuth",MATCHER:"/thirdpartyCloudStorageAuth",HAS_LOCALE_PREFIX:!1},CAPCUT_APP:{PATH:"/tools/video-editing-app",LOCALE_PATH:"/:locale/tools/video-editing-app",MATCHER:"/:locale*/tools/video-editing-app",HAS_LOCALE_PREFIX:!0,INDEXING:!0},CMS_TOOLS:{PATH:"/tools/:title",LOCALE_PATH:"/:locale/tools/:title",MATCHER:"/:locale*/tools/:title",HAS_LOCALE_PREFIX:!0},CMS_CREATE:{PATH:"/create/:title",LOCALE_PATH:"/:locale/create/:title",MATCHER:"/:locale*/create/:title",HAS_LOCALE_PREFIX:!0},CMS_RESOURCE:{PATH:"/resource/:title",LOCALE_PATH:"/:locale/resource/:title",MATCHER:"/:locale*/resource/:title",HAS_LOCALE_PREFIX:!0},CMS_TOOLS_AGGREGATION:{PATH:"/tools",LOCALE_PATH:"/:locale/tools",MATCHER:"/:locale*/tools",HAS_LOCALE_PREFIX:!0},CMS_CREATE_AGGREGATION:{PATH:"/create",LOCALE_PATH:"/:locale/create",MATCHER:"/:locale*/create",HAS_LOCALE_PREFIX:!0},CMS_RESOURCE_AGGREGATION:{PATH:"/resource",LOCALE_PATH:"/:locale/resource",MATCHER:"/:locale*/resource",HAS_LOCALE_PREFIX:!0},COLLECT_RESOURCE:{NAME:"collect-resource",PATH:"/collect-resource/:token",LOCALE_PATH:"/collect-resource/:token",MATCHER:"/collect-resource/:token",HAS_LOCALE_PREFIX:!1},EDITOR_TOOLS:{NAME:"editor-tools",PATH:"/editor-tools",LOCALE_PATH:"/editor-tools/:name",MATCHER:"/editor-tools/:name",HAS_LOCALE_PREFIX:!1,TEXT_TO_IMAGE:{PATH:"/magic-tools/convert-text-to-image",LOCALE_PATH:"/magic-tools/convert-text-to-image",MATCHER:"/magic-tools/convert-text-to-image",HAS_LOCALE_PREFIX:!1},IMAGE_TO_IMAGE:{PATH:"/magic-tools/generate-image",LOCALE_PATH:"/magic-tools/generate-image",MATCHER:"/magic-tools/generate-image",HAS_LOCALE_PREFIX:!1},IMAGE_STYLE_AVATAR:{PATH:"/magic-tools/generate-portrait",LOCALE_PATH:"/magic-tools/generate-portrait",MATCHER:"/magic-tools/generate-portrait",HAS_LOCALE_PREFIX:!1},IMAGE_NIGHT_ENHANCE:{PATH:"/magic-tools/enhance-low-light-image",LOCALE_PATH:"/magic-tools/enhance-low-light-image",MATCHER:"/magic-tools/enhance-low-light-image",HAS_LOCALE_PREFIX:!1},IMAGE_STYLE_CONVERSION:{PATH:"/magic-tools/stylize-photo",LOCALE_PATH:"/magic-tools/stylize-photo",MATCHER:"/magic-tools/stylize-photo",HAS_LOCALE_PREFIX:!1},IMAGE_UPSCALER:{PATH:"/magic-tools/upscale-image",LOCALE_PATH:"/magic-tools/upscale-image",MATCHER:"/magic-tools/upscale-image",HAS_LOCALE_PREFIX:!1},IMAGE_AI_TONING:{PATH:"/magic-tools/correct-color",LOCALE_PATH:"/magic-tools/correct-color",MATCHER:"/magic-tools/correct-color",HAS_LOCALE_PREFIX:!1},IMAGE_COLORING:{PATH:"/magic-tools/ai-colorize",LOCALE_PATH:"/magic-tools/ai-colorize",MATCHER:"/magic-tools/ai-colorize",HAS_LOCALE_PREFIX:!1},IMAGE_RESTORATION:{PATH:"/magic-tools/ai-restore",LOCALE_PATH:"/magic-tools/ai-restore",MATCHER:"/magic-tools/ai-restore",HAS_LOCALE_PREFIX:!1},VIDEO_VIDEO_STYLE_CONVERSION:{PATH:"/magic-tools/stylize-video",LOCALE_PATH:"/magic-tools/stylize-video",MATCHER:"/magic-tools/stylize-video",HAS_LOCALE_PREFIX:!1},VIDEO_UPSCALER:{PATH:"/magic-tools/upscale-video",LOCALE_PATH:"/magic-tools/upscale-video",MATCHER:"/magic-tools/upscale-video",HAS_LOCALE_PREFIX:!1},VIDEO_SLOW_MOTION:{PATH:"/magic-tools/make-slomo",LOCALE_PATH:"/magic-tools/make-slomo",MATCHER:"/magic-tools/make-slomo",HAS_LOCALE_PREFIX:!1},VIDEO_STABILIZATION:{PATH:"/magic-tools/stablize-video",LOCALE_PATH:"/magic-tools/stablize-video",MATCHER:"/magic-tools/stablize-video",HAS_LOCALE_PREFIX:!1},TRANSFORM:{PATH:"/editor-tools/transform",LOCALE_PATH:"/editor-tools/transform",MATCHER:"/editor-tools/transform",HAS_LOCALE_PREFIX:!1},CUTOUT:{PATH:"/editor-tools/cutout",LOCALE_PATH:"/editor-tools/cutout",MATCHER:"/editor-tools/cutout",HAS_LOCALE_PREFIX:!1},SCRIPT:{PATH:"/editor-tools/script",LOCALE_PATH:"/editor-tools/script",MATCHER:"/editor-tools/script",HAS_LOCALE_PREFIX:!1},AUTO_CUT:{PATH:"/editor-tools/autocut",LOCALE_PATH:"/editor-tools/autocut",MATCHER:"/editor-tools/autocut",HAS_LOCALE_PREFIX:!1},TEXT_TO_VIDEO:{PATH:"/editor-tools/convert-script-to-video",LOCALE_PATH:"/editor-tools/convert-script-to-video",MATCHER:"/editor-tools/convert-script-to-video",HAS_LOCALE_PREFIX:!1},U2V:{PATH:"/editor-tools/url-to-ads",LOCALE_PATH:"/editor-tools/url-to-ads",MATCHER:"/editor-tools/url-to-ads",HAS_LOCALE_PREFIX:!1},LONG_TO_SHORT:{PATH:"/editor-tools/long-video-to-shorts",LOCALE_PATH:"/editor-tools/long-video-to-shorts",MATCHER:"/editor-tools/long-video-to-shorts",HAS_LOCALE_PREFIX:!1},AIGC_VIDEO:{PATH:"/editor-tools/ai-video-generator",LOCALE_PATH:"/editor-tools/ai-video-generator",MATCHER:"/editor-tools/ai-video-generator",HAS_LOCALE_PREFIX:!1},TTS:{PATH:"/magic-tools/text-to-speech",LOCALE_PATH:"/editor-tools/text-to-speech",MATCHER:"/editor-tools/text-to-speech",HAS_LOCALE_PREFIX:!1},AUDIO_VIDEO_TRANSLATOR:{PATH:"/magic-tools/video-translator",LOCALE_PATH:"/magic-tools/video-translator",MATCHER:"/magic-tools/video-translator",HAS_LOCALE_PREFIX:!1}},TOOlS:{ONLINE:{PATH:"/tools/online-video-editor"},DESKTOP:{PATH:"/tools/desktop-video-editor"}},DISCOVER:{PATH:"/discover/keyword/:id",LOCALE_PATH:"/:locale/discover/keyword/:id",MATCHER:"/:locale*/discover/keyword/:id",HAS_LOCALE_PREFIX:!0},DISCOVER_TITLE:{PATH:"/discover/keyword/:title/:id",LOCALE_PATH:"/:locale/discover/keyword/:title/:id",MATCHER:"/:locale*/discover/keyword/:title/:id",HAS_LOCALE_PREFIX:!0},EDITOR_GRAPHIC:{PATH:"/editor-graphic",LOCALE_PATH:"/editor-graphic",MATCHER:"/editor-graphic",HAS_LOCALE_PREFIX:!1,INDEXING:!0},EDITOR_BATCH:{PATH:"/editor-batch",LOCALE_PATH:"/editor-batch",MATCHER:"/editor-batch",HAS_LOCALE_PREFIX:!1,INDEXING:!0},TEMPLATE_DETAIL:{PATH:"/templates/:id",LOCALE_PATH:"/:locale/templates/:id",MATCHER:"/:locale*/templates/:id",HAS_LOCALE_PREFIX:!0},TEMPLATE_DETAIL_KEYWORDS:{PATH:"/template-detail/:key/:id",LOCALE_PATH:"/:locale/template-detail/:key/:id",MATCHER:"/:locale*/template-detail/:key/:id",HAS_LOCALE_PREFIX:!0},TEMPLATE_DETAIL_NO_KEYWORDS:{PATH:"/template-detail/:id",LOCALE_PATH:"/:locale/template-detail/:id",MATCHER:"/:locale*/template-detail/:id",HAS_LOCALE_PREFIX:!0},PROFILE:{PATH:"/profile/:id",LOCALE_PATH:"/:locale/profile/:id",MATCHER:"/:locale*/profile/:id",HAS_LOCALE_PREFIX:!0},SETTINGS:{PATH:"/settings",LOCALE_PATH:"/:locale/settings",MATCHER:"/:locale*/settings",HAS_LOCALE_PREFIX:!0},HASHTAG:{PATH:"/discover/hashtag/:title/:id",LOCALE_PATH:"/:locale/discover/hashtag/:title/:id",MATCHER:"/:locale*/discover/hashtag/:title/:id",HAS_LOCALE_PREFIX:!0},CATEGORY:{PATH:"/discover/category/:title/:id",LOCALE_PATH:"/:locale/discover/category/:title/:id",MATCHER:"/:locale*/discover/category/:title/:id",HAS_LOCALE_PREFIX:!0},CREATOR:{PATH:"/discover/creator/:id",LOCALE_PATH:"/:locale/discover/creator/:id",MATCHER:"/:locale*/discover/creator/:id",HAS_LOCALE_PREFIX:!0},UG_ARTICLE:{PATH:"/discover/article/:title/:id",LOCALE_PATH:"/:locale/discover/article/:title/:id",MATCHER:"/:locale*/discover/article/:title/:id",HAS_LOCALE_PREFIX:!0},TEMPLATE:{PATH:"/templates",LOCALE_PATH:"/:locale/templates",MATCHER:"/:locale*/templates",HAS_LOCALE_PREFIX:!0},EDITOR_TEMPLATE:{PATH:"/editor-template",LOCALE_PATH:"/editor-template",MATCHER:"/editor-template",HAS_LOCALE_PREFIX:!1,INDEXING:!0},MAGIC_TOOLS:{TEXT_TO_IMAGE:{PATH:"/magic-tools/convert-text-to-image",LOCALE_PATH:"/magic-tools/convert-text-to-image",MATCHER:"/magic-tools/convert-text-to-image",HAS_LOCALE_PREFIX:!1},IMAGE_TO_IMAGE:{PATH:"/magic-tools/generate-image",LOCALE_PATH:"/magic-tools/generate-image",MATCHER:"/magic-tools/generate-image",HAS_LOCALE_PREFIX:!1}},SCAN_QR_CODE:{PATH:"/scan-qr-code",LOCALE_PATH:"/scan-qr-code",MATCHER:"/scan-qr-code",HAS_LOCALE_PREFIX:!1,INDEXING:!1},FILL_BIRTHDAY:{PATH:"/birthday-information",LOCALE_PATH:"/birthday-information",MATCHER:"/birthday-information",HAS_LOCALE_PREFIX:!1,INDEXING:!1},TUTORIAL:{PATH:"/tutorial",LOCALE_PATH:"/:locale/tutorial",MATCHER:"/:locale*/tutorial",HAS_LOCALE_PREFIX:!0},ACCOUNT_CENTER:{PATH:"/account-center",LOCALE_PATH:"/account-center",MATCHER:"/account-center",HAS_LOCALE_PREFIX:!1,CHILD:{LOGIN:{PATH:"/account-center/login",LOCALE_PATH:"/account-center/login",MATCHER:"/account-center/login",HAS_LOCALE_PREFIX:!1}}},DOWNLOAD_YOUR_DATA:{PATH:"/download-your-data",LOCALE_PATH:"/download-your-data",MATCHER:"/download-your-data",HAS_LOCALE_PREFIX:!1},FACEBOOK_LOGIN:{PATH:"/facebook-login",LOCALE_PATH:"/facebook-login",MATCHER:"/facebook-login",HAS_LOCALE_PREFIX:!1},AI_CREATOR:{PATH:"/ai-creator",LOCALE_PATH:"/ai-creator",MATCHER:"/ai-creator",HAS_LOCALE_PREFIX:!1},DATA_SUBJECT_REQUEST:{PATH:"/data-subject-request",LOCALE_PATH:"/data-subject-request",MATCHER:"/data-subject-request",HAS_LOCALE_PREFIX:!1,CHILD:{SUBMIT:{PATH:"/data-subject-request/submit",LOCALE_PATH:"/data-subject-request/submit",MATCHER:"/data-subject-request/submit",SUB_PATH:"/submit",HAS_LOCALE_PREFIX:!1},DOWNLOAD:{PATH:"/data-subject-request/download",LOCALE_PATH:"/data-subject-request/download",MATCHER:"/data-subject-request/download",SUB_PATH:"/download",HAS_LOCALE_PREFIX:!1},BLOCK:{PATH:"/data-subject-request/block",LOCALE_PATH:"/data-subject-request/block",MATCHER:"/data-subject-request/block",SUB_PATH:"/block",HAS_LOCALE_PREFIX:!1}}}}},465930:function(e,t,i){"use strict";i.d(t,{g2:function(){return r},lP:function(){return o}});let r={UTM_MEDIUM:"utm_medium",UTM_SOURCE:"utm_source",VID:"video",OPEN_ID:"open_id",UTM_CAMPAIGN:"utm_campaign"};var n,o=((n={}).TIKTOK_LIVE="TT_live",n)},432749:function(e,t,i){"use strict";i.d(t,{X0:function(){return l},hh:function(){return a},tG:function(){return o}});var r,n,o=((r={}).TikTok="TikTok",r.YouTube="YouTube",r.Facebook="Facebook",r.TTAM="TTAM",r.Shopify="Shopify",r.Dropbox="Dropbox",r);var a=((n={}).TikTok="TikTok",n.TTAM="TTAM",n.YouTube="YouTube",n.YouTubeShorts="YouTubeShorts",n.Instagram="Instagram",n.InstagramReels="InstagramReels",n.FacebookPage="FacebookPage",n.FacebookGroup="FacebookGroup",n.Shopify="Shopify",n.Dropbox="Dropbox",n);let s={TikTok:["TikTok"],TTAM:["TTAM"],Facebook:["FacebookGroup","FacebookPage","Instagram","InstagramReels"],YouTube:["YouTube"]},l=e=>{var t;let[i]=null!==(t=Object.entries(s).find(t=>{let[i,r]=t;return!!r.includes(e)||!1}))&&void 0!==t?t:[];return i}},517818:function(e,t,i){"use strict";i.d(t,{Cr:function(){return u},E7:function(){return d},Ge:function(){return p},Gg:function(){return c},YP:function(){return s},eB:function(){return l}});var r,n,o,a=i(307305);var s=((r={}).owner="owner",r.admin="admin",r.collaborator="collaborator",r);var l=((n={})[n.Owner=1]="Owner",n[n.Admin=2]="Admin",n[n.Collaborator=3]="Collaborator",n[n.Member=4]="Member",n);let c=5,d={DEFAULT:-1,ERR_INVITATION_LINK_EXPIRED:2300,ERR_INVITATION_LINK_CLOSE:2307,ERR_MEMBER_CNT_LIMIT:2308,ERR_USER_WORKSPACE_OVER_MAX_SIZE:2321,ERR_WORKSPACE_INVITATION_LINK_FORMAT_IS_NOT_CORRECT:2323,ERR_REPEAT_ADD_WORKSPACE:2311,ERR_ONLY_SUPPORT_MOBILE:-403,ERR_WORKSPACE_INVITATION_LINK_IS_USED:2343,ERR_WORKSPACE_LINK_USER_NOT_MATCH:2801,ERR_APPLICATION_UPDATE_NO_PERMISSION:2703,ERR_APPLICATION_UPDATE_TIME:2704,ERR_APPLICATION_NO_ALLOW_JOIN:Number(a.K.noAllowJoin),ERR_ADD_WORKSPACE:2705};d.DEFAULT,d.ERR_ADD_WORKSPACE,d.ERR_INVITATION_LINK_EXPIRED,d.ERR_INVITATION_LINK_CLOSE,d.ERR_MEMBER_CNT_LIMIT,d.ERR_USER_WORKSPACE_OVER_MAX_SIZE,d.ERR_WORKSPACE_INVITATION_LINK_FORMAT_IS_NOT_CORRECT,d.ERR_ONLY_SUPPORT_MOBILE,d.ERR_WORKSPACE_INVITATION_LINK_IS_USED,d.ERR_APPLICATION_NO_ALLOW_JOIN;let u={ERR_NOT_WORKSPACE_MEMBER:"2316",ERR_NOT_WORKSPACE_PERMISSION:"2317",Err_Workspace_Directional_Invited_Limits:"2335"};var p=((o={})[o.OnlyAdmin=1]="OnlyAdmin",o[o.AllMember=2]="AllMember",o)},270767:function(e,t,i){"use strict";i.d(t,{Q:function(){return n}});var r,n=((r={}).Light="light",r.Dark="dark",r)},474447:function(e,t,i){"use strict";i.d(t,{AV:function(){return f},IL:function(){return h},JQ:function(){return _},LO:function(){return v},Lt:function(){return w},No:function(){return p},PB:function(){return u},RR:function(){return S},WN:function(){return I},XU:function(){return A},Yi:function(){return m},_K:function(){return y},ax:function(){return d},f0:function(){return b},jj:function(){return k},js:function(){return g},lw:function(){return l},of:function(){return c},ow:function(){return C},u0:function(){return R},wg:function(){return E},ye:function(){return P}});var r,n,o,a,s,l=((r={}).Success="1",r.Fail="0",r);let c="__THIRD_PART_SIGNIN_STATUS_KEY__",d="__THIRD_PART_SIGNIN_DATA__",u="__THIRD_PART_SIGNIN_ERROR_CODE__",p="__THIRD_PART_SIGNIN_ERROR_MSG__",_="__THIRD_PART_SIGNIN_ERROR_TOKEN__",g="__THIRD_PART_SIGNIN_ERROR_FROM_ONETAP__",h="__THIRD_PART_SIGNIN_PARAM__",m="__TIKTOK_AUTH_CSRF_KEY__",v="__ENABLE_THIRD_PART_AGE_GATE__",f="https://www.tiktok.com/v2/auth/authorize";var y=((n={})[n.Facebook=1772]="Facebook",n[n.Google=1773]="Google",n[n.TikTok=1776]="TikTok",n[n.ScanCode=0]="ScanCode",n[n.TikTokLive=1776]="TikTokLive",n[n.Apple=2337]="Apple",n);var w=((o={})[o.Facebook=200251]="Facebook",o[o.Google=200257]="Google",o[o.TikTok=200256]="TikTok",o[o.ScanCode=0]="ScanCode",o[o.TikTokLive=200256]="TikTokLive",o[o.Apple=2337]="Apple",o);var b=((a={}).TikTokLive="live.draft.list",a.TikTok="user.info.basic",a.TikTokEmail="user.info.email",a);var S=((s={}).googleOneTab="googleOneTab",s.googleOneTabAutoSelect="googleOneTabAutoSelect",s.googleSignInBtn="googleSignInBtn",s);let C="awgqf85tcl10dy2w",k="awexgwrczzlw45x2",E="87571557143-buc0jlq1ncffscght599nhlgl1u977cr.apps.googleusercontent.com",I="1093504901008-cmpv0g4d9k4fd1g6aas7n2bpra6mulu5.apps.googleusercontent.com",P="3213804762189845",A="368524211998913",R="com.lemon.lvoverseas.websignin"},965364:function(e,t,i){"use strict";i.d(t,{Be:function(){return s},Vg:function(){return c},_h:function(){return u},gn:function(){return o},l7:function(){return l},mt:function(){return p},pK:function(){return d},yf:function(){return a}});var r,n,o=((r={}).Dropbox="Dropbox",r.GoogleDrive="GoogleDrive",r.GoogleContacts="GoogleContacts",r.Shopify="Shopify",r);var a=((n={}).Dropbox="dropbox",n.GoogleDrive="google_drive",n.GoogleDriveMarketPlace="google_mp",n.Shopify="shopify",n.DropboxImport="dropbox",n);let s=e=>{switch(e){case"Dropbox":default:return"web_space_upload_dropbox";case"GoogleDrive":return"web_space_upload_googledrive"}},l="3c3o3v882blv2w7",c="dp6bpuyyzufzrg1",d="1093504901008-cmpv0g4d9k4fd1g6aas7n2bpra6mulu5.apps.googleusercontent.com",u="87571557143-3quv34dc1ier93o3h1kjjieocm0u6bo5.apps.googleusercontent.com",p="87571557143-vsqifmqmc1ou12eqamgqm6k7ducvdcu1.apps.googleusercontent.com"},719369:function(e,t,i){"use strict";i.d(t,{Ad:function(){return y},GD:function(){return u},IZ:function(){return b},Mv:function(){return _},OH:function(){return v},Tz:function(){return p},X_:function(){return d},Xj:function(){return C},c:function(){return k},e8:function(){return g},hb:function(){return h},jn:function(){return w},kk:function(){return S},l$:function(){return m},nM:function(){return f},qS:function(){return c}});var r,n,o,a,s,l=i(432749);var c=((r={}).TikTok="TikTok",r.YouTube="YouTube",r.TTAM="TTAM",r.Facebook="Facebook",r.Shopify="Shopify",r.EmbedShopify="EmbedShopify",r.SaveDropbox="SaveDropbox",r.Schedule="Schedule",r);var d=((n={})[n.PAGE=0]="PAGE",n[n.GROUP=1]="GROUP",n[n.INSTAGRAM=2]="INSTAGRAM",n);let u={[l.hh.FacebookPage]:0,[l.hh.FacebookGroup]:1,[l.hh.Instagram]:2,[l.hh.InstagramReels]:2};var p=((o={})[o.YouTube=0]="YouTube",o[o.YouTubeShorts=1]="YouTubeShorts",o);let _={[l.hh.YouTube]:0,[l.hh.YouTubeShorts]:1},g="awila1aef2sl3rob",h="awov7tein3o23v2a",m="1093504901008-cmpv0g4d9k4fd1g6aas7n2bpra6mulu5.apps.googleusercontent.com",v="87571557143-g65pmu4h9fkv509ju9oa30vmqsckhgfo.apps.googleusercontent.com",f="7135340830805458946",y="8azjb60a0ij",w="capcut_web_boe",b="capcut_web_ppe",S="capcut_web_prod";var C=((a={}).ppe="284495260783513",a.boe="1245762546309504",a);var k=((s={}).PERMISSION_ERROR="0",s.VIDEO_DURATION_TOO_SHORT="10",s.VIDEO_DURATION_TOO_SHORT_TTAM="11",s.VIDEO_DURATION_TOO_LONG="200916",s.UPLOAD_AUTH_ERROR="200917",s.AUTH_ERROR="2000-1",s.TTAM_AUTH_ERROR="2001-3",s.FACEBOOK_AUTH_ERROR="facebook-auth-error",s.TTAM_AUTH_ERROR_10="2001-3-10",s.TTAM_AUTH_ERROR_611="2001-3-611",s.TTAM_AUTH_ERROR_611_10="2001-3-611,10",s.GET_TT4B_ACCOUNTS_FAILED="2001",s.GET_ADVERTISERS_FAILED="2002",s.UNBIND_TT4B_ACCOUNT_FAILED="2003",s.TT4B_RIGHT_FAILED="2005",s.COUNTRY_NOT_SUPPORT="a-2005",s.NO_TIMES_TO_UPLOAD="200912",s.PERMISSTION_NOT_VERIFIED="200914",s.PRIVACY_NOT_VERIFIED="200915",s.ACCOUNT_CHANGED="200922",s.ACCOUNT_DISCONNECT="200925",s.UNKONWN_ERROR="200900",s.OVER_MAX_TT4B_ACCOUNT_SIZE="2008",s.SHARE_TTAM_USER_DISAUTHORIZED="201704",s.SHARE_TTAM_CHANGED_BIND="201705",s.SHARE_TTAM_FAILED="201702",s.SHARE_TTAM_RETRY_FAILED="201701",s.CANCEL_SHARE_TTAM_FAILED="200923",s.YOUTUBE_INSUFFICIENT_PERMISSIONS="YOUTUBE_INSUFFICIENT_PERMISSIONS",s.FAILED_BY_RISK="1003",s.FAILED_BY_FREQUENCY="1004",s)},9594:function(e,t,i){"use strict";i.d(t,{HD:function(){return c},_z:function(){return s},gf:function(){return a},lQ:function(){return o},pH:function(){return l}});var r,n,o=((r={})[r.Resize=1001]="Resize",r[r.RemoveBackground=1002]="RemoveBackground",r[r.Script=1003]="Script",r[r.AutoCut=1004]="AutoCut",r[r.GraphicTextToDraft=10001]="GraphicTextToDraft",r[r.GraphicAiModel=10003]="GraphicAiModel",r[r.GraphicAiBackground=10002]="GraphicAiBackground",r[r.VideoDigitalHuman=20001]="VideoDigitalHuman",r[r.SmartCrop=20002]="SmartCrop",r[r.TextEdit=20003]="TextEdit",r[r.VideoDigitalHumanCommerce=20004]="VideoDigitalHumanCommerce",r[r.TextToImage=1]="TextToImage",r[r.ImageToImage=2]="ImageToImage",r[r.ImageStyleAvatar=3]="ImageStyleAvatar",r[r.ImageNightEnhance=4]="ImageNightEnhance",r[r.ImageStyleConversion=5]="ImageStyleConversion",r[r.ImageUpscaler=6]="ImageUpscaler",r[r.ImageAiToning=7]="ImageAiToning",r[r.ImageColoring=8]="ImageColoring",r[r.ImageRestoration=9]="ImageRestoration",r[r.VideoStyleConversion=10]="VideoStyleConversion",r[r.VideoUpscaler=11]="VideoUpscaler",r[r.VideoSlowMotion=12]="VideoSlowMotion",r[r.VideoStabilization=13]="VideoStabilization",r[r.TextToVideo=15]="TextToVideo",r[r.U2V=16]="U2V",r[r.ImageBatchTool=17]="ImageBatchTool",r[r.Long2Short=21]="Long2Short",r[r.AigcVideo=30]="AigcVideo",r[r.AudioVideoTranslator=32]="AudioVideoTranslator",r[r.DreaminaStory=33]="DreaminaStory",r[r.AiCreator=38]="AiCreator",r[r.TTS=39]="TTS",r[r.VoiceChanger=40]="VoiceChanger",r[r.Unknown=-1]="Unknown",r);let a={1:"text_to_image",2:"image_to_image",3:"portrait_generator",4:"low_light_image_enhancement",5:"image_style_transfer",6:"image_upscaler",7:"ai_color_correction",8:"photo_colorizer",9:"old_photo_restoration",10:"video_style_transfer",11:"video_upscaler",12:"super_slow_motion",13:"video_stabilization",1001:"resize_video",1002:"remove_background",1003:"ad_script",1004:"autocut",15:"text_to_video",16:"url_to_video",10001:"text_to_draft",10003:"ai_model_tryon",10002:"ai_background",20001:"ai_character",17:"batch",21:"clip_shorts",30:"ai_video",39:"text_to_speech",32:"ai_translation",33:"dreamina_story",38:"storyboard",40:"voice_changer",[-1]:""},s={5:"remove_background",6:"resize_video",7:"ad_script",8:"text_to_image",9:"image_to_image",10:"portrait_generator",11:"image_style_transfer",12:"video_style_transfer",13:"image_upscaler",14:"ai_color_correction",15:"photo_colorizer",16:"old_photo_restoration",17:"low_light_image_enhancement",18:"video_upscaler",19:"super_slow_motion",20:"video_stabilization",21:"chatgpt",22:"autocut",23:"text_to_video",24:"url_to_video",26:"chatgpt_search",27:"clip_shorts",28:"ai_video"},l=Object.keys(s).map(Number);var c=((n={})[n.template=25]="template",n[n.chatGPTSearch=26]="chatGPTSearch",n)},905806:function(e,t,i){"use strict";i.d(t,{gx:function(){return o}});var r=i(408835),n=i(411667);let o=new class e{getSettings(){return this.service.getSnapshot().context.settings}onChange(e){this.onChangeSet.add(e),e(this.getSettings())}constructor(){this.service=(0,r.kJ)(n.aR).start(),this.onChangeSet=new Set,this.service.onChange(e=>{let{settings:t}=e;for(let e of this.onChangeSet)e(t)})}}},930559:function(e,t,i){"use strict";i.d(t,{cX:()=>c,ak:()=>d,dq:()=>u});var r=i("733458"),n=i("970986");function o(){let e=Object.keys({...localStorage}).find(e=>e.startsWith("__tea_cache_tokens"));if(e)try{var t;let i=JSON.parse(null!==(t=r.m.getString(e))&&void 0!==t?t:"{}");return null==i?void 0:i.web_id}catch(e){}}let a=null,s={platformID:"7206160342509191169",host:n.Vj.feelgood,getAuthToken:()=>fetch(`https://${n.Vj.feelgood}/survey/api/feelgood/v1/token`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({platformID:"7206160342509191169",secretKey:"0a0a878c8738ceeda0dff6aeafc1fecc"})}).then(e=>e.json()).then(e=>(console.log("res",e),e.data)),language:"en",autoStartListen:!1};function l(){}let c=async e=>{let{userInfo:t,language:r}=e,{feelgood:n}=await i.e("5881").then(i.t.bind(i,979065,23));if(!a){var c;a=n({...s,sign:{userId:l()||(null==t?void 0:t.uid)||o()||"test123",host:null===(c=window)||void 0===c?void 0:c.location.host},language:r||"en",questionnaire:{entryUrl:"https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/common/images/LvIconQuestionnaire.svg"}})}return a},d=async e=>{var t;let{userInfo:r,language:n}=e;return new(await i.e("5881").then(i.t.bind(i,979065,23))).default({...s,sign:{userId:l()||(null==r?void 0:r.uid)||o()||"test123",host:null===(t=window)||void 0===t?void 0:t.location.host},language:n||"en"})},u=e=>{r.m.setString("feelgoodQuestionnaire",JSON.stringify(e))}},788081:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var r=i(218571),n=i(270767);let o=(0,r.createContext)({userService:{},theme:n.Q.Light,setTheme:()=>void 0,locale:{}});(0,r.createContext)({uid:"",avatar:"",isFetchDone:!1})},161670:function(e,t,i){"use strict";i.d(t,{d:function(){return o}});var r=i(218571),n=i(149803);function o(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];(0,r.useEffect)(()=>{null==e||e.onChange(e=>{let{firstPartyAnalytics:i}=e;i&&t&&((0,n.y)().start(),(0,n.y)().clearInitQueue())})},[e,t])}},789738:function(e,t,i){"use strict";i.d(t,{b:function(){return c},d:function(){return l}});var r=i(786377),n=i(218571),o=i(783055),a=i(759381),s=i(788081);function l(){return new o.uL({countryCode:void 0,getBrowserLang:()=>(0,a.j)()?window.navigator.language:void 0,cookieGetter:r.Z.get.bind(r.Z),cookieSetter:r.Z.set.bind(r.Z)})}function c(){let{locale:e}=(0,n.useContext)(s.Z);return e}},523267:function(e,t,i){"use strict";i.d(t,{Fg:function(){return u},SN:function(){return d},VO:function(){return c}});var r=i(270767),n=i(957104),o=i(218571),a=i(786377),s=i(733458),l=i(788081);let c=new class e{init(e){let t=this.retrive()?this.retrive()===r.Q.Dark:document.body.getAttribute("lv-theme")===r.Q.Dark;return this.apply(t?r.Q.Dark:r.Q.Light),e(t?r.Q.Dark:r.Q.Light),this.listen(e)}listen(e){let t=window.matchMedia("(prefers-color-scheme: dark)"),i=t=>{this.apply(t.matches?r.Q.Dark:r.Q.Light,!0),e(t.matches?r.Q.Dark:r.Q.Light)};return t.addListener(i),()=>{t.removeListener(i)}}apply(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._theme=e,e===r.Q.Dark?document.body.setAttribute("lv-theme","dark"):document.body.removeAttribute("lv-theme"),t&&this.store()}checkCookieEnabled(){return"undefined"==typeof window||!navigator.cookieEnabled}retrive(){if(!this.checkCookieEnabled())return s.m.getString(n.g.CAPCUT_THEME)}store(){if(!this.checkCookieEnabled())a.Z.set(n.g.CAPCUT_THEME,this._theme),s.m.setString(n.g.CAPCUT_THEME,this._theme)}clear(){if(!this.checkCookieEnabled())a.Z.remove(n.g.CAPCUT_THEME),s.m.removeItem(n.g.CAPCUT_THEME)}constructor(){this._theme=r.Q.Light}};function d(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],[t,i]=(0,o.useState)(r.Q.Light);return(0,o.useEffect)(()=>e?c.init(i):()=>void 0,[]),[t,function(t){if(!!e)c.apply(t,!0),i(t)}]}function u(){let{theme:e,setTheme:t}=(0,o.useContext)(l.Z);return[e,t]}},621238:function(e,t,i){"use strict";i.d(t,{t:function(){return o}});var r=i(218571),n=i(788081);function o(){let{userService:e}=(0,r.useContext)(n.Z);return e}},783055:function(e,t,i){"use strict";i.d(t,{uL:()=>d});var r=i("287272"),n=i("506464"),o=i("593062"),a=i("722169");class s{getCurrentLocale(){return this._locale}getSupportLocales(){return this._options.supportLocales}setCurrentLocale(e,t){!(null==t?void 0:t.disableCookie)&&this._setCookie(e),this._locale=e}_initLocale(){let{cookieName:e,defaultLocale:t,getBrowserLang:i,cookieGetter:r}=this._options,n=r(e);if(n&&this._validateLocale(n)){this._locale=n;return}let o=i(),a=o?this._formatLocale(o):void 0;!a&&(a=t),this._locale=a,this._setCookie(a)}_formatLocale(e){if(this._validateLocale(e))return e;for(let i of this.getSupportLocales()){var t;if(null===(t=i.matcher)||void 0===t?void 0:t.test(e.toLowerCase()))return i.locale}}_validateLocale(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!e&&!!this.getSupportLocales().find(i=>{var r;return!!(t&&(null===(r=i.matcher)||void 0===r?void 0:r.test(e.toLowerCase())))||i.locale.toLowerCase()===e.toLowerCase()})}_setCookie(e){let{cookieName:t,cookieSetter:i,isServer:r}=this._options;i(t,e,r?{maxAge:34128e6,httpOnly:!1,secure:!1,overwrite:!0}:{expires:395})}constructor(e){this._options=Object.assign({},{defaultLocale:"en",isServer:!1},e),this._options.locale&&this._validateLocale(this._options.locale)?(this._locale=this._options.locale,(!this._options.cookieGetter(this._options.cookieName)||this._options.forceSetCookieWhenInit)&&this._setCookie(this._locale)):this._initLocale()}}let l="capcut_locale";function c(){let e={};return!function t(i){if(i instanceof Array){i.forEach(e=>t(e));return}if(i instanceof Object){if(i.PATH&&void 0!==i.HAS_LOCALE_PREFIX){e[i.PATH]={matcher:i.MATCHER,hasLocalePrefix:i.HAS_LOCALE_PREFIX};return}t(Object.values(i))}}(r.l),e}class d{static setQueryLocale(e,t){if(null==t?void 0:t.fuzzyMatch){let t=d.getMachLocale(e);t&&(d.queryLocale=t);return}d.validateLocale(e)&&(d.queryLocale=e)}static getLocalPrefix(e){let t;for(let{locale:i,pathPrefix:r}of this.getSupportLocales()){let n=`/${r}/`,o=`/${r}`;if(e.startsWith(n)){t=i;break}if(e===o){t=i;break}}return t}static getPathPrefix(e){let t;for(let{pathPrefix:t}of this.getSupportLocales()){let i=`/${t}/`;if(e.startsWith(i))return t}return t}static isValidLocalPath(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forceLocal:!1},i=this.getPathPrefix(e),r=Object.entries(c()).map(e=>{let[t,{matcher:i,hasLocalePrefix:r}]=e;return{hasLocalePrefix:r,route:t,matcher:(0,o.EQ)(t,{decode:decodeURIComponent}),localMatcher:(0,o.EQ)(i,{decode:decodeURIComponent})}});for(let n=0;n<r.length;n++){let o=r[n];if(o.matcher(e)&&!i){if(t.forceLocal)return o.hasLocalePrefix;return!0}if(o.hasLocalePrefix&&o.localMatcher(e))return!!i}return!1}static formatRoutePath(e){let{locale:t,path:i,forceAddLocalePrefix:r=!1}=e,a=!1;"en"===t||(null==t?void 0:t.includes("-"))?t===n.Gp&&(t=n.zE.Spanish.key):t=Object.values(n.zE).map(e=>e.key).find(e=>e.startsWith(t))||t;let s=this.getSupportLocales();if(!n.gE[t]&&"en"!==t)return i;for(let{pathPrefix:e}of s)if(e){let t=`/${e}/`,r=`/${e}`;if(i.startsWith(t)){i=i.replace(t,"/"),a=!0;break}if(i===r){i=i.replace(r,"/"),a=!0;break}}if(r||a)return n.gE[t]?`/${n.gE[t]}${i}`:i;let l=c(),d=Object.keys(l),u=d.map(e=>(0,o.EQ)(e,{decode:decodeURIComponent}));for(let e=0;e<u.length;e++){var p;if(u[e](null==i?void 0:null===(p=i.split("?"))||void 0===p?void 0:p[0])){if(l[d[e]].hasLocalePrefix)return n.gE[t]?`/${n.gE[t]}${i}`:i;break}}return i}static getOriginalPath(e){let t=this.getPathPrefix(e);return t?e.replace(RegExp(`^/${t}`),""):e}static getOriginalUrl(e){for(let{pathPrefix:t}of this.getSupportLocales())if(t&&e.includes(t))return e.replace(RegExp(`/${t}`),"");return e}static getSupportLocales(){return Object.values(n.zE).filter(e=>!e.disable).map(e=>{let{key:t,text:i,pathPrefix:r,matcher:n}=e;return{locale:t,pathPrefix:r,text:i,matcher:n}})}static getHreflangLocales(){let e=d.getSupportLocales(),t={[n.zE.Spanish.key]:n.Gp,[n.zE.Filipino.key]:"tl-PH",[n.zE.TraditionalChinese.key]:"zh-TW"};return(0,a.flatten)(e.map(e=>{let i={locale:e.locale,hreflang:e.locale},r=[];return t[i.locale]&&(i.hreflang=t[e.locale]),i.hreflang.includes("-")&&r.push({locale:i.locale,hreflang:i.hreflang.substring(0,i.hreflang.indexOf("-"))}),r.push(i),r}))}static validateLocale(e,t){return!!e&&!!d.getSupportLocales().find(i=>!!((null==t?void 0:t.fuzzyMatch)&&i.matcher.test(e.toLowerCase()))||i.locale===e)}static getMachLocale(e){var t;return null===(t=d.getSupportLocales().find(t=>t.matcher.test(e.toLowerCase())))||void 0===t?void 0:t.locale}getCurrentLocale(){let{localeFix:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{localeFix:!1};if(d.queryLocale)return d.queryLocale;let t=this._coreLocale.getCurrentLocale();return e||t!==n.Gp?e&&t===n.zE.Spanish.key?n.Gp:t:n.zE.Spanish.key}setCurrentLocale(e,t){this._coreLocale.setCurrentLocale(e,t)}getSupportLocales(){return d.getSupportLocales()}formatLocalePath(e){let t={forceAddLocalePrefix:!1,locale:this.getCurrentLocale(),...e},{path:i}=t;if(!i.startsWith("/"))throw Error("path invalid, please confirm its startsWith /");let{locale:r,forceAddLocalePrefix:n}=t;return d.formatRoutePath({locale:r,path:i,forceAddLocalePrefix:n})}_listenCookieChange(){}isBrowser(){return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement}constructor(e){let t=e.locale;if(!t&&this.isBrowser()){let e=d.getLocalPrefix(window.location.pathname);e&&(t=e===n.Gp?n.zE.Spanish.key:e)}this.options=Object.assign({},{defaultLocale:"en",isServer:!1},e,{locale:t,cookieName:l}),this._coreLocale=new s({supportLocales:d.getSupportLocales(),...this.options}),this._listenCookieChange()}}d.CookieName=l,d.queryLocale=void 0},956479:function(e,t,i){"use strict";i.d(t,{E:()=>c});var r=i("827322"),n=i("806061"),o=i("736951"),a=i("408835");let s=(0,n.C)({id:"LvAsyncFuncExec",initial:"execing",states:{execing:{invoke:{id:"invokeAsyncFunc",src:(0,r.C)("invokeAsyncFunc",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"success",actions:"notifySuccess"},onError:{target:"fail",actions:"notifyError"}}},success:{type:"final"},fail:{type:"final"}}},{services:{invokeAsyncFunc:e=>e.task.func()},actions:{notifySuccess:(0,o.lj)((e,t)=>({type:"EXEC_SUCCESS",id:e.id,data:t.data})),notifyError:(0,o.lj)((e,t)=>({type:"EXEC_FAIL",id:e.id,data:t.data}))}}),l=0,c=(0,n.C)({id:"LvAsyncFuncExecs",context:{clearTaskInterval:3e3,deleteMorethan:2e3,taskActor:[]},initial:"idle",invoke:{id:"clearTaskInterval",src:(0,r.C)("clearTaskInterval",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},states:{idle:{},busy:{}},on:{ADD_TASK:{actions:"addExecTask"},EXEC_SUCCESS:{actions:["notifyExecSuccess","markClearActor"]},EXEC_FAIL:{actions:["notifyExecFail","markClearActor"]},CLEAR_DELTE_TASK:{actions:"clearActor"}}},{services:{clearTaskInterval:e=>t=>{let i=setInterval(()=>{t({type:"CLEAR_DELTE_TASK"})},e.clearTaskInterval);return()=>{clearInterval(i)}}},actions:{addExecTask:(0,o.f0)({taskActor:(e,t)=>{let i=[...e.taskActor],r=l++;return i.push({id:r,successType:t.successType,failType:t.failType,extInfo:t.extInfo,deleteAt:void 0,actor:(0,a.Cs)(s.withContext({id:r,task:{func:t.exec}}))}),i}}),notifyExecSuccess:(0,o.lj)((e,t)=>{let i=e.taskActor.find(e=>e.id===t.id);if(!i)throw Error("\u67E5\u65E0\u5BF9\u5E94\u4EFB\u52A1");return{type:i.successType,data:t.data,extInfo:i.extInfo}}),notifyExecFail:(0,o.lj)((e,t)=>{let i=e.taskActor.find(e=>e.id===t.id);if(!i)throw Error("\u67E5\u65E0\u5BF9\u5E94\u4EFB\u52A1");return{type:i.failType,data:t.data,extInfo:i.extInfo}}),markClearActor:(0,o.f0)((e,t)=>{let i=e.taskActor.find(e=>e.id===t.id);if(i){var r,n;null===(n=i.actor)||void 0===n||null===(r=n.stop)||void 0===r||r.call(n),i.deleteAt=Date.now()}return{taskActor:e.taskActor.slice()}}),clearActor:(0,o.f0)({taskActor:e=>{let t=Date.now();return e.taskActor.filter(i=>!i.deleteAt||t-i.deleteAt<e.deleteMorethan)}})}})},856135:function(e,t,i){"use strict";i.d(t,{Ig:function(){return g},ZN:function(){return _},_N:function(){return f},tN:function(){return p}});var r=i(806061),n=i(736951),o=i(725071),a=i(216158),s=i(458802),l=i(41723),c=i.n(l);function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[];for(let r=e;r<=t;r++)i.push(r);return i}function u(e){return[-1,31,(0,s.AR)(null!=e?e:"")?29:28,31,30,31,30,31,31,30,31,30,31]}function p(e){let t=c()(e).isBefore(c()().subtract(o.xF,"year")),i=c()(e).isAfter(c()().subtract(o.DE,"year")),r=c()(e).isBefore(c()().subtract(o.pk,"year"));return t&&i||r}function _(e){return c()(e).isAfter(c()().subtract(o.xF,"year"))}function g(e,t,i){return void 0!==i&&[a.sk].some(e=>null==i?void 0:i.includes(e))?c()(t).isBefore(c()().subtract(o.t0,"year")):[a.yp.KR,a.yp.ID].some(t=>t===e)?c()(t).isBefore(c()().subtract(o.t0,"year")):c()(t).isBefore(c()().subtract(o.GW,"year"))}let h=d(1,12),m=d(1,31),v=d(1900,new Date().getFullYear()),f=(0,r.C)({id:"birthDayPicker",initial:"verfiying",context:{month:-1,date:-1,year:-1,months:h,dates:m,years:v},states:{verfiying:{always:[{target:"valid",cond:"isValid"},{target:"invalid"}]},valid:{},invalid:{}},on:{CHANGE_MONTH:{target:"verfiying",actions:["changeMonth"]},CHANGE_DATE:{target:"verfiying",actions:["changeDate"]},CHANGE_YEAR:{target:"verfiying",actions:["changeYear"]},CHANGE_CUSTOM_VERFICATION:{actions:["changeCustomVerfication"]}}},{actions:{changeMonth:(0,n.f0)((e,t)=>{let{value:i}=t,r=u(-1===e.year?void 0:String(e.year));return{dates:r[i]?d(1,r[i]):m,month:i,date:!e.date||e.date<=0||e.date<=r[i]?e.date:r[i],year:e.year}}),changeDate:(0,n.f0)({date:(e,t)=>t.value}),changeYear:(0,n.f0)((e,t)=>{let{value:i}=t,r=u(-1===i?void 0:String(i));return{...e,dates:d(1,r[-1===e.month?1:e.month]),date:!e.date||e.date<=0||e.date<=r[e.month]?e.date:r[e.month],year:i}}),changeCustomVerfication:(0,n.f0)((e,t)=>({customVerfication:t.callback}))},guards:{isValid:e=>{let{month:t,date:i,year:r,customVerfication:n}=e;return[t,i,r].every(e=>-1!==e)&&(!n||n(t,i,r))}}})},411667:function(e,t,i){"use strict";i.d(t,{IH:function(){return p},aR:function(){return h}});var r=i(827322),n=i(806061),o=i(736951),a=i(957104),s=i(177634),l=i(733458),c=i(613538);let{COOKIE_CONSENT_PROMPT_CONFIG:d}=a.g,u={status:0,settings:{firstPartyAnalytics:!1,GoogleAnalytics:!1},updatedTime:0};function p(){let e=e=>{let t=Date.now()-Number(e.updatedTime);s.I.setString(d,JSON.stringify(e),Date.now()+(34128e6-t))},t=l.m.getJson(d);if(t)!s.I.getJson(d)&&e(t),l.m.removeItem(d);else{let t=s.I.getJson(d);t&&!l.m.getString("re-expires")&&(e(t),l.m.setString("re-expires","1"))}}function _(){p();let e=s.I.getJson(d);return e?e:u}class g extends c.kH{getUserInfo(){return{device_id:window.GATEWAY_INJECTED_WEB_ID||"",current_region:window.__locationCountryCode||"",carrier_region:window.__locationCountryCode||""}}}let h=(0,n.C)({id:"cookiesConsentPromptMachine",initial:"loading",context:{..._()},states:{loading:{invoke:{id:"fetchFromCMP",src:(0,r.C)(async()=>{try{let e=await c.ZP.init({domain:"https://feed-api.capcut.com",appId:3006,bid:"capcut_web",entityKeys:["data-cookie-google-analytics","data-cookie-google-ads"],mode:c.AR.DEV,region:c.yp.SG,debug:!0,modules:{info:new g,thirdParties:[new c.Qb(c.P3,["data-cookie-google-analytics","data-cookie-google-ads"],c.yy.AND)]},plugins:[],api:{consent:{fetch:()=>({version:"v1"})}},storageType:c.Z1.localStorage,fetchDataAtInit:!1});console.log("consent init",e);let t=await c.ZP.fetch();console.log("consent fetch",t);let i=c.ZP.getConsentEntities(["data-cookie-google-analytics","data-cookie-google-ads"]);if(console.log("consent fetch entities",i),0===i.length)return;let r=c.ZP.getConsentRecords(["data-cookie-google-analytics","data-cookie-google-ads"]);if(console.log("consent fetch records",r),2===i.length&&2!==r.length){console.warn("consent remove local",i),s.I.removeItem(d);return}}catch(e){console.error(e)}},null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"showOrClose",actions:["retrievePersistentConfig"]}}},showOrClose:{always:[{target:"show",cond:"shouldShowPrompt"},{target:"close",cond:"didUserAccpetOrDecline"}]},show:{entry:["resetConfig"],invoke:{id:"listeningUserAction",src:(0,r.C)("listeningUserAction",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},on:{ACCPET:{target:"close",actions:["accpetAllCookies","persistConfig"]},DECLINE:{target:"close",actions:["accpetEssentialCookies","persistConfig"]},DONE:{target:"close",actions:["retrievePersistentConfig"]}}},close:{}},on:{TOGGLE_SETTING:{actions:["toggleSetting","persistConfig"]}}},{services:{listeningUserAction:()=>e=>{function t(t){if(t.storageArea===localStorage&&t.key===d)e("DONE")}return"undefined"!=typeof window&&window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}},actions:{resetConfig:(0,o.f0)(()=>u),accpetAllCookies:(0,o.f0)(()=>({status:1,settings:{firstPartyAnalytics:!0,GoogleAnalytics:!0},updatedTime:Date.now()})),accpetEssentialCookies:(0,o.f0)(()=>({status:2,settings:{firstPartyAnalytics:!1,GoogleAnalytics:!1},updatedTime:Date.now()})),toggleSetting:(0,o.f0)((e,t)=>{let{settings:i}=e;return{status:1,settings:{...i,...t.settings},updatedTime:Date.now()}}),persistConfig:e=>{s.I.setString(d,JSON.stringify(e),Number(e.updatedTime)+Number(34128e6)),e.settings.GoogleAnalytics?c.ZP.updateConsentRecords(["data-cookie-google-analytics","data-cookie-google-ads"],c.lg.APPROVE,"approve").then(e=>{console.log("mhtest",e)}):c.ZP.updateConsentRecords(["data-cookie-google-analytics","data-cookie-google-ads"],c.lg.REJECT,"reject").then(e=>{console.log("mhtest",e)})},retrievePersistentConfig:(0,o.f0)(_)},guards:{shouldShowPrompt:e=>{let{status:t,updatedTime:i}=e,r=Date.now()-i>34128e6;return 0===t||r},didUserAccpetOrDecline:e=>{let{status:t,updatedTime:i}=e,r=[1,2].some(e=>e===t),n=Date.now()-i<=34128e6;return r&&n}}})},353808:function(e,t,i){"use strict";i.r(t),i.d(t,{BindPassport:()=>w,CancelPassport:()=>m,AuthThirdPartyPlatform:()=>j,VerifyPassport:()=>y,default:()=>U,SEND_CODE_TYPE:()=>F});var r,n,o,a=i("827322"),s=i("801497"),l=i("89212"),c=i("232146"),d=i.n(c),u=i("593553"),p=i("287272"),_=i("306224"),g=i("918488"),h=i("9894");class m{cancelUserCheck(){return this._sdk.request({url:"/passport/web/cancel/user_check/",method:"GET"})}cancelCheck(e){return this._sdk.cancel.checkIfPass(e)}cancelConfirm(e){return this._sdk.cancel.confirm(e)}constructor(e){this._sdk=e}}var v=i("435665"),f=i.n(v);class y{mobileSendCodeWithLogin(){return this._sdk.verify.sendCode({})}mobileValidateCodeWithLogin(e){return this._sdk.verify.validateMobile(e)}emailSendCodeWithLogin(){return this._sdk.verify.sendEmailCode({})}emailValidateCodeWithLogin(e){return this._sdk.verify.validateEmail(e)}thirdValidateCodeWithLogin(e){return this._sdk.request({url:"/passport/web/auth/authorize/",method:"POST",data:e})}pwdValidateCodeWithLogin(e){let t=f().encryptParams(e,["password"]);return this._sdk.request({url:"/passport/web/account/authorize/",method:"POST",data:t})}constructor(e){this._sdk=e}}class w{accountInfoV2(){return this._sdk.request({url:"/passport/account/info/v2/",method:"GET"})}thirdpartySignInWithBindEmail(e){return this._sdk.request({url:"/passport/web/auth/bind_with_email_login/",method:"POST",data:{aid:this._aid,need_email:0,...e}})}constructor(e,t){this.bindAuth=e=>this._sdk.bind.bindAuth({...e,extra_params:{redirect_uri:"https://www.capcut.com/third-party-entrance",...e.extra_params}}),this.bindTiktokAuth=e=>this._sdk.bind.bindAuth({...e,extra_params:{ttop_v:"v2",fields:"[open_id, union_id, avatar_url, display_name]",redirect_uri:"https://www.capcut.com/third-party-entrance",...e.extra_params}}),this.unbindAuth=e=>this._sdk.bind.unbindAuth(e),this.sendBindEmailCode=e=>this._sdk.bind.sendEmailCode(e),this.bindEmail=e=>this._sdk.bind.bindEmail(e),this.rebindSendCodeToOldEmail=e=>this._sdk.rebind.sendCodeToOldEmail(e),this.rebindValidateOldEmail=e=>this._sdk.rebind.validateOldEmail(e),this.rebindSendCodeToNewEmail=e=>this._sdk.rebind.sendCodeToNewEmail(e),this.rebindEmail=e=>this._sdk.rebind.rebindEmail(e),this._sdk=e,this._aid=t}}var b=i("786377");let S=e=>{let t;let i=e.toString(),r=[];for(let e=0;e<i.length;e++)0<=(t=i.charCodeAt(e))&&t<=127?r.push(t):128<=t&&t<=2047?(r.push(192|31&t>>6),r.push(128|63&t)):(2048<=t&&t<=55295||57344<=t&&t<=65535)&&(r.push(224|15&t>>12),r.push(128|63&t>>6),r.push(128|63&t));for(let e=0;e<r.length;e++)r[e]&=255;return r},C=e=>{let t=[],i=[];if(void 0===e)return"";i=S(e);for(let e=0,{length:r}=i;e<r;++e)t.push((5^i[e]).toString(16));return t.join("")},k="x-idc-region",E=()=>new Date(Date.now()+3e4),I=e=>{try{e?b.Z.set(k,e,{expires:E()}):b.Z.remove(k)}catch(e){}};class P{async subjectLogin(e){let t={login_subject_uid:C(e.loginSubjectUid),user_identity_id:e.userIdentityId,aid:this._aid,subject_aid:e.subjectAid,mix_mode:1,fixed_mix_mode:1};I(e.idcRegion);try{return(await this._sdk.request({url:"/passport/aff/web/subject/login",method:"POST",data:t})).data}catch(e){return I(),Promise.reject(e)}}subjectLogout(e){var t;let i="/passport/aff/web/logout",r={account_sdk_source:"web",aid:e.aid||this._aid,subject_aid:e.subjectAid,next:e.redirectUrl||"",only_logout_aff:e.onlyLogoutAff};if(I(),e.notRedirect)return this._sdk.request({url:i,method:"GET",data:r});return window.location.href=(0,a.C)(`${i}?${Object.keys(t=r).map(e=>{let i=t[e],r="object"==typeof i?JSON.stringify(i):i;return`${encodeURIComponent(e)}=${encodeURIComponent(r)}`}).join("&")}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),Promise.resolve()}constructor(e,t){this._sdk=e,this._aid=t}}var A=i("673664"),R=i.n(A),x=i("93420"),N=i("795640");var L=((r={})[r.Mobile=1]="Mobile",r[r.Email=2]="Email",r[r.Username=3]="Username",r[r.ThirdParty=4]="ThirdParty",r);let O="undefined"!=typeof location?`https://${location.hostname}/`:"",M={};class D{async updateDomainByRegion(e){var t;if((null===(t=window._libra_abtest_uuid)||void 0===t?void 0:t.enable_looki_passport)===!0){if("us"===e){let t=await this.getDomainByCountryCode(e);this.baseURL=`${t}/`;return}this.baseURL=O}}updateRegionByQR(e){if("us"===e.country_code){this.baseURL=`${e.domain}/`;return}this.baseURL=O}async updateRegionByEmail(e){let t=M[e];if(t){this.baseURL=t;return}await this.updateRegion({type:L.Email,hashed_id:this.hash(e)}),M[e]=this.baseURL}async updateRegionByOpenId(e){let t=M[e];if(t){this.baseURL=t;return}await this.updateRegion({type:L.ThirdParty,hashed_id:this.hash(e)}),M[e]=this.baseURL}async updateRegion(e){var t,i,r,n;if((null===(t=window._libra_abtest_uuid)||void 0===t?void 0:t.enable_looki_passport)!==!0)return;if("US"==window.__locationCountryCode||(null===(i=window.__locationInfo)||void 0===i?void 0:i.code)==="US"||(null===(n=window.ip_location_info)||void 0===n?void 0:null===(r=n.Country)||void 0===r?void 0:r.Code)==="US"||(0,N._)(_._S.capcut)){this.baseURL="https://edit-api-web-va-us-looki.capcut.com/";return}let o=await this._sdk.request({url:"/passport/web/region/",method:"POST",data:e});if(o.error_code)throw Error(`[passport]${o.error_code}:${o.description}`);if("us"===o.country_code&&o.domain){this.baseURL=`${o.domain}/`;return}this.baseURL=O}hash(e){let t=`${e}aDy0TUhtql92P7hScCs97YWMT-jub2q9`;return R()("sha256").update(t).digest("hex")}async getDomainByCountryCode(e){let t=(await x.Z.request({method:"get",url:"/looki/v1/get_domain",baseURL:O,params:{aid:_.yM.APP_ID,region:e}})).data;if(t.status_code)throw Error(`[looki]${t.status_code}:${t.message}`);return t.data}constructor(e,t=O){this._sdk=e,this.baseURL=t,this.defaultBaseURL=O}}var j=((n={}).tiktok="tiktok",n.google="google",n.facebook="facebook",n);var F=((o={})[o.REGISTER=1]="REGISTER",o[o.REGISTER_RETRY=2]="REGISTER_RETRY",o);class U{async checkLogin(){return await this._sdk.login.checkLogin({})}async checkEmailHasRegister(e){return await this._domainHelper.updateRegionByEmail(e),await this._sdk.extra.checkEmailRegistered({email:e})}async sendEmailCode(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return await this._domainHelper.updateRegionByEmail(e),await this._sdk.login.sendEmailCode({email:e,password:t,extra_params:{type:i}})}async emailCodeVerify(e,t){return await this._sdk.request({url:"/passport/web/email/register/code_verify",method:"POST",data:(0,l.J4)({email:e,code:t,type:1},["email","code","type"])})}async emailRegister(e,t,i,r,n,o){await this._domainHelper.updateRegionByEmail(e);let a=this._regionExtraParams();return await this._sdk.login.emailRegister({email:e,password:t,code:i,extra_params:{email_ticket:null==o?void 0:o.emailTicket,birthday:r,force_user_region:n,biz_param:{invite_code:null==o?void 0:o.invitedCode},...a},ifLogin:!0})}async emailLogin(e,t){await this._domainHelper.updateRegionByEmail(e);let i=this._regionExtraParams();return await this._sdk.login.emailLogin({email:e,password:t,extra_params:{...i}})}async cancelLogin(e,t){return await this._sdk.request({url:"/passport/web/cancel/login",method:"POST",data:{token:e,restoreType:t}})}async sendForgetPwdEmailCode(e,t){return await this._domainHelper.updateRegionByEmail(e),await this._sdk.verify.notLoginSendEmailCode({email:e,extra_params:{type:4,next:t}})}async validateForgetPwdCode(e,t){return await this._domainHelper.updateRegionByEmail(e),await this._sdk.verify.notLoginValidateEmail({email:e,code:t,extra_params:{type:4}})}async resetForgetPwd(e,t){return await this._sdk.forgetPwd.resetPwdByEmailTicket({ticket:e,password:t})}getQRCode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._sdk.qrcodeLogin.getQrcode({next:e})}async checkQrconnect(e){e.extra_params=this._regionExtraParams();try{return await this._sdk.qrcodeLogin.checkQrconnect(e)}catch(i){let{country_code:e,domain:t}=i;if("us"===e&&"string"==typeof t)return this._domainHelper.updateRegionByQR({country_code:e,domain:t}),{status:"new"};throw i}}async uploadAvatar(e){return await this._sdk.request({url:"/user/update/upload_avatar",method:"POST",data:e})}signin(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,window.location.href=(0,a.C)(`${window.location.origin}${p.l.LOGIN.PATH}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}signinWithWindow(e,t,i){let r=window.screen.height,n=window.screen.width,o=`${location.origin}/passport/web/web_login/`,s=`${location.origin}/lv/v1/user/web/login/third_callback`,l=`${s}${(null==i?void 0:i.isInvitePage)?`?invite_code=${null==i?void 0:i.invitedCode}`:""}`;return window.open((0,a.C)(`${o}?account_sdk_source=web&aid=${null!=t?t:_.yM.APP_ID}&next=${encodeURIComponent(l)}&platform_app_id=${e}&use_local_host=1&action=${(null==i?void 0:i.loginOnly)?"login_only":"undefined"}&scopes=email`,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"name=login",`fullscreen=1,width=800,height=600,top=${(r-30-600)/2},left=${(n-800)/2}`)}async signinWithCode(e){let t=this._regionExtraParams();if(e.extra_params={...e.extra_params,...t},"tiktok"===e.name&&e.code){let{access_token:t}=await (0,g.hP)({code:e.code,appName:e.appName,aid:e.appId});if(!t)throw Error("[passport] bad access_token");let{user:i}=await (0,g.$W)(t);if(!i)throw Error("[passport] bad tt user info");let{union_id:r,open_id:n}=i;if(!r)throw Error("[passport] bad tt union_id");await this._domainHelper.updateRegionByOpenId(r),delete e.code,e.access_token=t;let o={access_token:t,openid:n,platform_app_id:e.platform_app_id};return this.authSignIn(o,e)}if("tiktok"===e.name&&e.access_token&&!e.openid){let t=e.access_token,{user:i}=await (0,g.$W)(t);if(!i)throw Error("[passport] bad tt user info");let{union_id:r,open_id:n}=i;if(!r)throw Error("[passport] bad tt union_id");await this._domainHelper.updateRegionByOpenId(r);let o={access_token:t,openid:n,platform_app_id:e.platform_app_id};return this.authSignIn(o,e)}if("google"===e.name&&e.access_token_secret){let{sub:t}=(0,u.o)(e.access_token_secret);if(!t)throw Error("[passport] bad jwt");await this._domainHelper.updateRegionByOpenId(t);let i={access_token_secret:e.access_token_secret,platform_app_id:e.platform_app_id};return this.authSignIn(i,e)}if("google"===e.name&&!e.access_token_secret){let t={access_token:e.access_token,openid:e.openid,code:e.code,platform_app_id:e.platform_app_id};return this.authSignIn(t,e)}if("facebook"===e.name&&e.access_token&&e.openid){await this._domainHelper.updateRegionByOpenId(e.openid);let t={access_token:e.access_token,openid:e.openid,platform_app_id:e.platform_app_id};return this.authSignIn(t,e)}return this.authSignIn(e,e)}scanLoginWithWindow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=window.screen.height,r=window.screen.width,n=`${location.origin}${p.l.SCAN_QR_CODE.PATH}${function(e){let t=new URLSearchParams;for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)){let r=e[i];if(null!=r&&""!==r){if(Array.isArray(r))for(let e of r)null!=e&&""!==e&&t.append(i,e);else t.set(i,r)}}return`?${t.toString()}`}({...t,scan_type:e})}`;return window.open((0,a.C)(n,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"name=login",`fullscreen=1,width=680,height=513,top=${(i-30-513)/2},left=${(r-680)/2}`)}async transferTokenAuth(e){await this._domainHelper.updateDomainByRegion(e.country_code);let t=new FormData;t.append("aid",_.yM.APP_ID),t.append("token",e.token),t.append("state",e.state);let i=await x.Z.request({url:"/passport/transfer/token_auth/",baseURL:this._domainHelper.baseURL,method:"POST",data:t,params:this._regionExtraParams(),withCredentials:!0});if(200!==i.status)throw Error(`[passport] status:${i.status}`);return i.data}signout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;this._sdk.login.logout({next:e})}getAccountInfo(){return this._sdk.account.getAccountInfo({})}_regionExtraParams(){var e;return(null===(e=window._libra_abtest_uuid)||void 0===e?void 0:e.enable_looki_passport)===!0?{check_region:"1"}:{}}sendPhoneCode(e){return this._sdk.login.sendCode(e)}phoneCodeLogin(e){return this._sdk.login.smsLogin(e)}constructor(e){this.authSignIn=async(e,t)=>{if(t.login_only)return this._sdk.login.authLogin(t);try{return await this.bindPassportSdk.thirdpartySignInWithBindEmail(e)}catch(e){return this._sdk.login.authLogin(t)}};let t=this._regionExtraParams();this._aid=e.aid||Number(_.yM.APP_ID);let i=new(d())({...e,aid:this._aid,scene:e.scene||"normal",region:_.yM.CHANNEL,captchaHost:e.isBoe?`//boei18n-verify.${(0,h.vK)()}/`:"",language:s.ZP.language||_.yM.LAN,requestInterceptors:[e=>(null==e?void 0:e.url)==="/passport/web/region/"?(e.baseURL=this._domainHelper.defaultBaseURL,Promise.resolve(e)):(e.params={...e.params,...t},e.baseURL=this._domainHelper.baseURL,Promise.resolve(e))]});this._sdk=i,this.cancelPassportSdk=new m(i),this.verifyPassportSdk=new y(i),this.bindPassportSdk=new w(i,this._aid),this.affPassportSdk=new P(i,this._aid),this._domainHelper=new D(i)}}},732599:function(e,t,i){"use strict";i.d(t,{MY:function(){return u},XX:function(){return d},qY:function(){return l},s3:function(){return o},tc:function(){return c}});var r=i(733458),n=i(914028);let o=e=>`HAS_SHOW_PWA_GUIDANCE_${e}`,a=()=>{let e=navigator.userAgent.indexOf("edge")>-1;return!!(("chrome"===(0,n.Z)().name||e)&&"serviceWorker"in navigator)||!1},s="undefined"!=typeof Storage,l=e=>!(!(a()&&s&&window.deferredPrompt)||r.m.getString(o(e)))&&!0,c=(()=>{let e="undefined"!=typeof window,t=t=>!!e&&!!window.matchMedia&&window.matchMedia(t).matches,i=t("(display-mode: standalone)");return()=>{let e=t("(display-mode: standalone)"),r=t("(display-mode: fullscreen)");return i=!!e||r&&i}})(),d=()=>{let e;if(c())e=!1;else if("undefined"!=typeof window){let t=new URL(window.location.href).searchParams;e=(null==t?void 0:t.get("open_from_pwa"))||void 0}return!!e},u=()=>{let e="not_pwa";if("undefined"!=typeof window&&c()){let t=new URL(window.location.href).searchParams;e=(null==t?void 0:t.get("pwa_from"))||"capcut"}return e}},264823:function(e,t,i){"use strict";i.d(t,{Bq:function(){return a},QZ:function(){return c},Wf:function(){return o},aB:function(){return s},jb:function(){return l}});var r,n=i(719369);let o=["click"];[...o];let a="report",s={[n.X_.GROUP]:"fb_groups",[n.X_.PAGE]:"fb_pages",[n.X_.INSTAGRAM]:"reels"},l={[n.Tz.YouTube]:"youtube",[n.Tz.YouTubeShorts]:"ytb_shorts"};var c=((r={})[r.First=1]="First",r[r.Second=2]="Second",r)},149803:function(e,t,i){"use strict";let r;i.d(t,{y:function(){return y}});var n=i(838255),o=i(759381),a=i(3767),s=i(264823),l=i(306224),c=i(970986),d=i(506464),u=i(718168),p=i(64537),_=i(722169);let g={user_id:"",user_is_login:!1,user_is_subscribed:!1,user_is_new:!1},h={isProd:!0,log:!1,userInfo:g,isABDependenciesReady:!0},m="TEA_STORE_TOKEN_RET",v="TEA_STORE_WEB_INFO";class f{get tea(){return this._tea}awaitForInit(){if(!this.isInited)return new Promise(e=>{this.awaitInitQueue.push(e)})}awaitForStart(){if(!this.isStarted)return new Promise(e=>{this.addStartCallBack(e)})}awaitABDependenciesReady(){if(!this.isABDependenciesReady)return new Promise(e=>{this.ABDependenciesReadyQueue.push(e)})}setABDependenciesReady(){!this.isABDependenciesReady&&(this.getABTestConfig("enable_looki_hook",!1),this.getABTestConfig("enable_looki_uid",!1),this.getABTestConfig("enable_looki_ip",!1),this.getABTestConfig("enable_age_gate_signup",!1)),this.isABDependenciesReady=!0,this.ABDependenciesReadyQueue.forEach(e=>{e()}),this.ABDependenciesReadyQueue=[]}init(e){var t,i,r,n,o,a,s,d,u,p,_,g;this.options=Object.assign({},h,e),this._web_id=this.options.web_id,this.isABDependenciesReady=null===(p=this.options.isABDependenciesReady)||void 0===p||p,this._tea.init({disable_auto_pv:!0,disable_sdk_monitor:!0,app_id:null!==(_=null==e?void 0:e.aid)&&void 0!==_?_:Number(l.yM.APP_ID),channel:l.yM.CHANNEL,log:this.options.log,enable_ab_test:!0,ab_channel_domain:`https://${c.Vj.libra}`,disable_webid:!!this._web_id,enable_stay_duration:!!(null==e?void 0:e.enable_stay_duration),maxDuration:Number(null==e?void 0:e.maxDuration)||864e5,enable_debug:!!(null==e?void 0:e.enable_debug),channel_domain:`https://${c.Vj.tea}`,autotrack:(null==e?void 0:e.useAutoTrack)?{custom:"tea",svg:!0}:void 0}),this.config({app_version:(null==e?void 0:e.appVersion)?`1.0.${null==e?void 0:e.appVersion.split(".").pop()}`:"",_staging_flag:this.options.isProd?0:1,web_id:this._web_id,user_agent:(null===(i=window)||void 0===i?void 0:null===(t=i.navigator)||void 0===t?void 0:t.userAgent)||"",...this.options.userInfo,custom:{...null!==(g=null===(r=this.options.userInfo)||void 0===r?void 0:r.custom)&&void 0!==g?g:{},looki_uid:!!(null===(n=window)||void 0===n?void 0:n.__looki_uid),enable_looki_uid:!!(null===(o=window)||void 0===o?void 0:o.__enable_looki_uid),enable_looki:!!(null===(a=window)||void 0===a?void 0:a.__enable_looki),looki_reason:(null===(s=window)||void 0===s?void 0:s.__looki_reason)||"no reason",gray_config_key:null===(d=window)||void 0===d?void 0:d.__gray_config_key,lvweb_env:null===(u=window)||void 0===u?void 0:u.__lvweb_env}}),this.clearInitQueue(),this.register()}async start(){if(!this.isInited&&!this.isStarted){let[e,t]=(0,u.C1)();e&&(this._web_id=t)}this.isStarted=!0,this.setABDependenciesReady(),this._tea.start(),await this.setWebIdToCustom(),this.execStartCallBacks(),this.sendCacheEvent()}async getABTestConfig(e,t){return(await this.awaitForInit(),await this.awaitABDependenciesReady(),this.isStarted)?new Promise(i=>{this._tea.getVar(e,t,e=>{i(e)})}):(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),Promise.resolve(t))}getABTestConfigSync(e,t,i){var r,n;return Promise.resolve().then(()=>this.awaitForInit()).then(()=>this.awaitABDependenciesReady()).then(()=>{!this.isStarted&&(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),null==i||i(t)),this._tea.getVar(e,t,e=>{null==i||i(e)})}),null!==(n=null===(r=window._libra_abtest)||void 0===r?void 0:r[e])&&void 0!==n?n:t}async getABTestConfigSilent(e,t){return(await this.awaitForInit(),await this.awaitABDependenciesReady(),this.isStarted)?new Promise(i=>{this._tea.getAllVars(r=>{var n,o;i(null!==(o=null==r?void 0:null===(n=r[e])||void 0===n?void 0:n.val)&&void 0!==o?o:t)})}):(console.warn("[WARNING]@byted-image/reporter getABTestConfig failure, cause sdk is not allow to started"),Promise.resolve(t))}report(e,t,i){var r,n;if((null==i?void 0:i.hiddenPageReport)===!1&&this.currentPageHidden){(null===(n=this.options)||void 0===n?void 0:n.log)&&console.info("Tea Repoter Reject:",`hiddenPageReport => ${null==i?void 0:i.hiddenPageReport}; currentPageHidden => ${this.currentPageHidden}`);return}if(!(this.isStarted&&this.isSetWebId)){this.cachedEvents.add({event:e,params:t});return}(null===(r=this.options)||void 0===r?void 0:r.log)&&console.info("Tea Repoter:",e,t),this.tea.event(e,t)}reportBecon(e,t){var i;if(!(this.isStarted&&this.isSetWebId)){this.cachedBeaconEvents.add({event:e,params:t});return}(null===(i=this.options)||void 0===i?void 0:i.log)&&console.info("Tea Repoter(becon):",e,t),this.tea.beconEvent(e,t)}reportPredefinePageView(e){var t;if(!(this.isStarted&&this.isSetWebId)){this.cachedPredefinePageView=e;return}(null===(t=this.options)||void 0===t?void 0:t.log)&&console.info("Tea Repoter:",event,e);let{isFirstVisitPage:i,isSessionStartPage:r}=(0,p.H)();e.is_first_visit_page=i?"1":"0",e.is_session_start_page=r?"1":"0",this._tea.predefinePageView(e)}sendCacheEvent(){if(this.cachedPredefinePageView&&this.reportPredefinePageView(this.cachedPredefinePageView),this.cachedEvents.size){for(let{event:e,params:t}of this.cachedEvents)this.report(e,t);this.cachedEvents.clear()}if(this.cachedBeaconEvents.size){for(let{event:t,params:i}of this.cachedBeaconEvents){var e;(null===(e=this.options)||void 0===e?void 0:e.log)&&console.info("Tea Repoter(becon):",t,i),this.reportBecon(t,i)}this.cachedBeaconEvents.clear()}}updateUserInfo(e){this.config({...e})}resetUserInfo(){this.config({...g})}destroy(){this.unregister()}getToken(){if(void 0!==this._web_id)return Promise.resolve({web_id:this._web_id});let e=window.GATEWAY_INJECTED_WEB_ID;if(e)return Promise.resolve({web_id:e});let t=window[v];if(void 0!==t)return Promise.resolve(t);let i=window[m];return i?i:(window[m]=new Promise(e=>{this._tea.getToken(t=>{(null==t?void 0:t.web_id)?window[v]=t:window[m]=void 0,e(null!=t?t:{})},2e3)}).catch(()=>(window[m]=void 0,{})),window[m])}async setWebIdToCustom(){var e,t,i,r;let{web_id:n}=await this.getToken();!n&&a.W.error("reporter getToken not get web id",Error(),{content:"reporter getToken not get web id",level:"error"});let{custom:o}=null!==(r=null===(e=this.getConfig())||void 0===e?void 0:e.header)&&void 0!==r?r:{};this.config({custom:{...o,user_agent:(null===(i=window)||void 0===i?void 0:null===(t=i.navigator)||void 0===t?void 0:t.userAgent)||"",web_id:n}}),this.isSetWebId=!0}config(e){var t,i,r;this.fixEsLanguage(e);let{custom:n}=null!==(i=null===(t=this.getConfig())||void 0===t?void 0:t.header)&&void 0!==i?i:{};this._tea.inited&&this._tea.config({...e,custom:{...n,...null!==(r=null==e?void 0:e.custom)&&void 0!==r?r:{}}})}configUTParams(e){var t,i;let{custom:r}=null!==(i=null===(t=this.getConfig())||void 0===t?void 0:t.header)&&void 0!==i?i:{},{campaign_id:n,term:o,channel:a,extraCommonParams:s}=e;this.config({custom:{...r,...a,...s,campaign_id:n,keywords:o||a.keywords}})}getConfig(e){try{return this._tea.getConfig(e)}catch{return{}}}async asyncGetConfig(e){let t=this.getConfig(e);return(0,_.isEmpty)(t)?(await Promise.race([this.awaitForInit(),this.awaitForStart()]),this.getConfig(e)):t}enableTTWid(){this.config({enable_ttwebid:!0})}addStartCallBack(e){this.isStarted?e(null):this._startCallbacks.add(e)}checkEnableReport(){return this.isStarted&&this.isSetWebId}execStartCallBacks(){this._startCallbacks.forEach(e=>{e(null)})}clearInitQueue(){this.isInited=!0,this.awaitInitQueue.forEach(e=>{e()}),this.awaitInitQueue=[]}register(){s.Wf.forEach(e=>{window.document.addEventListener(e,this._reportWraperHandler)})}unregister(){s.Wf.forEach(e=>{window.document.removeEventListener(e,this._reportWraperHandler)})}reportWraperHandler(e){let t,i=0,r=e.composedPath(),n=e.type,o="",a="";for(t=r[i];t;){let{dataset:e}=t;if(e&&e[`${s.Bq}Events`])break;t=r[++i]}if(t){let{dataset:e}=t;o=JSON.parse((null==e?void 0:e[`${s.Bq}Events`])||""),a=JSON.parse((null==e?void 0:e[`${s.Bq}Params`])||"")}if(o){let e=o[n],t="",i={};if("object"==typeof e){var l,c;t=null!==(l=e.event)&&void 0!==l?l:"",i=null!==(c=e.params)&&void 0!==c?c:{}}else throw Error("report event error, please confirm events is obj");t&&this.report(t,{...a,...i})}}fixEsLanguage(e){var t,i;(null==e?void 0:null===(i=e.custom)||void 0===i?void 0:null===(t=i.lang)||void 0===t?void 0:t.toLocaleLowerCase())===d.zE.Spanish.key.toLocaleLowerCase()&&(e.custom.lang=d.Gp)}constructor(){this.isInited=!1,this.isStarted=!1,this.isABDependenciesReady=!0,this._tea=n.Z,this._startCallbacks=new Set,this.cachedEvents=new Set,this.cachedBeaconEvents=new Set,this.cachedPredefinePageView=void 0,this.isSetWebId=!1,this.currentPageHidden=!1,this.awaitInitQueue=[],this.ABDependenciesReadyQueue=[],(0,o.j)()&&document.addEventListener("visibilitychange",()=>{this.currentPageHidden=document.hidden})}}let y=()=>(!r&&(r=new f),r)},516261:function(e,t,i){"use strict";let r;i.d(t,{T:()=>a});let n=()=>"function"==typeof window.gtag;class o{start(){!function(){let e="undefined"!=typeof window?window.gtag:void 0;"function"==typeof e&&e("consent","update",{analytics_storage:"granted"})}(),this.setGtag("accept_cookie"),this.sendCache()}report(e,t,i){if(!e.checkEnableReport()&&n()){this.cachedEvents.add({eventName:t,options:i});return}this.cachedEvents.size>0&&this.sendCache(),this.setGtag(t,i)}sendCache(){this.cachedEvents.forEach(e=>{this.setGtag(e.eventName,null==e?void 0:e.options)}),this.cachedEvents.clear()}setGtag(e,t){!function(e,t,i){let r="undefined"!=typeof window?window.gtag:void 0;"function"==typeof r&&r(e,t,i)}("event",e,t)}constructor(){this.cachedEvents=new Set}}let a=()=>(!r&&(r=new o),r)},966090:function(e,t,i){"use strict";i.d(t,{S:function(){return n}});var r=i(149803);class n{report(e){this.reporter.report("account_restore_popup",e)}constructor(){this.reporter=(0,r.y)()}}},280667:function(e,t,i){"use strict";i.d(t,{g:function(){return n}});var r=i(149803);class n{report(e){this.reporter.report("account_restore_status",e)}constructor(){this.reporter=(0,r.y)()}}},394154:function(e,t,i){"use strict";i.d(t,{S:function(){return n}});var r=i(149803);class n{report(e){var t;this.reporter.report("age_gate_popup",{...e,signup_type:null!==(t=e.signup_type)&&void 0!==t?t:"email"})}constructor(){this.reporter=(0,r.y)()}}},545778:function(e,t,i){"use strict";i.d(t,{m:()=>g,C:()=>_});var r,n=i("149803");i("722169");var o=i("306224");let a="channel_default",s="capcutpc_bing",l="capcutpc_web_bing",c="capcutpc_youtube",d="capcutpc_web_youtube",u="359289";var p=i("516261");var _=((r={})[r.LoginIn=0]="LoginIn",r[r.SignUp=1]="SignUp",r[r.ForgetPwd=2]="ForgetPwd",r);class g{reportStatus(e){var t;this.reporter.reportBecon("login_status",{...e,enable_looki:(null===(t=window._libra_abtest_uuid)||void 0===t?void 0:t.enable_looki_passport)===!0});let i=function(e){let t=function(e){let{utm_medium:t,utm_source:i,ad_platform_id:r,gclid:n,pid:p,msclkid:_}=e;if("youtube"===i){if(p===o.yM.APP_ID)return d;if(p===u)return c}if(n){if(p===o.yM.APP_ID)return"capcutpc_web_google";if(p===u)return"google"}if(_&&"bingads_int"===r){if(p===o.yM.APP_ID)return l;if(p===u)return s}return"string"==typeof t&&"string"==typeof i?"referral"===t?i:a:a}(function(){let e=new URLSearchParams(window.location.originParams||location.search),t={};return e.forEach((e,i)=>{t[i]=e}),t}());return t===l||t===s?`Bing-${e}`:t===c||t===d?`YTB-${e}`:e}(e.is_login_new_user?"sign_up":"sign_in");(0,p.T)().report(this.reporter,i)}reportPageAction(e){var t;this.reporter.report("login_page",{...e,enable_looki:(null===(t=window._libra_abtest_uuid)||void 0===t?void 0:t.enable_looki_passport)===!0})}constructor(){this.reporter=(0,n.y)()}}},946464:function(e,t,i){"use strict";i.d(t,{F:function(){return o}});var r=i(149803),n=i(718168);class o{patchParams(e){let t={};try{let e=new n.dc(window.location.href).searchParams;t.enter_from=null==e?void 0:e.get("enter_from")}catch(e){}return{...t,...e}}report(e,t){let i=this.patchParams(e),{immediately:r}=t||{};r?this.reporter.reportBecon("login_signup_page",i):this.reporter.report("login_signup_page",i)}constructor(){this.reporter=(0,r.y)()}}},804846:function(e,t,i){"use strict";i.d(t,{V:function(){return n}});var r=i(149803);class n{authorizeWindowReport(e){void 0===e.current_page&&delete e.current_page,this.reporter.report("authorize_window",e)}notLoginPopupReport(e){void 0===e.current_page&&delete e.current_page,this.reporter.report("not_login_popup",e)}upLoadWindowReport(e){void 0===e.current_page&&delete e.current_page,this.reporter.report("upload_window",e)}linkFileFailReport(e){this.reporter.report("material_link_fail_show",e)}constructor(){this.reporter=(0,r.y)()}}},718168:function(e,t,i){"use strict";i.d(t,{B5:function(){return c},C1:function(){return a},dc:function(){return s},iq:function(){return l}});var r=i(719369),n=i(6689),o=i(264823);i(722169);let a=()=>{let e=window.GATEWAY_INJECTED_WEB_ID,t="string"==typeof e&&!!e;return[t,t?e:void 0]};class s extends URL{constructor(...e){super(...e),this.searchParams=new URLSearchParams(window.location.originParams||location.search)}}function l(e){var t;let{platform:i,facebookShareType:a,youtubeShareType:s,businessType:l}=e;if("number"==typeof s)return o.jb[s];if("number"==typeof a)return l===n.Tv.Graphic&&a===r.X_.INSTAGRAM?"ins":o.aB[a];return null!==(t=({[r.qS.TikTok]:"tiktok",[r.qS.TTAM]:"ttam"})[i])&&void 0!==t?t:i}function c(e){return Object.entries(e).map(e=>{let[t,i]=e;return null==i?"":`${t}=${i}`}).filter(Boolean).join("&")}},258062:function(e,t,i){"use strict";i.d(t,{eG:function(){return l},io:function(){return s}});var r,n=i(516261),o=i(149803),a=i(3767);var s=((r={}).APPLE="apple",r.GOOGLE="google",r.MAC="mac",r.WINDOWS="windows",r.MAC_INSTALLER="mac_installer",r.WIN_INSTALLER="win_installer",r);class l{report(e){this.reporter.report("click_download_channel",e),["mac","windows","mac_installer","win_installer"].includes(e.channel)&&"landing_page"===e.current_page&&!e.download_url&&a.W.error("platformSSR-clickDownloadChannel",Error("Home page download pcApp url empty"),{...e}),"mac"===e.channel||"mac_installer"===e.channel||"win_installer"===e.channel||"windows"===e.channel?(0,n.T)().report(this.reporter,"download_pc"):("apple"===e.channel||"google"===e.channel)&&(0,n.T)().report(this.reporter,"download_app")}reportForArticlePageButton(e,t,i){let r=new Map([["mac_download",i?"mac_installer":"mac"],["windows_download",i?"win_installer":"windows"],["app_store","apple"],["google_play","google"]]).get(e);r&&(this.reporter.reportBecon("click_download_channel",{...t,channel:r}),"mac"===r||"mac_installer"===r||"win_installer"===r||"windows"===r?(0,n.T)().report(this.reporter,"download_pc"):("apple"===r||"google"===r)&&(0,n.T)().report(this.reporter,"download_app"))}constructor(){this.reporter=(0,o.y)()}}},392417:function(e,t,i){"use strict";i.d(t,{n:function(){return n}});var r=i(149803);class n{report(e){this.reporter.report("promote_capcut_pc_detail_page_action",e)}constructor(){this.reporter=(0,r.y)()}}},120272:function(e,t,i){"use strict";i.d(t,{H:function(){return a},q:function(){return o}});var r,n=i(149803);var o=((r={}).HEADER="page_header",r.FOOTER="page_footer",r);class a{report(e){this.reporter.report("switch_homepage_tab",e)}constructor(){this.reporter=(0,n.y)()}}},64537:function(e,t,i){"use strict";i.d(t,{H:function(){return r}});function r(){let e=!1,t=!1,i=window.GATEWAY_INJECT_IS_FIRST_VISIT_PAGE;return void 0!==i&&(e="1"===i),t=e||!document.referrer.includes(location.hostname),{isFirstVisitPage:e,isSessionStartPage:t}}},320774:function(e,t,i){"use strict";i.d(t,{Hk:function(){return c},KB:function(){return d},VY:function(){return n}});var r,n=((r={}).SEO="SEO",r.Soical="Social",r.SEM="SEM",r.Paidads="Paidads",r.Referal="Referral",r.Direct="Direct",r.Product="product",r.CapCut="CapCut",r);let o={google:[/([^\/]+\.)?google(\.[^\/]+)(\/|$)/i],bing:[/([^\/]+\.)?bing\.com(\/|$)/i],yahoo:[/([^\/]+\.)?yahoo\.com(\/|$)/i],duckduckgo:[/([^\/]+\.)?duckduckgo\.com(\/|$)/i],yandex:[/([^\/]+\.)?yandex\.com(\/|$)/i],naver:[/([^\/]+\.)?naver\.com(\/|$)/i],facebook:[/([^\/]+\.)?facebook\.com(\/|$)/i,/([^\/]+\.)?fb\.com(\/|$)/i,/([^\/]+\.)?fb\.me(\/|$)/i],youtube:[/([^\/]+\.)?youtube\.com(\/|$)/i,/([^\/]+\.)?youtu\.be(\/|$)/i],twitter:[/([^\/]+\.)?twitter\.com(\/|$)/i,/([^\/]+\.)?t\.co(\/|$)/i],tiktok:[/([^\/]+\.)?tiktok\.com(\/|$)/i],instagram:[/([^\/]+\.)?instagram\.com(\/|$)/i,/([^\/]+\.)?instagr\.am(\/|$)/i],linkedin:[/([^\/]+\.)?linkedin\.com(\/|$)/i],survey:[/survey\.isnssdk\.com(\/|$)/i],baidu:[/([^\/]+\.)?baidu\.com(\/|$)/i],sougou:[/([^\/]+\.)?sougou\.com(\/|$)/i],toutiao:[/([^\/]+\.)?toutiao\.com(\/|$)/i],so:[/([^\/]+\.)?so\.com(\/|$)/i],hao123:[/([^\/]+\.)?hao123\.com(\/|$)/i],sm:[/([^\/]+\.)?sm\.cn(\/|$)/i]},a={SEO:[...o.google,...o.bing,...o.yahoo,...o.duckduckgo,...o.yandex,...o.naver,...o.baidu,...o.sougou,...o.toutiao,...o.so,...o.hao123,...o.sm],Social:[...o.facebook,...o.youtube,...o.twitter,...o.tiktok,...o.instagram,...o.linkedin],product:[...o.survey]},s=new Map(Object.keys(a).reduce((e,t)=>(a[t].forEach(i=>{e.push([i,t])}),e),[])),l=new Map(Object.keys(o).reduce((e,t)=>(o[t].forEach(i=>{e.push([i,t])}),e),[]));function c(e){var t;let i=[...l.keys()].find(t=>t.test(e));return null!==(t=l.get(i))&&void 0!==t?t:e}function d(e){var t;let i=[...s.keys()].find(t=>t.test(e));return null!==(t=s.get(i))&&void 0!==t?t:function(e){try{let t=new URL(e.startsWith("http")?e:`https://${e}`);if(["capcut.com","capcut.net"].find(e=>t.host.includes(e)))return"CapCut";return"Referral"}catch(e){return"Referral"}}(e)}},605723:function(e,t,i){"use strict";let r;i.d(t,{C:()=>v});var n=i("786377"),o=i("732599"),a=i("320774"),s=i("722169");let l=e=>e.toLocaleLowerCase()==="es-LA".toLocaleLowerCase()?"es-ES":e,c="capcut_locale";var d=i("64537");function u(){try{return window._currentBranch||""}catch(e){return""}}function p(e,t){let i="userTracking",{ccWebSlardar:r}=window;r&&("info"===t?r("sendLog",{content:e,extra:{type:i}}):r("captureException",e instanceof Error?e:{content:e},{script:i}))}function _(e,t){try{sessionStorage.setItem(e,t)}catch(e){p(e,"error")}}function g(e){try{return decodeURIComponent(e)}catch(t){return e}}function h(e){let t=new URLSearchParams(e),i={};for(let[e,r]of t)i[e]=r;return i}class m{init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoReport:!0};return this.hasInit?Promise.resolve():(this.checkPageStatus(),this.initChannelLevel(),this.normalizeMedium(),e.autoReport&&this.reportPvImmediately(),this.hasInit=!0,Promise.resolve())}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoReport:!0};this.init(e)}allowCookie(){this._setCookie(this.channel_info)}getServerInjectUT(){return"undefined"!=typeof window&&window._ut||null}checkPageStatus(){let{isFirstVisitPage:e,isSessionStartPage:t}=(0,d.H)();this.isSessionStartPage=t,this.isFirstVisitPage=e}initChannelLevel(){var e,t;let i=null!==(e=this._parseUTMParams())&&void 0!==e?e:this._parseSEMParams(),r=function(e){try{return sessionStorage.getItem("_ut")}catch(e){return p(e,"error"),null}}("_ut"),o=r?function(e){try{return JSON.parse(e)}catch(e){return p(e,"error"),null}}(r):null,a=null!==(t=n.Z.get("_ut"))&&void 0!==t?t:"";if(!i&&o){this.channel_info=o;return}if(!i&&a&&this.referer.includes(location.hostname)){let e=h(decodeURIComponent(a))||{},{source:t,medium:i,sub_source:r,content:n}=e;if((t||i||r||n)&&(this.channel_info=e,!this.hasException(this.channel_info)))return}if(this.getServerInjectUT()&&(this.channel_info={...this.getServerInjectUT()},this.channel_info.channel_from="ut",this.channel_info.session_start_url=location.href,!this.hasException(this.channel_info))){_("_ut",JSON.stringify(this.channel_info));return}let s=this._getParamsNotByCookie();this.channel_info=s,this.channel_info.channel_from="local",this.channel_info.session_start_url=location.href,_("_ut",JSON.stringify(this.channel_info))}reportPvImmediately(){!function(e){try{let t=[98,121,116,101,100,97,110,99,101].map(function(e){return String.fromCharCode(e)}).join(""),i="https://edit-api-va.capcut.com";window.__locationInfo?i=window.__locationInfo.domain.web_domain:/^\S+?\.bytedance\.net$/.test(window.location.host)&&(i=`https://capcut-web-va.${t}.net`);let r=new URL(`${i}/lv/v1/event/report`),o=e.getHeader();if(!o.web_id)throw Error("no web_id");r.searchParams.append("is_pwa",o.is_pwa),r.searchParams.append("pwa_from",o.pwa_from),r.searchParams.append("open_from_pwa",o.open_from_pwa),r.searchParams.append("web_id",o.web_id),r.searchParams.append("event_name","user_page_view"),r.searchParams.append("os_name",o.os_name),r.searchParams.append("app_version",o.app_version),r.searchParams.append("is_first_visit_page",o.is_first_visit_page),r.searchParams.append("is_session_start_page",o.is_session_start_page),r.searchParams.append("browser",o.browser),r.searchParams.append("referrer",o.referrer),o.branch&&r.searchParams.append("branch",o.branch),n.Z.get(c)&&r.searchParams.append(c,l(n.Z.get(c)));let{channel:a}=e.getParams(),d=(0,s.pick)(a,["session_start_url","channel_from"]);!(0,s.isEmpty)(d)&&r.searchParams.append("custom",JSON.stringify(d)),r.searchParams.append("seo_info",JSON.stringify((0,s.omit)(a,["session_start_url","channel_from"]))),fetch(r.toString(),{referrerPolicy:"unsafe-url",credentials:"include"})}catch(e){window.ccWebSlardar&&window.ccWebSlardar("captureException",e,{script:"pv-report"})}}(this)}getParams(){let{medium:e,sub_source:t,source:i,campaign:r,content:n,term:o,channel_from:a,session_start_url:s,campaign_id:l}=this.channel_info,c={channel_level1:e||"",channel_level2:i||"",channel_level3:r||t||"",channel_level4:n||"",channel_from:a||"unknown",session_start_url:s||""};return l&&(c.campaign_id=l),o&&(c.keywords=o),this.branch&&(c.branch=this.branch),{...this.channel_info,channel:c,extraCommonParams:this.otherParams}}getHeader(){var e,t;let i=document.cookie.match(RegExp("(^| )_tea_web_id=([^;]+)")),r=window.GATEWAY_INJECTED_WEB_ID||"";return!r&&null!==i&&(r=i[2]),{is_pwa:(0,o.tc)()?"1":"0",open_from_pwa:(0,o.XX)()?"1":"0",pwa_from:(0,o.MY)(),web_id:r,os_name:function(){let e=[{s:"windows",r:/Windows/},{s:"android",r:/Android/},{s:"CrOS",r:/CrOS/},{s:"linux",r:/(Linux|X11)/},{s:"ios",r:/(iPhone|iPad|iPod)/},{s:"macOrIpad",r:/Mac OS X/},{s:"mac",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],t="unknown";for(let i=0;i<e.length;i++){let r=e[i];if(r.r.test(window.navigator.userAgent)){t=r.s,"macOrIpad"===r.s&&(t="MacIntel"===window.navigator.platform&&"number"==typeof window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>1?"ios":"mac");break}}return t}(),is_first_visit_page:this.isFirstVisitPage?"1":"0",is_session_start_page:this.isSessionStartPage?"1":"0",app_version:function(){try{let e="";return window.LV_WEB_VERSION?e=window.LV_WEB_VERSION:window.gfdatav1&&(e=window.gfdatav1.ver),e=e.split(".").filter((e,t)=>1!==t).join(".")}catch(e){return""}}(),browser:function(){try{var e;let t=window.navigator.userAgent;return(null===(e=[{match:"Chrome",value:"Chrome"},{match:"Firefox",value:"Firefox"},{match:"Safari",value:"Safari"},{match:["MSIE","Trident"],value:"Microsoft Internet Explorer"},{match:"Lark",value:"Lark"},{match:"TTWebView",value:"TTWebView"},{match:"Edge",value:"Microsoft Edge"}].find(e=>("string"==typeof e.match&&(e.match=[e.match]),e.match.some(e=>t.includes(e)))))||void 0===e?void 0:e.value)||""}catch(e){return""}}(),referrer:document.referrer,branch:u(),user_agent:(null===(t=window)||void 0===t?void 0:null===(e=t.navigator)||void 0===e?void 0:e.userAgent)||""}}normalizeMedium(){var e;let t={tiktok_anchor:"Tiktok_anchor",product:"Product",referal:"Referral",soical:"Social",capcut:"CapCut"},i=null===(e=this.channel_info.medium)||void 0===e?void 0:e.toLowerCase();i&&Object.keys(t).includes(i)&&(this.channel_info.medium=t[i]),this.channel_info.medium=g(this.channel_info.medium||""),this.channel_info.source=g(this.channel_info.source||""),this.channel_info.sub_source=g(this.channel_info.sub_source||""),this.channel_info.content=g(this.channel_info.content||""),this.channel_info.term=g(this.channel_info.term||""),this.channel_info.campaign=g(this.channel_info.campaign||"")}_parseUTMParams(){let{utm_medium:e,utm_source:t,utm_campaign:i,utm_content:r,utm_term:n,keyword_name:o}=this.parsed;return e===a.VY.Paidads.toLocaleLowerCase()?this._parsePaidadsParams():e?{context:"UTM",medium:e||"Referral",source:t,campaign:i||"",content:r||"",term:n||o||"",campaign_id:""}:null}_parsePaidadsParams(){let{utm_medium:e,utm_source:t,pid:i,af_adset_id:r,af_c_id:n,keyword_name:o}=this.parsed;return e!==a.VY.Paidads.toLocaleLowerCase()?null:{context:"Paidads",medium:a.VY.Paidads,source:t,campaign:i||"",content:r||"",campaign_id:n||"",term:o||""}}_parseSEMParams(){let{gclid:e,msclkid:t,ad_platform_id:i,pid:r,af_adset_id:n,af_c_id:o,keyword_name:s}=this.parsed;return e||t?{context:"SEM",medium:a.VY.SEM,source:"string"==typeof i&&({googleadwords_int:"google",bingads_int:"bing"})[i]||i,campaign:r||"",content:n||"",campaign_id:o||"",term:s||""}:null}_parseReferer(){return this.referer?{context:"Referer",medium:(0,a.KB)(this.referer),source:(0,a.Hk)(this.referer),campaign:"",campaign_id:"",term:""}:{context:"Referer",medium:a.VY.Direct,source:"enter_url",campaign:"",campaign_id:"",term:""}}_setCookie(e){n.Z.set("_ut",encodeURIComponent(Object.keys(e).reduce((t,i)=>{let r=e[i];return r?t+=`${0===t.length?"":"&"}${i}=${r}`:t},"")),{path:"/",sameSite:"Strict"})}_getParamsNotByCookie(){var e,t;return null!==(t=null!==(e=this._parseUTMParams())&&void 0!==e?e:this._parseSEMParams())&&void 0!==t?t:this._parseReferer()}hasException(e){let t=e.source&&e.medium===a.VY.CapCut&&this.seoChannelMap.includes(e.source),i=e.medium!==a.VY.CapCut&&["capcut.com","capcut.net"].some(t=>{var i;return null===(i=e.source)||void 0===i?void 0:i.includes(t)}),r=["tiktok_anchor","product"].includes(e.medium||""),o=[t,i,r].includes(!0);return o&&(p(JSON.stringify({errorName:"hasException",channel:{...e}}),"info"),_("_ut",""),n.Z.set("_ut","")),o}constructor(){var e,t;this.hasInit=!1,this.parsed=h(location.search),this.referer=null!==(t=null===(e=document.referrer)||void 0===e?void 0:e.replace(/http(s)*:\/\//i,""))&&void 0!==t?t:"",this.isFirstVisitPage=!1,this.isSessionStartPage=!1,this.channel_from="unknown",this.channel_info={},this.branch=u(),this.seoChannelMap=["google","coccoc","bing","yahoo","duckduckgo","yandex","naver","baidu","sougou","toutiao","so","hao123"],this.capcutChannelMap=["capcut.com","capcut.net"],this.otherParams={}}}let v=(r=null,()=>(!r&&(r=new m),r))},3767:function(e,t,i){"use strict";i.d(t,{s:()=>s,W:()=>c});var r,n=i("722169"),o=i("970986");function a(e,t){try{let o=JSON.parse(null!=e?e:"{}");if("0"!==o.ret&&0!==o.status_code&&0!==o.code&&0!==o.e&&(!o.BaseResp||0!==o.BaseResp.StatusCode)&&"success"!==o.message&&(!o.ResponseMetadata||o.ResponseMetadata.Error)){var i,r,n;let e=o.log_id||(null==t?void 0:null===(r=t.response)||void 0===r?void 0:null===(i=r.headers)||void 0===i?void 0:i["x-tt-logid"])||"",a=(o.message||o.errmsg||"").slice(0,50),s=o.ret||(null===(n=o.BaseResp)||void 0===n?void 0:n.StatusCode)||o.status_code||o.code||o.e||"";return{...t.extra,ret:s.toString(),msg:a.toString(),logId:e.toString()}}}catch{}return!1}var s=((r={}).info="info",r.warn="warn",r.error="error",r);let l={domain:o.Vj.slardar},c=new class e{get sdk(){var e;if("undefined"!=typeof window)return null===(e=window)||void 0===e?void 0:e.ccWebSlardar}init(e){var t;this._initEnv(),null===(t=this.sdk)||void 0===t||t.call(this,"init",{...l,...e,plugins:{fetch:{extraExtractor:(e,t)=>{var i,r;return null===(i=(r=window).__lookiExtraHeaders)||void 0===i||i.call(r,e,t),a(e,t)}},ajax:{extraExtractor:(e,t)=>{var i,r;return null===(i=(r=window).__lookiExtraHeaders)||void 0===i||i.call(r,e,t),a(e,t)}},...e.plugins}})}start(){var e;null===(e=this.sdk)||void 0===e||e.call(this,"start")}config(e){var t;null===(t=this.sdk)||void 0===t||t.call(this,"config",e)}error(e,t){var i;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(null==r?void 0:r.level)?null==r?void 0:r.level:"warn",a=(0,n.isError)(t)?(e=>{let t=Error(e.message);return t.name=e.name,t.stack=e.stack,t.message=e.message,t})(t):Error(JSON.stringify(t)),{message:s}=a;a.message=`\u{3010}Custom-Error\u{3011}:${e}-${r.toGroup?"MoreDataInExternal":null==a?void 0:a.message}`,r.toGroup&&(Object.assign(r,{message:s}),delete r.toGroup),null===(i=this.sdk)||void 0===i||i.call(this,"captureException",a,{...r,level:o})}dataEvent(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null==i?void 0:i.level)?null==i?void 0:i.level:"info",o=(0,n.pickBy)(i,n.isNumber);null===(t=this.sdk)||void 0===t||t.call(this,"sendEvent",{name:`\u{3010}Custom-Data\u{3011}: ${e}`,metrics:o,categories:{...i,level:r}})}event(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null==i?void 0:i.level)?null==i?void 0:i.level:"info",o=(0,n.pickBy)(i,n.isNumber);null===(t=this.sdk)||void 0===t||t.call(this,"sendEvent",{name:e,metrics:o,categories:{...i,level:r}})}log(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null==i?void 0:i.level)?null==i?void 0:i.level:"info";null===(t=this.sdk)||void 0===t||t.call(this,"sendLog",{content:`\u{3010}Custom-Log\u{3011}: ${e}`,level:r,extra:{...i}})}setCurrentBranch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._setContext("branch",e)}_initEnv(){var e;if("undefined"!=typeof window)this._setContext("branch",window._currentBranch),this._setContext("tag",window._tag),this._setContext("gray_config_key",window.__gray_config_key),this._setContext("lvweb_env",window.__lvweb_env),this._setContext("psm",window.__agw_psm),this._setContext("idc",null===(e=window.gfdatav1)||void 0===e?void 0:e.idc)}_setContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t){var i;null===(i=this.sdk)||void 0===i||i.call(this,"context.set",e,t)}}}},453064:function(e,t,i){"use strict";i.d(t,{S:function(){return n},m:function(){return r}});let r="https://commercepro.capcut.com/payment-page-callback",n={width:1e3,height:700}},366805:function(e,t,i){"use strict";i.d(t,{AE:function(){return h},GM:function(){return _},Vw:function(){return v},gZ:function(){return m},io:function(){return l},mW:function(){return d},me:function(){return c},rC:function(){return u},ss:function(){return g},tY:function(){return p}});var r,n=i(827322),o=i(603662),a=i(453064);let s=["google","apple"];var l=((r={}).SHARK_RISK_ERROR="-6",r.RISK_ERROR="36010107",r.CROSS_PLATFORM_MAC="36010109",r.CROSS_PLATFORM_IOS="36010110",r.CROSS_GROUP="36010111",r);function c(e){return e}let d=e=>!!e&&"-6"===e.ret,u=e=>e?"36010109"===e.ret?"mac":"36010110"===e.ret?"ios":null:null,p=e=>!e||!["-6","36010107","36010109","36010110","36010111"].includes(e.ret);function _(e){let t=null==e?void 0:e.find(e=>e.status&&[o.yh.ACTIVE,o.yh.PENDING].includes(e.status));return null!=t?t:null}function g(e,t){var i;if(!(e.change_type&&["CROSSGRADE","DOWNGRADE"].includes(e.change_type)))return!1;let r=_(t);if(!r)return!1;let n=[o.K$.MAC,o.K$.IOS].includes(null!==(i=r.platform)&&void 0!==i?i:o.K$.WEB);return!s.includes((null==r?void 0:r.payment_method)||"")&&!n&&!0}function h(e){var t,i;return(null===(i=e.sku_info)||void 0===i?void 0:null===(t=i.sku_cycle)||void 0===t?void 0:t.cycle_unit)==="MONTH"&&12!==e.sku_info.sku_cycle.cycle}function m(e){switch(e.status){case o.yh.ACTIVE:return e.next_renew_time;case o.yh.PENDING:if(h(e))return e.end_time;return e.next_renew_time;default:return e.next_renew_time}}function v(e){let{width:t,height:i}=a.S;return window.open((0,n.C)(e,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"_blank",`popup=true,width=${t},height=${i}`)}},757730:function(e,t,i){"use strict";i.d(t,{g:function(){return r}});class r{}},78621:function(e,t,i){"use strict";i.d(t,{Q:function(){return o}});var r=i(806098);let n=[100026,100028];class o{async init(){if(await this.auth.init(),!this.uploader){let e=Object.assign({getSliceFunc:e=>e>0xc800000?0xa00000:2097152,uploadSliceCount:3},this.auth.getConfig());!e.videoHost&&delete e.videoHost,!e.imageHost&&delete e.imageHost;let{default:t}=await i.e("1586").then(i.t.bind(i,249220,23));this.uploader=new t({...(0,r.X)({region:e.region}),...e})}return this.uploader}async upload(e){let{file:t,type:i="image",onSuccess:r,onProgress:o,onError:a,onStart:s}=e,l=await this.init(),c=l.addFile({file:t,stsToken:this.auth.getStsToken(),type:i});l.start(c),null==s||s(c,t),l.on("progress",e=>{if(e.key===c)null==o||o({key:c,...e})}),l.on("complete",e=>{if(e.key===c)null==r||r({key:c,...e.uploadResult})});let d=0;return l.on("error",async e=>{var t;if(e.key===c){if(n.includes(Number(null==e?void 0:null===(t=e.extra)||void 0===t?void 0:t.errorCode))&&d<1){d++,await this.auth.init(),l.refreshSTSToken(this.auth.getStsToken()),l.start(c);return}null==a||a(e)}}),l}cancel(e){var t;return null===(t=this.uploader)||void 0===t?void 0:t.cancel(e)}constructor(e){this.uploader=null,this.auth=e}}},806098:function(e,t,i){"use strict";i.d(t,{X:function(){return a}});var r=i(970986);let n="bytevcloudapi",o="byted";function a(e){let{region:t}=e,i={imageHost:"",videoHost:"",videoFallbackHost:void 0,imageFallbackHost:void 0};switch(t){case"gcp":i.videoHost=`https://vod-us-east-2.${n}.com`,i.imageHost=`https://imagex-us-east-2.${n}.com`,i.videoFallbackHost=`https://open-us-east-2.${n}.com`,i.imageFallbackHost=`https://open-us-east-2.${n}.com`;break;case"sg":i.videoHost=`https://vod-ap-singapore-1.${n}.com`,i.imageHost=`https://imagex-ap-singapore-1.${n}.com`,i.videoFallbackHost=`https://open-ap-singapore-1.${n}.com`,i.imageFallbackHost=`https://open-ap-singapore-1.${n}.com`;break;case"US-TTP":i.videoHost="https://api16-normal-useast5.tiktokv.us/top/v1",i.imageHost="https://api16-normal-useast5.tiktokv.us/top/v1",i.videoFallbackHost="https://api19-normal-useast5.tiktokv.us/top/v1";break;case"boe":i.videoHost=`https://staging-openapi-boe.${o}.org`,i.imageHost=`https://staging-openapi-boe.${o}.org`;break;case"boei18n":i.videoHost=`https://vas-boei18n.${o}ance.net`,i.imageHost=`https://vas-boei18n.${o}ance.net`;break;case"cn":i.videoHost=`https://vod.${o}anceapi.com`,i.imageHost=`https://imagex.${o}anceapi.com`,i.videoFallbackHost="https://vas-lf-x.__________",i.imageFallbackHost=`https://open.${o}anceapi.com`;break;default:i.videoHost=`https://${r.Vj.vcloud}`,i.imageHost=`https://${r.Vj.imagex}`,i.videoFallbackHost=`https://open-us-east-1.${n}.com`,i.imageFallbackHost=`https://open-us-east-1.${n}.com`}return i}},207118:function(e,t,i){"use strict";i.d(t,{i:()=>m});var r=i("772322");i("35867"),i("960560");var n=i("113152"),o=i("928881"),a=i("218571"),s=i("105789"),l=i.n(s),c=i("496022"),d=i("856135"),u=i("41723"),p=i.n(u),_=i("801497"),g=i("270767"),h=i("725071");let m=e=>{var t;let{birthdayStr:i,mode:s="custom",theme:u=g.Q.Light,setIsBirthdayValid:m,customVerfication:v,onChange:f,submitting:y,customAgeValidateRule:w}=e,[b,S,C]=null!==(t=null==i?void 0:i.split("-"))&&void 0!==t?t:[],[k,E]=(0,a.useState)(!1),[I,P]=(0,a.useState)(!1),[A,R]=(0,a.useState)(!1),[x,N]=(0,a.useState)({error:!1}),L=k||I||A||(null==x?void 0:x.error),[O,M]=(0,c.e)(i?d._N.withContext({...d._N.context,year:Number(b),month:Number(S),date:Number(C)}):d._N),{month:D,date:j,year:F,months:U,dates:B}=O.context,[H,G]=(0,a.useState)(""),W=(0,a.useRef)(null),V=(0,a.useMemo)(()=>{let e=p()(H);return[e.month(),e.date(),e.year()]},[H]),Z=[{key:"",fallback:""},{key:"web_age_gate_jan",fallback:"January"},{key:"web_age_gate_feb",fallback:"February"},{key:"web_age_gate_mar",fallback:"March"},{key:"web_age_gate_apr",fallback:"April"},{key:"web_age_gate_may",fallback:"May"},{key:"web_age_gate_jun",fallback:"June"},{key:"web_age_gate_jul",fallback:"July"},{key:"web_age_gate_aug",fallback:"August"},{key:"web_age_gate_sep",fallback:"September"},{key:"web_age_gate_oct",fallback:"October"},{key:"web_age_gate_nov",fallback:"November"},{key:"web_age_gate_dec",fallback:"December"}].map(e=>{let{key:t,fallback:i}=e;return t?_.ZP.t(t,{},i):t}),z=e=>{var t;let i=null==w?void 0:null===(t=w.inputValidator)||void 0===t?void 0:t.call(w,e);N(null!=i?i:{error:!1})};(0,a.useEffect)(()=>{let e=`${F}-${D}-${j}`;if(p()(e).isAfter(p()(new Date))){E(!0);return}E(!1);if((0,d.ZN)(e)){R(!0);return}R(!1);(null==w?void 0:w.inputValidator)&&z(e)},[F,D,j]),(0,a.useEffect)(()=>{let e=`${F}-${D}-${j}`,t=p()(e);if(!O.matches("valid")||L){null==m||m(!1),(null==w?void 0:w.inputValidator)&&(null==f||f(e));return}null==m||m(!0),null==f||f(t.format("YYYY-MM-DD"))},[f,O,F,D,j,L,m]),(0,a.useEffect)(()=>{"native"===s&&H&&(!v||v(...V))&&(null==f||f(H))},[s,H,v]),(0,a.useEffect)(()=>{M({type:"CHANGE_CUSTOM_VERFICATION",callback:v})},[v]);let $=e=>{e.length<4?(E(!1),P(!0)):Number(e)<new Date().getFullYear()-h.ZM||Number(e)>=new Date().getFullYear()+1?E(!0):(P(!1),E(!1))},K=(0,a.useCallback)(()=>{if(k)return _.ZP.t("dre_account_text_year_number_requirement",{},"Enter a valid date of birth");if(A){let e=Math.min(p()(new Date).year()-F,h.xF-1);return _.ZP.t("web_age_gate_too_young_error",{num:e},`Your birthday indicates you are ${e} years old. Please check.`)}return(null==x?void 0:x.error)&&(null==x?void 0:x.message)?null==x?void 0:x.message:_.ZP.t("web_age_gate_four_digit_error",{},"Enter a four digit number")},[F,k,A,x,L]);return(0,r.jsx)("div",{"data-lv-theme-force":"light"===u?"light":"dark",className:l()("gate_birthday-picker",u||""),children:"custom"===s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"gate_birthday-picker-content",children:[(0,r.jsx)(o.Z,{className:"gate_birthday-picker-input",value:-1===F||0===F?"":String(F),placeholder:_.ZP.t("web_signin_placeholder_year",{},"Year"),onChange:e=>{!isNaN(Number(e))&&(M({type:"CHANGE_YEAR",value:Number(e)}),$(String(e)))},onBlur:()=>{$(String(F))},maxLength:4,style:{width:112},error:L,disabled:y}),(0,r.jsx)(n.Z,{className:"gate_birthday-picker-selector",placeholder:_.ZP.t("web_signin_placeholder_month",{},"Month"),options:U.map(e=>({label:Z[e],value:e})),value:-1===D?void 0:D,style:{flex:1},triggerProps:{className:"age_gate_birthday-selector",getPopupContainer:()=>{let e=document.createElement("div");return e.setAttribute("data-lv-theme-force","light"===u?"light":"dark"),e.setAttribute("style","width: 100%; position: absolute; top: 0px; left: 0px;z-index: 10002;"),document.body.append(e),e}},onChange:e=>M({type:"CHANGE_MONTH",value:e}),disabled:y}),(0,r.jsx)(n.Z,{className:"gate_birthday-picker-selector",placeholder:_.ZP.t("web_signin_placeholder_day",{},"Day"),options:B.map(e=>({label:String(e),value:e})),value:-1===j?void 0:j,style:{width:112},triggerProps:{className:"age_gate_birthday-selector",getPopupContainer:()=>{let e=document.createElement("div");return e.setAttribute("data-lv-theme-force","light"===u?"light":"dark"),e.setAttribute("style","width: 100%; position: absolute; top: 0px; left: 0px;z-index: 10002;"),document.body.append(e),e}},onChange:e=>M({type:"CHANGE_DATE",value:e}),disabled:y})]}),L?(0,r.jsx)("div",{className:"gate_birthday-error_text",children:K()}):null]}):(0,r.jsxs)("div",{className:"gate_birthday-input",onClick:()=>{W.current.showPicker()},children:[(0,r.jsx)("span",{className:l()(H?"":"placeholder"),children:H||"Enter your birthday"}),(0,r.jsx)("input",{ref:W,className:"gate_birthday-input",type:"date",onChange:e=>{let t=p()(e.target.value),i=e.target.value.split("-"),r=i[0],n=i[1],o=i[2];M({type:"CHANGE_YEAR",value:Number(r)}),M({type:"CHANGE_MONTH",value:Number(n)}),M({type:"CHANGE_DATE",value:Number(o)}),G(e.target.value?t.format("YYYY-MM-DD"):"")}})]})})}},400387:function(e,t,i){"use strict";i.d(t,{GH:function(){return g},Jt:function(){return f},L4:function(){return _},lI:function(){return v},s9:function(){return m},tF:function(){return h}});var r,n,o=i(827322),a=i(806061),s=i(736951),l=i(353808),c=i(545778),d=i(280667),u=i(287272),p=i(3767);var _=((r={})[r.FILL_IN_BASE_INFO=0]="FILL_IN_BASE_INFO",r[r.ENTER_BIRTHDAY=1]="ENTER_BIRTHDAY",r[r.ENTER_VERIFICATION_CODE=2]="ENTER_VERIFICATION_CODE",r[r.FORGET_PWD_INFO=3]="FORGET_PWD_INFO",r);var g=((n={})[n.FillInEmail=0]="FillInEmail",n[n.ResendEmail=1]="ResendEmail",n[n.ResetPwd=2]="ResetPwd",n);let h=60,m=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,v=/^[\w ~!@#$%^&*()+,.:;=<>?/|\-[\]\\]{6,20}$/,f=(0,a.C)({id:"emailSignIn",initial:"signUp",context:{isBOE:!1,passport:()=>Promise.resolve(null),isNewSignupUser:!1,source:c.C.SignUp,currentWindow:0,email:"",password:"",birthday:"",region:"",code:"",ticket:"",sendCodetype:l.SEND_CODE_TYPE.REGISTER,resendEmailCodeCountDown:h,emailHasRegisterCb:void 0,sendEmailCodeErrorCb:void 0,sendEmailCodeSuccessCb:void 0,verificationCodeErrorCb:void 0,registerErrorCb:void 0,loginErrorCb:void 0,pageEnterFrom:"",currentPage:""},entry:"start",states:{signUp:{entry:"saveSignUpType",initial:"fillInRegisterInfo",states:{fillInRegisterInfo:{entry:(0,s.f0)({currentWindow:0}),on:{NEXT:{target:"checkingEmailHasRegister",actions:["reportSignUpAction"]},SKIP_TO_ENTER_BIRTHDAY:{target:"enterBirthday"},SAVE_EMAIL:{actions:"saveEmail"},SAVE_PASSWORD:{actions:"savePassword"}}},checkingEmailHasRegister:{entry:"saveSignInInfo",invoke:{id:"fetchEmailNotRegister",src:(0,o.C)("fetchEmailNotRegister",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"enterBirthday"},onError:{target:"fillInRegisterInfo"}}},enterBirthday:{entry:(0,s.f0)({currentWindow:1}),on:{CONFIRM_BIRTHDAY:{target:"sendingEmailCode",actions:["updateBirthday"]},RETURN_SIGN_IN:{target:"fillInRegisterInfo",actions:["clearBirthday"]}}},sendingEmailCode:{id:"sendingEmailCode",invoke:{id:"fetchSendEmailCode",src:(0,o.C)("fetchSendEmailCode",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["initCountDown","reportRegisterSendEmailCodeSuccess"],target:"enterVerificationCode"},onError:{actions:["notifySendEmailCodeError","reportRegisterSendEmailCodeError"]}},on:{BACK_TO_ENTER_CODE:"enterVerificationCode",BACK_TO_FILL_REGISTER_INFO:"fillInRegisterInfo"}},enterVerificationCode:{entry:(0,s.f0)({currentWindow:2}),initial:"countingDown",states:{countingDown:{invoke:{id:"execCountingDown",src:(0,o.C)("execCountingDown",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},on:{UPDATE_COUNT_DOWN:{actions:"updateCountDown"},COUNT_DOWN_ZERO:{target:"allowResendVerificationCode"}}},allowResendVerificationCode:{on:{RESEND:{target:"#sendingEmailCode"}}}},on:{CONFIRM_REGISTER:{target:"registering",actions:["reportComfirmAction","reportSlardarRegistAction"]},BACK_TO_LOGIN:{target:"fillInRegisterInfo"},BACK_TO_BIRTHDAY:{target:"enterBirthday"}}},registering:{invoke:{id:"fetchEmailCodeRegister",src:(0,o.C)("fetchEmailCodeRegister",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["notifySignSuccess","storeIsNewSignupUser","reportRegisterSuccess"],target:"#signInSuccess"},onError:{actions:["notifyRegisterError",(0,s.lj)((e,t)=>{var i,r;return{type:"SIGN_IN_FAIL",params:{source:c.C.SignUp,type:"email",errorCode:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code,errorMsg:null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description}}}),"reportRegisterSuccess"],target:"enterVerificationCode"}}}}},signIn:{entry:"saveSignInType",initial:"fillInSignInInfo",states:{fillInSignInInfo:{entry:(0,s.f0)({currentWindow:0}),on:{CONFIRM_SIGN:{target:"signing",actions:["reportLoginAction","reportSlardarLoginAction"]},SAVE_EMAIL:{actions:"saveEmail"},RESTORE_ACCOUNT:{target:"restore"}}},signing:{entry:"saveSignInInfo",invoke:{id:"fetchEmailCodeLogin",src:(0,o.C)("fetchEmailCodeLogin",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["notifySignSuccess","reportLoginSuccess"],target:"#signInSuccess"},onError:{actions:["notifyLogInError","reportLoginError",(0,s.lj)((e,t)=>{var i,r,n;return{type:"SIGN_IN_FAIL",params:{source:c.C.LoginIn,type:"email",errorCode:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code,errorMsg:null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description,verifyTicket:null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.verify_ticket}}})],target:"fillInSignInInfo"}}},restore:{entry:"saveSignInInfo",invoke:{id:"fetchRestoreAccount",src:(0,o.C)("fetchRestoreAccount",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["notifySignSuccess"],target:"#signInSuccess"},onError:{actions:["notifyLogInError"],target:"fillInSignInInfo"}}}}},signInSuccess:{id:"signInSuccess",type:"final",entry:(0,s.lj)(e=>({type:"SIGN_IN_SUCCESS",params:{source:e.source,type:"email",isLoginNewUser:e.isNewSignupUser?1:0},extra:{isNewSignupUser:e.isNewSignupUser}}))},forgetPwd:{entry:"saveForgetType",initial:"idle",states:{idle:{on:{TO_SEND_RESET_EMAIL_INFO:{target:"fillInResetEmailInfo",actions:["reportFillInResetEmailInfo","initSendEmailInfo"]},TO_RESET_PASSWORD:{actions:"initResetEmailCodeErrorCb",target:"checkResetCode"},SAVE_PWD_CODE:{actions:["initSaveCodeAndEmail"]}}},fillInResetEmailInfo:{id:"fillInResetEmailInfo",on:{SEND_EMAIL:{actions:["reportSendEmail"],target:"checkingResetEmailHasRegister"},SAVE_EMAIL:{actions:["saveEmail"]},BACK_SIGN_IN:{actions:["reportBack"]},INIT_RESET_EMAIL_ERROR_CB:{actions:["initResetEmailErrorCb"]}}},checkingResetEmailHasRegister:{entry:"syncGetParentContext",id:"checkingResetEmailHasRegister",invoke:{id:"checkingResetEmailHasRegister",src:(0,o.C)("fetchEmailRegister",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"sendResetEmailCode"},onError:{target:"fillInResetEmailInfo"}}},sendResetEmailCode:{id:"sendResetEmailCode",invoke:{id:"fetchSendResetEmailCode",src:(0,o.C)("fetchSendResetEmailCode",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["intoResendEmailProcess"],target:"resetTimeCounting"},onError:{target:"fillInResetEmailInfo"}}},resetTimeCounting:{initial:"countingDown",entry:"initCountDown",states:{countingDown:{invoke:{id:"execCountingDown",src:(0,o.C)("execCountingDown",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},on:{UPDATE_COUNT_DOWN:{actions:"updateCountDown"},COUNT_DOWN_ZERO:{target:"allowResendResetEmail"},BACK_SIGN_IN:{actions:["reportBack"]},TO_SEND_RESET_EMAIL_INFO:{target:"#fillInResetEmailInfo",actions:["reportFillInResetEmailInfo","initSendEmailInfo"]}}},allowResendResetEmail:{on:{RESEND:{actions:["reportResendEmail"],target:"#sendResetEmailCode"},BACK_SIGN_IN:{actions:["reportBack"]}}}},on:{BACK_SIGN_IN:{actions:["reportBack"]}}},checkResetCode:{invoke:{id:"checkResetCode",src:(0,o.C)("checkResetCode",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"resetPassword",actions:["intoResetPwdProcess","saveTicket"]},onError:{actions:["cleanEmail","notifyCheckResetCodeError"]}}},resetPassword:{on:{CONFIRM_PASSWORD:{target:"sendConfirmReset"},BACK_SIGN_IN:{actions:["cleanEmail","reportBack"]},INIT_RESET_SUCCESS_CB:{actions:["initResestSuccessCb"]}}},sendConfirmReset:{invoke:{id:"execSendConfirmReset",src:(0,o.C)("execSendConfirmReset",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"#signInSuccess",actions:["reportSendConfirmResetPwd","notifyResetSuccessCb"]},onError:{actions:"notifySendConfirmResetError"}}}}}},on:{CHECK_EMAIL_HAS_REGISTER:{actions:"checkEmailHasRegister"},MOBILE_TO_SIGN_IN:{target:"signIn",actions:["reportChangeToLoginPage","reportLoginPageShow"]},MOBILE_TO_SIGN_UP:{target:"signUp",actions:["reportChangeToSignUpPage","reportSignUpPageShow"]},MOBILE_TO_SIGN_IN_EMAIL:{target:"signIn"},MOBILE_TO_SIGN_UP_EMAIL:{target:"signUp"},TO_SIGN_IN:{target:"signIn",actions:["reportLoginPageShow"]},TO_SIGN_UP:{target:"signUp",actions:["reportSignUpPageShow"]},TO_FORGET_PWD:{target:"forgetPwd"},INIT_REGISTER_ERROR_CB:{actions:"initRegisterErrorCb"},INIT_LOGIN_ERROR_CB:{actions:"initLoginErrorCb"},INIT_SEND_CODE_ERROR_CB:{actions:"initSendEmailCodeErrorCb"},INIT_LOGIN_SUCCESS_CB:{actions:"initLoginSuccessCb"},INIT_EMAIL_SEND_PARAMS:{actions:"initEmailSendParams"},REPORT_SIGN_IN_ACTION:{actions:(0,s.lj)((e,t)=>({type:"SIGN_IN_ACTION",params:{source:e.source,action:t.action}}))},CHANGE_CONTEXT:{actions:["changeContext"]}}},{actions:{start:()=>{},saveSignInType:(0,s.f0)({source:e=>c.C.LoginIn}),saveSignUpType:(0,s.f0)({source:e=>c.C.SignUp}),saveForgetType:(0,s.f0)({source:e=>c.C.LoginIn,currentWindow:e=>3}),saveSignInInfo:(0,s.f0)({email:(e,t)=>{var i;return null===(i=t.email)||void 0===i?void 0:i.trim()},password:(e,t)=>t.password}),saveEmail:(0,s.f0)({email:(e,t)=>{var i;return null===(i=t.email)||void 0===i?void 0:i.trim()}}),savePassword:(0,s.f0)({password:(e,t)=>t.password}),saveStep:(0,s.f0)({step:(e,t)=>t.step}),saveTicket:(0,s.f0)({ticket:(e,t)=>t.data.ticket}),storeIsNewSignupUser:(0,s.f0)({isNewSignupUser:(e,t)=>!0}),initSaveCodeAndEmail:(0,s.f0)({code:(e,t)=>t.code,email:(e,t)=>{var i;return null===(i=t.email)||void 0===i?void 0:i.trim()}}),initRegisterErrorCb:(0,s.f0)({registerErrorCb:(e,t)=>t.func}),initLoginErrorCb:(0,s.f0)({loginErrorCb:(e,t)=>t.func}),initSendEmailCodeErrorCb:(0,s.f0)({sendEmailCodeErrorCb:(e,t)=>t.func}),initLoginSuccessCb:(0,s.f0)({loginSuccessCb:(e,t)=>t.func}),initResetEmailErrorCb:(0,s.f0)({sendResetEmailErrorCb:(e,t)=>t.func}),initResestSuccessCb:(0,s.f0)({sendResetSuccessCb:(e,t)=>t.func}),initResetEmailCodeErrorCb:(0,s.f0)({validateResetEmailCodeCb:(e,t)=>t.func}),initEmailSendParams:(0,s.f0)({pageEnterFrom:(e,t)=>t.pageEnterFrom,currentPage:(e,t)=>t.currentPage}),initSendEmailInfo:(0,s.f0)({step:e=>0}),notifyResetSuccessCb:e=>{var t;null===(t=e.sendResetSuccessCb)||void 0===t||t.call(e)},notifySendResetEmailCodeError:()=>{},notifySendEmailCodeError:(e,t)=>{var i;null===(i=e.sendEmailCodeErrorCb)||void 0===i||i.call(e,{data:Error(t.data.error_code)})},notifySendEmailCodeSuccess:e=>{var t;null===(t=e.sendEmailCodeSuccessCb)||void 0===t||t.call(e)},initCountDown:(0,s.f0)({resendEmailCodeCountDown:()=>h}),notifyVerificationCodeError:e=>{var t;null===(t=e.verificationCodeErrorCb)||void 0===t||t.call(e)},notifyLogInError:(e,t)=>{var i,r;null==e||null===(r=e.loginErrorCb)||void 0===r||r.call(e,{data:Error(t.data.error_code)},null===(i=t.data)||void 0===i?void 0:i.token)},notifyRegisterError:(e,t)=>{var i;null==e||null===(i=e.registerErrorCb)||void 0===i||i.call(e,{data:Error(t.data.error_code)})},notifySignSuccess:e=>{var t;null==e||null===(t=e.loginSuccessCb)||void 0===t||t.call(e)},notifyCheckResetCodeError:e=>{var t;null==e||null===(t=e.validateResetEmailCodeCb)||void 0===t||t.call(e)},reportLoginSuccess:()=>{p.W.event("login-email",{status:"success"})},reportLoginError:(e,t)=>{var i,r,n,o;p.W.event("login-email",{status:"fail",errorCode:null!==(n=null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code)&&void 0!==n?n:"",errorMsg:null!==(o=null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description)&&void 0!==o?o:""})},reportRegisterSuccess:()=>{p.W.event("register-email",{status:"success"})},reportRegisterError:(e,t)=>{var i,r,n,o;p.W.event("register-email",{status:"fail",errorCode:null!==(n=null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code)&&void 0!==n?n:"",errorMsg:null!==(o=null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description)&&void 0!==o?o:""})},reportRegisterSendEmailCodeError:(e,t)=>{var i,r;p.W.event("register-send-email-code",{status:"fail",errorCode:null!==(r=null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code)&&void 0!==r?r:""})},reportRegisterSendEmailCodeSuccess:()=>{p.W.event("register-send-email-code",{status:"success"})},updateCountDown:(0,s.f0)({resendEmailCodeCountDown:(e,t)=>t.data}),reportLoginPageShow:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.LoginIn,action:"show"}}),reportSignUpPageShow:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.SignUp,action:"show"}}),reportChangeToLoginPage:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.SignUp,action:"log_in"}}),reportChangeToSignUpPage:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.LoginIn,action:"sign_up"}}),changeContext:(0,s.f0)((e,t)=>({...e,...t.context})),reportLoginAction:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.LoginIn,action:"log_in"}}),reportSlardarLoginAction:()=>{p.W.event("login-action",{platform:"email"})},reportSignUpAction:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.SignUp,action:"sign_up"}}),reportComfirmAction:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.SignUp,action:"confirm"}}),reportSlardarRegistAction:()=>{p.W.event("register-action",{platform:"email"})},reportFillInResetEmailInfo:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.LoginIn,action:"forgot_password"}}),reportSendEmail:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.LoginIn,action:"confirm_email"}}),reportBack:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.LoginIn,action:"back"}}),reportResendEmail:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.LoginIn,action:"resend_email"}}),reportSendConfirmResetPwd:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:c.C.LoginIn,action:"confirm_password"}}),syncGetParentContext:(0,s.lj)({type:"SYNC_CONTEXT"}),updateBirthday:(0,s.f0)({birthday:(e,t)=>t.value,region:(e,t)=>t.region}),clearBirthday:(0,s.f0)({birthday:()=>""}),cleanEmail:(0,s.f0)({email:()=>""}),intoResendEmailProcess:(0,s.f0)({step:e=>1}),intoResetPwdProcess:(0,s.f0)({step:e=>2}),checkEmailHasRegister:async(e,t)=>{var i;let{passport:r}=e,{email:n,checkEmailHasRegisterCb:o,onError:a}=t;null===(i=await r())||void 0===i||i.checkEmailHasRegister(n).then(e=>{if((null==e?void 0:e.is_registered)===void 0)throw Error("checkEmailHasRegister error");null==o||o(!!(null==e?void 0:e.is_registered))}).catch(()=>{null==a||a()})}},services:{fetchEmailNotRegister:async(e,t)=>{var i;let{passport:r,emailHasRegisterCb:n}=e;return null===(i=await r())||void 0===i?void 0:i.checkEmailHasRegister(t.email).then(e=>{var i,r;if((null==e?void 0:e.is_registered)===0)return null==t||null===(i=t.emailNotRegisterCb)||void 0===i||i.call(t),!0;throw null==t||null===(r=t.emailHasRegisterCb)||void 0===r||r.call(t),null==n||n(),Error()},e=>{var i;throw null==t||null===(i=t.onError)||void 0===i||i.call(t,e),Error()})},fetchEmailRegister:async(e,t)=>{var i;let{passport:r,emailHasRegisterCb:n}=e;return null===(i=await r())||void 0===i?void 0:i.checkEmailHasRegister(t.email).then(e=>{var i,r;if((null==e?void 0:e.is_registered)!==0)return null==t||null===(r=t.emailHasRegisterCb)||void 0===r||r.call(t),null==n||n(),!0;throw null==t||null===(i=t.emailNotRegisterCb)||void 0===i||i.call(t),Error()},e=>{var i;throw null==t||null===(i=t.onError)||void 0===i||i.call(t,e),Error()})},fetchSendEmailCode:async(e,t)=>{var i;let{email:r,password:n,passport:o}=e;return null===(i=await o())||void 0===i?void 0:i.sendEmailCode(r,n,null==t?void 0:t.code)},fetchEmailCodeRegister:async(e,t)=>{var i;let{email:r,password:n,birthday:o,region:a,passport:s,invitedCode:l}=e;return null===(i=await s())||void 0===i?void 0:i.emailRegister(r,n,null==t?void 0:t.code,o,a,{invitedCode:l})},fetchEmailCodeLogin:async e=>{var t;let{email:i,password:r,passport:n}=e;return null===(t=await n())||void 0===t?void 0:t.emailLogin(i,r)},fetchRestoreAccount:async(e,t)=>{var i,r;let{passport:n,currentPage:o}=e;try{await (null===(i=await n())||void 0===i?void 0:i.cancelLogin(null==t?void 0:t.token,null==t?void 0:t.restoreType)),new d.g().report({status:"success",current_page:o||"login"})}catch(e){throw new d.g().report({status:"failed",current_page:o||"login",fail_reason:null!==(r=null==e?void 0:e.description)&&void 0!==r?r:void 0}),Error(e)}},execCountingDown:e=>{let{resendEmailCodeCountDown:t}=e;return e=>{let i=t;if(0===i){e("COUNT_DOWN_ZERO");return}let r=setInterval(()=>{e({type:"UPDATE_COUNT_DOWN",data:--i}),0===i&&(clearInterval(r),e("COUNT_DOWN_ZERO"))},1e3);return()=>{clearInterval(r)}}},fetchSendResetEmailCode:async e=>{var t;let{email:i,passport:r,sendResetEmailErrorCb:n,pageEnterFrom:o,currentPage:a}=e,s=`${window.location.origin}${u.l.FORGET_PWD.PATH}?enter_from=${null!=o?o:""}&current_page=${null!=a?a:""}`;return null===(t=await r())||void 0===t?void 0:t.sendForgetPwdEmailCode(i,s).then(e=>e,e=>{throw null==n||n(e),Error()})},checkResetCode:async e=>{var t;let{email:i,code:r,passport:n}=e;return null===(t=await n())||void 0===t?void 0:t.validateForgetPwdCode(i,r||"")},execSendConfirmReset:async(e,t)=>{var i;let{ticket:r,passport:n}=e;return null===(i=await n())||void 0===i?void 0:i.resetForgetPwd(r,t.pwd)}}})},813417:function(e,t,i){"use strict";i.d(t,{Zj:()=>tH});var r,n,o=i("827322"),a=i("806061"),s=i("736951"),l=i("508386"),c=i("408835"),d=i("612649"),u=i("299799"),p=i("590610"),_=i("59426"),g=i("801497"),h=i("306224");let m={0:"NONE",40001:"EXIST_BUSINESS_IDENTITY",40002:"NOT_FIND_USER",40003:"NOT_IN_WHITE_LIST",40004:"NOT_FIND_BUSINESS_USER",40005:"NOT_IN_SUBSCRIBE_REGION"};var v=((r={}).NONE="NONE",r.EXIST_BUSINESS_IDENTITY="EXIST_BUSINESS_IDENTITY",r.NOT_FIND_USER="NOT_FIND_USER",r.NOT_IN_WHITE_LIST="NOT_IN_WHITE_LIST",r.NOT_FIND_BUSINESS_USER="NOT_FIND_BUSINESS_USER",r.NOT_IN_SUBSCRIBE_REGION="NOT_IN_SUBSCRIBE_REGION",r),f=i("801410");let y=()=>{var e;let t=null===(e=i.g.location)||void 0===e?void 0:e.host;return t?`https://${t}`:""},w={baseURL:"/api/biz/v1",method:"POST",headers:{loc:h.yM.CHANNEL,lan:g.ZP.language||h.yM.LAN,pf:h.yM.APP_PF,appvr:h.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":h.yM.APP_SDK_VERSION}},b=d.ZP.createAxios(w);b.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=w.headers;return Object.assign(e.headers,(0,f.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),b.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t):m[Number(t.ret)]===v.NOT_IN_WHITE_LIST||m[Number(t.ret)]===v.NOT_IN_SUBSCRIBE_REGION&&"/user/get_user_identities"===e.config.url?Promise.resolve(t):Promise.reject(e)}});let S={async getOrganizationList(e){let{subjectAid:t,scene:i}=e;return await b({method:"GET",url:"/user/get_user_identities",[d.R0]:{domain:y()},params:{subject_aid:t,scene:i}})},getBusinessUser:async e=>await b({method:"GET",url:"/user/get_business_user",[d.R0]:{domain:y()},params:{subject_aid:e}})};var C=i("956018"),k=i("121608"),E=i.n(k),I=i("722169"),P=i("892745"),A=i("998498"),R=i.n(A);function x(e){let{url:t,pf:i,appvr:r,tdid:n}=e,o=Math.floor(Date.now()/1e3);return{sign:R()(`9e2c|${t.slice(-7)}|${i}|${r}|${o}|${n}|11ac`).toLowerCase(),"device-time":o}}let N=null;async function L(){if(!N){let e=await Promise.resolve().then(i.bind(i,963311)),t=await e.getAppInfo(),{appVersion:r}=t.data.data,{headerValue:n}=function(e){let t=255&e,i=e>>8&255,r=e>>16&255;return{major:r,minor:i,patch:t,headerValue:`${r}.${i}.${t}`}}(r),{did:o,os:a,appID:s}=t.data.data;N={appID:s,appvr:n,did:o,pf:"mac"===a?"3":"4"}}return N}function O(){let e=new URLSearchParams(location.search).get("clientVersion");return{appID:"359289",appvr:null!=e?e:"5.1.0",did:"",pf:"4"}}function M(e){let{url:t,appvr:i,tdid:r,pf:n}=e,o=Math.floor(Date.now()/1e3);return{sign:R()(`9e2c|${t.slice(-7)}|${n}|${i}|${o}|${r}|11ac`).toLowerCase(),"device-time":o}}var D=i("362783"),j=i("324487");let F=(0,j.UO)(),U={baseURL:"/commerce",method:"POST",headers:{appid:h.yM.APP_ID,loc:F,lan:h.yM.LAN,pf:h.yM.APP_PF,appvr:h.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":h.yM.APP_SDK_VERSION},useCommerceApi:!0},B=d.ZP.createAxios(U);B.interceptors.request.use(e=>{let{pf:t,appvr:i,did:r,appID:n}=O();return Object.assign(e.headers,M({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r}),{appid:n,appvr:i,pf:t,tdid:r}),e}),B.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{var t,i,r;let n=e.data;if("0"!==n.ret)return Promise.reject(e);return(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.url)&&e.config.url.indexOf("user_info")>0?Promise.resolve({data:n.data,signContext:{sign:n.sign,ret:n.ret,response:n.response,"device-time":null==e?void 0:null===(r=e.config)||void 0===r?void 0:null===(i=r.headers)||void 0===i?void 0:i["device-time"],systime:null==n?void 0:n.systime}}):Promise.resolve(n.data)}}),(0,P.Z)(B,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});let H=e=>{let t=[];return Object.entries(e).forEach(e=>{!(0,I.isNil)(e[1])&&t.push(`${e[0]}=${e[1]}`)}),t.join("&")},G=async(e,t,r)=>{let n=new(await i.e("187").then(i.bind(i,357994))).default;return n.setPublicKey(r),n.verify(e,t,E().SHA256)},W={async getSubscriptionUserInfo(e){let{appvr:t,pf:i,appID:r,did:n}=O(),{data:o,signContext:a}=await B({url:"/v1/subscription/user_info",data:{aid:r,scene:"vip",from_db:e}}),s={appid:r,appvr:t,"device-time":null==a?void 0:a["device-time"],lan:h.yM.LAN,loc:F,pf:i,response:null==a?void 0:a.response,ret:a.ret,systime:null==a?void 0:a.systime,tdid:n},{sign:l}=a;if(l){let e=await G(H(s),l,"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1I/Ml9Qkp6reos86Tjbd1R6q+\nbQwviSEmZzqtrhfGI+iMGKA74XSctUu8ZnWhOKsG5+PujMrIJX2WMRP0E5lhJpCh\nfgK3aiNikvgigORzf0Lz39XS46eAHJrPbMaQiabDfd/+CjkvxbV+LW3oPdoZj9Mn\n38OEHt9qVkUlvpv76wIDAQAB\n-----END PUBLIC KEY-----");if(a.sign&&e)return(0,j.GU)(o)}throw Error("Error: Auth sign")},async getEntrances(){let e="/lv/v1/commerce/get_entrances",{appvr:t,pf:i,appID:r,did:n}=O(),o=M({...U.headers,url:e,pf:i,appvr:t,tdid:n});return await (0,D.Z)(()=>B({baseURL:"/",url:e,headers:{appid:r,pf:i,appvr:t,tdid:n,...o}}),{cacheKey:"promiseCache_graphic_pc_getEntrances"})},async getSpaceList(e){let t="/v1/subscription/workspace/space_list",i=x({url:t,...U.headers}),r=await B({url:t,headers:{...i},data:{aid:Number(h.yM.APP_ID),workspace_id:e}});return{spaceList:r.space_list,isFirstSubscribe:r.is_first_subscribe,isAutoSubscribe:r.is_auto_subscribe,isWebAutoSubscribe:r.is_web_auto_subscribe,isCancelSubscribe:r.is_cancel_subscribe,jointActivitySpaceList:r.joint_activity_space_list}},async getPriceList(e){var t,i,r,n;let o="/v1/subscription/cc_web_price_list",a=x({url:o,...U.headers}),s={aid:Number(h.yM.APP_ID),scene:"workspace",region:e},[l,c]=await (0,D.Z)(()=>Promise.all([B({url:o,headers:{...a},data:s}),B({url:o,headers:{...a},data:{...s,scene:"web"}})]),{cacheKey:`promiseCache_getPriceList_${JSON.stringify(s)}`}),d=(null!==(t=l.all_price_list)&&void 0!==t?t:[]).reduce((e,t)=>(e[t.product_id]=t,e),{}),u=(null!==(i=l.tab_list)&&void 0!==i?i:[]).map(e=>({as_default:e.as_default,products:e.product_ids.map(e=>d[e])}));return{allPriceList:[...null!==(r=l.all_price_list)&&void 0!==r?r:[],...null!==(n=c.all_price_list)&&void 0!==n?n:[]],groupProductList:u,ccWebDisplayInfo:l.cc_web_display_info}},getSubscriptionList:async e=>await B({url:"/v1/subscription/order_record_list",data:{aid:Number(h.yM.APP_ID),workspace_id:e,cursor:0,count:1}}),async getVipPriceList(e){var t,i;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n={aid:h.yM.APP_ID,scene:"vip",region:e,language:r},o=await (0,D.Z)(()=>B({url:"/v1/subscription/cc_price_list",data:n}),{cacheKey:`promiseCache_getSubscriptionPriceList_${JSON.stringify(n)}`}),a={month:[],year:[]};return(null!==(t=o.all_price_list)&&void 0!==t?t:[]).forEach(e=>{let{cycle_unit:t,subscribe_cycle:i}=e;"MONTH"===t&&12!==i?a.month.push(e):a.year.push(e)}),{allVipPriceList:null!==(i=o.all_price_list)&&void 0!==i?i:[],vipGroupProductList:a,ccWebDisplayInfo:o.cc_web_display_info}},async getSubscribeInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return await B({url:"/v1/subscription/get_subscribe_info",data:{language:e}})}},V=(0,j.UO)(),Z={baseURL:"/commerce",method:"POST",headers:{appid:h.yM.APP_ID,loc:V,lan:h.yM.LAN,pf:h.yM.APP_PF,appvr:h.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":h.yM.APP_SDK_VERSION},useCommerceApi:!0},z=d.ZP.createAxios(Z);z.interceptors.request.use(async e=>{let{pf:t,appvr:i,did:r,appID:n}=await L();return Object.assign(e.headers,M({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r}),{appid:n,appvr:i,pf:t,tdid:r}),e}),z.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{var t,i,r;let n=e.data;if("0"!==n.ret)return Promise.reject(e);return(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.url)&&e.config.url.indexOf("user_info")>0?Promise.resolve({data:n.data,signContext:{sign:n.sign,ret:n.ret,response:n.response,"device-time":null==e?void 0:null===(r=e.config)||void 0===r?void 0:null===(i=r.headers)||void 0===i?void 0:i["device-time"],systime:null==n?void 0:n.systime}}):Promise.resolve(n.data)}}),(0,P.Z)(z,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});let $=e=>{let t=[];return Object.entries(e).forEach(e=>{!(0,I.isNil)(e[1])&&t.push(`${e[0]}=${e[1]}`)}),t.join("&")},K=async(e,t,r)=>{let n=new(await i.e("187").then(i.bind(i,357994))).default;return n.setPublicKey(r),n.verify(e,t,E().SHA256)},q={async getSubscriptionUserInfo(e){let{appvr:t,pf:i,appID:r,did:n}=await L(),{data:o,signContext:a}=await z({url:"/v1/subscription/user_info",data:{aid:r,scene:"vip",from_db:e}}),s={appid:r,appvr:t,"device-time":null==a?void 0:a["device-time"],lan:h.yM.LAN,loc:V,pf:i,response:null==a?void 0:a.response,ret:a.ret,systime:null==a?void 0:a.systime,tdid:n},{sign:l}=a;if(l){let e=await K($(s),l,"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC1I/Ml9Qkp6reos86Tjbd1R6q+\nbQwviSEmZzqtrhfGI+iMGKA74XSctUu8ZnWhOKsG5+PujMrIJX2WMRP0E5lhJpCh\nfgK3aiNikvgigORzf0Lz39XS46eAHJrPbMaQiabDfd/+CjkvxbV+LW3oPdoZj9Mn\n38OEHt9qVkUlvpv76wIDAQAB\n-----END PUBLIC KEY-----");if(a.sign&&e)return(0,j.GU)(o)}throw Error("Error: Auth sign")},async getEntrances(){let e="/lv/v1/commerce/get_entrances",{appvr:t,pf:i,appID:r,did:n}=await L(),o=M({...Z.headers,url:e,pf:i,appvr:t,tdid:n});return await (0,D.Z)(()=>z({baseURL:"/",url:e,headers:{appid:r,pf:i,appvr:t,tdid:n,...o}}),{cacheKey:"promiseCache_getEntrances"})},async getSpaceList(e){let t="/v1/subscription/workspace/space_list",i=x({url:t,...Z.headers}),r=await z({url:t,headers:{...i},data:{aid:Number(h.yM.APP_ID),workspace_id:e}});return{spaceList:r.space_list,isFirstSubscribe:r.is_first_subscribe,isAutoSubscribe:r.is_auto_subscribe,isWebAutoSubscribe:r.is_web_auto_subscribe,isCancelSubscribe:r.is_cancel_subscribe,jointActivitySpaceList:r.joint_activity_space_list}},async getPriceList(e){var t,i,r,n;let o="/v1/subscription/cc_web_price_list",a=x({url:o,...Z.headers}),s={aid:Number(h.yM.APP_ID),scene:"workspace",region:e},[l,c]=await (0,D.Z)(()=>Promise.all([z({url:o,headers:{...a},data:s}),z({url:o,headers:{...a},data:{...s,scene:"web"}})]),{cacheKey:`promiseCache_getPriceList_${JSON.stringify(s)}`}),d=(null!==(t=l.all_price_list)&&void 0!==t?t:[]).reduce((e,t)=>(e[t.product_id]=t,e),{}),u=(null!==(i=l.tab_list)&&void 0!==i?i:[]).map(e=>({as_default:e.as_default,products:e.product_ids.map(e=>d[e])}));return{allPriceList:[...null!==(r=l.all_price_list)&&void 0!==r?r:[],...null!==(n=c.all_price_list)&&void 0!==n?n:[]],groupProductList:u,ccWebDisplayInfo:l.cc_web_display_info}},getSubscriptionList:async e=>await z({url:"/v1/subscription/order_record_list",data:{aid:Number(h.yM.APP_ID),workspace_id:e,cursor:0,count:1}}),async getVipPriceList(e){var t,i;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n={aid:h.yM.APP_ID,scene:"vip",region:e,language:r},o=await (0,D.Z)(()=>z({url:"/v1/subscription/cc_price_list",data:n}),{cacheKey:`promiseCache_getSubscriptionPriceList_${JSON.stringify(n)}`}),a={month:[],year:[]};return(null!==(t=o.all_price_list)&&void 0!==t?t:[]).forEach(e=>{let{cycle_unit:t,subscribe_cycle:i}=e;"MONTH"===t&&12!==i?a.month.push(e):a.year.push(e)}),{allVipPriceList:null!==(i=o.all_price_list)&&void 0!==i?i:[],vipGroupProductList:a,ccWebDisplayInfo:o.cc_web_display_info}},async getSubscribeInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return await z({url:"/v1/subscription/get_subscribe_info",data:{language:e}})}};var Y=i("918488"),J=i("729091"),Q=i("603662"),X=i("970986"),ee=i("216158");let et={GOOGLE_SEM:"googleadwords_int",BING_SEM:"bingads_int",PII_GOOGLE_SEM:"google sem",PII_BING_SEM:"bing sem",PII_DIRECT:"direct"};et.GOOGLE_SEM,et.PII_GOOGLE_SEM,et.BING_SEM,et.PII_BING_SEM,et.PII_DIRECT;var ei=i("472231"),er=i("965364"),en=i("957104"),eo=i("465930"),ea=i("149803"),es=i("545778"),el=i("516261"),ec=i("946464");let ed={isUserLogin:!1,checkLoginStartTime:0,hasInjectUserInfo:!1};class eu{start(){performance.getEntriesByName(this._startMarkName).length<=0&&performance.mark(this._startMarkName)}end(){performance.getEntriesByName(this._endMarkName).length<=0&&(performance.mark(this._endMarkName),this.summarize())}summarize(){performance.measure(this.name,this._startMarkName,this._endMarkName)}getStartMark(){return performance.getEntriesByName(this._startMarkName)[0]}getEndMark(){return performance.getEntriesByName(this._endMarkName)[0]}toJSON(){let e=this.getStartMark(),t=this.getEndMark();if(e&&t){let i="timing"+(0,I.upperFirst)((0,I.camelCase)(this.name));return{[`${i}Start`]:e.startTime,[`${i}End`]:t.startTime,[`${i}`]:t.startTime-e.startTime}}return null}constructor(e){this.name=e,this._startMarkName=`${this.name}_START`,this._endMarkName=`${this.name}_END`}}let ep={starlingInit:new eu("STARLING_INIT"),entryInit:new eu("ENTRY_INIT"),appInit:new eu("APP_INIT"),userInit:new eu("USER_INIT"),everCloudWasmPrefetch:new eu("EVER_CLOUD_WASM_PREFETCH"),everCloudInit:new eu("EVER_CLOUD_INIT"),pageInit:new eu("PAGE_INIT"),teaInit:new eu("TEA_INIT"),headScriptExecution:new eu("HEAD_SCRIPT_EXECUTION"),bodyScriptExecution:new eu("BODY_SCRIPT_EXECUTION"),capcutAccountServiceInit:new eu("CAPCUT_ACCOUNT_SERVICE_INIT")};var e_=i("403622"),eg=i("528426"),eh=i("795640"),em=i("784126"),ev=i("340792"),ef=i("733458"),ey=i("4597"),ew=i("726672"),eb=i("605723"),eS=i("320774"),eC=i("956479"),ek=i("732599");i("966156");var eE=i("368100"),eI=i("733730"),eT=i("966090");class eP{report(e){this.reporter.report("google_signin_popup_not_show",e)}constructor(){this.reporter=(0,ea.y)()}}var eA=i("474447"),eR=i("287272"),ex=i("394567"),eN=i("3767"),eL=i("462934");let eO=e=>new Promise((t,i)=>{if(window.fbAsyncInit=()=>{window.FB.init({appId:null!=e?e:eA.ye,version:"v19.0",status:!0}),t()},window.FB){window.fbAsyncInit();return}let r=document.createElement("script");r.async=!0,r.addEventListener("error",i),r.src="https://connect.facebook.net/en_US/sdk.js",document.body.appendChild(r)});var eM=((n={}).connected="connected",n.not_authorized="not_authorized",n.unknown="unknown",n);let eD=()=>new Promise(e=>{window.FB.getLoginStatus(t=>{e(t.status)})}),ej=()=>new Promise((e,t)=>{window.FB.login(i=>{i.authResponse?e(i):t(i)})}),eF=()=>new Promise(e=>{window.FB.logout(()=>{e()})});var eU=i("752450");let eB=(e,t,i)=>{var r,n,a;let s,l=null,c=window.screen.height,d=window.screen.width,u=`resizable,scrollbars,width=800,height=600,display=popup,top=${(c-30-600)/2},left=${(d-800)/2}`;return r=e,n=window,a=t,null===l||l.closed?l=n.open((0,o.C)(r,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"_blank",u):l.focus(),void(s=n.setInterval(()=>{try{if("google"===i){let{access_token:e}=eU.parse(l.location.hash.substr(1));if(!e)return;localStorage.setItem("google",JSON.stringify({access_token:e})),l.authDoneClose=!0}(!l||l.closed||l.authDoneClose)&&(n.clearInterval(s),s=1,l.authDoneClose&&l.close(),null==a||a())}catch(e){}},2e3))},eH=(e,t)=>new Promise((i,r)=>{eB(e,()=>{i()},t)}),eG=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"google";try{var t;return JSON.parse(null!==(t=localStorage.getItem(e))&&void 0!==t?t:"{}")}catch(e){return{}}};async function eW(e){var t;if(!e)return Promise.reject();let i={response_type:"token",client_id:e,redirect_uri:`${location.origin}/third-party-entrance`,scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",prompt:"select_account"},r=`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams(i)}`;return await eH(r,"google"),{accessToken:(null!==(t=eG("google"))&&void 0!==t?t:{}).access_token}}let eV=new class e{reportSignIn(e){this.reporter.report("google_signin_popup",e)}constructor(){this.reporter=(0,ea.y)()}},eZ=new eI.Z,ez=new eT.S,e$="sign";function eK(){ef.m.removeItem(eA.of),ef.m.removeItem(eA.PB),ef.m.removeItem(eA.No),ef.m.removeItem(eA.JQ),ef.m.removeItem(eA.js),ef.m.removeItem(eA.ax),ef.m.removeItem(eA.Yi),ef.m.removeItem(eA.LO),ef.m.removeItem(eA.IL),ef.m.removeItem(eA.IL)}function eq(e){var t;let i=null===(t=window.googleOneTapLogMomentResults)||void 0===t?void 0:t.shift();if(!(null==i?void 0:i.type))return;let r=i.duration?Math.round(i.duration):Math.round(window.performance.now());eV.reportSignIn({action:i.type,current_page:e,duration:"show"===i.type?r:void 0})}function eY(e){var t;let i=null===(t=window)||void 0===t?void 0:t.googleNotificationNotDisplayReason;if(!i)return;let r=Math.round(window.performance.now());new eP().report({reason:i,current_page:e||"",duration:r}),eN.W.log(i),window.googleNotificationNotDisplayReason=""}async function eJ(e,t,i){var r;let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=null===(r=window.googleOneTapResults)||void 0===r?void 0:r.pop();if(!!s){eV.reportSignIn({action:"signin",current_page:t,signin_type:"auto"===s.select_by?"auto":"user"});try{let t=await (await e()).signinWithCode({appId:a,name:"google",platform_app_id:(0,eL.g4)(i,eL.nw.Google,n),access_token_secret:s.credential,login_only:o});eZ.emit(e$,{status:eA.lw.Success,extraData:{isNewSignupUser:!!t.new_user,isFromGoogleOneTap:!0,isGoogleOneTapAutoSelect:"auto"===s.select_by}})}catch(e){ef.m.setString(eA.PB,e.error_code),ef.m.setString(eA.No,e.description),ef.m.setString(eA.JQ,e.token),ef.m.setString(eA.js,"true"),eZ.emit(e$,{status:eA.lw.Fail})}}}async function eQ(e){var t;let{passport:i,isBOE:r=!1,accountConfig:n,enableThirdPartySignAgeGate:o=!1,appId:a}=e,s=null===(t=window.SignInWithGoogleBtnResults)||void 0===t?void 0:t.pop();if(!s)return;eN.W.event("login-action",{platform:"google"}),eK();let l={appId:a,name:"google",platform_app_id:(0,eL.g4)(n,eL.nw.Google,r),access_token_secret:s.credential,login_only:o};try{let e=await (await i()).signinWithCode(l);eZ.emit(e$,{status:eA.lw.Success,name:"google",extraData:{isNewSignupUser:!!e.new_user,isFromGoogleSignInBtn:!0}})}catch(e){ef.m.setString(eA.PB,e.error_code),ef.m.setString(eA.No,e.description),ef.m.setString(eA.JQ,e.token),e.error_code===ex.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_NOT_EXITE&&ef.m.setJson(eA.IL,l),eZ.emit(e$,{status:eA.lw.Fail,name:"google"})}}let eX=(0,a.C)({id:"ThirdPartSignInMachine",initial:"idle",context:{isBOE:!1,passport:()=>Promise.resolve(null),name:"",source:es.C.LoginIn,showRestoreModal:void 0,isNewPageLoginFacebook:!1},invoke:{id:"listeningStateChange",src:(0,o.C)("listeningStateChange",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},entry:["invokeGoogleOneTapFunc","injectGoogleOneTapFunc","invokeSignInWithGoogleBtnFunc","injectSignInWithGoogleBtnFunc"],states:{idle:{},authorizing:{invoke:{id:"thirdPartAuth",src:(0,o.C)("thirdPartAuth",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}},success:{entry:["notifySignSuccess",(0,s.lj)((e,t)=>{let{name:i,source:r,authType:n,currentPage:o}=e,{data:a}=t,s={isThirdparty:!0,source:r,type:i,isLoginNewUser:(null==a?void 0:a.isNewSignupUser)?1:0};return n===eA.RR.googleOneTab&&(s.pageEnterFrom="google",s.statusEnterFrom="google"),n===eA.RR.googleOneTabAutoSelect&&(s.pageEnterFrom="google_auto",s.statusEnterFrom="google_auto"),o&&(s.currentPage=o),{type:"SIGN_IN_SUCCESS",params:s,extra:a}})],on:{SET_THIRD_PARTY_BIRTHDAY:{actions:(0,s.lj)(()=>({type:"SIGN_IN"}))}}},fail:{entry:(0,s.lj)((e,t)=>{let{name:i,source:r,errorCode:n,errorMsg:o,authType:a,currentPage:s}=e,l={source:r,type:i||t.name||"",errorCode:n,errorMsg:o};return a===eA.RR.googleOneTab&&(l.pageEnterFrom="google",l.statusEnterFrom="google"),a===eA.RR.googleOneTabAutoSelect&&(l.pageEnterFrom="google_auto",l.statusEnterFrom="google_auto"),s&&(l.currentPage=s),{type:"SIGN_IN_FAIL",params:l}})},fillBirthday:{initial:"fillingBirthday",states:{fillingBirthday:{on:{SET_THIRD_PARTY_BIRTHDAY:{target:"reSignupWithBirthday",actions:(0,s.f0)({birthday:(e,t)=>t.birthday})}}},reSignupWithBirthday:{invoke:{id:"reSignupWithBirthdayService",src:(0,o.C)("reSignupWithBirthdayService",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}}}}},on:{AUTH:{target:"authorizing",internal:!1,actions:["clearStatus","updateName","updateSource","updateAuthType","updatePlatform","updateCurrentPage","updateScanCodeParams","setCallback","reportSlardarLoginAction"]},AUTH_SUCCESS:{target:"success",actions:["clearStatus"]},AUTH_FAIL:{target:"fail",actions:["clearStatus"]},UPDATE_ERROR:{actions:["updateError"]},REPORT_SIGN_IN_ACTION:{actions:(0,s.lj)((e,t)=>{var i;return{type:"SIGN_IN_ACTION",params:{source:null!==(i=t.source)&&void 0!==i?i:e.source,action:t.action}}})},INVOKE_CALLBACK:{actions:["invokeCallback"]},CHANGE_CONTEXT:{actions:["changeContext"]},INIT_LOGIN_SUCCESS_CB:{actions:"initLoginSuccessCb"},UPDATE_GOOGLE_ONE_TAP:{actions:["updateGoogleOneTap"]},UPDATE_GOOGLE_SIGNIN_BTN:{actions:["updateGoogleSignInBtn"]},THIRD_PART_FILL_BIRTHDAY:{target:"fillBirthday"},GET_CONTEXT:{actions:["getContext"]},INIT:{target:"idle"}}},{services:{listeningStateChange:e=>{let{showRestoreModal:t,passport:i,name:r,currentPage:n,enableDeviceAgeBan:a,ageGateChecker:s}=e;return e=>(function(e){function t(t){if(t.key!==eA.of)return;let i=t.newValue;"string"==typeof i&&e(i)}function i(t){e(t.status,t.extraData,t.name)}return window.addEventListener("storage",t),eZ.on(e$,i),()=>{window.removeEventListener("storage",t),eZ.off(e$,i)}})((l,c,d)=>{var u,p,h,m;let v=null!==(u=ef.m.getString(eA.PB))&&void 0!==u?u:void 0,f=null!==(p=ef.m.getString(eA.No))&&void 0!==p?p:void 0,y=null!==(h=ef.m.getString(eA.JQ))&&void 0!==h?h:void 0,w=!!(null!==(m=ef.m.getString(eA.js))&&void 0!==m?m:void 0);if(e({type:"INVOKE_CALLBACK",errorCode:v,errorMsg:f}),l===eA.lw.Fail&&e({type:"UPDATE_ERROR",errorCode:v,errorMsg:f}),eN.W.event("login-thirdparty",{status:l===eA.lw.Success?"success":"fail",platform:d||r,errorCode:null!=v?v:"",errorMsg:null!=f?f:""}),l===eA.lw.Success){let t;let i=ef.m.getJson(eA.ax);if((null==c?void 0:c.isFromGoogleOneTap)&&e({type:"UPDATE_GOOGLE_ONE_TAP",data:{isGoogleOneTapAutoSelect:null==c?void 0:c.isGoogleOneTapAutoSelect}}),(null==c?void 0:c.isFromGoogleSignInBtn)&&e({type:"UPDATE_GOOGLE_SIGNIN_BTN"}),e({type:"GET_CONTEXT",func:e=>{t=e.birthday}}),t){_.B.updateUser({age_gate_birthday:t}).catch(e=>{eN.W.error("LvThirdPartSignIn-updateBirthday",Error(JSON.stringify(e)),e)}).finally(()=>{e({type:"AUTH_SUCCESS",data:c||i})});return}e({type:"AUTH_SUCCESS",data:c||i})}else{let l=parseInt(v||"0",10),u=ef.m.getJson(eA.IL);if(y&&l===ex.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_ACCOUNT_CANCEL)ez.report({action:"show",current_page:n||"login"}),null==t||t({onOk:async()=>{var t;await (null===(t=await i())||void 0===t?void 0:t.cancelLogin(y,1).then(()=>{let t=ef.m.getJson(eA.ax);e({type:"AUTH_SUCCESS",data:c||t})}))},onCancel:()=>{e({type:"AUTH_FAIL",name:d||r})},currentPage:n||"login"});else if(l===ex.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_NOT_EXITE&&(u||"google"===r||w)){if(a&&(null==s?void 0:s.ageDeviceBan.isBeingBanned())){eE.Z.warning({closable:!1,maskStyle:{zIndex:10003},wrapStyle:{zIndex:10003},title:g.ZP.t("web_age_gate_too_yong_title",{},"Age requirement not met"),content:g.ZP.t("web_age_gate_too_yong_desc",{},"Sorry, we are unable to create your account right now. We appreciate you checking us out!"),okText:g.ZP.t("web_age_gate_too_yong_ok_button",{},"OK")});return}if(w){let e=encodeURIComponent(`${location.origin}${location.pathname}`);window.location.href=(0,o.C)(`${location.origin}/signup?redirect_url=${e}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1});return}e({type:"THIRD_PART_FILL_BIRTHDAY"})}else e({type:"AUTH_FAIL"})}})},thirdPartAuth:async(e,t)=>{var i,r,n;let{isBOE:a=!1,appId:s,appName:l,accountConfig:c,passport:d,isInvitePage:u,invitedCode:p,source:_,scanCodeParams:g,isNewPageLoginFacebook:h,enableThirdPartySignAgeGate:m,signinGoogleWithPassportWindow:v,signinTiktokWithBindEmail:f}=e,{platform:y,name:w}=t,b=new URL(window.location.href);if("tiktok"===w)!function(e){let{isBOE:t,appId:i,appName:r,enableThirdPartySignAgeGate:n=!1,accountConfig:a,otherInfo:s}=e,l=Math.random().toString(36).substring(2),c=window.screen.height,d=window.screen.width,u=1;(null==s?void 0:s.isTTEmail)&&u++,(null==s?void 0:s.isTTLive)&&u++;let p=u>1?700:600;ef.m.setString(eA.Yi,l),ef.m.setString(eA.LO,n?"1":"");let _=new URLSearchParams;if(i&&_.set("aid",String(i)),r&&_.set("name",r),a&&_.set("pid",String((0,eL.g4)(a,eL.nw.TikTok,t))),(null==s?void 0:s.isInvitePage)&&_.set("invite_code",(null==s?void 0:s.invitedCode)||""),null==s?void 0:s.isTTLive){let e=new URL(window.location.href);[eo.g2.UTM_MEDIUM,eo.g2.UTM_SOURCE,eo.g2.OPEN_ID,eo.g2.VID,"jump_action"].forEach(t=>{let i=e.searchParams.getAll(t);(null==i?void 0:i.length)&&i.forEach(e=>_.append(t,e))})}let g=JSON.stringify({csrfState:l,query:_.toString()}),h=`${location.origin}${eR.l.TIKTOK_AUTH.PATH}`,m=(0,eL.ze)(a,eL.nw.TikTok,t),v=`${eA.AV}?client_key=${m}&scope=${eA.f0.TikTok}${(null==s?void 0:s.isTTLive)?`,${eA.f0.TikTokLive}`:""}${(null==s?void 0:s.isTTEmail)?`,${eA.f0.TikTokEmail}`:""}&response_type=code&redirect_uri=${encodeURIComponent(h)}&state=${encodeURIComponent(g)}`;(null==s?void 0:s.isTTLive)?window.open((0,o.C)(v,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"_self"):window.open((0,o.C)(v,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"name=login",`fullscreen=1,width=800,height=${p},top=${(c-30-p)/2},left=${(d-800)/2}`)}({isBOE:a,appId:s,appName:l,accountConfig:c,otherInfo:{isInvitePage:u,invitedCode:p,isTTLive:b.searchParams.get(eo.g2.UTM_MEDIUM)===eo.lP.TIKTOK_LIVE,isTTEmail:null!=f&&f},enableThirdPartySignAgeGate:m});else if("scan_code"===w)null===(i=await d())||void 0===i||i.scanLoginWithWindow(_===es.C.LoginIn?"login":"sign_up",g);else if(y&&"facebook"===w){let e,t;if(h){let i=await function(e){if(!e)return Promise.reject();let t=`https://${window.location.host}/facebook-login`;return window.open((0,o.C)(`${t}?client_key=${e}`,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})),new Promise((e,t)=>{let i=()=>localStorage.removeItem(en.g.FACEBOOK_AUTH_STORAGE),r=n=>{if(n.key===en.g.FACEBOOK_AUTH_STORAGE)try{var o;let{status:i,userID:r,accessToken:a}=JSON.parse(null!==(o=n.newValue)&&void 0!==o?o:"{}");if(!i||i!==eM.connected||!r||!a){t(i);return}e({status:i,accessToken:a,userID:r})}catch(e){t(eM.not_authorized)}finally{i(),window.removeEventListener("storage",r)}};i(),window.addEventListener("storage",r)})}((0,eL.ze)(c,eL.nw.Facebook,a));e=i.accessToken,t=i.userID}else{await eO((0,eL.ze)(c,eL.nw.Facebook,a)),await eD()===eM.connected&&await eF();let{authResponse:i}=await ej();e=i.accessToken,t=i.userID}let i=await d(),r={appId:s,name:"facebook",platform_app_id:y,access_token:e,openid:t,login_only:m};null==i||i.signinWithCode(r).then(e=>{eZ.emit(e$,{status:eA.lw.Success,extraData:{isNewSignupUser:!!(null==e?void 0:e.new_user)}})}).catch(e=>{ef.m.setString(eA.PB,e.error_code),ef.m.setString(eA.No,e.description),ef.m.setString(eA.JQ,e.token),e.error_code===ex.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_NOT_EXITE&&ef.m.setJson(eA.IL,r),eZ.emit(e$,{status:eA.lw.Fail})});return}else if(y&&"google"===w&&v)ef.m.setJson(eA.IL,{appId:s,name:"google",platform_app_id:y,login_only:m}),null===(r=await d())||void 0===r||r.signinWithWindow(y,s,{isInvitePage:u,invitedCode:p,loginOnly:m});else if(y&&"google"===w&&!v){let e=(0,eL.ze)(c,eL.nw.Google,a),{accessToken:t}=await eW(e),i=await d(),r={appId:s,name:"google",platform_app_id:y,access_token:t,login_only:m};null==i||i.signinWithCode(r).then(e=>{eZ.emit(e$,{status:eA.lw.Success,extraData:{isNewSignupUser:!!(null==e?void 0:e.new_user)}})}).catch(e=>{ef.m.setString(eA.PB,e.error_code),ef.m.setString(eA.No,e.description),ef.m.setString(eA.JQ,e.token),e.error_code===ex.B.SIGN_UP_CODE.LOGIN_ERROR_CODE.USER_NOT_EXITE&&ef.m.setJson(eA.IL,r),eZ.emit(e$,{status:eA.lw.Fail})})}else y&&"apple"===w&&(null===(n=await d())||void 0===n||n.signinWithWindow(y,s,{loginOnly:!0}))},reSignupWithBirthdayService:e=>{let{birthday:t,passport:i,name:r,platform:n,appId:o,isInvitePage:a,invitedCode:s,signinGoogleWithPassportWindow:l}=e;return e=>{var c,d;if("google"===r&&n&&l){null===(c=i())||void 0===c||c.then(e=>null==e?void 0:e.signinWithWindow(n,o,{isInvitePage:a,invitedCode:s,loginOnly:!1}));return}if("google"===r&&!l){let r=ef.m.getJson(eA.IL);ef.m.removeItem(eA.IL),null===(d=i())||void 0===d||d.then(i=>null==i?void 0:i.signinWithCode({...r,login_only:!1}).then(()=>{_.B.updateUser({age_gate_birthday:t}).catch(e=>{eN.W.error("LvThirdPartSignIn-updateBirthday",Error(JSON.stringify(e)),e)}).finally(()=>e({type:"AUTH_SUCCESS"}))}).catch(t=>{e({type:"UPDATE_ERROR",errorCode:t.error_code,errorMsg:t.description}),e({type:"AUTH_FAIL"})}));return}let u=ef.m.getJson(eA.IL);ef.m.removeItem(eA.IL),i().then(i=>null==i?void 0:i.signinWithCode({...u,login_only:!1}).then(()=>{_.B.updateUser({age_gate_birthday:t}).catch(e=>{eN.W.error("LvThirdPartSignIn-updateBirthday",Error(JSON.stringify(e)),e)}).finally(()=>e({type:"AUTH_SUCCESS"}))}).catch(t=>{e({type:"UPDATE_ERROR",errorCode:t.error_code,errorMsg:t.description}),e({type:"AUTH_FAIL"})}))}}},actions:{clearStatus:(0,s.f0)({birthday:(e,t)=>(eK(),"")}),updateName:(0,s.f0)({name:(e,t)=>t.name}),updateSource:(0,s.f0)({source:(e,t)=>t.source}),updateAuthType:(0,s.f0)({authType:(e,t)=>t.authType}),updatePlatform:(0,s.f0)({platform:(e,t)=>t.platform}),updateCurrentPage:(0,s.f0)({currentPage:(e,t)=>{var i;let{currentPage:r}=e;return null!==(i=null==t?void 0:t.currentPage)&&void 0!==i?i:r}}),updateError:(0,s.f0)({errorCode:(e,t)=>t.errorCode,errorMsg:(e,t)=>t.errorMsg}),setCallback:(0,s.f0)({callback:(e,t)=>t.callback}),reportSlardarLoginAction:(e,t)=>{eN.W.event("login-action",{platform:t.name})},invokeCallback:(0,s.f0)((e,t)=>{let{callback:i}=e,{errorCode:r,errorMsg:n}=t;return null==i||i({errorCode:r,errorMsg:n}),{callback:void 0}}),changeContext:(0,s.f0)((e,t)=>({...e,...t.context})),invokeGoogleOneTapFunc:e=>{var t;let{passport:i,isBOE:r,accountConfig:n,currentPage:o,enableThirdPartySignAgeGate:a,appId:s}=e,l=window.googleOneTapLogMomentResults,c=null!==(t=null==l?void 0:l.length)&&void 0!==t?t:0;for(let e=0;e<c;e++)eq(o);eY(o||""),eJ(i,o,n,r,a,s)},injectGoogleOneTapFunc:e=>{let{passport:t,isBOE:i,accountConfig:r,currentPage:n,enableThirdPartySignAgeGate:o,appId:a}=e;window.handleGoogleOneTapMoment=()=>{eq(n),eY(n||"")},window.handleGoogleOneTapResult=()=>{eJ(t,n,r,i,o,a)}},invokeSignInWithGoogleBtnFunc:e=>{let{passport:t,isBOE:i,accountConfig:r,enableThirdPartySignAgeGate:n,appId:o}=e;eQ({passport:t,isBOE:i,accountConfig:r,enableThirdPartySignAgeGate:n,appId:o})},injectSignInWithGoogleBtnFunc:e=>{let{passport:t,isBOE:i,accountConfig:r,enableThirdPartySignAgeGate:n,appId:o}=e;window.handleSignInWithGoogleBtnResult=()=>{eQ({passport:t,isBOE:i,accountConfig:r,enableThirdPartySignAgeGate:n,appId:o})}},initLoginSuccessCb:(0,s.f0)({loginSuccessCb:(e,t)=>t.func}),notifySignSuccess:e=>{var t;let i=(0,ey.pf)("state"),r=(0,ey.pf)(eo.g2.UTM_CAMPAIGN),n=(null==i?void 0:i.length)&&"googledrive"===r;null==e||null===(t=e.loginSuccessCb)||void 0===t||t.call(e,n?"google_drive":void 0)},updateGoogleOneTap:(0,s.f0)({source:e=>es.C.LoginIn,authType:(e,t)=>{var i;return(null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.isGoogleOneTapAutoSelect)?eA.RR.googleOneTabAutoSelect:eA.RR.googleOneTab},name:e=>"google"}),updateGoogleSignInBtn:(0,s.f0)({source:e=>es.C.LoginIn,authType:e=>eA.RR.googleSignInBtn,name:e=>"google"}),updateScanCodeParams:(0,s.f0)({scanCodeParams:(e,t)=>t.scanCodeParams}),getContext:(e,t)=>{t.func(e)}}});var e0=i("400387"),e1=i("707780");let e2={baseURL:"/lv/v1/task",method:"POST",headers:{loc:h.yM.CHANNEL,lan:h.yM.LAN,pf:h.yM.APP_PF,appvr:h.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":h.yM.APP_SDK_VERSION}},e6=d.ZP.createAxios(e2);(0,e1._)(e6,{enableURL:[/\/get_task_status/]}),e6.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=e2.headers;return Object.assign(e.headers,(0,f.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),e6.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}});let e3=async e=>await e6({url:"/get_invite_detail",data:e}),e4=(0,a.C)({id:"LvUserInviteMachine",context:{isInvitePage:!1,invitedCode:"",inviteDetail:{}},initial:"unknow",states:{unknow:{invoke:{id:"fetchInviteInfo",src:(0,o.C)("fetchInviteInfo",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:[{target:"ready",actions:["saveInviteDetail"]}],onError:[{target:"error"}]}},ready:{type:"final"},error:{type:"final"}}},{services:{async fetchInviteInfo(e){let{isInvitePage:t,invitedCode:i}=e;if(!i||!t)throw Error("no invite code");let r=await e3({invite_code:i});return{inviterName:r.data.inviter_name,invitedSpaceCap:r.data.invited_space_cap,invitedSpaceTime:r.data.invited_space_time,rewardType:r.data.reward_type,inviterImg:r.data.inviter_img}}},actions:{saveInviteDetail:(0,s.f0)({inviteDetail:(e,t)=>{let{inviteDetail:i}=e;return{...i,...t.data}}})}});var e5=i("752742"),e8=i("517818");let e7=()=>({inviteLink:"",workspaceInfo:{inviter_nickname:"***",name:"***",inviter_avatar:""},errCode:void 0,joinWorkspaceSuccessCb:null,onError:null,reviewStatus:void 0}),e9=(0,a.C)({id:"LvTeamInviteMachine",context:{...e7()},initial:"unknown",states:{unknown:{always:[{target:"loading",cond:"checkInviteLink"},{target:"error"}]},loading:{invoke:{id:"fetchWorkspaceInfo",src:(0,o.C)("fetchWorkspaceInfo",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"hasInfo",actions:["saveWorkspaceInfo"]},onError:{actions:["saveErrCode","handleError"]}}},hasInfo:{},review:{},error:{},join:{invoke:{id:"joinWorkspace",src:(0,o.C)("joinWorkspace",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:[{actions:["handleJoinWorkspaceSuccess"],cond:(e,t)=>t.data.status===e5.uv.Passed||t.data.status===e5.uv.JoinOtherWay},{target:"review",actions:["saveReviewStatus"],cond:(e,t)=>t.data.status===e5.uv.Waiting||t.data.status===e5.uv.Rejected}],onError:{actions:["saveErrCode","handleError"]}}}},on:{REFRESH:{actions:"resetInviteLink",target:"unknown"},JOIN_WORKSPACE:{target:"join"},TO_ERROR:{target:"error"}}},{services:{fetchWorkspaceInfo:async e=>{let{inviteLink:t}=e;if(!t)return Promise.reject();let i=await J.E.getWorkspaceInfoByInvitationLink({invitation_link:t}).then(e=>null==e?void 0:e.data);return(null==i?void 0:i.workspace_info)?i:Promise.reject()},joinWorkspace:async(e,t)=>{let{inviteLink:i}=e,{resolve:r}=t;if(!i)return Promise.reject();try{return await J.E.joinSpace({inviteLinkParam:{invitationLink:i},joinWorkspaceType:e5.xv.InviteLink})}catch(e){return Promise.reject(e)}finally{null==r||r()}}},actions:{saveReviewStatus:(0,s.f0)({reviewStatus:(e,t)=>t.data.status}),saveWorkspaceInfo:(0,s.f0)((e,t)=>{let{workspace_info:i}=t.data;return{workspaceInfo:{...i}}}),saveSpaceInfo:(0,s.f0)((e,t)=>{let{workspaceInfo:i}=t.data;return{workspaceInfo:i}}),resetInviteLink:(0,s.f0)((e,t)=>{let{inviteLink:i}=e;return{inviteLink:t.newLink?t.newLink:i,joinWorkspaceSuccessCb:t.joinWorkspaceSuccessCb?t.joinWorkspaceSuccessCb:null,onError:t.onError}}),saveErrCode:(0,s.f0)((e,t)=>{var i,r,n,o;return(null==t?void 0:null===(r=t.data)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.ret)?{errCode:parseInt(null==t?void 0:null===(o=t.data)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.ret,10)}:{errCode:e8.E7.DEFAULT}}),handleError:e=>{var t;return null===(t=e.onError)||void 0===t?void 0:t.call(e,e)},handleJoinWorkspaceSuccess:e=>{var t;return null===(t=e.joinWorkspaceSuccessCb)||void 0===t?void 0:t.call(e,e)}},guards:{checkInviteLink:e=>!!(null==e?void 0:e.inviteLink)}}),te={baseURL:"/lv/v1",method:"POST",headers:{loc:h.yM.CHANNEL,lan:g.ZP.language||h.yM.LAN,pf:h.yM.APP_PF,appvr:h.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":h.yM.APP_SDK_VERSION},params:{}},tt=d.ZP.createAxios(te);tt.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=te.headers;return Object.assign(e.headers,(0,f.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),tt.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}}),(0,P.Z)(tt,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});let ti={getCareerQuestionnaire:()=>tt({url:"/persona/get_questionnaire",method:"POST"}),submitCareerQuestionnaire:e=>tt({url:"/persona/submit_questionnaire",method:"POST",data:e}),addQuestionnaireRecord(e){let{pf:t,appvr:i,tdid:r}=te.headers,n=d.ZP.getWebDomain(),o="/lv/v1/user/web/add_questionnaire_record",a=(0,f.O)({url:`${n}${o}`,pf:t,appvr:i,tdid:r});return fetch(`${n}${o}`,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",...te.headers,...a},body:JSON.stringify(e),keepalive:!0})},isBusinessUser:()=>tt({url:"/user/web/is_business_user",method:"POST"})},tr=(0,a.C)({id:"userCareer",initial:"checkingCareer",context:{userInfo:void 0,noCareerCb:()=>null,userFinishCareerCb:()=>{},shouldShowCareerModal:!1,questionList:[],answers:[],questionCount:0,question:{},answer:[],modal:null,alreadyShowModal:!1,chooseProfessionShowReporter:new class e{report(e){this.reporter.report("choose_profession_show",e)}constructor(){this.reporter=(0,ea.y)()}},chooseProfessionConfirmReporter:new class e{report(e){this.reporter.report("choose_profession_confirm",e)}constructor(){this.reporter=(0,ea.y)()}},reporterParams:{}},states:{checkingCareer:{id:"checkingCareer",invoke:{id:"checkCareer",src:(0,o.C)("checkCareer",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:"hasCareer",onError:"noCareer"}},noCareer:{initial:"fetching",states:{fetching:{invoke:{id:"fetchQuestionnaire",src:(0,o.C)("fetchQuestionnaire",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"answering",actions:["updateQuestionList","updateQuestion"]},onError:{target:"unknownError"}}},answering:{invoke:{id:"showCareerModal",src:(0,o.C)("showCareerModal",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["updateModal","reportQuestionShow","setAlreadyShowModal"],cond:"isNotShowModal"}},on:{CHECK:{actions:["checkAnswer","reportCheck"]},BACK:{actions:["popAnswer","reportBack","updateQuestion","reportQuestionShow"]},NEXT:{actions:["pushAnswer","reportNext","updateQuestion","reportQuestionShow"]},SUBMIT:{target:"submitting",actions:["setOnSubmitError","reportSubmit","reportChooseCareer"]},INPUT:{actions:["inputAnswer"]},SKIP:{target:"skipped",actions:["setOnSkipError","reportSkip"]}}},submitting:{invoke:{id:"submit",src:(0,o.C)("submit",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"#userCareer.hasCareer",actions:["updateCareer","notifyUserCareer","triggerUserFinishCareerCb"]},onError:{target:"answering",actions:["handleSubmitError"]}}},unknownError:{},skipped:{entry:["notifyUserCareerSkipped"],invoke:{id:"skip",src:(0,o.C)("skip",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"#userCareer.hasCareer",actions:["updateSkippedCareer","notifyUserCareer"]},onError:{actions:["handleSkipError"]}}}}},hasCareer:{type:"final",entry:["stopEmailSignInActor"]}},on:{SET_NO_CAREER_CB:{actions:["setNoCareerCb"]}}},{services:{checkCareer(e){let{shouldShowCareerModal:t,userInfo:i}=e;return(null==i?void 0:i.career)||!t?Promise.resolve():Promise.reject(Error("no career"))},showCareerModal:e=>e.alreadyShowModal||!e.noCareerCb?Promise.resolve():Promise.resolve(e.noCareerCb()),fetchQuestionnaire:()=>ti.getCareerQuestionnaire(),submit(e){let{answers:t,question:i,answer:r,modal:n}=e,o=t.map(e=>({key:e.key,title:e.title,answer_list:e.answer_list.map(t=>({key:t.key,text:"q2a8"===t.key?t.text+e.other_input:t.text,text_starling:t.text_starling}))}));return o.push({key:i.key,title:i.title,answer_list:i.answer_list.filter(e=>r.find(t=>t===e.key)).map(e=>({key:e.key,text:e.text,text_starling:e.text_starling}))}),null==n||n.close(),ti.submitCareerQuestionnaire({question_list:o})},skip(e){let{answers:t,modal:i}=e;null==i||i.close();let r=t.map(e=>({key:e.key,title:e.title,answer_list:e.answer_list.map(e=>({key:e.key,text:e.text,text_starling:e.text_starling}))}));return ti.submitCareerQuestionnaire({question_list:0===r.length?null:r})}},actions:{setNoCareerCb:(0,s.f0)({noCareerCb:(e,t)=>t.callback}),updateCareer:(0,s.f0)({userInfo:e=>{var t,i,r;let{answers:n,userInfo:o}=e;return{...o,career:null==n?void 0:null===(r=n[0])||void 0===r?void 0:null===(i=r.answer_list)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.text_starling}}}),updateSkippedCareer:(0,s.f0)({userInfo:e=>{var t,i,r,n;let{answers:o,userInfo:a}=e;return{...a,career:null!==(n=null==o?void 0:null===(r=o[0])||void 0===r?void 0:null===(i=r.answer_list)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.text_starling)&&void 0!==n?n:"skip"}}}),notifyUserCareer:(0,s.lj)(e=>{var t;return{type:"UPDATE_USER_CAREER",userInfo:{career:null===(t=e.userInfo)||void 0===t?void 0:t.career}}}),triggerUserFinishCareerCb:e=>{let{userFinishCareerCb:t,answers:i,answer:r,question:n}=e,o=["q1a6","q1a7","q1a8","q2a6","q2a7","q6a1","q6a2"];i.push({...n,key:n.key,title:n.title,answer_list:n.answer_list.filter(e=>r.find(t=>t===e.key))});let a=i.map(e=>e.answer_list.map(e=>e.key).some(e=>o.includes(e))).flat().some(e=>e);null==t||t({isBusinessUserFlag:a}),ti.addQuestionnaireRecord({questionnaire_detail:{answers:JSON.stringify(i)},questionnaire_type:1})},notifyUserCareerSkipped:(0,s.lj)(()=>({type:"UPDATE_USER_CAREER_SKIPPED",skipped:!0})),updateQuestionList:(0,s.f0)({questionList:(e,t)=>t.data.question_list,questionCount:(e,t)=>t.data.question_count}),updateQuestion:(0,s.f0)({question:e=>{let{questionList:t,answers:i}=e,r=i.reduce((e,t)=>(t.answer_list.forEach(t=>{e.add(t.key)}),e),new Set);return t.find(e=>{var t,n,o,a,s,l,c;let d=(null===(n=e.depend_on)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.type)==="or"?null===(a=e.depend_on)||void 0===a?void 0:null===(o=a[0])||void 0===o?void 0:o.answer_list.some(e=>r.has(e)):null===(l=e.depend_on)||void 0===l?void 0:null===(s=l[0])||void 0===s?void 0:s.answer_list.every(e=>r.has(e));return e.position===i.length+1&&(null===(c=e.depend_on)||void 0===c||!c.length||d)})}}),checkAnswer:(0,s.f0)({answer:(e,t)=>{let{question:i,answer:r}=e,{key:n}=t;return"single"===i.type?r.find(e=>e===n)?[]:[n]:r.find(e=>e===n)?r.filter(e=>e!==n):[...r,n]}}),inputAnswer:(0,s.f0)({question:(e,t)=>{let{question:i}=e,{value:r}=t;return i.other_input=r,i}}),popAnswer:(0,s.f0)({answers:e=>{let{answers:t}=e,i=[...t];return i.pop(),i},answer:e=>[]}),pushAnswer:(0,s.f0)({answers:e=>{let{question:t,answers:i,answer:r}=e;return[...i,{...t,answer_list:t.answer_list.filter(e=>r.find(t=>t===e.key))}]},answer:e=>[]}),updateModal:(0,s.f0)({modal:(e,t)=>t.data}),setAlreadyShowModal:(0,s.f0)({alreadyShowModal:e=>!0}),setOnSubmitError:(0,s.f0)({onSubmitError:(e,t)=>t.onError}),setOnSkipError:(0,s.f0)({onSkipError:(e,t)=>t.onError}),handleSubmitError:e=>{let{onSubmitError:t}=e;null==t||t()},handleSkipError:e=>{let{onSkipError:t}=e;null==t||t()},reportChooseCareer:e=>{var t,i,r,n,o,a,s,l,c,d;let{userInfo:u,question:p,answers:_,answer:g,chooseProfessionConfirmReporter:h,reporterParams:m}=e,v=(null==u?void 0:u.uid)?parseInt(u.uid.slice(-2)):null;null==h||h.report({current_page:null!==(s=null==m?void 0:m.currentPage)&&void 0!==s?s:"",role:null!==(l=null===(r=_.find(e=>"role"===e.question_type))||void 0===r?void 0:null===(i=r.answer_list)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.text_starling)&&void 0!==l?l:"",target:null!==(c=null===(a=_.find(e=>"target"===e.question_type))||void 0===a?void 0:null===(o=a.answer_list)||void 0===o?void 0:null===(n=o.map(e=>e.text_starling))||void 0===n?void 0:n.join(","))&&void 0!==c?c:"",preference:null!==(d=p.answer_list.filter(e=>g.find(t=>t===e.key)).map(e=>e.text_starling).join(","))&&void 0!==d?d:"",type:"confirm",is_mapping_test:!v||v>20?"0":"1"})},reportQuestionShow:e=>{var t;let{question:i,chooseProfessionShowReporter:r,reporterParams:n}=e;null==r||r.report({current_page:null!==(t=null==n?void 0:n.currentPage)&&void 0!==t?t:"",popup_type:i.question_type,action:"show"})},reportBack:e=>{var t;let{question:i,chooseProfessionShowReporter:r,reporterParams:n}=e;null==r||r.report({current_page:null!==(t=null==n?void 0:n.currentPage)&&void 0!==t?t:"",popup_type:i.question_type,action:"back"})},reportNext:e=>{var t;let{question:i,chooseProfessionShowReporter:r,reporterParams:n}=e;null==r||r.report({current_page:null!==(t=null==n?void 0:n.currentPage)&&void 0!==t?t:"",popup_type:i.question_type,action:"next"})},reportSubmit:e=>{var t;let{question:i,chooseProfessionShowReporter:r,reporterParams:n}=e;null==r||r.report({current_page:null!==(t=null==n?void 0:n.currentPage)&&void 0!==t?t:"",popup_type:i.question_type,action:"submit"})},reportCheck:(e,t)=>{var i;let{question:r,chooseProfessionShowReporter:n,reporterParams:o}=e;null==n||n.report({current_page:null!==(i=null==o?void 0:o.currentPage)&&void 0!==i?i:"",popup_type:r.question_type,action:t.text})},reportSkip:e=>{var t,i,r,n,o,a,s,l,c,d;let{question:u,answers:p,chooseProfessionShowReporter:_,chooseProfessionConfirmReporter:g,reporterParams:h}=e;null==_||_.report({current_page:null!==(s=null==h?void 0:h.currentPage)&&void 0!==s?s:"",popup_type:u.question_type,action:"skip"}),null==g||g.report({current_page:null!==(l=null==h?void 0:h.currentPage)&&void 0!==l?l:"",role:null!==(c=null===(r=p.find(e=>"role"===e.question_type))||void 0===r?void 0:null===(i=r.answer_list)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.text_starling)&&void 0!==c?c:"skip",target:null!==(d=null===(a=p.find(e=>"target"===e.question_type))||void 0===a?void 0:null===(o=a.answer_list)||void 0===o?void 0:null===(n=o.map(e=>e.text_starling))||void 0===n?void 0:n.join(","))&&void 0!==d?d:"skip",preference:"skip",type:"skip"})}},guards:{isNotShowModal:e=>{let{alreadyShowModal:t}=e;return!t}}});var tn=i("772356");let to={},ta=(0,a.C)({id:"userWorkspace",initial:"unknown",context:{asyncFuncExecsRef:void 0,userInfo:void 0,getWorkspaceListSuccess:!1,workspaceList:[],currentWorkspaceInfo:void 0,workspaceExpandInfoMap:{},changeWorkspaceEventCache:"",updateWorkspaceEventCache:[],useCommerceApiPC:!1,pcContainerType:"common",initWorkspaceCb:()=>{},changeWorkspaceCb:()=>{},initUserAndWorkspaceCb:()=>{},storageChangeWorkspaceCb:()=>{},refreshWorkspaceListCb:()=>{},beforeChangeWorkspaceCb:()=>Promise.resolve(),updateWorkspaceErrorCb:()=>{}},entry:["initAsyncFuncExecRef","notifyInitUserAndWorkspaceCb"],states:{unknown:{always:[{target:"gettingWorkspaceInfo"}]},gettingWorkspaceInfo:{id:"gettingWorkspaceInfo",invoke:{id:"fetchWorkspaceList",src:(0,o.C)("fetchWorkspaceList",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:[{target:"hasWorkspaceInfo",actions:["updateWorkspaceList","initCurrentWorkspace","fetchWorkspaceListSuccess","notifyInitCurrentWorkspace","updateGetWorkspaceListSuccess","notifyInitUserAndWorkspaceCb","notifyRefreshWorkspace","consumeUpdateWorkspaceEventCache","notifyWorkspaceDataChange"],cond:"hasNotInitWorkspaceInfo"},{target:"hasWorkspaceInfo",actions:["updateWorkspaceList","updateCurrentWorkspace","fetchWorkspaceListSuccess","notifyRefreshWorkspace","consumeUpdateWorkspaceEventCache","notifyWorkspaceDataChange"],cond:"hasInitWorkspaceInfo"}],onError:{actions:["fetchWorkspaceListFail"],target:"noWorkspaceInfo"}}},hasWorkspaceInfo:{tags:["finished"]},noWorkspaceInfo:{tags:["finished"]}},on:{CHANGE_CONTEXT:{actions:["changeContext"]},REFRESH_WORKSPACE_LIST:{target:"#gettingWorkspaceInfo"},CHANGE_WORKSPACE:{actions:["checkChangeWorkspace"]},CHANGE_WORKSPACE_AFTER_CHECKING:{actions:["changeWorkspace","notifyChangeWorkspace","notifyWorkspaceDataChange"]},CHANGE_WORKSPACE_ERROR:{actions:["changeWorkspaceError"]},STORAGE_CHANGE_WORKSPACE:{actions:["storageChangeWorkspace"]},UPDATE_WORKSPACE:{actions:["fetchSpecificWorkspaceInfo"]},FETCH_SPECIFIC_WORKSPACE_DONE:{actions:["updateSpecificWorkspaceInfo","notifyWorkspaceDataChange","notifyRefreshWorkspace"]},FETCH_SPECIFIC_WORKSPACE_ERROR:{actions:["updateSpecificWorkspaceInfoError"]},NOTIFY_WORKSPACE_CHANGE:[{target:"#gettingWorkspaceInfo",cond:"notifyLeaveWorkspace"},{actions:["roleChange","notifyWorkspaceDataChange","notifyRefreshWorkspace"],cond:"notifyRoleChange"},{target:"#gettingWorkspaceInfo",cond:"notifyNewMember"}]}},{services:{async fetchWorkspaceList(e,t){let i=[],r=function(){try{let e="undefined"!=typeof __userWorkspaces?JSON.parse(__userWorkspaces):void 0;if(e&&"0"===e.ret)return e.data;return}catch(e){return}}(),n=async e=>{let{data:t}=await J.E.getUserWorkSpace({cursor:e,count:100,need_convert_workspace:!0});if(i=[...i,...t.workspace_infos],!!t.has_more)await n(t.next_cursor)};return("REFRESH_WORKSPACE_LIST"!==t.type&&r&&(0,I.isArray)(null==r?void 0:r.workspace_infos)?(i=[...r.workspace_infos],(null==r?void 0:r.has_more)&&await n(null==r?void 0:r.next_cursor)):await n("0"),"REFRESH_WORKSPACE_LIST"===t.type&&t.callback)?{workspaceList:null==i?void 0:i.map(e=>({...e,dcName:(0,e_.y)(e.region)})),callback:t.callback}:{workspaceList:null==i?void 0:i.map(e=>({...e,dcName:(0,e_.y)(e.region)}))}}},actions:{changeContext:(0,s.f0)((e,t)=>({...e,...t.context})),initAsyncFuncExecRef:(0,s.f0)({asyncFuncExecsRef:()=>(0,c.Cs)(eC.E)}),updateWorkspaceList:(0,s.f0)({workspaceList:(e,t)=>t.data.workspaceList}),checkChangeWorkspace:(0,s.lW)((e,t)=>{let{data:i}=t;return{type:"ADD_TASK",exec:async()=>(await e.beforeChangeWorkspaceCb(),i),successType:"CHANGE_WORKSPACE_AFTER_CHECKING",failType:"CHANGE_WORKSPACE_ERROR"}},{to:e=>e.asyncFuncExecsRef}),initCurrentWorkspace:(0,s.f0)(e=>{var t,i;let r;return{currentWorkspaceInfo:r=e.changeWorkspaceEventCache?null==e?void 0:null===(t=e.workspaceList)||void 0===t?void 0:t.find(t=>t.workspace_id===e.changeWorkspaceEventCache):null==e?void 0:null===(i=e.workspaceList)||void 0===i?void 0:i.find(t=>{var i,r,n,o;return t.workspace_id===((null===(r=e.userInfo)||void 0===r?void 0:null===(i=r.defaultSpaceInfo)||void 0===i?void 0:i.workspaceId)||(null===(o=e.userInfo)||void 0===o?void 0:null===(n=o.spaceInfo)||void 0===n?void 0:n.workspaceId))}),changeWorkspaceEventCache:""}}),fetchWorkspaceListSuccess:(e,t)=>{var i,r;null===(r=t.data)||void 0===r||null===(i=r.callback)||void 0===i||i.call(r)},notifyInitCurrentWorkspace:e=>{e.currentWorkspaceInfo&&e.initWorkspaceCb(e.currentWorkspaceInfo)},updateGetWorkspaceListSuccess:(0,s.f0)({getWorkspaceListSuccess:()=>!0}),notifyInitUserAndWorkspaceCb:e=>{if(e.getWorkspaceListSuccess){var t;null==e||null===(t=e.initUserAndWorkspaceCb)||void 0===t||t.call(e,{userInfo:e.userInfo,workspaceList:e.workspaceList})}},notifyRefreshWorkspace:e=>{if(null==e?void 0:e.workspaceList){var t;null==e||null===(t=e.refreshWorkspaceListCb)||void 0===t||t.call(e,e.workspaceList,e)}},notifyWorkspaceDataChange:(0,s.lj)(e=>({type:"UPDATE_WORKSPACE_DATA_FROM_CHILD",workspaceList:e.workspaceList,currentWorkspaceInfo:e.currentWorkspaceInfo,workspaceExpandInfoMap:e.workspaceExpandInfoMap})),consumeUpdateWorkspaceEventCache:l.Le(e=>{let t=[];return Array.isArray(e.updateWorkspaceEventCache)&&(t=e.updateWorkspaceEventCache.map(e=>(0,s.lW)({type:"UPDATE_WORKSPACE",workspaceId:e}))).push((0,s.f0)({updateWorkspaceEventCache:[]})),t}),updateCurrentWorkspace:(0,s.f0)(e=>{var t,i;let r=null===(t=e.currentWorkspaceInfo)||void 0===t?void 0:t.workspace_id;return{currentWorkspaceInfo:null==e?void 0:null===(i=e.workspaceList)||void 0===i?void 0:i.find(e=>e.workspace_id===r)}}),changeWorkspace:(0,s.f0)((e,t)=>{var i,r,n;let{data:o,extInfo:a}=t;return(null===(i=e.currentWorkspaceInfo)||void 0===i?void 0:i.workspace_id)===o.workspace_id?{}:{currentWorkspaceInfo:null==e?void 0:null===(r=e.workspaceList)||void 0===r?void 0:r.find(e=>e.workspace_id===o.workspace_id),workspace_enter_from:null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.workspace_enter_from}}),notifyChangeWorkspace:e=>{if(e.currentWorkspaceInfo){var t;null===(t=e.changeWorkspaceCb)||void 0===t||t.call(e,e.currentWorkspaceInfo,{userInfo:e.userInfo})}},changeWorkspaceError(){},storageChangeWorkspace(e,t){let{data:i}=t;e.storageChangeWorkspaceCb(i.workspace_id)},fetchSpecificWorkspaceInfo:(0,s.lW)((e,t)=>{let{workspaceId:i}=t;return{type:"ADD_TASK",exec:async()=>{let t=[J.E.mGetWorkspaceInfo({workspace_ids:[i]}),void 0];!tn.Q&&(e.useCommerceApiPC?"common"===e.pcContainerType?t[1]=q.getSpaceList(i):"graphic"===e.pcContainerType&&(t[1]=W.getSpaceList(i)):t[1]=C.k.getSpaceList(i));let[{data:r},n]=await Promise.all(t);n&&(to={...to,[i]:n});let o=r.workspace_infos[0];return{workspace_id:i,workspace_info:{...o,dcName:(0,e_.y)(o.region)},workspaceExpandInfoMap:{...to}}},successType:"FETCH_SPECIFIC_WORKSPACE_DONE",failType:"FETCH_SPECIFIC_WORKSPACE_ERROR"}},{to:e=>e.asyncFuncExecsRef}),updateSpecificWorkspaceInfo:(0,s.f0)({workspaceList:(e,t)=>{var i;let{data:r}=t,{workspace_info:n}=r;if(!n)return e.workspaceList;return null==e?void 0:null===(i=e.workspaceList)||void 0===i?void 0:i.map(e=>e.workspace_id===n.workspace_id?n:e)},currentWorkspaceInfo:(e,t)=>{let{data:i}=t,{workspace_info:r}=i;if(r){var n;if(r.workspace_id===(null===(n=e.currentWorkspaceInfo)||void 0===n?void 0:n.workspace_id))return r}return e.currentWorkspaceInfo},workspaceExpandInfoMap:(e,t)=>{var i;let{data:r}=t;return null!==(i=r.workspaceExpandInfoMap)&&void 0!==i?i:e.workspaceExpandInfoMap}}),updateSpecificWorkspaceInfoError:(e,t)=>{let{data:i}=t;e.updateWorkspaceErrorCb&&e.updateWorkspaceErrorCb(i.workspace_id)},roleChange:(0,s.f0)({workspaceList:(e,t)=>{var i,r;let{notifyData:n}=t,{workspace_id:o,new_role:a,uid:s}=n;return String(s)!==(null===(i=e.userInfo)||void 0===i?void 0:i.uid)?e.workspaceList:null===(r=e.workspaceList)||void 0===r?void 0:r.map(e=>e.workspace_id===o?{...e,role:a}:e)},currentWorkspaceInfo:(e,t)=>{var i,r;let{notifyData:n}=t,{workspace_id:o,new_role:a,uid:s}=n;return String(s)!==(null===(i=e.userInfo)||void 0===i?void 0:i.uid)?e.currentWorkspaceInfo:(null===(r=e.currentWorkspaceInfo)||void 0===r?void 0:r.workspace_id)===o?{...e.currentWorkspaceInfo,role:a}:e.currentWorkspaceInfo}})},guards:{hasInitWorkspaceInfo:e=>!!(e.currentWorkspaceInfo&&e.currentWorkspaceInfo.workspace_id),hasNotInitWorkspaceInfo:e=>!(e.currentWorkspaceInfo&&e.currentWorkspaceInfo.workspace_id),notifyLeaveWorkspace:(e,t)=>{let{notifyData:i}=t;return i.method===e5.ZV.leaveWorkspace},notifyRoleChange:(e,t)=>{let{notifyData:i}=t;return i.method===e5.ZV.roleChange},notifyNewMember:(e,t)=>{let{notifyData:i}=t;return i.method===e5.ZV.newMember}}}),ts=()=>(0,eg.hN)()?"__lvweb_lookie_user_status":"__lvweb_user_status",tl=(0,a.C)({id:"userStatusListener",initial:"listened",context:{uid:"",enableShowModal:!0,enableBlockRequestWhenDestroy:!0,enableClearBeforeUnload:!0},states:{listened:{entry:"setLocalStorageByDefault",invoke:[{id:"listenUserStatusByLocalStorage",src:(0,o.C)("listenUserStatusByLocalStorage",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},{id:"listenUserStatusWhenBlur",src:(0,o.C)("listenUserStatusWhenBlur",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}],on:{USER_HAS_LOGOUT:{target:"destroy",actions:["showModal","sendParentEvent"]},SIGN_OUT:{target:"destroy",actions:"notifySignOutByLocalStorage"}}},destroy:{entry:"tryToClearAllEffect"}}},{services:{listenUserStatusByLocalStorage:e=>t=>{let i=ts(),r=r=>{if(r.key===i){let r=ef.m.getJson(i);(null==r?void 0:r.uid)!==e.uid&&t({type:"USER_HAS_LOGOUT"})}};return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}},listenUserStatusWhenBlur:e=>t=>{let i=()=>{if("visible"!==document.visibilityState){let i=ef.m.getJson(ts());i&&i.uid!==e.uid&&t({type:"USER_HAS_LOGOUT"})}};return document.addEventListener("visibilitychange",i),()=>{document.removeEventListener("visibilitychange",i)}}},actions:{setLocalStorageByDefault:e=>{ef.m.setJson(ts(),{uid:e.uid,timestamp:Date.now()})},notifySignOutByLocalStorage:()=>{ef.m.setJson(ts(),{uid:"",timestamp:Date.now()})},showModal:e=>{e.enableShowModal&&eE.Z.error({alignCenter:!1,escToExit:!1,backspaceToExit:!1,maskClosable:!1,closeIcon:null,title:g.ZP.t("web_account_logout_title_error",{},"Account was changed"),content:g.ZP.t("web_account_logout_error",{},"Current login account has encountered an error, please refresh the page and try again."),okText:g.ZP.t("web_graphic_server_failure_refresh_page_btn",{},"Refresh"),onOk:()=>{window.location.reload()}})},sendParentEvent:(0,s.lj)({type:"USER_HAS_LOGOUT"}),tryToClearAllEffect:e=>{"undefined"!=typeof window&&e.enableBlockRequestWhenDestroy&&(window.XMLHttpRequest.prototype.open=(e,t)=>{console.warn(`current page failure, stop all request:${e}:${t}`)}),"undefined"!=typeof window&&e.enableClearBeforeUnload&&(window.onbeforeunload=()=>null)}}});var tc=i("772322");i("225572");var td=i("97257"),tu=i("218571"),tp=i("41723"),t_=i.n(tp);class tg{report(){this.reporter.report("banned_popup",{action:"show"})}constructor(){this.reporter=(0,ea.y)()}}var th=i("856135");let tm={baseURL:"/lv/v1/user",method:"POST",headers:{loc:h.yM.CHANNEL,lan:g.ZP.language||h.yM.LAN,pf:h.yM.APP_PF,appvr:h.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":h.yM.APP_SDK_VERSION},params:{}},tv=d.ZP.createAxios(tm);tv.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=tm.headers;return Object.assign(e.headers,(0,f.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),tv.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}});let tf={getBanStatus:async()=>await tv({url:"/get_ban_status",data:{}})};var ty=i("560439"),tw=i("406617"),tb=i("570126");let tS=e=>{let{title:t,content:i,okText:r,onConfirm:n}=e;return(0,tc.jsxs)("div",{className:"age-gate-mobile-dialog",children:[(0,tc.jsx)("div",{className:"mask"}),(0,tc.jsx)("div",{className:"modal-wrapper",children:(0,tc.jsxs)("div",{className:"modal-content-wrapper",children:[(0,tc.jsx)("div",{className:"modal-title",children:t}),(0,tc.jsx)("div",{className:"modal-content",children:i}),(0,tc.jsx)(td.Z,{type:"primary",className:"modal-confirm",onClick:n,children:r})]})})]})},tC={open:function(e){let t=document.createElement("div");document.body.appendChild(t);let i=(0,tb.createRoot)(t),r=()=>{t&&(i.unmount(),t=null)};return i.render((0,tc.jsx)(tS,{...e,onConfirm:()=>{var t;null===(t=e.onConfirm)||void 0===t||t.call(e),r()}})),{close:r}}};class tk{isQuebec(){try{var e;let t=window.ip_location_info;return!!(null==t?void 0:null===(e=t.Subdivisions)||void 0===e?void 0:e.find(e=>e.GeoNameID===ee.sk))}catch(e){return!1}}checkShowNoticePath(){try{let{pathname:e}=window.location;return!this.disablePaths.some(t=>t.test(e))}catch(e){return!1}}start(e){if(!!this.checkShowNoticePath()){if(null==e?void 0:e.verifyTicket){if(this.verfiy_ticket=null==e?void 0:e.verifyTicket,(null==e?void 0:e.errorCode)===1091&&this.shouldShowForbiddenPopup()){this.renderForbiddenNotice();return}}else if(this.isUnder14()&&this.shouldShowNoticePopup()){this.renderCountdownNotice();return}}}isUS(){try{let e=window.__locationCountryCode;return"US"===e}catch(e){return!1}}getUserInfo(){try{var e,t;let i=JSON.parse(null!==(t=window.__userInfoStringify)&&void 0!==t?t:"");return this.uid=null===(e=i.data.user_info)||void 0===e?void 0:e.user_id,i.data.user_info}catch(e){return null}}destroy(){this.unbinds.forEach(e=>e())}isUnder14(){try{let e=this.getUserInfo();if(!e)return!1;if(!e.has_birthday&&this.isQuebec()){let e=window.location.href,t=eR.l.FILL_BIRTHDAY.PATH,i=`${t}?redirect_url=${encodeURIComponent(e)}`;window.location.href=(0,o.C)(i,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1});return}return(2===e.ban_status||1===e.ban_status)&&e.ban_time}catch(e){return!1}}getFinalTimestamp(){var e;return 1e3*Number(null===(e=this.getUserInfo())||void 0===e?void 0:e.ban_time)}getRecord(){let e={thirty:0,seven:0,three:0,two:0,one:0,zero:0};try{let t=this.getUniqId();if(t&&"undefined"!=typeof window){let i=ef.m.getString(`${this.LOCAL_STORE_PREFIX_KEY}_${t}`);return i?JSON.parse(i):e}return e}catch(t){return e}}saveRecord(e){let t=this.getUniqId();t&&"undefined"!=typeof window&&ef.m&&ef.m.setString(`${this.LOCAL_STORE_PREFIX_KEY}_${t}`,JSON.stringify(e))}getUniqId(){let e=window.GATEWAY_INJECTED_WEB_ID||"";if(!e){let t=document.cookie.match(RegExp("(^| )_tea_web_id=([^;]+)"));null!==t&&(e=t[2])}return e}getDaysLeft(){let e=this.getFinalTimestamp()-Date.now();if(e<=0)return"zero";let t=Math.ceil(e/864e5);return t>30?"none":t<=30&&t>7?"thirty":t>3?"seven":t>2?"three":t>1?"two":t>0?"one":"zero"}refreshRecord(){let e=this.getRecord();e[this.getDaysLeft()]=1,this.saveRecord(e)}shouldShowNoticePopup(){let e=this.getDaysLeft(),t=this.getRecord();return"zero"!==e&&(null==t?void 0:t[e])===0}shouldShowForbiddenPopup(){return"zero"===this.getDaysLeft()}async waitForI18nInit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;if(e!==t&&!g.ZP.i18nInstance.instance.isInitialized)await new Promise(t=>{setTimeout(async()=>{await this.waitForI18nInit(++e),t()},1e3)})}async renderCountdownNotice(){await this.waitForI18nInit();let e=this.getFinalTimestamp();if(!e)return;let{env:t}=(0,tw.S7)(),i=t_()(e).format("MM/DD/YYYY"),r=t_()(e+97632e5).format("MM/DD/YYYY"),n=g.ZP.t("web_quebec_users_tiitle_your_account_will_be_removed",{date:i},"Your account will be removed on {date} because you'll no longer meet the age requirements to use CapCut in your region."),o=g.ZP.t("web_quebec_users_text_you_can_submit_appeal_beface",{"text-href":this.submitAppealTag,date:r},"You can <text-href>submit an appeal</text-href> before {date}."),a=g.ZP.t("web_quebec_users_text_your_account_will_be_removed",{date:i},"Your account will be removed on {date}"),s=(0,tc.jsxs)("div",{className:"quebec-content",children:[n,o]}),l=g.ZP.t("web_quebec_users_button_get_it_one",{},"Got it"),c="pc"===t?eE.Z.warning({title:a,content:s,maskClosable:!1,escToExit:!1,backspaceToExit:!1,okText:l,onConfirm:()=>this.refreshRecord(),style:{width:500}}):tC.open({title:a,content:s,okText:l,onConfirm:()=>this.refreshRecord()});this.unbinds.push(()=>{c.close()})}goAppealPage(){this.refreshRecord(),window.open((0,o.C)((0,ty.G3)("/appeal-age-restriction",{uid:this.uid,verify_ticket:this.verfiy_ticket,scene_block_scene:this.isUS()?"us13_young_block":""}),null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"_self")}async renderForbiddenNotice(){await this.waitForI18nInit(),this.ageGateChecker.setIsAgeBanned(!0);let{env:e}=(0,tw.S7)(),t=g.ZP.t("web_quebec_users_text_your_account_removed_becaue_you",{},"Your account has been removed because you no longer meet the age requirement to use CapCut in your region."),i=g.ZP.t("web_quebec_users_button_appel_age_restriction",{"text-href":this.submitAppealTag},"<text-href>Appel age restriction</text-href>"),r=g.ZP.t("web_quebec_users_button_appel_age_restriction",{},"Appel age restriction"),n=t+i,o=g.ZP.t("web_quebec_users_tiitle_cannot_access_account",{},"Can't access account"),a=(0,tc.jsx)("div",{className:"quebec-content",children:t}),s=g.ZP.t("web_quebec_users_button_get_it_one",{},"Got it"),l="pc"===e?eE.Z.error({title:o,content:a,maskClosable:!1,closable:!1,escToExit:!1,backspaceToExit:!1,okText:r,onConfirm:()=>this.goAppealPage()}):tC.open({title:o,content:n,okText:s,onConfirm:()=>this.refreshRecord()});this.unbinds.push(()=>{l.close()})}constructor(e){this.LOCAL_STORE_PREFIX_KEY="quebec_age_gate_notification",this.unbinds=[],this.disablePaths=[/^(?:\/((?:[^\/#\?]+?)(?:\/(?:[^\/#\?]+?))*))?\/birthday-information[\/#\?]?$/i],this.uid="",this.verfiy_ticket="",this.submitAppealTag=e=>(0,tc.jsx)("a",{type:"text",href:`/appeal-age-restriction?uid=${this.uid}&verify_ticket=${this.verfiy_ticket}`,target:"_self",children:e}),this.ageGateChecker=e.ageGateChecker}}let tE=async()=>(await (0,ea.y)().getToken()).web_id;class tI{getLocalStorageKey(){var e;return e=this._webId,`lv-web-age-gate-device-ban-webid-${e}`}async start(){this._webId=await tE()}isBeingBanned(){let e=ef.m.getJson(this.getLocalStorageKey());return!!e&&e.banTime+e.duration>new Date().getTime()}ban(){ef.m.setJson(this.getLocalStorageKey(),{banTime:new Date().getTime(),duration:864e5})}constructor(){this._webId=""}}var tT=i("669698");class tP{start(e){var t;if(this.userInfo=e.userInfo,!!(null===(t=this.userInfo)||void 0===t?void 0:t.ageGateBirthday)&&!this.ageGateChecker.isAgeBanned){if(!this.ageGateChecker.checkBirthday(this.userInfo.region,this.userInfo.ageGateBirthday)){let e=!1,t=()=>{if(!e)e=!0,this.ageGateChecker.openAppealModal({content:g.ZP.t("dre_account_desc_capcut_account_will_be_removed",{},"Your account will be removed because you\u2019ll no longer meet the age requirement to use CapCut in your region."),onLogout:()=>{tT.O.logout()},maskStyle:{zIndex:2e3,backdropFilter:"blur(10px)"},wrapStyle:{zIndex:2e3}})};g.ZP.i18nInstance.instance.store&&Object.values(g.ZP.i18nInstance.instance.store).some(e=>!(0,I.isEmpty)(null==e?void 0:e.translation))?t():g.ZP.i18nInstance.instance.on("loaded",()=>{t()})}}}constructor(e){this.ageGateChecker=e.ageGateChecker}}let tA=()=>(0,tc.jsxs)("svg",{style:{marginRight:4.2},className:"loading-icon",xmlns:"http://www.w3.org/2000/svg",width:"75",height:"16",viewBox:"0 0 75 16",fill:"none",children:[(0,tc.jsx)("path",{d:"M28.2142 12.5654C24.8954 12.5654 22.5781 10.4583 22.5781 7.4404C22.5781 4.42246 24.8954 2.31543 28.2142 2.31543C29.0512 2.31543 30.035 2.41016 31.5424 3.0962V5.24279C30.4514 4.63483 29.3729 4.32669 28.3371 4.32669C26.2581 4.32669 24.8059 5.60715 24.8059 7.43936C24.8059 9.27156 26.2581 10.5531 28.3371 10.5531C29.3448 10.5531 30.4524 10.2387 31.5424 9.64425V11.7836C30.0339 12.4696 29.0512 12.5643 28.2142 12.5643V12.5654Z",fill:"currentColor","fill-opacity":"0.4"}),(0,tc.jsx)("path",{d:"M35.9866 12.5658C34.0253 12.5658 32.6553 11.0761 32.6553 8.94307C32.6553 6.81001 34.0846 5.30469 36.0532 5.30469C37.1411 5.30469 37.8979 5.63677 38.5058 6.38319L38.5548 6.44253V5.65864H40.4734V12.4107H38.5548V11.4519L38.5048 11.5238C38.0113 12.2348 37.2108 12.5658 35.9866 12.5658ZM36.6497 6.91411C35.5004 6.91411 34.6665 7.76775 34.6665 8.94307C34.6665 10.1184 35.5004 10.9564 36.6497 10.9564C37.799 10.9564 38.6485 10.109 38.6485 8.94307C38.6485 7.77712 37.8083 6.91411 36.6497 6.91411Z",fill:"currentColor","fill-opacity":"0.4"}),(0,tc.jsx)("path",{d:"M41.9287 15.3517V5.65766H43.8629V6.50089L43.9129 6.43114C44.2846 5.91063 45.1632 5.30371 46.4187 5.30371C48.3477 5.30371 49.7468 6.83402 49.7468 8.94209C49.7468 11.0502 48.3716 12.5649 46.403 12.5649C45.2288 12.5649 44.3907 12.2265 43.9129 11.5582L43.8629 11.4884V15.3517H41.9287ZM45.7524 6.91314C44.6031 6.91314 43.7703 7.76678 43.7703 8.94209C43.7703 10.1174 44.6041 10.9554 45.7524 10.9554C46.9006 10.9554 47.7199 10.108 47.7199 8.94209C47.7199 7.77615 46.8923 6.91314 45.7524 6.91314Z",fill:"currentColor","fill-opacity":"0.4"}),(0,tc.jsx)("path",{d:"M56.5658 12.5654C53.247 12.5654 50.9297 10.4583 50.9297 7.4404C50.9297 4.42246 53.247 2.31543 56.5658 2.31543C57.4028 2.31543 58.3866 2.41016 59.894 3.0962V5.24279C58.803 4.63483 57.7245 4.32669 56.6897 4.32669C54.6108 4.32669 53.1585 5.60715 53.1585 7.43936C53.1585 9.27156 54.6108 10.5531 56.6897 10.5531C57.6974 10.5531 58.805 10.2387 59.894 9.64425V11.7836C58.3855 12.4696 57.4028 12.5643 56.5658 12.5643V12.5654Z",fill:"currentColor","fill-opacity":"0.4"}),(0,tc.jsx)("path",{d:"M64.6257 12.566C62.4625 12.566 61.0654 11.5448 61.0654 9.96552V5.45996H62.984V9.40753C62.984 10.3778 63.5982 10.9566 64.6257 10.9566C65.6532 10.9566 66.2372 10.3778 66.2372 9.40753V5.45996H68.1559V9.96552C68.1559 11.5458 66.7702 12.566 64.6257 12.566Z",fill:"currentColor","fill-opacity":"0.4"}),(0,tc.jsx)("path",{d:"M72.3912 12.565C70.2665 12.565 69.5117 11.2471 69.5117 10.1186V4.08691H71.4303V5.45794H74.0787V7.02781H71.4303V9.73135C71.4303 10.0947 71.5688 10.94 72.8555 10.94C73.2126 10.94 73.656 10.8452 74.0777 10.6808V12.2985C73.4062 12.5442 72.6181 12.564 72.3902 12.564L72.3912 12.565Z",fill:"currentColor","fill-opacity":"0.4"}),(0,tc.jsx)("path",{d:"M18.2841 3.38605V0.634624L14.9747 2.3721V2.26903C14.9747 1.17283 14.1887 0.510742 13.0509 0.510742H2.56151C1.36225 0.510742 0.637695 1.17283 0.637695 2.26903V5.04128L5.2713 7.44085L0.637695 9.86123V12.6335C0.637695 13.7089 1.36225 14.371 2.56151 14.371H13.0498C14.1877 14.371 14.9737 13.7089 14.9737 12.6335V12.4888L18.2831 14.2471V11.454L10.5878 7.44085L18.2831 3.38605H18.2841ZM7.91967 8.80667L13.6089 11.7861H2.20964L7.91967 8.80667ZM13.5672 3.09665L7.91967 6.05524L2.20964 3.09665H13.5672Z",fill:"currentColor","fill-opacity":"0.4"})]});var tR=i("207118");let tx=e=>{let{onValueChange:t,onSubmit:i,value:r,okText:n,disabled:o,theme:a,loading:s,customAgeValidateRule:l,submitError:c,setIsBirthdayValid:d,isBirthdayValid:u}=e;return(0,tc.jsxs)("div",{className:"age-gate-birthday-detail",children:[(0,tc.jsx)("div",{className:"age-gate-birthday-icon",children:(0,tc.jsx)("svg",{className:"icon",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,tc.jsx)("g",{id:"ic:baseline-mark-email-read",children:(0,tc.jsx)("path",{id:"Union","fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.0135 5.56722C13.6411 5.93964 13.136 6.14886 12.6093 6.14886C11.5171 6.14886 10.6235 5.25524 10.6235 4.16304C10.6235 3.78573 10.7228 3.43822 10.9115 3.14034L12.6093 0.191406L14.3072 3.14034C14.4959 3.43822 14.5952 3.78573 14.5952 4.16304C14.5952 4.68971 14.3859 5.19481 14.0135 5.56722ZM3.26465 11.4637C3.26465 9.63062 4.75068 8.14459 6.5838 8.14459H18.5455C20.3786 8.14459 21.8646 9.63062 21.8646 11.4637V12.4557C21.7927 12.4658 21.7111 12.4769 21.6208 12.4886C21.2412 12.5377 20.7121 12.5966 20.1149 12.6358C18.8927 12.7161 17.4902 12.7059 16.4905 12.4228C15.5491 12.1563 15.1419 11.7943 14.7549 11.4504L14.7256 11.4243L14.7142 11.4142C14.5106 11.2334 14.2409 10.9938 13.8904 10.8243C13.5084 10.6396 13.0824 10.5587 12.5685 10.5836C11.5608 10.6325 10.915 11.1204 10.4225 11.534C10.3602 11.5864 10.3008 11.6369 10.2436 11.6854L10.2436 11.6855C9.83255 12.0347 9.53717 12.2856 9.09466 12.4345C8.0603 12.7824 6.57867 12.797 5.27072 12.6971C4.6334 12.6485 4.0671 12.5754 3.66039 12.5144C3.50191 12.4906 3.36822 12.4688 3.26465 12.4511V11.4637ZM21.8336 14.1344L21.8646 14.1304V21.0446C21.8646 21.2103 21.7303 21.3446 21.5646 21.3446H3.56465C3.39896 21.3446 3.26465 21.2103 3.26465 21.0446V14.1326C3.312 14.1401 3.36193 14.1477 3.41428 14.1556C3.85025 14.221 4.45766 14.2995 5.1444 14.3519C6.48456 14.4542 8.25245 14.4687 9.6237 14.0075C10.3915 13.7492 10.9376 13.2791 11.3352 12.9369L11.3353 12.9368C11.3895 12.8902 11.441 12.8459 11.4898 12.8049C11.9153 12.4475 12.206 12.2627 12.6489 12.2412C12.9304 12.2276 13.073 12.2725 13.1679 12.3184C13.2877 12.3763 13.3997 12.4664 13.6237 12.6653L13.6425 12.682C14.1025 13.0906 14.732 13.6497 16.0383 14.0196C17.328 14.3848 18.9719 14.3741 20.2238 14.2918C20.8636 14.2498 21.4285 14.1868 21.8336 14.1344Z",fill:"currentColor"})})})}),(0,tc.jsxs)("div",{className:"age-gate-birthday-center",children:[(0,tc.jsx)("h2",{className:"age-gate-birthday-title",children:g.ZP.t("yout_birth",{},"When\u2019s your birthday?")}),(0,tc.jsx)("p",{className:"age-gate-birthday-subtitle",children:g.ZP.t("information_personal",{},"This information won't be shown publicly.")}),(0,tc.jsx)(tR.i,{mode:(0,tw.S7)().isMobile?"native":"custom",onChange:t,theme:a,setIsBirthdayValid:d,submitting:s,customAgeValidateRule:l}),(0,tc.jsx)(td.Z,{className:"age-gate-birthday-next",loading:s,disabled:o||""===r||!u||(null==c?void 0:c.error),type:"primary",onClick:()=>i(),children:n||g.ZP.t("web_age_gate_next_btn",{},"Next")}),(null==c?void 0:c.error)&&(null==c?void 0:c.message)&&(0,tc.jsx)("div",{className:"gate_birthday-error_text",children:null==c?void 0:c.message})]}),(0,tc.jsxs)("div",{className:"age-gate-birthday-footer",children:[(0,tc.jsx)(tA,{}),(0,tc.jsx)("span",{children:g.ZP.t("web_feedback_button_account_account",{},"Account")})]})]})},tN=e=>{var t,i;let[r,n]=(0,tu.useState)(""),[o,a]=(0,tu.useState)(!1),[s,l]=(0,tu.useState)({error:!1}),[c,d]=(0,tu.useState)(!1),u=null!==(i=e.region)&&void 0!==i?i:ee.yp.US,p=null===(t=e.ipLocationInfo)||void 0===t?void 0:t.Subdivisions,{ignoreInnerInterception:h,theme:m,customAgeValidateRule:v}=e,f=e=>{var t;if(null==v?void 0:v.submitValidator){let t=null==v?void 0:v.submitValidator(e);return l(t),{pass:!t.error,message:t.message}}let i=h||(0,th.Ig)(u,null!=e?e:r,(null==p?void 0:null===(t=p.map)||void 0===t?void 0:t.call(p,e=>e.GeoNameID))||[]);return l({error:!i}),{pass:i}},y=e=>{let t=c;if(null==v?void 0:v.inputValidator){var i;t=!(null==v?void 0:null===(i=v.inputValidator(e))||void 0===i?void 0:i.error)}if(t&&(null==v?void 0:v.autoSubmit)){d(!0);let{pass:t}=f(e);t&&w(t_()(e).format("YYYY-MM-DD"))}else l({error:!1}),d(!1)},w=async t=>{let i=null!=t?t:r,{pass:n}=f(i);if(n){if(i){a(!0);try{if(await _.B.updateUser({age_gate_birthday:i})){var o;null===(o=e.afterUpdateBirthday)||void 0===o||o.call(e,i)}}catch(e){eE.Z.error({title:g.ZP.t("something_wrong"),okText:g.ZP.t("confirm_ok")})}finally{a(!1)}}}else eE.Z.warning({closable:!1,className:"age-gate-birthday-modal",maskStyle:{zIndex:10003},wrapStyle:{zIndex:10003},title:g.ZP.t("web_age_gate_too_yong_title",{},"Age requirement not met"),content:g.ZP.t("web_age_gate_too_yong_desc",{},"Sorry, we are unable to create your account right now. We appreciate you checking us out!"),okText:g.ZP.t("web_age_gate_too_yong_ok_button",{},"OK")}),a(!1)};return(0,tc.jsx)(tx,{value:r,onValueChange:e=>{n(e),y(e)},okText:g.ZP.t("web_confirm"),onSubmit:w,onCheckBirthday:f,theme:m,loading:o,customAgeValidateRule:v,submitError:s,setIsBirthdayValid:d,isBirthdayValid:c})};async function tL(){try{let{data:e}=await tf.getBanStatus();if(!e)return null;return{ban:e.ban||!1,deleteTime:1e3*(e.delete_time||0),dueTime:1e3*(e.due_time||0)}}catch(e){return null}}var tO=i("353808"),tM=i("280667");let tD=(0,a.C)({id:"newEmailSignIn",initial:"signUp",context:{isBOE:!1,passport:()=>Promise.resolve(null),isNewSignupUser:!1,source:es.C.SignUp,currentWindow:0,email:"",password:"",birthday:"",region:"",code:"",ticket:"",sendCodetype:tO.SEND_CODE_TYPE.REGISTER,resendEmailCodeCountDown:60,sendEmailCodeErrorCb:void 0,sendEmailCodeSuccessCb:void 0,verifyEmailCodeErrorCb:void 0,registerErrorCb:void 0,loginErrorCb:void 0,pageEnterFrom:"",currentPage:""},entry:"start",states:{signUp:{entry:"saveSignUpType",initial:"fillInRegisterInfo",states:{fillInRegisterInfo:{entry:(0,s.f0)({currentWindow:0}),on:{SEND_EMAIL_CODE:{target:"sendingEmailCode",actions:["reportSignUpAction"]},BACK_TO_FILL_REGISTER_INFO:{target:"fillInRegisterInfo"},SAVE_EMAIL:{actions:["saveEmail"]},SAVE_PASSWORD:{actions:"savePassword"}}},sendingEmailCode:{id:"sendingEmailCode",invoke:{id:"fetchSendEmailCode",src:(0,o.C)("fetchSendEmailCode",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["initCountDown","reportRegisterSendEmailCodeSuccess"],target:"enterVerificationCode"},onError:{actions:["notifySendEmailCodeError","reportRegisterSendEmailCodeError"]}},on:{BACK_TO_ENTER_CODE:"enterVerificationCode",BACK_TO_FILL_REGISTER_INFO:"fillInRegisterInfo"}},enterVerificationCode:{entry:(0,s.f0)({currentWindow:2}),initial:"countingDown",states:{countingDown:{invoke:{id:"execCountingDown",src:(0,o.C)("execCountingDown",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},on:{UPDATE_COUNT_DOWN:{actions:"updateCountDown"},COUNT_DOWN_ZERO:{target:"allowResendVerificationCode"}}},allowResendVerificationCode:{on:{RESEND:{target:"#sendingEmailCode"}}}},on:{VERIFY_EMAIL_CODE:{target:"verifyEmailCode",actions:["initVerifyEmailCodeErrorCb","initVerifyEmailCodeSuccessCb","reportConfirmCodeAction"]},SAVE_EMAIL_CODE:{actions:["saveEmailCode"]},ENTER_BIRTHDAY:{target:"enterBirthday"},BACK_TO_LOGIN:{target:"fillInRegisterInfo"}}},verifyEmailCode:{invoke:{id:"verifyEmailCode",src:(0,o.C)("verifyEmailCode",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"enterBirthday",actions:["notifyVerifyEmailCodeSuccess","saveEmailTicket"]},onError:{target:"enterVerificationCode",actions:"notifyVerifyEmailCodeError"}}},enterBirthday:{entry:(0,s.f0)({currentWindow:1}),on:{CONFIRM_BIRTHDAY:{target:"registering",actions:["updateBirthday","reportConfirmBirthDayAction","reportSlardarRegistAction"]},RETURN_SIGN_IN:{target:"backToBasePage"},BACK_TO_ENTER_CODE:{target:"enterVerificationCode",actions:["clearBirthday"]}}},registering:{invoke:{id:"fetchEmailCodeRegister",src:(0,o.C)("fetchEmailCodeRegister",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:[{actions:["notifySignSuccess","storeIsNewSignupUser","reportRegisterSuccess"],target:"#signInPending",cond:"isBusinessPlatform"},{actions:["notifySignSuccess","storeIsNewSignupUser","reportRegisterSuccess"],target:"#signInSuccess"}],onError:{actions:["notifyRegisterError","reportRegisterError",(0,s.lj)((e,t)=>{var i,r;return{type:"SIGN_IN_FAIL",params:{source:es.C.SignUp,type:"email",errorCode:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code,errorMsg:null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description}}})],target:"enterBirthday"}}},backToBasePage:{entry:(0,s.f0)({currentWindow:0})}}},signIn:{entry:"saveSignInType",initial:"fillInSignInInfo",states:{fillInSignInInfo:{entry:(0,s.f0)({currentWindow:0}),on:{CONFIRM_SIGN:{target:"signing",actions:["reportLoginAction","reportSlardarLoginAction"]},SAVE_EMAIL:{actions:"saveEmail"},SAVE_PASSWORD:{actions:"savePassword"},RESTORE_ACCOUNT:{target:"restore"}}},signing:{entry:"saveSignInInfo",invoke:{id:"fetchEmailCodeLogin",src:(0,o.C)("fetchEmailCodeLogin",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["notifySignSuccess","reportLoginSuccess"],target:"#signInSuccess"},onError:{actions:["notifyLogInError","reportLoginError",(0,s.lj)((e,t)=>{var i,r,n;return{type:"SIGN_IN_FAIL",params:{source:es.C.LoginIn,type:"email",errorCode:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code,errorMsg:null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description,verifyTicket:null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.verify_ticket}}})],target:"fillInSignInInfo"}}},restore:{entry:"saveSignInInfo",invoke:{id:"fetchRestoreAccount",src:(0,o.C)("fetchRestoreAccount",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["notifySignSuccess"],target:"#signInSuccess"},onError:{actions:["notifyLogInError"],target:"fillInSignInInfo"}}}}},signInPending:{id:"signInPending",entry:(0,s.lj)(e=>({type:"SIGN_IN_SUCCESS",params:{source:e.source,type:"email",isLoginNewUser:e.isNewSignupUser?1:0},extra:{isNewSignupUser:e.isNewSignupUser}})),on:{BACK_TO_ENTER_CODE:{target:"signUp.enterVerificationCode",actions:["clearBirthday"]},CONFIRM_BIRTHDAY:{actions:(0,s.lj)(()=>({type:"SIGN_IN"}))},CONFIRM_SIGN:{actions:(0,s.lj)(()=>({type:"SIGN_IN"}))}}},signInSuccess:{id:"signInSuccess",type:"final",entry:(0,s.lj)(e=>({type:"SIGN_IN_SUCCESS",params:{source:e.source,type:"email",isLoginNewUser:e.isNewSignupUser?1:0},extra:{isNewSignupUser:e.isNewSignupUser}}))},forgetPwd:{entry:"saveForgetType",initial:"idle",states:{idle:{on:{TO_SEND_RESET_EMAIL_INFO:{target:"fillInResetEmailInfo",actions:["reportFillInResetEmailInfo","initSendEmailInfo"]},TO_RESET_PASSWORD:{actions:"initResetEmailCodeErrorCb",target:"checkResetCode"},SAVE_PWD_CODE:{actions:["initSaveCodeAndEmail"]}}},fillInResetEmailInfo:{id:"fillInResetEmailInfo",on:{SEND_EMAIL:{actions:["reportForgetPasswordSaveEmail"],target:"sendResetEmailCode"},SAVE_EMAIL:{actions:["saveEmail"]},BACK_SIGN_IN:{actions:["reportBack"]},INIT_RESET_EMAIL_ERROR_CB:{actions:["initResetEmailErrorCb"]}}},sendResetEmailCode:{id:"sendResetEmailCode",invoke:{id:"fetchSendResetEmailCode",src:(0,o.C)("fetchSendResetEmailCode",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:["intoResendEmailProcess"],target:"resetTimeCounting"},onError:{target:"fillInResetEmailInfo"}}},resetTimeCounting:{initial:"countingDown",entry:"initCountDown",states:{countingDown:{invoke:{id:"execCountingDown",src:(0,o.C)("execCountingDown",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},on:{SAVE_EMAIL:{actions:["saveEmail","reportForgetPasswordSaveEmail"]},UPDATE_COUNT_DOWN:{actions:"updateCountDown"},COUNT_DOWN_ZERO:{target:"allowResendResetEmail"},BACK_SIGN_IN:{actions:["reportBack"]},TO_SEND_RESET_EMAIL_INFO:{target:"#fillInResetEmailInfo",actions:["reportFillInResetEmailInfo","initSendEmailInfo"]}}},allowResendResetEmail:{on:{SAVE_EMAIL:{actions:["saveEmail","reportForgetPasswordSaveEmail"]},RESEND:{actions:["reportResendEmail"],target:"#sendResetEmailCode"},BACK_SIGN_IN:{actions:["reportBack"]}}}},on:{BACK_SIGN_IN:{actions:["reportBack"]}}},checkResetCode:{invoke:{id:"checkResetCode",src:(0,o.C)("checkResetCode",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"resetPassword",actions:["saveTicket","intoResetPwdProcess"]},onError:{actions:["cleanEmail","notifyCheckResetCodeError"]}}},resetPassword:{on:{CONFIRM_PASSWORD:{target:"sendConfirmReset"},BACK_SIGN_IN:{actions:["cleanEmail","reportBack"]},INIT_RESET_SUCCESS_CB:{actions:["initResestSuccessCb"]}}},sendConfirmReset:{invoke:{id:"execSendConfirmReset",src:(0,o.C)("execSendConfirmReset",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"#signInSuccess",actions:["reportSendConfirmResetPwd","notifyResetSuccessCb"]},onError:{actions:"notifySendConfirmResetError"}}}}}},on:{CHECK_EMAIL_HAS_REGISTER:{actions:"checkEmailHasRegister"},MOBILE_TO_SIGN_IN:{target:"signIn",actions:["reportChangeToLoginPage","reportLoginPageShow"]},MOBILE_TO_SIGN_UP:{target:"signUp",actions:["reportChangeToSignUpPage","reportSignUpPageShow"]},MOBILE_TO_SIGN_IN_EMAIL:{target:"signIn"},MOBILE_TO_SIGN_UP_EMAIL:{target:"signUp"},TO_SIGN_IN:{target:"signIn",actions:["reportLoginPageShow"]},TO_SIGN_UP:{target:"signUp",actions:["reportSignUpPageShow"]},TO_FORGET_PWD:{target:"forgetPwd"},INIT_REGISTER_ERROR_CB:{actions:"initRegisterErrorCb"},INIT_LOGIN_ERROR_CB:{actions:"initLoginErrorCb"},INIT_SEND_CODE_ERROR_CB:{actions:"initSendEmailCodeErrorCb"},INIT_LOGIN_SUCCESS_CB:{actions:"initLoginSuccessCb"},INIT_EMAIL_SEND_PARAMS:{actions:"initEmailSendParams"},REPORT_SIGN_IN_ACTION:{actions:(0,s.lj)((e,t)=>({type:"SIGN_IN_ACTION",params:{source:e.source,action:t.action}}))},CHANGE_CONTEXT:{actions:["changeContext"]}}},{actions:{start:()=>{},saveSignInType:(0,s.f0)({source:e=>es.C.LoginIn}),saveSignUpType:(0,s.f0)({source:e=>es.C.SignUp}),saveForgetType:(0,s.f0)({source:e=>es.C.LoginIn,currentWindow:e=>3}),saveSignInInfo:(0,s.f0)({email:(e,t)=>{var i;return null===(i=t.email)||void 0===i?void 0:i.trim()},password:(e,t)=>t.password}),saveEmail:(0,s.f0)({email:(e,t)=>{var i;return null===(i=t.email)||void 0===i?void 0:i.trim()}}),savePassword:(0,s.f0)({password:(e,t)=>t.password}),saveEmailCode:(0,s.f0)({emailCode:(e,t)=>t.emailCode}),saveEmailTicket:(0,s.f0)({emailTicket:(e,t)=>t.data.email_ticket}),saveStep:(0,s.f0)({step:(e,t)=>t.step}),saveTicket:(0,s.f0)({ticket:(e,t)=>t.data.ticket}),storeIsNewSignupUser:(0,s.f0)({isNewSignupUser:(e,t)=>!0}),initSaveCodeAndEmail:(0,s.f0)({code:(e,t)=>t.code,email:(e,t)=>{var i;return null===(i=t.email)||void 0===i?void 0:i.trim()}}),initRegisterErrorCb:(0,s.f0)({registerErrorCb:(e,t)=>t.func}),initLoginErrorCb:(0,s.f0)({loginErrorCb:(e,t)=>t.func}),initSendEmailCodeErrorCb:(0,s.f0)({sendEmailCodeErrorCb:(e,t)=>t.func}),initVerifyEmailCodeErrorCb:(0,s.f0)({verifyEmailCodeErrorCb:(e,t)=>t.onError}),initVerifyEmailCodeSuccessCb:(0,s.f0)({verifyEmailCodeSuccessCb:(e,t)=>t.onPass}),initLoginSuccessCb:(0,s.f0)({loginSuccessCb:(e,t)=>t.func}),initResetEmailErrorCb:(0,s.f0)({sendResetEmailErrorCb:(e,t)=>t.func}),initResestSuccessCb:(0,s.f0)({sendResetSuccessCb:(e,t)=>t.func}),initResetEmailCodeErrorCb:(0,s.f0)({validateResetEmailCodeCb:(e,t)=>t.func}),initEmailSendParams:(0,s.f0)({pageEnterFrom:(e,t)=>t.pageEnterFrom,currentPage:(e,t)=>t.currentPage}),initSendEmailInfo:(0,s.f0)({step:e=>0}),notifyResetSuccessCb:e=>{var t;null===(t=e.sendResetSuccessCb)||void 0===t||t.call(e)},notifySendResetEmailCodeError:()=>{},notifySendEmailCodeError:(e,t)=>{var i;null===(i=e.sendEmailCodeErrorCb)||void 0===i||i.call(e,{data:Error(t.data.error_code)})},notifyVerifyEmailCodeError:(e,t)=>{var i;null===(i=e.verifyEmailCodeErrorCb)||void 0===i||i.call(e,{data:Error(t.data.error_code)})},notifyVerifyEmailCodeSuccess:(e,t)=>{var i;null===(i=e.verifyEmailCodeSuccessCb)||void 0===i||i.call(e,t)},notifySendEmailCodeSuccess:e=>{var t;null===(t=e.sendEmailCodeSuccessCb)||void 0===t||t.call(e)},initCountDown:(0,s.f0)({resendEmailCodeCountDown:()=>60}),notifyVerificationCodeError:e=>{var t;null===(t=e.verificationCodeErrorCb)||void 0===t||t.call(e)},notifyLogInError:(e,t)=>{var i,r;null==e||null===(r=e.loginErrorCb)||void 0===r||r.call(e,{data:Error(t.data.error_code)},null===(i=t.data)||void 0===i?void 0:i.token)},reportLoginSuccess:()=>{eN.W.event("login-email",{status:"success"})},reportLoginError:(e,t)=>{var i,r,n,o;eN.W.event("login-email",{status:"fail",errorCode:null!==(n=null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code)&&void 0!==n?n:"",errorMsg:null!==(o=null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description)&&void 0!==o?o:""})},reportRegisterSuccess:()=>{eN.W.event("register-email",{status:"success"})},reportRegisterError:(e,t)=>{var i,r,n,o;eN.W.event("register-email",{status:"fail",errorCode:null!==(n=null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code)&&void 0!==n?n:"",errorMsg:null!==(o=null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.description)&&void 0!==o?o:""})},reportRegisterSendEmailCodeError:(e,t)=>{var i,r;eN.W.event("register-send-email-code",{status:"fail",errorCode:null!==(r=null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.error_code)&&void 0!==r?r:""})},reportRegisterSendEmailCodeSuccess:()=>{eN.W.event("register-send-email-code",{status:"success"})},notifyRegisterError:(e,t)=>{var i;null==e||null===(i=e.registerErrorCb)||void 0===i||i.call(e,{data:Error(t.data.error_code)})},notifySignSuccess:e=>{var t;null==e||null===(t=e.loginSuccessCb)||void 0===t||t.call(e)},notifyCheckResetCodeError:e=>{var t;null==e||null===(t=e.validateResetEmailCodeCb)||void 0===t||t.call(e)},updateCountDown:(0,s.f0)({resendEmailCodeCountDown:(e,t)=>t.data}),reportLoginPageShow:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"show"}}),reportSignUpPageShow:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.SignUp,action:"show"}}),reportChangeToLoginPage:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.SignUp,action:"log_in"}}),reportChangeToSignUpPage:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"sign_up"}}),changeContext:(0,s.f0)((e,t)=>({...e,...t.context})),reportLoginAction:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"log_in",actionType:"confirm"}}),reportSlardarLoginAction:()=>{eN.W.event("login-action",{platform:"email"})},reportSlardarRegistAction:()=>{eN.W.event("register-action",{platform:"email"})},reportSignUpAction:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.SignUp,action:"sign_up",actionType:"confirm"}}),reportSignUpConfirmAction:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.SignUp,action:"confirm"}}),reportConfirmCodeAction:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.SignUp,action:"signup_confirm_code"}}),reportConfirmBirthDayAction:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.SignUp,action:"age_gate_continue"}}),reportFillInResetEmailInfo:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"forgot_password"}}),reportSendEmail:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"forgot_password_confirm_email"}}),reportBack:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"back"}}),reportForgetPasswordSaveEmail:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"forgot_password_confirm_email"}}),reportResendEmail:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"resend_email"}}),reportSendConfirmResetPwd:(0,s.lj)({type:"SIGN_IN_ACTION",params:{source:es.C.LoginIn,action:"confirm_password"}}),syncGetParentContext:(0,s.lj)({type:"SYNC_CONTEXT"}),updateBirthday:(0,s.f0)({birthday:(e,t)=>t.value,region:(e,t)=>t.region}),clearBirthday:(0,s.f0)({birthday:()=>""}),cleanEmail:(0,s.f0)({email:()=>""}),intoResendEmailProcess:(0,s.f0)({step:e=>1}),intoResetPwdProcess:(0,s.f0)({step:e=>2}),checkEmailHasRegister:async(e,t)=>{var i;let{passport:r}=e,{email:n,checkEmailHasRegisterCb:o,onError:a}=t;null===(i=await r())||void 0===i||i.checkEmailHasRegister(n).then(e=>{if((null==e?void 0:e.is_registered)===void 0)throw Error("checkEmailHasRegister error");null==o||o(!!(null==e?void 0:e.is_registered))}).catch(()=>{null==a||a()})}},services:{fetchSendEmailCode:async(e,t)=>{var i;let{email:r,password:n,passport:o}=e;return null===(i=await o())||void 0===i?void 0:i.sendEmailCode(r,n,null==t?void 0:t.code)},verifyEmailCode:async(e,t)=>{var i;let{email:r,passport:n}=e;return null===(i=await n())||void 0===i?void 0:i.emailCodeVerify(r,t.emailCode)},fetchEmailCodeRegister:async e=>{var t;let{email:i,password:r,birthday:n,emailCode:o,emailTicket:a,region:s,passport:l,invitedCode:c}=e;return null===(t=await l())||void 0===t?void 0:t.emailRegister(i,r,null!=o?o:"",n,s,{emailTicket:a,invitedCode:c})},fetchEmailCodeLogin:async e=>{var t;let{email:i,password:r,passport:n}=e;return null===(t=await n())||void 0===t?void 0:t.emailLogin(i,r)},fetchRestoreAccount:async(e,t)=>{var i,r;let{passport:n,currentPage:o}=e;try{await (null===(i=await n())||void 0===i?void 0:i.cancelLogin(null==t?void 0:t.token,null==t?void 0:t.restoreType)),new tM.g().report({status:"success",current_page:o||"login"})}catch(e){throw new tM.g().report({status:"failed",current_page:o||"login",fail_reason:null!==(r=null==e?void 0:e.description)&&void 0!==r?r:void 0}),Error(e)}},execCountingDown:e=>{let{resendEmailCodeCountDown:t}=e;return e=>{let i=t;if(0===i){e("COUNT_DOWN_ZERO");return}let r=setInterval(()=>{e({type:"UPDATE_COUNT_DOWN",data:--i}),0===i&&(clearInterval(r),e("COUNT_DOWN_ZERO"))},1e3);return()=>{clearInterval(r)}}},fetchSendResetEmailCode:async e=>{var t;let{email:i,passport:r,sendResetEmailErrorCb:n,pageEnterFrom:o,currentPage:a}=e,s=`${window.location.origin}${eR.l.FORGET_PWD.PATH}?enter_from=${null!=o?o:""}&current_page=${null!=a?a:""}`;return null===(t=await r())||void 0===t?void 0:t.sendForgetPwdEmailCode(i,s).then(e=>e,e=>{throw null==n||n(e),Error()})},checkResetCode:async e=>{var t;let{email:i,code:r,passport:n}=e;return null===(t=await n())||void 0===t?void 0:t.validateForgetPwdCode(i,r||"")},execSendConfirmReset:async(e,t)=>{var i;let{ticket:r,passport:n}=e;return null===(i=await n())||void 0===i?void 0:i.resetForgetPwd(r,t.pwd)}},guards:{isBusinessPlatform:e=>e.appId===h._S.commerce}}),tj=["getUserSubscription"];function tF(){let e="undefined"!=typeof __locationInfo?__locationInfo:void 0;if(!e)return;e&&d.ZP.updateRequestDomain(e);let t=e.code;return{region:t,idc:(0,e_.y)(t),newIdc:e.web_idc,reqDomain:e.domain}}async function tU(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let t=tF();if(e&&t)return t;let{data:i}=await u.U.getLocation(),r=i.code,n=(0,e_.y)(r);return i&&(window.__locationInfo=i,d.ZP.updateRequestDomain(i)),{region:r,idc:n,newIdc:i.web_idc,reqDomain:i.domain}}catch(t){console.error("get location failure\uFF0Cfallback to va.");let e=(0,X.hF)();return d.ZP.updateRequestDomain({domain:e}),{region:ee.yp.US,idc:ee._s.VA,newIdc:"maliva",reqDomain:e}}}async function tB(e,t,i,r){try{var n;let o=null==i?void 0:i.user_id,a=await (0,ea.y)().asyncGetConfig(),s=(null==a?void 0:a.header)||{},{web_id:l}=await (0,ea.y)().getToken();if(!(null==s?void 0:null===(n=s.custom)||void 0===n?void 0:n.channel_level1)){let e=(0,eb.C)();await e.init();let{channel:t,extraCommonParams:i}=e.getParams();s.custom={...s.custom,...t,...i}}let c={header:s,client_ip:"",params:{scenario:"custom",is_pwa:(0,ek.tc)()?1:0,pwa_from:(0,ek.MY)(),open_from_pwa:(0,ek.XX)()?1:0},user:{user_id:o,user_is_login:e,user_unique_id:l,web_id:l,...null!=r?r:{}}};!l&&window.ccWebSlardar&&window.ccWebSlardar("sendLog",{content:JSON.stringify({logType:e?"user_login":"user_signup",...c,...t}),extra:{type:"web_id_empty"}}),await p.B.eventReport({event_name:e?"user_login":"user_signup",custom_info:JSON.stringify(c),params:JSON.stringify(t)})}catch(e){}}let tH=(0,a.C)({id:"userMachine",context:{loginMode:"user",businessInfo:{businessErrorCode:v.NONE,organizationList:[]},businessUserInfo:{},ccwebAutoLogin:!1,checkIsFirstLogin:!1,isEmailSubscribeChecked:!1,isFirstLogin:void 0,isFirstLoginNoticeClose:void 0,isConfirmToBusinessLogin:void 0,loggedInAuthorize:!1,isBOE:!1,passport:()=>Promise.resolve(null),isNewSignupUser:!1,asyncFuncExecsRef:void 0,thirdPartSignInRef:void 0,emailSignInRef:void 0,newEmailSignInRef:void 0,teamInviteRef:void 0,userInviteRef:void 0,isCloudSubscribed:!1,userInfo:void 0,timeStampForCc4b:0,vipInfo:{__isDefault__:!0,flag:void 0,vipRealEnd:void 0,subscribeType:"un-auto",canFreeTrial:!1,canFreeTrialDays:0,productId:"",subscribeCycle:0,isFirstSubscribe:!1,isCancelSubscribe:!1,cycleUnit:"",vipLevels:[]},useCommerceApiPC:!1,pcContainerType:"common",spaceList:[],loginReporter:new es.m,signUpReporter:new class e{reportStatus(e){var t;this.reporter.reportBecon("signup_status",{...e,enable_looki:(null===(t=window._libra_abtest_uuid)||void 0===t?void 0:t.enable_looki_passport)===!0}),e.is_login_new_user?(0,el.T)().report(this.reporter,"sign_up"):(0,el.T)().report(this.reporter,"sign_in")}reportPageAction(e){var t;this.reporter.report("signup_page",{...e,enable_looki:(null===(t=window._libra_abtest_uuid)||void 0===t?void 0:t.enable_looki_passport)===!0})}constructor(){this.reporter=(0,ea.y)()}},logoutReporter:new class e{report(){this.reporter.report("click_logout",{})}constructor(){this.reporter=(0,ea.y)()}},newSignInModalReporter:new ec.F,fetchLocationReporter:new class e{report(e){this.reporter.report("lvrd_fetch_location",e)}constructor(){this.reporter=(0,ea.y)()}},lvrdCheckLoginReporter:new class e{updateOptions(e){this.options=(0,I.merge)({},this.options,e)}resetOptions(){this.options=ed}report(e){let t={get_user_time:this.options.checkLoginStartTime?e.endTime-this.options.checkLoginStartTime:0,has_inject_user_info:this.options.hasInjectUserInfo,is_user_login:this.options.isUserLogin||!1};this.reporter.reportBecon("lvrd_check_login_time",t)}constructor(){this.reporter=(0,ea.y)(),this.options=ed}},currentWorkspaceInfo:void 0,workspaceExpandInfoMap:{},isWorkSpaceInited:!1,workspaceList:[],updateWorkspaceEventCache:[],changeWorkspaceEventCache:"",userCareerSkipped:!1,userStatusMachineParams:tl.context,loginModalClosable:!0,everPhotoUsers:[],openServerReportUserStatus:!0,isInitialCheckLoginStatus:!0,reportSignInActionBlackList:[],ageGateChecker:new class e{initAgeGateWebId(){this.ageDeviceBan.start()}start(e){this.userInfo=null==e?void 0:e.userInfo,this.quebecAgeGateBan.start(e),this.ageNormalBan.start({userInfo:this.userInfo}),this.ageDeviceBan.start()}async startLoopCheckBanStatus(){let e=await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;return new Promise(t=>{let i=()=>{tL().then(r=>{(null==r?void 0:r.ban)?t(r):setTimeout(i,e)})};i()})}();if(!e)return;let{deleteTime:t,dueTime:i}=e;if(t<=Date.now()){tT.O.logout();return}let r=t_()(t).format("MMM D, YYYY"),n=t_()(i).format("MMM D, YYYY");eE.Z.warning({title:g.ZP.t("pc_birthday_info_remove_account_title",{string0:r},"Your account will be removed on {string0}"),content:g.ZP.t("pc_birthday_info_remove_account_desc",{string0:r,string1:n},"Your account was banned and will be deleted on {string0} because it looks like you don't meet the age requirement to use CapCut. If this is a mistake, you can appeal on App before {string1}."),closable:!1,escToExit:!1,maskClosable:!1,maskStyle:{zIndex:0x5f5e0ff},wrapStyle:{zIndex:0x5f5e0ff},okText:g.ZP.t("log_out",{},"Log out"),onOk:()=>{tT.O.logout()}}),new tg().report()}destroy(){this.quebecAgeGateBan.destroy()}setIsAgeBanned(e){this.isAgeBanned=e}goAppealPage(){if(!!this.userInfo&&!this.verifyTicket)window.open((0,o.C)((0,ty.G3)("/appeal-age-restriction",{uid:this.userInfo.uid,verify_ticket:this.verifyTicket}),null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),"_blank")}openAppealModal(e){let{title:t=g.ZP.t("dre_account_title_capcut_not_available_age_reason",{},"Can\u2019t access"),okText:i=g.ZP.t("web_quebec_users_button_appel_age_restriction",{},"Appel age restriction"),onLogout:r,...n}=e;if(!this.isAgeBanned)this.setIsAgeBanned(!0),eE.Z.warning({title:t,maskClosable:!1,closable:!1,escToExit:!1,backspaceToExit:!1,autoFocus:!1,footer:(0,tc.jsx)("div",{className:"lv-modal-footer",children:!!r&&(0,tc.jsx)(td.Z,{type:"secondary",onClick:r,children:g.ZP.t("web_sign_out",{},"Sign out")})}),...n})}openBusinessAppealModal(e){let t=(0,tc.jsxs)("div",{className:"lv-modal-footer",children:[(0,tc.jsx)(td.Z,{type:"secondary",onClick:e.onRedirect,children:g.ZP.t("commercepro_signin_age_limit_button",{},"Go to CapCut")}),(0,tc.jsx)(td.Z,{type:"primary",onClick:e.onLogout,children:g.ZP.t("web_sign_out",{},"Sign out")})]}),i=(0,tc.jsx)("div",{className:"lv-modal-footer",children:(0,tc.jsx)(td.Z,{type:"primary",onClick:e.onLogout,children:g.ZP.t("web_sign_out",{},"Sign out")})}),r=0===e.type?i:t;this.openAppealModal({title:e.title,okText:e.okText,content:e.content,className:"businessLoginAgeUnderLimit",wrapClassName:"businessLoginAgeUnderLimitWrapper",maskStyle:{zIndex:2e3,backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},wrapStyle:{zIndex:2e3},footer:void 0!==e.footer?e.footer:r})}openBirthdayFillModal(e){return eE.Z.info({maskClosable:!1,closable:!1,escToExit:!1,backspaceToExit:!1,autoFocus:!1,focusLock:!0,className:"age-gate-birthday-detail-modal-content",wrapClassName:"age-gate-birthday-detail-modal",content:(0,tc.jsx)(tN,{...null==e?void 0:e.birthdayFillProps}),footer:null,title:null,icon:null,...null==e?void 0:e.modalProps})}checkBirthday(e,t){var i,r,n,o;return(0,th.Ig)(e,t,null!==(o=null===(n=(0,eL.KC)())||void 0===n?void 0:null===(r=n.Subdivisions)||void 0===r?void 0:null===(i=r.map)||void 0===i?void 0:i.call(r,e=>e.GeoNameID))&&void 0!==o?o:[])}constructor(){this.isAgeBanned=!1,this.quebecAgeGateBan=new tk({ageGateChecker:this}),this.ageDeviceBan=new tI,this.ageNormalBan=new tP({ageGateChecker:this})}},signinGoogleWithPassportWindow:!0,signinTiktokWithBindEmail:!1,ipLocationInfo:(0,eL.KC)(),loginSuccessCb:()=>{},userLoginedCb:()=>{},loginFailCb:()=>{},businessLoginedCb:()=>{},businessNoLoginedCb:()=>{},businessLoginSuccessCb:()=>{},businessLoginFailCb:()=>{},businessNotInWhiteListCb:()=>null,noCareerCb:()=>null,redirectToCb:()=>{},noSignInCb:()=>{},waitBusinessLoginCb:()=>{},onFetchLocationFail:()=>{},initWorkspaceCb:()=>{},initUserAndWorkspaceCb:()=>{},changeWorkspaceCb:()=>{},refreshWorkspaceListCb:()=>{},beforeChangeWorkspaceCb:()=>Promise.resolve(),storageChangeWorkspaceCb:()=>{},updateWorkspaceErrorCb:()=>{},userFinishCareerCb:()=>{}},entry:["initPassport","initReporter","initAsyncFuncExecRef","initChildrenMachine","performanceMarkStart","initAgeGateWebId"],initial:"unknown",states:{unknown:{always:[{actions:"getLocationCodeFromHtml",target:"checking",cond:"hasLocationCodeFromHtml"},{target:"fetchingLocation",cond:"shouldFetchLocation"},{target:"checking",actions:["clearUserInfo"]}]},fetchingLocation:{invoke:{id:"fetchLocation",src:(0,o.C)("fetchLocation",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"checking",actions:["updateRegion"]},onError:{target:"fetchLocationFail"}}},checking:{invoke:{id:"getAndUpdateUserInfo",src:(0,o.C)("getAndUpdateUserInfo",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:[{target:"hasSign",actions:["saveUserInfo","updateRegion","reportFetchLocationSuccess","updateIsInitialCheckLoginStatus","reportUserAccountBindInfo"],cond:"isValidLocationFromCheckingPharse"},{target:"showTrustModal",actions:["saveUserInfo","updateRegion","updateLoggedInAuthorize","updateCcwebAutoLogin","reportFetchLocationSuccess","updateIsInitialCheckLoginStatus","reportUserAccountBindInfo"],cond:"isValidLocationFromBusinessCheckingPharse"},{target:"fetchLocationFail"}],onError:[{target:"noSign",actions:["noSignIn","updateIsInitialCheckLoginStatus","businessNoLogined"]}]}},showTrustModal:{id:"showTrustModal",invoke:{id:"checkIsFirstLogin",src:(0,o.C)("checkIsFirstLogin",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:[{target:"waitBusinessLogin",actions:["assignIsFirstLogin"],cond:"isContinueToBusinessLogin"},{target:"#loginOrganization",actions:"assignIsFirstLogin"}]}},waitBusinessLogin:{id:"waitBusinessLogin",entry:"waitBusinessLoginCb",on:{CONTINUE_TO_BUSINESS_LOGIN:{target:"#loginOrganization",actions:["overwriteIsConfirmToBusinessLogin","overwriteIsFirstLogin"]},ABORT_TO_BUSINESS_LOGIN:{target:"#businessLoginPending",actions:["overwriteIsConfirmToBusinessLogin"]}}},noSign:{initial:"checkingThirdOpenId",states:{checkingThirdOpenId:{always:[{target:"googleDriveConfirmSigning",cond:"needShowGoogleDriveSign"},{target:"idle"}]},idle:{on:{SIGN_IN:{target:"signing",actions:["showSignHideModal","overwritePreExecTask"]},SIGN_IN_WITH_AUTH_TOKEN:{actions:"signInWithAuthToken"},SIGN_IN_WITH_AUTH_TOKEN_SUCCESS:{target:"checking",actions:"hideSignHideModal"}}},signing:{on:{EXIT_SIGN_IN:[{target:"thirdPartyConfirmSigning",cond:"needShowThirdPartySign"},{target:"idle",actions:["clearUrl"]}],SIGN_IN_SUCCESS:{target:"checking",actions:["thirdPartyStorageLoginSuccess","reportLoginSuccess","updateloginReportParams","storeLoginInfo"]},SIGN_IN_FAIL:{actions:["reportLoginFail","updateloginReportParams","reportLoginFailStatus","checkAgeGate"]}}},thirdPartyConfirmSigning:{on:{SIGN_IN:{target:"signing"},CANCEL_THIRD_LOGIN:{target:"idle",actions:["clearUrl"]}}},googleDriveConfirmSigning:{on:{CONFIRM_THIRD_LOGIN:{target:"idle",actions:"handleUserStop"}}},checking:{invoke:{id:"getAndUpdateUserInfo",src:(0,o.C)("getAndUpdateUserInfo",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),meta:{noSign:!0},onDone:[{target:"#hasSign",actions:["saveUserInfo","updateRegion","updateReporterIsLogin","reportFetchLocationSuccess","updateIsInitialCheckLoginStatus","reportUserAccountBindInfo"],cond:"isValidLocationFromCheckingPharse"},{target:"#showTrustModal",actions:["saveUserInfo","updateRegion","reportFetchLocationSuccess","updateIsInitialCheckLoginStatus","reportUserAccountBindInfo"],cond:"isValidLocationFromBusinessCheckingPharse"},{target:"#fetchLocationFail"}],onError:{target:"idle",actions:["clearUserInfo","updateReporterIsLogin","updateIsInitialCheckLoginStatus"]}}}},entry:["performanceMarkEnd"]},hasSign:{id:"hasSign",initial:"preExec",states:{preExec:{invoke:{id:"preExecTaskWhenLogin",src:(0,o.C)("preExecTaskWhenLogin",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:[{target:"idle"}],onError:{target:"idle"}}},idle:{}},entry:[(0,s.f0)({isWorkSpaceInited:!0}),"refreshPersonalWorkspace","reportLoginSuccessStatus","reportLvrdCheckLoginTime","userLoginedCb","stopEmailSignInActor","saveUserFromSignUpStorage","getAllEverPhotoUser","checkAgeGate","loopCheckAgeBanStatus","performanceMarkEnd"],invoke:[{id:"LvUserCareerMachine",src:(0,o.C)(tr,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),data:e=>{var t;return{...tr.context,userInfo:e.userInfo,noCareerCb:e.noCareerCb,userFinishCareerCb:e.userFinishCareerCb,shouldShowCareerModal:e.shouldShowCareerModal,reporterParams:{currentPage:null===(t=e.loginReportParams)||void 0===t?void 0:t.currentPage}}}},{id:"LvUserWorkspaceMachine",src:(0,o.C)(ta,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),data:e=>({...ta.context,useCommerceApiPC:e.useCommerceApiPC,pcContainerType:e.pcContainerType,userInfo:e.userInfo,changeWorkspaceEventCache:e.changeWorkspaceEventCache,updateWorkspaceEventCache:e.updateWorkspaceEventCache,initWorkspaceCb:e.initWorkspaceCb,initUserAndWorkspaceCb:e.initUserAndWorkspaceCb,changeWorkspaceCb:e.changeWorkspaceCb,refreshWorkspaceListCb:e.refreshWorkspaceListCb,storageChangeWorkspaceCb:e.storageChangeWorkspaceCb,beforeChangeWorkspaceCb:e.beforeChangeWorkspaceCb,updateWorkspaceErrorCb:e.updateWorkspaceErrorCb})},{id:"LvUserStatusListenerMachine",src:(0,o.C)(tl,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),data:e=>({...tl.context,...e.userStatusMachineParams,uid:e.userInfo.uid})},{id:"getUserSubscription",src:(0,o.C)("getUserSubscription",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{actions:"assignVipInfo"},onError:{}},{id:"checkIsFirstLogin",src:(0,o.C)("checkIsFirstLogin",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:[{actions:["assignIsFirstLogin"],cond:"isNotBusiness"},{target:"waitBusinessLogin",actions:["assignIsFirstLogin"],cond:"isContinueToBusinessLogin"},{target:"#loginOrganization",actions:"assignIsFirstLogin"}]}].filter(e=>!tn.Q||!tj.includes(e.id)),on:{SET_CAREER:{actions:["forwardToUserCareer"]},SET_NO_CAREER_CB:{actions:["forwardToUserCareer"]},UPDATE_USER_CAREER:{actions:["mergeUserInfo"]},UPDATE_USER_CAREER_SKIPPED:{actions:["updateUserCareerSkipped"]},SIGN_OUT:{actions:["reportClickLogout","forwardToUserStatusListener","signout"]},REFRESH_USER_SPACE:{actions:["refreshPersonalWorkspace"]},CHANGE_WORKSPACE:{actions:["forwardToUserWorkspace"]},REFRESH_WORKSPACE_LIST:{actions:["forwardToUserWorkspace"]},STORAGE_CHANGE_WORKSPACE:{actions:["forwardToUserWorkspace"]},UPDATE_WORKSPACE:{actions:["forwardToUserWorkspace"]},UPDATE_VIP_INFO:{actions:["updateVipInfoReq"]},NOTIFY_WORKSPACE_CHANGE:{actions:["forwardToUserWorkspace"]},UPDATE_WORKSPACE_DATA_FROM_CHILD:{actions:"updateWorkspaceDataFromChild"},GET_VIP_INFO_SUCCESS:{actions:["assignVipInfo"]}}},loginOrganization:{id:"loginOrganization",initial:"getBusinessUserInfo",states:{getBusinessUserInfo:{invoke:{id:"getBusinessUser",src:(0,o.C)("getBusinessUser",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),meta:{trustGatewayLogin:!0},onDone:{target:"#hasBusinessLogin",actions:["updateBusinessUserInfo"]},onError:{target:"fetchingList",actions:["updateLoginReportParamsWhenBusinessNoLogined","businessNoLogined"]}}},fetchingList:{invoke:{id:"getBusinessOrganizationList",src:(0,o.C)("getBusinessOrganizationList",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),meta:{noSign:!0},onDone:[{target:"waitSelectOrganization",actions:["updateBusinessInfo"],cond:"hasMultipleBusinessSubject"},{target:"autoSelectSubject",actions:["updateBusinessInfo"]}],onError:{target:"#businessLoginFail",actions:["reportBusinessLoginFailStatus","clearBusinessInfo"]}}},autoSelectSubject:{invoke:{id:"autoSelectSubjectAndLogin",src:(0,o.C)("autoSelectSubjectAndLogin",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"getBusinessUserInfoAfterLogin"},onError:{target:"#businessLoginFail",actions:["reportBusinessLoginFailStatus"]}}},getBusinessUserInfoAfterLogin:{invoke:{id:"getBusinessUser",src:(0,o.C)("getBusinessUser",null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),onDone:{target:"#hasBusinessLogin",actions:["updateBusinessUserInfo"]},onError:{target:"#businessLoginFail",actions:["reportBusinessLoginFailStatus"]}}},waitSelectOrganization:{}}},hasBusinessLogin:{id:"hasBusinessLogin",invoke:[{id:"LvUserStatusListenerMachine",src:(0,o.C)(tl,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),data:e=>({...tl.context,...e.userStatusMachineParams,uid:e.businessUserInfo.business_user_info.user_id})}],entry:["reportBusinessLoginSuccessStatus","businessLogined","businessLoginSuccess","checkAgeGate","overWriteIsFirstLogin"],on:{SIGN_OUT:{actions:["reportClickLogout","forwardToUserStatusListener","signout"]}}},businessLoginFail:{id:"businessLoginFail",entry:["businessLoginFail"],on:{SIGN_OUT:{actions:["reportClickLogout","signout"]},SIGN_IN:{target:"#showTrustModal"},SIGN_IN_ACTION:{actions:["updateloginReportParams","reportSignInAction"]}}},businessLoginPending:{id:"businessLoginPending",on:{SIGN_IN:{target:"#showTrustModal"},SIGN_IN_ACTION:{actions:["updateloginReportParams","reportSignInAction"]}}},fetchLocationFail:{id:"fetchLocationFail",type:"final",entry:["handleFetchLocationFail","reportFetchLocationFail"]}},on:{SIGN_IN_WITH_URL:{actions:["loginingWithUrl"]},SET_NO_SIGN_IN_CB:{actions:["setNoSignInCb"]},SET_REDIRECT_TO_CB:{actions:["setRedirectToCb"]},SET_NO_CAREER_CB:{actions:["setNoCareerCb"]},UPDATE_REPORT_PARAMS:{actions:["updateloginReportParams","changeThirdPartCurrentPage","changeEmailCurrentPage"]},UPDATE_FIRST_LOGIN_NOTICE_CLOSE:{actions:["overwriteIsFirstLoginClose","overWriteIsFirstLogin"]},SIGN_IN_ACTION:{actions:["updateloginReportParams","reportSignInAction"]},SIGN_IN_SUCCESS:{target:"noSign.checking",actions:["reportLoginSuccess","updateloginReportParams"]},CHANGE_CONTEXT:{actions:l.RN([{cond:"isInitWorkSpaceGuard",actions:["changeContext","changeThirdPartSignInContext","changeEmailSignInContext","changeNewEmailSignInContext","changeUserWorkSpaceInContext"]},{actions:["changeContext","changeThirdPartSignInContext","changeEmailSignInContext"]}])},SYNC_CONTEXT:{actions:["changeEmailSignInPartialContext","changeNewEmailSignInPartialContext"]},UPDATE_WORKSPACE:{actions:"restoreUpdateWorkspaceEventCache"},CHANGE_WORKSPACE:{actions:["consumeChangeWorkspaceCache"]},GET_ALL_EVER_PHOTO_USER_SUCCESS:{actions:["saveAllEverPhotoUser"]},UPDATE_DEFAULT_WORKSPACE_INFO:{actions:["updateDefaultWorkspaceInfo","updateUserInfoStringify"]},SET_USER_LOGINED_CB:{actions:["setUserLoginedCb"]},SET_EMAIL_SUBSCRIBE_CHECKED:{actions:["setEmailSubscribeChecked"]}}},{services:{async getAndUpdateUserInfo(e,t,i){var r,n,o,a,s,l,c;let{meta:u}=i;null==e||null===(n=e.lvrdCheckLoginReporter)||void 0===n||null===(r=n.updateOptions)||void 0===r||r.call(n,{checkLoginStartTime:Date.now(),isUserLogin:null==u?void 0:u.noSign});let{source:p,medium:g,campaign:h,term:m=""}=(0,eb.C)().getParams(),v=g===eS.VY.SEM,f=v?et.PII_GOOGLE_SEM:"Direct"===g?et.PII_DIRECT:g,y=v&&m&&h,w=(0,eg.XD)({isReportUserInfoInvalid:!1});if(e.isInitialCheckLoginStatus&&!w&&"undefined"!=typeof __isLogined&&!__isLogined&&!ei.Z)throw Error("not logined");let b=()=>_.B.getAndUpdateUserInfo({sem_info:{is_sem:v,medium:g,register_source:f,register_second_source:p,keywords:y?m:void 0,campaign_id:y?h:void 0}}),S=()=>{let{passport:t}=e;return t().then(t=>null==t?void 0:t.getAccountInfo().then(()=>(e.redirectToCb(e),Promise.reject(Error("login success")))))},C=()=>(0,eh._)(e.appId)?S():b().catch(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.ret)==="1015"&&(null==u?void 0:u.noSign)?new Promise(e=>{setTimeout(()=>{e(b())},2e3)}):Promise.reject(e)}),k=w||await C(),E=window.__looki_uid,{code:I,domain:P,web_idc:A}=null!==(c=null==k?void 0:k.location)&&void 0!==c?c:{};"function"==typeof window.__lookiLogin&&window.__lookiLogin(I),"US"===I&&window.__looki_uid!==E&&(k=await C()),window.isUserInfoInvalid=!1,!w&&"undefined"!=typeof window&&(window.__userInfoStringify=JSON.stringify({ret:"0",data:k,__clientInject:!0}),!window.__userInfo&&(window.__userInfo=k)),null==e||null===(a=e.lvrdCheckLoginReporter)||void 0===a||null===(o=a.updateOptions)||void 0===o||o.call(a,{hasInjectUserInfo:!!w});let R=(0,e_.y)(I);return d.ZP.updateRequestDomain({domain:P}),{user_id_str:null==k?void 0:null===(s=k.user_info)||void 0===s?void 0:s.user_id,userInfo:null==k?void 0:k.user_info,region:I,spaceInfo:null==k?void 0:k.space_info,personalSpaceInfo:null==k?void 0:k.space_info,idc:R,newIdc:A,reqDomain:P,defaultSpaceInfo:null==k?void 0:null===(l=k.user_info)||void 0===l?void 0:l.default_space_info}},async fetchLocation(){let e=await tU();return{region:null==e?void 0:e.region,idc:null==e?void 0:e.idc,newIdc:null==e?void 0:e.newIdc,reqDomain:null==e?void 0:e.reqDomain}},async getBusinessOrganizationList(e){try{return await S.getOrganizationList({subjectAid:578071,scene:e.scene})}catch(e){return console.error("Fetch organization list failed"),{data:{identity_list:[]},ret:"40000"}}},async autoSelectSubjectAndLogin(e){var t,i,r;let n=(null===(t=e.businessInfo)||void 0===t?void 0:t.organizationList)||[];if(!n.length)throw Error("organizationList is empty");if(n.length>1)throw Error("manually select subject");let o=n[0];if(!o||!o.business_identity_id||!o.business_user_id||!o.business_id||!o.business_appid)throw Error("invalid argument");let a=await e.passport();if(!a)throw Error("invalid passport sdk");let s=null===(r=o.location)||void 0===r?void 0:null===(i=r.global_header)||void 0===i?void 0:i["x-idc-region"];await a.affPassportSdk.subjectLogin({loginSubjectUid:o.business_id,userIdentityId:o.business_identity_id,subjectAid:578071,idcRegion:s})},async getBusinessUser(e,t,i){var r,n,o,a,s,l,c,d,u,p,_,g,h,m,v,f,y,w,b,C,k,E,I,P,A,R,x,N,L,O,M,D,j,F,U,B,H,G,W,V,Z,z,$,K,q,Y,J,Q,X,ee,et,ei,er,en,eo,ea,es,el,ec,ed,eu,ep,eh,em,ev,ef,ey,ew,eb,eS,eC,ek;let{meta:eE}=i,eI=(null==eE?void 0:eE.trustGatewayLogin)&&"undefined"!=typeof __isBusinessLogined&&!__isBusinessLogined,eT=(0,eg.Bm)();if(eI&&!eT)throw Error("business not logined");let eP=eT||(await S.getBusinessUser(578071)).data,{userInfo:eA}=e;return"undefined"!=typeof window&&(window.__userInfoStringify=JSON.stringify({ret:"0",data:{user_info:{ageGateBirthday:null==eA?void 0:eA.ageGateBirthday,avatar_urls:{avatar_url_large:null==eA?void 0:eA.avatar,avatar_url_medium:null==eA?void 0:eA.avatar,avatar_url_small:null==eA?void 0:eA.avatar},create_time:null===(B=eP.business_user_info)||void 0===B?void 0:B.user_create_time,email:null==eA?void 0:eA.email,has_birthday:!!(null==eA?void 0:eA.ageGateBirthday),is_new_user:null!==(V=null!==(W=e.isFirstLoginFromServer)&&void 0!==W?W:null==eA?void 0:eA.is_new_user)&&void 0!==V&&V,nick_name:null===(H=eP.business_user_info)||void 0===H?void 0:H.user_name,user_id:null===(G=eP.business_user_info)||void 0===G?void 0:G.user_id},location:eP.location,space_info:eP.space_info,default_space_info:eP.space_info,ever_photo:eP.ever_photo,subscribe_info:{flag:!1},updated_sem:!1},__clientInject:!0})),e.userInfo={ageGateBirthday:null==eA?void 0:eA.ageGateBirthday,region:null!==(Z=null===(r=eP.location)||void 0===r?void 0:r.code)&&void 0!==Z?Z:"unknown",idc:(0,e_.y)(null===(n=eP.location)||void 0===n?void 0:n.code),newIdc:null!==(z=null===(o=eP.location)||void 0===o?void 0:o.web_idc)&&void 0!==z?z:"",reqDomain:{commerce_domain:null!==($=null===(s=eP.location)||void 0===s?void 0:null===(a=s.domain)||void 0===a?void 0:a.commerce_domain)&&void 0!==$?$:"",frontier_domain:null!==(K=null===(c=eP.location)||void 0===c?void 0:null===(l=c.domain)||void 0===l?void 0:l.frontier_domain)&&void 0!==K?K:"",web_domain:null!==(q=null===(u=eP.location)||void 0===u?void 0:null===(d=u.domain)||void 0===d?void 0:d.web_domain)&&void 0!==q?q:"",tts_domain:null!==(Y=null===(_=eP.location)||void 0===_?void 0:null===(p=_.domain)||void 0===p?void 0:p.tts_domain)&&void 0!==Y?Y:""},uid:null!==(J=null===(g=eP.business_user_info)||void 0===g?void 0:g.user_id)&&void 0!==J?J:"",name:null!==(Q=null===(h=eP.business_user_info)||void 0===h?void 0:h.user_name)&&void 0!==Q?Q:"",avatar:null!==(X=null==eA?void 0:eA.avatar)&&void 0!==X?X:"",career:"",register_source:"",isBindTT:!1,ttUID:"",email:null!==(ee=null==eA?void 0:eA.email)&&void 0!==ee?ee:"",create_time:null===(m=eP.business_user_info)||void 0===m?void 0:m.user_create_time,is_new_user:null!==(ei=null!==(et=e.isFirstLoginFromServer)&&void 0!==et?et:null==eA?void 0:eA.is_new_user)&&void 0!==ei&&ei,spaceInfo:{spaceHost:null!==(er=null===(v=eP.space_info)||void 0===v?void 0:v.space_host)&&void 0!==er?er:"",spaceId:null!==(en=null===(f=eP.space_info)||void 0===f?void 0:f.space_id)&&void 0!==en?en:"",spaceIdc:null!==(eo=null===(y=eP.space_info)||void 0===y?void 0:y.space_idc)&&void 0!==eo?eo:"",spaceResHost:null!==(ea=null===(w=eP.space_info)||void 0===w?void 0:w.space_res_host)&&void 0!==ea?ea:"",workspaceId:null!==(es=null===(b=eP.space_info)||void 0===b?void 0:b.workspace_id)&&void 0!==es?es:"",spaceType:null===(C=eP.space_info)||void 0===C?void 0:C.space_type,rawSpaceType:null===(k=eP.space_info)||void 0===k?void 0:k.raw_space_type},personalSpaceInfo:{spaceHost:null!==(el=null===(E=eP.space_info)||void 0===E?void 0:E.space_host)&&void 0!==el?el:"",spaceId:null!==(ec=null===(I=eP.space_info)||void 0===I?void 0:I.space_id)&&void 0!==ec?ec:"",spaceIdc:null!==(ed=null===(P=eP.space_info)||void 0===P?void 0:P.space_idc)&&void 0!==ed?ed:"",spaceResHost:null!==(eu=null===(A=eP.space_info)||void 0===A?void 0:A.space_res_host)&&void 0!==eu?eu:"",workspaceId:null!==(ep=null===(R=eP.space_info)||void 0===R?void 0:R.workspace_id)&&void 0!==ep?ep:"",spaceType:null===(x=eP.space_info)||void 0===x?void 0:x.space_type,rawSpaceType:null===(N=eP.space_info)||void 0===N?void 0:N.raw_space_type},hasGoogleEmail:!1,defaultSpaceInfo:{spaceHost:null!==(eh=null===(L=eP.space_info)||void 0===L?void 0:L.space_host)&&void 0!==eh?eh:"",spaceId:null!==(em=null===(O=eP.space_info)||void 0===O?void 0:O.space_id)&&void 0!==em?em:"",spaceIdc:null!==(ev=null===(M=eP.space_info)||void 0===M?void 0:M.space_idc)&&void 0!==ev?ev:"",spaceResHost:null!==(ef=null===(D=eP.space_info)||void 0===D?void 0:D.space_res_host)&&void 0!==ef?ef:"",workspaceId:null!==(ey=null===(j=eP.space_info)||void 0===j?void 0:j.workspace_id)&&void 0!==ey?ey:"",spaceType:null===(F=eP.space_info)||void 0===F?void 0:F.space_type,rawSpaceType:null===(U=eP.space_info)||void 0===U?void 0:U.raw_space_type},has_birthday:!!(null==eA?void 0:eA.ageGateBirthday),is_young:!1,forbidden_date:""},(null==eP?void 0:eP.location)&&(window.__locationCountryCode=eP.location.code,window.__locationInfo={region:null!==(ew=eP.location.code)&&void 0!==ew?ew:"unknown",code:null!==(eb=eP.location.code)&&void 0!==eb?eb:"unknown",country_name:null!==(eS=eP.location.country_name)&&void 0!==eS?eS:"",city:null!==(eC=eP.location.city)&&void 0!==eC?eC:"",web_idc:null!==(ek=eP.location.web_idc)&&void 0!==ek?ek:"",domain:eP.location.domain,global_header:eP.location.global_header}),eP},getPersonalWorkspaceId(e){var t;let i=null===(t=e.workspaceList)||void 0===t?void 0:t.find(e=>(0,em.Ts)(e));return Promise.resolve(null==i?void 0:i.workspace_id)},async preExecTaskWhenLogin(e){try{var t;await (null==e?void 0:null===(t=e.preExecTaskWhenLogin)||void 0===t?void 0:t.call(e))}catch(e){}},getUserSubscription(e){try{let{useCommerceApiPC:t,pcContainerType:i}=e;if(!t)return C.k.getSubscriptionUserInfo();if("graphic"===i)return W.getSubscriptionUserInfo();if("common"===i)return q.getSubscriptionUserInfo();return C.k.getSubscriptionUserInfo()}catch(e){return Promise.reject(e)}},async checkIsFirstLogin(e){if(!e.checkIsFirstLogin)return{isFirstLogin:!1,isFirstLoginFromServer:!1,timeStampForCc4b:0};try{var t;let i=await _.B.checkIsFirstLogin(null!==(t=e.appId)&&void 0!==t?t:Number(h.yM.APP_ID));return{isFirstLogin:i.first_login_status,isFirstLoginFromServer:i.first_login_status,timeStampForCc4b:i.first_login_status?Date.now():0}}catch(e){return console.error("\u8BF7\u6C42\u5931\u8D25",e),{isFirstLogin:!1,isFirstLoginFromServer:!1,timeStampForCc4b:0}}}},actions:{performanceMarkStart:()=>{ep.userInit.start()},performanceMarkEnd:()=>{ep.userInit.end()},initAsyncFuncExecRef:(0,s.f0)({asyncFuncExecsRef:()=>(0,c.Cs)(eC.E)}),getLocationCodeFromHtml:(0,s.f0)({userInfo:()=>{let{region:e,idc:t,reqDomain:i,newIdc:r}=tF()||{};return e?{region:e,idc:t,newIdc:r,reqDomain:i}:void 0}}),thirdPartyStorageLoginSuccess:async()=>{if((0,ev.XK)()){var e;let t=null===(e=window.location.originParams)||void 0===e?void 0:e.shop;await _.B.authorizationCheck({platform:er.gn.Shopify,account_id:t})}},reportLoginSuccess:(e,t)=>{var i,r;(null===(i=e.loginReportParams)||void 0===i?void 0:i.type)&&ef.m.setString(en.g.LOGIN_TYPE_FOR_FIRST_LOGIN_NOTICE,null===(r=e.loginReportParams)||void 0===r?void 0:r.type),e.loginSuccessCb(t.data)},overwritePreExecTask:(0,s.f0)({preExecTaskWhenLogin:(e,t)=>t.preExecTaskWhenLogin}),userLoginedCb:e=>{e.userLoginedCb(e.userInfo)},reportLoginFail:e=>{e.loginFailCb()},businessLogined:e=>{e.businessLoginedCb(e.businessUserInfo)},businessNoLogined:e=>{e.businessNoLoginedCb()},updateLoginReportParamsWhenBusinessNoLogined:(0,s.f0)({loginReportParams:e=>{var t,i,r,n,o,a,s;return(null===(t=e.loginReportParams)||void 0===t?void 0:t.type)||!e.ccwebAutoLogin?e.loginReportParams:{...e.loginReportParams,pageEnterFrom:null!==(o=null===(i=e.loginReportParams)||void 0===i?void 0:i.pageEnterFrom)&&void 0!==o?o:"auto_popup",statusEnterFrom:null!==(a=null===(r=e.loginReportParams)||void 0===r?void 0:r.statusEnterFrom)&&void 0!==a?a:"auto_popup",currentPage:null!==(s=null===(n=e.loginReportParams)||void 0===n?void 0:n.currentPage)&&void 0!==s?s:"login",type:"ccweb_auto_login",source:es.C.LoginIn}}}),businessLoginSuccess:e=>{var t;(null===(t=e.loginReportParams)||void 0===t?void 0:t.type)&&ef.m.setString(en.g.LOGIN_TYPE_FOR_FIRST_LOGIN_NOTICE,e.loginReportParams.type),e.businessLoginSuccessCb(e.businessUserInfo,e)},businessLoginFail:e=>{e.businessLoginFailCb()},saveUserInfo:(0,s.f0)({userInfo:(e,t)=>{let{userInfo:i}=e,r=t.data.userInfo,{spaceInfo:n}=t.data,o=null==r?void 0:r.default_space_info;return{...i,uid:r.user_id,name:r.nick_name,avatar:r.avatar_urls.avatar_url_small,description:r.description,gender:r.gender,career:r.career,register_source:r.register_source,isBindTT:r.is_bind_tt,ttUID:r.tt_user_id,email:r.email,create_time:r.create_time,is_new_user:r.is_new_user,ccAppId:r.unique_id,spaceInfo:{spaceHost:null==n?void 0:n.space_host,spaceId:null==n?void 0:n.space_id,spaceIdc:null==n?void 0:n.space_idc,spaceResHost:null==n?void 0:n.space_res_host,workspaceId:null==n?void 0:n.workspace_id,spaceType:null==n?void 0:n.space_type,rawSpaceType:null==n?void 0:n.raw_space_type},personalSpaceInfo:{spaceHost:null==n?void 0:n.space_host,spaceId:null==n?void 0:n.space_id,spaceIdc:null==n?void 0:n.space_idc,spaceResHost:null==n?void 0:n.space_res_host,workspaceId:null==n?void 0:n.workspace_id,spaceType:null==n?void 0:n.space_type,rawSpaceType:null==n?void 0:n.raw_space_type},hasGoogleEmail:r.has_google_email,defaultSpaceInfo:o?{spaceHost:o.space_host,spaceId:o.space_id,spaceIdc:o.space_idc,spaceResHost:o.space_res_host,workspaceId:o.workspace_id,spaceType:o.space_type,rawSpaceType:o.raw_space_type}:void 0,has_birthday:r.has_birthday,is_young:r.is_young,forbidden_date:r.forbidden_date,useGPTText2Video:r.use_gpt_text2video,exportGPTText2Video:r.export_gpt_text2video,ageGateBirthday:r.age_gate_birthay}}}),mergeUserInfo:(0,s.f0)({userInfo:(e,t)=>{let{userInfo:i}=e;return{...i,...t.userInfo}}}),updateUserCareerSkipped:(0,s.f0)({userCareerSkipped:(e,t)=>t.skipped}),clearUserInfo:(0,s.f0)({userInfo:e=>{let{userInfo:t}=e;return t?{region:t.region,idc:t.idc,newIdc:t.newIdc,reqDomain:t.reqDomain}:void 0}}),updateBusinessInfo:(0,s.f0)({businessInfo:(e,t)=>{var i,r,n;let{businessInfo:o,businessNotInWhiteListCb:a,loggedInAuthorize:s}=e,l=t.data;return(m[Number(l.ret)]===v.NOT_IN_WHITE_LIST||m[Number(l.ret)]===v.NOT_IN_SUBSCRIBE_REGION)&&a(s?"logged_in_authorize":"new_log_in",m[Number(l.ret)]),{...o,businessErrorCode:l.ret?m[Number(l.ret)]:v.NONE,organizationList:null!==(n=null===(r=l.data)||void 0===r?void 0:null===(i=r.identity_list)||void 0===i?void 0:i.filter(e=>!e.is_frozen))&&void 0!==n?n:[]}}}),clearBusinessInfo:(0,s.f0)({businessInfo:e=>{let{businessInfo:t}=e;return t||{businessErrorCode:v.NONE,organizationList:[]}}}),updateBusinessUserInfo:(0,s.f0)({businessUserInfo:(e,t)=>t.data}),setEmailSubscribeChecked:(0,s.f0)({isEmailSubscribeChecked:(e,t)=>t.value}),updateReporterIsLogin:e=>{var t,i;let{userInfo:r}=e,n=(0,ea.y)(),o=null==n?void 0:null===(i=n.getConfig)||void 0===i?void 0:null===(t=i.call(n))||void 0===t?void 0:t.user;n.config({user:{...o,user_is_login:!!(null==r?void 0:r.uid)}})},loginingWithUrl:(e,t)=>{let{passport:i}=e;i().then(e=>null==e?void 0:e.signin(null==t?void 0:t.backURL))},signout:(e,t)=>{let{passport:i}=e;(0,eL.z5)(e)?i().then(e=>{var i;return null==e?void 0:e.affPassportSdk.subjectLogout({subjectAid:578071,onlyLogoutAff:!1,redirectUrl:null!==(i=null==t?void 0:t.redirectUrl)&&void 0!==i?i:void 0})}):i().then(e=>{var i;return null==e?void 0:e.signout(null!==(i=null==t?void 0:t.redirectUrl)&&void 0!==i?i:void 0)})},noSignIn(e){e.noSignInCb()},waitBusinessLoginCb(e){e.waitBusinessLoginCb()},reportLoginSuccessStatus:async(e,t)=>{let{data:i}=t,{loginReportParams:r,loginReporter:n,signUpReporter:o}=e;if(r&&["type","source"].every(e=>[void 0,""].every(t=>r[e]!==t))){var a,s,l,c,d;let t=r.source===es.C.LoginIn;r.isThirdparty&&(t=!r.isLoginNewUser);let u=!t,p={enter_from:null!==(d=r.statusEnterFrom)&&void 0!==d?d:"",current_page:r.currentPage||(t?"login":"signup"),status:"success",article_type:(null==r?void 0:r.articleType)?r.articleType:void 0,article_title:(null==r?void 0:r.articleTitle)?r.articleTitle:void 0,login_type:t?r.type:void 0,signup_type:u?r.type:void 0,videocut_id:i.userInfo.user_id,age_year:u?r.age_year:void 0,age_month:u?r.age_month:void 0,age_date:u?r.age_date:void 0,tool_type:r.toolType,is_login_new_user:r.isLoginNewUser,url:location.href,url_path:location.pathname,page_type:r.pageType,from_page:r.fromPage,page_from:r.fromPage},_=(0,ea.y)(),g=null==_?void 0:null===(l=_.getConfig)||void 0===l?void 0:null===(s=l.call(_))||void 0===s?void 0:null===(a=s.header)||void 0===a?void 0:a.custom;_.config({custom:{...g,url:location.href,url_path:location.pathname,login_method:r.type}}),null===(c=t?n:o)||void 0===c||c.reportStatus(p);let{openServerReportUserStatus:h=!0}=e;h&&await tB(t,p,null==i?void 0:i.userInfo)}e.redirectToCb(e)},reportLoginFailStatus:(e,t)=>{let{loginReportParams:i,loginReporter:r,signUpReporter:n,openServerReportUserStatus:o=!0}=e;if(i&&["type","source"].every(e=>[void 0,""].every(t=>i[e]!==t))){var a,s,l,c,d,u,p;let e=i.source===es.C.LoginIn,_={enter_from:null!==(u=i.statusEnterFrom)&&void 0!==u?u:"",current_page:i.currentPage||(e?"login":"signup"),status:"fail",article_type:(null==i?void 0:i.articleType)?i.articleType:void 0,article_title:(null==i?void 0:i.articleTitle)?i.articleTitle:void 0,login_type:i.source===es.C.LoginIn?i.type:void 0,signup_type:i.source===es.C.SignUp?i.type:void 0,error_code:null===(a=t.params)||void 0===a?void 0:a.errorCode,error_msg:null!==(p=(null===(s=t.params)||void 0===s?void 0:s.errorCode)&&eL.W7[null===(l=t.params)||void 0===l?void 0:l.errorCode])&&void 0!==p?p:null===(c=t.params)||void 0===c?void 0:c.errorMsg,tool_type:i.toolType,url:location.href,url_path:location.pathname,page_type:i.pageType,from_page:i.fromPage,page_from:i.fromPage};null===(d=e?r:n)||void 0===d||d.reportStatus(_),o&&tB(e,_)}},reportBusinessLoginSuccessStatus:async e=>{var t,i,r,n,o,a,s,l,c,d,u,p,_,g,h,m,v,f,y;let{loginReportParams:w,loginReporter:b,signUpReporter:S,businessUserInfo:C}=e;if(!(w&&["type","source"].every(e=>[void 0,""].every(t=>w[e]!==t))))return;let k=!e.isFirstLoginFromServer,E={status:"success",login_type:k?w.type:void 0,enter_from:null!==(h=w.statusEnterFrom)&&void 0!==h?h:"",current_page:w.currentPage||(k?"login":"signup"),signup_type:k?void 0:w.type,page_from:w.fromPage},I=(0,ea.y)(),P=null==I?void 0:null===(r=I.getConfig)||void 0===r?void 0:null===(i=r.call(I))||void 0===i?void 0:null===(t=i.header)||void 0===t?void 0:t.custom;I.config({user_is_login:!0,user_id:null!==(m=null===(o=C.consumer_user)||void 0===o?void 0:null===(n=o.user_info)||void 0===n?void 0:n.user_id)&&void 0!==m?m:0,user_unique_id:null===(s=C.consumer_user)||void 0===s?void 0:null===(a=s.user_info)||void 0===a?void 0:a.user_id,region:null===(l=C.location)||void 0===l?void 0:l.code,custom:{...P,business_user_id:null!==(v=null===(c=C.business_user_info)||void 0===c?void 0:c.user_id)&&void 0!==v?v:0,business_id:null!==(f=null===(d=C.business_user_info)||void 0===d?void 0:d.business_id)&&void 0!==f?f:0,consumer_user_id:null!==(y=null===(p=C.consumer_user)||void 0===p?void 0:null===(u=p.user_info)||void 0===u?void 0:u.user_id)&&void 0!==y?y:0,user_region:null===(_=C.location)||void 0===_?void 0:_.code,url:location.href,url_path:location.pathname,login_method:w.type}}),null===(g=k?b:S)||void 0===g||g.reportStatus(E);let{openServerReportUserStatus:A=!0}=e;A&&await tB(k,E,JSON.parse(window.__userInfoStringify),e.businessUserInfo)},reportBusinessLoginFailStatus:(e,t)=>{var i,r,n,o,a,s;let{loginReportParams:l,loginReporter:c,signUpReporter:d,openServerReportUserStatus:u=!0}=e;if(!(l&&["type","source"].every(e=>[void 0,""].every(t=>l[e]!==t))))return;let p=!e.isFirstLoginFromServer,_={status:"fail",error_code:null===(i=t.params)||void 0===i?void 0:i.errorCode,fail_reason:null!==(a=(null===(r=t.params)||void 0===r?void 0:r.errorCode)&&eL.W7[t.params.errorCode])&&void 0!==a?a:null===(n=t.params)||void 0===n?void 0:n.errorMsg,login_type:p?l.type:void 0,enter_from:null!==(s=l.statusEnterFrom)&&void 0!==s?s:"",current_page:l.currentPage||(p?"login":"signup"),signup_type:p?void 0:l.type,page_from:l.fromPage};null===(o=p?c:d)||void 0===o||o.reportStatus(_),u&&tB(p,_)},reportSignInAction:(e,t)=>{let{loginReportParams:i,loginReporter:r,newSignInModalReporter:n,signUpReporter:o,reportSignInActionBlackList:a}=e;if(i&&["action","source"].every(e=>[void 0,""].every(t=>i[e]!==t))&&a.every(e=>i.action!==e)){var s,l,c;let e=i.source===es.C.LoginIn;if(i.action&&eL.qf.includes(i.action)){null==n||n.report({action:i.action,enter_from:i.pageEnterFrom,page_from:i.fromPage,login_type:eL.VG.includes(i.action)?i.type:void 0});return}if(i.action&&"show"!==i.action){let e=(null==t?void 0:null===(l=t.params)||void 0===l?void 0:l.actionType)==="confirm"?`${i.action}_confirm`:i.action,r=null!==(c=eL.LB[e])&&void 0!==c?c:i.action;null==n||n.report({action:r,enter_from:i.pageEnterFrom,page_from:i.fromPage})}null===(s=e?r:o)||void 0===s||s.reportPageAction({enter_from:i.pageEnterFrom,current_page:i.currentPage?i.currentPage:e?"login":"signup",action:i.action,article_type:(null==i?void 0:i.articleType)?i.articleType:void 0,article_title:(null==i?void 0:i.articleTitle)?i.articleTitle:void 0,tool_type:i.toolType,url:location.href,url_path:location.pathname,page_type:i.pageType,from_page:i.fromPage,user_source:null==i?void 0:i.userSource})}},reportClickLogout:e=>{let{logoutReporter:t}=e;null==t||t.report()},updateloginReportParams:(0,s.f0)({loginReportParams:(e,t)=>{let{loginReportParams:i}=e;return{...i,...t.params}}}),overwriteIsConfirmToBusinessLogin:(0,s.f0)({isConfirmToBusinessLogin:(e,t)=>t.isConfirmToBusinessLogin,isFirstLogin:e=>!1}),overwriteIsFirstLoginClose:(0,s.f0)({isFirstLoginNoticeClose:(e,t)=>t.isFirstLoginNoticeClose}),refreshPersonalWorkspace:(0,s.lW)(e=>{var t,i,r;return{type:"UPDATE_WORKSPACE",workspaceId:null!==(r=null===(i=e.userInfo)||void 0===i?void 0:null===(t=i.spaceInfo)||void 0===t?void 0:t.workspaceId)&&void 0!==r?r:""}}),initPassport:(0,s.f0)({passport:e=>{let{isBOE:t,appId:r}=e,n=null;return async()=>n?n:n=new(await Promise.resolve().then(i.bind(i,353808))).default({isBoe:t,aid:r})}}),initAgeGateWebId:e=>{let{ageGateChecker:t}=e;t.initAgeGateWebId()},initReporter:e=>{let{appId:t}=e;(0,ea.y)()&&t&&(0,ea.y)().init({aid:t})},updateRegion:(0,s.f0)({userInfo:(e,t)=>{let{userInfo:i}=e;return Object.assign(null!=i?i:{},{region:t.data.region,idc:t.data.idc,newIdc:t.data.newIdc,reqDomain:t.data.reqDomain})}}),updateLoggedInAuthorize:(0,s.f0)({loggedInAuthorize:()=>!0}),updateCcwebAutoLogin:(0,s.f0)({ccwebAutoLogin:()=>!0}),setNoSignInCb:(0,s.f0)({noSignInCb:(e,t)=>t.callback}),setRedirectToCb:(0,s.f0)({redirectToCb:(e,t)=>t.callback}),initChildrenMachine:(0,s.f0)({teamInviteRef:e=>{let{isBOE:t}=e;return(0,c.Cs)(e9.withContext({...e7(),isBOE:!!t}))},userInviteRef:e=>{let{inviteInfo:t}=e;return(0,c.Cs)(e4.withContext({isInvitePage:null==t?void 0:t.isInvitePage,invitedCode:null==t?void 0:t.invitedCode}))},thirdPartSignInRef:e=>{let{appId:t,accountConfig:i,isBOE:r,passport:n,inviteInfo:o,loginReportParams:a,showRestoreModal:s,isNewPageLoginFacebook:l,enableThirdPartySignAgeGate:d,ageGateChecker:u,enableDeviceAgeBan:p,signinGoogleWithPassportWindow:_,signinTiktokWithBindEmail:g}=e;return(0,c.Cs)(eX.withContext({enableThirdPartySignAgeGate:d,ageGateChecker:u,enableDeviceAgeBan:p,isNewPageLoginFacebook:l,showRestoreModal:s,isBOE:!!r,appId:t,accountConfig:i,isInvitePage:null==o?void 0:o.isInvitePage,invitedCode:null==o?void 0:o.invitedCode,passport:n,name:"",source:es.C.LoginIn,currentPage:null==a?void 0:a.currentPage,signinGoogleWithPassportWindow:_,signinTiktokWithBindEmail:g}))},emailSignInRef:e=>{let{isBOE:t,passport:i,inviteInfo:r}=e;return(0,c.Cs)(e0.Jt.withContext({...e0.Jt.context,isBOE:!!t,isInvitePage:null==r?void 0:r.isInvitePage,invitedCode:null==r?void 0:r.invitedCode,passport:i,email:"",password:"",birthday:"",ticket:""}))},newEmailSignInRef:e=>{let{isBOE:t,passport:i,inviteInfo:r,appId:n}=e;return(0,c.Cs)(tD.withContext({...e0.Jt.context,isBOE:!!t,isInvitePage:null==r?void 0:r.isInvitePage,invitedCode:null==r?void 0:r.invitedCode,passport:i,email:"",password:"",birthday:"",ticket:"",appId:n}))}}),setNoCareerCb:(0,s.f0)({noCareerCb:(e,t)=>t.callback}),setUserLoginedCb:(0,s.f0)({userLoginedCb:(e,t)=>t.callback}),stopEmailSignInActor:l.sT(e=>{let{emailSignInRef:t}=e;return t}),stopNewEmailSignInActor:l.sT(e=>{let{newEmailSignInRef:t}=e;return t}),changeContext:(0,s.f0)((e,t)=>(0,I.merge)({},e,t.context)),changeThirdPartSignInContext:(0,s.lW)((e,t)=>({type:"CHANGE_CONTEXT",context:t.context}),{to:e=>{let{thirdPartSignInRef:t}=e;return t}}),changeEmailSignInContext:(0,s.lW)((e,t)=>({type:"CHANGE_CONTEXT",context:t.context}),{to:e=>{let{emailSignInRef:t}=e;return t}}),changeNewEmailSignInContext:(0,s.lW)((e,t)=>({type:"CHANGE_CONTEXT",context:t.context}),{to:e=>{let{newEmailSignInRef:t}=e;return t}}),changeUserWorkSpaceInContext:(0,s.lW)((e,t)=>({type:"CHANGE_CONTEXT",context:t.context}),{to:"LvUserWorkspaceMachine"}),changeEmailSignInPartialContext:(0,s.lW)(e=>{let{loginReportParams:t}=e;return{type:"CHANGE_CONTEXT",context:{pageEnterFrom:null==t?void 0:t.pageEnterFrom,currentPage:null==t?void 0:t.currentPage}}},{to:e=>{let{emailSignInRef:t}=e;return t}}),changeNewEmailSignInPartialContext:(0,s.lW)(e=>{let{loginReportParams:t}=e;return{type:"CHANGE_CONTEXT",context:{pageEnterFrom:null==t?void 0:t.pageEnterFrom,currentPage:null==t?void 0:t.currentPage}}},{to:e=>{let{newEmailSignInRef:t}=e;return t}}),changeThirdPartCurrentPage:(0,s.lW)((e,t)=>{var i,r;let{loginReportParams:n}=e;return{type:"CHANGE_CONTEXT",context:{currentPage:null!==(r=null==t?void 0:null===(i=t.params)||void 0===i?void 0:i.currentPage)&&void 0!==r?r:null==n?void 0:n.currentPage}}},{to:e=>{let{thirdPartSignInRef:t}=e;return t}}),changeEmailCurrentPage:(0,s.lW)((e,t)=>{var i,r;let{loginReportParams:n}=e;return{type:"CHANGE_CONTEXT",context:{currentPage:null!==(r=null==t?void 0:null===(i=t.params)||void 0===i?void 0:i.currentPage)&&void 0!==r?r:null==n?void 0:n.currentPage}}},{to:e=>{let{emailSignInRef:t}=e;return t}}),changeNewEmailCurrentPage:(0,s.lW)((e,t)=>{var i,r;let{loginReportParams:n}=e;return{type:"CHANGE_CONTEXT",context:{currentPage:null!==(r=null==t?void 0:null===(i=t.params)||void 0===i?void 0:i.currentPage)&&void 0!==r?r:null==n?void 0:n.currentPage}}},{to:e=>{let{newEmailSignInRef:t}=e;return t}}),handleFetchLocationFail:e=>{let{onFetchLocationFail:t}=e;return t()},reportFetchLocationSuccess:e=>{let{fetchLocationReporter:t}=e;null==t||t.report({status:"success"})},reportFetchLocationFail:e=>{let{fetchLocationReporter:t}=e;null==t||t.report({status:"fail"})},consumeChangeWorkspaceCache:(0,s.f0)((e,t)=>{let{data:i}=t;return i.workspace_id?{changeWorkspaceEventCache:i.workspace_id}:{}}),restoreUpdateWorkspaceEventCache:(0,s.f0)({updateWorkspaceEventCache:(e,t)=>[...e.updateWorkspaceEventCache,t.workspaceId]}),storeLoginInfo:(0,s.f0)((e,t)=>{var i;return"SIGN_IN_SUCCESS"!==t.type?e:{isNewSignupUser:(null===(i=t.extra)||void 0===i?void 0:i.isNewSignupUser)||!1}}),reportLvrdCheckLoginTime:e=>{var t,i,r;null==e||null===(t=e.lvrdCheckLoginReporter)||void 0===t||t.report({endTime:Date.now()}),null==e||null===(r=e.lvrdCheckLoginReporter)||void 0===r||null===(i=r.resetOptions)||void 0===i||i.call(r)},updateWorkspaceDataFromChild:(0,s.f0)((e,t)=>{let{thirdPartyFileOpenCb:i,thirdPartyFileOpenCbCalled:r}=e,n=(0,I.omit)(t,["type"]),{workspaceList:o=[]}=t,a=!1,s=(0,ey.pf)("state"),l=(0,ey.pf)("file_id"),c=(0,ey.pf)(eo.g2.UTM_CAMPAIGN),d=(0,ey.pf)(eo.g2.UTM_SOURCE),u="googledrive"===c&&!r&&(null==s?void 0:s.length);return(u||"dropbox"===d&&l)&&(null==o?void 0:o.length)&&(null==i||i(u?er.gn.GoogleDrive:er.gn.Dropbox,o),a=!0),{...n,thirdPartyFileOpenCbCalled:a}}),forwardToUserCareer:(0,s.Tn)("LvUserCareerMachine"),forwardToUserWorkspace:(0,s.Tn)("LvUserWorkspaceMachine"),forwardToUserStatusListener:(0,s.Tn)("LvUserStatusListenerMachine"),signInWithAuthToken:(0,s.lW)((e,t)=>({type:"ADD_TASK",exec:async()=>{try{let e=await (0,Y.ko)({token:t.data.token,state:t.data.state,aid:t.data.aid});if("success"!==e.result)throw Error("sign in auth failure")}catch(r){var e,i;throw null===(e=(i=t.data).onFailure)||void 0===e||e.call(i,r),r}},successType:"SIGN_IN_WITH_AUTH_TOKEN_SUCCESS",failType:"SIGN_IN_WITH_AUTH_TOKEN_FAILURE"}),{to:e=>e.asyncFuncExecsRef}),saveUserFromSignUpStorage:e=>{let{isNewSignupUser:t,userInfo:i}=e;if(t&&(null==i?void 0:i.uid)){let e=`${en.g.GUIDE_FROM_SIGN_UP}_${null==i?void 0:i.uid}`;ef.m.setString(e,"true")}},getAllEverPhotoUser:(0,s.lW)(()=>({type:"ADD_TASK",exec:async()=>{var e,t;let i=await J.E.getAllEverPhotoUser();return null!==(t=null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.ever_photo_uids)&&void 0!==t?t:[]},successType:"GET_ALL_EVER_PHOTO_USER_SUCCESS"}),{to:e=>e.asyncFuncExecsRef}),saveAllEverPhotoUser:(0,s.f0)({everPhotoUsers:(e,t)=>t.data}),assignVipInfo:(0,s.f0)({vipInfo:(e,t)=>{let{data:i}=t;if((0,Q.EE)(i)){var r,n,o;return{__isDefault__:!1,flag:i.flag,vipRealEnd:null==i?void 0:i.end_time,subscribeType:null==i?void 0:i.subscribe_type,canFreeTrial:null==i?void 0:i.can_free_trial,canFreeTrialDays:null==i?void 0:i.can_free_trial_days,productId:null==i?void 0:i.product_id,subscribeCycle:null==i?void 0:i.subscribe_cycle,isFirstSubscribe:null==i?void 0:i.is_first_subscribe,isCancelSubscribe:null==i?void 0:i.is_cancel_subscribe,cycleUnit:null==i?void 0:i.cycle_unit,curVipLevel:null==i?void 0:i.cur_vip_level,curLevelEndTime:null==i?void 0:i.cur_level_end_time,expiredVipLevel:null==i?void 0:i.expired_vip_level,workspaceSubscribeInfo:(null==i?void 0:i.workspace_subscribe_info)?{flag:null==i?void 0:null===(r=i.workspace_subscribe_info)||void 0===r?void 0:r.flag,vipRealEnd:null==i?void 0:null===(n=i.workspace_subscribe_info)||void 0===n?void 0:n.vip_real_end}:void 0,vipLevels:null==i?void 0:null===(o=i.vip_levels)||void 0===o?void 0:o.map(e=>({level:e.level,beginTime:e.begin_time,endTime:e.end_time}))}}return{__isDefault__:!1,flag:i.flag,vipRealEnd:null==i?void 0:i.end_time,subscribeType:null==i?void 0:i.subscribe_type,canFreeTrial:null==i?void 0:i.can_free_trial,canFreeTrialDays:null==i?void 0:i.can_free_trial_days,productId:null==i?void 0:i.product_id,subscribeCycle:null==i?void 0:i.subscribe_cycle,isFirstSubscribe:null==i?void 0:i.is_first_subscribe,isCancelSubscribe:null==i?void 0:i.is_cancel_subscribe,cycleUnit:null==i?void 0:i.cycle_unit}}}),updateVipInfoReq:(0,s.lW)(e=>{let{useCommerceApiPC:t,pcContainerType:i}=e;return{type:"ADD_TASK",exec:()=>t?"common"===i?q.getSubscriptionUserInfo(!0):"graphic"===i?W.getSubscriptionUserInfo(!0):C.k.getSubscriptionUserInfo(!0):C.k.getSubscriptionUserInfo(!0),successType:"GET_VIP_INFO_SUCCESS"}},{to:e=>e.asyncFuncExecsRef}),updateIsInitialCheckLoginStatus:(0,s.f0)({isInitialCheckLoginStatus:()=>!1}),updateDefaultWorkspaceInfo:(0,s.f0)({userInfo:(e,t)=>{let{userInfo:i,defaultWorkspaceInfo:r}=t.data;return{...i,defaultSpaceInfo:r}}}),updateUserInfoStringify:e=>{try{let i="undefined"!=typeof __userInfoStringify?JSON.parse(__userInfoStringify):void 0;if(i){var t;let r=i.data.user_info;r&&(null===(t=e.userInfo)||void 0===t?void 0:t.defaultSpaceInfo)&&(r.default_space_info={space_host:e.userInfo.defaultSpaceInfo.spaceHost,space_id:e.userInfo.defaultSpaceInfo.spaceId,space_idc:e.userInfo.defaultSpaceInfo.spaceIdc,space_res_host:e.userInfo.defaultSpaceInfo.spaceResHost,workspace_id:e.userInfo.defaultSpaceInfo.workspaceId,space_type:e.userInfo.defaultSpaceInfo.spaceType,raw_space_type:e.userInfo.defaultSpaceInfo.rawSpaceType}),window.__userInfoStringify=JSON.stringify(i)}}catch(e){}},checkAgeGate:(e,t)=>{var i,r,n;let{ageGateChecker:o,userInfo:a}=e;o.start({errorCode:Number(null==t?void 0:null===(i=t.params)||void 0===i?void 0:i.errorCode),errorMsg:null==t?void 0:null===(r=t.params)||void 0===r?void 0:r.errorMsg,verifyTicket:null==t?void 0:null===(n=t.params)||void 0===n?void 0:n.verifyTicket,userInfo:a})},loopCheckAgeBanStatus:e=>{let{ageGateChecker:t,userInfo:i}=e,r=null==i?void 0:i.ageGateBirthday,n=["dreamina.capcut.com","commercepro.capcut.com","www.____________"];!function(e){if(!e)return!1;let t=new Date(e);if(isNaN(t.getTime()))return!1;let i=new Date,r=i.getFullYear()-t.getFullYear();return(i.getMonth()<t.getMonth()||i.getMonth()===t.getMonth()&&i.getDate()<t.getDate())&&r--,r>=14}(r)&&!n.includes(window.location.host)&&t.startLoopCheckBanStatus()},overWriteIsFirstLogin:async(e,t)=>{try{var i;await _.B.overWriteIsFirstLogin(null!==(i=e.appId)&&void 0!==i?i:Number(h.yM.APP_ID))}catch(e){console.error("\u8BF7\u6C42\u5931\u8D25",e)}},clearUrl:()=>{(0,ew.jc)(["state","file_id","imported_file_id","shop"])},handleUserStop:(e,t)=>{let{thirdPartyFileOpenStopCb:i}=e;t.cancel&&((0,ew.jc)(["state","file_id","imported_file_id"]),null==i||i("user_cancel_login"))},assignIsFirstLogin:(0,s.f0)({isFirstLogin:(e,t)=>t.data.isFirstLogin,isFirstLoginFromServer:(e,t)=>t.data.isFirstLoginFromServer,timeStampForCc4b:(e,t)=>t.data.timeStampForCc4b}),reportUserAccountBindInfo:e=>{let{passport:t}=e;t().then(e=>null==e?void 0:e.getAccountInfo()).then(e=>{if(e.connects){var t,i;let r=(0,ea.y)(),n=null!==(i=null===(t=r.getConfig())||void 0===t?void 0:t.custom)&&void 0!==i?i:{};e.connects.forEach(e=>{switch(e.platform){case"tiktok":n.is_link_tiktok=1;break;case"google":n.is_link_google=1;break;case"facebook":n.is_link_facebook=1}}),e.email&&(n.is_link_email=1),r.config({custom:n})}}).catch(e=>{console.error("\u8BF7\u6C42\u5931\u8D25",e)})}},guards:{isContinueToBusinessLogin:(e,t)=>{let{data:i}=t;return!!i.isFirstLogin},isInitWorkSpaceGuard:e=>!!e.isWorkSpaceInited,shouldFetchLocation:e=>{let{userInfo:t,shouldFetchLocation:i}=e;return!!i&&void 0===t},hasLocationCodeFromHtml:()=>"undefined"!=typeof __locationInfo,isValidLocationFromCheckingPharse:(e,t)=>{let{data:i}=t;return!(0,eL.z5)(e)&&!!i.region},isValidLocationFromBusinessCheckingPharse:(e,t)=>{let{data:i}=t;return(0,eL.z5)(e)&&!!i.region},isBusiness:e=>(0,eL.z5)(e),isNotBusiness:e=>!(0,eL.z5)(e),hasMultipleBusinessSubject:e=>e.businessInfo.organizationList.length>1,needShowGoogleDriveSign:()=>{let e=(0,ey.pf)(eo.g2.UTM_CAMPAIGN),t=(0,ey.pf)("state");return!!("googledrive"===e&&(null==t?void 0:t.length))},needShowThirdPartySign:()=>(0,ev.XK)()}})},462934:function(e,t,i){"use strict";i.d(t,{KC:function(){return o},LB:function(){return u},VG:function(){return _},W7:function(){return g},g4:function(){return l},nw:function(){return a},qf:function(){return p},z5:function(){return d},ze:function(){return c}});var r,n=i(474447);function o(){return"undefined"!=typeof window&&window.ip_location_info||null}var a=((r={}).Facebook="Facebook",r.Google="Google",r.TikTok="TikTok",r.ScanCode="ScanCode",r.TikTokLive="TikTokLive",r.Apple="Apple",r);let s={thirdPartyMap:{Facebook:{platformAppId:n._K.Facebook,clientKey:n.ye},Google:{platformAppId:n._K.Google,clientKey:n.wg},TikTok:{platformAppId:n._K.TikTok,clientKey:n.ow},ScanCode:{platformAppId:n._K.ScanCode},TikTokLive:{platformAppId:n._K.TikTokLive,clientKey:n.ow},Apple:{platformAppId:n._K.Apple,clientKey:n.u0}},boeThirdPartyMap:{Facebook:{platformAppId:n.Lt.Facebook,clientKey:n.XU},Google:{platformAppId:n.Lt.Google,clientKey:n.WN},TikTok:{platformAppId:n.Lt.TikTok,clientKey:n.jj},ScanCode:{platformAppId:n.Lt.ScanCode},TikTokLive:{platformAppId:n.Lt.TikTokLive},Apple:{platformAppId:n._K.Apple,clientKey:n.u0}}},l=(e,t,i)=>(null!=e?e:s)[i?"boeThirdPartyMap":"thirdPartyMap"][t].platformAppId,c=(e,t,i)=>(null!=e?e:s)[i?"boeThirdPartyMap":"thirdPartyMap"][t].clientKey,d=e=>"business"===e.loginMode,u={log_in:"go_to_login",sign_up:"go_to_signup",log_in_confirm:"login_confirm",sign_up_confirm:"signup_confirm",confirm_email:"",resend_email:"forgot_password_resend"},p=["confirm_birthday","signup_confirm_code","age_gate_continue","authorize_popup_show","forgot_password_confirm_email","forgot_password_confirm_code","privacy","terms"],_=["age_gate_continue","authorize_popup_show"],g={4:"empty string",6:"Something went wrong. Please try again later.",7:"Maximum number of attempts reached. Try again later.",24:"",999:"Something went wrong. Please try again later.",1009:"Username or password doesn't match our records. Try again.",1011:"Account doesn't exist",1019:"Username or password doesn't match our records. Try again.",1033:"Incorrect account or password. 5 attempts remaining. Try again.",1034:"Incorrect account or password trials limits. Try again in 30 minute.",1075:"Account is currently being deleted",1091:"Account is currently suspended",1399:"Incorrect account or password trials limits. Try again in 29 minute.",1902:""}},403209:function(e,t,i){"use strict";i.d(t,{m:function(){return u}});var r=i(772322);i(966156),i(784923);var n=i(368100),o=i(498417);i(218571);var a=i(568998),s=i(966090),l=i(280667),c=i(801497);let d=(e,t)=>{new s.S().report({action:e,current_page:null!=t?t:""})},u=e=>new Promise((t,i)=>{let s=n.Z.confirm({focusLock:!1,className:"lv_sign_in_panel_wide-restore-account",title:(0,r.jsxs)("div",{className:"lv_sign_in_panel_wide-restore-account-title",children:[(0,r.jsx)(a.rLP,{size:24,color:"#2668FF"}),c.ZP.t("web_deactivate_button_delete_restore",{},"Restore deleted account")]}),content:(0,r.jsx)("div",{className:"lv_sign_in_panel_wide-restore-account-content",children:c.ZP.t("web_deactivate_text_trying_sign_into",{},"You\u2019re trying to sign into a deleted account. By signing in, your account will be restored. If you don\u2019t restore the account, it will be permanently deleted in 30 days.")}),maskStyle:{zIndex:1103},wrapStyle:{zIndex:1103},onOk:async()=>{var r,n,a;d("restore",null==e?void 0:e.currentPage);try{s.update({okButtonProps:{loading:!0}}),await e.onOk(),s.close(),new l.g().report({status:"success",current_page:null!==(r=null==e?void 0:e.currentPage)&&void 0!==r?r:""}),t()}catch(t){o.Z.error("API error"),new l.g().report({status:"failed",current_page:null!==(n=null==e?void 0:e.currentPage)&&void 0!==n?n:"",fail_reason:null!==(a=null==t?void 0:t.description)&&void 0!==a?a:void 0}),i(t)}finally{s.update({okButtonProps:{loading:!1}})}},onCancel:()=>{var t;null==e||null===(t=e.onCancel)||void 0===t||t.call(e),d("cancel",null==e?void 0:e.currentPage)},okText:c.ZP.t("web_deactivate_button_restore_confirm",{},"Restore account"),cancelText:c.ZP.t("web_deactivate_button_cancel_restore",{},"Cancel"),okButtonProps:{type:"primary"},icon:null,closeIcon:(0,r.jsx)(a.bMz,{size:20,onClick:()=>{var t;null==e||null===(t=e.onCancel)||void 0===t||t.call(e),d("cancel",null==e?void 0:e.currentPage)}})})})},669698:function(e,t,i){"use strict";i.d(t,{O:function(){return s}});var r=i(733730),n=i(403622),o=i(462934);class a extends r.v{init(e){this._userService=e.userService}getRegion(){var e,t;return null===(t=this._userService.getSnapshot())||void 0===t?void 0:null===(e=t.context.userInfo)||void 0===e?void 0:e.region}getNewIdc(){var e,t;return null===(t=this._userService.getSnapshot())||void 0===t?void 0:null===(e=t.context.userInfo)||void 0===e?void 0:e.newIdc}getReqDomain(){var e,t;return null===(t=this._userService.getSnapshot())||void 0===t?void 0:null===(e=t.context.userInfo)||void 0===e?void 0:e.reqDomain}getUserInfo(){var e;return null===(e=this._userService.getSnapshot())||void 0===e?void 0:e.context.userInfo}getUserCloudInfo(){var e,t;let{context:i}=this._userService.getSnapshot();return{workspaceInfo:i.currentWorkspaceInfo,workspaceExpandInfo:i.workspaceExpandInfoMap[null!==(t=null===(e=i.currentWorkspaceInfo)||void 0===e?void 0:e.workspace_id)&&void 0!==t?t:""],workspaceExpandInfoMap:i.workspaceExpandInfoMap}}getAgeGateChecker(){return this._userService.getSnapshot().context.ageGateChecker}changeUserRegion(e){this._userService.send({type:"CHANGE_CONTEXT",context:{userInfo:{region:e,idc:(0,n.y)(e)}}})}logout(e){var t;null===(t=this._userService)||void 0===t||t.send({type:"SIGN_OUT",redirectUrl:e})}listenCareerStatus(e){let t=t=>{e(this._getUserCareer(t))};return this._userService.onTransition(t),()=>{this._userService.off(t)}}listenLoginStatus(e){let t=t=>{e({hasSign:this._userHasSign(t)})};return this._userService.onTransition(t),()=>{this._userService.off(t)}}listenLoginOut(e){let t=t=>{var i;let r=null==t?void 0:null===(i=t.children)||void 0===i?void 0:i.LvUserStatusListenerMachine;r&&r.getSnapshot().matches("destroy")&&(null==e||e())};return this._userService.onTransition(t),()=>{this._userService.off(t)}}listenUserWholeStatus(e){let t=t=>{var i,r;let n=this._userHasSign(t),a=this._getUserCareer(t);e({hasSign:n,vipInfo:null===(i=t.context)||void 0===i?void 0:i.vipInfo,workspaceExpandInfoMap:null===(r=t.context)||void 0===r?void 0:r.workspaceExpandInfoMap,noSign:t.matches("noSign"),careerStatus:a.status,career:a.career,initFailed:(0,o.z5)(t.context)?t.matches("loginOrganizationFail"):t.matches("fetchLocationFail")})};return this._userService.onTransition(t),()=>{this._userService.off(t)}}listenVipInfo(e){let t=t=>{var i;e(null===(i=t.context)||void 0===i?void 0:i.vipInfo)};return this._userService.onTransition(t),()=>{this._userService.off(t)}}_userHasSign(e){var t,i,r;return(0,o.z5)(e.context)?(null===(i=e.context)||void 0===i?void 0:i.businessUserInfo)&&Object.prototype.hasOwnProperty.call(null===(r=e.context)||void 0===r?void 0:r.businessUserInfo,"business_user_info"):(null===(t=e.context)||void 0===t?void 0:t.userInfo)&&Object.prototype.hasOwnProperty.call(e.context.userInfo,"uid")&&Object.prototype.hasOwnProperty.call(e.context.userInfo,"region")}_getUserCareer(e){var t,i,r,n;if(e.matches("noSign"))return{status:void 0,career:""};let o=null==e?void 0:null===(t=e.children.LvUserCareerMachine)||void 0===t?void 0:t.getSnapshot();return(null==o?void 0:o.matches("hasCareer"))&&(null===(r=e.context)||void 0===r?void 0:null===(i=r.userInfo)||void 0===i?void 0:i.career)?{status:!0,career:e.context.userInfo.career}:(null==o?void 0:o.matches("noCareer"))?{status:!1,career:(null===(n=e.context.userInfo)||void 0===n?void 0:n.career)||""}:{status:void 0,career:""}}}let s=new a},406617:function(e,t,i){"use strict";i.d(t,{EW:function(){return l},S7:function(){return o},ZJ:function(){return s}});var r=i(827322),n=i(914028);let o=e=>{let t=navigator.userAgent.toLowerCase(),{mobile:i,name:r,version:o,os:a=""}=(0,n.Z)(e),s=navigator.maxTouchPoints||NaN,l=navigator.platform||"";return{env:i?"mobile":"pc",name:r,version:o,isMobile:!!i,isWechat:/micromessenger/.test(t),isQQ:/qq/.test(t),isWeibo:/weibo/.test(t),isLv:/lv/.test(t),isAndroid:/android/.test(t),isIos:/ios/.test(a)||/iPad|iPhone|iPod/i.test(t)||/MacIntel/i.test(l)&&s>1,isMac:/macintosh|mac os x/i.test(a.toLowerCase())||/os x /i.test(a.toLowerCase()),isWin:/windows|win32|win64/i.test(a.toLowerCase()),isPC:/capcut_pc/.test(t)}},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(-1!==(e.indexOf("Opera")||e.indexOf("OPR")))return"Opera";if(-1!==e.indexOf("Edg"))return"Edge";if(-1!==e.indexOf("Chrome"))return"Chrome";else if(-1!==e.indexOf("Safari"))return"Safari";else if(-1!==e.indexOf("Firefox"))return"Firefox";else if(-1!==e.indexOf("MSIE"))return"IE";else return"unknown"},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{mobile:t,os:i=""}=(0,n.Z)(e),r=a(e);return{env:t?"mobile":"pc",isMobile:!!t,isAndroid:/android/i.test(e),isIos:/ios/i.test(i)||/iPad|iPhone|iPod|Mac OS X/i.test(e||i),isMac:/macintosh|mac os x/i.test(i.toLowerCase())||/os x /i.test(i.toLowerCase()),isWin:/windows|win32|win64/i.test(i.toLowerCase()),isLinux:/Ubuntu Chromium/i.test(i)||/Linux|X11/i.test(e),isCros:/Chrome OS/i.test(i)||/CrOS/i.test(e),browserType:r}},l=(e,t)=>{let i=document.createElement("a");i.download=t,i.href=(0,r.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),i.click(),i.style.display="none",i.remove()}},177634:function(e,t,i){"use strict";i.d(t,{I:function(){return n}});var r=i(786377);class n{static getString(e){return r.Z.get(e)}static setString(e,t,i){r.Z.set(e,t,{expires:i?new Date(i):void 0})}static getJson(e){let t=r.Z.get(e),i=null;if(!t)return null;try{i=JSON.parse(t)}catch(e){console.error("CookiesTool JSON parse Error:",e)}return i}static removeItem(e){r.Z.remove(e)}}},560439:function(e,t,i){"use strict";i.d(t,{G3:function(){return l},aD:function(){return s}});var r=i(722169),n=i(801497),o=i(783055),a=i(726672);function s(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(function(e){t.push(`${i}=${e}`)}):t.push(`${i}=${r}`)}),t.join("&")}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=function(e){let t={};return e.slice(e.indexOf("?")+1).split("&").filter(e=>!!e).map(e=>{let[i,r]=e.split("=");t[i]=r}),t}((0,a.Jx)()),d=(0,r.omit)({...l,...c,...t},i),u=e,p="";try{let t=new URL(e);u=t.pathname,p=t.origin}catch(e){}for(let e in d)!d[e]&&delete d[e];let _=s(d),g=u;n.ZP.language&&(g=o.uL.formatRoutePath({path:u,locale:n.ZP.language}));let[,h]=e.split("?");return h&&(_=`${h}&${_}`),`${p}${g}${_?"?":""}${_}`}},458802:function(e,t,i){"use strict";i.d(t,{AR:function(){return _},kw:function(){return g}});var r=i(41723),n=i.n(r),o=i(328449),a=i.n(o),s=i(317851),l=i.n(s),c=i(79611),d=i.n(c),u=i(801497);n().extend(a()),n().extend(l()),n().extend(d());let p=()=>["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].map(e=>e?u.oc.t(e):e);function _(e){return n()(e).isLeapYear()}function g(e,t){if(!e)return"";let{hideSameYear:i=!0,showTime:r=!1}=t||{},o=p(),a=n()(e),s=n()().isSame(a,"year"),l=a.date(),c=a.month(),d=a.year(),u=`${o[c]} ${l}`;return(!i||!s)&&(u+=`, ${d}`),r&&(u+=` ${a.format("HH:mm")}`),u}},795640:function(e,t,i){"use strict";function r(e){var t,i,r,n;let o=window.__locationCountryCode||(null===(i=window.ip_location_info)||void 0===i?void 0:null===(t=i.Country)||void 0===t?void 0:t.Code),{blockCountryCodes:a,enable:s}=(null===(n=window.__tcc__)||void 0===n?void 0:null===(r=n.dsr_config)||void 0===r?void 0:r[e])||{};return!!(s&&(null==a?void 0:a.includes(o)))}i.d(t,{_:function(){return r}})},759381:function(e,t,i){"use strict";function r(){return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement}i.d(t,{j:function(){return r}})},733458:function(e,t,i){"use strict";i.d(t,{m:function(){return n}});var r=i(3767);class n{static getString(e){return"undefined"!=typeof window&&navigator.cookieEnabled?localStorage.getItem(e):null}static setString(e,t){if("undefined"!=typeof window&&!!navigator.cookieEnabled)return localStorage.setItem(e,t)}static getJsonWithEmptyJson(e){let t;try{let i="undefined"!=typeof localStorage&&localStorage.getItem(e)||"{}";t=JSON.parse(i)}catch(e){r.W.error("LocalStorage-getJsonWithEmptyJson()",e)}return t}static getJson(e){let t;if("undefined"==typeof window||!navigator.cookieEnabled)return;let i="undefined"!=typeof localStorage&&localStorage.getItem(e);if(!!i){try{t=JSON.parse(i)}catch(e){r.W.error("localStorage-parse(origin)",e)}return t}}static setJson(e,t){if("undefined"!=typeof window&&!!navigator.cookieEnabled)try{localStorage.setItem(e,JSON.stringify(t))}catch(e){r.W.error("localStorage-set",e)}}static getNestedJsonItem(e,t){var i;return null!==(i=this.getJsonWithEmptyJson(e)[t])&&void 0!==i?i:{}}static setNestedJsonItem(e,t,i){var n;let o=this.getJsonWithEmptyJson(e),a=null!==(n=o[t])&&void 0!==n?n:{},s={...o,[t]:{...a,...i}};try{this.setJson(e,s)}catch(e){r.W.error("localStorage-set",e)}}static removeItem(e){if("undefined"!=typeof window&&!!navigator.cookieEnabled)localStorage.removeItem(e)}}},4597:function(e,t,i){"use strict";i.d(t,{NY:function(){return s},gB:function(){return o},pf:function(){return a}});var r=i(827322),n=i(726672);function o(e,t){let i=new URLSearchParams((0,n.Jx)());Object.entries(null!=t?t:{}).forEach(e=>{let[t,r]=e;i.set(t,r)});let o=i.toString();location.href=(0,r.C)(`${location.origin}${e}${o?`?${o}`:""}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})}function a(e){return new URLSearchParams((0,n.Jx)()).get(e)}let s=e=>{let t=new URLSearchParams((0,n.Jx)());for(let r in e){var i;t.set(r,e[r]),"object"==typeof(null===(i=window.location)||void 0===i?void 0:i.originParams)&&(window.location.originParams[r]=e[r])}let r=`${window.location.href.split("?")[0]}?${t.toString()}`;history.replaceState("",document.title,r)}},403622:function(e,t,i){"use strict";i.d(t,{y:function(){return n}});var r=i(216158);function n(e){return[r.yp.US,r.yp.BR].find(t=>t===e)?r._s.VA:r._s.GCP}},9894:function(e,t,i){"use strict";function r(){return"_____________"}i.d(t,{vK:function(){return r}})},352998:function(e,t,i){"use strict";i.d(t,{GT:function(){return s},pk:function(){return l}});var r=i(515549),n=i(306224);let o=e=>e%1==0,a=(e,t)=>{if(!o(e)||!o(t))return;if(e<=0||t<=0)return;let i=t;if(1!==e&&1!==t)for(let r=i;r>=2;r--)e%r==0&&t%r==0&&(e/=r,t/=r);return`${e}:${t}`},s=(e,t)=>{if(e<=0||t<=0)return;let i=[9/16,16/9,4/3,1,3/4,2,.8],r=["9:16","16:9","4:3","1:1","3:4","2:1","4:5"],n=i.findIndex(i=>e/t===i);if(-1===n){let r=i.map(i=>Math.abs(e/t/i-1)),o=Math.min(...r);o<.1&&(n=r.indexOf(o))}return r[n]?r[n]:a(e,t)},l=e=>e===n.AF?r.zw.WebPublish:void 0},340792:function(e,t,i){"use strict";i.d(t,{XK:function(){return o},_z:function(){return a}});var r=i(465930),n=i(4597);let o=()=>{var e,t;let i=(0,n.pf)(r.g2.UTM_SOURCE)||(null===(e=window.location.originParams)||void 0===e?void 0:e.utm_source),o=(0,n.pf)("shop")||(null===(t=window.location.originParams)||void 0===t?void 0:t.shop)||"";return!!("shopify"===i&&o)},a=()=>{var e,t;let i=(0,n.pf)("shop")||(null===(e=window.location.originParams)||void 0===e?void 0:e.shop)||"",r=(0,n.pf)("product_id")||(null===(t=window.location.originParams)||void 0===t?void 0:t.product_id)||"";return{accountId:i,productId:r?`gid://shopify/Product/${r}`:""}}},77695:function(e,t,i){"use strict";i.d(t,{R0:function(){return s},io:function(){return l}});var r=i(827322),n=i(93420),o=i(722169);let a="web_editor";async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;try{var i,r,s,l;let{data:c}=await n.Z.get("https://sf16-tcc-tos-va.byteoversea.com/obj/tcc-config-web-maliva/tcc-v2-data-ies.lvweb_os.platform_index-default"),d=JSON.parse(null!==(r=null==c?void 0:null===(i=c.data)||void 0===i?void 0:i.footerHeaderAndLinks)&&void 0!==r?r:"{}"),u=(e,t)=>(0,o.get)(d,`bee_dsrc_11969[0].${t}_${e}`,{}),p=e=>(0,o.get)(e,t,(0,o.get)(e,a,"")),_={pkg:p(u("pkg","mac")),installer:null!==(s=p(u("download_installer","mac")))&&void 0!==s?s:""},g={pkg:p(u("pkg","windows")),installer:null!==(l=p(u("download_installer","windows")))&&void 0!==l?l:""};return e?_:g}catch(e){return console.error("Failed to fetch download links:",e),{pkg:"",installer:""}}}let l=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"capcut_installer";try{let n;let o=await fetch(e),a=await o.blob(),s=e.match(/([^/]+)$/);n=s&&s[1]?s[1]:`${i}.${t?"dmg":"exe"}`;let l=URL.createObjectURL(a),c=document.createElement("a");c.href=(0,r.C)(l,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),c.download=n,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)}catch(e){console.error(`Error during download: ${e}`)}}},726672:function(e,t,i){"use strict";i.d(t,{Jx:function(){return n},jc:function(){return o}});var r=i(560439);let n=()=>{let e="";if("undefined"!=typeof window){var t;e=(null===(t=window.location)||void 0===t?void 0:t.originParams)||location.search}return"object"==typeof e&&(e=(0,r.aD)(e)),e},o=e=>{if(Array.isArray(e)){var t,i;let r=new URLSearchParams(null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.search);for(let t of e)r.delete(t),window.location.originParams&&delete window.location.originParams[t];let n=`${window.location.href.split("?")[0]}?${r.toString()}`;history.replaceState("",document.title,n)}}},528426:function(e,t,i){"use strict";i.d(t,{$B:function(){return l},Bm:function(){return a},XD:function(){return o},be:function(){return s},hN:function(){return c}});var r=i(3767);let n=["/webmssdk","/environments/assets/shortcut","draftPreview"];function o(e){if("undefined"!=typeof window)try{(null==e?void 0:e.isReportUserInfoInvalid)===!1&&(window.isReportUserInfoInvalid=!1);let t=window.__userInfoStringify,i=void 0!==t?JSON.parse(t):void 0;if(i&&"0"===i.ret)return i.data;return}catch(e){return}}function a(){try{let e="undefined"!=typeof __businessUserInfoStringify?JSON.parse(__businessUserInfoStringify):void 0;if(e&&"0"===e.ret)return e.data;return}catch(e){return}}let s=()=>{if("undefined"==typeof window||"boolean"==typeof window.isUserInfoInvalid)return;window.isUserInfoInvalid=!0;let e=window.__userInfoStringify;Object.defineProperty(window,"__userInfoStringify",{get:()=>{if(window.isUserInfoInvalid){var t,i,o,a,s,l,c,d;if(!1===window.isReportUserInfoInvalid)return window.isReportUserInfoInvalid=!0,e;let u=Error(""),{stack:p}=u;if(p&&n.some(e=>JSON.stringify(p).includes(e)))return e;let _=null!==(l=null==p?void 0:null===(t=p.split)||void 0===t?void 0:t.call(p,"\n"))&&void 0!==l?l:[],g=null!==(c=null===(o=_[1])||void 0===o?void 0:null===(i=o.split)||void 0===i?void 0:i.call(o,"/"))&&void 0!==c?c:[],h=null!==(d=null===(s=_[2])||void 0===s?void 0:null===(a=s.split)||void 0===a?void 0:a.call(s,"/"))&&void 0!==d?d:[],m=g.length?g[g.length-1]:"",v=h.length?h[h.length-1]:"";console.log("\u8BFB\u53D6__userInfoStringify\u65F6\u5E8F\u9519\u8BEF\uFF01",p),r.W.error(`InvalidGetUseInfo ${m}<-${v}`,u,{toGroup:"true"})}return e},set:t=>{e=t}})},l=()=>{if("undefined"!=typeof window)return window.__uid_sha},c=()=>"undefined"!=typeof window&&!!(window.__looki_uid&&window.__enable_looki_uid)},784126:function(e,t,i){"use strict";i.d(t,{Op:function(){return c},Ts:function(){return a},cx:function(){return l}});var r=i(517818),n=i(752742);let o=[n.EI.SELF_CREATE,n.EI.WEB_CONVERT];function a(e){return(null==e?void 0:e.role)===r.YP.owner&&o.includes(null==e?void 0:e.space_type)}function s(e){return function(t){if(t)return t.role===r.YP.owner?t[e]:3}}let l=s("raw_space_type"),c=s("space_type")},532653:function(e,t,i){"use strict";i.d(t,{$$:()=>e6,$R:()=>m});class r{setAxiosInstances(e){this.axiosInstances=e}}var n,o,a,s,l,c,d,u,p,_=i("139305"),g=i("756024");let h="custom-host-name-type",m="need-x-lvweb-idc-header";var v=i("93420"),f=i("818398"),y=i.n(f);class w{static get apiSetting(){return w._apiSetting}static setApiSetting(e){w._apiSetting=e,w.commonInterceptor.updateApiSetting(e)}addInterceptor(e){return Array.isArray(e)?this._interceptors.push(...e):this._interceptors.push(e),this}setDefaultConfig(e){return this._defaultConfig=null!=e?e:{},this}useJsonBigTransformResponse(){var e,t;return this._defaultConfig={...this._defaultConfig,transformResponse:[...Array.isArray(null===(e=this._defaultConfig)||void 0===e?void 0:e.transformResponse)?null===(t=this._defaultConfig)||void 0===t?void 0:t.transformResponse:[],e=>{try{return y().parse(e)}catch(t){return{data:e}}}]},this}build(){let e=v.Z.create(this._defaultConfig);return this._applyInterceptors(e),e}_applyInterceptors(e){for(let t of[...this._interceptors,...this._baseInterceptors])t.axiosInstances=e,t.request&&e.interceptors.request.use(t.request.onFulfilled,t.request.onRejected,t.request.options),t.response&&e.interceptors.response.use(t.response.onFulfilled,t.response.onRejected,t.response.options)}constructor(){this._interceptors=[],this._baseInterceptors=[w.commonInterceptor]}}w.commonInterceptor=new class e extends r{updateApiSetting(e){this._setting=e}constructor(...e){super(...e),this.request={onFulfilled:async e=>{var t,i;let r=!!(null===(t=e.baseURL)||void 0===t?void 0:t.startsWith("https")),n=e[h]||_.b_.Default,o=null===(i=e[m])||void 0===i||i;if(!r){let t=!1;setTimeout(()=>{!t&&g.t.error(`current request${e.url} is blocking by route. Please check`)},2e3);let i=await this._setting.getRequestDomain({type:n});t=!0,e.baseURL=i}let a={loc:await this._setting.getUserRegion(),...e.headers,"x-lvweb-idc":this._setting.userIDC};return!o&&delete a["x-lvweb-idc"],Object.assign(e,{headers:a,withCredentials:!0}),e}}}};var b=i("789786");class S extends r{constructor(...e){super(...e),this.response={onFulfilled:e=>{if(200!==e.status)return Promise.reject(e);let{data:t}=e;return"0"!==t.ret?Promise.reject(t):t.data}}}}let C="5.8.0",k="feed",E={GetCategories:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/get_collections"},GetTemplatesAccordCategory:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/get_collection_templates"},GetRecentList:{hostNameType:_.b_.Default,url:"/lv/v1/editor/template/recent_list"},ReportRecently:{hostNameType:_.b_.Default,url:"/lv/v1/editor/use_report"},GetTemplateDetail:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/get_template_detail"},GetTemplateHotWords:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/replicate/get_search_words"},SearchTemplates:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/replicate/search_templates"},GetAllTemplateRatio:{HostNameType:_.b_.Default,url:"https://sf16-muse-va.ibytedtos.com/obj/ies-fe-bee-maliva/bee_prod/biz_49/bee_prod_49_bee_publish_709.json"},GetTemplateScenes:{HostNameType:_.b_.Default,url:"https://sf16-muse-va.ibytedtos.com/obj/ies-fe-bee-maliva/bee_prod/biz_149/bee_prod_149_bee_publish_835.json"},GetBatchCategories:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/get_categories"},GetBatchTemplatesByCategory:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/batch_get_collection_templates"},GetPresets:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/get_collection_presets"},GetPresetDetail:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/preset_template_detail"},PostDeletePresetsTemplate:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/del_presets_template"},FuzzySearchTemplateByTitle:{hostNameType:_.b_.Default,url:"/lv/v1/cc_web/plane/fuzzy_search_templates"}},I={0:[0],1:[1],2:[2],3:[3],4:[4],">4":[5,1e4]};var P=i("998498"),A=i.n(P);function R(e){let{url:t,pf:i,appvr:r,tdid:n}=e,o=Math.floor(Date.now()/1e3);return{sign:A()(`9e2c|${t.slice(-7)}|${i}|${r}|${o}|${n}|11ac`).toLowerCase(),"device-time":o}}class x extends r{constructor(...e){super(...e),this.request={onFulfilled:e=>{var t;let i={...R({url:null!==(t=e.url)&&void 0!==t?t:"",pf:"7",appvr:C,tdid:""}),"sign-ver":1,pf:"7",appvr:C};return Object.assign(e,{headers:{...e.headers,...i}}),e}}}}var N=i("801497");let L="browser",O="_____________",M=`https://capcut-web-va.${O}`,D=null!==(d=null===(c=i.g.location)||void 0===c?void 0:c.host.startsWith("capcut-os."))&&void 0!==d&&d,j={SaveDraftUrl:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane_draft/save"},GetDraftUrl:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane_draft/get_draft_detail"},GetTemplateUrl:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane_draft/get_template_detail"},SyncDraftOpenTime:{hostNameType:_.b_.Default,url:"/cc/v1/workspace/sync_file_open_time"},SyncSaveToken:{hostNameType:_.b_.Default,url:"/lv/v1/editor/draft/get_version_list"},PublishAsTemplate:{hostNameType:_.b_.Default,url:`${D?M:"https://edit-api-va.capcut.com"}/lv/v1/editor/template/add`},CheckPublishTemplatePermission:{hostNameType:_.b_.Default,url:"/lv/v1/editor/template/check_post_permission"},DraftOpenReport:{hostNameType:_.b_.Default,url:"/lv/v1/event/report"},GetTemplateFile:{hostNameType:_.b_.Default,url:"/lv/v1/editor/draft/get_template_file"}};i("375302");let F=Symbol("reflect_metadata_api:name");function U(e){return function(t,i,r){if(!!r.value)return Reflect.defineMetadata(F,null!=e?e:i.toString(),t,i.toString()),r}}class B{static getInstance(){return!B._instance&&(B._instance=new B),B._instance}registerApi(e){let t=Object.getPrototypeOf(e);for(let[i,r]of Object.getOwnPropertyNames(t).filter(e=>"function"==typeof t[e]&&"constructor"!==e).map(e=>{let i=Reflect.getMetadata(F,t,e);return[e,i]}).filter(e=>!!e[1])){let n=t[i];this._apiMethodMap.set(r,{name:i,method:n.bind(e)})}}getApiMethod(e){let t=this._apiMethodMap.get(e);return null==t?void 0:t.method}constructor(){this._apiMethodMap=new Map}}var H=i("293698");let G="custom-axios-retry";function W(e){let t=(null==e?void 0:e[G])||{};return t.retryCount=t.retryCount||0,t}class V extends r{constructor(e){super(),this.request={onFulfilled:e=>{let t=W(e);return t.lastRequestTime=Date.now(),e[G]=t,e}},this.response={onRejected:e=>{let{config:t}=e;if(!t)return Promise.reject(e);let{retries:i=1,isRetry:r=()=>!0,retryDelay:n=200,resetTimeout:o=!0}={...this._retryOptions,...null==t?void 0:t[G]},a=W(t);if((r(t.url,e)||a.canRetry)&&a.retryCount<i){var s,l;a.retryCount+=1;let i="number"==typeof n?n:n(a.retryCount,e);if(s=this.axiosInstances,l=t,s.defaults.agent===l.agent&&delete l.agent,s.defaults.httpAgent===l.httpAgent&&delete l.httpAgent,s.defaults.httpsAgent===l.httpsAgent&&delete l.httpsAgent,!o&&t.timeout&&a.lastRequestTime){let e=Date.now()-a.lastRequestTime;t.timeout=Math.max(t.timeout-e-i,1)}return t.transformRequest=[e=>e],new Promise(e=>setTimeout(()=>e(this.axiosInstances(t)),i))}return Promise.reject(e)}},this._retryOptions=e}}var Z=i("134429");let z=Z.$U,$=Z.f4,K={method:"POST",headers:{"Content-Type":"application/json","app-sdk-version":z}};var q=i("320271");q.hm.SalesSticker,q.hm.SalesFont,q.hm.SalesTextTemplate,q.hm.Svg,q.hm.SalesFrame,q.hm.SalesFilter,q.hm.SalesImageEffect,q.hm.AIBackground;var Y=((n={}).ImageEditor="image_editor",n.BatchImageEditor="batch_image_editor",n);let J={ReportRecently:{hostNameType:_.b_.Default,url:"/lv/v1/editor/use_report"}},Q="5.8.0";var X=i("234075"),ee=i.n(X);let et=e=>{switch(e){case q.U_.TextTemplate:return 49;case q.U_.Flower:return 41;default:return 71}},ei=e=>{var t;if(!e)return"";let i=null===(t=e.ImageURLList)||void 0===t?void 0:t.map(e=>({width:e.Width,height:e.Height,url:e.URL}));return{imageWidth:e.ImageWidth,imageHeight:e.ImageHeight,imageUrlList:i,uri:e.URI,url:e.URL,md5:e.Md5}},er=e=>(null==e?void 0:e.length)?e.map(e=>{var t;let i=null===(t=e.ImageURLList)||void 0===t?void 0:t.map(e=>({width:e.Width,height:e.Height,url:e.URL}));return{imageWidth:e.ImageWidth,imageHeight:e.ImageHeight,imageUrlList:i,uri:e.URI,url:e.URL,md5:e.Md5,imageSize:e.ImageSize,path:e.Path,name:e.Name,mime:e.Mime,imageFormat:e.ImageFormat}}):[],en=(e,t)=>{var i,r,n,o;let a=Object.values(e.ModelNames?JSON.parse(e.ModelNames):{}).reduce((e,t)=>[...e,...t],[]),s={md5:e.FileUrl.Uri,url:e.FileUrl.UrlList[0],name:e.Name,previewUrl:e.IconUrl.UrlList[0],animatedUrl:e.IconUrl.UrlList[0],metaType:et(e.Panel),effectId:e.EffectId.toString(),resourceId:e.ResourceId.toString(),relatedId:"",sourcePlatform:0,requirements:e.Requirements,modelNames:a,isBusiness:!1,author:"",duration:0,extra:{},sdkExtra:{},contentJSON:e.ContentJson,contentFile:e.ContentFile,dependency:(null===(i=e.DependResourceList)||void 0===i?void 0:i.map(e=>{let{ResourceId:t,...i}=e;return{...i,ResourceId:t.toString()}}))||[],panel:e.Panel,stickerImage:ei(e.StickerImage),reportTimestamp:null!==(n=e.UseReportMs)&&void 0!==n?n:Date.now(),childEffects:null===(r=e.ChildEffects)||void 0===r?void 0:r.map(e=>en(e)),sdkVersion:e.SdkVersion,imageFiles:er(e.ImageFiles),tags:e.Tags};try{let t=/^[{].*[}]$/.test(e.Extra)?e.Extra:"{}";s.extra=JSON.parse(t)}catch(e){}try{let t=/^[{].*[}]$/.test(e.SdkExtra)?e.SdkExtra:"{}";s.sdkExtra=JSON.parse(t)}catch(e){}if(Object.keys(s.extra).length>0){let{Resources:i,canvas_cover:r,video_duration:n,hover_icon:a,preview_cover:l,track_thumbnail:c,is_business:d,web_icon:u}=s.extra;if(d&&(s.isBusiness=!0),n&&(s.duration=1e3*n),void 0===t&&(null===(o=e.FileUrl)||void 0===o?void 0:o.UrlList.length)>0&&(t=ee().dirname(e.FileUrl.UrlList[0])),(a||l||c)&&(s.previewUrl=`${t}/${a||l||c}`),u&&(s.previewUrl=`${t}${u}`),i||r){let e=i||r;s.md5=ee().basename(e,ee().extname(e)),s.url=`${t}/${e}`}}return s},eo=e=>{var t,i;let[r,n]=null!==(t=e.image.large_images)&&void 0!==t?t:[],{id:o,effect_id:a,source:s,title:l,copyright:c,is_business:d,aspect_ratio:u}=e.common_attr;return{resourceId:o,effectId:a,source:s,cardUrl:null==r?void 0:r.image_url,width:null==r?void 0:r.width,height:null==r?void 0:r.height,previewUrl:null==n?void 0:n.image_url,orderInfo:e.order_info,title:l,copyrightName:null!==(i=null==c?void 0:c.copyright_text)&&void 0!==i?i:"Deposit",artistName:null==c?void 0:c.artist_name,copyrightLogo:null==c?void 0:c.copyright_logo,previewWidth:null==n?void 0:n.width,previewHeight:null==n?void 0:n.height,isCommercial:d,aspectRatio:u}},ea=(e,t)=>e.map(e=>t?{...eo(e),...t}:eo(e)),es=e=>{var t;let[i]=null!==(t=e.image.large_images)&&void 0!==t?t:[],[r]=e.common_attr.item_urls,{id:n,effect_id:o,source:a,title:s,copyright:l,is_business:c,aspect_ratio:d}=e.common_attr;return{resourceId:n,effectId:o,source:a,cardUrl:i.image_url,width:i.width,height:i.height,previewUrl:r,orderInfo:e.order_info,title:s,copyrightName:null==l?void 0:l.copyright_text,artistName:null==l?void 0:l.artist_name,copyrightLogo:null==l?void 0:l.copyright_logo,isCommercial:c,aspectRatio:d}},el=(e,t)=>e.map(e=>t?{...es(e),...t}:es(e)),ec=e=>{let{common_attr:t}=e;return t.source===_.iJ.TuChong?es(e):eo(e)},ed=e=>({GET_CATEGORY_EFFECTS:{HostNameType:_.b_.Default,url:"/lv/v1/effect/get_category_effects"},GET_RECENT_LIST:{HostNameType:_.b_.Default,url:"/lv/v1/editor/effect/recent_list"},GET_EFFECTS_BY_RES_ID:{HostNameType:_.b_.Default,url:"/lv/v1/effect/batch_by_resource"},GET_LOKI_CATEGORY_BY_ID:{HostNameType:_.b_.Default,url:"/lv/v1/effect/get_panel_info"},GET_LOKI_ALL_FONT:{HostNameType:_.b_.Default,url:"/lv/v1/effect/get_all_fonts"}})[e],eu=e=>{let{category:t,limit:i,offset:r,sortingPosition:n,panel:o}=e;return{panel:o,sortingPosition:n,category:t,limit:i,offset:r,album_resource_id:e.albumResourceId,enable_album:e.enableAlbum,album_size_limit:e.albumSizeLimit,hasChildrenCategory:e.hasChildrenCategory}},ep=new class e{switchLokiPanelRegion(e){this.hasDependencyCN=e}async sendRecentMaterialItem(e){let{url:t,hostNameType:i}=J.ReportRecently,r={...e};this._service.interceptors.request.use(e=>(e.headers={...e.headers,...R({url:`${location.origin}${e.url}`,pf:"7",appvr:Q,tdid:""}),"app-sdk-version":z,"sign-ver":1,pf:"7",appvr:Q},e));let{ret:n,errmsg:o,svr_time:a,log_id:s}=await this._service({url:t,data:r,[h]:i});return{ret:n,errMsg:o,svrTime:a,logId:s}}async getEffectsByResourceIds(e,t){var i;let{url:r,hostNameType:n}=ed("GET_EFFECTS_BY_RES_ID"),o={appVersion:z,sdkVersion:$,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),enter_from:null!=t?t:Y.ImageEditor,list:e.map(e=>({...e,appVersion:z}))};return null===(i=(await this._service({url:r,data:o,[h]:n})).data)||void 0===i?void 0:i.map(e=>en(e))}async fetchMaterialRecentList(e){let{url:t,hostNameType:i}=ed("GET_RECENT_LIST"),r={...e,app_version:z,sdk_version:$,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()},{has_more:n,new_cursor:o,item_list:a=[],artist_item_list:s=[]}=(await this._service({url:t,data:r,[h]:i})).data,l=null==s?void 0:s.map(e=>({...ec(e),reportTimestamp:e.UseReportMs}));return{list:null==a?void 0:a.map(e=>en(e)),cursor:o,hasMore:n,photoList:l}}async fetchCategoryEffectsAll(e){var t;let{url:i,hostNameType:r}=ed("GET_CATEGORY_EFFECTS"),{CategoryEffects:{Effects:n,Cursor:o,HasMore:a,SortingPosition:s},UrlPrefix:l}=(await this._service({url:i,[h]:r,data:{appVersion:z,sdkVersion:$,enter_from:null!==(t=e.enterFrom)&&void 0!==t?t:Y.ImageEditor,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),...eu(e)}})).data;if(!n)throw Error("loki resource bad response");return{list:n.map(e=>en(e,null==l?void 0:l[0])),cursor:o,hasMore:a,sortingPosition:s}}async fetchLokiCategory(e){var t;let{url:i,hostNameType:r}=ed("GET_LOKI_CATEGORY_BY_ID"),n=await this._service({url:i,[h]:r,data:{appVersion:z,sdkVersion:$,enter_from:null!==(t=e.enterFrom)&&void 0!==t?t:Y.ImageEditor,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),...eu(e),category:void 0,hasCategoryEffects:!0}}),{CategoryList:o}=n.data,{category_info_map:a}=n;if(!o)throw Error("loki resource bad response");return{list:o.map(e=>{var t;let i=(null!==(t=null==e?void 0:e.ChildrenCategories)&&void 0!==t?t:[]).map(e=>a[e]?{id:a[e].Id,name:a[e].Name,key:a[e].Key,extra:a[e].Extra}:{});return{id:e.Id,name:e.Name,key:e.Key,childrenCategories:i}})}}async fetchLokiAllText(e){let{url:t,hostNameType:i}=ed("GET_LOKI_ALL_FONT"),{CategoryEffects:{Effects:r,Cursor:n,HasMore:o,SortingPosition:a},UrlPrefix:s}=(await this._service({url:t,[h]:i,data:{appVersion:z,sdkVersion:$,enter_from:Y.ImageEditor,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),panel:e.panel,limit:1e3}})).data;if(!r)throw Error("loki resource bad response");return{list:r.map(e=>en(e,null==s?void 0:s[0])),cursor:n,hasMore:o,sortingPosition:a}}constructor(e={}){let t=new w().setDefaultConfig({...K,transformRequest:[(e,t)=>JSON.stringify({...e,lang:N.ZP.language})],...e}).useJsonBigTransformResponse().addInterceptor(new V({})).build();t.interceptors.response.use(e=>{if(200===e.status){let t=e.data;if(!t.BaseResp||0===t.BaseResp.StatusCode)return Promise.resolve(t)}return Promise.reject(e)}),this._service=t}};class e_{serverReport(e,t,i){let{url:r,hostNameType:n}=j.DraftOpenReport;return this.axiosInstance.post(r,{params:t,event_name:e,custom_info:i},{[h]:n})}async syncSaveTicket(e,t){let{url:i,hostNameType:r}=j.SyncSaveToken,{version_list:n}=await this.axiosInstance.post(i,{package_key:e,package_type:5,workspace_id:t,cursor:0,count:1},{[h]:r});return n.map(e=>e.package_id)[0]}async submitDraftData(e){var t,i,r,n,o;let a=(null===(t=e.cloudAlbumAssert)||void 0===t?void 0:t.map(e=>({source_path:e.sourcePath,md5:e.md5,size:e.size})))||[],s=a.filter(t=>{var i;return null===(i=e.referencedAssert)||void 0===i?void 0:i.includes(t.md5)}),l=null===(r=e.cover)||void 0===r?void 0:null===(i=r.split("base64,"))||void 0===i?void 0:i[1],c=null!==(n=e.cloudDraftMeta)&&void 0!==n?n:this._getCloudDraftMeta(e.id,e.name,e.dimension,!e.ticket||"0"===e.ticket,function(e,t,i){let r=new TextEncoder,n=r.encode(e).length+r.encode(t).length;return i.forEach(e=>n+=e),n}(e.draftData,null!=l?l:"",s.map(e=>e.size)),e.userInfo),{url:d,hostNameType:u}=j.SaveDraftUrl;return await this.axiosInstance.post(d,{workspace_id:e.workspaceId,package_type:5,package_key:e.id,base_package_id:null!==(o=e.ticket)&&void 0!==o?o:"0",template_data:e.draftData,template_meta:JSON.stringify(c),package_assets:a,referenced_assets:s,materials:e.materials,user_actions:"{}",cover_image_content:l,page_covers:e.coverList.map((e,t)=>({data:e,source_path:`cover${t>0?`_${t}`:""}.jpg`}))},{[h]:u})}async publishAsTemplate(e){var t,i,r;let{id:n,name:o,dimension:a,userInfo:s,item_type:l,title:c,cover_height:d,cover_width:u,template_data:p,template_file:_,limit:g,extra:m,extra_v2:v,fragment_count:f,replaceable_image_list:w,main_version:b,features_version:S,revise_version:C,source_workspace_id:k,template_theme:E}=e,{url:I,hostNameType:P}=j.PublishAsTemplate,A=null===(i=e.cover)||void 0===i?void 0:null===(t=i.split("base64,"))||void 0===t?void 0:t[1];!(null===(r=g.platform)||void 0===r?void 0:r.length)&&(g.platform=[L]);let R={create_time:Date.now(),platform:L,feature_list:g.features};return await this.axiosInstance.post(I,{item_type:l,title:c,cover:A,cover_height:d,cover_width:u,template_data:p,template_meta:JSON.stringify(R),template_theme:E,template_file:_,limit:g,extra:m,extra_v2:{...v,source_draft_id:n},fragment_count:f,replaceable_image_list:w,main_version:b,features_version:S,revise_version:C,source_workspace_id:k},{[h]:P,transformResponse:e=>y().parse(e)})}async getDraftData(e,t){let i=await this.axiosInstance.post(j.GetDraftUrl.url,{package_key:e,app_version:z,sdk_version:$,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),workspace_id:t,package_asset_limit:30},{[h]:j.GetDraftUrl.hostNameType}),r=JSON.parse(i.template_data),n=function(e){let t,i="",r=[],n=[],o=Date.now();try{n=e.package_assets.map(e=>({md5:e.md5,size:e.size,sourcePath:e.source_path})),o=(t=JSON.parse(e.package_meta)).createSource.createTime,i=t.draft.name,r=e.referenced_assets.map(e=>JSON.parse(e)).map(e=>{var t;let i,r;return r=(t=e).preview_url.bucket_key_1080p,t.image_transcode_info&&(i={},Object.keys(t.image_transcode_info).forEach(e=>{if(!t.image_transcode_info[e])return;let{preview_url:n,width:o,height:a}=t.image_transcode_info[e];if(!(!n||!o||!a||(0,H.jv)(n))){if(e.includes("origin")){r=n;return}i[`${o}x${a}`]={width:o,height:a,full_url:n,aesKey:t.preview_key}}})),{assetId:t.asset_id,sourcePath:t.source_path,aesKey:t.preview_key,sourceUrl:t.origin_download_link,originUrl:r,transcode:i,md5:t.md5,size:t.size,mime:t.mime}})}catch(e){g.t.error("draft-api-helper parse json error",e)}return{draftTitle:i,draftCreateTime:o,draftUsedEverAsserts:r,draftAllEverAsserts:n,draftData:e.template_data,token:e.package_id,materials:e.materials,allowToEdit:e.allow_to_edit}}(i);return this._draftCreateTime=n.draftCreateTime,{...n,draftData:r}}async getTemplateFile(e){return await this.axiosInstance.post(j.GetTemplateFile.url,{uris:e},{[h]:j.GetDraftUrl.hostNameType})}reportDraftOpen(e,t){return this.axiosInstance.post(j.SyncDraftOpenTime.url,{workspace_id:t,file_id:e,file_type:1},{[h]:j.SyncDraftOpenTime.hostNameType})}async checkPublishTemplatePermission(){let e=await this.axiosInstance.post(j.CheckPublishTemplatePermission.url,{},{[h]:j.CheckPublishTemplatePermission.hostNameType});return{hasPermission:e.has_permission,hasCNPermission:e.has_cn_permission,publishCoverTemplate:e.cover_template_permission}}_getCloudDraftMeta(e,t,r,n,o,a){var s,l,c;let d=Date.now(),u="editor-batch"===(0,H.Cm)()||void 0;return{draft:{id:e,name:t,type:5,duration:0,updateTime:d,size:o,segmentCount:0,version:"1.0.0",platformSupport:L,isMainTrackEmpty:!1,isScriptTemplate:!1,renderIndexTrackMode:!1,canvasInfo:{width:r[0].width,height:r[0].height,sizeUnit:r[0].unit,pageInfoList:r.map(e=>({...e,sizeUnit:e.unit}))},coverUrl:"cover.jpg",cover:"cover.jpg",graphicInfo:{isUseInCn:null!==(s=ep.hasDependencyCN)&&void 0!==s&&s,isBatch:u}},uploadSource:{owner:null!==(l=null==a?void 0:a.uid)&&void 0!==l?l:"0",platform:L,systemVersion:i.g.navigator.userAgent,appVersion:"1.0.0",createTime:n||!this._draftCreateTime?d:this._draftCreateTime},createSource:{owner:null!==(c=null==a?void 0:a.uid)&&void 0!==c?c:"0",platform:L,systemVersion:i.g.navigator.userAgent,appVersion:"1.0.0",createTime:n||!this._draftCreateTime?d:this._draftCreateTime}}}constructor(){this.axiosInstance=new w().addInterceptor([new x,new S]).addInterceptor(new V({isRetry:e=>e.indexOf(j.SaveDraftUrl.url)>=0,retries:1})).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[String,String,String]),(0,b.w6)("design:returntype",void 0)],e_.prototype,"serverReport",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[String,String]),(0,b.w6)("design:returntype",Promise)],e_.prototype,"syncSaveTicket",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof SaveDraftDataRequestData?Object:SaveDraftDataRequestData]),(0,b.w6)("design:returntype",Promise)],e_.prototype,"submitDraftData",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof PublishAsTemplateParams?Object:PublishAsTemplateParams]),(0,b.w6)("design:returntype",Promise)],e_.prototype,"publishAsTemplate",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[String,String]),(0,b.w6)("design:returntype",Promise)],e_.prototype,"getDraftData",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[Array]),(0,b.w6)("design:returntype",Promise)],e_.prototype,"getTemplateFile",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[String,String]),(0,b.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],e_.prototype,"reportDraftOpen",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],e_.prototype,"checkPublishTemplatePermission",null);var eg=i("598178");let eh={[_.xP.SalesSticker]:[_.Ms.EffectTypeSticker],[_.xP.SalesFont]:[_.Ms.EffectTypeFont],[_.xP.YkImage]:[_.Ms.EffectTypeImage]},em=e=>{if(!e)return;let{effects:t=[],local_images:i,replaceable_images:r,yk_images:n}=e;return{effects:t.map(e=>{let t=y().parse(e);if(t.Source===_.UI.HeyPan){var i;return{name:t.Name,md5:t.FileUrl.Uri,url:t.FileUrl.UrlList[0],resourceId:t.ResourceId.toString(),panel:null!==(i=function(e){for(let[t,i]of Object.entries(eh))if(i.includes(e))return t}(t.EffectType))&&void 0!==i?i:"",effectId:t.EffectId.toString()}}return en(t)}),localImages:i,replaceableImages:r,ykImages:null==n?void 0:n.map(e=>{try{return JSON.parse(e)}catch(t){g.t.warn("template-api","parse yk image error",e)}return null}).filter(e=>!!e)}};class ev extends r{constructor(...e){super(...e),this.request={onFulfilled:e=>(Object.assign(e,{headers:{...e.headers,lan:N.ZP.language}}),e)}}}class ef{async getAllTemplateRatio(){var e;let{data:t,status:i}=null!==(e=await v.Z.get(E.GetAllTemplateRatio.url).catch(()=>void 0))&&void 0!==e?e:{};if(200===i)return t}async getCategories(e){let{url:t,hostNameType:i}=E.GetCategories,r={sdk_version:$,category_type:e.categoryType,scale:e.scale,canvas_width:e.canvasWidth,canvas_height:e.canvasHeight};return{categories:(await this._service({url:t,data:r,[h]:i})).collections}}async getTemplateAccordCategory(e){var t;let{url:i,hostNameType:r}=E.GetTemplatesAccordCategory,n={...e},o={sdk_version:$,enter_from:k,count:20,lang:N.ZP.language,...n},{data:a}=await this._serviceWithFullData({url:i,data:o,[h]:r});if("0"!==a.ret)return Promise.reject(a);let{data:s,log_id:l}=a;return{cursor:s.new_cursor,hasMore:s.has_more,list:null===(t=s.item_list)||void 0===t?void 0:t.map(e=>{var t;if(null===(t=e.sign_info)||void 0===t?void 0:t.json_str)try{let t=JSON.parse(e.sign_info.json_str);e.commerceInfo=t.capcut_commerce_info}catch{}return{...e,id:e.id.toString(),requestId:l}})}}async getRecentList(e){var t;let{url:i,hostNameType:r}=E.GetRecentList,n={count:50,lang:N.ZP.language,...e},o=await this._service({url:i,data:n,[h]:r});return{cursor:o.new_cursor,hasMore:o.has_more,list:null===(t=o.item_list)||void 0===t?void 0:t.map(e=>({...e,id:e.id.toString()}))}}async reportRecently(e){let{url:t,hostNameType:i}=E.ReportRecently,r={type:"template",...e};return await this._service({url:t,data:r,[h]:i})}async getTemplateDetail(e){let{url:t,hostNameType:i}=E.GetTemplateDetail,r={sdk_version:$,enter_from:k,app_version:C,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),template_id:e.templateId,need_draft:e.needDraft},n=await this._service({url:t,data:r,[h]:i}),{template_data:o,creator_info:a}=n,{template_url:s,materials:l,main_version:c,revise_version:d,feature_version:u,draft_data:p,theme_data:_,text_theme_covers:g,text_theme_effects:m,extra_v2:v}=n;return{templateUrl:s,draftData:p,templateData:o,templateVersion:`${c}.${u}.${d}`,creator:a,materials:em(l),textThemeCovers:g,themeData:_,textThemeEffects:m,extra:v}}async getTemplateDataByUrl(e){let t=await v.Z.get(e.replace(/^https*:\/\//,"https://"));return 200!==t.status&&204!==t.status?Promise.reject(Error(`get template data fail, url:${e}`)):t.data}async getTemplateScenes(){let{data:e}=await v.Z.get(E.GetTemplateScenes.url);return{templateSceneList:Object.values(e).flat()}}async getTemplateHotWords(){let{url:e,hostNameType:t}=E.GetTemplateHotWords;return{list:(await this._service({url:e,[h]:t})).hot_word_list}}async searchTemplates(e){var t;let i;let{url:r,hostNameType:n}=E.SearchTemplates,{sdkVersion:o,searchId:a,enterFrom:s,categoryIds:l,sceneId:c,featureKey:d,colors:u,graphNum:p,..._}=e;if(u){let e=(0,eg.Oo)(u);i={r:e[0],g:e[1],b:e[2]}}let g={sdk_version:o,search_id:a,enter_from:s,category_ids:l,scene_id:c,lang:N.ZP.language,strategy_extra:d?JSON.stringify({image_feature_key:d}):void 0,custom_colors:i?[i]:void 0,graph_num:p?I[p]:void 0,..._},m=await this._serviceWithFullData({url:r,data:g,[h]:n});if(200!==m.status)return Promise.reject(m);let{data:v}=m;if("0"!==v.ret)return Promise.reject(v);let{data:f,log_id:y}=m.data;return{hasMore:f.has_more,list:(null!==(t=f.image_templates)&&void 0!==t?t:[]).map(e=>({...e,id:e.web_id,searchId:f.search_id,requestId:y})),cursor:f.new_cursor,searchId:f.search_id,requestId:y}}async getBatchCategories(){let{url:e,hostNameType:t}=E.GetBatchCategories;return{categories:await this._service({url:e,data:{sdk_version:$},[h]:t})}}async getBatchTemplatesByCategory(e){let{url:t,hostNameType:i}=E.GetBatchTemplatesByCategory,r={...e};return{templatesDataList:(await this._service({url:t,data:r,[h]:i})).map(e=>({...e,item_list:e.item_list.map(e=>({...e,id:e.web_id}))}))}}async getPresets(e){let{url:t,hostNameType:i}=E.GetPresets,r={...e},n=await this._service({url:t,data:r,[h]:i});return{...n,item_list:n.item_list.map(e=>({...e,id:e.web_id}))}}async getPresetDetail(e){let{url:t,hostNameType:i}=E.GetPresetDetail,r={sdk_version:$,enter_from:k,app_version:C,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),template_id:e.templateId,need_draft:e.needDraft,work_space_id:e.workspaceId},n=await this._service({url:t,data:r,[h]:i}),{template_data:o,creator_info:a}=n,{template_url:s,materials:l,main_version:c,revise_version:d,feature_version:u,draft_data:p,extra_v2:_}=n;return{templateUrl:s,draftData:p,templateData:o,templateVersion:`${c}.${u}.${d}`,creator:a,materials:em(l),extra:_}}async postDeletePresetsTemplate(e){let{url:t,hostNameType:i}=E.PostDeletePresetsTemplate,r={...e};await this._service({method:"post",url:t,data:r,[h]:i})}async fuzzySearchTemplateByTitle(e){let{url:t,hostNameType:i}=E.FuzzySearchTemplateByTitle,r={...e};return{item_list:(await this._service({method:"post",url:t,data:r,[h]:i})).item_list.map(e=>({...e,id:e.web_id}))}}constructor(){let e=new w;this._service=e.setDefaultConfig(K).useJsonBigTransformResponse().addInterceptor([new V({}),new x,new S,new ev]).build();let t=new w;this._serviceWithFullData=t.setDefaultConfig(K).addInterceptor([new V({}),new x]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getAllTemplateRatio",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetCategoriesReq?Object:GetCategoriesReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getCategories",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetTemplateAccordCategoryReq?Object:GetTemplateAccordCategoryReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getTemplateAccordCategory",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetRecentListReq?Object:GetRecentListReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getRecentList",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof ReportRecentlyReq?Object:ReportRecentlyReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"reportRecently",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetTemplateDetailReq?Object:GetTemplateDetailReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getTemplateDetail",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[String]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getTemplateDataByUrl",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getTemplateScenes",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getTemplateHotWords",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof SearchTemplatesReq?Object:SearchTemplatesReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"searchTemplates",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getBatchCategories",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetBatchTemplateByCategoryReq?Object:GetBatchTemplateByCategoryReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getBatchTemplatesByCategory",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetPresetsReq?Object:GetPresetsReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getPresets",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetPresetDetailReq?Object:GetPresetDetailReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"getPresetDetail",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof PostDeletePresetsTemplateReq?Object:PostDeletePresetsTemplateReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"postDeletePresetsTemplate",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof FuzzySearchTemplateByTitleReq?Object:FuzzySearchTemplateByTitleReq]),(0,b.w6)("design:returntype",Promise)],ef.prototype,"fuzzySearchTemplateByTitle",null);var ey=((o={}).Template="template",o.Effect="effect",o.Material="material",o.Common="common",o);let ew={GetAutoColorTheme:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane/color/auto"},GetRecommendPalette:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane/color/recommend"},GetApplyPalette:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane/color/apply"},GetRecentList:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane/common/recent_list"},GetPlanePaletteFeed:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane/color/feed"},ReportRecently:{hostNameType:_.b_.Default,url:"/lv/v1/editor/use_report"}},eb=ey.Common;class eS{async getAutoColorTheme(e){let{url:t,hostNameType:i}=ew.GetAutoColorTheme,r={...e,app_version:z,sdk_version:$,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()},{canvas:n,layers:o=[],palette_recommend_list:a}=JSON.parse((await this._service({url:t,data:r,[h]:i})).result);return{canvas:n,layers:o,paletteList:a[0].palette_list}}async getRecommendColorPalette(e){let{url:t,hostNameType:i}=ew.GetRecommendPalette,r={...e,app_version:z,sdk_version:$,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()},{canvas:n,layers:o=[],palette_recommend_list:a}=await this._service({url:t,data:r,[h]:i});return{canvas:n,layers:o,recommendList:null==a?void 0:a.map(e=>({layerId:e.layer_id,paletteList:e.palette_list}))}}async getApplyColorPalette(e){let{url:t,hostNameType:i}=ew.GetApplyPalette,r={...e,app_version:z,sdk_version:$,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()},{canvas:n,layers:o=[]}=JSON.parse((await this._service({url:t,data:r,[h]:i})).result);return{canvas:n,layers:o}}async getRecentlyUsedColorPalette(){let{url:e,hostNameType:t}=ew.GetRecentList,i={cursor:0,count:50,common_action_key:"palette",app_version:z,sdk_version:$,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()},{new_cursor:r,has_more:n,item_list:o=[]}=await this._service({url:e,data:i,[h]:t});return{newCursor:r,hasMore:n,itemList:o}}async reportRecentlyUsedPalette(e){let{url:t,hostNameType:i}=ew.ReportRecently,r={type:eb,common_action_key:"palette",common_action_value:e.commonActionValue};return await this._service({url:t,data:r,[h]:i})}async getPlanePaletteFeedList(){let{url:e,hostNameType:t}=ew.GetPlanePaletteFeed;return await this._service({url:e,data:{type:eb,common_action_key:"palette"},[h]:t})}constructor(){let e=new w;this._service=e.setDefaultConfig(K).useJsonBigTransformResponse().addInterceptor([new V({}),new x,new S]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AutoColorThemeReqParams?Object:AutoColorThemeReqParams]),(0,b.w6)("design:returntype",Promise)],eS.prototype,"getAutoColorTheme",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AutoColorThemeReqParams?Object:AutoColorThemeReqParams]),(0,b.w6)("design:returntype",Promise)],eS.prototype,"getRecommendColorPalette",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof ApplyColorPaletteParams?Object:ApplyColorPaletteParams]),(0,b.w6)("design:returntype",Promise)],eS.prototype,"getApplyColorPalette",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],eS.prototype,"getRecentlyUsedColorPalette",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof ColorPaletteRecentReportParams?Object:ColorPaletteRecentReportParams]),(0,b.w6)("design:returntype",Promise)],eS.prototype,"reportRecentlyUsedPalette",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],eS.prototype,"getPlanePaletteFeedList",null);class eC extends r{constructor(...e){super(...e),this.request={onFulfilled:e=>{let t=function(){let e=document.cookie.match(RegExp("(^| )_tea_web_id=([^;]+)")),t=window.GATEWAY_INJECTED_WEB_ID||"";return!t&&null!==e&&(t=e[2]),t}(),i={aid:"348188",device_platform:"web",region:window.__locationCountryCode||"us",web_id:t};return Object.assign(e,{params:{...e.params||{},...i}}),e}}}}let ek="0.0.1",eE="14.0.0",eI={GetAICutout:{hostNameType:_.b_.Default,url:"/lv/v1/editor/image/saliency_seg"},GetAICutoutWithBrush:{hostNameType:_.b_.Default,url:"/lv/v1/editor/image/interactive_matting"},GetAICutoutToAutoSelection:{hostNameType:_.b_.Default,url:"/api/biz/v1/image/entity_seg"},GetAIBackground:{hostNameType:_.b_.Default,url:"/lv/v1/editor/image/gen_background"},ApplyAutoLayout:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane/resize/auto"},GetAutoLayoutDimensions:{url:"https://sf16-muse-va.ibytedtos.com/obj/ies-fe-bee-maliva/bee_prod/biz_149/bee_prod_149_bee_publish_854.json",HostNameType:_.b_.Default},AIChangeStickerColor:{HostNameType:_.b_.Default,url:"/lv/v1/editor/color/change_sticker_color"},T2DTemplateLists:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane/intelligence/query_recommend_template"},T2DTemplateDetails:{hostNameType:_.b_.Default,url:"/lv/v1/editor/plane/intelligence/fill_render"},ImageEmbedResource:{hostNameType:_.b_.Default,url:"/lv/v1/editor/image/embed_resource"},IdentifyPerson:{hostNameType:_.b_.Default,url:"/lv/v1/editor/human_detection"}};var eT=((a={})[a.EverPhoto=1]="EverPhoto",a[a.ImageX=2]="ImageX",a[a.Yk=3]="Yk",a[a.CommonURL=4]="CommonURL",a[a.Raw=5]="Raw",a[a.BrandImage=7]="BrandImage",a);function eP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:96;return e/(2.54/t)}let eA={[_.F5.IMAGE]:"image",[_.F5.TEXT]:"text",[_.F5.SHAPE]:"shape",[_.F5.LINE]:"line",[_.F5.GROUP_LAYER]:"group",[_.F5.IMAGE_CONTAINER]:"image",[_.F5.GRID]:"image",[_.F5.SVG_IMAGE]:"image"};class eR{async getAutoLayoutDimensions(){let{data:e}=await v.Z.get(eI.GetAutoLayoutDimensions.url),t=t=>t.map(t=>e.imageAllSceneList.find(e=>e.scenario===t)).filter(e=>e).map(e=>({title:e.scenario,titleI18Key:e.titleKey,dimension:e.extInfo,scenarioId:e.scenarioId}));return{scenarioList:e.newImageSceneList.map(e=>{var i,r;return{name:e.id,i18Key:e.titleKey,list:t(e.sceneIdList),children:null!==(r=null===(i=e.childrens)||void 0===i?void 0:i.map(e=>({name:e.id,i18Key:e.titleKey,list:t(e.sceneIdList)})))&&void 0!==r?r:[]}})}}async getAiAutoLayoutResult(e,t,i,r){let{ApplyAutoLayout:n}=eI;return e.canvas={width:Math.round(e.canvas.width),height:Math.round(e.canvas.height)},e.layers=e.layers.map(e=>{var t,i;let{fontSize:r}=e;e.fontSize=void 0;let n={...e,layout:e.layout.map(e=>Math.round(e)),type:eA[e.type],font_size:r?Math.round(r):void 0};return e.assetMD5?n.asset_md5=e.assetMD5:e.imagePath?n.template_file_uri=e.imagePath:e.effect&&(n.effect_panel=e.effect.panel,n.effect_source=e.effect.source,n.effect_resource_id=e.effect.resourceId),(null===(t=e.effect)||void 0===t?void 0:t.source)===_.UI.UserBrand&&(n.brand_workspace_id=null===(i=e.effect)||void 0===i?void 0:i.workspaceId),n}).filter(e=>e.type!==eA[_.F5.GROUP_LAYER]),(await this._service.post(n.url,{...e,image_content:null==r?void 0:r.split(";base64,")[1],aspect_ratio:t.map(e=>{let{width:t,height:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{width:i,height:r}=e;return e.unit===_.fb.CM&&(i=eP(e.width),r=eP(e.height)),t&&(i=Math.round(i),r=Math.round(r)),{width:i,height:r,unit:_.fb.PX}}(e);return[Math.round(t),Math.round(i)]}),workspace_id:i,app_version:z,sdk_version:$,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()},{[h]:n.hostNameType})).results.map(e=>0===e.status?e:null)}async aiCutout(e){var t,i;let{url:r,hostNameType:n}=eI.GetAICutout,o={...this.src2Source(e.src),image_width:null===(t=e.size)||void 0===t?void 0:t.width,image_height:null===(i=e.size)||void 0===i?void 0:i.height,workspace_id:e.workspaceId,skip_image_output:e.skipImgOutput,seg_option:{get_algo_resp_json:!0,only_mask:4,refine_mask:2,rgb:[-1,-1,-1]},app_version:ek,sdk_version:eE,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()};return await this._service({url:r,data:o,[h]:n})}async aiCutoutWithBrush(e){let{url:t,hostNameType:i}=eI.GetAICutoutWithBrush,r={draw_info:e.drawInfo,pen_type:e.penType,pen_size:e.penSize,ret_mode:e.retMode},n={...this.src2Source(e.src),prev_result_type:e.prevResultType,prev_result:e.prevResult,workspace_id:e.workspaceId,matting_option:r,app_version:ek,sdk_version:eE,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()};return await this._service({url:t,data:n,[h]:i})}async aiCutoutToAutoSelection(e){let{url:t,hostNameType:i}=eI.GetAICutoutToAutoSelection,r={workspace_id:e.workspaceId,image:{source_type:3,binary:e.imageBase64}};return await this._service({url:t,data:r,[h]:i})}async aiBackground(e,t){var i,r,n,o,a,s;let{url:l,hostNameType:c}=eI.GetAIBackground,d={source_type:null!==(i=e.sourceType)&&void 0!==i?i:eT.ImageX,source:e.uri,prompt:e.prompt||"",mode:e.mode,image_width:e.width,image_height:e.height,canvas_width:null!==(r=e.canvas_width)&&void 0!==r?r:e.width,canvas_height:null!==(n=e.canvas_height)&&void 0!==n?n:e.height,num_generate:null!==(o=e.num)&&void 0!==o?o:1,position_x:null!==(a=e.position_x)&&void 0!==a?a:0,position_y:null!==(s=e.position_y)&&void 0!==s?s:0,app_version:ek,sdk_version:eE,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),request_scene:e.request_scene};return await this._service({url:l,data:d,params:t,[h]:c})}async aiBackgroundFull(e,t){var i,r;let{url:n,hostNameType:o}=eI.GetAIBackground,a={source_type:null!==(i=e.sourceType)&&void 0!==i?i:eT.ImageX,source:e.uri,prompt:e.prompt||"",mode:e.mode,image_width:e.width,image_height:e.height,canvas_width:e.width,canvas_height:e.height,num_generate:null!==(r=e.num)&&void 0!==r?r:1,position_x:0,position_y:0,app_version:ek,sdk_version:eE,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),request_scene:e.request_scene};return await this._serviceWithFullData({url:n,data:a,params:t,[h]:o})}async aiChangeStickerColor(e){let{type:t,url:i,width:r,height:n,rgb:o,workspaceId:a}=e,{url:s,HostNameType:l}=eI.AIChangeStickerColor;return(await this._service({url:s,data:{source_type:t,source:i,image_width:r,image_height:n,refer_rgb:o,use_pad:!0,workspaceId:a},[h]:l})).image}async imageEmbedResource(e){let{url:t,hostNameType:i}=eI.ImageEmbedResource,r={source_type:e.type,source:e.type===eT.Raw?e.data.split(",")[1]:e.data,workspace_id:e.workspaceId};return(await this._service({url:t,data:r,[h]:i})).scene_key}async identifyPerson(e){let{url:t,hostNameType:i}=eI.IdentifyPerson,{src:r,workspaceId:n}=e,{source:o,source_type:a}=this.src2Source(r);return await this._service({url:t,data:{asset:o,asset_type:a,workspace_id:n||"0"},[h]:i})}src2Source(e){switch(e.type){case _.lJ.CloudImageSticker:return{source_type:eT.EverPhoto,source:e.md5};case _.lJ.Svg:case _.lJ.Cutout:case _.lJ.ReplaceableCutout:return{source_type:eT.ImageX,source:e.path};case _.lJ.YkSicker:case _.lJ.YkImage:return{source_type:eT.Yk,source:e.resourceId};case _.lJ.Raw:return{source_type:eT.Raw,source:e.path.substring(e.path.indexOf(",")+1)};case _.lJ.BrandImage:case _.lJ.BrandSticker:return{source_type:eT.BrandImage,source:e.resourceId};default:return{source_type:eT.CommonURL,source:e.path}}}constructor(){let e=new w;this._service=e.setDefaultConfig(K).addInterceptor([new V({}),new x,new S,new eC]).build();let t=new w;this._serviceWithFullData=t.setDefaultConfig(K).addInterceptor([new V({}),new x,new eC]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"getAutoLayoutDimensions",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AutoLayoutDraft?Object:AutoLayoutDraft,Array,Object,String]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"getAiAutoLayoutResult",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AICutoutParams?Object:AICutoutParams]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"aiCutout",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AICutoutWithBrushParams?Object:AICutoutWithBrushParams]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"aiCutoutWithBrush",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof IAICutoutToAutoSelection?Object:IAICutoutToAutoSelection]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"aiCutoutToAutoSelection",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AIBackgroundParams?Object:AIBackgroundParams,"undefined"==typeof IAigcUrlParams?Object:IAigcUrlParams]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"aiBackground",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AIBackgroundParams?Object:AIBackgroundParams,"undefined"==typeof IAigcUrlParams?Object:IAigcUrlParams]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"aiBackgroundFull",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AIChangeStickerColorParams?Object:AIChangeStickerColorParams]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"aiChangeStickerColor",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof ImageEmbedResourceParams?Object:ImageEmbedResourceParams]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"imageEmbedResource",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof IdentifyPersonParams?Object:IdentifyPersonParams]),(0,b.w6)("design:returntype",Promise)],eR.prototype,"identifyPerson",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof ImageSrc?Object:ImageSrc]),(0,b.w6)("design:returntype",void 0)],eR.prototype,"src2Source",null);let ex={GetSearchWords:{hostNameType:_.b_.Default,url:"/artist/v1/effect/get_search_words"},GetRecommends:{hostNameType:_.b_.Default,url:"/artist/v1/effect/ccweb/feed"},Search:{hostNameType:_.b_.Default,url:"/artist/v1/effect/search"},Order:{hostNameType:_.b_.Default,url:"/artist/v1/library/tuchong/order"},PhotoAdobeSearch:{hostNameType:_.b_.Default,url:"/artist/v1/library/tuchong/search"},PhotoHeycanList:{hostNameType:_.b_.Default,url:"/artist/v1/effect/mget_artist_item"},GetSuggestWords:{hostNameType:_.b_.Default,url:"/artist/v1/effect/get_suggest_words"},PhotoAdobeList:{hostNameType:_.b_.Default,url:"/artist/v1/effect/mget_item"},PhotoSimilar:{hostNameType:_.b_.Default,url:"/artist/v1/effect/get_recommend_items"}},eN={"1:1":"square","9:16":"strict_vertical","16:9":"strict_horizontal"};class eL{async getSearchWords(e){var t;let{url:i,hostNameType:r}=ex.GetSearchWords,n={app_id:e.appId,effect_type:e.effectType,search_word_type:e.searchWordType,cc_web_use_new_search:e.ccWebUseNewSearch},o=await this._getParamsConfig(),a=await this._service.post(i,n,{[h]:r,[m]:!1,...o});return{defaultWord:a.default_word,recommendWords:null!==(t=null==a?void 0:a.recommend_words)&&void 0!==t?t:[]}}async getRecommends(e){var t;let{url:i,hostNameType:r}=ex.GetRecommends,n={offset:e.offset,count:e.count,effect_type:e.effectType,pack_optional:e.packOptional,statistics_optional:e.statisticsOptional,request_id:e.requestId},o=await this._getParamsConfig(),a=await this._service.post(i,n,{[h]:r,[m]:!1,...o});return{hasMore:a.has_more,nextOffset:a.next_offset,list:ea(null!==(t=a.effect_item_list)&&void 0!==t?t:[])}}async search(e){var t;let{url:i,hostNameType:r}=ex.Search,n=await this._getParamsConfig(),o={app_id:e.appId,effect_type:e.effectType,query:e.query,offset:e.offset,count:e.count,pack_optional:e.packOptional,need_recommend:e.needRecommend,strategy_extra:e.strategyExtra,search_option:{filter_uncommercial:!0,input_type:e.strategyExtra?"by_image":void 0,...this._getSearchParams(e.searchOption)}};e.searchId&&(o.search_id=e.searchId);let a=await this._service.post(i,o,{[h]:r,[m]:!1,...n});return{hasMore:a.has_more,nextOffset:a.next_offset,list:ea(null!==(t=a.effect_item_list)&&void 0!==t?t:[],{searchId:a.search_id,requestId:a.request_id}).filter(e=>e.height&&e.width),searchId:a.search_id,isSearchResult:a.is_search_result,relatedWords:a.related_words,emptySearchReason:a.empty_search_reason,requestId:a.request_id}}async order(e){let{url:t,hostNameType:i}=ex.Order,r=await this._getParamsConfig();return await this._service.post(t,e,{[h]:i,[m]:!1,...r})}async photoAdobeSearch(e){var t;let{url:i,hostNameType:r}=ex.PhotoAdobeSearch,n=await this._getParamsConfig(),o={effect_type:e.effectType,query:e.query,offset:e.offset,count:e.count,pack_optional:e.packOptional};e.searchId&&(o.search_id=e.searchId);let a=await this._service.post(i,o,{[h]:r,[m]:!1,...n});return{hasMore:a.has_more,nextOffset:a.next_offset,searchId:a.search_id,requestId:a.request_id,list:el(null!==(t=a.effect_item_list)&&void 0!==t?t:[],{searchId:a.search_id,requestId:a.request_id})}}async photoHeycanRecentList(e){var t;let{url:i,hostNameType:r}=ex.PhotoHeycanList,n={id_list:e.idList,pack_optional:e.packOptional};return{list:ea(null!==(t=(await this._service.post(i,n,{[h]:r,[m]:!1,params:{aid:_.AF,device_platform:"web",region:await w.apiSetting.getUserRegion(),lang:N.ZP.language}})).effect_item_list)&&void 0!==t?t:[])}}async getSuggestWords(e){let{url:t,hostNameType:i}=ex.GetSuggestWords,r=await this._getParamsConfig(),n={app_id:e.appId,query:e.query,count:e.count,effect_type:e.effectType,cc_web_use_new_search:e.ccWebUseNewSearch};return await this._service.post(t,n,{[h]:i,[m]:!1,...r})}async photoAdobeRecentList(e){var t;let{url:i,hostNameType:r}=ex.PhotoAdobeList,n=await this._getParamsConfig();return{list:ea(null!==(t=(await this._service.post(i,e,{[h]:r,[m]:!1,...n})).effect_item_list)&&void 0!==t?t:[])}}async photoSimilar(e){var t;let{url:i,hostNameType:r}=ex.PhotoSimilar,n=await this._getParamsConfig(),o={app_id:_.AF,req_scene:"similarity_rec",panel:"image",context_info:JSON.stringify({similarity_item_id:e.similarItemId}),filters:{filter_uncommercial:!0,...this._getSearchParams(e.searchOption)},offset:e.offset,count:e.count,pack_optional:e.packOptional},a=await this._service.post(i,o,{[h]:r,[m]:!1,...n});return{hasMore:a.has_more,nextOffset:a.next_offset,list:el(null!==(t=a.effect_item_list)&&void 0!==t?t:[])}}async _getParamsConfig(){return{params:{aid:_.AF,version_name:"10.1.0",version_code:"10.1.0",sdk_version:"15.1.0",effect_sdk_version:"15.1.0",device_platform:"web",region:await w.apiSetting.getUserRegion(),language:N.ZP.language}}}_getSearchParams(e){let t;if(null==e?void 0:e.customColors){let i=(0,eg.Oo)(e.customColors);t={r:i[0],g:i[1],b:i[2]}}return{aspect_ratio:(null==e?void 0:e.aspectRatio)?eN[e.aspectRatio]:void 0,custom_colors:t?[t]:void 0}}constructor(){let e=new w;this._service=e.addInterceptor([new V({}),new x,new S]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetSearchWordsReq?Object:GetSearchWordsReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"getSearchWords",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetRecommendsReq?Object:GetRecommendsReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"getRecommends",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof SearchReq?Object:SearchReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"search",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof OrderServerReq?Object:OrderServerReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"order",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof PhotoAdobeSearchReq?Object:PhotoAdobeSearchReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"photoAdobeSearch",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof PhotoHeycanRecentListReq?Object:PhotoHeycanRecentListReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"photoHeycanRecentList",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetSuggestWordsReq?Object:GetSuggestWordsReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"getSuggestWords",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof photoAdobeRecentListServerReq?Object:photoAdobeRecentListServerReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"photoAdobeRecentList",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof PhotoSimilarReq?Object:PhotoSimilarReq]),(0,b.w6)("design:returntype",Promise)],eL.prototype,"photoSimilar",null);let eO="5.8.0",eM=e=>({GET_URL_BY_URI:{HostNameType:_.b_.Default,url:"/lv/v1/editor/image/batch_get_url"}})[e];class eD{async getUrlListByUris(e){var t;let{url:i}=eM("GET_URL_BY_URI"),r=await this._service(i,{data:{uri_info:e.map(e=>({biz:this._biz,uri:e}))}});return null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.map(e=>({uri:null==e?void 0:e.uri,url:null==e?void 0:e.full_url,transcode:null==e?void 0:e.transcode}))}constructor(e={}){this._biz="editor";let t=new w().setDefaultConfig({...K,...e}).useJsonBigTransformResponse().addInterceptor(new V({})).build();t.interceptors.request.use(e=>(e.headers={...e.headers,...R({url:`${location.origin}${e.url}`,pf:"7",appvr:eO,tdid:""}),"app-sdk-version":z,"sign-ver":1,pf:"7",appvr:eO},e)),t.interceptors.response.use(e=>{if(200===e.status){let t=e.data;if(!t.BaseResp||0===t.BaseResp.StatusCode)return Promise.resolve(t)}return Promise.reject(e)}),this._service=t}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[Array]),(0,b.w6)("design:returntype",Promise)],eD.prototype,"getUrlListByUris",null);var ej=((s={})[s.SUCCESS=0]="SUCCESS",s[s.COMMON_ERROR=1]="COMMON_ERROR",s[s.PARAM_ERROR=400]="PARAM_ERROR",s[s.MODEL_VERSION_MAP_ERROR=401]="MODEL_VERSION_MAP_ERROR",s[s.SDK_ERROR=1001]="SDK_ERROR",s[s.NOT_EXSIT=1002]="NOT_EXSIT",s[s.VERSION_MAP_EMPTY=2e3]="VERSION_MAP_EMPTY",s);class eF extends r{constructor(...e){super(...e),this.response={onFulfilled:e=>200!==e.status?Promise.reject(e):e.data.status_code!==ej.SUCCESS?Promise.reject(e.data):e.data}}}let eU={url:"/model/api/arithmetics"};class eB{async getEffectModelArithmetics(e){var t;let i=`${window.location.origin}${eU.url}`;return(await this._service.get(i,{params:{busi_id:100,sdk_version:$,device_type:"capcut_web",device_platform:"web",aid:0,app_name:"capcut",app_version:z,platform_sdk_version:$,...(null==e?void 0:null===(t=e.list)||void 0===t?void 0:t.length)?{required_model_list:e.list.join(",")}:null}})).data.arithmetics}constructor(){let e=new w;this._service=e.addInterceptor([new V({}),new eF]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[Object]),(0,b.w6)("design:returntype",Promise)],eB.prototype,"getEffectModelArithmetics",null);let eH={GetModelSourceList:{hostNameType:_.b_.Default,url:"/lv/v1/editor/image/ai_model/materials"},getClothMaskInfo:{hostNameType:_.b_.Default,url:"/lv/v1/editor/image/ai_model/create_cloth_mask"},submitModelTask:{hostNameType:_.b_.Default,url:"/lv/v1/editor/image/ai_model/submit_task"},getModelGenerateResult:{hostNameType:_.b_.Default,url:"/lv/v1/editor/image/ai_model/batch_get_results"}};class eG{async getModelSourceList(){let{url:e,hostNameType:t}=eH.GetModelSourceList;return(await this._service({url:e,data:{},[h]:t})).model_resources||[]}async getClothMaskInfo(e){let{url:t,hostNameType:i}=eH.getClothMaskInfo;return await this._service({url:t,data:e,[h]:i})}async submitModelTask(e,t){let{url:i,hostNameType:r}=eH.submitModelTask,{credits_credentials:n,...o}=e,a=await this._serviceWithFullData({url:i,data:{...o},params:t,[h]:r,headers:n?{"business-credit-credential":n}:{}});return null==a?void 0:a.data}async getModelGenerateResult(e){let{url:t,hostNameType:i}=eH.getModelGenerateResult,{credits_credentials:r,...n}=e,o=await this._serviceWithFullData({url:t,data:{...n},[h]:i,headers:r?{"business-credit-credential":r}:{}});return null==o?void 0:o.data}async aiT2DTemplateList(e,t){let{inputText:i,assets:r,workspaceId:n,assetType:o,aspectRatio:a}=e,{url:s,hostNameType:l}=eI.T2DTemplateLists,c={asset_type:o,input_text:i,assets:r,workspace_id:n,app_version:$,sdk_version:eE,lang:N.ZP.language,region:await w.apiSetting.getUserRegion(),aspect_ratio:[a]};return(await this._serviceWithFullData({url:s,data:c,params:t,[h]:l,[m]:!1})).data}async aiT2DTemplateDetail(e){let{url:t,hostNameType:i}=eI.T2DTemplateDetails,{templateIdList:r,reqId:n,workspaceId:o,assetType:a}=e,s={asset_type:a,template_id_list:r,req_id:n,workspace_id:o,app_version:$,sdk_version:eE,lang:N.ZP.language,region:await w.apiSetting.getUserRegion()};return(await this._serviceWithFullData({url:t,data:s,[h]:i,[m]:!1})).data}constructor(){let e=new w;this._service=e.setDefaultConfig(K).useJsonBigTransformResponse().addInterceptor([new V({}),new x,new S]).build();let t=new w;this._serviceWithFullData=t.setDefaultConfig(K).addInterceptor([new V({}),new eC,new x]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],eG.prototype,"getModelSourceList",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetClothMaskInfoReq?Object:GetClothMaskInfoReq]),(0,b.w6)("design:returntype",Promise)],eG.prototype,"getClothMaskInfo",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof SubmitModelTaskReq?Object:SubmitModelTaskReq,"undefined"==typeof IAppUrlParams?Object:IAppUrlParams]),(0,b.w6)("design:returntype",Promise)],eG.prototype,"submitModelTask",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetModelGenerateResultReq?Object:GetModelGenerateResultReq]),(0,b.w6)("design:returntype",Promise)],eG.prototype,"getModelGenerateResult",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AIT2DTemplateListParams?Object:AIT2DTemplateListParams,"undefined"==typeof IAppUrlParams?Object:IAppUrlParams]),(0,b.w6)("design:returntype",Promise)],eG.prototype,"aiT2DTemplateList",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AIT2DTemplateDetailParams?Object:AIT2DTemplateDetailParams]),(0,b.w6)("design:returntype",Promise)],eG.prototype,"aiT2DTemplateDetail",null);let eW={GetEnableList:{hostNameType:_.b_.Default,url:"/lv/v1/ad_maker/user/get_enable_list"}};class eV{async getEnableList(){return(await this.axiosInstance.post(eW.GetEnableList.url,void 0,{[h]:eW.GetEnableList.hostNameType})).enable_list}constructor(){var e;this.axiosInstance=new w().setDefaultConfig({...K,headers:{...K.headers,lan:null!==(e=N.ZP.language)&&void 0!==e?e:"en",tdid:""},withCredentials:!0}).addInterceptor([new x,new S]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],eV.prototype,"getEnableList",null);let eZ={GetBatchPresetResources:{hostNameType:_.b_.Default,url:"/lv/v1/intelligence/preset_resource_list"},SyncAsset:{hostNameType:_.b_.Default,url:"/lv/v1/ever_photo/batch_sync_asset"},SyncAssetStatus:{hostNameType:_.b_.Default,url:"/lv/v1/ever_photo/batch_get_sync_state"}};var ez=((l={})[l.SyncStateProcessing=1]="SyncStateProcessing",l[l.SyncStateSuccess=2]="SyncStateSuccess",l[l.SyncStateFail=3]="SyncStateFail",l[l.SyncStateNotFound=4]="SyncStateNotFound",l);class e${async getBatchPresetResourceList(e){let{url:t,hostNameType:i}=eZ.GetBatchPresetResources,r={smart_tool_type:e.smartToolType,refer_source:0};return await this._service({url:t,data:r,[h]:i,[m]:!1})}async syncBatchPresetAsset(e){let{url:t,hostNameType:i}=eZ.SyncAsset,r={resources:e.resources,workspace_id:e.workspaceId};return await this._serviceWithFullData({url:t,data:r,[h]:i,[m]:!1})}async getSyncStatus(e){let{url:t,hostNameType:i}=eZ.SyncAssetStatus,r={resource_ids:e.resourceIds,workspace_id:e.workspaceId},n=()=>this._service({url:t,data:r,[h]:i,[m]:!1});return await new Promise((e,t)=>{let i=async()=>{try{let r=await n();switch(r.status){case ez.SyncStateSuccess:e(r);break;case ez.SyncStateProcessing:setTimeout(i,1e3);break;default:t(r.status)}}catch(e){t(e)}};i()})}constructor(){let e=new w;this._service=e.setDefaultConfig(K).useJsonBigTransformResponse().addInterceptor([new V({}),new x,new S]).build();let t=new w;this._serviceWithFullData=t.setDefaultConfig(K).addInterceptor([new V({}),new x]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[Object]),(0,b.w6)("design:returntype",Promise)],e$.prototype,"getBatchPresetResourceList",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof AsyncAssetRequest?Object:AsyncAssetRequest]),(0,b.w6)("design:returntype",Promise)],e$.prototype,"syncBatchPresetAsset",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof SyncStateReq?Object:SyncStateReq]),(0,b.w6)("design:returntype",Promise)],e$.prototype,"getSyncStatus",null);let eK={GetIsBindShopify:{hostNameType:_.b_.Default,url:"/lv/v1/third_party_clouds/user_info?type=multi"}};class eq{async getIsBindShopify(){var e;let{url:t,hostNameType:i}=eK.GetIsBindShopify,r=await this._service.post(t,{platform:"Shopify"},{[h]:i,[m]:!1});return{isBind:!!(null==r?void 0:null===(e=r.user_infos)||void 0===e?void 0:e.length)}}constructor(){let e=new w;this._service=e.addInterceptor([new V({}),new x,new S]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",[]),(0,b.w6)("design:returntype",Promise)],eq.prototype,"getIsBindShopify",null);let eY=/capcut.com/.test(null===(p=i.g)||void 0===p?void 0:null===(u=p.location)||void 0===u?void 0:u.href)?"https://feed-api.capcut.com":"",eJ={GetCommercialPhotoTaskDetail:{hostNameType:_.b_.Default,url:"/lv/v2/task/multi_get_tasks"},BindCommercialPhotoTask:{hostNameType:_.b_.Default,url:"/lv/v2/cc_web_task/task_bind_draft"},GetCommercialPhotoTaskDrafts:{hostNameType:_.b_.Default,url:"/lv/v2/cc_web_task/get_task_draft"}};var eQ=i("306224"),eX=i("216158");class e0{async getCommercialPhotoTaskDetail(e){let t={task_ids:e.taskIds,app_id:eQ.AF},{url:i,hostNameType:r}=eJ.GetCommercialPhotoTaskDetail;try{var n,o;let e=await this._service.post(`${this._getDomain()}${i}`,t,{[h]:r});return{taskList:null!==(o=null===(n=e.task_list)||void 0===n?void 0:n.map(e=>this._formatTaskInfo(e)))&&void 0!==o?o:[]}}catch(e){return{taskList:[]}}}async bindCommercialPhotoTask(e){let t={task_id:e.taskId,draft_id:e.draftId,workspace_id:e.workspaceId,is_unbind:e.isUnBind,app_id:eQ.AF},{url:i,hostNameType:r}=eJ.BindCommercialPhotoTask;await this._service.post(`${this._getDomain()}${i}`,t,{[h]:r})}async getCommercialPhotoTaskDrafts(e){let t={task_id:e.taskId,app_id:eQ.AF},{url:i,hostNameType:r}=eJ.GetCommercialPhotoTaskDrafts;try{var n,o;let e=await this._service.post(`${this._getDomain()}${i}`,t,{[h]:r});return{draftInfo:null!==(o=null===(n=e.draft_info)||void 0===n?void 0:n.map(e=>({draftId:e.draft_id,workspaceId:e.workspace_id})))&&void 0!==o?o:[]}}catch(e){return{draftInfo:[]}}}_formatImageUrl(e){return e?/(http|https):\/\//.test(e)?e:`https://p16-capcut-va.ibyteimg.com/${e}~tplv-6rr7idwo9f-image.webp`:""}_formatTaskInfo(e){let{task_id:t,main_type:i,sub_type:r,description:n,require_reward:o,task_limit:a,visible_start_time:s,visible_end_time:l,task_start_time:c,task_end_time:d,update_time:u,status:p}=e,_="",g="";try{var h,m;let e=JSON.parse(n);_=e.title,g=this._formatImageUrl(null===(m=e.cover_img_url)||void 0===m?void 0:null===(h=m.head_cover)||void 0===h?void 0:h.uri)}catch(e){console.error("test1",e)}return{title:_,img:g,taskId:t,mainType:i,subType:r,description:n,status:p,requireReward:o,taskLimit:a,visibleStartTime:s,visibleEndTime:l,taskStartTime:c,taskEndTime:d,updateTime:u}}_getDomain(){var e;let t=(null===(e=window.__locationInfo)||void 0===e?void 0:e.web_idc)===eX.ie.SG?"sg":"va";return eY.replace("feed-api",`feed-api-${t}`)}constructor(){var e,t,r;let{Country:n={Code:""}}=null!==(t=null===(e=i.g)||void 0===e?void 0:e.ip_location_info)&&void 0!==t?t:{};this._service=new w().setDefaultConfig({...K,headers:{...K.headers,lan:null!==(r=N.ZP.language)&&void 0!==r?r:"en",tdid:"",loc:n.Code},withCredentials:!0}).addInterceptor([new V({}),new x,new S]).build()}}(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetCommercialPhotoTaskDetailReq?Object:GetCommercialPhotoTaskDetailReq]),(0,b.w6)("design:returntype",Promise)],e0.prototype,"getCommercialPhotoTaskDetail",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof BindCommercialPhotoTaskReq?Object:BindCommercialPhotoTaskReq]),(0,b.w6)("design:returntype",Promise)],e0.prototype,"bindCommercialPhotoTask",null),(0,b.gn)([U(),(0,b.w6)("design:type",Function),(0,b.w6)("design:paramtypes",["undefined"==typeof GetCommercialPhotoTaskDraftsReq?Object:GetCommercialPhotoTaskDraftsReq]),(0,b.w6)("design:returntype",Promise)],e0.prototype,"getCommercialPhotoTaskDrafts",null);let e1=[new e_,new ef,new eS,new eR,new eL,new eB,new eG,new eV,new e$,new eq,new eD,new e0];!function(e){for(let t of e)B.getInstance().registerApi(t);new Proxy({},{get(e,t){let i=B.getInstance().getApiMethod(t);if(i)return i}})}(e1);var e2=i("961087");class e6{get userIDC(){return this._userIdc}updateRequestSetting(e){this.hostName=e.domain,this._userIdc=e.webIdc,this._userRegion=e.region,!this._initLocker.hasBeenDone&&this._initLocker.initDone()}async getUserRegion(){return await this._initLocker.awaitForInit(),this._userRegion}async getRequestDomain(e){await this._initLocker.awaitForInit();let{type:t}=Object.assign({},{type:_.b_.Default},e);return this.hostName[t]}constructor(){this.hostName={[_.b_.Default]:""},this._initLocker=new e2.G}}},805794:function(e,t,i){"use strict";let r;i.d(t,{i:()=>s,B:()=>o});let n=!1,o=new class e{register(e){var t;this.context=e.context,this._loggerProvider=e.loggerProvider,this._tempReport=e.tempReport,this._prefix=null!==(t=e.prefix)&&void 0!==t?t:"VideoDocument-Data-Layer"}get ccLog(){var e;return!n&&(null===(e=this.context)||void 0===e?void 0:e.ccLog)?new Promise(e=>{i.e("6629").then(i.bind(i,507522)).then(t=>{var i,o,a,s;r=t.init({region:null!==(a=null===(i=this.context)||void 0===i?void 0:i.ccLog.region)&&void 0!==a?a:"boe",app_id:null!==(s=null===(o=this.context)||void 0===o?void 0:o.ccLog.appId)&&void 0!==s?s:""}),n=!0,e(r)})}):Promise.resolve(r)}log(){for(var e,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];null===(e=this._loggerProvider)||void 0===e||e.log(this._prefix,...i)}async saveLog(e){let t=await this.ccLog;return await t.saveLog(e)}info(){for(var e,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];null===(e=this._loggerProvider)||void 0===e||e.info(this._prefix,...i)}debug(){for(var e,t,i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];null===(t=this._loggerProvider)||void 0===t||null===(e=t.debug)||void 0===e||e.call(t,this._prefix,...r)}error(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=i;r&&(n+=`, stack: ${r.stack}`),console.error("****error",t,n,r),null===(e=this._loggerProvider)||void 0===e||e.error(this._prefix,t,i,n,r)}warn(){for(var e,t,i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];null===(t=this._loggerProvider)||void 0===t||null===(e=t.warn)||void 0===e||e.call(t,this._prefix,...r)}fatal(){for(var e,t,i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];null===(t=this._loggerProvider)||void 0===t||null===(e=t.fatal)||void 0===e||e.call(t,this._prefix,...r)}report(){for(var e,t,i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];null===(t=this._loggerProvider)||void 0===t||null===(e=t.report)||void 0===e||e.call(t,this._prefix,...r)}cgiReport(e){var t,i;null===(i=this._tempReport)||void 0===i||null===(t=i.report)||void 0===t||t.call(i,e)}reportError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.error(e,t,i),this.ccLog.then(n=>{n.error({describe:e,reason:t,reasonWithStack:i?`${t}, stack: ${i.stack}`:"",...r})})}constructor(){this._prefix="",Error.stackTraceLimit&&(Error.stackTraceLimit=50)}};var a,s=((a={})[a.CC=1]="CC",a[a.MWEB=2]="MWEB",a[a.LONG_TO_SHORT=3]="LONG_TO_SHORT",a[a.BUSINESS=4]="BUSINESS",a[a.AI_CREATOR=4]="AI_CREATOR",a)},800302:function(e,t,i){"use strict";function r(e){let t="";t=e<102.4?`${e.toFixed(2)}B`:e<104857.6?`${(e/1024).toFixed(2)}KB`:e<0x40000000?`${(e/1048576).toFixed(2)}MB`:e<0x10000000000?`${(e/0x40000000).toFixed(2)}GB`:`${(e/0x10000000000).toFixed(2)}TB`;let i=`${t}`,r=i.indexOf(".");return"00"==i.substr(r+1,2)?i.substring(0,r)+i.substr(r+3,2):t}function n(e){let t=`${(e/0x40000000).toFixed(2)}`,i=t.indexOf(".");return"00"==t.substr(i+1,2)?t.substring(0,i)+t.substr(i+3,2):t}i.d(t,{W:function(){return n},y:function(){return r}})},598178:function(e,t,i){"use strict";i.d(t,{Il:function(){return o},Oo:function(){return s}}),i(139305),i(722169);let r=/(rgba?)\(\s*?(\d+?)\s*?,\s*?(\d+?)\s*?,\s*?(\d+?)\s*?(?:,\s*?((0\.)?\d+?)\s*)?\)/,n=/#([0-9a-fA-F]{6})([0-9a-fA-F]{2})?/;class o{get r(){return this._v.r}set r(e){this._v.r=e}get g(){return this._v.g}set g(e){this._v.g=e}get b(){return this._v.b}set b(e){this._v.b=e}get a(){var e;return null!==(e=this._v.a)&&void 0!==e?e:1}set a(e){this._v.a=e}rgba(){return{...this._v}}hex(){let{r:e,g:t,b:i,a:r}=this._v,n=[e,t,i,null!=r?r:1].map((e,t)=>{let i=Number(3===t?Math.round(255*e):e).toString(16);return 1===i.length?`0${i}`:i}).join("");return`#${n}`}array(){let{r:e,g:t,b:i,a:r}=this._v,n=[e,t,i];return void 0!==r&&n.push(r),n}string(){let{r:e,g:t,b:i,a:r}=this._v;return void 0===r?`rgb(${e},${t},${i})`:`rgba(${e},${t},${i},${r})`}colorPick(){return{hex:this.hex(),rgb:this.rgba(),formatRGBA:this.string()}}isEqual(e){return this.a===e.a&&this.r===e.r&&this.g===e.g&&this.b===e.b}constructor(e){if(this._v={r:0,b:0,g:0,a:1},"string"==typeof e){let t=r.exec(e);if(t){let[,e,i,r,n,o]=t;this._v={r:Number(i),g:Number(r),b:Number(n),a:"rgb"===e?1:Number(o)};return}let i=n.exec(e);if(i){let e=[],[,t]=i;for(let i=0;i<6;i+=2)e.push(parseInt(t.slice(i,i+2),16));this._v={r:e[0],g:e[1],b:e[2],a:1}}}else if(Array.isArray(e)){var t;let[i,r,n]=e.map(e=>e>1?e:Math.round(255*e));this._v={r:i,g:r,b:n,a:null!==(t=e[3])&&void 0!==t?t:1}}else this._v={...e}}}let a=e=>e?Array.isArray(e)?{solid:e}:e.type===GradientColorType.LinearGradient?{linearGradient:e,gradient:e}:e.type===GradientColorType.RadialGradient?{radialGradient:e,gradient:e}:{}:{};function s(e){let t=n.exec(e);if(t){let e=[],[,i,r]=t;for(let t=0;t<6;t+=2)e.push(parseInt(i.slice(t,t+2),16));return[e[0],e[1],e[2],parseInt(null!=r?r:"ff",16)/255]}return[0,0,0,0]}},645937:function(e,t,i){"use strict";i.d(t,{QX:function(){return a},Rw:function(){return d},W:function(){return s},_8:function(){return l},aj:function(){return r},an:function(){return n},lF:function(){return c},tf:function(){return o}});let r="a",n="b",o="c",a="p",s="s",l="t",c="u",d="y"},773322:function(e,t,i){"use strict";i.d(t,{$3:function(){return n}});var r=i(139305);let n="Internal_Filter";[r.vA.SATURATION,r.vA.BRIGHTNESS,r.vA.CONTRAST,r.vA.LIGHT_SENSATION,r.vA.EXPOSURE,r.vA.FADE,r.vA.HIGHLIGHT,r.vA.SHADOW,r.vA.TEMPERATURE,r.vA.TONE,r.vA.VIBRANCE,r.vA.OLITEXTURE,r.vA.GRAIN].reduce((e,t)=>({...e,[t]:void 0}),{});let o={colorScheme:{id:"53061813",resourceId:"7259669436393591297"},lumiHub:{id:"75349634",resourceId:"7272983534673859074"},faceRect:{id:"153058216",resourceId:"7207391969436242434"},makeupRoot:{id:"153093534",resourceId:"7280056145232794113"}};Object.keys(o).reduce((e,t)=>({...e,[o[t].resourceId]:t}),{})},314350:function(e,t,i){"use strict";i.d(t,{CZ:function(){return r}});let r=16.6666666666},493713:function(e,t,i){"use strict";i.d(t,{Ds:function(){return o}});var r=i(571230),n=i.n(r);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i,r,o){let a=o.value;return o.value=n()(a,e,t),o}}let a=[],s=[],l=function(e){let[t,i,r]=e;i.call(t,...r)};n()(()=>{for(;s.length;)l(s.shift());for(;a.length;)l(a.shift())})},198990:function(e,t,i){"use strict";function r(e){var t;return new File([e.source],e.fileName,{type:e.fileType||(null===(t=e.source)||void 0===t?void 0:t.type)||""})}i.d(t,{h:function(){return r}})},948291:function(e,t,i){"use strict";function r(e){return URL.createObjectURL(e)}i.d(t,{S:function(){return r}})},347477:function(e,t,i){"use strict";i.d(t,{BQ:function(){return a},IL:function(){return o},P:function(){return n}});let r=[".DS_Store","Thumbs.db"];function n(e,t){if("string"!=typeof e.path){let i;let{webkitRelativePath:r}=e;i="string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,Object.defineProperty(e,"path",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}function o(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return new Promise(i=>{let r=document.createElement("input");r.type="file",r.accept=e,r.multiple=t,r.addEventListener("change",e=>{let t=null==e?void 0:e.target,r=null==t?void 0:t.files;i(Array.from(null!=r?r:[]))}),r.click()})}function a(e){return new Promise((t,i)=>{let o=document.createElement("input");o.type="file",o.accept=e,o.setAttribute("webkitdirectory","webkitdirectory"),o.setAttribute("directory","directory"),o.setAttribute("multiple",""),o.addEventListener("change",e=>{try{let i=null==e?void 0:e.target,o=null==i?void 0:i.files,a=(function(e){if(null===e)return[];let t=[];for(let i=0;i<e.length;i++){let r=e[i];t.push(r)}return t})(o).map(e=>n(e)),s=a.filter(e=>-1===r.indexOf(e.name));t({acceptedFiles:a,files:s})}catch(e){i(e)}}),o.click()})}},961087:function(e,t,i){"use strict";i.d(t,{G:function(){return r}});class r{get hasBeenDone(){return this._hasBeenDone}get costTimes(){if(!this._initCostTimes)return;let{start:e,end:t}=this._initCostTimes;return(null!=t?t:Date.now())-e}get initResult(){if(!!this._hasBeenDone)return{resolve:this._resolveResult,reject:this._rejectResult}}get isIniting(){return this._isIniting}awaitForInit(){let e,t,{key:i,timeout:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._hasBeenDone&&this.initResult){let{resolve:e,reject:t}=this.initResult;return t?Promise.reject(t):Promise.resolve(e)}if(i&&this._waitingResolverMap.has(i))return this._waitingResolverMap.get(i);if(!r){let e=new Promise((e,t)=>{this._waitingResolvers.add([e,t])});return i&&this._waitingResolverMap.set(i,e),e}let n=Promise.race([new Promise((i,r)=>{e=[()=>{clearTimeout(t),i()},r],this._waitingResolvers.add([e,r])}),new Promise((i,n)=>{t=setTimeout(()=>{this._waitingResolvers.delete(e),n(Error("Timed out waiting for init"))},r)})]);return i&&this._waitingResolverMap.set(i,n),n}startToInit(){return!this._hasBeenDone&&!this._isIniting&&(this._isIniting=!0,this._initCostTimes={start:Date.now()},!0)}initDone(e){if(this._hasBeenDone)throw Error("Cannot release an inited locker");this._initCostTimes&&(this._initCostTimes.end=Date.now());let t=!1;for(let i of((null==e?void 0:e.reject)?(t=!0,this._rejectResult=e.reject):this._resolveResult=null==e?void 0:e.resolve,this._waitingResolvers))t?i[1](this._rejectResult):i[0](this._resolveResult);this._waitingResolverMap.clear(),this._waitingResolvers.clear(),this._hasBeenDone=!0,this._isIniting=!1}constructor(){this._hasBeenDone=!1,this._isIniting=!1,this._initCostTimes=void 0,this._waitingResolvers=new Set,this._waitingResolverMap=new Map}}},756024:function(e,t,i){"use strict";i.d(t,{t:function(){return a}});let r=function(){},n=Object.keys(console).reduce((e,t)=>(e[t]=r,e),{});class o{static setLogInstance(e){this._instance=e}static setEnvironmentFlag(e){o._isProductionEnv=e}static debug(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];o._instance.debug(e,...i)}static log(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];o._instance.log(e,...i)}static error(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];o._instance.error(e,...i)}static info(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];o._instance.info(e,...i)}static time(e){o._instance.time(e)}static timeLog(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];o._instance.timeLog(e,...i)}static timeEnd(e){o._instance.timeEnd(e)}static warn(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];o._instance.warn(e,...i)}static hideConsole(){i.g.console=n,o.setLogInstance(n)}static showConsole(){i.g.console=o._console,o.setLogInstance(o._console)}}o._instance=n,o._isProductionEnv=!0,o._console=console,i.g.showConsole=o.showConsole,i.g.hideConsole=o.hideConsole;let a=o},714619:function(e,t,i){"use strict";i.d(t,{w:function(){return r}});class r{get isLocked(){return this._locked}acquire(){return this._locked?new Promise((e,t)=>{this._awaitQueue.push({resolve:e,reject:t})}):(this._locked=!0,Promise.resolve())}release(){if(!this._locked)throw Error("mutex lock is not locked.");this._locked=!1;let e=this._awaitQueue.pop();e&&(this._locked=!0,e.resolve())}constructor(){this._awaitQueue=[],this._locked=!1}}},144144:function(e,t,i){"use strict";i.d(t,{AO:function(){return a},Ie:function(){return n},XH:function(){return s},oe:function(){return o},wc:function(){return l}});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!!e)!performance.getEntriesByName(e).length&&performance.mark(e,{detail:t})},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!!e)r(`${e}_START`,t)},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!!e)r(`${e}_END`,t)},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!!e)performance.getEntriesByName(e).length&&performance.clearMarks(e),performance.mark(e,{detail:t})},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`${e}_START`,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:`${e}_END`;try{return performance.measure(e,t,i)}catch(e){}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(!!e)performance.clearMarks(`${e}_START`),performance.clearMarks(`${e}_END`),performance.clearMeasures(t)}},995370:function(e,t,i){"use strict";let r;i.d(t,{$n:function(){return f},ED:function(){return g},V5:function(){return h},gn:function(){return m},lc:function(){return y},vU:function(){return v}});let n=!1,o=!1,a=!1,s=!1,l=!1,c=!1,d=!1,u=!1,p=!1,_=!1;"object"==typeof navigator&&(n=(r=navigator.userAgent).indexOf("Windows")>=0,l=(r.indexOf("Macintosh")>=0||r.indexOf("iPad")>=0||r.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,r.indexOf("Linux"),c=r.indexOf("Mobi")>=0,r.indexOf("iPad"),o=!c&&r.indexOf("Macintosh")>=0,u=/firefox/i.test(r),/chrome/i.test(r),/^((?!chrome|android).)*safari/i.test(r));let g=n,h=o,m=l,v=u,f=()=>getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-title")?1:0,y=g?1024:1e3},348752:function(e,t,i){"use strict";i.d(t,{G3:function(){return n},To:function(){return o}});var r=i(995370);let n=e=>r.V5&&e.metaKey||!r.V5&&e.ctrlKey,o=e=>r.V5&&e.ctrlKey},560308:function(e,t,i){"use strict";i.d(t,{Zl:function(){return a},cQ:function(){return d},dQ:function(){return o}});let r=new WeakMap;function n(e){return!r.has(e)&&r.set(e,Promise.resolve()),r.get(e)}function o(e,t,i){let o=i.value;i.value=function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];let s=n(e).then(()=>o.apply(this,i)).catch(()=>o.apply(this,i));return r.set(e,s),s}}function a(e,t,i){let r=i.value;i.value=async function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];let a=n(e);return await a.catch(()=>Promise.resolve()),await r.apply(this,i)}}let s=new WeakMap,l=new WeakMap;function c(e){if(!!s.has(e))return s.get(e)}function d(e,t,i){let r=i.value;i.value=function(){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if(!n[n.length-1].throttle)return r.apply(this,n);if(e=r,l.has(e)&&l.get(e)){let e,t;let i=c(r);i&&i.reject();let o=new Promise((i,r)=>{e=i,t=r});return s.set(r,{scope:this,args:n,resolve:e,reject:t}),o}return l.set(r,!0),new Promise(e=>{r.apply(this,n).finally(()=>{l.set(r,!1),e();let t=c(r);if(!!t)s.delete(r),i.value.apply(t.scope,t.args).finally(t.resolve)})})}}},41603:function(e,t,i){"use strict";i.d(t,{G:function(){return n}});var r=i(139305);let n=()=>i.g.localStorage.getItem("CAPCUT_THEME")!==r.hY.Dark},651248:function(e,t,i){"use strict";i.d(t,{CE:function(){return o},Sw:function(){return n}});let r=e=>"[object Array]"===Object.prototype.toString.call(e),n=e=>{let t=new Map,i=e=>{if("function"==typeof e)return e;if("object"==typeof e){if(null===e)return e;if(t.has(e))return t.get(e);let n=r(e)?[]:{};return t.set(e,n),r(e)?e.forEach(e=>{n.push(i(e))}):Object.keys(e).forEach(t=>{n[t]=i(e[t])}),n}return e};return i(e)},o=(e,t)=>{let i=Object.assign({},e);return t.forEach(e=>{delete i[e]}),i}},293698:function(e,t,i){"use strict";i.d(t,{Cm:function(){return n},PL:function(){return y},PX:function(){return a},PZ:function(){return l},cs:function(){return m},dL:function(){return v},gO:function(){return c},gy:function(){return h},jv:function(){return o},l0:function(){return f},m4:function(){return p},rf:function(){return g},td:function(){return _},vB:function(){return u}}),i(139305);var r=i(593062);function n(){var e;let t=(0,r.EQ)("/:category(editor-graphic|editor-batch)/:draftId?")(i.g.location.pathname);return null==t?void 0:null===(e=t.params)||void 0===e?void 0:e.category}function o(e){try{return new URL(e),!0}catch(e){return!1}}let a=e=>{try{return new URL(e)}catch(e){return!1}},s="originParams";function l(e){i.g.location[s]=e}function c(){var e;return null!==(e=i.g.location[s])&&void 0!==e?e:{}}let d=e=>Object.entries(e).map(e=>{let[t,i]=e;return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`}).join("&"),u=()=>d(c());class p{static create(e){return new p(e)}addQueryParameter(e,t){let i=-1===this._currentUrl.indexOf("?")?"?":"&";return this._currentUrl=`${this._currentUrl}${i}${encodeURIComponent(e)}=${encodeURIComponent(t)}`,this}removeAllQueryParameter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this._currentUrl.split("?")[1];if(!t)return this;let i=t.split("&");for(let t=0;t<i.length;t++){let r=i[t].split("=")[0];!e.includes(r)&&(i.splice(t,1),t--)}return i.length>0?this._currentUrl=this._currentUrl.replace(t,i.join("&")):this._currentUrl=this._currentUrl.replace(`?${t}`,""),this}removeQueryParameter(e){let t=RegExp(`([&?])${e}=[^&]*[&]?`);return this._currentUrl=this._currentUrl.replace(t,e=>e.startsWith("?")?"?":e.endsWith("&")?"&":""),this}replaceResourceName(e){let t=this._currentUrl.match(/^(.*\/)([^/]+)$/);if(t&&t.length>2){let i=t[1],r=e.startsWith("/")?e.substr(1):e;this._currentUrl=`${i}${r}`}return this}getQueryParameterValue(e){return new URLSearchParams(this._currentUrl.split("?")[1]).get(e)}getAllQueryParameterValues(){let e=this._currentUrl.split("?")[1];if(!e)return{};let t={};for(let[i,r]of new URLSearchParams(e))t[i]=r;return t}toString(){return this._currentUrl}constructor(e){this._currentUrl=e}}function _(){let{state:e,utm_campaign:t}=c();return"googledrive"===t&&!!e}function g(){let{utm_source:e,file_id:t}=c();return"dropbox"===e&&void 0!==t}function h(){let{utm_source:e,shop:t}=c();return"shopify"===e&&!!t}function m(){let{utm_source:e,utm_medium:t}=p.create(i.g.location.href).getAllQueryParameterValues();return"draftshare"===e&&!!t}let v="integration_page";function f(){let{utm_source:e,shop:t}=function(e){let t={};return e&&e.split("&").forEach(e=>{let i=e.split("=");t[i[0]]=decodeURIComponent(i[1])}),t}(location.search);return"shopify"===e&&!!t}function y(){return _()||g()||h()}},237225:function(e,t,i){"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",i=Number(e);if(Number.isNaN(i)){if(e.includes(t)){let t=Number(e.split("_")[0]);i=Number.isNaN(t)?-1:t}else i=-1}return i}i.d(t,{hk:function(){return r}})},154881:function(e,t,i){"use strict";i.d(t,{m7:()=>A,jm:()=>R});var r=i("374904"),n=i("957104"),o=i("42028"),a=i("306224"),s=i("757730");class l extends s.g{async init(){let e=await o.q.getUploadToken(void 0,{biz:this.props.spaceName});this.stsToken={AccessKeyId:e.access_key_id,SecretAccessKey:e.secret_access_key,SessionToken:e.session_token,ExpiredTime:e.expired_time,CurrentTime:e.current_time},this.config={userId:"unknow",appId:Number(a.yM.APP_ID),useServerCurrentTime:!0,...this.props,videoConfig:{spaceName:e.space_name}}}getStsToken(){return this.stsToken}getConfig(){return this.config}constructor(e){super(),this.props=e}}class c extends s.g{async init(){let e=await o.q.getUploadToken(o.D.image);this.stsToken={AccessKeyId:e.access_key_id,SecretAccessKey:e.secret_access_key,SessionToken:e.session_token,ExpiredTime:e.expired_time,CurrentTime:e.current_time},this.config={userId:"unknow",appId:Number(a.yM.APP_ID),useServerCurrentTime:!0,...this.props,videoConfig:{spaceName:e.space_name}}}getStsToken(){return this.stsToken}getConfig(){return this.config}constructor(e){super(),this.props=e}}var d=i("78621"),u=i("801497"),p=i("612649"),_=i("892745"),g=i("801410");let h={baseURL:"/lv/v1",method:"POST",headers:{loc:a.yM.CHANNEL,lan:u.ZP.language||a.yM.LAN,pf:a.yM.APP_PF,appvr:a.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":a.yM.APP_SDK_VERSION},params:{}},m=p.ZP.createAxios(h);m.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t.data):Promise.reject(e)}}),(0,_.Z)(m,{retries:5,resetTimeout:!0,retryDelay:1e3,isRetry:()=>!0});let v={async getUploadToken(e){let{workspaceId:t}=e,i="/asset/prepare_upload_cloud";return await m({url:i,headers:{...(0,g.O)({url:`${h.baseURL}${i}`,...h.headers})},data:{space_id:"0",workspace_id:t,is_web_user:!0}})}};class f extends s.g{async init(){let e;let{workspaceId:t,userId:i}=this._props;if(!t)throw Error(JSON.stringify({code:-1,msg:"[error]no parameter workspaceid passed in."}));try{e=await v.getUploadToken({workspaceId:t})}catch(t){let e=t.data||t;throw Error(JSON.stringify({code:e.ret||e.code,msg:e.errmsg||t.msg}))}this._stsToken={AccessKeyId:e.security_token.access_key_id,SecretAccessKey:e.security_token.secret_access_key,SessionToken:e.security_token.session_token,ExpiredTime:e.security_token.expired_time,CurrentTime:e.security_token.current_time},this._config={userId:null!=i?i:e.everphoto_user_id,appId:e.app_id,useServerCurrentTime:!0,videoHost:e.upload_domain.includes("://")?e.upload_domain:`https://${e.upload_domain}`,videoConfig:{spaceName:e.service_id},objectConfig:{spaceName:e.service_id}}}getStsToken(){return this._stsToken}getConfig(){return this._config}constructor(e){super(),this._props=e}}let y=[100026,100028];class w{async init(){if(await this._auth.init(),!this._uploader){let e=Object.assign({getSliceFunc:e=>e>0xc800000?0xa00000:2097152,uploadSliceCount:3},this._auth.getConfig());{let{default:t}=await i.e("1586").then(i.t.bind(i,249220,23));this._uploader=new t(e)}}return this._uploader}async upload(e){let t;let{file:i,type:r="image",onSuccess:n,onProgress:o,onError:a,onStart:s}=e;try{t=await this.init()}catch(e){null==a||a({extra:{error:e,errorCode:e.code,message:e.msg}})}let l=t.addFile({file:i,stsToken:this._auth.getStsToken(),type:r});t.start(l),null==s||s(l,i),t.on("progress",e=>{if(e.key===l)null==o||o({key:l,...e})}),t.on("complete",e=>{if(e.key===l)null==n||n({key:l,...e.uploadResult})});let c=0;return t.on("error",async e=>{var i;if(e.key===l){if(y.includes(Number(null==e?void 0:null===(i=e.extra)||void 0===i?void 0:i.errorCode))&&c<1){c++,await this._auth.init(),t.refreshSTSToken(this._auth.getStsToken()),t.start(l);return}null==a||a(e)}}),t}cancel(e){var t;return null===(t=this._uploader)||void 0===t?void 0:t.cancel(e)}constructor(e){this._uploader=null,this._auth=e}}class b extends s.g{async init(){let e=await o.q.getUploadToken(o.D.temp);this.stsToken={AccessKeyId:e.access_key_id,SecretAccessKey:e.secret_access_key,SessionToken:e.session_token,ExpiredTime:e.expired_time,CurrentTime:e.current_time},this.config={userId:"unknow",appId:Number(a.yM.APP_ID),useServerCurrentTime:!0,...this.props,videoConfig:{spaceName:e.space_name}}}getStsToken(){return this.stsToken}getConfig(){return this.config}constructor(e){super(),this.props=e}}var S=i("177634"),C=i("924553"),k=i("722169");class E{addParams(e){this.data=(0,k.merge)({},this.data,e)}constructor(){this.event="evercloud_sdk_get_token",this.data={}}}let{wasm_url:I}=i("811382"),P=new Map;r.iH.setDependencies({apiFunc:{getEverPhotoToken:async e=>{var t,i,n,o,a,s,l;let c=Date.now(),d=new E;try{let n=await C.p.getWorkspaceEverPhotoToken();return d.addParams({code:"0",msg:"success",costTime:Date.now()-c,lastReqTime:P.has(e)?Date.now()-P.get(e):void 0,spaceId:e}),P.set(e,Date.now()),null===r.iH||void 0===r.iH||null===(i=r.iH.TeaReporter)||void 0===i||null===(t=i.event)||void 0===t||t.call(i,d.event,d.data),n}catch(t){throw d.addParams({code:null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.ret,msg:null==t?void 0:null===(o=t.data)||void 0===o?void 0:o.errmsg,costTime:Date.now()-c,lastReqTime:P.has(e)?Date.now()-P.get(e):void 0,spaceId:e,logId:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.log_id}),P.set(e,Date.now()),null===r.iH||void 0===r.iH||null===(l=r.iH.TeaReporter)||void 0===l||null===(s=l.event)||void 0===s||s.call(l,d.event,d.data),t}},getVideoTaskInfo:o.q.getVideoTaskInfo,createVideoData:o.q.createVideoData,getEverPhotoUserSpace:C.p.getEverPhotoUserSpace,promoteAsset:C.p.promoteAsset,createAsset:C.p.createAsset,prepareUpload:C.p.prepareUpload},getUploader:(e,t)=>{let i,r;if(e.isBoe)i="https://vas-boei18n._____________",r="boei18n";else switch(e.newIdc){case"useast2a":r="gcp";break;case"sg1":r="sg";break;case"hl":case"lf":case"lq":r="cn";break;default:r="us"}return new d.Q(new("video"===t?l:c)({userId:e.uniqueId,region:r,videoHost:e.videoHost?e.videoHost:i,imageHost:e.videoHost?e.videoHost:i,spaceName:e.vodSpaceName,_getToken:o.q.getUploadToken,...e.videoUploader,...e.imgUploader}))},getSignUploader:e=>{let{workspaceId:t,userId:i}=e;return new w(new f({workspaceId:t,userId:i}))},getFileCopyName:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[i,r]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(".");return t.length<=1?[e,""]:[t.slice(0,-1).join("."),t[t.length-1]]}(e),n=0,o=`${i}-${r?".":""}${r}`;for(;t.includes(o);)n++,o=`${i}-${n}${r?".":""}${r}`;return o},overwriteSDKInitOptions:async e=>{var t,i;let o=!e.is_boe&&!(null===(t=e.netconf)||void 0===t?void 0:t.base);if(o){let t;let i={gcp:{base:"everphoto-gcp.capcut.com",media:"everphoto-media-gcp.capcut.com",is_https:!0},va:{base:"everphoto-va.capcut.com",media:"everphoto-media-va.capcut.com",is_https:!0}};switch(e.dc_name){case r._s.GCP:t=i.gcp;break;case r._s.VA:t=i.va;break;default:throw Error("not found dc_name, please check")}e.netconf=t}let a=S.I.getJson(n.g.COOKIE_CONSENT_PROMPT_CONFIG);if(!e.is_boe&&(null==a?void 0:null===(i=a.settings)||void 0===i?void 0:i.firstPartyAnalytics)){let t=(e,t)=>{let i=r.iH.TeaReporter;return new Promise(r=>{i.getVar(e,t,e=>{r(e)})})},i=await t("evpt_conf_params_v3",{is_xml:!1,chunk_size:5}),n=await t("evpt_conf_params_v5",{is_part_upload:!1,chunk_size:20,timeout:300,max_count_of_concurrent_upload:5,downgrade_if_bad_network:!1});if((null==i?void 0:i.is_xml)?(e.backup_conf={chunk_size:i.chunk_size,is_xhr:!0},e.timeout={...e.timeout,upload:180}):e.backup_conf={is_xhr:!1},o){let i=await t("evpt_conf_params_v4",{is_new_domain:!1});if(null==i?void 0:i.is_new_domian){let t;let n={gcp:{base:(null==i?void 0:i.gcp)||"everphoto-gcp.capcut.com",media:"everphoto-media-gcp.capcut.com",is_https:!0},va:{base:(null==i?void 0:i.va)||"everphoto-va.capcut.com",media:"everphoto-media-va.capcut.com",is_https:!0}};switch(e.dc_name){case r._s.GCP:t=n.gcp;break;case r._s.VA:t=n.va;break;default:throw Error("not found dc_name, please check")}e.netconf=t}}(null==n?void 0:n.is_part_upload)&&(e.backup_conf={max_count_of_concurrent_upload:n.max_count_of_concurrent_upload,chunk_size:n.chunk_size,is_part_upload:!0},e.timeout={...e.timeout,upload:n.timeout}),e.backup_conf={...e.backup_conf,downgrade_if_bad_network:!!(null==n?void 0:n.downgrade_if_bad_network)}}if(e.netconf)for(let[t,i]of Object.entries({"sdksg32-normal.evercloud.capcutapi.com":"sg.evercloud.capcut.com","sdksggcp32-normal.evercloud.capcutapi.com":"sg-gcp.evercloud.capcut.com","sdkva32-normal.evercloud.capcutapi.com":"va.evercloud.capcut.com"}))e.netconf.base===t&&(e.netconf.base=i);return e.timeout={...e.timeout,upload:300},e.backup_conf={...e.backup_conf,is_part_upload:!0},e},constant:{sourceFrom:13,aid:"324442"}});let A=new Proxy(r.iH,{get:(e,t,i)=>{switch(t){case"setOptions":return new Proxy(Reflect.get(e,t,i),{apply:(e,t,i)=>(!A.hasSetOptions&&p.ZP.updateRequestDomain({domain:i[0].reqDomain}),Reflect.apply(e,t,i))});case"setNoSignOptions":return new Proxy(Reflect.get(e,t,i),{apply:(e,t,i)=>(!A.hasSetNoSignOptions&&(p.ZP.updateRequestDomain({domain:i[0].reqDomain}),o.q.fixRequestDomain()),Reflect.apply(e,t,i))});default:return Reflect.get(e,t,i)}}});class R{upload(e){let{file:t,onStart:i}=e,n=(0,r.eF)({file:t}),o="video";switch(n){case"video":case"audio":o="video";break;default:o="object"}return new Promise((t,r)=>{this.uploader.upload({file:e.file,type:o,onSuccess:e=>{t(e)},onError:e=>{var t;r({status:"error",errInfo:{code:null==e?void 0:null===(t=e.extra)||void 0===t?void 0:t.errorCode}})},onStart:(e,t)=>{null==i||i(e,t)}})})}constructor(e){let t,i;if(e.isBoe)t="https://vas-boei18n._____________",i="boei18n";else switch(e.newIdc){case"useast2a":i="gcp";break;case"sg1":i="sg";break;default:i="us"}this.uploader=new d.Q(new b({userId:e.uniqueId,region:i,videoHost:e.videoHost?e.videoHost:t,imageHost:e.videoHost?e.videoHost:t,_getToken:o.q.getUploadToken,...e.videoUploader,...e.imgUploader}))}}},374904:function(e,t,i){"use strict";let r;i.d(t,{M3:()=>L,Is:()=>W,qZ:()=>z,J5:()=>C,m3:()=>er,Gt:()=>k,eF:()=>S,zW:()=>eH,iH:()=>ez,_s:()=>R,dV:()=>eZ,VW:()=>I,Lt:()=>V,NF:()=>b,or:()=>Z});var n,o,a,s,l,c,d,u,p,_,g=i("733730"),h=i("789786"),m=i("827322"),v=i("402964"),f=i.n(v),y=i("722169");function w(e){let t="";t=e<102.4?`${e.toFixed(2)}B`:e<104857.6?`${(e/1024).toFixed(2)}KB`:e<0x40000000?`${(e/1048576).toFixed(2)}MB`:e<0x10000000000?`${(e/0x40000000).toFixed(2)}GB`:`${(e/0x10000000000).toFixed(2)}TB`;let i=`${t}`,r=i.indexOf(".");return"00"==i.substr(r+1,2)?i.substring(0,r)+i.substr(r+3,2):t}let b=(()=>{let e={file:{acceptType:["application/zip"],acceptSuffix:[".zip"]},video:{acceptType:["video/mp4","video/mov","video/m4v","video/x-flv","video/quicktime","video/avi","video/webm","video/mp2t","video/x-ms-asf"],acceptSuffix:[".mp4",".mov",".m4v",".flv",".mkv",".avi",".webm",".wmv",".rm",".rmvb",".3gp",".m2ts",".mt2s",".m2t",".mxf",".mpg",".mpeg",".mpe",".ts",".mts",".qt",".asf"]},audio:{acceptType:["audio/mp3","audio/mpeg","audio/m4a","audio/x-m4a","audio/wav","audio/flac"],acceptSuffix:[".mp3",".flac",".m4a",".wav",".aac",".oga",".ogg",".wma",".amr",".aif",".aiff",".ac3",".mpa",".ape",".mac",".mp2",".acc"]},image:{acceptType:["image/jpeg","image/jpg","image/webp","image/bmp","image/png","image/gif","image/heif","image/heic","image/tiff","image/x-tiff","image/x-icon","image/vnd.microsoft.icon","image/svg+xml","image/vnd.adobe.photoshop","image/avif"],acceptSuffix:[".jpeg",".jpg",".png",".gif",".heif",".heic",".tiff",".tif",".ico",".svg",".svgz",".psd",".avif"]}},t=t=>{let i=e[t].acceptType;return[...i,...e[t].acceptSuffix].join(",")};return{file:{...e.file,accept:t("file")},video:{...e.video,accept:t("video")},audio:{...e.audio,accept:t("audio")},image:{...e.image,accept:t("image")},allAccept:`${t("video")},${t("audio")},${t("image")}`}})();function S(e){let{file:t,accepts:i=["audio","video","image"]}=e,r=t.name.lastIndexOf("."),n="";if(-1!==r&&(n=t.name.substr(r)),n){for(let e of i)if(b[e].acceptSuffix.includes(n.toLocaleLowerCase()))return e}let o=t.type.toLocaleLowerCase();if(o){for(let e of i)if(b[e].acceptType.includes(o))return e}}function C(e){let{file:t,accepts:i=["video","audio","image"]}=e;return!!S({file:t,accepts:i})}function k(e){let t;if(!e)return"file";for(let[t,i]of Object.entries({video:["application/vnd.rn-realmedia-vbr","application/vnd.rn-realmedia","application/mxf"],audio:["application/x-wav","application/ogg","video/x-ms-wma"],image:[]}))if(i.includes(e.toLocaleLowerCase()))return t;return t=e.toLowerCase().startsWith("video")?"video":e.toLowerCase().startsWith("image")?"image":e.toLowerCase().startsWith("audio")?"audio":"file"}function E(e){let t;let{obj:i,serializeKey:r,targetKey:n}=e;try{t=JSON.parse(i[r])}catch(e){console.warn(`${r} \u{5B57}\u{6BB5}\u{975E}\u{6CD5},\u{65E0}\u{6CD5}\u{89E3}\u{6790}\u{8BE5}\u{5B57}\u{6BB5}\u{5185}\u{5BB9}`,i)}return{...i,[n]:t}}let I={FILM_ASSET:"10001",MID_PRODUCT:"40001",AIGC_VIDEO:"60001"},P=void 0;var A=((n={}).USER_SPACE_SIZE_CHANGE="USER_SPACE_SIZE_CHANGE",n);var R=((o={})[o.VA=0]="VA",o[o.GCP=1]="GCP",o[o.CN=2]="CN",o);let x={[R.VA]:"va",[R.GCP]:"gcp"},N=[200,360,480,720,1080,2400,"origin"],L={P200:200,P360:360,P480:480,P720:720,P1080:1080,P2400:2400,ORIGIN:"origin"};L.P200,L.P360,L.P480,L.P720,L.P1080,L.P2400,L.ORIGIN;let O={0:"origin",1:200,2:360,3:480,4:720,5:1080,6:2400},M={origin:0,200:1,360:2,480:3,720:4,1080:5,2400:6};var D=((a={})[a.UNTRANSCODE=-1]="UNTRANSCODE",a[a.SUCCESS=0]="SUCCESS",a[a.TRANSCODING=1]="TRANSCODING",a[a.FAILED=2]="FAILED",a[a.TIMEOUT=3]="TIMEOUT",a[a.CANCEL=-2]="CANCEL",a);let j={360:[640,360],480:[854,480],720:[1280,720],1080:[1920,1080]},F={VIDEO:"video",AUDIO:"audio",IMAGE:"image",LIVE_PHOTO:"live-photo",FILM:"film",PACKAGE:"package",CLUSTER_FILM:"cluster-film",NORMAL:"file",FOLDER:"folder"};class U{constructor(e){this._sourceData=e}}var B=((s={})[s.NORMAL=0]="NORMAL",s[s.SCRIPT=3]="SCRIPT",s[s.GRAPHIC=5]="GRAPHIC",s);var H=((l={})[l.EDIT=0]="EDIT",l[l.TEMPLATE=1]="TEMPLATE",l[l.IMAGE_TEXT=2]="IMAGE_TEXT",l[l.SCRIPT=3]="SCRIPT",l[l.TOOL=4]="TOOL",l[l.GRAPHIC=5]="GRAPHIC",l);var G=((c={})[c.PERSONAL=1]="PERSONAL",c[c.PUBLIC=0]="PUBLIC",c);class W extends U{get isValid(){return!(0,y.isEmpty)(this._sourceData._meta)}get id(){return this.notOnlyId}get notOnlyId(){return this._sourceData.id}get md5(){return this._sourceData.md5}get name(){var e;return(null===(e=this.entry)||void 0===e?void 0:e.entry_name)||this._sourceData.file_name}get author(){return this._sourceData.author}get sourcePath(){return this._sourceData.source_path}get mime(){return this._sourceData.mime}get subType(){return this._sourceData.sub_type}get size(){return this._sourceData.size}get sizeStr(){return w(this.size)}get filterList(){return this._sourceData.filter_list||[]}get type(){return F.NORMAL}get width(){return this._sourceData.width}get height(){return this._sourceData.height}get updatedAt(){var e,t;return 1e3*((null===(t=this._sourceData)||void 0===t?void 0:null===(e=t.entry)||void 0===e?void 0:e.access_at_ts)||this._sourceData.updated_at_ts)}get createdAt(){return 1e3*this._sourceData.uploaded_at}get downloadUrl(){var e;return null===(e=this._sourceData.asset_meta)||void 0===e?void 0:e.download_url}get meta(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e._meta}get status(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e.status}get permission(){return ez.isGroupSdk?this._sourceData.permission||G.PUBLIC:G.PERSONAL}get isPublic(){return this.permission===G.PUBLIC}get isPersonal(){return this.permission===G.PERSONAL}get owner(){var e,t,i;return null===(i=this._sourceData)||void 0===i?void 0:null===(t=i._meta)||void 0===t?void 0:null===(e=t.uploadSource)||void 0===e?void 0:e.owner}get uploadedAt(){return 1e3*this._sourceData.uploaded_at}get entryId(){return this._sourceData.entry_id}get entry(){return this._sourceData.entry||this._sourceData.entry_data}get sourceData(){return this._sourceData}get hasMaterialTag(){return this._sourceData.has_material_tag}constructor(e,t){super(E({obj:e,serializeKey:"meta",targetKey:"_meta"})),this.sdk=t}}class V extends W{get type(){return F.AUDIO}get duration(){return this._sourceData.duration}get unencryptedPreviewUrl(){var e,t,i,r;return null===(r=this._sourceData)||void 0===r?void 0:null===(i=r.unencryptedPlayInfo)||void 0===i?void 0:null===(t=i.info)||void 0===t?void 0:null===(e=t.audio)||void 0===e?void 0:e.primary_url}get transcodeStatus(){return this._sourceData.transcode_status}}class Z extends W{get type(){return F.IMAGE}get previewUrl(){var e,t,i;return(null===(e=this.imageTranscodeInfo[360])||void 0===e?void 0:e.status_code)===D.SUCCESS?this.imageTranscodeInfo[360].preview_url:null===(i=this._sourceData)||void 0===i?void 0:null===(t=i.asset_meta)||void 0===t?void 0:t.preview360_url}get previewKey(){var e,t,i;return(null===(e=this.imageTranscodeInfo[360])||void 0===e?void 0:e.status_code)===D.SUCCESS?this.imageTranscodeInfo[360].key:null===(i=this._sourceData)||void 0===i?void 0:null===(t=i.asset_meta)||void 0===t?void 0:t.key}get preview72Url(){var e,t,i;return(null===(e=this.imageTranscodeInfo[720])||void 0===e?void 0:e.status_code)===D.SUCCESS?this.imageTranscodeInfo[720].preview_url:null===(i=this._sourceData)||void 0===i?void 0:null===(t=i.asset_meta)||void 0===t?void 0:t.preview720_url}get imageAsyncResize(){return!!this._sourceData.image_async_resize}getTranscodeStatus(e){let t={};return((null==e?void 0:e.length)?e:N).forEach(e=>{var i,r,n;let o=`preview${e}_url`,a=null===(r=this._sourceData)||void 0===r?void 0:null===(i=r.asset_meta)||void 0===i?void 0:i[o],s=e===L.ORIGIN?e:`p_${e}`,l=null===(n=this._sourceData.image_transcode_info)||void 0===n?void 0:n[s];l?t[e]=l.status_code:a?t[e]=D.SUCCESS:this.imageAsyncResize?t[e]=D.TRANSCODING:t[e]=D.UNTRANSCODE}),t}get imageTranscodeInfo(){let e={};return N.forEach(t=>{var i,r,n,o,a,s;let l=`preview${t}_url`,c=null===(r=this._sourceData)||void 0===r?void 0:null===(i=r.asset_meta)||void 0===i?void 0:i[l],d=t===L.ORIGIN?t:`p_${t}`,u=null===(n=this._sourceData.image_transcode_info)||void 0===n?void 0:n[d];if(u)e[t]={...u,key:this._sourceData.image_transcode_info.key};else if(c&&!(null===(o=e[t])||void 0===o?void 0:o.preview_url)){let i=this.getPreviewSizeByResolution(t);e[t]={preview_url:c,width:i.width,height:i.height,status_code:D.SUCCESS,key:null===(s=this._sourceData)||void 0===s?void 0:null===(a=s.asset_meta)||void 0===a?void 0:a.key}}}),e}async getPreviewInfo(e){return this.sdk?this.sdk.getImagePreviewInfo(this,e):this.imageTranscodeInfo}getPreviewSizeByResolution(e){let t;let i=j[e];if(!i||!this.width||!this.height||e===L.ORIGIN)return{width:0,height:0};let r=this.width||0,n=this.height||0,[o,a]=i;if(r/n>3){if(r*n<o*a)return{width:r,height:n};let e=Math.sqrt(o*a/(r*n));return{width:Math.floor(r*e),height:Math.floor(n*e)}}if(r<=o&&n<=a)return{width:r,height:n};let s=o/r,l=a/n;return{width:Math.floor(r*(t=s>l?l:s)),height:Math.floor(n*t)}}}class z extends W{get type(){return F.VIDEO}get duration(){return this._sourceData.duration}get width(){return this._sourceData.width}get height(){return this._sourceData.height}get previewUrl(){var e,t;return null===(t=this._sourceData)||void 0===t?void 0:null===(e=t.asset_meta)||void 0===e?void 0:e.preview360_url}get previewKey(){var e,t;return null===(t=this._sourceData)||void 0===t?void 0:null===(e=t.asset_meta)||void 0===e?void 0:e.key}get unencryptedPreviewUrl(){var e,t,i,r;return null===(r=this._sourceData)||void 0===r?void 0:null===(i=r.unencryptedPlayInfo)||void 0===i?void 0:null===(t=i.info)||void 0===t?void 0:null===(e=t.p360)||void 0===e?void 0:e.primary_url}get sprit(){return this._sourceData.sprite_info}get transcodeStatus(){return this._sourceData.transcode_status}setUnencryptedInfo(e){this._sourceData&&(this._sourceData.unencryptedPlayInfo=e)}}class $ extends Z{get type(){return F.LIVE_PHOTO}}class K extends U{get isValid(){return!(0,y.isEmpty)(this._sourceData._meta)}get id(){return this.notOnlyId}get notOnlyId(){return this._sourceData.id}get author(){return this._sourceData.creator}get key(){return this._sourceData.key}get name(){var e,t,i,r;return null!==(r=null===(i=this._sourceData)||void 0===i?void 0:null===(t=i._meta)||void 0===t?void 0:null===(e=t.draft)||void 0===e?void 0:e.name)&&void 0!==r?r:""}get size(){var e,t,i;return(null===(i=this._sourceData)||void 0===i?void 0:null===(t=i._meta)||void 0===t?void 0:null===(e=t.draft)||void 0===e?void 0:e.size)||0}get sizeStr(){return this.size?w(this.size):void 0}get type(){return F.PACKAGE}get subType(){var e,t;return null===(t=this._sourceData._meta)||void 0===t?void 0:null===(e=t.draft)||void 0===e?void 0:e.type}get updatedAt(){var e,t,i,r,n;return(null===(e=this.entry)||void 0===e?void 0:e.access_at_ts)?(null===(t=this.entry)||void 0===t?void 0:t.access_at_ts)*1e3:null===(n=this._sourceData)||void 0===n?void 0:null===(r=n._meta)||void 0===r?void 0:null===(i=r.draft)||void 0===i?void 0:i.updateTime}get createdAt(){var e,t,i,r,n;return null!==(n=null===(t=this._sourceData._meta)||void 0===t?void 0:null===(e=t.createSource)||void 0===e?void 0:e.createTime)&&void 0!==n?n:null===(r=this._sourceData._meta)||void 0===r?void 0:null===(i=r.uploadSource)||void 0===i?void 0:i.createTime}get meta(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e._meta}get coverMd5(){var e,t,i;return null===(i=this._sourceData)||void 0===i?void 0:null===(t=i.assets)||void 0===t?void 0:null===(e=t.find(e=>{var t,i;return e.path===(null===(i=this._sourceData)||void 0===i?void 0:null===(t=i._meta)||void 0===t?void 0:t.draft.cover)}))||void 0===e?void 0:e.md5}get allCoverMd5(){var e,t,i,r;if(!(null===(t=this._sourceData)||void 0===t?void 0:null===(e=t._meta)||void 0===e?void 0:e.draft.cover))return[];let n=[...null===(i=this._sourceData)||void 0===i?void 0:i.assets].reverse();return null===(r=(0,y.uniqBy)(n,"path").reverse())||void 0===r?void 0:r.filter(e=>/^cover(_[0-9]+)?\.(jpe?g|png)$/.test(e.path)).map(e=>e.md5)}get duration(){var e,t;return null===(t=this._sourceData)||void 0===t?void 0:null===(e=t._meta)||void 0===e?void 0:e.draft.duration}get assets(){return(this._sourceData.assets||[]).map(e=>{let t=e.meta||"",i={};try{i=JSON.parse(t)}catch(e){}return{...e,entryIds:e.entry_ids,meta:i,_meta:t}})}get creator(){return this._sourceData.creator}get status(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e.status}get permission(){return ez.isGroupSdk?this._sourceData.permission||G.PUBLIC:G.PERSONAL}get isPublic(){return this.permission===G.PUBLIC}get isPersonal(){return this.permission===G.PERSONAL}get owner(){var e,t,i,r,n,o;return(null===(i=this._sourceData)||void 0===i?void 0:null===(t=i._meta)||void 0===t?void 0:null===(e=t.createSource)||void 0===e?void 0:e.owner)||(null===(o=this._sourceData)||void 0===o?void 0:null===(n=o._meta)||void 0===n?void 0:null===(r=n.uploadSource)||void 0===r?void 0:r.owner)||""}get entryId(){return this._sourceData.entry_id}get entry(){return this._sourceData.entry}constructor(e){let t=E({obj:e,serializeKey:"meta",targetKey:"_meta"});super({...e,_meta:t._meta,entry:t})}}class q{get fileName(){return this.options.fileName}get uid(){return this.options.uid}get asset(){return this.options.assetInfo}get clusterInfo(){return this.options.clusterInfo}get duration(){return this.options.duration}get size(){return this.options.size}get type(){return this.options.type}get spritInfo(){return this.options.spritInfo}get videoInfo(){return this.options.videoInfo}get audioInfo(){return this.options.audioInfo}get extInfo(){return this.options.extInfo}merge(e){return(0,y.merge)(this.options,e.options),this}constructor(e){this.options=e}}class Y extends z{get type(){return F.FILM}}class J extends U{get type(){return F.CLUSTER_FILM}get id(){var e;return this.entryId||(null===(e=this.entry)||void 0===e?void 0:e.entry_id)}get notOnlyId(){return this._sourceData.cluster_id}get name(){var e;return(null===(e=this._lastAsset)||void 0===e?void 0:e.name)||""}get duration(){var e;return null===(e=this._lastAsset)||void 0===e?void 0:e.duration}get size(){var e;return null===(e=this._lastAsset)||void 0===e?void 0:e.size}get sizeStr(){var e;return null===(e=this._lastAsset)||void 0===e?void 0:e.sizeStr}get author(){var e;return null===(e=this.entry)||void 0===e?void 0:e.owner_id}get updatedAt(){var e,t;return(null===(t=this._sourceData)||void 0===t?void 0:null===(e=t.entry)||void 0===e?void 0:e.access_at_ts)*1e3}get relation(){var e;return null===(e=this._sourceData._relation)||void 0===e?void 0:e.map(e=>`${e}`)}get meta(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e._meta}get assetCount(){return this._sourceData.n_asset}get asset(){return this._sourceData.assets||[]}get lastAssetId(){var e,t;let i=this.asset[this.asset.length-1],r=ez.sortArrayByRelation({exists:this.asset,relation:null!==(e=this.relation)&&void 0!==e?e:[]});return null!==(t=r[r.length-1])&&void 0!==t?t:i}get bindId(){return this._sourceData.bind_id}updateLastAsset(e){this._lastAsset=e}get draftName(){var e,t,i;return null!==(i=this._draftName)&&void 0!==i?i:null===(t=this.meta)||void 0===t?void 0:null===(e=t.draft)||void 0===e?void 0:e.name}get lastAsset(){return this._lastAsset}async tryGetDraftName(){var e,t,i,r,n,o,a;if(!this.bindId)return this._draftName=null===(t=this.meta)||void 0===t?void 0:null===(e=t.draft)||void 0===e?void 0:e.name,this._draftName;try{let e=await ez.getPackageByKey(this.bindId);return this._draftName=null!==(n=null==e?void 0:e.name)&&void 0!==n?n:null===(r=this.meta)||void 0===r?void 0:null===(i=r.draft)||void 0===i?void 0:i.name,this._draftName}catch(e){return null===(a=this.meta)||void 0===a?void 0:null===(o=a.draft)||void 0===o?void 0:o.name}}get permission(){var e,t;return ez.isGroupSdk?null!==(t=null===(e=this.entry)||void 0===e?void 0:e.permission)&&void 0!==t?t:G.PUBLIC:G.PERSONAL}get isPublic(){return this.permission===G.PUBLIC}get isPersonal(){return this.permission===G.PERSONAL}get owner(){var e,t;return(null===(t=this._sourceData._meta)||void 0===t?void 0:null===(e=t.uploadSource)||void 0===e?void 0:e.owner)||""}get entryId(){return this._sourceData.entry_id}get entry(){return this._sourceData.entry}get createdAt(){var e,t;return(null===(t=this._sourceData)||void 0===t?void 0:null===(e=t.entry)||void 0===e?void 0:e.created_at_ts)*1e3}constructor({cluster:e,lastAsset:t}){let i=E({obj:e,serializeKey:"meta",targetKey:"_meta"});super(i=E({obj:i,serializeKey:"relation",targetKey:"_relation"})),this._lastAsset=t,this.tryGetDraftName()}}class Q extends U{get type(){return F.FOLDER}get meta(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e.entry._meta}get id(){var e;return null===(e=this.entry)||void 0===e?void 0:e.entry_id}get notOnlyId(){return this._sourceData.id}get entry(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e.entry}get name(){var e;return null===(e=this._sourceData)||void 0===e?void 0:e.name}get subCnt(){return this._sourceData.sub_cnt}get updatedAt(){var e;return(null===(e=this._sourceData)||void 0===e?void 0:e.entry.access_at_ts)*1e3}get accessAt(){var e;return(null===(e=this._sourceData)||void 0===e?void 0:e.entry.access_at_ts)*1e3}get createdAt(){var e;return(null===(e=this._sourceData)||void 0===e?void 0:e.entry.created_at_ts)*1e3}get creator(){return this._sourceData.entry.creator_id}get permission(){return ez.isGroupSdk?this._sourceData.entry.permission||G.PUBLIC:G.PERSONAL}get isPublic(){return this.permission===G.PUBLIC}get isPersonal(){return this.permission===G.PERSONAL}get owner(){var e,t;return null===(t=this.meta)||void 0===t?void 0:null===(e=t.uploadSource)||void 0===e?void 0:e.owner}get author(){return this._sourceData.entry.owner_id}get size(){var e;return null!==(e=this._sourceData.size)&&void 0!==e?e:0}get sizeStr(){return"0"}constructor(e){super({...e,entry:E({obj:e.entry,serializeKey:"meta",targetKey:"_meta"})})}}function X(e,t){switch(k(e.mime)){case"video":if((e.filter_list||[]).includes(I.FILM_ASSET))return new Y(e);return new z(e);case"audio":return new V(e);case"image":if("livephoto"===e.sub_type)return new $(e);return new Z(e,t);default:return new W(e)}}function ee(e,t){var i,r;(null==ez?void 0:ez.options)&&(null==ez?void 0:null===(i=ez.options)||void 0===i?void 0:i.level)==="trace"&&console[null!==(r=null==t?void 0:t.type)&&void 0!==r?r:"info"](`EverCloud: ${e}`)}let et=(e,t)=>{if(e===G.PERSONAL){let e=!1;if(t.type===F.PACKAGE){if(t.subType===H.SCRIPT)return t.owner===ez.uid;e=t.creator===ez.everUserId||t.owner===ez.uid}return t.author===ez.everUserId||e}return t.isPublic};var ei="1.0.0";function er(){var e;return{uploadSource:{owner:null===(e=ez.options)||void 0===e?void 0:e.user_id,platform:"browser",systemVersion:window.navigator.userAgent,appVersion:ei}}}class en{async acquire(){return new Promise(e=>{this._availableConcurrency>0?(this._availableConcurrency--,e()):this._waitingQueue.push(e)})}release(){if(this._waitingQueue.length>0){let e=this._waitingQueue.shift();e&&e()}else this._availableConcurrency<this._maxConcurrency&&this._availableConcurrency++}constructor(e){this._maxConcurrency=e,this._availableConcurrency=e,this._waitingQueue=[]}}var eo=((d={}).Start="start",d.CompleteUpload="complete_upload",d.CalcMd5="calc_md5",d.CalcCrc="calc_crc",d.AnalyzeFile="analyze_file",d.UploadProcess="upload_process",d.Init="init",d.Error="error",d.PrepareAsset="prepare_asset",d.CreateAsset="create_asset",d.CancelFileAnalyze="cancel_file_analyze",d);class ea extends Error{constructor(){super("DuplicateNameError")}}class es extends Error{constructor(e){super("TranscodeError"),this.status=e}}class el extends Error{constructor(){super("Request Timeout")}}class ec extends Error{constructor(){super("Init Timeout")}}class ed extends Error{constructor(){super("Can not move public item to personal folder")}}class eu extends Error{constructor(e){super(`Folder depth can not more than ${e}`)}}class ep extends g.Z{destroy(){this.requestId="",this.isDestroy=!0,this.sdk.eventBus.removeListener(eH.BusDestroy,this.destroy),this.removeAllListeners()}constructor(e,t){super(),this.requestId="",this.isDestroy=!1,this.requestId=e,this.sdk=t,this.sdk.eventBus.addListener(eH.BusDestroy,this.destroy)}}var e_=((u={}).WaitingUpload="waitingUpload",u.Uploading="uploading",u.Success="success",u.Cancel="cancel",u.Error="error",u);class eg extends ep{destroy(){super.destroy()}}class eh extends ep{setRequestId(e){if("unknow"===this.requestId)this.requestId=e;else throw Error("request-id \u5DF2\u7ECF\u521D\u59CB\u5316\u5B8C\u6210\uFF0C\u8BF7\u52FF\u4FEE\u6539")}done(){return new Promise((e,t)=>{if(this.result){"success"===this.result.status?e(this.result):t(this.result);return}this.finishListenQueue.push([e,t])})}appendChunk(e){this.chunks.push(e)}async cancel(){return await this.sdk.sdk.cancel_upload(this.requestId)}destroy(){super.destroy(),this.chunks=[],this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.AssetDownloadIdle,this.onIdleHandler),this.sdk.eventBus.removeListener(eH.AssetDownloadProgress,this.onProgressHandler),this.sdk.eventBus.removeListener(eH.AssetDownloaddFinish,this.onFinishHandler)}thirdpartDone(e){let{buffer:t}=e;this.result={status:"success",buffer:t},this._finish()}_onIdleHandler(){var e;null===(e=this.onIdle)||void 0===e||e.call(this)}_onProgressHandler(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{total:e.bytes_total,done:e.bytes_done})}_onFinishHandler(e){if(e.completed){let e=function(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),i=0;return e.forEach(e=>{t.set(e,i),i+=e.length}),t}(this.chunks);this.result={status:"success",buffer:e},this.cacheSource(e)}else e.cancelled?this.result={status:"cancel"}:this.result={status:"error",errInfo:e.error_info};this._finish()}async cacheSource(e){var t;if(this.sdk.cachePlugin&&(null===(t=this._options)||void 0===t?void 0:t.url))try{await this.sdk.cachePlugin.saveSourceBlob({key:this._options.url,buffer:e}),ee(`\u{7F13}\u{5B58}\u{6587}\u{4EF6}${this._options.url}\u{6210}\u{529F}.`),console.log(`\u{7F13}\u{5B58}\u{6587}\u{4EF6}${this._options.url}\u{6210}\u{529F}.`)}catch(e){console.log(`\u{7F13}\u{5B58}\u{6587}\u{4EF6}${this._options.url}\u{5931}\u{8D25}: ${e}`),ee(`\u{7F13}\u{5B58}\u{6587}\u{4EF6}${this._options.url}\u{5931}\u{8D25}: ${e}`,{type:"warn"})}}_finish(){var e;for(let e of this.finishListenQueue)"success"===this.result.status?e[0](this.result):e[1](this.result);null===(e=this.onFinish)||void 0===e||e.call(this,this.result),this.destroy()}eventFilter(e){return t=>{let{request_id:i}=t;i===this.requestId&&e(t)}}constructor(e,t){super("unknow",t),this.size=0,this.chunks=[],this.finishListenQueue=[],this._options=e,this.onIdleHandler=this.eventFilter(this._onIdleHandler.bind(this)),this.onProgressHandler=this.eventFilter(this._onProgressHandler.bind(this)),this.onFinishHandler=this.eventFilter(this._onFinishHandler.bind(this)),this.sdk.eventBus.addListener(eH.AssetDownloadIdle,this.onIdleHandler),this.sdk.eventBus.addListener(eH.AssetDownloadProgress,this.onProgressHandler),this.sdk.eventBus.addListener(eH.AssetDownloaddFinish,this.onFinishHandler)}}class em extends eg{get fileType(){return this._fileType}done(){return new Promise((e,t)=>{if(this.result){"success"===this.result.status?e(this.result):t(this.result);return}this.finishListenQueue.push([e,t])})}async cancel(){return await this.sdk.sdk.cancel_upload(this.requestId)}destroy(){super.destroy(),this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.UploadIdle,this.onIdleHandler),this.sdk.eventBus.removeListener(eH.UploadProgress,this.onProgressHandler),this.sdk.eventBus.removeListener(eH.UploadFinish,this.onFinishHandler)}_onUploadMetaReadyHandler(e){var t;null===(t=this.onUploadMetaReady)||void 0===t||t.call(this,{uploadId:e.upload_id,md5:e.md5})}_onIdleHandler(e){var t;null===(t=this.onIdle)||void 0===t||t.call(this,e)}_onProgressHandler(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{total:e.bytes_total,done:e.bytes_done,md5:e.md5})}async _onFinishHandler(e){var t,i;if(e.completed){let t=e.asset_id,r=e.entry_id;if(!t){if(r)try{t=(await this.sdk.getEntryAsset(r,!0)).id}catch(i){t=(await this.sdk.getAssetByMd5(e.md5)).id}else t=(await this.sdk.getAssetByMd5(e.md5)).id}if(this._autoPromote){if(t)try{await this.sdk.dependencies.apiFunc.promoteAsset({assetId:t,spaceId:this.sdk.spaceId,workspaceId:this._workspaceId})}catch(e){this.result={status:"error",errInfo:{code:-1,msg:`asset promote failure, cause:${null==e?void 0:e.message}`}}}else this.result={status:"error",errInfo:{code:-1,msg:"asset id is not found, could not promote"}}}(null===(i=this.result)||void 0===i?void 0:i.status)!=="error"&&(this.result={status:"success",fileId:t,md5:e.md5,entry:e.entry,entryId:r})}else e.cancelled?this.result={status:"cancel"}:this.result={status:"error",errInfo:{code:e.error_info.code,msg:e.error_info.message,message:e.error_info.message}};for(let e of this.finishListenQueue)"success"===this.result.status?e[0](this.result):e[1](this.result);null===(t=this.onFinish)||void 0===t||t.call(this,this.result),this.destroy()}eventFilter(e){return t=>{let{request_id:i}=t;i===this.requestId&&e(t)}}constructor({requestId:e,fileType:t,autoPromote:i,workspaceId:r},n){super(e,n),this._autoPromote=!1,this.finishListenQueue=[],this._fileType=t,this._autoPromote=i,this._workspaceId=r,this.onIdleHandler=this.eventFilter(this._onIdleHandler.bind(this)),this.onUploadMetaReadyHandler=this.eventFilter(this._onUploadMetaReadyHandler.bind(this)),this.onProgressHandler=this.eventFilter(this._onProgressHandler.bind(this)),this.onFinishHandler=this.eventFilter(this._onFinishHandler.bind(this)),this.sdk.eventBus.addListener(eH.UploadIdle,this.onIdleHandler),this.sdk.eventBus.addListener(eH.UploadMetaReady,this.onUploadMetaReadyHandler),this.sdk.eventBus.addListener(eH.UploadProgress,this.onProgressHandler),this.sdk.eventBus.addListener(eH.UploadFinish,this.onFinishHandler)}}class ev extends eg{get fileType(){var e;return null===(e=this._params)||void 0===e?void 0:e.fileType}done(){return new Promise((e,t)=>{if(this.result){"success"===this.result.status?e(this.result):t(this.result);return}this.finishListenQueue.push([e,t])})}cancel(e){return new Promise(async(t,i)=>{var r,n,o,a;if(null===(r=this._params)||void 0===r?void 0:r.uploader){try{await (null===(o=this._params.uploader)||void 0===o?void 0:null===(n=o.cancel)||void 0===n?void 0:n.call(o,e)),this.finishListenQueue=this.finishListenQueue.filter(t=>t.fileKey===e),null===(a=this.onCancel)||void 0===a||a.call(this,e),t()}catch(e){console.error(e),i(null==e?void 0:e.message)}return}i("uploader does not exist")})}destroy(){this._params=void 0,this.finishListenQueue=[]}onFinishHandler(){var e,t;for(let e of this.finishListenQueue)(null===(t=this.result)||void 0===t?void 0:t.status)==="success"?e[0](this.result):e[1](this.result);null===(e=this.onFinish)||void 0===e||e.call(this,this.result),this.destroy()}constructor(e,t){let i;super("unknow",t),this.finishListenQueue=[],this._params=e;let r="video";switch(e.fileType){case"video":r="video",i=0;break;case"audio":r="video",i=2;break;default:r="object",i=1}this.onStart=e.onStart,e.uploader.upload({file:e.file,type:r,onSuccess:async t=>{this.result={status:"success"};let r=t.Vid||t.Uri;this.vid=r;try{let n=await this.sdk.dependencies.apiFunc.createVideoData({vid:r,tmp_id:this.sdk.getTempId,file_name:e.fileName,file_type:i,source_path:e.file.webkitRelativePath?e.file.webkitRelativePath:e.fileName});this.result.fileId=n,this.result.uri=t.Uri}catch(e){var n,o;this.result.status="error",this.result.errInfo={code:(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.ret)||-1,msg:(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.errmsg)||"create video task failure"}}this.onFinishHandler()},onError:e=>{var t;this.result={status:"error",errInfo:{code:null==e?void 0:null===(t=e.extra)||void 0===t?void 0:t.errorCode}},this.onFinishHandler()},onStart:(e,t)=>{var i,r;null===(i=this.onIdle)||void 0===i||i.call(this),null===(r=this.onStart)||void 0===r||r.call(this,e,t)},onProgress:e=>{var t;null===(t=this.onProgress)||void 0===t||t.call(this,{total:e.fileSize,done:Math.floor(e.fileSize*(e.percent/100))})}})}}class ef extends ep{destroy(){super.destroy()}}class ey extends ef{done(){return new Promise((e,t)=>{this.result&&("success"===this.result.status?e(this.result):t(this.result)),this.finishListenQueue.push([e,t])})}async cancel(){return await this.sdk.sdk.cancel_get_asset_play_info_loop({ids:this.target.id})}destroy(){super.destroy(),this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.VideoInfoEndPullEvent,this.onTranscodeDoneHandler)}_onTranscodeDoneHandler(e){for(let t of e.infos)if(t[this.target.key]===this.target.id){this.result={status:"success",data:t},this.onFinishHandler();return}for(let t of e.failed_ids)if(t[this.target.key]===this.target.id){this.result={status:"error",errInfo:new es(t.status)},this.onFinishHandler();return}}onFinishHandler(){var e,t;for(let e of this.finishListenQueue)(null===(t=this.result)||void 0===t?void 0:t.status)==="success"?e[0](this.result):e[1](this.result);null===(e=this.onFinish)||void 0===e||e.call(this,this.result),this.destroy()}constructor(e,t){super("unknow",t),this.finishListenQueue=[],this.target=e,this.onTranscodeDoneHandler=this._onTranscodeDoneHandler.bind(this),this.sdk.eventBus.addListener(eH.VideoInfoEndPullEvent,this.onTranscodeDoneHandler)}}class ew extends ef{done(){return new Promise((e,t)=>{if(this.result){"success"===this.result.status?e(this.result):t(this.result);return}this.finishListenQueue.push([e,t])})}async cancel(){this.result={status:"cancel"},this.onFinishHandler()}destroy(){super.destroy(),clearInterval(this.timer),this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.VideoInfoEndPullEvent,this.onTranscodeDoneHandler)}async fetchVideoTaskInfo(){try{let e=await this.sdk.dependencies.apiFunc.getVideoTaskInfo(this.options);switch(this.delayTime=Date.now(),e.status){case 0:return;case 1:this.result={status:"success",data:e},this.onFinishHandler();return;default:this.onFinishHandler(),this.result={status:"error",errInfo:new TranscodeError};return}}catch(e){this.result={status:"error",errInfo:{code:e.data.ret,msg:e.data.errmsg}},this.onFinishHandler()}}onFinishHandler(){var e,t;for(let e of this.finishListenQueue)(null===(t=this.result)||void 0===t?void 0:t.status)==="success"?e[0](this.result):e[1](this.result);null===(e=this.onFinish)||void 0===e||e.call(this,this.result),this.destroy()}constructor(e,t){super("unknow",t),this.delayTime=Date.now(),this.Delay_Times=12e3,this.finishListenQueue=[],this.options=e,this.timer=setInterval(()=>{Date.now()-this.delayTime>this.Delay_Times?(this.result={status:"error",errInfo:{code:-1,msg:"overtime"}},this.onFinishHandler()):this.fetchVideoTaskInfo()},3e3)}}class eb extends ep{done(){return new Promise((e,t)=>{if(this.result){"success"===this.result.status?e(this.result):t(this.result);return}this.finishListenQueue.push([e,t])})}async cancel(){return await this.sdk.sdk.cancel_get_sync_state_loop({resource:[this.target.id]})}destroy(){super.destroy(),this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.ThridPartResourceSyncStateEvent,this.onSyncAssetHandler)}_onSyncAssetHandler(e){for(let t of e.sync_ids)if(t.resource_id===this.target.id){this.result={status:"success",data:{resourceId:t.resource_id,md5:t.md5,assetId:t.asset_id,entryId:t.entry_id}},this.onFinishHandler();return}for(let t of e.failed_ids)if(t===this.target.id){this.result={status:"error"},this.onFinishHandler();return}if(1===e.api_failed){this.result={status:"error",errMsg:"Network failure"},this.onFinishHandler();return}}onFinishHandler(){var e,t;for(let e of this.finishListenQueue)(null===(t=this.result)||void 0===t?void 0:t.status)==="success"?e[0](this.result):e[1](this.result);null===(e=this.onFinish)||void 0===e||e.call(this,this.result),this.destroy()}constructor(e,t){super("unknow",t),this.finishListenQueue=[],this.target=e,this.onSyncAssetHandler=this._onSyncAssetHandler.bind(this),this.sdk.eventBus.addListener(eH.ThridPartResourceSyncStateEvent,this.onSyncAssetHandler)}}class eS{done(){return new Promise((e,t)=>{this.result&&("success"===this.result.status?e(this.result):t(this.result)),this.finishListenQueue.push([e,t])})}async cancel(){return await this.sdk.sdk.cancel_get_preivew_info_loop({ids:"id"===this.target.key?[this.target.id]:[],md5s:"md5"===this.target.key?[this.target.id]:[]})}destroy(){this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.PreviewInfoEndPullEvent,this.onDoneHandler)}_onDoneHandler(e){for(let t of e.infos)if(t[this.target.key]===this.target.id){this.result={status:"success",data:X(t,this.sdk)},this.onFinishHandler();return}e.timeout&&(this.result={status:"error",errInfo:new el})}onFinishHandler(){var e,t;for(let e of this.finishListenQueue)(null===(t=this.result)||void 0===t?void 0:t.status)==="success"?e[0](this.result):e[1](this.result);null===(e=this.onFinish)||void 0===e||e.call(this,this.result),this.destroy()}constructor(e,t){this.finishListenQueue=[],this.target=e,this.sdk=t,this.onDoneHandler=this._onDoneHandler.bind(this),this.sdk.eventBus.addListener(eH.PreviewInfoEndPullEvent,this.onDoneHandler)}}class eC{done(){return new Promise((e,t)=>{this.result&&("success"===this.result.status?e(this.result):t(this.result)),this.finishListenQueue.push([e,t])})}async cancel(){return await this.sdk.sdk.cancel_get_preivew_info_loop({ids:"id"===this.target.key?[this.target.id]:[],md5s:"md5"===this.target.key?[this.target.id]:[]})}destroy(){this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.SpriteInfoEndPullEvent,this.onDoneHandler)}_onDoneHandler(e){for(let t of e.infos)if(t[this.target.key]===this.target.id){this.result={status:"success",data:X(t)},this.onFinishHandler();return}e.timeout&&(this.result={status:"error",errInfo:new el})}onFinishHandler(){var e,t;for(let e of this.finishListenQueue)(null===(t=this.result)||void 0===t?void 0:t.status)==="success"?e[0](this.result):e[1](this.result);null===(e=this.onFinish)||void 0===e||e.call(this,this.result),this.destroy()}constructor(e,t){this.finishListenQueue=[],this.target=e,this.sdk=t,this.onDoneHandler=this._onDoneHandler.bind(this),this.sdk.eventBus.addListener(eH.SpriteInfoEndPullEvent,this.onDoneHandler)}}class ek extends ep{done(){return new Promise((e,t)=>{this.result&&("success"===this.result.status?e(this.result):t(this.result)),this.finishListenQueue.push([e,t])})}destroy(){super.destroy(),this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.PreviewInfoEndPullEvent,this.onDoneHandler)}_onProgressHandler(e){if(e.process_id=this.requestId){var t;null===(t=this.onProgress)||void 0===t||t.call(this,e.progress)}}_onDoneHandler(e){let{process_id:t,status:i}=e;if(t===this.requestId){var r,n;if(3===i){this.result={status:"success",data:e},this._onFinishHandler(),null===(r=this.onProgress)||void 0===r||r.call(this,100);return}if(4===i){this.result={status:"error",data:e},this._onFinishHandler(),null===(n=this.onProgress)||void 0===n||n.call(this,100);return}}}_onFinishHandler(){for(let t of this.finishListenQueue){var e;(null===(e=this.result)||void 0===e?void 0:e.status)==="success"?t[0](this.result):t[1](this.result)}this.destroy()}constructor(e,t){super(e,t),this.finishListenQueue=[],this.onDoneHandler=this._onDoneHandler.bind(this),this.onProgressHandler=this._onProgressHandler.bind(this),this.sdk.eventBus.addListener(eH.SpaceMoveProgressEvent,this.onProgressHandler),this.sdk.eventBus.addListener(eH.SpaceMoveFinishEvent,this.onDoneHandler)}}class eE extends ep{done(){return new Promise((e,t)=>{this.result&&("success"===this.result.status?e(this.result):t(this.result)),this.finishListenQueue.push([e,t])})}destroy(){super.destroy(),this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.PreviewInfoEndPullEvent,this.onDoneHandler)}_onProgressHandler(e){if(e.process_id=this.requestId){var t;null===(t=this.onProgress)||void 0===t||t.call(this,e.progress)}}_onDoneHandler(e){let{process_id:t,status:i}=e;if(t===this.requestId){var r,n;if(3===i){this.result={status:"success",data:e},this._onFinishHandler(),null===(r=this.onProgress)||void 0===r||r.call(this,100);return}if(4===i){this.result={status:"error",data:e},null===(n=this.onProgress)||void 0===n||n.call(this,100),this._onFinishHandler();return}}}_onFinishHandler(){for(let t of this.finishListenQueue){var e;(null===(e=this.result)||void 0===e?void 0:e.status)==="success"?t[0](this.result):t[1](this.result)}this.destroy()}constructor(e,t){super(e,t),this.finishListenQueue=[],this.sdk=t,this.onDoneHandler=this._onDoneHandler.bind(this),this.onProgressHandler=this._onProgressHandler.bind(this),this.sdk.eventBus.addListener(eH.SpaceCopyProgressEvent,this.onProgressHandler),this.sdk.eventBus.addListener(eH.SpaceCopyFinishEvent,this.onDoneHandler)}}class eI extends ef{done(){return new Promise((e,t)=>{this.result&&this.result.status&&("success"===this.result.status?e(this.result):t(this.result)),this.finishListenQueue.push([e,t])})}async cancel(){var e,t;return this.result.status="cancel",null===(t=this.result)||void 0===t||null===(e=t.data)||void 0===e||e.forEach((e,t)=>{if(e===D.UNTRANSCODE){var i,r;null===(r=this.result)||void 0===r||null===(i=r.data)||void 0===i||i.set(t,D.CANCEL)}}),await this.sdk.sdk.cancel_image_transcode_info_loop({listeners:this.target.map(e=>({...e,transcode_type:M[e.resolution]})),cancel_all:0})}destroy(){super.destroy(),clearTimeout(this._triggerTimer),this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.ImageTranscodeInfoEndPull,this.onTranscodeDoneHandler)}_triggerGetUpdates(){this._triggerTimer=setTimeout(()=>{this.sdk.throttlingGetUpdatesTrigger({throttle:this._triggerTimes}),this._triggerTimer=void 0,this._triggerGetUpdates()},this._triggerTimes)}_onTranscodeDoneHandler(e){var t,i,r,n;if(e.timeout){null===(t=this.result.data)||void 0===t||t.forEach((e,t)=>{if(e===D.UNTRANSCODE){var i;null===(i=this.result.data)||void 0===i||i.set(t,D.TIMEOUT),this.finishedFlag+=1}}),null===(i=this.onProcess)||void 0===i||i.call(this,this.result),this.result.status="error",this.onFinishHandler();return}for(let t of e.infos){let e=!1,{transcode_type:i,assets:o,failed_list:a}=t,s=O[i];null==o||o.forEach(t=>{var i,r,n,o,a,l,c,d;let u=`${s}_${t.id}`,p=`${s}_${t.md5}`;(null===(r=this.result)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.get(u))===D.UNTRANSCODE&&(null===(l=this.result)||void 0===l||null===(a=l.data)||void 0===a||a.set(u,D.SUCCESS),this.finishedFlag+=1,e=!0),(null===(o=this.result)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.get(p))===D.UNTRANSCODE&&(null===(d=this.result)||void 0===d||null===(c=d.data)||void 0===c||c.set(p,D.SUCCESS),this.finishedFlag+=1,e=!0)}),null==a||a.forEach(t=>{var i,r,n,o,a,l,c,d;let u=`${s}_${t.asset_id}`,p=`${s}_${t.md5}`;(null===(r=this.result)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.get(u))===D.UNTRANSCODE&&(null===(l=this.result)||void 0===l||null===(a=l.data)||void 0===a||a.set(u,D.FAILED),this.finishedFlag+=1,e=!0),(null===(o=this.result)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.get(p))===D.UNTRANSCODE&&(null===(d=this.result)||void 0===d||null===(c=d.data)||void 0===c||c.set(p,D.FAILED),this.finishedFlag+=1,e=!0)}),e&&(null===(n=this.onProcess)||void 0===n||n.call(this,this.result)),(null===(r=this.result.data)||void 0===r?void 0:r.size)===this.finishedFlag&&(this.result.status="success",this.onFinishHandler())}}onFinishHandler(){var e,t;for(let e of this.finishListenQueue)(null===(t=this.result)||void 0===t?void 0:t.status)==="success"?e[0](this.result):e[1](this.result);null===(e=this.onFinish)||void 0===e||e.call(this,this.result),this.destroy()}constructor(e,t){super("unknow",t),this.result={data:new Map},this.finishedFlag=0,this.finishListenQueue=[],this._triggerTimes=3e3,this.target=e,e.forEach(e=>{var t,i;null===(t=e.ids)||void 0===t||t.forEach(t=>{var i,r;null===(r=this.result)||void 0===r||null===(i=r.data)||void 0===i||i.set(`${e.resolution}_${t}`,D.UNTRANSCODE)}),null===(i=e.md5s)||void 0===i||i.forEach(t=>{var i,r;null===(r=this.result)||void 0===r||null===(i=r.data)||void 0===i||i.set(`${e.resolution}_${t}`,D.UNTRANSCODE)})}),this._triggerGetUpdates(),this.onTranscodeDoneHandler=this._onTranscodeDoneHandler.bind(this),this.sdk.eventBus.addListener(eH.ImageTranscodeInfoEndPull,this.onTranscodeDoneHandler)}}function eT(){return function(e,t,i){let r=i.value;return"function"==typeof r&&(i.value=async function(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return await (null===this||void 0===this?void 0:null===(e=this.syncDone)||void 0===e?void 0:e.call(this)),await r.apply(this,i)}),i}}function eP(){return function(e,t,i){let r=i.value;return"function"==typeof r&&(i.value=async function(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return await (null===this||void 0===this?void 0:null===(e=this.init)||void 0===e?void 0:e.call(this)),await r.apply(this,i)}),i}}function eA(){return function(e,t,i){let r=i.value;return"function"==typeof r&&(i.value=async function(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];let o=await r.apply(this,i);return null===this||void 0===this||null===(e=this.emitUserSpaceSizeChange)||void 0===e||e.call(this),o}),i}}class eR{get hasBeenDone(){return this._hasBeenDone}get costTimes(){if(!this._initCostTimes)return;let{start:e,end:t}=this._initCostTimes;return(t||Date.now())-e}get initResult(){if(!!this._hasBeenDone)return{resolve:this.resolveResult,reject:this.rejectResult}}get isIniting(){return this._isIniting}awaitForInit(){let e,t,{key:i,timeout:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._hasBeenDone&&this.initResult){let{resolve:e,reject:t}=this.initResult;return t?Promise.reject(t):Promise.resolve(e)}if(i&&this._waitingResolverMap.has("key"))return this._waitingResolverMap.get("key");if(!r){let e=new Promise((e,t)=>{this._waitingResolvers.add([e,t])});return i&&this._waitingResolverMap.set(i,e),e}let n=Promise.race([new Promise((i,r)=>{e=[()=>{clearTimeout(t),i()},r],this._waitingResolvers.add([e,r])}),new Promise((i,n)=>{t=setTimeout(()=>{this._waitingResolvers.delete(e),n(Error("Timed out waiting for init"))},r)})]);return i&&this._waitingResolverMap.set(i,n),n}startToInit(){return!this._hasBeenDone&&!this._isIniting&&(this._isIniting=!0,this._initCostTimes={start:Date.now()},!0)}initDone(e){if(this._hasBeenDone)throw Error("Cannot release an inited locker");this._initCostTimes&&(this._initCostTimes.end=Date.now());let t=!1;for(let i of((null==e?void 0:e.reject)?(t=!0,this.rejectResult=e.reject):this.resolveResult=null==e?void 0:e.resolve,this._waitingResolvers))t?i[1](this.rejectResult):i[0](this.resolveResult);this._waitingResolverMap.clear(),this._waitingResolvers.clear(),this._hasBeenDone=!0,this._isIniting=!1}constructor(){this._hasBeenDone=!1,this._isIniting=!1,this._initCostTimes=void 0,this._waitingResolvers=new Set,this._waitingResolverMap=new Map}}class ex{addParams(e){this.data=(0,y.merge)({},this.data,e)}get reportData(){return{event:this.event,data:this.data}}addProcessParams(e){this.process=(0,y.merge)({},this.process,e)}get reportProcess(){return{event:this.progressEvent,data:this.process}}constructor(){this.event="evercloud_sdk_init_timer",this.data={},this.progressEvent="evercloud_sdk_init_process",this.process={}}}class eN extends ep{uploadDone(){return new Promise((e,t)=>{if(this.result){"success"===this.result.status?e(this.result):t(this.result);return}this.finishListenQueue.push([e,t])})}done(){return new Promise((e,t)=>{if(this.result){"success"===this.result.status?e(this.result):t(this.result);return}this.finishListenQueue.push([e,t])})}async cancel(){return await this.sdk.sdk.cancel_upload(this.requestId)}async append(e){return this.sdk.appendClipToUpload(this.requestId,e.seqNo,e.file,e.isLast)}destroy(){super.destroy(),this.finishListenQueue=[],this.sdk.eventBus.removeListener(eH.UploadIdle,this.onIdleHandler),this.sdk.eventBus.removeListener(eH.UploadProgress,this.onProgressHandler),this.sdk.eventBus.removeListener(eH.UploadFinish,this.onFinishHandler)}_onIdleHandler(e){var t;null===(t=this.onIdle)||void 0===t||t.call(this,e)}_onProgressHandler(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{done:e.bytes_done})}async _onFinishHandler(e){var t,i,r,n;for(let t of(e.completed?e.stream_clip_transcode?this.result={status:"success",uploadId:e.stream_clip_transcode.upload_id,bucketKey:e.stream_clip_transcode.bucket_key,streamId:e.stream_clip_transcode.stream_id,streamM3u8:e.stream_clip_transcode.stream_m3u8,streamMp4:e.stream_clip_transcode.stream_mp4,streamMd5:e.stream_clip_transcode.stream_md5,coverUrl:e.stream_clip_transcode.cover_url,spriteUrl:e.stream_clip_transcode.sprite_url,streamDuration:e.stream_clip_transcode.stream_duration}:this.result={status:"error",errInfo:{code:"NO_TRANSCODE_INFO",msg:"NO_TRANSCODE_INFO"}}:e.cancelled?(this.result={status:"cancel"},null===(i=this.onError)||void 0===i||i.call(this,this.result)):(this.result={status:"error",errInfo:e.error_info,failedPartList:(null===(r=e.stream_clip_err_ext)||void 0===r?void 0:r.part_num)?[e.stream_clip_err_ext.part_num]:[]},null===(n=this.onError)||void 0===n||n.call(this,this.result)),this.finishListenQueue))"success"===this.result.status?t[0](this.result):t[1](this.result);null===(t=this.onFinish)||void 0===t||t.call(this,this.result),this.destroy()}eventFilter(e){return t=>{let{request_id:i}=t;i===this.requestId&&e(t)}}constructor({requestId:e},t){super(e,t),this.finishListenQueue=[],this.onIdleHandler=this.eventFilter(this._onIdleHandler.bind(this)),this.onProgressHandler=this.eventFilter(this._onProgressHandler.bind(this)),this.onFinishHandler=this.eventFilter(this._onFinishHandler.bind(this)),this.sdk.eventBus.addListener(eH.UploadIdle,this.onIdleHandler),this.sdk.eventBus.addListener(eH.UploadProgress,this.onProgressHandler),this.sdk.eventBus.addListener(eH.UploadFinish,this.onFinishHandler)}}var eL=i("685327"),eO=i("551377");let eM=function(){return!r&&(r=new eL.k({entryCDN:eO.x.entryCDN,wasmCDN:eO.x.wasmCDN})),r};class eD{get md5(){return this._md5}analyzeFileMd5(e){let{file:t,onError:i}=e;this._fileMd5Calculator.calcFileMd5(t).then(e=>{if(e.ok){var r,n;this._md5=e.value,null===(r=(n=this._options).onMd5Ready)||void 0===r||r.call(n)}else null==i||i({code:-1,msg:`[error]file md5 cal failed, file name is ${t.name} and file size is ${t.size} ]}`})}).catch(e=>{null==i||i({code:-1,msg:`[error]file md5 cal failed, ${e.message}`})})}constructor(e){this._options=e,this._fileMd5Calculator=eM()}}function ej(){let e,t;let i=new Promise((i,r)=>{e=i,t=r});return{resolve:e,reject:t,promise:i}}var eF=((p={})[p.UNKNOWN=-1]="UNKNOWN",p[p.SUCCESS=0]="SUCCESS",p[p.UPLOADING=3]="UPLOADING",p[p.FAILURE=4]="FAILURE",p);class eU extends eg{get fileType(){return this._params.fileType}done(){return new Promise((e,t)=>{if(this._result){"success"===this._result.status?e(this._result):t(this._result);return}this._finishListenQueue.push([e,t])})}cancel(e){return new Promise(async(t,i)=>{var r,n,o,a,s,l;if(null===(r=this._params)||void 0===r?void 0:r.uploader){try{await (null===(s=this._params.uploader)||void 0===s?void 0:null===(a=s.cancel)||void 0===a?void 0:a.call(s,this._uploadKey)),this._uploadStatus=e_.Cancel,this._finishListenQueue=this._finishListenQueue.filter(t=>t.fileKey===e),this._result=this._formatCancelResponse(),this._didUploadedDefer.reject({code:-1,msg:"[warn]cancel analyze because cancel upload"}),null===(l=this.onCancel)||void 0===l||l.call(this,this._uploadKey),t()}catch(e){console.error(e),i(null==e?void 0:e.message)}null===(n=(o=this._params).onCancel)||void 0===n||n.call(o);return}i("uploader does not exist")})}destroy(){this._finishListenQueue=[]}async _onFinishHandler(){var e,t,i,r,n,o;if(this._uploadStatus!==e_.Error){if(this._params.autoPromote){let e=null===(n=this._createAssetResult)||void 0===n?void 0:null===(r=n.cloud_asset)||void 0===r?void 0:r.asset_id;if(e)try{await this.sdk.dependencies.apiFunc.promoteAsset({assetId:e,spaceId:this.sdk.spaceId,workspaceId:this._params.workspaceId})}catch(e){this._result={status:"error",errInfo:{code:-1,msg:`[error]asset promote failure, cause:${null==e?void 0:e.message}`}}}else this._result=this._formatErrorResponse({code:-1,msg:"[error]asset id is not found, could not promote"})}for(let e of this._finishListenQueue)(null===(o=this._result)||void 0===o?void 0:o.status)==="success"?e[0](this._result):e[1](this._result);if(null===(e=this.onFinish)||void 0===e||e.call(this,this._result),null===(t=(i=this._params).onFinish)||void 0===t||t.call(i),this._params.startTime){let e=Date.now()-this._params.startTime;this._reportUploadAnalyze({action:eo.CompleteUpload,size:this._params.file.size,duration:e,isInstantlyUpload:this._isFileExistOnCloud,filename:this._params.file.name})}this.destroy()}}async _onErrorHandler(){var e,t,i,r,n,o,a,s,l,c;if(this._uploadStatus!==e_.Success&&this._uploadStatus!==e_.Error&&this._uploadStatus!==e_.Cancel){for(let a of(await (null===(t=this._params.uploader)||void 0===t?void 0:null===(e=t.cancel)||void 0===e?void 0:e.call(t,this._uploadKey)),this._reportUploadAnalyze({action:eo.Error,size:this._params.file.size,code:null===(r=this._result)||void 0===r?void 0:null===(i=r.errInfo)||void 0===i?void 0:i.code,errorMsg:null===(o=this._result)||void 0===o?void 0:null===(n=o.errInfo)||void 0===n?void 0:n.msg,filename:this._params.file.name}),this._uploadStatus=e_.Error,this._finishListenQueue))(null===(c=this._result)||void 0===c?void 0:c.status)==="success"?a[0](this._result):a[1](this._result);null===(a=this.onFinish)||void 0===a||a.call(this,this._result),null===(s=(l=this._params).onFinish)||void 0===s||s.call(l),this.destroy()}}_listenDidPreparedAndDidUploaded(){Promise.all([this._didPreparedDefer.promise,this._didUploadedDefer.promise]).then(async()=>{var e,t,i,r,n;try{if(!this._isFileExistOnCloud&&!this._uploadedFileMeta)throw Error("[error]file not exist on server, but no uploaded file meta.");let i=Date.now(),r=await this._postCreateAsset({everphoto_id:null===(e=this._prepareResult)||void 0===e?void 0:e.everphoto_user_id,asset:this._getAssetInfoForCreating()});this._createAssetResult=r,this._result=this._formatSuccessResponse({assetId:r.cloud_asset.asset_id,md5:this._fileInfoAnalyze.md5,entryId:null===(t=r.cloud_file_entry)||void 0===t?void 0:t.entry_id,entry:r.cloud_file_entry}),this._uploadStatus=e_.Success;let n=Date.now()-i;this._reportUploadAnalyze({action:eo.CreateAsset,size:this._params.file.size,duration:n,isInstantlyUpload:this._isFileExistOnCloud,filename:this._params.file.name})}catch(e){this._result=this._formatErrorResponse({code:(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.ret)||-1,msg:`[error]create asset failure: ${null!==(n=null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.errmsg)&&void 0!==n?n:e}`}),this._onErrorHandler();return}this._onFinishHandler()}).catch(e=>{var t;return this._reportUploadAnalyze({action:eo.CancelFileAnalyze,size:this._params.file.size,code:e.code,errorMsg:null!==(t=e.msg)&&void 0!==t?t:e,filename:this._params.file.name})})}_formatSuccessResponse(e){let{assetId:t,md5:i,entryId:r,entry:n}=e;return{status:"success",fileId:t,entryId:r,md5:i,entry:n}}_formatErrorResponse(e){let{code:t,msg:i}=e;return{status:"error",errInfo:{code:Number(t),msg:i}}}_formatCancelResponse(){return{status:"cancel"}}_getAssetInfoForCreating(){var e;let t;try{t=JSON.stringify(this._params.meta)}catch{t="{}"}let i={size:this._params.file.size,workspace_id:this._params.workspaceId,filename:this._params.fileName,upload_id:this._prepareResult.upload_id,preserve_video_multi_definition:this._params.isMultiDefTranscode,if_image_async_resize:!0,transcode_template_type:this._params.transcodeTemplateType,permission:this._params.permission,space_id:"0",flags:this._params.flags,file_type:this._params.fileType,folder_id:this._params.folderId,meta:t,md5:this._fileInfoAnalyze.md5,no_copy:this._params.noCopy};if(this._isFileExistOnCloud)return i;return{uri:null===(e=this._uploadedFileMeta)||void 0===e?void 0:e.uri,...i}}_handleFileAnalyzeError(e){var t;this._result=this._formatErrorResponse({code:e.code,msg:null!==(t=e.msg)&&void 0!==t?t:e}),this._onErrorHandler()}_reportUploadAnalyze(e){let{action:t,duration:i,size:r,isInstantlyUpload:n,errorMsg:o,code:a}=e;this.sdk.reportUploadAnalyze({action:t,size:r,duration:i,isInstantlyUpload:n,errorMsg:o,code:a,uploaderType:eB.Vod,filename:e.filename})}constructor(e,t){super("unknow",t),this._finishListenQueue=[],this._uploadStatus=e_.WaitingUpload,this._didPreparedDefer=ej(),this._didUploadedDefer=ej(),this._isFileExistOnCloud=!1,this._handleFileInfoAnalyzed=async()=>{var e,t,i,r,n,o,a,s,l;try{let a=Date.now(),s=await this._sdk.dependencies.apiFunc.prepareUpload({workspace_id:null===(e=this._params)||void 0===e?void 0:e.workspaceId,space_id:"0",md5:this._fileInfoAnalyze.md5,size:null===(t=this._params)||void 0===t?void 0:t.file.size,file_type:this._params.fileType,flags:null===(i=this._params)||void 0===i?void 0:i.flags});this._prepareResult=s,null===(r=this.onUploadMetaReady)||void 0===r||r.call(this,{uploadId:this._prepareResult.upload_id,md5:this._fileInfoAnalyze.md5});let l=Date.now()-a;if(this._reportUploadAnalyze({action:eo.PrepareAsset,size:this._params.file.size,duration:l,filename:this._params.file.name}),this._didPreparedDefer.resolve(),(null==s?void 0:s.state)===eF.SUCCESS)await (null===(o=this._params.uploader)||void 0===o?void 0:null===(n=o.cancel)||void 0===n?void 0:n.call(o,this._uploadKey)),this._isFileExistOnCloud=!0,this._didUploadedDefer.resolve();else if((null==s?void 0:s.state)===eF.FAILURE){let e={code:-1,msg:"[error] prepare upload response fail"};this._didUploadedDefer.reject(e),this._result=this._formatErrorResponse(e),this._onErrorHandler()}}catch(t){let e=`[error]prepare upload failure: ${null!==(l=null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.errmsg)&&void 0!==l?l:t}`;this._result=this._formatErrorResponse({code:(null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.ret)||-1,msg:e}),this._didPreparedDefer.reject({code:-1,msg:e}),this._onErrorHandler()}},this._postCreateAsset=async e=>this._sdk.dependencies.apiFunc.createAsset(e);let i="video";switch(this._params=e,this._sdk=t,e.fileType){case"video":case"audio":i="video";break;default:i="object"}this.onStart=e.onStart;let r=Date.now();e.uploader.upload({file:e.file,type:i,onSuccess:async t=>{if(this._uploadStatus===e_.Cancel)return;if("video"===e.fileType||"audio"===e.fileType){var i,n,o,a,s;this._uploadedFileMeta={duration:null===(i=t.VideoMeta)||void 0===i?void 0:i.Duration,height:null===(n=t.VideoMeta)||void 0===n?void 0:n.Height,width:null===(o=t.VideoMeta)||void 0===o?void 0:o.Width,size:null===(a=t.VideoMeta)||void 0===a?void 0:a.Size,uri:null===(s=t.VideoMeta)||void 0===s?void 0:s.Uri}}else this._uploadedFileMeta={uri:t.Uri};let l=Date.now()-r;this._reportUploadAnalyze({action:eo.UploadProcess,size:e.file.size,duration:l,isInstantlyUpload:this._isFileExistOnCloud,filename:e.file.name}),this._didUploadedDefer.resolve()},onError:e=>{var t,i,r;let n=`[error]error from uploader: [${null==e?void 0:null===(t=e.extra)||void 0===t?void 0:t.errorCode}] ${null==e?void 0:null===(i=e.extra)||void 0===i?void 0:i.message}`;this._didUploadedDefer.reject({code:-1,msg:n}),this._result=this._formatErrorResponse({code:null==e?void 0:null===(r=e.extra)||void 0===r?void 0:r.errorCode,msg:n}),this._onErrorHandler()},onStart:(e,t)=>{var i,r;null===(i=this.onIdle)||void 0===i||i.call(this),null===(r=this.onStart)||void 0===r||r.call(this,e,t),this._uploadKey=e},onProgress:e=>{var t,i,r;this._uploadStatus=e_.Uploading,null===(t=this.onProgress)||void 0===t||t.call(this,{total:e.fileSize,done:Math.floor(e.fileSize*(e.percent/100))}),null===(i=(r=this._params).onProgress)||void 0===i||i.call(r,{total:e.fileSize,done:Math.floor(e.fileSize*(e.percent/100)),progress:e})}});let n=Date.now();this._fileInfoAnalyze=new eD({onMd5Ready:()=>{let t=Date.now()-n;this._handleFileInfoAnalyzed(),this._reportUploadAnalyze({action:eo.AnalyzeFile,size:e.file.size,duration:t,filename:e.file.name})}}),this._fileInfoAnalyze.analyzeFileMd5({file:e.file,onError:this._handleFileAnalyzeError}),this._listenDidPreparedAndDidUploaded()}}var eB=((_={}).Vod="vod",_.Normal="normal",_);let eH={BusDestroy:"destroy",UploadMetaReady:"asset_upload_meta_ready",UploadIdle:"asset_upload_idle",UploadProgress:"asset_upload_progress",UploadFinish:"asset_upload_finish",AssetDownloadIdle:"asset_download_idle",AssetDownloadProgress:"asset_download_progress",AssetDownloaddFinish:"asset_download_finish",VideoInfoEndPullEvent:"video_info_end_pull",ThridPartResourceSyncStateEvent:"thirdpart_resource_sync_state",TrackSendEvent:"track_send_event",SpriteInfoEndPullEvent:"sprite_info_end_pull",PreviewInfoEndPullEvent:"preview_info_end_pull",SpaceMoveProgressEvent:"space_move_progress",SpaceMoveFinishEvent:"space_move_finish",SpaceCopyProgressEvent:"space_copy_progress",SpaceCopyFinishEvent:"space_copy_finish",ImageTranscodeInfoEndPull:"image_transcode_info_end_pull",EverCloudCancelImageTranscode:"ever_cloud_cancel_image_transcode",LogReportEvent:"log_report_event",UploadAnalyze:"import_material_upload_analyze"};class eG{get getTempId(){var e;return null===(e=this.noSignOptions)||void 0===e?void 0:e.uniqueId}get everUserId(){return this.webUserId}get cachePlugin(){return this.idbPlugin}get isGroupSdk(){return!!ez.space&&ez.space!==P}get spaceId(){var e;return null===(e=this.options)||void 0===e?void 0:e.space}get netconf(){var e;return null===(e=this.options)||void 0===e?void 0:e.netconf}setCachePlugin(e){this.idbPlugin=e}setTeaReporter(e){this.TeaReporter=e}setSlardarReporter(e){this.slardarReporter=e}setDependencies(e){this.dependencies=e}get hasSetOptions(){return!!this.options}get hasSetNoSignOptions(){return!!this.noSignOptions}async setOptions(e){var t;await this._setEverCloudOptions(e),this._defaultUploaderType=(null==e?void 0:null===(t=e.defaultUploaderConfig)||void 0===t?void 0:t.type)==="vod"?"vod":"normal"}setPermission(e){this.permission=e}setNoSignOptions(e){if(this.noSignOptions){ee("\u53C2\u6570\u91CD\u590D\u8BBE\u7F6E\uFF0C\u8BF7\u786E\u8BA4\u3002 init \u540E\u5C06\u4E0D\u4F1A\u88AB\u8986\u76D6");return}this.noSignOptions=e,ee(`\u{521D}\u{59CB}\u{5316}\u{53C2}\u{6570}\u{5DF2}\u{8BBE}\u{7F6E}\u{FF08}\u{672A}\u{767B}\u{5F55}\u{FF09}: ${JSON.stringify(e)}`)}getUploader(e,t){return this.dependencies.getUploader(e,t)}getSignUploader(e){return this.dependencies.getSignUploader(e)}emitUserSpaceSizeChange(){this.eventBus.emit(A.USER_SPACE_SIZE_CHANGE)}onUserSpaceSizeChange(e){return this.eventBus.on(A.USER_SPACE_SIZE_CHANGE,e)}get uid(){var e;return null===(e=this.options)||void 0===e?void 0:e.user_id}init(){if(this.destroyed)return Promise.reject(Error("SDK destroyed"));if(this.initLocker.hasBeenDone)return this.initLocker.awaitForInit();let e=this.options&&this.options.user_id;if(!e&&ee("\u672A\u8BBE\u7F6E\u5FC5\u8981\u53C2\u6570, \u7B49\u5F85\u53C2\u6570\u8BBE\u7F6E\u4E2D"),!this.initLocker.isIniting&&e){this.initLocker.startToInit(),this.loadLocker.startToInit();let{timeout:e}=this.options||{},{init:t=3e5}=e||{};setTimeout(()=>{!this.initLocker.hasBeenDone&&this.initLocker.initDone({reject:new ec})},t),this.initEverCloudSdk({initDoneCb:()=>{this.initLocker.initDone()},loadDoneCb:()=>{this.loadLocker.initDone()},syncDoneCb:e=>{if(!!e)this.initLocker.hasBeenDone||this.initLocker.initDone(),this.syncLocker.initDone()}})}return this.initLocker.awaitForInit()}async startSyncLoop(){!this.syncLocker.isIniting&&!this.syncLocker.hasBeenDone&&(this.syncLocker.startToInit(),await this.sdk.start_sync_loop())}async syncDone(){return await this.startSyncLoop(),await this.syncLocker.awaitForInit()}loadDone(){return this.loadLocker.awaitForInit()}async noSignInit(){let e=this.noSignOptions;return!e&&ee("\u672A\u8BBE\u7F6E\u5FC5\u8981\u53C2\u6570, \u7B49\u5F85\u53C2\u6570\u8BBE\u7F6E\u4E2D(noSing)"),new Promise(async(t,i)=>{if(this.syncNoSignInitDone&&t(),this.syncNoSignInitError&&i(Error("Cloud Sdk \u53D1\u751F\u975E\u9884\u671F\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762")),this.initNoSignQueue.push([t,i]),!this.syncNoSignIniting&&e){this.syncNoSignIniting=!0,this.syncNoSignInitDone=!0;let e=this.noSignOptions;if(!e)throw Error("impossible way");this.offlineVideoUploader=this.getUploader(e,"video"),this.offlineFileUploader=this.getUploader(e,"file"),this.initNoSignQueue.forEach(e=>{e[0]()}),this.initNoSignQueue=[]}})}async destroy(){return this.destroyed?(this.sdk=null,this.options=null,this.eventBus.emit(eH.BusDestroy),this.eventBus.removeAllListeners(),Promise.resolve()):(this.sdk=null,this.destroyed=!0,this.options=null,this.eventBus.emit(eH.BusDestroy),this.eventBus.removeAllListeners(),await this.tearDown())}async getFilesListByFloder(e){let t=(await this.getAsset(Object.assign({},{material:!0},e))).filter(e=>{var t;return!(null==e?void 0:null===(t=e.cluster_list)||void 0===t?void 0:t.length)}).map(e=>X(e,this)),i=await this.getPackages();return[...t,...i].sort((e,t)=>{var i,r;return(null!==(i=e.updatedAt)&&void 0!==i?i:0)-(null!==(r=t.updatedAt)&&void 0!==r?r:0)})}async getAsset(e){var t,i;let r=Object.assign({},e);return(null==r?void 0:null===(t=r.ids)||void 0===t?void 0:t.length)||(null==r?void 0:null===(i=r.md5s)||void 0===i?void 0:i.length)?await this.initLocker.awaitForInit():await this.syncDone(),await this.sdk.get_asset(r)}async getAssets(e){return(await this.getAsset(Object.assign({},{material:!0},e))).filter(e=>{var t;return!(null==e?void 0:null===(t=e.cluster_list)||void 0===t?void 0:t.length)}).map(e=>X(e,this))}async asset_preview(e){return new Promise(t=>{this.sdk.download_asset({md5:e,preview:"360p"},e=>{e.length<98304&&t(btoa(String.fromCharCode(...new Uint8Array(e))))})})}async uploadAsset(e){var t;return"vod"===((null===(t=e.uploaderConfig)||void 0===t?void 0:t.type)||this._defaultUploaderType)?this._uploadAssetByVod(e):this._uploadAssetByEverCloud(e)}reportUploadAnalyze(e){var t,i;let{uploaderType:r,action:n,duration:o,size:a,errorMsg:s,code:l,isInstantlyUpload:c,filename:d}=e,u=null!=s?s:e.action===eo.Error?"unkown error.":"";this.reportSdkEvent({type:"event",event_name:eH.UploadAnalyze,str_params:{uploader_type:null!=r?r:"",action:n,error_msg:null!=s?s:"",code:String(l),filename:d},int_params:{duration:null!=o?o:-1,size:a},float_params:{}}),null===(t=this.slardarReporter)||void 0===t||t.call(this,{type:"event",eventName:eH.UploadAnalyze,extra:{event_name:eH.UploadAnalyze,event_from:"ever_cloud_sdk",space_id:null!==(i=this.spaceId)&&void 0!==i?i:"unknown",uploader_type:r,is_instantly_upload:c?1:0,action:n,duration:null!=o?o:-1,size:a,error_msg:u,code:String(l),filename:d},content:""})}async streamClipUploadAsset(e){let{format:t,fileName:i,meta:r,permission:n,extra:o}=e,a=JSON.stringify(r),s=o||{};s.ve&&(s.ve=JSON.stringify(s.ve));let{request_id:l}=await this.sdk.stream_clip_upload_asset(t,i,a,n,s);return new eN({requestId:l},this)}async appendClipToUpload(e,t,i,r){return await this.sdk.append_clip_to_upload(e,t,i,r)}async uploadVid(e){return await this.sdk.upload_vid(e.vid,e.material,e.folder)}async syncVideoToEverCloud(e,t){var i;let{resouceType:r=1,fileSize:n,meta:o,imageAsyncResize:a=!0,folderId:s=ez.rootFolderId,invisible:l=!1,noTranscode:c=!1,noOccupy:d=!1}=t,u=new eb({id:e},this),p=(0,y.merge)(er(),o);return await this.sdk.sync_asset({resource:[{resource_id:e,resource_type:r||1,size:n,meta:JSON.stringify(p),region:null===this||void 0===this?void 0:null===(i=this.noSignOptions)||void 0===i?void 0:i.userRegion,image_async_resize:a,folder_id:s,invisible:l,no_transcode:c,no_occupy:d}]}),u}async getAssetsByMd5(e){var t;if(!e.length)return[];return null!==(t=(await this.getAsset({md5s:e})).map(e=>X(e,this)))&&void 0!==t?t:[]}async getAssetByMd5(e){let t=(await this.getAsset({md5s:[e]})||[])[0];if(!t)throw Error(`asset not found: md5=${e}`);return X(t,this)}async getAssetByFileId(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(await this.getAsset({ids:[e]}))[0];if(!i)throw Error(`asset not found: assetId=${e}`);if(t){let e=await this.getUnencryptedPlayInfo({id:i.id});i.unencryptedPlayInfo=e}return X(i,this)}async getAssetsByFileId(e){var t;if(!e.length)return[];return null!==(t=(await this.getAsset({ids:e})).map(e=>X(e,this)))&&void 0!==t?t:[]}async getFileDetailWithTranscode(e){var t,i,r,n;let o;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let a=await this.getVideoAssetTranscodeStatus(e),s=await a.done();if("success"!==s.status)throw Error(`transcode failure: ${JSON.stringify(s.errInfo)}`);o=e.md5?await this.getAssetByMd5(e.md5):await this.getAssetByFileId(e.id);let l=[],c=s.data;if(c){let e=(e,t)=>{if(c[e]){let{primary_url:i,url_key:r}=c[e];i&&r&&l.push({type:t,url:i,key:r})}};c.origin&&e("origin","origin"),e("p360","360p"),e("p480","480p"),e("p720","720p")}return new q({uid:o.author,type:o.type,duration:o.duration,fileName:o.name,size:o.size,assetInfo:o,spritInfo:o.sprit,videoInfo:l,audioInfo:{url:null==s?void 0:null===(i=s.data)||void 0===i?void 0:null===(t=i.audio)||void 0===t?void 0:t.primary_url,key:null===(n=s.data)||void 0===n?void 0:null===(r=n.audio)||void 0===r?void 0:r.url_key}})}async getFileDetailWithTranscodeNoSign(e,t){var i,r,n,o,a,s,l,c,d,u;let p=await this.getVideoAssetTranscodeStatusNoSign(e,t),_=await p.done();if("success"!==_.status)throw Error(JSON.stringify(_.errInfo));return new q({fileName:null===(r=_.data)||void 0===r?void 0:null===(i=r.video)||void 0===i?void 0:i.file_name,type:F.VIDEO,size:null===(o=_.data)||void 0===o?void 0:null===(n=o.video)||void 0===n?void 0:n.size,spritInfo:null===(a=_.data)||void 0===a?void 0:a.video.thumb,duration:(null!==(u=null===(s=_.data)||void 0===s?void 0:s.video.duration)&&void 0!==u?u:0)*1e3,videoInfo:null===(c=_.data)||void 0===c?void 0:null===(l=c.video.video_infos)||void 0===l?void 0:l.map(e=>{var t;return{type:null!==(t=e.definition)&&void 0!==t?t:e.defination,url:e.url,key:e.key}}).sort((e,t)=>{let i=["360p","480p","720p"];return i.indexOf(null==e?void 0:e.type)-i.indexOf(null==t?void 0:t.type)}),extInfo:{vid:null===(d=_.data)||void 0===d?void 0:d.video.source}})}async getVideoAssetTranscodeStatus(e){let t,i;e.md5?(t={id:e.md5,key:"md5"},i={md5s:[e.md5]}):(t={id:e.id,key:"asset_id"},i={ids:[e.id]});let r=new ey(t,this);return await this.sdk.get_asset_play_info(i),r}async getAssetsPlayInfo(e){return await this.sdk.get_asset_play_info(e)}async getVideoAssetTranscodeStatusNoSign(e,t){var i;return await this.noSignInit(),new ew({tmp_id:null===(i=this.noSignOptions)||void 0===i?void 0:i.uniqueId,task_id:e,is_support_webp:!0===t?1:0},this)}async getAssetSpirtInfo(e){let t,i;e.md5?(t={id:e.md5,key:"md5"},i={md5s:[e.md5]}):(t={id:e.id,key:"id"},i={ids:[e.id]});let r=new eC(t,this);return await this.sdk.get_asset_sprite_info(i),r}async getAssetPreviewInfo(e){let t,i;e.md5?(t={id:e.md5,key:"md5"},i={md5s:[e.md5]}):(t={id:e.id,key:"id"},i={ids:[e.id]});let r=new eS(t,this);return await this.sdk.get_asset_preview_info(i),r}async uploadAssetNoLogin(e){await this.noSignInit();let{file:t,fileName:i,onStart:r}=e,n=i||t.name,o=S({file:t}),a="video"===o||"audio"===o?this.offlineVideoUploader:this.offlineFileUploader;return await a.init(),new ev({file:t,fileName:n,fileType:o,uploader:a,onStart:r},this)}async cancelAllUploadAsset(){return await this.sdk.cancel_upload_all()}async cancelUploadAsset(e){return await this.sdk.cancel_upload(e)}async deleteAsset(e){let{ids:t=[],md5s:i=[]}=e,r=[];for(let e=0;20*e<t.length;e++)r.push(this.sdk.delete_asset({ids:t.slice(20*e,(e+1)*20)}));for(let e=0;20*e<i.length;e++)r.push(this.sdk.delete_asset({md5s:i.slice(20*e,(e+1)*20)}));await Promise.all(r)}async renameAsset(e){if(await this.isAssetNameDumplicate({fileName:e.fileName,filterMd5:e.md5}))throw new ea;return await this.sdk.rename_asset({md5:e.md5,file_name:e.fileName})}async downloadByUrlKey(e){if(!(null==e?void 0:e.url))throw Error("[EverSdk] downloadByUrlKey: url can not be empty");let t={...e,url:e.url||""},i=t.skipCache?void 0:await this.getFromCache(t.url),r=new eh({url:t.url},this);if(i&&i instanceof Uint8Array)r.thirdpartDone({buffer:i});else{let e=await this.sdk.download_url(t,e=>{r.appendChunk(e)});r.setRequestId(e.request_id),r.size=e.size}return r}async downloadAssetStream(e){let t=e.skipCache?void 0:await this.getFromCache(e.md5),i=new eh({},this);if(t&&t instanceof Uint8Array)i.thirdpartDone({buffer:t});else{let t=await this.sdk.download_asset(e,e=>{i.appendChunk(e)});i.setRequestId(t.request_id),i.size=t.size}return i}async downloadAssetUrl(e,t,i){var r;let{token:n}=await this.dependencies.apiFunc.getEverPhotoToken(null===(r=this.options)||void 0===r?void 0:r.space),{data:o,headers:a}=await f().get(e,{headers:{"x-everphoto-token":n},responseType:"blob"}),s=new Blob([o],{type:i||a["content-type"]}),l=(a["content-disposition"]||"").split("filename=")[1],c=document.createElement("a"),d=window.URL.createObjectURL(s);c.download=l||t||"",c.href=(0,m.C)(d,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),c.style.display="none",c.click()}async getDownloadUrl(e){var t,i,r,n;let o=null!==(i=null===(t=await this.sdk.get_asset_dynamic_download_url({ids:e.ids,max_time:e.maxTime,ttl:e.ttl}))||void 0===t?void 0:t.data)&&void 0!==i?i:{},a=[];for(let t=0;t<e.ids.length;t++){let i=e.ids[t],s=null!==(n=null==e?void 0:null===(r=e.names)||void 0===r?void 0:r[t])&&void 0!==n?n:"";o[i]?o[i].url=o[i].url+(s?`&target_name=${s}`:""):a.push(i)}return{urlMap:o,noDownloadLink:a}}async downloadAssetUrlV2(e){var t,i,r,n;let o=null!==(i=null===(t=await this.sdk.get_asset_dynamic_download_url({ids:e.ids,max_time:e.maxTime,ttl:e.ttl}))||void 0===t?void 0:t.data)&&void 0!==i?i:{},a=[];for(let t=0;t<e.ids.length;t++){let i=e.ids[t],s=null!==(n=null==e?void 0:null===(r=e.names)||void 0===r?void 0:r[t])&&void 0!==n?n:"";o[i]?"anchor"===e.downloadMode?!function(e){let t=document.createElement("a");t.download="",t.target="_blank",t.href=(0,m.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),t.style.display="none",t.click()}(o[i].url+(s?`&target_name=${s}`:"")):!function(e){let t=document.createElement("iframe");t.src=(0,m.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),t.style.display="none",document.body.appendChild(t)}(o[i].url+(s?`&target_name=${s}`:"")):a.push(i)}return a}async getPackages(){let e=(await this.sdk.get_package(null)).map(e=>new K(e)),t=[H.EDIT,H.SCRIPT,H.TEMPLATE,H.GRAPHIC];return e.filter(e=>e.isValid).filter(e=>t.includes(e.subType)).sort((e,t)=>{var i,r;return(null!==(i=t.updatedAt)&&void 0!==i?i:0)-(null!==(r=e.updatedAt)&&void 0!==r?r:0)})}async getPackageById(e){return this.getPackageByKey(e)}async getPackageByKey(e){let t=await this.sdk.get_package([e]);if(t.length)return new K(t[0]);throw Error(`\u{8349}\u{7A3F}key(${e})\u{4E0D}\u{5B58}\u{5728}`)}async savePackage(e){var t;let{draftId:i,draftMeta:r,assets:n,isForceReplace:o=!1,permission:a=null!==(t=this.permission)&&void 0!==t?t:G.PUBLIC,folderId:s,name:l,draftType:c=B.NORMAL}=e,d=e.prePkgId||null;return o&&(d=(await this.getPackageByKey(i)).id),await this.sdk.save_package({key:i,meta:JSON.stringify(r),package_assets:n.map(e=>({md5:e.md5,size:e.size,path:e.path,entry_ids:e.entryIds,meta:JSON.stringify(e.meta)})),base_package_id:d,permission:a,folder_id:s,draft_type:c,name:l})}async sharePackage(e){let{entryId:t,spaceId:i,draftMeta:r,packageId:n,folderId:o,name:a,packageKey:s,overwrite:l,permission:c}=e;await this.sdk.share_package({overwrite:l,permission:c,name:a,package_id:n,entry_id:t,meta:JSON.stringify(r),folder_id:o,package_key:s,to_space_id:i})}async deletePackageById(e){await this.sdk.delete_package(e)}async renamePackages(e){let{key:t,name:i}=e,r=await this.getPackageByKey(t),n=(0,y.merge)({},r.meta,{draft:{name:i,updateTime:new Date().valueOf()}});return new K((await this.sdk.rename_package({package_id:r.id,meta:JSON.stringify(n)})).package)}async updatePackageMeta(e){let{id:t,key:i,meta:r,autoMergeMeta:n=!1}=e,o=t,a=r;if(i)try{let e=await this.getPackageByKey(i);o=o||e.id,n&&(a=(0,y.merge)({},e.meta,a))}catch(e){if(n)throw Error("Not found local meta info, could not merge")}if(!o)throw Error("params id or key is required at least one.");return new K((await this.sdk.rename_package({package_id:o,meta:JSON.stringify(a)})).package)}async validateWebEditorSupportPkg(e){var t,i;let r=Object.assign({},{platform:["browser"]},e),n=await this.getPackageByKey(r.draftId);return!!n&&r.platform.includes(null!==(i=null===(t=n.meta)||void 0===t?void 0:t.uploadSource.platform)&&void 0!==i?i:"")}async forceSyncPullUpdates(){await this.sdk.sync_pull_updates({})}async getClusters(){let e=(await this.sdk.get_clusters({})).filter(e=>e.n_asset).map(e=>new J({cluster:e})),t=e.map(e=>e.lastAssetId),i=(await this.getAssetsByFileId(t)).reduce((e,t)=>(e[t.id]=t,e),{});return e.forEach(e=>e.updateLastAsset(i[e.lastAssetId])),e}async getClusterLastAsset(e){let t=await this.getAssetsFromCluster({clusterId:e.id,sortByRelation:!0})||[];return t[t.length-1]}async getClusterById(e){let t=(await this.sdk.get_clusters({cluster_ids:[e.clusterId]}))[0];if(!(t&&t.n_asset))throw Error("cluster invalid");let i=new J({cluster:t});if(e.needLastAsset){let e=await this.getClusterLastAsset(i);i.updateLastAsset(e)}return i}async createCluster(e){var t;return await this.sdk.create_cluster({...e,relation:JSON.stringify(null!==(t=e.relation)&&void 0!==t?t:[]),meta:JSON.stringify(e.meta)})}async delCluster(e){return await this.sdk.delete_cluster({cluster_id:e.id,delete_resource:e.deleteAsset})}async addAssetToCluster(e){let{clusterId:t,assetIds:i,relation:r}=e;if(!r){let e=await this.getClusterById({clusterId:t});if(!e)throw Error(`cluster id is not found: ${t}`);null==(r=e.relation)||r.push(...i)}return await this.sdk.add_cluster_resource({cluster_id:t,ids:i,relation:JSON.stringify(r)})}async delAssetFromCluster(e){let{clusterId:t,assetIds:i=[],relation:r,delAsset:n}=e;if(!r){let e=await this.getClusterById({clusterId:t});if(!e)throw Error(`cluster id is not found: ${t}`);r=null==(r=e.relation)?void 0:r.filter(e=>!i.includes(e))}await this.sdk.remove_cluster_resource({cluster_id:t,ids:i,relation:JSON.stringify(r)}),n&&await this.deleteByEntry(i)}async updateCluster(e){let{clusterId:t,meta:i,relation:r}=e;await this.sdk.update_cluster({cluster_id:t,meta:i?JSON.stringify(i):void 0,relation:r?JSON.stringify(r):void 0})}async getAssetsFromCluster(e){var t;let i=await this.sdk.get_asset_from_cluster({cluster_id:e.clusterId}),r=null!==(t=null==i?void 0:i.map(e=>X(e,this)))&&void 0!==t?t:[];if(e.sortByRelation){let t=await this.getClusterById({clusterId:e.clusterId});(null==t?void 0:t.relation)&&(r=this.sortArrayByRelation({exists:r,relation:t.relation||[],getter:e=>e.notOnlyId}))}return r}async createFolder(e){return new Q((await this.sdk.create_folder({name:e.name,parent_id:e.parentId,permission:e.permission,meta:JSON.stringify((0,y.merge)(er(),e.meta||{}))})).folder)}async deleteFolder(e){if(!!e&&!!e.length)return await this.sdk.delete_folder({ids:e})}async moveTo(e){let{ids:t,target:i}=e,r={ids:e.ids,parent_id:e.target};try{this.cacheCurrentFolders(e.target)}catch(e){}let n=!this.isGroupSdk;if(ez.isRootFolderId(i))return await this.sdk.move_to_folder(r);let o=await this.getFolderPaths({folderId:i}),a=o.length,s=o.pop();if(!s)throw Error("[EverSDK] moveTo: target folder not exist");let l=await this.getFolders(t);if((await Promise.all(l.map(e=>this.getFolderMaxDepth(e.id)))).some(e=>e.depth>ez.maxFolderDepth-a))throw new eu(ez.maxFolderDepth);if(n||s.permission===G.PUBLIC)return await this.sdk.move_to_folder(r);if([...await this.getEntryAssets(t),...l].some(e=>e.isPublic))throw new ed;return await this.sdk.move_to_folder(r)}async updateFolder(e){return await this.sdk.update_folder({...e,folderId:e.folderId,access_time:e.access?1:0})}async getFolders(e){if(!e||!(null==e?void 0:e.length))return[];if(e.some(e=>ez.isRootFolderId(e)))throw Error("[EverSDK] getFolders: can not get root folder info ");let t=await this.sdk.get_folders({ids:e});return((null==t?void 0:t.folders)||[]).map(e=>new Q(e))}async getFolder(e,t){if(ez.isRootFolderId(e))return;let i=(await this.getFolders([e]))[0];if(!i||void 0===t||!this.isGroupSdk)return i;let[r]=await this.getFolderPaths({folderId:e},t);return t===G.PERSONAL&&(null==r?void 0:r.author)===ez.everUserId||t===G.PUBLIC&&r.isPublic?i:null}async getFolderPaths(e,t){if(!e||!e.folderId)throw Error("[EverSDK] getFolderPaths: folder_id can not be empty");if(ez.isRootFolderId(e.folderId))throw Error("[EverSDK] getFolders: can not get root folder info ");let i=await this.sdk.get_folder_path({folder_id:e.folderId}),r=((null==i?void 0:i.path)||[]).map(e=>new Q(e));return r.length&&this.isGroupSdk&&void 0!==t&&(t!==G.PUBLIC||!r[0].isPublic)&&(t!==G.PERSONAL||r[0].author!==this.everUserId)?[]:r}async getAssetsByFolder(e,t){let{folderId:i,filter:r}=e,n=await this.sdk.get_folder_items({folder_id:i,filter:r||0}),o=(n.assets||[]).filter(e=>{var t;return!(null==e?void 0:null===(t=e.cluster_list)||void 0===t?void 0:t.length)}).map(e=>X(e,this)),a=(n.packages||[]).map(e=>new K(e)).filter(e=>e.isValid),s=a.filter(e=>e.subType===H.EDIT).sort((e,t)=>{var i,r;return(null!==(i=t.updatedAt)&&void 0!==i?i:0)-(null!==(r=e.updatedAt)&&void 0!==r?r:0)}),l=a.filter(e=>e.subType===H.SCRIPT).sort((e,t)=>{var i,r;return(null!==(i=t.updatedAt)&&void 0!==i?i:0)-(null!==(r=e.updatedAt)&&void 0!==r?r:0)}),c=[],d=(n.folders||[]).map(e=>new Q(e));if(!this.isGroupSdk||void 0===t)return{assets:o,packages:s,clusters:c,folders:d,scripts:l};if(ez.isRootFolderId(i))return{assets:o.filter(e=>et(t,e)),packages:s.filter(e=>et(t,e)),clusters:c.filter(e=>et(t,e)),folders:d.filter(e=>et(t,e)),scripts:l.filter(e=>et(t,e))};let u=await this.getFolderPaths({folderId:i},t);if(!u.length)return{};let p=u[0];return t===G.PERSONAL&&p.author===ez.everUserId||t===G.PUBLIC&&p.isPublic?{assets:o,packages:s,clusters:c,folders:d,scripts:l}:{}}async copyAsset(e){if(!e||!e.entryId)throw Error("[EverSDK] copyAsset: entry_id can not be empty");try{this.cacheCurrentFolders(e.parentId)}catch(e){}return X((await this.sdk.copy_asset({entry_id:e.entryId,name:e.name,parent_id:e.parentId})).asset,this)}async copyPackage(e){if(!e||!e.src_package_id)throw Error("[EverSDK] copyPackage: src_package_id can not be empty");let{owner:t,platform:i,appVersion:r,systemVersion:n}=er().uploadSource,o={owner:t,platform:i,appVersion:r,systemVersion:n,createTime:Date.now()};return new K((await this.sdk.copy_package({src_package_id:e.src_package_id,target_name:e.target_name,target_package_key:e.target_package_key,target_meta:JSON.stringify((0,y.merge)(er(),e.target_meta,{createSource:o,uploadSource:o}))})).package)}async copyAndRename(e){let{file:t,parent:i}=e,r=await ez.getAssetsByFolder({folderId:i,filter:0}),n=[...r.assets||[],...r.clusters||[],...r.folders||[],...r.packages||[],...r.scripts||[]].map(e=>e.name),o=this.dependencies.getFileCopyName(t.name,n);if(t.type===F.PACKAGE){let{meta:e}=t,i={...e,uploadSource:{...null==e?void 0:e.uploadSource,...er().uploadSource,platform:"browser"},createSource:{...null==e?void 0:e.createSource,...er().uploadSource,platform:"browser"},draft:{...null==e?void 0:e.draft,name:o}};return ez.copyPackage({src_package_id:t.id,target_name:o,target_package_key:crypto.randomUUID().toUpperCase(),target_meta:i})}return ez.copyAsset({entryId:t.id,parentId:i,name:o})}cacheCurrentFolders(e){if(ez.isRootFolderId(e))return;let t=[e,...this.getCacheCurrentFolderIds().filter(t=>t!==e)].slice(0,this.cacheFoldersNum);window.localStorage.setItem(this.getCacheFolderKey(),JSON.stringify(t))}getCacheCurrentFolderIds(){let e=[];try{let t=JSON.parse(window.localStorage.getItem(this.getCacheFolderKey())||"");Array.isArray(t)&&(e=t)}catch(e){}return e}async getCurrentFolders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=this.getCacheCurrentFolderIds(),i=await this.getFolders(t.filter(e=>!ez.isRootFolderId(e))),r=this.sortArrayByRelation({exists:i,relation:t,getter:e=>e.id}),n=r.map(e=>e.id);return window.localStorage.setItem(this.getCacheFolderKey(),JSON.stringify(n)),r.slice(0,e)}async updateEntry(e){if(!e||!e.id)throw Error("[EverSDK] updateEntry: entry_id can not be empty");let t={id:e.id};if(e.name&&(t.name=e.name),e.access&&(t.access_time=e.access),null!==e.permission&&void 0!==e.permission&&(t.permission=e.permission===G.PERSONAL?1:0),e.meta)try{t.meta=JSON.stringify(e.meta)}catch(e){}return await this.sdk.update_entry(t)}async getEntryAssets(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await this.sdk.get_entry_asset({ids:e,allow_cluster:!!t})||[]).map(e=>X(e,this))}async getEntryAsset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(await this.sdk.get_entry_asset({ids:[e],allow_cluster:!!t}))[0];if(!r)throw Error(`asset not found: entryId=${e}`);let n=X(r,this);if(i){let e=await this.getUnencryptedPlayInfo({id:n.notOnlyId});n._sourceData.unencryptedPlayInfo=e}return n}async deleteByEntry(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];for(let i=0;20*i<e.length;i++)t.push(this.sdk.delete_entry({ids:e.slice(20*i,(i+1)*20)}));return await Promise.all(t)}async getFolderMaxDepth(e){return await this.sdk.get_folder_max_depth({folder_id:e})}async resetSpaceStorage(e){let{quota:t,usage:i}=await this.dependencies.apiFunc.getEverPhotoUserSpace(e);return t-i}sortArrayByRelation(e){var t;let i=(null==e?void 0:e.getter)||(e=>e),r=e.exists.slice(),n=[];for(let o of null!==(t=e.relation)&&void 0!==t?t:[]){let e=r.findIndex(e=>i(e)===o);n.push(...r.splice(e,e<0?0:1))}return n.push(...r),n}async tearDown(){return this.sdk?this.sdk.tear_down():Promise.resolve()}async updatePermission(e){var t;let{permission:i=null!==(t=this.permission)&&void 0!==t?t:G.PUBLIC,assetIds:r=[],assetMd5s:n=[],packageIds:o=[]}=e;return await this.sdk.update_permission({permission:i,asset_ids:r,asset_md5s:n,package_ids:o})}async getUnencryptedPlayInfo(e){return await this.sdk.get_asset_unencrypted_play_info(e)}async moveFromSpace(e){var t,i,r;let n={from_space:e.fromSpace||"0",resource_id:e.resourceId,resource_type:e.resourceType,to_space:e.toSpace||(null===(t=this.options)||void 0===t?void 0:t.space)||"0",meta:JSON.stringify(e.meta)};return!(null===(i=this.options)||void 0===i?void 0:i.is_boe)&&(n.from_idc=e.fromIdc,n.to_idc=null!==(r=e.toIdc)&&void 0!==r?r:this.idc),new ek((await this.sdk.move_from_space(n)).process_id,this)}async copyFromSpace(e){var t,i,r;let n={from_space:e.fromSpace||"0",resource_id:e.resourceId,resource_type:e.resourceType,to_space:e.toSpace||(null===(t=this.options)||void 0===t?void 0:t.space)||"0",meta:JSON.stringify(e.meta),package_key:e.packageKey};return!(null===(i=this.options)||void 0===i?void 0:i.is_boe)&&(n.from_idc=e.fromIdc,n.to_idc=null!==(r=e.toIdc)&&void 0!==r?r:this.idc),new eE((await this.sdk.copy_from_space(n)).process_id,this)}async getImagesTranscodeStatus(e){let t=new eI(e,this);return await this.sdk.get_image_transcode_info({listeners:e.map(e=>({...e,transcode_type:M[e.resolution]}))}),t}async triggerImageResize(e){let{ids:t=[],md5s:i=[]}=e,r=[];for(let e=0;50*e<t.length;e++)r.push(this.sdk.trigger_image_resize({ids:t.slice(50*e,(e+1)*50)}));for(let e=0;50*e<i.length;e++)r.push(this.sdk.trigger_image_resize({md5s:i.slice(50*e,(e+1)*50)}));return await Promise.all(r)}async cancelImagesTranscodeStatus(e,t){await this.sdk.cancel_image_transcode_info_loop({listeners:e.map(e=>({...e,transcode_type:M[e.resolution]})),cancel_all:t}),this.eventBus.emit(eH.EverCloudCancelImageTranscode,{options:e,cancelAll:t})}async getImagePreviewInfo(e,t){let i=e.imageTranscodeInfo,r={},n=[];if((t||N).forEach(e=>{i[e]?r[e]=i[e]:n.push(e)}),!n.length)return r;let o=await this.getImagesTranscodeStatus(n.map(t=>({ids:[e.id],resolution:t})));if(!e.imageAsyncResize){let t=await this.triggerImageResize({ids:[e.id]});ee(`EverCloud triggerImageResize ${e.id} ${JSON.stringify(t)}`)}try{return await o.done(),(await this.getAssetByFileId(e.id)).imageTranscodeInfo}catch(e){return r}}async getImagesPreviewInfo(e){var t;let{resolutions:i,ids:r,md5s:n}=e,o=null==i?void 0:i.map(e=>({ids:r,md5s:n,resolution:e})),a=await this.getImagesTranscodeStatus(o),s=await this.triggerImageResize({ids:r,md5s:n});ee(`EverCloud triggerImageResize: 
 ids-[${r}] 
 md5s-[${n}]: 
${JSON.stringify(s)}`),await a.done();let l=null!==(t=(await this.getAsset({ids:r,md5s:n})).map(e=>X(e,this)))&&void 0!==t?t:[],c={};l.forEach(e=>{c[e.id]=e,c[e.md5]=e});let d={};return null==r||r.forEach(e=>{c[e]&&(d[e]=c[e].imageTranscodeInfo)}),null==n||n.forEach(e=>{c[e]&&(d[e]=c[e].imageTranscodeInfo)}),d}async throttlingGetUpdatesTrigger(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{throttle:2e3};if(this._getUpdatesTriggerLastTime)Date.now()-this._getUpdatesTriggerLastTime>e.throttle&&(this._getUpdatesTriggerLastTime=Date.now(),this.sdk.trigger_pull_updates());else{this._getUpdatesTriggerLastTime=Date.now(),this.sdk.trigger_pull_updates();return}}async initEverCloudSdk(e){var t,r,n,o;let a,s;if(this.sdk){ee("this has been init",{type:"warn"});return}let l=Date.now(),c=function(){try{let e="undefined"!=typeof __userInfoStringify?JSON.parse(__userInfoStringify):void 0;if(e&&"0"===e.ret)return e.data;return}catch(e){return}}();if((null==c?void 0:c.ever_photo.token)&&(null==c?void 0:c.ever_photo.web_user_id))a=c.ever_photo.token,s=c.ever_photo.web_user_id;else{let e=await this.dependencies.apiFunc.getEverPhotoToken(null===(o=this.options)||void 0===o?void 0:o.space);a=e.token,s=e.ever_photo_user.web_user_id}this.initEverCloudSdkReporter.addParams({getToken:Date.now()-l}),this.webUserId=s;let{EverCloudSdk:d}=await i.e("5357").then(i.bind(i,293958)),{timeout:u}=this.options||{},{init:p=3e5,..._}=u||{},g=new d({token:a,ep_uid:this.webUserId,source_from:this.dependencies.constant.sourceFrom,level:"error",...this.options,event_conf:{enable_asset_status_event:!1,enable_package_status_event:!1},common_params:{aid:this.dependencies.constant.aid},headers:{...null===(t=this.options)||void 0===t?void 0:t.headers},backup_conf:{max_count_of_concurrent_upload:5,chunk_size:5,...null===(r=this.options)||void 0===r?void 0:r.backup_conf},timeout:{general:30,upload:120,download:120,..._}},async()=>{var e;let t=await this.dependencies.apiFunc.getEverPhotoToken(null===(e=this.options)||void 0===e?void 0:e.space);return this.webUserId=t.ever_photo_user.web_user_id,{new_token:t.token,ep_uid:this.webUserId,third_party_uid:this.options.user_id}});this.sdk=g;try{await g.init()}catch(e){this.initLocker.initDone({reject:e})}!(null===(n=this.options)||void 0===n?void 0:n.disable_start_sync_loop)&&await this.startSyncLoop(),e.initDoneCb(),g.set_event_callback(t=>{let i=JSON.parse(t),r=i.type;if(ee(`this receive event: ${r} data: ${t}`),"sync_load_done"===r&&e.loadDoneCb(),"sync_init_done"===r){var n;e.syncDoneCb(0===i.code,t),this.initEverCloudSdkReporter.addParams({sdkInit:this.initLocker.costTimes,sdkSync:this.syncLocker.costTimes,total:Date.now()-l});let{reportData:r}=this.initEverCloudSdkReporter;null===(n=this.TeaReporter)||void 0===n||n.event(r.event,r.data)}r===eH.TrackSendEvent&&this.reportSdkEvent(i),r===eH.LogReportEvent&&this._reportSlardarLog(i),this.eventBus.emit(r,i)})}async isAssetNameDumplicate(e){let{fileName:t,filterMd5:i}=e;return Object.keys((await this.getFilesListByFloder({})).reduce((e,t)=>{if(t.type!==F.PACKAGE){var r;if(i&&t.md5===i)return e;e[null!==(r=t.name)&&void 0!==r?r:""]=!0}return e},{})).includes(t)}reportSdkEvent(e){if(this.TeaReporter){var t;let{event_name:i,str_params:r,int_params:n,float_params:o}=e;null===(t=this.TeaReporter)||void 0===t||t.event(i,Object.assign({},r,n,o))}}async getFromCache(e){if(e&&this.idbPlugin)return await this.idbPlugin.tryGetSource(e)}getCacheFolderKey(){var e;return`current_folder_${this.webUserId}_${(null===(e=this.options)||void 0===e?void 0:e.space)||""}`}_reportSlardarLog(e){var t,i;null===(t=this.slardarReporter)||void 0===t||t.call(this,{type:"log",content:e.content,level:e.level,extra:{event_name:eH.LogReportEvent,event_from:"ever_cloud_sdk",space_id:null!==(i=this.spaceId)&&void 0!==i?i:"unknown"}})}async _setEverCloudOptions(e){if(!this.hasSetOptions){var t;!e.netconf&&e.is_boe&&(Object.assign(e,{netconf:{base:"everphoto-boei18n.byteintl.net",media:"everphoto-boei18n.byteintl.net",is_https:!0}}),ee("\u5E94\u7528\u6D77\u5916\u7248\u672C sdk"));let i=this.dependencies.overwriteSDKInitOptions&&await this.dependencies.overwriteSDKInitOptions(e),r=i||e;r.netconf=Object.assign({is_https:!0},r.netconf),this.options=r,this.idc=null!==(t=x[e.dc_name])&&void 0!==t?t:e.dc_name}}async _uploadAssetByEverCloud(e){var t,i;let{file:r,fileName:n,permission:o=null!==(t=this.permission)&&void 0!==t?t:G.PUBLIC,folderId:a}=e,s=n||r.name;if(!(null==e?void 0:e.skipDuplicate)&&await this.isAssetNameDumplicate({fileName:s}))throw new ea;let l=(0,y.merge)(er(),null==e?void 0:e.meta),{fileType:c}=e;return!c&&(c=null!==(i=S({file:r}))&&void 0!==i?i:"file"),new em({requestId:(await this.sdk.upload_asset(r,c,s,JSON.stringify(l),o===G.PERSONAL?"personal":"",null==e?void 0:e.flags,a,e.isMultiDefTranscode,e.transcodeTemplateType)).request_id,fileType:c,autoPromote:!!e.autoPromote,workspaceId:e.workspaceId},this)}async _uploadAssetByVod(e){var t,i;let r;this.reportUploadAnalyze({action:eo.Start,size:-1,uploaderType:"vod",filename:e.file.name});let n=Date.now(),o=e.fileName||e.file.name;if(!(null==e?void 0:e.skipDuplicate)){let t;try{t=await this.isAssetNameDumplicate({fileName:o})}catch(i){let t=`[error]asset name dumplicate error: ${i.msg||i.message}`;throw(t=>{this.reportUploadAnalyze({action:eo.Error,size:e.file.size||-1,uploaderType:"vod",errorMsg:t.msg,filename:e.file.name})})({code:i.code,msg:t}),Error(i)}if(t)throw new ea}!this.vodUploader&&(this.vodUploader=this.getSignUploader({workspaceId:e.workspaceId,userId:null===(t=this.options)||void 0===t?void 0:t.user_id}));let a=(0,y.merge)(er(),null==e?void 0:e.meta),{fileType:s}=e;!s&&(s=null!==(i=S({file:e.file}))&&void 0!==i?i:"file");let l=Date.now()-n;this.reportUploadAnalyze({action:eo.Init,size:e.file.size||0,duration:l,uploaderType:"vod",filename:e.file.name});let c=!1,d=()=>{this._concurrencyLockForVod.release(),!c&&(c=!0,clearTimeout(r))};await this._concurrencyLockForVod.acquire();let u=e.uploaderConfig;return new eU({file:e.file,fileName:o,fileType:s,uploader:this.vodUploader,workspaceId:e.workspaceId,flags:e.flags,folderId:e.folderId,meta:a,isMultiDefTranscode:e.isMultiDefTranscode,autoPromote:e.autoPromote,transcodeTemplateType:e.transcodeTemplateType,permission:e.permission||this.permission||G.PUBLIC,noCopy:null==u?void 0:u.noCopy,startTime:n,onStart:e.onStart,onCancel:()=>{d()},onFinish:()=>{d()},onProgress:()=>{!c&&(clearTimeout(r),r=setTimeout(()=>{!c&&(this._concurrencyLockForVod.release(),c=!0)},15e3))}},this)}constructor(){this.eventBus=new g.Z,this._defaultUploaderType="normal",this.noSignOptions=null,this.options=null,this.initLocker=new eR,this.syncLocker=new eR,this.loadLocker=new eR,this._concurrencyLockForVod=new en(5),this.syncNoSignInitDone=!1,this.syncNoSignIniting=!1,this.syncNoSignInitError=!1,this.initNoSignQueue=[],this.cacheFoldersNum=10,this.initEverCloudSdkReporter=new ex}}(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof Query?Object:Query]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getFilesListByFloder",null),(0,h.gn)([function(e){let t=0,i=[],r=async()=>{if(i.length>0&&t<e){let e=i.shift();if(e){let{fn:i,resolve:n,reject:o}=e;t++;try{await i().then(n).catch(o)}finally{t--,r()}}else r()}};return function(n,o,a){let s=a.value;return a.value=async function(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];if(t>=e)return new Promise((e,t)=>{i.push({fn:()=>s.apply(this,o),resolve:e,reject:t})});t++;try{return await s.apply(this,o)}finally{t--,r()}},a}}(10),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAsset",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof Query?Object:Query]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssets",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"asset_preview",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof StreamUploadParams?Object:StreamUploadParams]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"streamClipUploadAsset",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String,Number,"undefined"==typeof File?Object:File,Boolean]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"appendClipToUpload",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"uploadVid",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String,Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"syncVideoToEverCloud",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Array]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetsByMd5",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetByMd5",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String,void 0]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetByFileId",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof Array?Object:Array]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetsByFileId",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object,void 0]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getFileDetailWithTranscode",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getVideoAssetTranscodeStatus",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetsPlayInfo",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetSpirtInfo",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetPreviewInfo",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"cancelAllUploadAsset",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"cancelUploadAsset",null),(0,h.gn)([eP(),eA(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"deleteAsset",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"renameAsset",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"downloadByUrlKey",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof DonwloadAssetParams?Object:DonwloadAssetParams]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"downloadAssetStream",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String,String,String]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"downloadAssetUrl",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof IBrowserDownload?Object:IBrowserDownload]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getDownloadUrl",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"downloadAssetUrlV2",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getPackages",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getPackageByKey",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"savePackage",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"sharePackage",null),(0,h.gn)([eP(),eA(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"deletePackageById",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"renamePackages",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"updatePackageMeta",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"forceSyncPullUpdates",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getClusters",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[J]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getClusterLastAsset",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getClusterById",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"createCluster",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"delCluster",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"addAssetToCluster",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"delAssetFromCluster",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"updateCluster",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetsFromCluster",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"createFolder",null),(0,h.gn)([eT(),eA(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Array]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"deleteFolder",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"moveTo",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"updateFolder",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Array]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getFolders",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object,void 0===G?Object:G]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getFolderPaths",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object,void 0===G?Object:G]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getAssetsByFolder",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"copyAsset",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"copyPackage",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"updateEntry",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Array,void 0]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getEntryAssets",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String,void 0,void 0]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getEntryAsset",null),(0,h.gn)([eT(),eA(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Array]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"deleteByEntry",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getFolderMaxDepth",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"updatePermission",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getUnencryptedPlayInfo",null),(0,h.gn)([eP(),eA(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof IMoveFromSpaceOption?Object:IMoveFromSpaceOption]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"moveFromSpace",null),(0,h.gn)([eP(),eA(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof IMoveFromSpaceOption?Object:IMoveFromSpaceOption]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"copyFromSpace",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Array]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getImagesTranscodeStatus",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"triggerImageResize",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Array,Boolean]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"cancelImagesTranscodeStatus",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Z,Array]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getImagePreviewInfo",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"getImagesPreviewInfo",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"throttlingGetUpdatesTrigger",null),(0,h.gn)([eT(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[Object]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"isAssetNameDumplicate",null),(0,h.gn)([eP(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",["undefined"==typeof UploadParams?Object:UploadParams]),(0,h.w6)("design:returntype",Promise)],eG.prototype,"_uploadAssetByEverCloud",null);class eW{static get sdk(){let e=eW._getSdkKey(eW.options),t=eW.sdkList.get(e);if(t)return t.sdk;eW.initNoSignSdk();let i=eW.sdkList.get(eW._getSdkKey());return null==i?void 0:i.sdk}static get supportImageResolutions(){return N}static async prefetchWasmCode(){let{evpt_sdk_init_wasm_module:e}=await i.e("5357").then(i.bind(i,293958));await e()}static async getSdkInstance(e){var t,i,r,n;let{autoDestroy:o=!1,dcName:a,netconf:s,userId:l}=e,{spaceId:c}=e;!c&&(c="0");let d=`${(null===(t=eW.options)||void 0===t?void 0:t.user_id)||""}-${c}`,u=new ex;u.addProcessParams({method:"getSdkInstance",process:"wait-set-options",key:d}),ee(`EverCloud: getSdkInstance ${d} start wait setOptions`),null===(i=this.TeaReporter)||void 0===i||i.event(u.progressEvent,u.process),ee(`EverCloud: getSdkInstance ${d} end wait setOptions`),await eW.init({spaceId:c,dcName:a,netconf:s,autoDestroy:o,initProcessReporter:u,userId:l});let p=eW.sdkList.get(d);if(p)return p.referenceCount+=1,ee(`EverCloud: Reference instance [${d}], reference-${p.referenceCount}`),u.addProcessParams({process:"init-success"}),null===(n=this.TeaReporter)||void 0===n||n.event(u.progressEvent,u.process),p.autoDestroy=o,p.sdk;throw u.addProcessParams({process:"init-error",error:`EverCloud sdk init edn bug sdk=${d} not found in cache`}),null===(r=this.TeaReporter)||void 0===r||r.event(u.progressEvent,u.process),Error("EverCloud: sdk init failed")}static setNoSignOptions(e){eW.noSignOptions=e,eW.sdkList.forEach(t=>{t.sdk.setNoSignOptions(e)})}static async noSignInit(){await eW.initNoSignSdk()}static async initNoSignSdk(){if(!eW.sdkList.get(eW._getSdkKey())){let e=new eG;if(eW.dependencies)e.setDependencies(eW.dependencies);else throw Error("please call setDependencies before init.");e.setNoSignOptions(eW.noSignOptions),eW.sdkList.set(eW._getSdkKey(),{referenceCount:0,sdk:e,updateTime:Date.now(),createTime:Date.now(),autoDestroy:!0}),await e.noSignInit()}}static async changeSpace(e){eW.space=e.spaceId||"0";let t=await eW.init(e);return eW._emitSpaceChange(),t}static setTeaReporter(e){eW.TeaReporter=e,eW.sdkList.forEach(t=>{let{sdk:i}=t;i.setTeaReporter(e)})}static setSlardarReporter(e){eW.slardarReporter=e,eW.sdkList.forEach(t=>{let{sdk:i}=t;i.setSlardarReporter(e)})}static setOptions(e,t){(!eW.options||t)&&(eW.options=e,eW._initLocker.startToInit(),eW._initLocker.initDone())}static async init(e){var t,i,r,n,o;let{spaceId:a,autoDestroy:s=!0,dcName:l,netconf:c,initProcessReporter:d,userId:u}=e||{},{idbPlugin:p,options:_,sdkList:g,space:h}=eW,m=a||h||_.space||"0",v=eW._getSdkKey(_,m),f=d||new ex;f.addProcessParams({method:f.reportProcess.data.method||"init",key:f.reportProcess.data.key||v,process:"wait-init"}),null===(t=this.TeaReporter)||void 0===t||t.event(f.progressEvent,f.process);let y=g.get(v);if(y){f.addProcessParams({process:"sdk-init-existed"}),null===(r=this.TeaReporter)||void 0===r||r.event(f.progressEvent,f.process);let{sdk:e}=y;return p&&e.setCachePlugin(p),y.updateTime=Date.now(),null===(n=eW.awaitInitQueue.get(v))||void 0===n||n.forEach(e=>{let{resolve:t}=e;return t(y.sdk)}),eW.awaitInitQueue.delete(v),eW._destroySdk(),e.init()}let w=eW.awaitInitQueue.get(v);if(w&&w.length)return f.addProcessParams({process:"sdk-init-doing"}),null===(o=this.TeaReporter)||void 0===o||o.event(f.progressEvent,f.process),new Promise((e,t)=>{w.push({resolve:e,reject:t})});f.addProcessParams({process:"sdk-init-new"}),null===(i=this.TeaReporter)||void 0===i||i.event(f.progressEvent,f.process);let b=new eG;if(p&&b.setCachePlugin(p),eW.dependencies)b.setDependencies(eW.dependencies);else throw Error("please call setDependencies before init.");return b.setNoSignOptions(eW.noSignOptions),b.setTeaReporter(eW.TeaReporter),eW.slardarReporter&&b.setSlardarReporter(eW.slardarReporter),new Promise(async(e,t)=>{var i,r,n,o,a,d;eW.awaitInitQueue.set(v,[{resolve:e,reject:t}]);try{let e={..._,space:m,netconf:null!=c?c:null==_?void 0:_.netconf,dc_name:null!=l?l:_.dc_name};u&&(e.user_id=u),await b.setOptions(e);let t=eW._getSdkKey(_,m),n=await b.init();return f.addProcessParams({process:"sdk-init-done"}),null===(i=this.TeaReporter)||void 0===i||i.event(f.progressEvent,f.process),g.set(t,{referenceCount:0,sdk:b,updateTime:Date.now(),createTime:Date.now(),autoDestroy:s}),null===(r=eW.awaitInitQueue.get(v))||void 0===r||r.forEach(e=>{let{resolve:t}=e;return t(n)}),eW.awaitInitQueue.delete(v),eW._destroySdk(),n}catch(e){f.addProcessParams({process:"init-error",error:null==e?void 0:null===(n=e.toString)||void 0===n?void 0:n.call(e)}),null===(o=this.TeaReporter)||void 0===o||o.event(f.progressEvent,f.process),ee(`EverCloud: getSdkInstance ${v} \u{521D}\u{59CB}\u{5316}\u{5931}\u{8D25}: ${null==e?void 0:null===(a=e.toString)||void 0===a?void 0:a.call(e)}`),null===(d=eW.awaitInitQueue.get(v))||void 0===d||d.forEach(t=>{let{reject:i}=t;return i(e)}),eW.awaitInitQueue.delete(v)}})}static setCachePlugin(e){eW.idbPlugin=e}static onSpaceChange(e){return eW.eventBus.on(eW.EVENTS.SPACE_CHANGE,e)}static setDependencies(e){eW.dependencies=e,eW.sdkList.forEach(t=>{let{sdk:i}=t;i.setDependencies(e)})}static get rootFolderId(){return""}static isRootFolderId(e){return!e||-1===Number(e)}static async destroySdk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=eW._getSdkKey(eW.options,e),i=eW.sdkList.get(t);if(!!(null==i?void 0:i.sdk)&&"-"!==t){if(i.referenceCount-=1,i.sdk===eW.sdk){ee(`Can not destroy instance [${t}], because it is being used as default sdk. reference-${i.referenceCount}`);return}i.referenceCount<=0?(eW.sdkList.delete(t),await i.sdk.destroy(),ee(`Destroy instance [${t}]`)):ee(`Can not destroy instance [${t}], because it is being used. reference-${i.referenceCount}`)}}static _emitSpaceChange(){eW.eventBus.emit(eW.EVENTS.SPACE_CHANGE)}static _getSdkKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eW.space;return`${(null==e?void 0:e.user_id)||""}-${t||(null==e?void 0:e.space)||"0"}`}static _destroySdk(){eW.timer&&clearTimeout(eW.timer);let e=eW.sdkList,t=null,i="";if(e.forEach((r,n)=>{let{sdk:o,updateTime:a,autoDestroy:s,referenceCount:l}=r;if(o!==eW.sdk&&"-"!==n&&!!s)a<Date.now()-eW.duration&&l<=0&&(e.delete(n),o.destroy(),ee(`AutoDestroy overdue instance [${n}]`)),l>0&&ee(`Can not auto destroy overdue instance [${n}], because it is being used. reference-${l}`),(!t||t.updateTime>a)&&(t=r,i=n)}),t&&e.size>eW.maxSize){let{sdk:r,autoDestroy:n,referenceCount:o}=t;n&&o<=0&&(e.delete(i),r.destroy(),ee(`AutoDestroy excess instance [${i}]`))}eW.timer=setTimeout(()=>{eW._destroySdk()},eW.duration)}}eW.eventBus=new g.Z,eW.EVENTS={SPACE_CHANGE:"space_change"},eW.sdkList=new Map,eW.maxFolderDepth=10,eW.space="",eW.TeaReporter=null,eW.slardarReporter=null,eW.duration=6e4,eW.maxSize=3,eW.timer=setTimeout(()=>{eW._destroySdk()},eW.duration),eW.dependencies=void 0,eW._initLocker=new eR,eW.awaitInitQueue=new Map;var eV=i("973115");class eZ{async tryGetSource(e){return await (0,eV.U2)(e,this._store)}async saveSourceBlob(e){let{key:t,buffer:i}=e;return await (0,eV.t8)(t,i,this._store)}async delSource(e){return await (0,eV.IV)(e,this._store)}constructor(){this._store=(0,eV.MT)("lv-ever-cloud","lv-ever-cloud-url")}}let ez=new Proxy({},{get:(e,t)=>{switch(t){case"setOptions":case"options":case"space":case"init":case"setCachePlugin":case"onSpaceChange":case"changeSpace":case"setTeaReporter":case"setSlardarReporter":case"isRootFolderId":case"rootFolderId":case"maxFolderDepth":case"setDependencies":case"destroySdk":case"getSdkInstance":case"setNoSignOptions":case"noSignInit":case"initNoSignSdk":case"prefetchWasmCode":case"TeaReporter":case"slardarReporter":case"sdkList":case"supportImageResolutions":case"$$typeof":return eW[t];default:let i=eW.sdk;if(!i){console.warn(`EverCloud:EverCloudBaseCore.${String(t)} ever-sdk \u{672A}\u{521D}\u{59CB}\u{5316}`);return}if("function"==typeof i[t])return i[t].bind(i);return i[t]}}})},139305:function(e,t,i){"use strict";i.d(t,{b_:()=>S,lJ:()=>f,F5:()=>m,xP:()=>g,AF:()=>E,vA:()=>v,Ms:()=>I,iJ:()=>k,UI:()=>h,hY:()=>C,fb:()=>y});var r,n,o,a,s,l,c,d,u,p,_,g=((r={}).SalesSticker="sales-sticker",r.SvgSticker="svg-sticker",r.CNFont="cn-fonts",r.CNSalesTextTemplate="cn-sales-text-template",r.CNSalesSticker="cn-sales-sticker",r.SalesFont="fonts",r.SalesTextTemplate="sales-text-template",r.SalesTextGlow="sales-text-glow",r.SalesTextPreset="sales-text-preset",r.Svg="svg",r.Fonts="fonts",r.EverCloud="ever-cloud",r.EverCloudSvg="ever-cloud-svg",r.ImageXSvg="image-x-svg",r.ImageInTemplate="image-in-template",r.SalesFrame="sales-frame",r.SalesGrid="sales-grid",r.SalesFilter="sales-filter",r.SalesImageEffect="sales-image-effect",r.Default="default",r.YkImage="yk-image",r.AIBackground="ai_background",r.EffectModel="effect_model",r.SalesFontsCombination="sales_fonts_combination",r.BrandFont="brand_font",r.BrandBackground="brand_background",r.BrandImage="brand_image",r.BrandSticker="brand_sticker",r.SalesRetouchFace="sales-beauty-face",r.SalesRetouchReshape="sales-beauty-reshape",r.SalesRetouchBody="sales-beauty-body",r.SalesRetouchMakeup="sales-beauty-makeup",r.EcomAIBackground="ecom-ai_background",r.DreminaImage="dreamina_image",r);var h=((n={})[n.Loki=0]="Loki",n[n.HeyPan=1]="HeyPan",n[n.TuChong=2]="TuChong",n[n.UserBrand=3]="UserBrand",n);var m=((o={}).PAGE="PAGE",o.GROUP_LAYER="GROUP_LAYER",o.TEXT="TEXT",o.IMAGE="IMAGE",o.LINE="LINE",o.SHAPE="SHAPE",o.IMAGE_CONTAINER="IMAGE_CONTAINER",o.GRID="GRID",o.SVG_IMAGE="SVG_IMAGE",o.PAINT="PAINT",o);var v=((a={}).LIGHT_SENSATION="lightSensation",a.BRIGHTNESS="brightness",a.CONTRAST="contrast",a.BRILLIANCE="brilliance",a.SATURATION="saturation",a.OLITEXTURE="oilTexture",a.SHARP="sharp",a.STRUCTURE="structure",a.HIGHLIGHT="highlight",a.SHADOW="shadow",a.TEMPERATURE="temperature",a.TONE="tone",a.GRAIN="grain",a.FADE="fade",a.EXPOSURE="exposure",a.VIBRANCE="vibrance",a.SHADOW_NEGATIVE="shadow_negative",a);var f=((s={}).Sticker="sticker",s.YkSicker="yk_sticker",s.CloudImageSticker="everphoto",s.ReplaceableCutout="replaceable_cutout",s.Cutout="cutout",s.Graffiti="graffiti",s.Svg="svg",s.YkImage="yk_image",s.Raw="raw",s.BrandImage="brand_image",s.BrandSticker="brand_sticker",s.EverCloudSvg="ever_cloud_svg",s.ImageXSvg="image_x_svg",s.AiGenerateImage="ai_generate_image",s.TemplateImage="template_image",s);var y=((l={}).PX="px",l.CM="cm",l);let w=96/2.54;(60/(96/2.54)).toFixed(3),(5e3/w).toFixed(3);var b=((c={}).PAGE="PAGE",c.KONVA_LAYER="KONVA_LAYER",c.KONVA_STAGE="KONVA_STAGE",c.PAGE_CONTAINER="PAGE_CONTAINER",c.RULER_LINE="RulerLine",c.EMPTY_PAGE="EMPTY_PAGE",c);({...m,...b});var S=((d={}).Default="web_domain",d);var C=((u={}).Dark="dark",u.Light="light",u);var k=((p={})[p.HeyCan=1]="HeyCan",p[p.TuChong=5]="TuChong",p);let E=348188;var I=((_={})[_.EffectTypeWordArt=1]="EffectTypeWordArt",_[_.EffectTypeSticker=2]="EffectTypeSticker",_[_.EffectTypeAudioEffect=3]="EffectTypeAudioEffect",_[_.EffectTypeSong=4]="EffectTypeSong",_[_.EffectTypeVideo=5]="EffectTypeVideo",_[_.EffectTypeTextTemplate=6]="EffectTypeTextTemplate",_[_.EffectTypeSpecialEffect=7]="EffectTypeSpecialEffect",_[_.EffectTypeFaceTool=8]="EffectTypeFaceTool",_[_.EffectTypeImage=9]="EffectTypeImage",_[_.EffectTypeFont=10]="EffectTypeFont",_[_.EffectTypeTimbre=11]="EffectTypeTimbre",_[_.EffectTypeFilter=12]="EffectTypeFilter",_[_.EffectTypeVideoAnimation=13]="EffectTypeVideoAnimation",_[_.EffectTypeColor=14]="EffectTypeColor",_[_.EffectTypeTextAnimation=18]="EffectTypeTextAnimation",_[_.EffectTypeTransitions=19]="EffectTypeTransitions",_[_.EffectTypeRecipe=50]="EffectTypeRecipe",_[_.EffectTypeWordArtCollection=101]="EffectTypeWordArtCollection",_[_.EffectTypeStickerCollection=102]="EffectTypeStickerCollection",_[_.EffectTypeAudioEffectCollection=103]="EffectTypeAudioEffectCollection",_[_.EffectTypeVideoEffectCollection=104]="EffectTypeVideoEffectCollection",_[_.EffectTypeEmoticonCollection=105]="EffectTypeEmoticonCollection",_[_.EffectTypeTextTemplateCollection=106]="EffectTypeTextTemplateCollection",_[_.EffectTypeImageCollection=109]="EffectTypeImageCollection",_[_.EffectTypeFilterCollection=112]="EffectTypeFilterCollection",_[_.EffectTypeVideoImage=201]="EffectTypeVideoImage",_);y.PX},940105:function(e,t,i){"use strict";i.d(t,{Q:()=>m});let r=/^([a-z])(.*)/;class n{constructor(e,t){this.skipWhiteSpace=e=>{let t=e;for(;t<this.raw.length&&" "===this.raw[t];)t++;return t},this.raw=e,this.index=t}}class o extends n{constructor(...e){super(...e),this.content="",this.isWrap=!1,this.parse=()=>{"["===this.raw[this.index]&&(this.isWrap=!0,this.index++);let e=this.index,{raw:t}=this;for(;e<t.length;){let i=t[e];if("<"!==i||this.isWrap){if("]"===i&&this.isWrap){if("]"===t[++e])this.content+="]";else{this.isWrap=!1;continue}}else this.content+=i}else break;e++}return this.index=e,this.index}}}class a{constructor(){this.name="",this.attributes=[],this.children=[]}}class s extends n{constructor(...e){super(...e),this.element=new a,this.parseName=()=>{let e="",t=this.index;for(;/[a-zA-Z0-9_\-\.\:]/.test(this.raw[t]);)t++;return e+=this.raw.slice(this.index,t),this.index=t,e},this.parseAttribute=()=>{let e=[],t=this.index,i=this.raw.length;for(;t<i;){let r={label:"",value:""};if((t=this.skipWhiteSpace(t))>=i||">"===this.raw[t])break;let n=t;for(;n<i&&/[a-zA-Z0-9_\-\.\:]/.test(this.raw[n]);)n++;if(r.label=this.raw.slice(t,n),t=n,(t=this.skipWhiteSpace(t))>=i)break;if(">"===this.raw[t]){t++;break}"="===this.raw[t]&&t++;let o="("===this.raw[t],a='"'===this.raw[t];for((a||o)&&t++,n=t;n<i;){let e=this.raw[n];if(o&&")"===e||a&&'"'===e){r.value=this.raw.slice(t,n),t=n+1;break}if(!a&&!o&&(" "===e||">"===e)){r.value=this.raw.slice(t,n),t=n+(">"===e?0:1);break}n++}e.push(r)}return this.index=t,e},this.parseEndTag=()=>{let e="invalid tag";if("</"===this.raw.substring(this.index,this.index+2))this.index+=2;else throw Error(e);if(this.parseName()!==this.element.name)throw Error(`tag doesnt match! current name: ${this.element.name}`);if(this.index=this.skipWhiteSpace(this.index),">"===this.raw[this.index]){this.index++;return}throw Error(e)},this.parseStartTag=()=>{if(this.index++,this.element.name=this.parseName(),this.index=this.skipWhiteSpace(this.index),this.index>=this.raw.length)return;if(this.element.attributes=this.parseAttribute(),this.index=this.skipWhiteSpace(this.index),!(this.index>=this.raw.length)){if("/>"===this.raw.substring(this.index,this.index+2)){this.index+=2;return}if(">"===this.raw[this.index]){this.index++;return}throw Error("invalid tag")}},this.parseChildren=()=>{for(;this.index<this.raw.length;){if("<"===this.raw[this.index]){if("/"===this.raw[this.index+1])break;let e=new s(this.raw,this.index);e.parse(),this.index=e.index,this.element.children.push(e.element)}if("<"!==this.raw[this.index]){let e=new o(this.raw,this.index);this.index=e.parse(),this.element.children.push(e.content)}}},this.parse=()=>(this.parseStartTag(),this.parseChildren(),this.parseEndTag(),this.index)}}class l{constructor(){this.children=[]}}class c extends n{parse(){let e=this.index;for(;e<this.raw.length;){let t=this.raw[e];if("<"===t){let t=new s(this.raw,e);t.parse(),e=t.index,this.element.children.push(t.element)}else if("["===t){let t=new o(this.raw,e);e=t.parse(),this.element.children.push(t.content)}}return this.index=e,this.index}constructor(...e){super(...e),this.element=new l}}let d=e=>e*Math.PI/180,u=e=>{var t;let i=[0,0,0,1],r=0;for(;r<3;){let t=Number(null==e?void 0:e[r]);!Number.isNaN(t)&&(i[r]=t/255),r++}return i[r]=null!==(t=null==e?void 0:e[r])&&void 0!==t?t:1,i},p=(e,t)=>{let{normalize:i=!1,seperateAlpha:r=!0}=null!=t?t:{},[n,o,a,s]=[...null!=e?e:[]];i&&([n,o,a,s]=u([...null!=e?e:[]]));let l=null!=s?s:1;return{alpha:r?l:1,content:{solid:{color:[n,o,a],alpha:r?1:l},render_type:"solid"}}},_=e=>{let{shadowOffset:t="0.1,-0.1",shadowAngle:i=-35}=e,[r,n]=t.split(",").map(e=>Number(e)),o=d(i),a=Math.cos(o),s=Math.sin(o);return a?r/a:Math.abs(n)/s},g=(e,t)=>p(e.split(",").map(e=>Number(e),t)),h=e=>{if(!e.shadowColor||!1===e.shadowEnable)return;let t={enable:!0,distance:100*_(e),angle:void 0===e.shadowAngle?-35:Number(e.shadowAngle),...g(e.shadowColor)};return void 0!==e.shadowDiffuse?t.diffuse=Number(e.shadowDiffuse):t.feather=void 0===e.shadowSmooth?0:Number(e.shadowSmooth),[t]};class m{static xmlToJson(e){let t=[];if(!e)return{text:"",styles:[]};let i=new c(`<root>${e}</root>`,0);try{i.parse()}catch{return{text:e,styles:[]}}let n=(e,i)=>{e.forEach(e=>{if("string"==typeof e){t.push({text:e,...i});return}let o=e.attributes.reduce((t,i)=>(t[`${e.name}${i.label.replace(r,(e,t,i)=>`${t.toUpperCase()}${i}`)}`]=i.value,t),{});!e.attributes.length&&"root"!==e.name&&(o[e.name]=!0),n(e.children,{...i,...o})})};n(i.element.children,{});let o="",a=[];return t.forEach(e=>{var t,i,r;let n=o.length,s=e.text.length;a.push({version:"3.0",select:e.select,range:[n,n+s],font:{id:null!==(t=e.fontId)&&void 0!==t?t:"",path:null!==(i=e.fontPath)&&void 0!==i?i:""},size:Number(e.size),bold:e.b,italic:e.i,underline:e.u,fill:e.color?g(e.color,{seperateAlpha:!1}):p([1,1,1,1],{seperateAlpha:!1}),useLetterColor:e.useLetterColor,effectStyle:e.effectStyleId?{id:e.effectStyleId,path:null!==(r=e.effectStylePath)&&void 0!==r?r:""}:void 0,strokes:e.outlineColor&&!1!==e.outlineEnable?[{enable:!0,...g(e.outlineColor),width:void 0===e.outlineWidth?.048:Number(e.outlineWidth)}]:void 0,shadows:h(e)}),o+=e.text}),{text:o,styles:a}}}},352269:function(e,t,i){"use strict";i.d(t,{Sz:function(){return s},VL:function(){return p},Wk:function(){return l},Xn:function(){return m},bK:function(){return h},dQ:function(){return g},m7:function(){return _},sM:function(){return c},sU:function(){return u},un:function(){return o},wl:function(){return d},wo:function(){return n}});let r="video/webm",n=36e5,o=3e3,a=[`${r};codecs="vp9,opus"`,`${r};codecs:vp9,opus`,`${r};codecs:vp8,opus`,`${r};codecs="h264,opus"`];function s(){let e=a.find(e=>MediaRecorder.isTypeSupported(e));if(!e)throw Error("mimeType unsupported");return{mimeType:e,videoBitsPerSecond:4e6}}let l={mimeType:"audio/webm;codecs=opus"},c={small:{width:1280,height:720},medium:{width:1920,height:1080},large:{width:2560,height:1440}},d={small:{width:720,height:720},medium:{width:1080,height:1080},large:{width:1440,height:1440}},u={width:326,height:372},p=1e3,_=100,g=3e3,h={MIN:-60.1,MAX:20},m="HAS_SHOW_RECORD_ENTRY_BADGE"},148347:function(e,t,i){"use strict";i.d(t,{Vc:function(){return l},rf:function(){return a},t9:function(){return s}});var r,n,o,a=((r={})[r.INIT=0]="INIT",r[r.PREPARED=1]="PREPARED",r[r.PRE_RECORDING=2]="PRE_RECORDING",r[r.RECORDING=3]="RECORDING",r[r.PAUSED=4]="PAUSED",r[r.FINISHED=5]="FINISHED",r[r.PREVIEWING=6]="PREVIEWING",r[r.SAVED=7]="SAVED",r[r.ERROR=8]="ERROR",r);var s=((n={})[n.SCREEN=0]="SCREEN",n[n.TAB=1]="TAB",n[n.CAMERA=2]="CAMERA",n[n.AUDIO=3]="AUDIO",n);var l=((o={})[o.SCREEN_VIDEO=0]="SCREEN_VIDEO",o[o.CAMERA_VIDEO=1]="CAMERA_VIDEO",o[o.MIC_AUDIO=2]="MIC_AUDIO",o[o.COMBINATION=3]="COMBINATION",o)},200247:function(e,t,i){"use strict";i.d(t,{D:function(){return r}});let r=(0,i(335290).yh)("account")},966697:function(e,t,i){"use strict";i.d(t,{Gw:function(){return c},b_:function(){return s},d:function(){return l}});var r,n,o=i(335290),a=i(200247);var s=((r={}).Default="web_domain",r);var l=((n={}).EditorLoginPopup="editor_login_popup",n.PageHeader="page_header",n.Export="export",n.GoogleDrive="google_drive",n.DropBox="dropbox",n.FromPhone="from_phone",n.FromComputer="from_computer",n.CollectionTab="collection_tab",n.useLimit="smart_tool_use_limit",n.uploadResult="smart_tool_upload_results",n.copyToClipboard="copy_to_clipboard",n.ThirdpartyPlugin="thirdparty_plugin",n.Brand="brand",n.ScreenRecorder="screen_recorder",n.PartExport="part_export",n.PartExportSameTime="part_export_sametime",n.Cover="cover",n.CheckList="checklist",n.Shopify="shopify",n.CreateCloneVoice="voice_create",n.TTSClickGenerate="tts_click_generate",n.AvTranslatorClickGenerate="click_generate",n.TTSEntry="tts_entry",n);let c=(0,o.LO)(a.D)},290568:function(e,t,i){"use strict";i.d(t,{S:function(){return r}});let r=(0,i(335290).yh)("user")},155841:function(e,t,i){"use strict";i.d(t,{eB:function(){return a},iv:function(){return o}});var r,n,o=((r={})[r.SelfCreate=0]="SelfCreate",r[r.AppTransition=1]="AppTransition",r[r.WebTransition=2]="WebTransition",r);var a=((n={}).Owner="owner",n.Admin="admin",n.Collaborator="collaborator",n.visitor="visitor",n)},702049:function(e,t,i){"use strict";i.d(t,{TO:()=>y,RD:()=>c,JA:()=>d,_L:()=>w});let r="bytedance",n="byted",o="goofy";i("39155");let a=/^\S+?\.bytedance\.net$/.test(window.location.host),s=window.location.host.split(".")[0].includes("boe"),l=window.location.host.match(/^\S+?\.jianying\.com$/),c=!!l,d=/^\w+\.web\.bytedance\.net$/.test(window.location.host)||/^\S+?boe\.bytedance\.net$/.test(window.location.host)||/^\S?capcut-os\.bytedance\.net$/.test(window.location.host)||window.location.host.endsWith(`.boe.${o}.app`)||window.location.host.includes("localhost")||"127.0.0.1"===window.location.hostname||/^[\d.]+$/.test(window.location.hostname),u=`wss://sami-api-boe.${n}.org`,p=`https://sami-api-boe.${n}.org`,_={sg1:"wss://sami-sg1.byteintlapi.com",maliva:"wss://sami-maliva.byteintlapi.com",boei18n:u},g={sg1:"https://sami-sg1.byteintlapi.com",maliva:"https://sami-maliva.byteintlapi.com",boei18n:p},h={web_domain:`https://capcut-os-boe.${r}.net`,tts_domain:u,sami_domain:p,frontier_domain:`wss://capcut-os-boe.${r}.net`,commerce_domain:""},m={web_domain:`https://capcut-web-va.${r}.net`,frontier_domain:`wss://frontier-va.${r}.net`,commerce_domain:`https://commerce-api-va.${r}.net`,tts_domain:_.maliva,sami_domain:g.maliva},v={web_domain:l?`https://${l[0]}`:"https://edit-api-va.capcut.com",commerce_domain:"https://commerce-api-va.capcut.com",frontier_domain:"wss://frontier-va.capcut.com",tts_domain:_.maliva,sami_domain:g.maliva},f={code:"US",country_name:"",city:"",web_idc:"maliva",domain:a?m:v};s&&(f.domain=h);function y(e,t){if(["sg1","maliva","boei18n"].includes(t)){let i={...e,tts_domain:_[t],sami_domain:g[t]};return{web_idc:t,...i}}return null}let w=new class e{setVar(e,t){if(!this._map.get(e)||void 0!==t)this._map.set(e,t)}setVars(e){for(let t in e)this.setVar(t,e[t])}getVar(e){return this._map.get(e)}getVars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e=0===e.length?Array.from(this._map.keys()):e;let t={};for(let i of e)t[i]=this._map.get(i);return t}constructor(e){this._map=new Map,this.setVars(e)}}(function(){let e=window.__locationInfo;if(e){let t=e.web_idc;e.domain.tts_domain=_[t],e.domain.sami_domain=g[t]}else e=f;return{web_idc:e.web_idc,country_code:e.code,...e.domain}}())},786022:function(e,t,i){"use strict";i.d(t,{kJ:function(){return r}});let r=348188},249656:function(e,t,i){"use strict";i.d(t,{C3:function(){return u},EE:function(){return h},Hw:function(){return _},Ll:function(){return m},Nb:function(){return f},PS:function(){return v},V6:function(){return g},n9:function(){return p}});var r,n,o,a,s,l,c,d,u=((r={})[r.MetaTypeNone=0]="MetaTypeNone",r[r.MetaTypeVideo=1]="MetaTypeVideo",r[r.MetaTypePhoto=2]="MetaTypePhoto",r[r.MetaTypeGif=3]="MetaTypeGif",r[r.MetaTypeMusic=4]="MetaTypeMusic",r[r.MetaTypeExtractMusic=5]="MetaTypeExtractMusic",r[r.MetaTypeSound=6]="MetaTypeSound",r[r.MetaTypeRecord=7]="MetaTypeRecord",r[r.MetaTypeImage=8]="MetaTypeImage",r[r.MetaTypeText=9]="MetaTypeText",r[r.MetaTypeSubtitle=10]="MetaTypeSubtitle",r[r.MetaTypeLyrics=11]="MetaTypeLyrics",r[r.MetaTypeSticker=12]="MetaTypeSticker",r[r.MetaTypeFilter=13]="MetaTypeFilter",r[r.MetaTypeLUT=14]="MetaTypeLUT",r[r.MetaTypeReshape=15]="MetaTypeReshape",r[r.MetaTypeBeauty=16]="MetaTypeBeauty",r[r.MetaTypeVideoEffect=17]="MetaTypeVideoEffect",r[r.MetaTypeBrightness=18]="MetaTypeBrightness",r[r.MetaTypeContrast=19]="MetaTypeContrast",r[r.MetaTypeSaturation=20]="MetaTypeSaturation",r[r.MetaTypeSharpen=21]="MetaTypeSharpen",r[r.MetaTypeHighlight=22]="MetaTypeHighlight",r[r.MetaTypeShadow=23]="MetaTypeShadow",r[r.MetaTypeTemperature=24]="MetaTypeTemperature",r[r.MetaTypeHue=25]="MetaTypeHue",r[r.MetaTypeFade=26]="MetaTypeFade",r[r.MetaTypeLightSensation=27]="MetaTypeLightSensation",r[r.MetaTypeVignetting=28]="MetaTypeVignetting",r[r.MetaTypeParticle=29]="MetaTypeParticle",r[r.MetaTypeSegCanvas=30]="MetaTypeSegCanvas",r[r.MetaTypeCanvasColor=31]="MetaTypeCanvasColor",r[r.MetaTypeCanvasImage=32]="MetaTypeCanvasImage",r[r.MetaTypeCanvasBlur=33]="MetaTypeCanvasBlur",r[r.MetaTypeTransition=34]="MetaTypeTransition",r[r.MetaTypeAudioEffect=35]="MetaTypeAudioEffect",r[r.MetaTypeAudioFade=36]="MetaTypeAudioFade",r[r.MetaTypeBeats=37]="MetaTypeBeats",r[r.MetaTypeTailLeader=38]="MetaTypeTailLeader",r[r.MetaTypeAnimation=39]="MetaTypeAnimation",r[r.MetaTypeVideoAnimation=40]="MetaTypeVideoAnimation",r[r.MetaTypeTextEffect=41]="MetaTypeTextEffect",r[r.MetaTypeTextShape=42]="MetaTypeTextShape",r[r.MetaTypeTextToAudio=43]="MetaTypeTextToAudio",r[r.MetaTypeVideoMix=44]="MetaTypeVideoMix",r[r.MetaTypeAdjust=45]="MetaTypeAdjust",r[r.MetaTypeVideoMask=46]="MetaTypeVideoMask",r[r.MetaTypeSpeed=47]="MetaTypeSpeed",r[r.MetaTypeChroma=48]="MetaTypeChroma",r[r.MetaTypeTextTemplate=49]="MetaTypeTextTemplate",r[r.MetaTypeVideoOriginalSound=50]="MetaTypeVideoOriginalSound",r[r.MetaTypeStretchLeg=51]="MetaTypeStretchLeg",r[r.MetaTypeRealtimeDenoise=52]="MetaTypeRealtimeDenoise",r[r.MetaTypeFigure=53]="MetaTypeFigure",r[r.MetaTypeFaceEffect=54]="MetaTypeFaceEffect",r[r.MetaTypeVideoTracking=55]="MetaTypeVideoTracking",r[r.MetaTypeHsl=56]="MetaTypeHsl",r[r.MetaTypeColorCurves=57]="MetaTypeColorCurves",r[r.MetaTypeAudioBalance=58]="MetaTypeAudioBalance",r[r.MetaTypeComposition=59]="MetaTypeComposition",r[r.MetaTypeCover=60]="MetaTypeCover",r[r.MetaTypeLeader=61]="MetaTypeLeader",r[r.MetaTypeTailer=62]="MetaTypeTailer",r[r.MetaTypePrimaryColorWheels=63]="MetaTypePrimaryColorWheels",r[r.MetaTypeLogColorWheels=64]="MetaTypeLogColorWheels",r[r.MetaTypeHandwriteImage=65]="MetaTypeHandwriteImage",r[r.MetaTypeHandwriteRes=66]="MetaTypeHandwriteRes",r[r.MetaTypeCombination=67]="MetaTypeCombination",r[r.MetaTypeManualDeformation=68]="MetaTypeManualDeformation",r[r.MetaTypePluginEffect=69]="MetaTypePluginEffect",r[r.MetaTypeLockObject=70]="MetaTypeLockObject",r[r.MetaTypeAdCube=71]="MetaTypeAdCube",r[r.MetaTypeMattingStroke=72]="MetaTypeMattingStroke",r[r.MetaTypeSmartColorAdjust=73]="MetaTypeSmartColorAdjust",r[r.MetaTypeChannelMapping=74]="MetaTypeChannelMapping",r[r.MetaTypeBloom=75]="MetaTypeBloom",r[r.MetaTypeTextPreset=76]="MetaTypeTextPreset",r[r.MetaTypeGreenScreen=77]="MetaTypeGreenScreen",r[r.MetaTypeArticleToVideoTemplate=78]="MetaTypeArticleToVideoTemplate",r[r.MetaTypeAll=79]="MetaTypeAll",r);var p=((n={})[n.MaterialPlatformDefault=0]="MaterialPlatformDefault",n[n.MaterialPlatformArtist=1]="MaterialPlatformArtist",n[n.MaterialPlatformXTApp=2]="MaterialPlatformXTApp",n[n.MaterialPlatformQYApp=3]="MaterialPlatformQYApp",n[n.MaterialPlatformFaceuApp=4]="MaterialPlatformFaceuApp",n[n.MaterialPlatformLVApp=5]="MaterialPlatformLVApp",n[n.MaterialPlatformCapCutApp=6]="MaterialPlatformCapCutApp",n[n.MaterialPlatformXigua=7]="MaterialPlatformXigua",n[n.MaterialPlatformGiphy=8]="MaterialPlatformGiphy",n[n.MaterialPlatformBrand=9]="MaterialPlatformBrand",n[n.MaterialPlatformEnterprise=10]="MaterialPlatformEnterprise",n[n.MaterialPlatformTuchongAdobe=11]="MaterialPlatformTuchongAdobe",n[n.MaterialPlatformTuchongDeposit=12]="MaterialPlatformTuchongDeposit",n[n.MaterialPlatformTuchongPond5=13]="MaterialPlatformTuchongPond5",n[n.MaterialPlatformStudioShooting=14]="MaterialPlatformStudioShooting",n);var _=((o={})[o.UNKNOWN=0]="UNKNOWN",o[o.HEYCAN=1]="HEYCAN",o[o.LOKI=2]="LOKI",o[o.MUSIC=3]="MUSIC",o[o.TUCHONG=5]="TUCHONG",o[o.BRAND=6]="BRAND",o);var g=((a={}).DEPOSIT="third_resource_tuchong_deposit",a.ADOBE="third_resource_tuchong_adobe",a.POND5="third_resource_tuchong_pond5",a);var h=((s={})[s.EffectPlatformLoki=0]="EffectPlatformLoki",s[s.EffectPlatformArtist=1]="EffectPlatformArtist",s[s.EffectPlatformBrand=2]="EffectPlatformBrand",s[s.EffectPlatformImportedFont=3]="EffectPlatformImportedFont",s[s.EffectPlatformServerTemplate=4]="EffectPlatformServerTemplate",s);var m=((l={})[l.AudioPlatformLibrary=0]="AudioPlatformLibrary",l[l.AudioPlatformArtist=1]="AudioPlatformArtist",l[l.AudioPlatformBrand=2]="AudioPlatformBrand",l[l.AudioPlatformEnterprise=3]="AudioPlatformEnterprise",l);var v=((c={}).AES_GCM="AES-GCM",c.AES_CBC="AES-CBC",c);var f=((d={})[d.New=1]="New",d[d.Old=0]="Old",d)},127830:function(e,t,i){"use strict";i.d(t,{Pl:function(){return l},_g:function(){return a},is:function(){return c},pS:function(){return s}});var r,n,o,a=((r={}).Sticker="sticker",r.Font="font",r.TextTemplate="textTemplate",r.Shape="shape",r.ImageFrame="imageFrame",r.Photo="photo",r.AdjustmentPreset="adjustmentPreset",r.BrandColor="brandColor",r.BrandFont="brandFont",r.UserAudio="userAudio",r.UserPhoto="userPhoto",r.UserVideo="userVideo",r.UserFile="userFile",r.UserCloneVoice="userCloneVoice",r.ImageFilter="imageFilter",r.ImageEffect="imageEffect",r.AiBackground="aiBackground",r.UserMaterial="everCloud",r.EffectModel="effectModel",r.TextGlow="textGlow",r.ImageFigureFaceEffect="imageFigureFaceEffect",r.ImageFigureMakeupEffect="imageFigureMakeupEffect",r.ImageFigureBodyEffect="imageFigureBodyEffect",r.ImageFigureReshapeEffect="imageFigureReshapeEffect",r.Video="video",r.Gif="gif",r.CurveHSL="CurveHSL",r.CurvePreset="curve_adjust_preset",r.VoiceChange="voice-change",r.ShootProject="shoot-project",r.LiveshortenPanEntertainment="liveshorten-pan-entertainment",r.FaceProp="face-prop",r.ShootProp="shoot-prop",r.Shoot="shoot",r.Play="play",r.SystemFonts="system-fonts",r.ManualFigure="manual-figure",r.SkeletonBody="skeleton-body",r.AISkeletonBody="beauty2",r.AutoBeautyBody="auto-beauty3",r.Beauty="beauty",r.AutoBeautyShape="auto-beauty",r.AutoBeautyFace="auto-beauty2",r.AutoBeautyMakeup="makeup",r.CoverFlower="flower2",r.ShootFilter="filter2",r.CoverBubble="bubble2",r.Effects="effects2",r.Tone="tone",r.Filter="filter",r.VideoBackground="videoBackground",r.Bubble="bubble",r.TextPreset="flower",r.Transition="transitions",r.Mix="mix",r.TextMotion="textMotion",r.VideoMotion="videoMotion",r.StickerMotion="stickerMotion",r.Insert="insert",r.Mask="videomask",r.CurveSpeed="curvespeed",r.Integration="integration",r.Iosemojinew="iosemojinew",r.Emoji="emoji",r.Emojiandroid="emojiandroid",r.Emojiios="emojiios",r.Audio="audio",r.ArithmeticModel="arithmetic-model",r.VideoTemplate="video-template",r.ShapeAnimation="shape-animation",r.Graffiti="graffiti",r.PathAnimation="path-animation",r.AiAvatarMask="aiavatarmask",r.DigitalHuman="digital-human",r.SmartColorAdjust="smart_color_adjust",r.SubtitleTemplate="subtitle-templates",r.ObjectLock="camera_tracking",r.PhotoDreamina="photo-dreamina",r.VideoDreamina="video-dreamina",r.DreaminaAiVideo="dreamina_ai_video",r.DreaminaUserAiVideo="dreamina_user_ai_video",r.DreaminaShowCaseVideo="dreamina_showcase_video",r.DreaminaLipSyncAudio="dreamina_lip_sync_audio",r.DreaminaFont="dreamina_font",r.TemplatePhotoDreamina="template_photo_dreamina",r.MattingStroke="matting_stroke",r.TextArt="text_art",r.TextArtIcon="text_art_icon",r.ImageSource="image_source",r.VodVideoSource="vod_video_source",r);var s=((n={})[n.Material=0]="Material",n[n.Folder=1]="Folder",n[n.Package=3]="Package",n[n.Exported=6]="Exported",n);var l=((o={})[o.Delete=1]="Delete",o[o.Move=2]="Move",o[o.Rename=3]="Rename",o[o.View=4]="View",o[o.Copy=5]="Copy",o);let c=new Set(["sticker","font","textTemplate","shape","imageFrame","imageFilter","imageEffect","aiBackground","everCloud","effectModel","CurveHSL","curve_adjust_preset","voice-change","shoot-project","liveshorten-pan-entertainment","face-prop","shoot-prop","shoot","play","system-fonts","manual-figure","skeleton-body","beauty2","auto-beauty3","beauty","auto-beauty","auto-beauty2","makeup","flower2","filter2","bubble2","effects2","tone","filter","videoBackground","bubble","flower","transitions","mix","textMotion","textGlow","videoMotion","stickerMotion","insert","videomask","curvespeed","integration","iosemojinew","emoji","emojiandroid","emojiios","shape-animation","graffiti","path-animation","aiavatarmask","subtitle-templates"])},405051:function(e,t,i){"use strict";i.d(t,{yk:()=>b,Gf:()=>w,kk:()=>y});var r=i("818398"),n=i.n(r),o=i("787076"),a=i("114861"),s=i("121130"),l=i("768362"),c=i("131805"),d=i("690613");let u=new c.z(100),p=["logid","ret","errmsg","log_id","logId","status_message","status_code"];function _(e){let t=e.config;return(null==t?!!void 0:!!t.spanId)||!1}function g(e){if(!_(e))return e;let t=e.config;try{let i=t.spanId,r=u.get(i);r&&(void 0!==e.status&&r.addEvent(l.cl.double("status",e.status)),void 0!==e.statusText&&r.addEvent(l.cl.string("status_text",e.statusText)),Object.entries(e.config.headers.toJSON()).forEach(e=>{let[t,i]=e;return r.addEvent(l.cl.string(`Res.${t}`,JSON.stringify(i)))}),e.data&&p.forEach(t=>{var i,n,o;void 0!==e.data[t]?(r.addEvent(l.cl.string(`Res.${t}`,JSON.stringify(e.data[t]))),("ret"===t||"status_code"===t)&&0!==Number(e.data[t])&&r.markError((0,d.wf)(Number(e.data[t]),null!==(n=e.data.errmsg)&&void 0!==n?n:""))):void 0!==(null===(i=e.data.data)||void 0===i?void 0:i[t])&&(r.addEvent(l.cl.string(`Res.${t}`,JSON.stringify(e.data.data[t]))),("ret"===t||"status_code"===t)&&0!==Number(e.data.data[t])&&r.markError((0,d.wf)(Number(e.data.data[t]),null!==(o=e.data.errmsg)&&void 0!==o?o:"")))}),r.end(),u.remove(i))}catch(e){console.error(e)}return e}function h(e){if(!_(e))return e;let t=e.config;try{let i=t.spanId,r=u.get(i);r&&(r.markError(e),g(e))}catch(e){console.error(e)}return Promise.reject(e)}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"network";e.interceptors.request.use(e=>{if(!e.ctx||!e.url)return e;try{var i,r,n,o;let{span:a}=(0,l.VL)(e.ctx,t,e.url),s=e.ctx.getValue(l.oL).spanId;e.spanId=s,u.put(s,a),a.addEvent(l.cl.string("Method",null!==(n=e.method)&&void 0!==n?n:"")),Object.entries(null!==(o=null===(i=(r=e.headers).toJSON)||void 0===i?void 0:i.call(r))&&void 0!==o?o:e.headers).forEach(e=>{let[t,i]=e;return a.addEvent(l.cl.string(`Req.${t}`,JSON.stringify(i)))})}catch(e){console.error(e)}return e}),e.interceptors.response.use(g,h)}var v=i("943943");let f=RegExp(`capcut-web-.*\\.${v.Y}\\.net|edit-api-.*\\.capcut\\.com`),y={headers:{"Content-Type":"application/json"},transformRequest:[function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().stringify(e)}],transformResponse:[function(e){try{return n()({storeAsString:!0}).parse(e)}catch(t){return{data:e}}}]};function w(){let e=(0,o.e)(y);return(0,s.e_)(e),(0,a.V)(e),m(e),e}class b{static get apiSetting(){return b._apiSetting}static setApiSetting(e){b._apiSetting=e}build(e){let t=(0,o.e)(e);return t.interceptors.request.use(e=>{var t,i;if(i=null!==(t=e.url)&&void 0!==t?t:"",f.test(i))e={withCredentials:!0,...e};return e}),m(t),t}}},943943:function(e,t,i){"use strict";i.d(t,{$R:function(){return n},R0:function(){return r},Y:function(){return o}});let r="custom-host-name-type",n="need-x-lvweb-idc-header",o="bytedance"},621249:function(e,t,i){"use strict";async function r(e,t,i){let{retryTimes:n,delay:o}=i;try{return await e.apply(this,t)}catch(i){if(--n<0)throw i;return await new Promise(e=>setTimeout(e,o)),r.apply(this,[e,t,{retryTimes:n,delay:o}])}}function n(e){let{retryTimes:t=1,delay:i=200}=null!=e?e:{};return function(e,n,o){let a=o.value;return o.value=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(this,[a,n,{retryTimes:t,delay:i}])},o}}i.d(t,{K:function(){return n}})},999432:function(e,t,i){"use strict";i.d(t,{V:function(){return s}});var r=i(998498),n=i.n(r),o=i(604250),a=i(801497);function s(e,t){e.interceptors.request.use(e=>{var i,r;let{url:s="",baseURL:l="",headers:c,data:d={}}=e,{loc:u,appSDKVesion:p,lan:_,pf:g,appVersion:h,tdid:m,signVer:v}=t,{pathname:f}=(0,o.GM)(`${l}${s}`),y=f.length>=7?f.slice(-7):f;c.loc=u,c["app-sdk-version"]=p,c.lan=null!==(r=null!==(i=a.oc.language)&&void 0!==i?i:_)&&void 0!==r?r:"en",c.pf=g,c.appvr=h,c.tdid=m,c["sign-ver"]=v,c["device-time"]=Math.floor(Date.now()/1e3);let w=`9e2c|${y}|${g}|${h}|${c["device-time"]}|${m}|11ac`;return c.sign=n()(w).toLowerCase(),e.data=d,e})}},905180:function(e,t,i){"use strict";i.d(t,{Y:function(){return n}});var r=i(772270);function n(e){let t=function(){let e=document.cookie.match(RegExp("(^| )_tea_web_id=([^;]+)")),t=window.GATEWAY_INJECTED_WEB_ID||"";return!t&&null!==e&&(t=e[2]),t}();e.interceptors.request.use(e=>{var i,n,o;return{...e,params:{...e.params||{},aid:null!==(o=null!==(n=null==e?void 0:null===(i=e.params)||void 0===i?void 0:i.aid)&&void 0!==n?n:r.AF)&&void 0!==o?o:"348188",device_platform:"web",region:window.__locationCountryCode||"us",web_id:t}}})}},515207:function(e,t,i){"use strict";i.d(t,{J:function(){return o}});var r=i(943943),n=i(405051);function o(e){e.interceptors.request.use(async e=>{var t,i;let o=!!(null===(t=e.baseURL)||void 0===t?void 0:t.startsWith("https")),a=e[r.R0]||"web_domain",s=null===(i=e[r.$R])||void 0===i||i;if(!o){let t=!1;setTimeout(()=>{!t&&console.error(`current request${e.url} is blocking by route. Please check`)},2e3);let i=await n.yk.apiSetting.getRequestDomain({type:a});t=!0,e.baseURL=i}let l={...e.headers,loc:await n.yk.apiSetting.getUserRegion(),"x-lvweb-idc":n.yk.apiSetting.userIDC};return!s&&delete l["x-lvweb-idc"],Object.assign(e,{headers:l,withCredentials:!0}),e})}},863183:function(e,t,i){"use strict";i.d(t,{xP:function(){return s}});var r=i(569471);function n(e){return e?e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`):""}function o(e){return e?e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase()):""}function a(e,t){if(e&&"object"==typeof e)for(let i of Object.keys(e)){let r=t(i);r!==i&&(e[r]=e[i],delete e[i]),a(e[r],t)}return e}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disableParseRequest:!1,disableParseResponse:!1},{disableParseResponse:i,disableParseRequest:s}=t;s||e.interceptors.request.use(e=>(e.data=a((0,r.I)(e.data),n),e)),i||e.interceptors.response.use(e=>(e.data=a(e.data,o),e))}},323452:function(e,t,i){"use strict";function r(e){e.interceptors.response.use(e=>(null==e?void 0:e.ret)==="0"&&2===Object.keys(e).length&&"log_id"in e?Promise.reject(e):Promise.resolve(e))}i.d(t,{s:function(){return r}})},121130:function(e,t,i){"use strict";function r(e){e.interceptors.response.use(e=>{if(200===e.status){var t;let i=e.data;if(i.data&&((null==i?void 0:i.logId)||(null==i?void 0:i.logid)||(null==i?void 0:i.log_id))&&(i.data.__logId=i.logId||i.logid||i.log_id),i.data&&((null==i?void 0:i.cache_sync_token)||(null==i?void 0:i.cacheSyncToken))&&(i.data.__cacheSyncToken=i.cache_sync_token||(null==i?void 0:i.cacheSyncToken)),(null==i?void 0:i.ret)==="0"||(null==i?void 0:null===(t=i.BaseResp)||void 0===t?void 0:t.StatusCode)===0)return Promise.resolve(null==i?void 0:i.data)}return Promise.reject(e.data)})}function n(e,t){e.interceptors.response.use(e=>{let{disableRetCheck:i=!1}=null!=t?t:{};if(200===e.status){var r;let t=e.data;return i||(null==t?void 0:t.ret)==="0"||(null==t?void 0:null===(r=t.BaseResp)||void 0===r?void 0:r.StatusCode)===0||(null==t?void 0:t.status_code)===0||(null==t?void 0:t.ret)===""||(null==t?void 0:t.err_no)===0?Promise.resolve(t):Promise.reject(t)}return Promise.reject(e)})}function o(e){e.interceptors.response.use(e=>Promise.resolve(e.data))}i.d(t,{e_:function(){return r},i3:function(){return n},mK:function(){return o}})},894339:function(e,t,i){"use strict";i.d(t,{Og:function(){return l},mH:function(){return c},p1:function(){return a}});var r=i(998498),n=i.n(r),o=i(604250);let a=1,s="5.8.0";function l(e){let{url:t,pf:i,appvr:r,tdid:a}=e,{pathname:s}=(0,o.GM)(t),l=Math.floor(Date.now()/1e3);return{sign:n()(`9e2c|${s.slice(-7)}|${i}|${r}|${l}|${a}|11ac`).toLowerCase(),"device-time":l}}function c(e){e.interceptors.request.use(e=>((function(e){var t;let i={...l({url:null!==(t=e.url)&&void 0!==t?t:"",pf:"7",appvr:s,tdid:""}),"sign-ver":a,pf:"7",appvr:s};Object.assign(e,{headers:{...e.headers,...i}})})(e),e))}},521840:function(e,t,i){"use strict";i.d(t,{a:function(){return n}});var r=i(763832);function n(e,t){let{retryTimes:i=0,delay:n=200}=null!=t?t:{},o=async t=>{0!==t&&(0,r._)(n);let a=await e();if(!a.ok)return t>=i?a:o(t+1);return a};return o(0)}},604250:function(e,t,i){"use strict";i.d(t,{GM:function(){return n}});let r=e=>e.startsWith("http://")||e.startsWith("https://")?e:`${location.origin}${e}`,n=e=>new URL(r(e))},866006:function(e,t,i){"use strict";i.d(t,{ib:function(){return n},ky:function(){return o},yt:function(){return r}});class r{combineConfig(e){this._config=Object.assign({},this._config,e)}get config(){return this._config}set hasMore(e){this._hasMore=e}get hasMore(){return this._hasMore}set offset(e){this._offset=e}get offset(){return this._offset}set searchId(e){this._searchId=e}get searchId(){return this._searchId}set requestId(e){this._requestId=e}get requestId(){return this._requestId}set logId(e){this._logId=e}get logId(){return this._logId}constructor(e,t,i){this._config={},this.value=e,this._hasMore=t.hasMore,this._offset=t.offset,this._searchId=t.searchId,this._requestId=t.requestId,this._logId=t.logId,this.combineConfig(null!=i?i:{})}}function n(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasMore:!0,offset:0};return new r(t,i,e)}function o(e){return e instanceof r}},241254:function(e,t,i){"use strict";i.d(t,{HI:function(){return a},_A:function(){return l},zU:function(){return s}});var r,n,o,a=((r={}).VideoEditor="video_editor",r);var s=((n={}).Editor="editor",n.Tool="tool",n);var l=((o={}).SubtitleRecognition="subtitle_recognition",o.TextToSpeech="text_to_speech",o.AiTranslation="ai_translation",o.VoiceOptimization="voice_optimization",o.VoiceClone="voice_clone",o.VoiceChange="voice_change",o.AiLipsync="ai_lipsync",o.SoundSeparation="sound_separation",o)},768101:function(e,t,i){"use strict";i.d(t,{P:function(){return o},m:function(){return n}});var r=i(690613);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown error";return t="object"==typeof e&&(null==e?void 0:e.ret)?e.ret:t,i="object"==typeof e&&(null==e?void 0:e.errmsg)?e.errmsg:i,(0,r.Mx)(t,i,e)}let o=e=>{if(e instanceof Error)return(0,r.Mx)(-1,e.message,e);if((0,r.oi)(e))return(0,r.Mx)(e.code,e.msg,e);let t=(()=>{if(!("object"==typeof e&&e&&"ret"in e)||"string"!=typeof e.ret&&"number"!=typeof e.ret)return -1;let t="number"==typeof e.ret?e.ret:parseInt(e.ret,10);return Number.isNaN(t)?-1:t})(),i="object"==typeof e&&e&&"errmsg"in e&&"string"==typeof e.errmsg?e.errmsg:"unknown error";return(0,r.wf)(t,i,e)}},191449:function(e,t,i){"use strict";i.d(t,{X:function(){return c},b:function(){return l}});var r=i(569471),n=i(700056),o=i(540457),a=i(292180);function s(e,t){if(e&&"object"==typeof e)for(let i of Object.keys(e)){let r=t(i);r!==i&&(e[r]=e[i],delete e[i]),s(e[r],t)}return e}let l=function(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return s(i?(0,n.Z)(e):e,null!=t?t:o.Z)},c=(e,t)=>s(t?(0,r.I)(e):e,a.Z)},32372:function(e,t,i){"use strict";i.d(t,{s:function(){return r}});let r=e=>{var t;let i=e.match(/^(https:\/\/[^\/]*)/g);return null!==(t=null==i?void 0:i[0])&&void 0!==t?t:e}},570811:function(e,t,i){"use strict";function r(e,t,i){if(0===e||0===t||!e||!t)return null!=i?i:1;let r=Number(e),n=Number(t);return Number.isNaN(r)||Number.isNaN(n)?null!=i?i:1:r/n}i.d(t,{o:function(){return r}})},141314:function(e,t,i){"use strict";i.d(t,{w:function(){return r}});class r{url(e){let{baseURL:t,domain:i,urlMap:r}=this._options;return i?`${"/"===i?"":i}${t}${r[e]}`:`${t}${r[e]}`}constructor(e){this._options=e}}},462589:function(e,t,i){"use strict";i.d(t,{o:function(){return n}});var r=i(813072);function n(e,t){let i=null!=e?e:18e5,n=null!=t?t:1,o=new Map;return function(e,t,a){let s=a.value;return a.value=async function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let l=Array.from(t),c=function(e,t){for(let[i,n]of e)if((0,r.Z)(i,t))return n}(o,l);if(null==c?void 0:c.apiPromise)return c.apiPromise;if(c){if(c.time+i>Date.now()&&c.apiResponse)return c.apiResponse;c.apiResponse=void 0}let d=s.apply(this,t);c={time:Date.now(),apiPromise:d},i>0&&!function(e,t,i,r){if(e.set(i,r),e.size>t){let t=e.keys().next().value;e.delete(t)}}(o,n,l,c);let u=await d;return(c.apiPromise=void 0,u.ok)?(c.apiResponse=u,u):(o.delete(l),u)},a}}},1006:function(e,t,i){"use strict";i.d(t,{j:()=>m});var r=i("405051"),n=i("863183"),o=i("121130"),a=i("894339"),s=i("604250"),l=i("134429"),c=i("801497");let d={loc:"sg",appSDKVesion:l.Mr,lan:c.ZP.language||"en",pf:"7",appVersion:l.$U,tdid:"",signVer:1};var u=i("998498"),p=i.n(u);i("784923");var _=i("498417");let g=["1015","1016","1017","1018"],h=["/api/biz/v1/videogen/script_list","/api/biz/v1/videogen/generate","/api/biz/v1/product/get_url_data"];function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{disableRetCheck:t,disableParseRequest:i=!1,disableParseResponse:l=!1,...u}=e,m=new r.yk().build({...r.kk,...u});return(0,n.xP)(m,{disableParseRequest:i,disableParseResponse:l}),!function(e){e.interceptors.response.use(e=>(h.some(t=>(e.config.url||"").includes(t))&&window.$devPanelInfo&&window.$devPanelInfo.push({url:e.config.url,logId:e.data.logId,latecy:Math.floor(Date.now()/1e3)-e.config.headers["device-time"]}),Promise.resolve(e)))}(m),!function(e){e.interceptors.response.use(e=>{let t=e.data;return 200===e.status&&g.includes(null==t?void 0:t.ret)&&(console.error(`Not Logged In! API response ret: ${null==t?void 0:t.ret}`),_.Z.error("An error may have occurred. Please refresh the page to log in again.")),Promise.resolve(e)})}(m),(0,o.i3)(m,{disableRetCheck:t}),!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;e.interceptors.request.use(e=>{var i,r;let{url:n="",baseURL:o="",headers:a,data:l={}}=e,{loc:d,appSDKVesion:u,lan:_,pf:g,appVersion:h,tdid:m,signVer:v}=t||{},{pathname:f}=(0,s.GM)(`${o}${n}`),y=f.length>=7?f.slice(-7):f;a.loc=d,a["app-sdk-version"]=u,a.lan=null!==(r=null!==(i=c.ZP.language)&&void 0!==i?i:_)&&void 0!==r?r:"en",a.pf=g,a.appvr=h,a.tdid=m,a["sign-ver"]=v,a["device-time"]=Math.floor(Date.now()/1e3);let w=`9e2c|${y}|${g}|${h}|${a["device-time"]}|${m}|11ac`;return a.sign=p()(w).toLowerCase(),e.data=l,e})}(m,d),(0,a.mH)(m),m}},160100:function(e,t,i){"use strict";i.d(t,{n:function(){return r}});let r=(0,i(335290).yh)("cookie-consent")},531778:function(e,t,i){"use strict";i.d(t,{P:function(){return n}});var r,n=((r={})[r.Eager=0]="Eager",r[r.Idle=1]="Idle",r)},401846:function(e,t,i){"use strict";i.d(t,{Q:function(){return r}});let r=(0,i(335290).yh)("extension")},231150:function(e,t,i){"use strict";i.d(t,{TO:function(){return a},XC:function(){return s}});var r=i(963311),n=i(894339);let o=null;async function a(){if(!o){let e=await r.getAppInfo(),{appVersion:t}=e.data.data,{headerValue:i}=function(e){let t=255&e,i=e>>8&255,r=e>>16&255;return{major:r,minor:i,patch:t,headerValue:`${r}.${i}.${t}`}}(t),{did:n,os:a,appID:s}=e.data.data;o={appID:s,appvr:i,did:n,pf:"mac"===a?"3":"4"}}return o}function s(e){e.interceptors.request.use(async e=>{var t;let{appID:i,appvr:r,pf:o,did:s}=await a(),l={...(0,n.Og)({url:null!==(t=e.url)&&void 0!==t?t:"",pf:o,appvr:r,tdid:s}),"sign-ver":n.p1,pf:o,appvr:r,tdid:s};return Object.assign(e,{headers:{...e.headers,...l}}),e})}},685795:function(e,t,i){"use strict";i.d(t,{L:function(){return a},T:function(){return o}});var r,n=i(335290);var o=((r={}).DEBUG="debug",r.INFO="info",r.WARN="warn",r.ERROR="error",r);let a=(0,n.yh)("slardar-adapter")},460492:function(e,t,i){"use strict";i.d(t,{X:()=>m});var r=i("789786"),n=i("838255"),o=i("641276"),a=i("587892"),s=i("800788"),l=i("160100"),c=i("999268"),d=i("475590");let u={appId:"app_id",appVersion:"app_version",userId:"user_id",hasLogin:"user_is_login",stagingFlag:"_staging_flag",enableTTWid:"enable_ttwebid",userType:"user_type"};class p{setConfig(e){let t=this._transformToTeaConfig(e);this._sdk.config(t),(void 0!==t.user_unique_id||void 0!==t.user_id)&&(this._abReady=!1)}getTeaConfig(){return this._sdk.getConfig()}reportPv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,{forceReport:i}=t||{};if(!this._canReport()){this._needReportPv=e;return}if(i){this._sdk.predefinePageView(e);return}if(!!this._canReportPv)this._canReportPv=!1,this._needReportPv=void 0,this._sdk.predefinePageView(e)}disableReportPv(){this._canReportPv=!1}setCustomParams(e){Object.assign(this._customParams,e),this._sdk.config({custom:this._customParams})}getCustomParams(){return this._customParams}setCommonEventParams(e){Object.assign(this._evtParams,e),this._sdk.config({evtParams:this._evtParams})}getCommonEventParams(){return this._evtParams}track(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!!this._canReport())i?this._reportBecon(e,t):this._report(e,t)}ensureTrack(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._canReport()){this._pendingEventQueue.push({event:e,params:t,immediately:i});return}i?this._reportBecon(e,t):this._report(e,t)}async getABConfig(){await this._abMutex.lock();try{return await this._getABConfig()}finally{this._abMutex.unLock()}}async getABTestVar(e,t){return await this._checkAbReady(),new Promise(i=>{if(this._canReport())return this._sdk.getVar(e,t,i);i(t)})}async getWebId(){if(this._webId)return this._webId;if(await this._webIdMutexLock.lockShared(),this._webId)return this._webId;let e=await new Promise(e=>{this._sdk.getToken(e,3e3)});return this._webIdMutexLock.unLockShared(),this._webId=e.web_id,this.setCustomParams({web_id:this._webId}),this._webId}_getABConfig(){return new Promise(e=>{this._sdk.getABConfig?this._sdk.getABConfig({},e):this._sdk.getABconfig({},e)})}_flush(){for(let e of(this._needReportPv&&this.reportPv(this._needReportPv),this._pendingEventQueue))e.immediately?this._reportBecon(e.event,e.params):this._report(e.event,e.params)}_transformToTeaConfig(e){let t={};return Object.entries(e).forEach(e=>{let[i,r]=e;t[u[i]?u[i]:i]=r}),e.userId?t.user_unique_id=e.userId:""===e.userId&&(t.user_unique_id=void 0),t}_report(e,t){this._sdk.event(e,t)}_reportBecon(e,t){this._sdk.beconEvent(e,t)}async _checkAbReady(){await this._abMutex.lock();try{if(this._abReady)return;await (0,d.Hp)(()=>this._getABConfig(),3e3),this._abReady=!0}finally{this._abMutex.unLock()}}constructor(){this._customParams={},this._evtParams={},this._abReady=!1,this._abMutex=new c.L,this._canReportPv=!0,this._pendingEventQueue=[],this._webId="",this._webIdMutexLock=new c.L}}var _=i("690613");async function g(e,t){let{TtWid:r}=await i.e("6238").then(i.bind(i,164344)),n=new r({aid:e,service:location.host,unionHost:t});try{return await n.checkWebIdFromTea(),(0,_.ly)()}catch(e){return(0,_.Mx)(-1,"webId invalid.",e)}}async function h(e,t,i){var r;let n=await (r=i,(0,d.Hp)(async()=>{let{web_id:e}=await new Promise(e=>{r.getToken(e,3e3)});return(0,s.ZB)(e),e},3e3));return n.ok?g(e,t):n}class m extends p{getSessionId(){return this._sdk.getSessionId()}_canReport(){return!!this._cookieConsent.enable||!1}_initSdk(e,t){var i,r;this._sdk.init({channel_domain:e.channelDomain,app_id:e.appId,disable_auto_pv:e.disableAutoPv,disable_sdk_monitor:!this._cookieConsent.enable,channel:e.channel,enable_ab_test:null!==(i=e.enableAbTest)&&void 0!==i&&i,ab_channel_domain:null!==(r=e.abChannelDomain)&&void 0!==r?r:"",autotrack:e.autoTrack,disable_webid:!!e.webId,max_report:e.maxReportMerge,reportTime:e.reportInterval}),!e.disableAutoPv&&super.disableReportPv(),this.setConfig(t),e.webId&&(this._webId=e.webId,this._sdk.config({web_id:e.webId})),!e.webId&&t.enableTTWid&&((0,s.Y2)(t.ttWidUnionHost,"must pass ttWidUnionHost when enableTTWid(true) and webId(no)."),this._prepareTtWebId(e.appId,t.ttWidUnionHost)),this._preparePermission()}_startSdk(){if(!!this._canReport())(0,s.Y2)(this._cookieConsent.enable),!this._running&&(this._sdk.start(),this._running=!0),this._flush()}async _prepareTtWebId(e,t){await this._webIdMutexLock.lock(),h(e,t,this._sdk).then(e=>{!e.ok&&this._onBindTtWidError.fire()}).finally(()=>{this._webIdMutexLock.unLock()})}_preparePermission(){if(!this._cookieConsent.enable)(0,o.V)(this._cookieConsent.onEnableChange)(()=>{this._startSdk()})}constructor(e,t,i){super(),this._cookieConsent=i,this._sdk=n.Z,this._running=!1,this._onBindTtWidError=new a.Q,this.onBindTtWidError=this._onBindTtWidError.event,this._initSdk(e,t),this._startSdk()}}m=(0,r.gn)([(0,r.fM)(2,l.n),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof IOverseaInitOptions?Object:IOverseaInitOptions,"undefined"==typeof IBaseConfig?Object:IBaseConfig,void 0===l.n?Object:l.n])],m)},596112:function(e,t,i){"use strict";i.d(t,{w:function(){return r}});let r=(0,i(335290).yh)("tea-adapter")},732564:function(e,t,i){"use strict";i.d(t,{zo:()=>h});var r=i("426336"),n=i("593642"),o=i("475590"),a=i("587892"),s=i("111516"),l=i("144144");let c=new Map;async function d(e,t,i){var n;let o=await (null===(n=i.utils)||void 0===n?void 0:n.getMediaFileInfo(e,t)),a=null;if(o&&o.length>2)try{a=JSON.parse(o)}catch(e){console.error("getMediaFileInfoInternal: parse MediaFileInfo error",e)}if(a&&"Video"===a.type&&"0"===a.duration&&("0"===a.width||"-1"===a.width)&&("0"===a.height||"-1"===a.height))return null;if(a&&"Audio"===a.type&&"0"===a.duration)return null;if(a&&"Image"===a.type&&"0"===a.width&&"0"===a.height)return null;return a&&(a.duration=(0,r.k3U)(a.duration,1000n,"bigint")),a}async function u(e,t,i){var r;!c.has(e)&&c.set(e,d(e,t,i));let n=null!==(r=await c.get(e))&&void 0!==r?r:null;return null===n?c.delete(e):(n.width=parseInt(n.width),n.height=parseInt(n.height),n.rotation=parseFloat(n.rotation),n.bitrate=parseFloat(n.bitrate),n.fps=parseFloat(n.fps)),n}let p=(e,t)=>{var i;let n=e.draftView.getSegmentsByTrackTypes([r.pNd.TrackTypeText]);if(0===n.length)return;let{render:o}=t;null===(i=t.editor)||void 0===i||i.commit(()=>{for(let t of n)(0,r.Ftn)(t)?o.apis.text.update(t,e.draftView):(0,r.Q2R)(t)&&o.apis.textTemplate.update(t)})},_="GENERATE_DIFF_DATA",g="SEEK_FIRST_FRAME";class h{_init(){let e=this._renderSdk.executor;this._diffApplicator=new r.M_$(e),this._waitingFirstFrameRender=new Promise(e=>{this._renderSdk.preview.onFrameRender(()=>e())}),this.startListener(),this._missingEvents.forEach(e=>{let[t,i]=e;t(i)}),this._renderSdk.preview.onFirstFrameRender(()=>{this.isFirstFrameRender=!0})}_collectEventCallback(e,t){return i=>{if(this._listenerMap[t]?!this._listenerMap[t].has(i)&&this._listenerMap[t].add(i):this._listenerMap[t]=new Set([i]),this.isResetting)return this._missingEvents.push([e,i]),null;{let r=e(i);return{...r,dispose:()=>{this._listenerMap[t].delete(i),r.dispose()}}}}}_rebindEvents(){Object.entries(this._listenerMap).forEach(e=>{let[t,i]=e;i.forEach(e=>{this[t](e)})})}_checkIsResetting(e,t){return this.isResetting?(console.error("warning: don't call RenderManager API during renderSDK resetting!"),t):e()}get isAbleRender(){return this._isAbleRender}enableRender(){this._isAbleRender=!0}disableRender(){this._isAbleRender=!1}flushRender(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(this._isAbleRender){let i=e?void 0:this._dataSDK.getClearDraftChangeDiff(),n=null==i?void 0:i[r.u4I.SEGMENT].length;e&&(0,l.Ie)(_);let o=this._dataSDK.getChangeNodesFromModel();if(o[r.u4I.SEGMENT].length||n)this.commit(()=>(i&&this._diffApplicator.applyDiff(i),this._diffApplicator.applyDiff(o),!0));else{var t;null===(t=this._renderSdk.editor)||void 0===t||t.addDefaultVideoClip()}e&&(0,l.oe)(_),(0,l.Ie)("WEB_CALL_VE_SEEK"),e&&(0,l.Ie)(g),e&&this.seekTime(0n,r.Hqf.seekDone).then(()=>{e&&(0,l.oe)(g)}),this._onFlushRender.fire(),e&&this.seekTime(0n,r.Hqf.seekDone)}}disableAutoRender(){var e;null===(e=this._renderSdk.editor)||void 0===e||e.disableAutoRender()}enableAutoRender(){var e;null===(e=this._renderSdk.editor)||void 0===e||e.enableAutoRender()}startListener(){if(!this._hadStartChangeListen){var e=this;this._dataSdkDispose=this._dataSDK.onChangeDiff(function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];e._isAbleRender&&e._diffApplicator.applyDiff(...i)}),this._hadStartChangeListen=!0}this.onGetFrame(e=>{let{rawPath:t}=e;if(!this.fs.isExist(t))return;let i=this.fs.readFileSync(t);e.imageData=new Uint8ClampedArray(i),this.fs.rmSync(e.rawPath),this._onGetFrames.fire(e)}),this.onGetSingleVideoSnapshot(e=>{})}get onProgressChange(){return this._collectEventCallback(this._renderSdk.preview.onProgressChange,"onProgressChange")}get onStateChange(){return this._collectEventCallback(this._renderSdk.preview.onStateChange,"onStateChange")}get onFpsChange(){return this._collectEventCallback(this._renderSdk.preview.onFpsChange,"onFpsChange")}get onFirstFrameRender(){return this._collectEventCallback(this._renderSdk.preview.onFirstFrameRender,"onFirstFrameRender")}get onFrameRender(){return this._collectEventCallback(this._renderSdk.preview.onFrameRender,"onFrameRender")}get onSeekDonePlay(){return this._collectEventCallback(this._renderSdk.preview.onSeekDonePlay,"onSeekDonePlay")}get onRefreshFinish(){return this._collectEventCallback(this._renderSdk.preview.onRefreshFinish,"onRefreshFinish")}get onError(){return this._collectEventCallback(this._renderSdk.preview.onError,"onError")}get onStreamStart(){return this._collectEventCallback(this._renderSdk.preview.onStreamStart,"onStreamStart")}get onStreamStop(){return this._collectEventCallback(this._renderSdk.preview.onStreamStop,"onStreamStop")}get onStreamFail(){return this._collectEventCallback(this._renderSdk.preview.onStreamFail,"onStreamFail")}get onGetFrame(){return this._collectEventCallback(this._renderSdk.preview.onGetFrame,"onGetFrame")}get onGetFrames(){return this._onGetFrames.event}get onGetSingleVideoSnapshot(){return this._collectEventCallback(this._renderSdk.preview.onGetSingleVideoSnapshot,"onGetSingleVideoSnapshot")}get onFlushRender(){return this._onFlushRender.event}get onReset(){return this._onReset.event}get onAddClip(){return this._collectEventCallback(this._renderSdk.editor.onAddClip,"onAddClip")}get onCrash(){return this._onCrash.event}get beforeCallbackFire(){return this._collectEventCallback(this._renderSdk.preview.beforeCallbackFire,"beforeCallbackFire")}get onStatistics(){return this._collectEventCallback(this._renderSdk.editor.onStatistics,"onStatistics")}get onWebGLContextLost(){return this._collectEventCallback(this._renderSdk.preview.onWebGLContextLost,"onWebGLContextLost")}get onWebGLContextRestored(){return this._collectEventCallback(this._renderSdk.preview.onWebGLContextRestored,"onWebGLContextRestored")}get onLowFrameRate(){return this._collectEventCallback(this._renderSdk.preview.onLowFrameRate,"onLowFrameRate")}get waitForDefaultFontsLoaded(){return this._waitForDefaultFontsLoaded.promise}get fs(){return this._renderSdk.fs}get executor(){return this._renderSdk.executor}get resourceRecords(){return this._renderSdk.resourceRecords}async reset(){this.isResetting=!0,this._isAbleRender=!1,this._dataSdkDispose&&(this._dataSdkDispose.dispose(),this._dataSdkDispose=null),this._hadStartChangeListen=!1,this._previewRecords.clear(),this._missingEvents.length=0,await this._renderSdk.reset(),this._init(),this.isResetting=!1,this._rebindEvents(),this._onReset.fire()}recordResource(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._renderSdk.recordResource(...t)}setEffectResourceRender(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._renderSdk.setEffectResourceRender(...t)}setMediaInfo(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._renderSdk.setMediaInfo(...t)}getRenderConfig(){return this._checkIsResetting(()=>this._renderSdk.render.config,void 0)}setTextDirectionLevel(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>{this._renderSdk.setTextDirectionLevel(...t),p(this._dataSDK,this._renderSdk)},void 0)}get state(){return this._checkIsResetting(()=>this._renderSdk.preview.state,r.jey.UNKNOWN)}get progress(){return this._checkIsResetting(()=>this._renderSdk.preview.progress,0n)}setPreviewSize(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.setPreviewSize(...t),Promise.resolve(void 0))}setCanvasSize(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>(r.Iew.getCur().setCanvasSize(t[0],t[1]),this._renderSdk.preview.setCanvasSize(...t)),Promise.resolve(void 0))}setTimeRange(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.setTimeRange(...t),Promise.resolve(-1))}setFps(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.setFps(...t),void 0)}refreshCurrentFrame(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.refreshCurrentFrame(...t),Promise.resolve(void 0))}play(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.play(...t),Promise.resolve(void 0))}pause(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.pause(...t),void 0)}stop(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.stop(...t),void 0)}seekTime(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.seekTime(...t),Promise.resolve(void 0))}seekWithSpeed(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.seekWithSpeed(...t),Promise.resolve(void 0))}flushSeekCmd(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.flushSeekCmd(...t),Promise.resolve(-1))}seekWithoutCallback(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.seekWithoutCallback(...t),void 0)}getCurrentPosition(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.getCurrentPosition(...t),Promise.resolve(0n))}setDefaultFontPath(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return this._checkIsResetting(()=>{var i,r;let n=["en.ttf","ja.ttf","ko.ttf","th.ttf","zh-hans.ttf","zh-hant.ttf"],o=this._renderSdk.fs.readdirSync(e).filter(e=>e.endsWith(".ttf")||e.endsWith(".otf")).filter(e=>!n.includes(e)).map(t=>`${e}/${t}`),a=n.map(t=>`${e}/${t}`);this._renderSdk.setFallbackFontPathList(a),null===(i=this._renderSdk.preview)||void 0===i||i.setEffectSysFontPaths(a.concat(o)),t&&(null===(r=this._renderSdk.editor)||void 0===r||r.commit(()=>{var e,t;null===(e=this._renderSdk.apis)||void 0===e||e.text.refreshTextsWithDefaultFont(this._dataSDK.draftView),null===(t=this._renderSdk.apis)||void 0===t||t.textTemplate.refreshTextsWithDefaultFont(this._dataSDK.draftView)})),this._waitForDefaultFontsLoaded.resolve()},void 0)}getVideoFrames(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.getVideoFrames(...t),"")}getVideoSegmentFrames(e,t,i,o,a){var s;arguments.length>5&&void 0!==arguments[5]&&arguments[5];let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:220,c=(0,r.Fpc)(e);c.res=a,null==t||t.insertClip2(r.HHr.stringify(c),o,e.targetTimerange.start,e.targetTimerange.start+e.targetTimerange.duration);let d=new r.MM7;d.material=null!==(s=e.adjust)&&void 0!==s?s:new r.sq5,d.targetTimerange=e.targetTimerange;let{clips:u}=(0,r.PJb)(d);for(let[,i]of u.entries()){let o=(0,n.Rl)(),a={id:o,type:r.u2r.VideoTrack};null==t||t.insertTrack(r.HHr.stringify(a),100*Number(i.filter.render_index));let s={start:e.offset+e.targetTimerange.start,duration:e.targetTimerange.duration};null==t||t.insertClip2(r.HHr.stringify(i),o,s.start,s.start+s.duration)}return this._checkIsResetting(()=>{var r;return null===(r=this._renderSdk.preview)||void 0===r?void 0:r.getVideoFrames([{time:e.targetTimerange.start,callbackData:Number(e.targetTimerange.start)}],l,l,t,i)},"")}getImageFrame(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.getImageFrame(...t),"")}getCombinationVideoFrames(e){for(var t,i,r,n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];let s=null===(r=this._renderSdk.editor)||void 0===r?void 0:null===(i=r.getClipBase(e))||void 0===i?void 0:null===(t=i.subState)||void 0===t?void 0:t.sequence;return s&&(o[3]=s),this._checkIsResetting(()=>this._renderSdk.preview.getVideoFrames(...o),"")}getFrames(e,t,i){var o,a,s;let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:440;if(!this._renderSdk.editor)return;let d=e.clone(!0),u=this._renderSdk.editor.createSequence({});if(!u)return;let p=this._renderSdk.editor.getCanvasSize(),_=r.pMA.div(p.width,p.height),g=(0,n.Rl)(),h={id:g,type:r.u2r.VideoTrack};if(u.insertTrack(r.HHr.stringify(h),1),u.setSequenceSetting(r.HHr.stringify({bgColor:"#00000000"})),(0,r.hey)(d)){this.getVideoSegmentFrames(d,u,t,g,i,_,c);return}d.clip&&(d.clip.transform.x=0,d.clip.transform.y=0,d.clip.scale=new r.Ciz({x:(null!==(o=d.clip.scale.x)&&void 0!==o?o:1)*l,y:(null!==(a=d.clip.scale.y)&&void 0!==a?a:1)*l})),(0,r.Q2R)(d)?(d.material.textInfoResources.forEach(e=>{e.textAnimateMaterial=void 0,e.attachInfo.startTime=0n}),d.material.nonTextInfoResources.forEach(e=>{e.animateMaterialInfo=void 0,e.attachInfo.startTime=0n})):(0,r.Ftn)(d)&&(d.animations=void 0);let m=(0,r.Ftn)(d)?(0,r.Bt3)(d,this._renderSdk.render.config):(0,r.aB0)(d,this._renderSdk.render.config);(0,r.Q2R)(d)&&(null===(s=this._renderSdk.utils)||void 0===s||s.setGlobalAllowedPaths([d.material.path])),m.id=d.id,m.filter={...m.filter,id:m.id,filterLayer:BigInt(100)};let v={start:d.offset+d.targetTimerange.start,duration:d.targetTimerange.duration},f=v.start;if(u.insertClip2(r.HHr.stringify(m),g,v.start,v.start+v.duration),(0,r.Q2R)(d)&&(r.ysb.isNewTextTemplateSegment(d.material)?(0,r.Dkg)(d,!1,this._renderSdk.render.config):f=v.start+r.pMA.div(v.duration,2,"bigint")),d.clip){let e=(0,r.$FH)(d.clip);e.id=`${m.id}_${r.UO5.Transform}`;let t=(0,r.PtL)(e.id,e);t.trim_range={"in.us":v.start,"out.us":v.start+v.duration},u.insertClip2(r.HHr.stringify(t),m.id,v.start,-1n)}return this._checkIsResetting(()=>{var e;return null===(e=this._renderSdk.preview)||void 0===e?void 0:e.getVideoFrames([{time:f,callbackData:Number(f)}],c,c/_,u,t)},"")}setSequenceBackground(e){var t;null===(t=this._renderSdk.editor)||void 0===t||t.setSequenceBackground(e)}cancelGetVideoFrames(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>{var e;return null===(e=this._renderSdk.preview)||void 0===e?void 0:e.cancelGetVideoFrames(...t)},void 0)}getFaceInfoList(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.preview.getFaceInfoList(...t),Promise.resolve("[]"))}getPreviewVolume(){return this._checkIsResetting(()=>{var e;return null===(e=this._renderSdk.preview)||void 0===e?void 0:e.getPreviewVolume()},void 0)}setPreviewVolume(e){return this._checkIsResetting(()=>{var t;return null===(t=this._renderSdk.preview)||void 0===t?void 0:t.setPreviewVolume(e)},void 0)}setVideoSubstitute(e,t,i){return this._checkIsResetting(async()=>{await this._waitingFirstFrameRender;let{subDraftSegmentId:r}=i,n=this._renderSdk.resourceRecords.pathRecords.get(t);return"string"==typeof r?this._renderSdk.editor.setSubSeqClipSubstituteImagePath(r,e,n):this._renderSdk.editor.setClipSubstituteImagePath(e,n)},Promise.resolve(void 0))}clearVideoSubstitute(e,t){return this._checkIsResetting(async()=>{await this._waitingFirstFrameRender;let{subDraftSegmentId:i}=t;return"string"==typeof i?this._renderSdk.editor.cancelSubSeqClipSubstitute(i,e):this._renderSdk.editor.cancelClipSubstitute(e)},Promise.resolve(void 0))}enableVideoFaceQuery(e,t,i){return this._checkIsResetting(()=>{let r=this._renderSdk.editor,n=this._renderSdk.apis;return r.commit(()=>{n.video.enableFaceQuery(e,t,i)})},!1)}disableVideoFaceQuery(e,t){return this._checkIsResetting(()=>this._renderSdk.editor.commit(()=>{this._renderSdk.apis.video.disableFaceQuery(e,t)}),!1)}setEffectResourceFinder(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.setEffectResourceFinder(...t),void 0)}startLoadAssetAllRegion(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.startLoadAssetAllRegion(...t),Promise.resolve(-1))}get infoSticker(){return this._checkIsResetting(()=>this._renderSdk.editor.infoSticker,null)}get subtitleHelper(){var e;return null===(e=this._renderSdk.editor)||void 0===e?void 0:e.subtitleHelper}get objectLockHelper(){var e;return null===(e=this._renderSdk.editor)||void 0===e?void 0:e.objectLockHelper}addDefaultVideoClip(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.addDefaultVideoClip(...t),"")}enableSkipDropFrame(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.enableSkipDropFrame(...t),Promise.resolve(-1))}hasBrokenPath(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.hasBrokenPath(...t),!1)}brokenAddPaths(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.brokenAddPaths(...t),void 0)}brokenRemovePaths(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.brokenRemovePaths(...t),void 0)}brokenAddSegmentIds(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.brokenAddSegmentIds(...t),void 0)}brokenRemoveSegmentIds(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.brokenRemoveSegmentIds(...t),Promise.resolve(void 0))}prepareAudioSample(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.prepareAudioSample(...t),Promise.resolve(""))}dumpLogInfo(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.dumpLogInfo(...t),"")}commit(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.commit(...t),!1)}addTrack(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.addTrack(...t),"")}addClip(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.addClip(...t),Promise.resolve(-1))}removeClip(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.removeClip(...t),-1)}getFilterByIdRecursively(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.getFilterByIdRecursively(...t),null)}prepareAudioSample2(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.prepareAudioSample2(...t),Promise.resolve(""))}detectAudioSnr(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.editor.detectAudioSnr(...t),Promise.resolve({inout_snr_left:-1,inout_snr_right:-1}))}updateMaterial(e){var t,i;let n=null===(t=this._renderSdk.editor)||void 0===t?void 0:t.getClipBase(e),o=this._dataSDK.draftView.getSegmentById(e);if(!!n&&!!o&&!!(0,r.hey)(o))null===(i=this._renderSdk.editor)||void 0===i||i.commit(()=>{var t,i;return null===(t=this._renderSdk.editor)||void 0===t||t.removeClip(e),null===(i=this._renderSdk.apis)||void 0===i||i.video.add(o,this._dataSDK.draftView),!0})}waitForVEUtilsCreated(){return this._checkIsResetting(()=>this._renderSdk.utils.createdPromise,Promise.resolve(void 0))}_innerGetMediaFileInfo(e,t){return this._checkIsResetting(()=>u(e,t,this._renderSdk),Promise.resolve(null))}getMediaFileInfo(e,t){return this._apiQueueGetMediaFileInfo?new Promise((i,r)=>{this._apiQueueGetMediaFileInfo.addTask(()=>{let n=this._innerGetMediaFileInfo(e,t);return n.then(i,r),n})}):this._innerGetMediaFileInfo(e,t)}getMediaFileInfoSync(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.getMediaFileInfoSync(...t),"")}putAssetUrl(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.putAssetUrl(...t),0)}startPreload(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.startPreload(...t),0)}estimateExportGIFSize(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.estimateExportGIFSize(...t),Promise.resolve(0))}checkIsQuickImportSupport(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.checkIsQuickImportSupport(...t),Promise.resolve(!1))}getQuickImportInfo(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.getQuickImportInfo(...t),Promise.resolve(""))}getTemplateParam(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.getTemplateParam(...t),Promise.resolve(""))}peekEffectResource(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.peekEffectResource(...t),[])}clearResource(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._checkIsResetting(()=>this._renderSdk.utils.clearResource(...t),Promise.resolve(0))}enableWebCodecsDecoder(e){return this._checkIsResetting(()=>this._renderSdk.utils.getSpGlobalConfig().configBool("prefer_webcodecs_decoder",e),-1)}toggleVideoChromaPick(e,t){return this._checkIsResetting(()=>{let i=this._dataSDK.draftView.getSegmentById(e.segmentId),r=e.hiddenSegIds;if(i&&r&&r.length>0)return this._renderSdk.editor.commit(()=>{for(let e of r)this._renderSdk.executor.editor.updateVisible(e,t)})},!1)}preview(e){if(this.isResetting){console.error("warning: don't call API[preview] during renderSDK resetting!");return}this._diffApplicator.applyDiff({actionOperateType:r.aWQ.Local,config:[],segment:[e],selection:[],track:[],actionList:[],attachment:[],videoDocument:this._dataSDK.draftView,hasMainTrackSegmentTargetTimeChange:!1},r.XC4.PREVIEW);let t="";switch(e.type){case r.C8.ADD:t=e.item.segment.id;break;case r.C8.DELETE:case r.C8.UPDATE:t=e.item.id}let i=`${t}_${e.item.segmentType}`,n=this._previewRecords.get(i);e.type===r.C8.UPDATE&&n&&(e.item=function e(t,i){let r={...t};for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&("object"==typeof i[n]&&null!==i[n]&&t[n]&&"object"==typeof t[n]?Array.isArray(t[n])&&Array.isArray(i[n])?r[n]=[...t[n],...i[n]]:r[n]=e(t[n],i[n]):r[n]=i[n]);return r}(n.operation.item,e.item)),this._previewRecords.set(i,{segmentId:t,operation:e})}resetPreview(){var e;if(this.isResetting){console.error("warning: don't call API[resetPreview] during renderSDK resetting!");return}let t=this._dataSDK.draftView,i=this._diffApplicator.executor[r.XC4.RESET_PREVIEW];null===(e=this._renderSdk.editor)||void 0===e||e.commit(()=>{let e=!1;return this._previewRecords.forEach(n=>{var o,a,s;let l;let{segmentId:c,operation:d}=n,{segmentType:u}=d.item;if(!c||!u)return;let p=t.getSegmentById(c),_=(null!==(o=d.item.path)&&void 0!==o?o:[]).slice(0,-1);for(let e of _)null===(a=this._renderSdk.apis)||void 0===a||a.draft.beginDraft(e);switch(d.type){case r.C8.ADD:if(!(l=i[r.C8.DELETE][u])||!c)break;l(c,t)&&(e=!0);break;case r.C8.DELETE:if(!(l=i[r.C8.ADD][u])||!p)break;l(p,t)&&(e=!0);break;case r.C8.UPDATE:if(!(l=i[r.C8.UPDATE][u])||!p)break;l(c,d.item.segment,t)&&(e=!0);break;default:console.error(`resetPreview: uncaught type: ${d.type}`)}for(let e of _.reverse())null===(s=this._renderSdk.apis)||void 0===s||s.draft.endDraft(e)}),e}),this._previewRecords.clear()}createRichTextEditor(){return r.LDB.create(this._renderSdk)}insertBlob(e,t){return this._renderSdk.insertBlob(e,t)}removeBlob(e){return this._renderSdk.removeBlob(e)}isBlobExists(e){return this._renderSdk.isBlobExists(e)}getSegmentRectangles(e){return(0,r.uvf)({...e,renderSdk:this._renderSdk})}loadVEPlugin(e){return this._checkIsResetting(()=>this._renderSdk.editor.pluginManager.loadPlugin(e),-1)}retryStreamAsset(e){var t;if(!e.startsWith("asset_id"))throw Error(`assetId must starts with asset_id://, current is ${e}`);let i=this.resourceRecords.streamRecords.get(e),r=null!==(t=this.resourceRecords.decryptRecords.safeGet(e))&&void 0!==t?t:"";if(!i||"string"==typeof i)throw Error(`cannot find streamRecord by assetId: ${e}`);let{headers:n,url:o,withCredentials:a,type:s,decryptType:l,fsPath:c,fetchOption:d}=i;return this.putAssetUrl(e,o,n,a,null!=r?r:"",null!=l?l:"",null!=s?s:"",null!=c?c:"",null!=d?d:"")}runDevicesScoreReport(e,t,i){return this._checkIsResetting(()=>{var r;return null===(r=this._renderSdk.editor)||void 0===r?void 0:r.runFrameWithBachTime(e,t,i)},void 0)}getAudioPathAndSourceTimeRange(e){return(0,r.vAK)(e)}getSingleVideoSnapshot(e,t,i){return this._renderSdk.preview.getSingleVideoSnapshotFrame(e,t,i)}constructor(e){var t,i,n,l,c=this;this.isResetting=!1,this.hasCrashed=!1,this.isFirstFrameRender=!1,this._missingEvents=[],this._previewRecords=new Map,this._listenerMap={},this._diffApplicator=null,this._hadStartChangeListen=!1,this._dataSdkDispose=null,this._isAbleRender=!1,this._onGetFrames=new a.Q,this._onCrash=new a.Q,this._onFlushRender=new a.Q,this._onReset=new a.Q,this._waitForDefaultFontsLoaded=(0,o.PQ)(),this.clearTrackingRelation=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!1;if(c.infoSticker){for(let[n,o]of c.infoSticker.trackerMap.entries())o.forEach(o=>{if(o.targetSegmentId===e){let o;let l=c._dataSDK.draftView.getSegmentById(n);if(!!l){if(i=!0,(0,r.P2T)(l)?o=c._dataSDK.api.sticker:(0,r.Ftn)(l)?o=c._dataSDK.api.text:(0,r.Q2R)(l)&&(o=c._dataSDK.api.textTemplate),o&&((0,r.P2T)(l)||(0,r.Ftn)(l)||(0,r.Q2R)(l))){var a,s;let i=(null!==(s=null===(a=l.videoTracking)||void 0===a?void 0:a.trackers)&&void 0!==s?s:[]).filter(t=>t.targetSegmentId!==e),r=t?[e]:void 0;i.length?o.updateVideoTracker({segId:l.id,trackers:i,selectedSegIds:r}):o.removeVideoTracker({segId:l.id,selectedSegIds:r})}}}});return i}},this.clearVideoTransition=e=>this._checkIsResetting(()=>{var t;return null===(t=this._renderSdk.editor)||void 0===t?void 0:t.removeVideoTransition(e)},void 0);let{dataSdk:d,renderSDKParams:u,apiConfig:p}=e,{module:_}=u;_.addCallback(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];c._onCrash.fire(...t),c.hasCrashed=!0},!1),this._renderSdk=new r.u$g(u),this._dataSDK=d,this._apiConfig=p,(null===(i=this._apiConfig)||void 0===i?void 0:null===(t=i.getMediaFileInfo)||void 0===t?void 0:t.concurrent)&&isFinite(null===(l=this._apiConfig)||void 0===l?void 0:null===(n=l.getMediaFileInfo)||void 0===n?void 0:n.concurrent)&&(this._apiQueueGetMediaFileInfo=new s.z({concurrent:this._apiConfig.getMediaFileInfo.concurrent})),this._init()}}},107469:function(e,t,i){"use strict";i.d(t,{_c:()=>k,zp:()=>S,SA:()=>v,YO:()=>C});var r,n=i("801497"),o=i("149803"),a=i("956018"),s=i("306224"),l=i("612649"),c=i("801410");let d={baseURL:"/lv/v1",method:"POST",headers:{loc:s.yM.CHANNEL,lan:s.yM.LAN,pf:s.yM.APP_PF,appvr:s.yM.VERSION,tdid:"","sign-ver":1,"app-sdk-version":s.yM.APP_SDK_VERSION}},u=l.ZP.createAxios(d);u.interceptors.request.use(e=>{let{pf:t,appvr:i,tdid:r}=d.headers;return Object.assign(e.headers,(0,c.O)({url:`${e.baseURL}${e.url}`,pf:t,appvr:i,tdid:r})),e}),u.interceptors.response.use(e=>{if(200!==e.status)return Promise.reject(e);{let t=e.data;return"0"===t.ret?Promise.resolve(t):Promise.reject(e)}});let p=async()=>await u({url:"/intelligence/check_popup"}),_=e=>u({method:"post",data:{app_id:e},url:"/lite/config/check_region",withCredentials:!0});var g=i("772356"),h=i("216158"),m=i("506464");var v=((r={}).common="common",r.enableSVip="enableSVip",r.beauty="beauty",r.autoCut="autoCut",r.voiceClone="voiceClone",r.tts="tts",r.voiceChanger="voiceChanger",r.avTranslator="avTranslator",r.urlToVideo="urlToVideo",r.utvDontDialog="utvDontDialog",r.textToVideo="textToVideo",r.aigcVideo="aigcVideo",r.long2Short="long2Short",r.digitalHuman="digitalHuman",r.aiCreator="aiCreator",r.aiCreatorPlatform="aiCreatorPlatform",r);let f=[h.yp.US,h.yp.GB,h.yp.CA,h.yp.AU,h.yp.NZ],y=[h.yp.IL,h.yp.PS],w=[h.yp.TW,h.yp.HK,h.yp.MO,h.yp.US,h.yp.GB,h.yp.CA,h.yp.AU,h.yp.NZ],b=[h.yp.US,h.yp.GB,h.yp.CA,h.yp.AU,h.yp.NZ],S={common:[{common:{test:!0}}],enableSVip:[{enableSVip:{test:!0}}],beauty:[{countryBL:[6254930,294640],cityBL:[4896861],curRegionOutList:y}],autoCut:[{cityBL:[4896861]}],voiceClone:[{cityBL:[4896861],curRegionInList:w}],avTranslator:[{checkRegion:{appId:581541},abTestSync:{name:"enable_workspace_video_translator_smart_tools_entry"}}],urlToVideo:[{language:{langs:["en"]},notSensitiveInGateway:!0},{i18n:{langs:[m.zE.English.key]},notSensitiveInGateway:!0},{curRegionInList:f,notSensitiveInGateway:!0}],utvDontDialog:[{isSensitiveInGateway:!0},{curRegionInList:f},{language:{langs:["en"]}},{i18n:{langs:[m.zE.English.key]}}],textToVideo:[{i18n:{langs:[m.zE.English.key]}}],aigcVideo:[{abTestSync:{name:"enable_workspace_aigc_smart_tools_entry"}}],long2Short:[{checkPopup:!0}],digitalHuman:[{i18n:{langs:[m.zE.English.key]}}],aiCreatorPlatform:[{cityBL:[4896861],curRegionInList:b}],aiCreator:[{cityBL:[4896861]}]};class C{_initInjectedGeoBlockStrategy(){var e;if(!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement))return;let t=window.geo_block_config;if(!!t)null===(e=t.forEach)||void 0===e||e.call(t,e=>{let{url:t=[],country_codes:i,geo_name_ids:r}=null!=e?e:{};t.forEach(e=>{let{path:t}=e;if(!this._geoBlockStrategyMap[t])this._geoBlockStrategyMap[t]={countryCodes:i,geoNameIds:r}})})}_getGeoNameIdFromGateWay(){let e=window.ip_location_info,{Country:t,Subdivisions:i}=null!=e?e:{},r=null==t?void 0:t.GeoNameID;return{countryGeoNameId:r,cityGeoNameId:(null==i?void 0:i.length)&&i[0].GeoNameID}}async _common(){let{vip_entrance:e}=await a.k.getEntrances();return null==e?void 0:e.enable}async _enableSVip(){let{vip_entrance:e}=await a.k.getEntrances();return null==e?void 0:e.svip_enable}_abTest(e){return(0,o.y)().getABTestConfig(e,!1)}_abTestSync(e){return(0,o.y)().getABTestConfigSync(e,!1)}async _checkRegion(e){var t,i;return!(null===(i=await _(e))||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.invalid)}async _checkPopup(){var e,t;return!(null===(t=await p())||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.need_check)}_i18n(e){return e.includes(n.ZP.language)}_isNotSensitiveInGateway(){return!window.is_sensitive_region}_language(e){return e.some(e=>{var t,i;return!!(null===(i=window.navigator)||void 0===i?void 0:null===(t=i.language)||void 0===t?void 0:t.startsWith(e))})}_isCountryInWL(e){let{countryGeoNameId:t}=this._getGeoNameIdFromGateWay();return t&&e.includes(t)}_isCityInWL(e){let{cityGeoNameId:t}=this._getGeoNameIdFromGateWay();return t&&e.includes(t)}_isCountryNotInBL(e){let{countryGeoNameId:t}=this._getGeoNameIdFromGateWay();return!(t&&e.includes(t))}_isCityNotInBL(e){let{cityGeoNameId:t}=this._getGeoNameIdFromGateWay();return!(t&&e.includes(t))}_isCurRegionInList(e){var t,i,r;return e.includes(null!==(r=null===(i=this._currentZone)||void 0===i?void 0:null===(t=i.region)||void 0===t?void 0:t.toUpperCase())&&void 0!==r?r:"")}async _doStrategies(e,t){try{switch(e){case"abTest":return await this._abTest(t.name);case"checkRegion":return await this._checkRegion(t.appId);case"checkPopup":return t&&await this._checkPopup();case"enableSVip":return t&&await this._enableSVip();case"common":return t.test&&await this._common();default:return this._doStrategiesSync(e,t)}}catch(e){return!1}}_doStrategiesSync(e,t){switch(e){case"abTestSync":return this._abTestSync(t.name);case"i18n":return this._i18n(t.langs);case"language":return this._language(t.langs);case"isSensitiveInGateway":return t&&!this._isNotSensitiveInGateway();case"notSensitiveInGateway":return t&&this._isNotSensitiveInGateway();case"countryWL":return this._isCountryInWL(t);case"cityWL":return this._isCityInWL(t);case"countryBL":return this._isCountryNotInBL(t);case"cityBL":return this._isCityNotInBL(t);case"curRegionInList":return this._isCurRegionInList(t);case"curRegionOutList":return!this._isCurRegionInList(t);default:return!1}}async assembleStrategies(e){return(await Promise.all(e.map(async e=>(await Promise.all(Object.keys(e).map(t=>this._doStrategies(t,e[t])))).every(e=>e)))).some(e=>e)}assembleStrategiesSync(e){return e.some(e=>Object.keys(e).every(t=>this._doStrategiesSync(t,e[t])))}isGeoBlock(e){let t=this._geoBlockStrategyMap[e],i=!!t;return i&&(0,o.y)().report("geo_block",{path:e,...t}),i}isAllow(e){var t;let{scene:i,isWhiteUser:r}=e;return r||g.Q?Promise.resolve(!0):this.assembleStrategies(null!==(t=S[i])&&void 0!==t?t:[])}isAllowSync(e){var t;let{scene:i,isWhiteUser:r}=e;return!!r||!!g.Q||this.assembleStrategiesSync(null!==(t=S[i])&&void 0!==t?t:[])}updateCurrentZone(e){this._currentZone=e}constructor(){this._geoBlockStrategyMap={},this._initInjectedGeoBlockStrategy()}}let k=new C},456518:function(e,t,i){"use strict";i.d(t,{L:function(){return o}});var r=i(827322),n=i(690613);function o(e){return new Promise(t=>{let i=e.startsWith("blob:"),o=new Image;!i&&(o.crossOrigin="anonymous"),o.onload=()=>t((0,n.oW)(o)),o.onerror=(e,i,r,o,a)=>{t((0,n.Mx)(-1,"load image fail.",null!=a?a:Error("load image fail.")))},o.src=(0,r.C)(e,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})})}},407899:function(e,t,i){"use strict";i.d(t,{n:function(){return n}});class r{dispose(){if(!!this._handler)this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null}constructor(e,t,i,r){this._node=e,this._type=t,this._handler=i,this._options=null!=r&&r,this._node.addEventListener(this._type,this._handler,this._options)}}function n(e,t,i,n){return new r(e,t,i,n)}},551377:function(e,t,i){"use strict";i.d(t,{x:function(){return n}});let r="https://lf16-web-buz.capcut.com/obj/capcut-web-buz-us/",n={entryCDN:`${r}stream-md5/streaming_md5.js`,wasmCDN:`${r}stream-md5/streaming_md5.wasm`}},685327:function(e,t,i){"use strict";i.d(t,{k:()=>p});var r=i("999268"),n=i("641276"),o=i("587892"),a=i("402655"),s=i("800788"),l=i("787076"),c=i("114861");class d{get hasBeenDone(){return this._hasBeenDone}get costTimes(){if(!this._initCostTimes)return;let{start:e,end:t}=this._initCostTimes;return(null!=t?t:Date.now())-e}get initResult(){if(!!this._hasBeenDone)return{resolve:this._resolveResult,reject:this._rejectResult}}get isIniting(){return this._isIniting}awaitForInit(){let e,t,{key:i,timeout:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._hasBeenDone&&this.initResult){let{resolve:e,reject:t}=this.initResult;return t?Promise.reject(t):Promise.resolve(e)}if(i&&this._waitingResolverMap.has(i))return this._waitingResolverMap.get(i);if(!r){let e=new Promise((e,t)=>{this._waitingResolvers.add([e,t])});return i&&this._waitingResolverMap.set(i,e),e}let n=Promise.race([new Promise((i,r)=>{e=[()=>{clearTimeout(t),i()},r],this._waitingResolvers.add([e,r])}),new Promise((i,n)=>{t=setTimeout(()=>{this._waitingResolvers.delete(e),n(Error("Timed out waiting for init"))},r)})]);return i&&this._waitingResolverMap.set(i,n),n}startToInit(){return!this._hasBeenDone&&!this._isIniting&&(this._isIniting=!0,this._initCostTimes={start:Date.now()},!0)}initDone(e){if(this._hasBeenDone)throw Error("Cannot release an inited locker");this._initCostTimes&&(this._initCostTimes.end=Date.now());let t=!1;for(let i of((null==e?void 0:e.reject)?(t=!0,this._rejectResult=e.reject):this._resolveResult=null==e?void 0:e.resolve,this._waitingResolvers))t?i[1](this._rejectResult):i[0](this._resolveResult);this._waitingResolverMap.clear(),this._waitingResolvers.clear(),this._hasBeenDone=!0,this._isIniting=!1}constructor(){this._hasBeenDone=!1,this._isIniting=!1,this._initCostTimes=void 0,this._waitingResolvers=new Set,this._waitingResolverMap=new Map}}var u=i("690613");class p extends a.JT{calcFileMd5(e){return new Promise(async(t,i)=>{try{await this._awaitInitLocker.awaitForInit(),await this._mutex.lock(),await this._start();let r=0,n=new FileReader,o=!0,a=()=>{let t=r*this._chunkSize,i=t+this._chunkSize;i+this._chunkSize>=e.size&&(o=!1,i=e.size),n.readAsArrayBuffer(e.slice(t,i))};n.onload=async e=>{try{let n=e.target.result,s=await this._update(n);!s.ok&&i(s),r++,o?a():t(this._end())}catch(e){t((0,u.Mx)(-1,"update chunk failure",e))}},n.onerror=e=>{var i;null===(i=this._onError)||void 0===i||i.call(this,(0,u.wf)(-1,`read file failure:${null==e?void 0:e.message}`,e)),t((0,u.wf)(-1,`read file failure:${null==e?void 0:e.message}`))},a()}catch(e){var r;null===(r=this._onError)||void 0===r||r.call(this,(0,u.wf)(-1,"calc md5 worker init failure",e)),t((0,u.wf)(-1,"calc md5 worker init failure",e))}}).finally(()=>{this._mutex.unLock()})}dispose(){this._worker&&(this._worker.terminate(),this._worker=null),super.dispose()}_createNetworkClient(){this._networkClient=(0,l.e)(),(0,c.V)(this._networkClient,{retries:2})}async _bootstrap(){(0,s.Y2)(!this._worker,"thr bootstrap method has been called");try{return this._worker=await this._initWorker(),this._awaitInitLocker.initDone(),(0,u.ly)()}catch(e){return this._awaitInitLocker.initDone({reject:e}),(0,u.wf)(-1,null==e?void 0:e.message)}}async _start(){await this._sendStartToWasm()}async _update(e){return await this._sendUpdateToWasm(e),(0,u.ly)()}async _end(){let e=await this._sendEndToWasm();return(0,u.oW)(e)}_fetchWorker(){(0,s.Y2)(this._entryAddress&&this._wasmAddress,"not found cdn.");let e=this._networkClient.get(this._entryAddress,{responseType:"arraybuffer"});return{entry:e,wasm:this._networkClient.get(this._wasmAddress,{responseType:"arraybuffer"})}}_initWorker(){let{entry:e,wasm:t}=this._fetchWorker();return Promise.all([e,t]).then(e=>({entry:e[0].data,wasm:e[1].data})).then(async e=>{let t=new Worker(URL.createObjectURL(new Blob([new Uint8Array(e.entry)],{type:"text/javascript"})));return t.onmessage=e=>{let[t,i]=e.data;switch(String(t)){case"2001":this._wasmInitEmitter.fire();case"2002":this._wasmOthersEmitter.fire(i);break;default:(0,s.ss)(`invalid event:${t}`)}this._wasmOthersEmitter.fire([String(t),i])},t.postMessage([1001,this._getU8ASABFromAB(e.wasm)]),await this._actionDone(this._wasmInitEmitter.event),t})}_getU8ASABFromAB(e){let t=new Uint8Array(e),i=new Uint8Array(new SharedArrayBuffer(t.byteLength));return i=t}_actionDone(e){return new Promise(t=>{(0,n.V)(e)(e=>{t(e)})})}async _sendStartToWasm(){(0,s.Y2)(this._worker,"worker must existed, before send"),this._worker.postMessage([1002]),await this._actionDone(this._wasmOthersEmitter.event)}async _sendUpdateToWasm(e){(0,s.Y2)(this._worker,"worker must existed, before send"),this._worker.postMessage([1003,this._getU8ASABFromAB(e)]),await this._actionDone(this._wasmOthersEmitter.event)}_sendEndToWasm(){return(0,s.Y2)(this._worker,"worker must existed, before send"),this._worker.postMessage([1004]),this._actionDone(this._wasmOthersEmitter.event)}constructor(e){super(),this._worker=null,this._chunkSize=5242880,this._awaitInitLocker=new d,this._mutex=new r.L,this._wasmOthersEmitter=this._store.add(new o.Q),this._wasmInitEmitter=this._store.add(new o.Q),this._entryAddress=e.entryCDN,this._wasmAddress=e.wasmCDN,this._onError=e.onError,this._createNetworkClient(),this._bootstrap()}}},17018:function(e,t,i){"use strict";i.d(t,{d:function(){return s},e:function(){return a}});var r=i(521641);let n=r.Z.config().EXPONENTIAL_AT;class o{toDouble(){return Number(this.integer)+this.decimal}isSafeDouble(){return this.integer<=Number.MAX_SAFE_INTEGER&&this.integer>=Number.MIN_SAFE_INTEGER}constructor(e,t){this.integer=e,this.decimal=t}}function a(e,t){r.Z.config({EXPONENTIAL_AT:1e9});try{let[i,n]=new r.Z(String(e)).times(t).toString().split(".");return new o(BigInt(i),n?Number(`0.${n}`):0)}finally{r.Z.config({EXPONENTIAL_AT:n})}}function s(e,t){r.Z.config({EXPONENTIAL_AT:1e9});try{let[i,n]=new r.Z(String(e)).div(t).toString().split(".");return new o(BigInt(i),n?Number(`0.${n}`):0)}finally{r.Z.config({EXPONENTIAL_AT:n})}}},271368:function(e,t,i){"use strict";i.d(t,{N9:function(){return l},VD:function(){return a},yl:function(){return s}});var r,n,o,a=((r={})[r.EMPTY=-1]="EMPTY",r[r.BREAK=3]="BREAK",r[r.BACKSPACE=8]="BACKSPACE",r[r.TAB=9]="TAB",r[r.CLEAR=12]="CLEAR",r[r.ENTER=13]="ENTER",r[r.SHIFT=16]="SHIFT",r[r.CTRL=17]="CTRL",r[r.ALT=18]="ALT",r[r.PAUSE=19]="PAUSE",r[r.CAPS_LOCK=20]="CAPS_LOCK",r[r.ESCAPE=27]="ESCAPE",r[r.SPACE=32]="SPACE",r[r.PAGE_UP=33]="PAGE_UP",r[r.PAGE_DOWN=34]="PAGE_DOWN",r[r.END=35]="END",r[r.HOME=36]="HOME",r[r.ARROW_LEFT=37]="ARROW_LEFT",r[r.ARROW_UP=38]="ARROW_UP",r[r.ARROW_RIGHT=39]="ARROW_RIGHT",r[r.ARROW_DOWN=40]="ARROW_DOWN",r[r.SELECT=41]="SELECT",r[r.PRINT=42]="PRINT",r[r.EXECUTE=43]="EXECUTE",r[r.PRINT_SCREEN=44]="PRINT_SCREEN",r[r.INSERT=45]="INSERT",r[r.DELETE=46]="DELETE",r[r.HELP=47]="HELP",r[r.NUM_0=48]="NUM_0",r[r.NUM_1=49]="NUM_1",r[r.NUM_2=50]="NUM_2",r[r.NUM_3=51]="NUM_3",r[r.NUM_4=52]="NUM_4",r[r.NUM_5=53]="NUM_5",r[r.NUM_6=54]="NUM_6",r[r.NUM_7=55]="NUM_7",r[r.NUM_8=56]="NUM_8",r[r.NUM_9=57]="NUM_9",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.META_LEFT=91]="META_LEFT",r[r.META_RIGHT=93]="META_RIGHT",r[r.NUM_TIMES=106]="NUM_TIMES",r[r.NUM_PLUS=107]="NUM_PLUS",r[r.NUM_MINUS=109]="NUM_MINUS",r[r.NUM_POINT=110]="NUM_POINT",r[r.NUM_DIVIDE=111]="NUM_DIVIDE",r[r.F1=112]="F1",r[r.F2=113]="F2",r[r.F3=114]="F3",r[r.F4=115]="F4",r[r.F5=116]="F5",r[r.F6=117]="F6",r[r.F7=118]="F7",r[r.F8=119]="F8",r[r.F9=120]="F9",r[r.F10=121]="F10",r[r.F11=122]="F11",r[r.F12=123]="F12",r[r.SEMI=186]="SEMI",r[r.EQUAL=187]="EQUAL",r[r.COMMA=188]="COMMA",r[r.MINUS=189]="MINUS",r[r.PERIOD=190]="PERIOD",r[r.SLASH=191]="SLASH",r[r.BACKQUOTE=192]="BACKQUOTE",r[r.BRACKET_LEFT=219]="BRACKET_LEFT",r[r.BACK_SLASH=220]="BACK_SLASH",r[r.BRACKET_RIGHT=221]="BRACKET_RIGHT",r[r.QUOTE=222]="QUOTE",r);var s=((n={})[n.EQUAL=61]="EQUAL",n[n.MINUS=173]="MINUS",n[n.SEMI=59]="SEMI",n[n.META_FIREFOX=224]="META_FIREFOX",n);var l=((o={})[o.SHIFT=1e3]="SHIFT",o[o.ALT=1e4]="ALT",o[o.CTRL_WIN=1e5]="CTRL_WIN",o[o.CTRL_MAC=2e5]="CTRL_MAC",o[o.WIN=1e6]="WIN",o[o.COMMAND=2e6]="COMMAND",o)},641547:function(e,t,i){"use strict";let r;i.d(t,{m:()=>P});var n=i("587892"),o=i("402655"),a=i("153614"),s=i("800788");let l=!1,c=!1,d=!1,u=!1,p=!1,_=!1,g=!1,h=!1,m=!1,v=!1;"object"==typeof navigator&&((r=navigator.userAgent).indexOf("Windows"),p=(r.indexOf("Macintosh")>=0||r.indexOf("iPad")>=0||r.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,r.indexOf("Linux"),_=r.indexOf("Mobi")>=0,g=r.indexOf("iPad")>=0,c=!_&&r.indexOf("Macintosh")>=0,h=/firefox/i.test(r),/chrome/i.test(r),/^((?!chrome|android).)*safari/i.test(r));let f=c,y=p,w=g,b=h;var S=i("407899"),C=i("271368");class k{static getKeyCode(e){let{keyCode:t}=e;return b&&(t===C.yl.EQUAL?t=C.VD.EQUAL:t===C.yl.MINUS&&(t=C.VD.MINUS)),t}static getAssistKey(e){let t=0;return f||w?(t+=e.altKey?C.N9.ALT:0,t+=e.shiftKey?C.N9.SHIFT:0,t+=e.ctrlKey?C.N9.CTRL_MAC:0,t+=e.metaKey?C.N9.COMMAND:0):(t+=e.altKey?C.N9.ALT:0,t+=e.shiftKey?C.N9.SHIFT:0,t+=e.ctrlKey?C.N9.CTRL_WIN:0,t+=e.metaKey?C.N9.WIN:0),t}}function E(e,t){return(t.weight||0)-(e.weight||0)}function I(e){return!!e&&"function"==typeof e.handler&&(!e.when||"function"==typeof e.when)&&(!e.keyBindings.mac||!!Array.isArray(e.keyBindings.mac))&&(!e.keyBindings.win||!!Array.isArray(e.keyBindings.win))&&(!e.description||!!Array.isArray(e.description))&&!0}class P extends o.JT{get targetNode(){return this._targetNode}get onKeydown(){return!this._emitter&&(this._emitter=new n.Q),this._emitter.event}register(e){return(0,s.Y2)(I(e)),e.keyBindings[this._platform].slice().forEach(t=>{if(t===C.VD.EMPTY)return;let i=[e];if(this._keymap.has(t)){let e=this._keymap.get(t);e&&(i=i.concat(e))}this._keymap.set(t,i)}),(0,a.UQ)(()=>{this._unregister(e)})}batchRegister(e){let t=[];return Object.entries(e.keyBindings).forEach(i=>{let[r,n]=i,o=r.split(",").map(e=>Number(e)),a="win"===this._platform?o:[],s="mac"===this._platform?o:[],l={shouldPreventDefault:e.shouldPreventDefault,when:e.when,weight:e.weight,description:e.description,handler:"function"==typeof n?n:n.handler,keyBindings:{win:a,mac:s}};"function"!=typeof n&&Object.assign(l,{shouldPreventDefault:n.shouldPreventDefault,when:n.when,weight:n.weight,description:n.description}),t.push(this.register(l))}),(0,a.UQ)(()=>{t.forEach(e=>e.dispose())})}unregister(e){(0,s.Y2)(I(e)),this._unregister(e)}get _platform(){return f||y?"mac":"win"}_execute(e,t){let i=this._keymap.get(e);if(!!i)i.sort(E),i.forEach(e=>{let{handler:i,shouldPreventDefault:r=!0,when:n,options:o={keydown:!0}}=e;if(!this._checkTagBlacklist(t,e)&&("keydown"!==t.type||!!o.keydown)&&("keyup"!==t.type||!!o.keyup))(!n||n(t))&&(r&&t&&t.preventDefault(),i(t))})}_checkTagBlacklist(e,t){if(!this._tagBlacklist.length)return!1;let i=e.target.tagName;return this._tagBlacklist.includes(i)}_unregister(e){e.keyBindings[this._platform].slice().forEach(t=>{if(t!==C.VD.EMPTY){if(this._keymap.has(t)){let i=this._keymap.get(t);if(i){let t=i.indexOf(e);t>-1&&i.splice(t,1)}}}})}constructor(e,t={}){var i,r;super(),this._keymap=new Map,this._tagBlacklist=[],this._emitter=null,this._onKeydown=e=>{var t;this._emitter&&this._emitter.fire(e);let i=k.getKeyCode(e),r=k.getAssistKey(e);if(null===(t=this._skipCondition)||void 0===t?!void 0:!t.call(this,i,r))this._execute(r+i,e)},this._onKeyup=e=>{var t;let i=k.getKeyCode(e),r=k.getAssistKey(e);if(null===(t=this._skipCondition)||void 0===t?!void 0:!t.call(this,i,r))this._execute(r+i,e)},this._targetNode=e;let n=null!==(i=t.useCapture)&&void 0!==i&&i;this._skipCondition=t.skipCondition,this._tagBlacklist=null!==(r=t.tagBlacklist)&&void 0!==r?r:[],this._register((0,S.n)(e,"keydown",this._onKeydown,{capture:n})),this._register((0,S.n)(e,"keyup",this._onKeyup,{capture:n}))}}},838587:function(e,t,i){"use strict";i.d(t,{GF:function(){return l},XU:function(){return o},_z:function(){return a},v1:function(){return s}});var r=i(690613);let n={NON_SECURE_CONTEXT:5001,NON_CROSS_ORIGIN_ISOLATION:5002,MAY_NOT_SUPPORT:5003,UNKNOW:520};function o(){if(!isSecureContext)return(0,r.wf)(n.NON_SECURE_CONTEXT,"navigator.deviceMemory is available only in secure contexts (HTTPS)");let e=navigator.deviceMemory;return e?(0,r.oW)(e):(0,r.wf)(n.MAY_NOT_SUPPORT,"navigator.deviceMemory may not be supported")}function a(){if(!isSecureContext)return(0,r.wf)(n.NON_SECURE_CONTEXT,"navigator.deviceMemory is available only in secure contexts (HTTPS)");let e=performance.memory;return e?(0,r.oW)(e):(0,r.wf)(n.MAY_NOT_SUPPORT,"navigator.deviceMemory may not be supported")}async function s(){try{if(!crossOriginIsolated)return(0,r.wf)(n.NON_CROSS_ORIGIN_ISOLATION,"performance.measureUserAgentSpecificMemory is only available when cross-origin isolation is successful");let e=performance.measureUserAgentSpecificMemory;if(!e)return(0,r.wf)(n.MAY_NOT_SUPPORT,"performance.measureUserAgentSpecificMemory may not be supported");let t=await e.call(performance);return(0,r.oW)(t)}catch(e){if(e instanceof DOMException)return(0,r.wf)(n.UNKNOW,e.message,e);return(0,r.wf)(n.UNKNOW,"run performance.measureUserAgentSpecificMemory fail due to unknown reason",e)}}function l(e){let t={};try{for(let r of e){var i;let{bytes:e,types:n,attribution:o}=r;if(0===e||0===n.length)continue;let a=null===(i=o[0])||void 0===i?void 0:i.scope,s=n[0],l=a?`${a}-${s}`:s;t[l]=void 0!==t[l]?e+t[l]:e}}catch(e){return{}}return t}},979512:function(e,t,i){"use strict";i.d(t,{N:function(){return n}});class r{_loopInRaf(){this._isLoopOn&&requestAnimationFrame(()=>{let e=this._getCurrentTime();if(e-this._latestTaskExecutedTime<this._wait)return this._loopInRaf();let t=!!this._latestTask;try{this._latestTask&&(this._recordTaskTime(),this._latestTask.call(void 0))}catch(e){throw e}finally{this._latestTask=void 0,t?(this._silentRafCounter=0,this._latestTaskExecutedTime=e):this._silentRafCounter++,this._silentRafCounter>r.MAX_SILENCE_COUNT?this._setLoopOff():this._loopInRaf()}})}_setLoopOn(){this._isLoopOn=!0,this._silentRafCounter=0}_setLoopOff(){this._reset()}_reset(){this._isLoopOn=!1,this._latestTask=void 0,this._silentRafCounter=0,this._workingRafCounter=0,this._taskTimestampForFpsCalc=r.NO_RECORD,this._latestTaskExecutedTime=r.NO_RECORD}_getCurrentTime(){return Date.now()}_recordTaskTime(){if(this._silentRafCounter>r.MAX_FPS_CAL_SILENCE_COUNT){this._taskTimestampForFpsCalc=r.NO_RECORD;return}if(this._workingRafCounter%r.FPS_CAL_FREQUENCE==0){let e=this._getCurrentTime();this._taskTimestampForFpsCalc=e}this._workingRafCounter++}doTask(e){this._latestTask=e,!this._isLoopOn&&(this._setLoopOn(),this._loopInRaf())}cancel(){this._reset()}flush(){this._latestTaskExecutedTime=r.NO_RECORD}constructor(e=0){this._wait=e,this._isLoopOn=!1,this._silentRafCounter=0,this._workingRafCounter=0,this._latestTask=void 0,this._latestTaskExecutedTime=r.NO_RECORD,this._taskTimestampForFpsCalc=r.NO_RECORD}}function n(e,t){let i=new r(t),n=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];i.doTask(()=>{e.apply(void 0,r)})};return n.cancel=i.cancel.bind(i),n.flush=i.flush.bind(i),n}r.MAX_SILENCE_COUNT=120,r.FPS_CAL_FREQUENCE=60,r.NO_RECORD=-1,r.MAX_FPS_CAL_SILENCE_COUNT=8},729596:function(e,t,i){"use strict";i.d(t,{h:function(){return r}});class r{static usToMs(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=0;return t&&(i=Number(e%1000n)),Number(e/1000n)+i/1e3}static usToSecond(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=0;return t&&(i=Number(e%1000000n)),Number(e/1000000n)+i/1e6}static secondToUs(e){let t=BigInt(Math.round(e%1*1e6));return 1000000n*BigInt(Math.floor(e))+t}static msToUs(e){let t=BigInt(Math.round(e%1*1e3));return 1000n*BigInt(Math.floor(e))+t}}},434005:function(e,t,i){"use strict";i.d(t,{Pq:function(){return u},gj:function(){return p},j3:function(){return c},pu:function(){return d}});var r=i(772322);i(601979);var n=i(52838),o=i(827322),a=i(293698),s=i(801497);let l=(e,t,i,l)=>{var c,d;let u=a.m4.create(e).addQueryParameter("store_region",null!==(d=null===(c=window.__locationCountryCode)||void 0===c?void 0:c.toLowerCase())&&void 0!==d?d:"none").addQueryParameter("lang",s.ZP.language.toLowerCase()).toString();return(0,r.jsx)(n.Z,{className:l,href:(0,o.C)(u,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),target:"_blank",onClick:i,children:t},t)},c=(e,t,i)=>l("/clause/terms-of-service",e,t,i),d=(e,t,i)=>l("/clause/privacy-policy",e,t,i),u=(e,t)=>l("/clause/community-guideline",e,t),p=(e,t)=>l("/clause/creator-agreement",e,t)},922732:function(e,t,i){"use strict";i.d(t,{C:()=>y});var r=i("772322");i("17435"),i("55041"),i("931598");var n=i("629913"),o=i("519065"),a=i("16464"),s=i("827322"),l=i("801497"),c=i("958444"),d=i("218571"),u=i("105789"),p=i.n(u);let _={"edit-ai-writer-btn":"edit-ai-writer-btn-XgSl0w","ai-writer-loading-icon":"ai-writer-loading-icon-Z6gL6a","ai-writer-btn-arrow":"ai-writer-btn-arrow-e89CwW","ai-writer-menu-view":"ai-writer-menu-view-nFOwbA","ai-write-menu":"ai-write-menu-DV4TRE","ai-writer-menu-item":"ai-writer-menu-item-pQ012n","ai-write-item-icon":"ai-write-item-icon-ghdfI9"};var g=i("58377");let h=i.p+"static/image/ai-writer-loading-white.f1c45607.webp",m=i.p+"static/image/ai-writer-loading-dark.30910cb2.webp";var v=i("478007");let f=[{key:g.U.Rewrite,title:()=>l.ZP.t("web_ai_writer_btn_rewrite",{},"Revise"),icon:()=>(0,r.jsx)(c.G4v,{size:20})},{key:g.U.Shorter,title:()=>l.ZP.t("web_ai_writer_btn_shorten_text",{},"Shorten"),icon:()=>(0,r.jsx)(c.ue1,{size:20})},{key:g.U.Longer,title:()=>l.ZP.t("web_ai_writer_btn_expand_text",{},"Expand"),icon:()=>(0,r.jsx)(c.qnu,{size:20})},{key:g.U.GenerateTitle,title:()=>l.ZP.t("web_ai_writer_btn_generate_title",{},"Generate title"),icon:()=>(0,r.jsx)(c.$3F,{size:20})},{key:g.U.GenerateText,title:()=>l.ZP.t("web_ai_writer_btn_generate_body_text",{},"Generate body text"),icon:()=>(0,r.jsx)(c.$3F,{size:20})}],y=e=>{let{onAiWriteSubMenuChange:t,isLoading:i,targetClassName:u,onClick:g,isDarkTheme:y,position:w,triggerProps:b,bottomOffset:S=0,forceLight:C=!0,dropDownPosition:k="bl"}=e,[E,I]=(0,d.useState)(!1),P=e=>{null==t||t(e),I(!1)};(0,d.useEffect)(()=>{if(!u)return;let e=document.getElementsByClassName(u)[0];e&&(i?e.classList.add("ai-writer-border-animation"):e.classList.remove("ai-writer-border-animation"))},[i]),(0,d.useEffect)(()=>{let e=new Image;y?e.src=(0,s.C)(m,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}):e.src=(0,s.C)(h,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),new Image().src=(0,s.C)(v,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},[y]);let A=(0,r.jsx)("div",{className:p()(_["ai-writer-menu-view"],"ai-writer-menu-view",C&&"lv-theme-force_light"),children:(0,r.jsx)(o.Z,{className:p()(_["ai-write-menu"],"is-scroll-y",C&&"lv-theme-force_light"),children:f.map((e,t)=>(0,r.jsxs)(o.Z.Item,{onClick:()=>P(e.key),style:{display:"flex"},className:_["ai-writer-menu-item"],children:[(0,r.jsx)("div",{className:_["ai-write-item-icon"],children:e.icon()}),(0,r.jsx)("span",{children:e.title()})]},String(e.key)))})});return(0,r.jsx)(a.Z,{droplist:A,trigger:"click",popupVisible:E,position:k,onVisibleChange:I,disabled:i,triggerProps:null!=b?b:{duration:0,popupAlign:{bottom:[0,12]},style:{width:188}},bottomOffset:S,children:(0,r.jsxs)("div",{className:p()(_["edit-ai-writer-btn"],"edit-ai-writer-btn"),onClick:()=>{null==g||g()},children:[(0,r.jsx)(n.Z,{content:i?l.ZP.t("web_ai_writer_btn_generating",{},"Generating"):l.ZP.t("web_ai_writer_hover_ai_writer_name",{},"Ai Writer"),position:w,children:(0,r.jsx)("div",{style:{paddingTop:"6px"},children:i?y?(0,r.jsx)("img",{src:(0,s.C)(h,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),className:_["ai-writer-loading-icon"]}):(0,r.jsx)("img",{src:(0,s.C)(m,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),className:_["ai-writer-loading-icon"]}):(0,r.jsx)(c.$Fm,{size:20})})}),C?(0,r.jsx)(c.fHh,{className:p()(_["ai-writer-btn-arrow"],"ai-writer-btn-arrow"),size:10,style:E?{transform:"rotate(180deg)"}:{}}):(0,r.jsx)(c.tf_,{className:p()(_["ai-writer-btn-arrow"],"ai-writer-btn-arrow"),size:10,style:E?{transform:"rotate(180deg)"}:{}})]})})}},58377:function(e,t,i){"use strict";i.d(t,{U:function(){return n}});var r,n=((r={}).Rewrite="rewrite",r.Shorter="shorter",r.Longer="longer",r.GenerateTitle="generateTitle",r.GenerateText="generateText",r)},57464:function(e,t,i){"use strict";i.d(t,{q:()=>k});var r=i("772322");i("225572"),i("960560");var n=i("395551"),o=i("544633"),a=i("97257"),s=i("928881"),l=i("827322"),c=i("218571"),d=i("801497");let u={wrapper:"wrapper-VyoHD6",header:"header-nNDRNZ",title:"title-t_9zM8",titleSpan:"titleSpan-bzgNTd",closeWrapper:"closeWrapper-E80431",close:"close-CWaNr3",inputWrapper:"inputWrapper-wWIXqm",textAreaAutoWidth:"textAreaAutoWidth-RsjvaT",textAreaPlaceHolderWidth:"textAreaPlaceHolderWidth-C7SiIk",textAreaPlaceHolder:"textAreaPlaceHolder-VYvaM0",textAreaWrapper:"textAreaWrapper-BC0Gly",input:"input-OTUXIe",inputNumber:"inputNumber-uKywid",inputNumberMax:"inputNumberMax-FYLfuK",submit:"submit-l3idsO",loadingWrapper:"loadingWrapper-LFn32z",loadingImage:"loadingImage-sbXNee",loadingText:"loadingText-E7jg4i"};var p=i("150564"),_=i("883967"),g=i("298991"),h=i("168370"),m=i("650248"),v=i("445080"),f=i("105789"),y=i.n(f),w=i("995370");let b={submit:"submit-tfpiFl",text:"text-XlbcXP",icon:"icon-QB2anG",iconText:"iconText-nKC26C",iconTextSpan:"iconTextSpan-kW3QCn"},S=c.memo(e=>{let{className:t,...i}=e;return(0,r.jsxs)(a.Z,{size:"small",type:"primary",className:y()(t,b.submit),...i,children:[(0,r.jsx)("span",{className:b.text,children:d.oc.t("web_ai_writer_btn_generate",{},"Generate")}),w.gn||w.V5?(0,r.jsx)("span",{className:b.icon,children:(0,r.jsx)(p.mHN,{})}):(0,r.jsx)("span",{className:b.iconText,children:(0,r.jsx)("span",{className:b.iconTextSpan,children:"Ctrl"})}),(0,r.jsx)("span",{className:b.icon,style:{marginLeft:4},children:(0,r.jsx)(p.Ce2,{})})]})});var C=i("478007");let k=c.memo(e=>{let{initTop:t=0,initLeft:i=0,top:f,left:w,maxLength:b=200,placeholder:k=d.oc.t("web_ai_writer_text_example_write_description",{},"Example: \u201CWrite a stunning title.\u201D "),onSubmit:E,onChange:I,defaultInputValue:P="",status:A,onClose:R,onCancel:x,loadingProcess:N=0,onPositionChange:L,onResize:O,autoFocus:M,style:D}=e,[j,F]=(0,c.useState)(!1),[U,B]=(0,c.useState)(i),[H,G]=(0,c.useState)(t),[W,V]=(0,c.useState)(P),Z=(0,c.useMemo)(()=>W.endsWith("\n")?`${W}0`:W,[W]),z=(0,c.useRef)(U),$=(0,c.useRef)(H),K=(0,c.useRef)(null),q=j?U:null!=w?w:U,Y=j?H:null!=f?f:H,J=(0,c.useRef)(P),Q=(0,c.useRef)(null),X=(0,c.useRef)(null),[ee,{height:et,width:ei}]=(0,n.default)(void 0,void 0,[A===_.$.Init]),er=et>30||ei>340,en=(0,o.default)(()=>{null==O||O(K.current)});(0,v.y)(K,en);let eo=(0,o.default)(e=>{J.current=e,null==I||I(e),V(e)}),ea=(0,o.default)(()=>{null==E||E(J.current)}),es=(0,o.default)(e=>{if(!!e&&!!W.trim())(e.ctrlKey||e.metaKey)&&(null==E||E(J.current))}),el=(0,o.default)(()=>{F(!0),B(q),G(Y),z.current=q,$.current=Y}),ec=(0,o.default)((0,m.Z)(e=>{B(z.current+e.x),G($.current+e.y)},33,{trailing:!1})),ed=(0,o.default)(()=>{F(!1),null==L||L({left:U,top:H})});return(0,h.c)({refs:[Q],onStart:el,onDrag:ec,onEnd:ed}),(0,c.useEffect)(()=>{if(M){var e;null===(e=X.current)||void 0===e||e.focus()}},[A===_.$.Init]),(0,r.jsxs)("div",{ref:K,className:`${u.wrapper}`,style:{top:Y,left:q,...D},onContextMenu:e=>{e.stopPropagation(),e.preventDefault()},onClick:e=>{e.stopPropagation(),(0,g.HM)()},onMouseDown:e=>{e.stopPropagation(),(0,g.HM)()},children:[(0,r.jsxs)("div",{className:u.header,children:[(0,r.jsx)("div",{className:u.title,ref:Q,children:(0,r.jsx)("span",{className:u.titleSpan,children:d.oc.t("web_ai_writer_text_what_you_want",{},"What you want AI writer to write?")})}),(0,r.jsx)("div",{className:u.closeWrapper,onClick:R,children:(0,r.jsx)(p.x8P,{className:u.close})})]}),A===_.$.Init&&(0,r.jsxs)("div",{className:u.inputWrapper,style:{height:er?et+28+0+12:28},children:[(0,r.jsxs)("div",{className:y()(u.textAreaAutoWidth,{[u.textAreaAutoWidthMul]:er}),children:[(0,r.jsx)("div",{className:u.textAreaPlaceHolderWidth,children:Z}),(0,r.jsx)("div",{className:u.textAreaPlaceHolder,ref:ee,children:Z}),(0,r.jsx)("div",{className:u.textAreaWrapper,children:(0,r.jsx)(s.Z.TextArea,{onChange:eo,onPressEnter:es,defaultValue:P,className:u.input,autoSize:{minRows:1,maxRows:3},maxLength:b,placeholder:k,ref:X})})]}),(0,r.jsx)(S,{disabled:!W.trim(),className:u.submit,onClick:ea}),er&&(0,r.jsx)("div",{className:y()(u.inputNumber,{[u.inputNumberMax]:W.length===b}),children:`${W.length}/${b}`})]}),A===_.$.Loading&&(0,r.jsxs)("div",{className:u.loadingWrapper,children:[(0,r.jsx)("img",{src:(0,l.C)(C,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),alt:"",className:u.loadingImage}),(0,r.jsx)("span",{className:u.loadingText,children:`${d.oc.t("web_ai_writer_text_generate_ing",{},"Generating...")}${N}%`}),(0,r.jsx)(a.Z,{size:"mini",onClick:x,children:d.oc.t("web_ai_writer_text_generate_ing_cancel",{},"Cancel")})]})]})})},883967:function(e,t,i){"use strict";i.d(t,{$:function(){return n}});var r,n=((r={}).Init="init",r.Loading="loading",r.Result="result",r)},76350:function(e,t,i){"use strict";i.d(t,{sx:()=>s,a3:()=>l,ZP:()=>c});var r=i("772322"),n=i("750183"),o=i("394741");let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if("white"===t&&"legacy-vip"!==e)return(0,r.jsx)(o.$t,{className:i,type:"general",withTick:"pro-available"===e});switch(e){case"pro-available":return(0,r.jsx)(o.$t,{className:i,type:"pro",withTick:!0});case"pro-unavailable":return(0,r.jsx)(o.$t,{className:i,type:"pro",withTick:!1});case"standard-available":return(0,r.jsx)(o.$t,{className:i,type:"standard",withTick:!0});case"standard-unavailable":return(0,r.jsx)(o.$t,{className:i,type:"standard",withTick:!1});case"legacy-vip":return(0,r.jsx)(o.ZN,{className:i,type:n?"legacy-horizontal":"legacy"});default:return null}},s=e=>{let{className:t,diamondColor:i="normal",forceBadgeType:o}=e;return o?a(o,i,t,!0):(0,r.jsx)(n.Hk,{className:t,useGeneral:"white"===i})},l=()=>(0,r.jsx)("div",{className:"badge-vip-limit-free"}),c=e=>{let{className:t,diamondColor:i,forceBadgeType:o}=e;return o?a(o,i,t):(0,r.jsx)(n.Hk,{className:t,useGeneral:"white"===i})}},781566:function(e,t,i){"use strict";i.d(t,{b:()=>s});var r=i("772322"),n=i("105789"),o=i.n(n);let a="file-uploader-yxogZp",s=e=>{let{className:t,onChange:i,onClick:n,onMouseDown:s,accept:l,multiple:c=!0}=e;return(0,r.jsx)("input",{type:"file",title:"",multiple:c,accept:l,className:o()(a,t),onChange:i,onClick:n,onMouseDown:s})}},985759:function(e,t,i){"use strict";i.d(t,{W:()=>o}),i("966156");var r=i("368100"),n=i("801497");let o=e=>{let t=Object.assign({title:n.oc.t("confirm_deletion",{},"Confirm to Delete"),content:n.oc.t("please_confirm_whether_to_delete",{},"Please confirm whether to delete"),okText:n.oc.t("web_confirm",{},"Confirm"),cancelText:n.oc.t("web_cancel",{},"Cancel")},e);return new Promise((e,i)=>{var n;r.Z.confirm({className:`graphic-custom-modal_container ${null!==(n=t.className)&&void 0!==n?n:""}`,wrapClassName:t.wrapClassName,title:t.title,content:t.content,okText:t.okText,cancelText:t.cancelText,cancelButtonProps:{size:"large"},okButtonProps:{status:"danger",size:"large",style:{marginLeft:16}},icon:t.icon,onOk:async()=>{t.onBeforeOk&&await t.onBeforeOk(),e()},onCancel:async()=>{t.onBeforeCancel&&await t.onBeforeCancel(),i()}})})}},781639:function(e,t,i){"use strict";i.d(t,{Z:()=>l});var r=i("772322"),n=i("105789"),o=i.n(n),a=i("641077");let s="icon-loading-WYzeWF",l=e=>{let{className:t,size:n}=e;return(0,r.jsx)(a.Z,{className:o()(s,t),src:i(596014),draggable:!1,wrapperStyle:void 0!==n?{width:`${n}px`,height:`${n}px`,lineHeight:`${n}px`}:void 0})}},701958:function(e,t,i){"use strict";i.d(t,{Z:()=>a});var r=i("772322");i("218571");var n=i("105789"),o=i.n(n);let a=e=>{let{className:t,wrapperClassName:n,wrapperStyle:a,style:s}=e;return(0,r.jsx)("div",{className:o()("icon-smart-effect-bg",n),style:a,children:(0,r.jsx)("img",{className:o()("icon-smart-effect-img",t),src:i(291018),style:s,alt:"smart effect icon"})})}},641077:function(e,t,i){"use strict";i.d(t,{E:function(){return d},Z:function(){return u}});var r=i(772322),n=i(827322),o=i(218571),a=i(105789),s=i.n(a),l=i(150564),c=i(666302);let d=e=>{let{src:t="",draggable:i=!1,alt:a="",phType:d,className:u,wrapperStyle:p,withCredentials:_=!1,onLoad:g,loading:h,style:m,loader:v,fallbackImgSrc:f,onError:y,onMouseLeave:w,onMouseOver:b,...S}=e,[C,k]=(0,o.useState)(!1),E=(0,o.useRef)(!1),I=(0,o.useRef)([]),P=(0,o.useRef)(null),[A,R]=(0,o.useState)(t||f),x=(0,o.useMemo)(()=>{if(C)return(0,r.jsx)(r.Fragment,{});if(v)return(0,r.jsx)("div",{className:c.Z.loading,children:v});if("music"===d)return(0,r.jsx)("div",{className:c.Z["loader-music"],children:(0,r.jsx)(l.hQw,{})});else if("sound"===d)return(0,r.jsx)("div",{className:c.Z["loader-music"],children:(0,r.jsx)(l.AjX,{})});else return(0,r.jsx)(r.Fragment,{})},[v,C,d]);return(0,o.useEffect)(()=>{if(!t)return;R(t);let e=()=>{let e=P.current;e&&(e.src="",e.onload=null,e.onerror=null,e=null)};return I.current.includes(t)?()=>e():(k(!1),E.current=!1,()=>e())},[t]),(0,r.jsxs)("div",{className:s()(c.Z["image-wrapper"],u),style:p,onMouseLeave:w,onMouseOver:b,children:[x,(0,r.jsx)("img",{ref:P,className:c.Z.image,crossOrigin:_?"use-credentials":"anonymous",src:(0,n.C)(A,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),draggable:i,alt:a,style:m,loading:h,onLoad:e=>{k(!0),null==g||g(e),E.current=!1},onError:e=>{if(A&&I.current.push(A),k(!0),!(f&&I.current.includes(f)))null==y||y(e),E.current=!0,f&&(k(!1),E.current=!1,R(f))},...S})]})},u=(0,o.memo)(d)},732077:function(e,t,i){"use strict";i.d(t,{Z:function(){return l}});var r=i(772322);i(837510);var n=i(948747),o=i(218571),a=i(641077),s=i(666302);let l=(0,o.memo)(e=>{let{skeleton:t=(0,r.jsx)(n.Z,{spinColor:"white",size:20}),delay:i=500,withCredentials:l,...c}=e,[d,u]=(0,o.useState)(!1),[p,_]=(0,o.useState)(!i),g=(0,o.useMemo)(()=>!d&&p,[p,d]);return(0,o.useEffect)(()=>{if(!i)return;let e=setTimeout(()=>{_(!0)},i);return()=>{e&&clearTimeout(e)}},[]),(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsx)("div",{className:s.Z["image-skeleton"],children:t}),(0,r.jsx)(a.Z,{...c,withCredentials:l,onLoad:e=>{var t;u(!0),null===(t=c.onLoad)||void 0===t||t.call(c,e)},onError:()=>{u(!0)},loading:"lazy"})]})})},141913:function(e,t,i){"use strict";i.d(t,{PS:()=>c,SV:()=>u,Xf:()=>p,fi:()=>d});var r=i("772322"),n=i("218571"),o=i("743907"),a=i("763832");let s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{delayMs:i=500,numTry:r=2}=t;try{return await e()}catch(o){let n=r-1;if(n<=0)throw o;return await (0,a._)(i),await s(e,{...t,numTry:n})}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return()=>s(e,t)},c=e=>(0,n.lazy)(l(e,{delayMs:1e3,numTry:5})),d=e=>{let t=(0,n.lazy)(e);return t.preload=e,t},u=e=>{let{children:t,fallback:i,onError:n}=e;return(0,r.jsx)(o.SV,{fallback:null!=i?i:(0,r.jsx)("div",{}),onError:n,children:t})},p=e=>{let{children:t,fallback:i=null,errorFallback:o,onError:a}=e;return(0,r.jsx)(u,{fallback:null!=o?o:i,onError:a,children:(0,r.jsx)(n.Suspense,{fallback:i,children:t})})}},488935:function(e,t,i){"use strict";i.d(t,{l:()=>l,S:()=>c});var r=i("772322"),n=i("105789"),o=i.n(n),a=i("141913");let s=(0,a.PS)(()=>i.e("113").then(i.bind(i,832406)).then(e=>{let{Lottie:t}=e;return{default:t}})),l=e=>{let{suffixDot:t=!1,className:n,title:l="\u52A0\u8F7D\u4E2D"}=e;return(0,r.jsxs)("div",{className:o()("lottie-loading",n),children:[(0,r.jsx)("div",{className:"lottie-loading__animation",children:(0,r.jsx)(a.Xf,{children:(0,r.jsx)(s,{config:{loop:!0,animationData:i(512385)},lottieEventListeners:[]})})}),(0,r.jsxs)("div",{className:"lottie-loading__title",children:[l,t&&"..."]})]})},c=e=>{let{suffixDot:t=!1,className:n,title:l="\u52A0\u8F7D\u4E2D"}=e;return(0,r.jsxs)("div",{className:o()("lottie-loading",n),children:[(0,r.jsx)("div",{className:"lottie-loading__animation",children:(0,r.jsx)(a.Xf,{children:(0,r.jsx)(s,{config:{loop:!0,animationData:i(881889)},lottieEventListeners:[]})})}),(0,r.jsxs)("div",{className:"lottie-loading__title",children:[l,t&&"..."]})]})}},893354:function(e,t,i){"use strict";i.d(t,{Z:()=>d});var r=i("772322");i("784923");var n=i("498417"),o=i("195291"),a=i("701958");let s={"ve-message-wrapper":"ve-message-wrapper-Kdq5H9"},l=(e,t,i)=>{var l,d;let u=null==i?void 0:null===(l=i.getContainer)||void 0===l?void 0:l.call(i);if(!u){let i="string"==typeof t?t:{icon:"loading"===e?(0,r.jsx)(a.Z,{wrapperStyle:{width:20,height:20}}):void 0,...t};return null===n.Z||void 0===n.Z?void 0:null===(d=n.Z[e])||void 0===d?void 0:d.call(n.Z,i)}let p="string"==typeof t?{content:t,type:e}:{...t,type:e},_="",g=(e,t)=>{if(!e)return;Array.isArray(t)&&(t=t.join(" "));let{top:i,left:r,width:n}=u.getBoundingClientRect();e.style.width=`${n}px`,e.style.top=`${i+24}px`,e.style.left=`${r}px`,e.className=`${e.className} ${t}`};if(c.instances.has(u)){let e=c.instances.get(u);_=null==e?void 0:e.add(p),g(null==e?void 0:e.__dom,p.className)}else{let t=document.createElement("div");t.classList.add(s["ve-message-wrapper"]),(0,o.render)((0,r.jsx)(n.Z,{ref:e=>{_=(null==e?void 0:e.add(p))||"",e.__dom=t,c.instances.set(u,e)},icon:"loading"===e?(0,r.jsx)(a.Z,{wrapperStyle:{width:20,height:20}}):void 0}),t),g(t,p.className),document.body.appendChild(t)}return()=>{var e;_&&(null===(e=c.instances.get(u))||void 0===e||e.remove(_))}};class c extends n.Z{}c.instances=new Map,c.success=(e,t)=>l("success",e,t),c.info=(e,t)=>l("info",e,t),c.warning=(e,t)=>l("warning",e,t),c.error=(e,t)=>l("error",e,t),c.loading=(e,t)=>l("loading",e,t),c.normal=(e,t)=>l("normal",e,t);let d=c},156160:function(e,t,i){"use strict";i.d(t,{ZP:()=>_});var r=i("772322"),n=i("150564"),o=i("568998"),a=i("105789"),s=i.n(a),l=i("218571");let c={dashedLines:"dashed-lines-FIAVby",placeholderUpload:"placeholder-upload-mXl1qP",subTitle:"sub-title-aQ1HP5",hover:"hover-oauciX",uploadActive:"upload-active-AbCQ85",emptyTitleWrap:"empty-title-wrap-aGJp79",iconEmptyWrap:"icon-empty-wrap-jLXGyv",default:"default-UgKxam",placeholderUploadInner:"placeholder-upload-inner-OlGAtk",placeholderUploadInnerScale:"placeholder-upload-inner-scale-KutNSN",empty:"empty-y4gMSk",innerCanUpload:"inner-can-upload-ImdUJt",iconUploadWrap:"icon-upload-wrap-hIbG_f",iconEmptyUpload:"icon-empty-upload-ck0pjn",title:"title-ODBUTt",clickTitle:"click-title-hWocdH",dragTitle:"drag-title-HZfm3B",canvas:"canvas-bqB4be"};var d=i("801497"),u=i("781639");let p="PlaceholderUpload",_=e=>{let{pickFileBeforeAvailable:t,isLoading:i,onImport:a,accept:_,isDragging:g=!1,isDropboxEnable:h=!1,icon:m=(0,r.jsx)(o.gxK,{size:"22"}),styleType:v="mediaPlaceholder",reportClickImport:f,uploadTriggerArea:y="uploadInner",multiple:w=!0,children:b}=e,S=(0,l.useRef)(null),C=(0,l.useCallback)(()=>{let e=S.current;if(!!e)null==f||f(),e.click(),e.dataset.isTrusted="true"},[]),k=(0,l.useCallback)(e=>{let{files:t}=e.target;t&&a(Array.from(t)),e.target.value=""},[a]),E=(0,l.useMemo)(()=>(0,r.jsxs)("div",{className:c.dashedLines,children:[(0,r.jsx)("div",{className:"line-top"}),(0,r.jsx)("div",{className:"line-left"}),(0,r.jsx)("div",{className:"line-bottom"}),(0,r.jsx)("div",{className:"line-right"})]}),[]);return"empty"===v?(0,r.jsx)("div",{className:s()(c.placeholderUpload,v,{[c.uploadActive]:g}),id:p,children:(0,r.jsxs)("div",{className:s()(c.placeholderUploadInner,c.empty),children:[E,(0,r.jsx)("div",{className:c.iconEmptyWrap,children:(0,r.jsx)(n.ahJ,{className:c.iconEmptyUpload})}),(0,r.jsx)("div",{className:c.emptyTitleWrap,children:g?(0,r.jsx)("p",{children:d.ZP.t("let_go_of_the_file",{},"\u677E\u624B\u653E\u7F6E\u6587\u4EF6")}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:d.ZP.t("web_theres_nothing_yet",{},"\u6682\u65E0\u7D20\u6750")}),(0,r.jsx)("p",{children:d.ZP.t("web_drag_and_drop_your_files_here",{},"Drag and drop your files here")})]})})]})}):(0,r.jsxs)("div",{className:s()(c.placeholderUpload,{[c.uploadActive]:g,[c.canvas]:"canvas"===v}),id:p,children:[(0,r.jsxs)("div",{className:s()(c.placeholderUploadInner,{"is-drag":g,[c.innerCanUpload]:"uploadInner"===y}),onClick:()=>{"uploadInner"===y&&C()},children:[E,(0,r.jsxs)("div",{className:c.placeholderUploadInnerScale,children:[(0,r.jsx)("div",{className:c.iconUploadWrap,onClick:()=>{"uploadIcon"===y&&C()},children:i?(0,r.jsx)(u.Z,{size:22}):m}),"canvas"===v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:c.clickTitle,"data-ssr-i18n-key":"web_materialSearch_button_click_to_upload","data-ssr-i18n-value":d.ZP.t("web_materialSearch_button_click_to_upload"),children:d.ZP.t("web_materialSearch_button_click_to_upload",{},"Click to upload")}),(0,r.jsx)("p",{className:c.dragTitle,"data-ssr-i18n-key":"web_materialSearch_text_drag_and_drop","data-ssr-i18n-value":d.ZP.t("web_materialSearch_text_drag_and_drop"),children:d.ZP.t("web_materialSearch_text_drag_and_drop",{},"Drag and drop file here")})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:s()(c.title,c.default),children:d.ZP.t("web_materialSearch_button_click_to_upload",{},"Click to upload")}),(0,r.jsx)("p",{className:s()(c.title,c.hover),children:d.ZP.t("let_go_of_the_file",{},"\u677E\u624B\u653E\u7F6E\u6587\u4EF6")}),(0,r.jsx)("p",{className:c.subTitle,children:d.ZP.t("web_materialSearch_text_drag_and_drop",{},"Drag and drop file here")})]}),(0,r.jsx)("input",{type:"file",style:{display:"none"},onClick:e=>{i&&e.preventDefault(),e.stopPropagation()},accept:_,onChange:k,multiple:w,ref:S})]})]}),b]})}},472334:function(e,t,i){"use strict";i.d(t,{AA:function(){return p},ZC:function(){return u},ZP:function(){return _},aJ:function(){return d}});var r=i(772322),n=i(218571),o=i(776015),a=i(105789),s=i.n(a),l=i(547501),c=i(729099);let d=e=>{let{width:t,height:i}=e;return(0,r.jsxs)("div",{className:l.Z.base_title_list_column_loading,children:[(0,r.jsx)("div",{className:l.Z["base_title_list_column_loading-content"],style:{width:t,height:i}}),(0,r.jsx)("div",{className:l.Z["base_title_list_column_loading-title"],style:{width:.7*t,height:12}})]})},u=e=>(0,r.jsx)("div",{className:l.Z.base_list_column_loading,style:e}),p=e=>{let{className:t,skeletons:i,isLoading:a,children:d,style:u,size:p,forceRatio:_,skeletonWidth:g,itemWidth:h,itemHeight:m}=e,{columnWidth:v,columnCount:f}=(0,n.useMemo)(()=>(0,o.tA)(g,p),[g,p]),y=g>504?2:1,w=(0,n.useMemo)(()=>{let e=Math.floor((g+8)/88);return e-e%2},[g]),b=(0,n.useMemo)(()=>Math.ceil((g+8)/90),[g]);return a?(0,r.jsx)("div",{className:s()(l.Z["responsive-skeleton"],t),style:{...u},children:i.map((e,t)=>{let i=`${t}_${e}`;switch(e){case"bar":return(0,r.jsx)(c.pv,{},i);case"upload-action":return(0,r.jsx)(c.n8,{},i);case"small-bar":return(0,r.jsx)(c.C_,{},i);case"cloud-cards":return(0,r.jsx)(c.Ok,{columnCount:f,columnWidth:v},i);case"tags":return(0,r.jsx)(c.e4,{count:w},i);case"song-cate-list":return(0,r.jsx)(c.gK,{count:b},i);case"base-list":return(0,r.jsx)(c.rP,{columnCount:f,columnWidth:v},i);case"base-title-list":return(0,r.jsx)(c.p6,{columnCount:f,columnWidth:v},i);case"song-list":return(0,r.jsx)(c.Yr,{columnCount:y},i);case"masonry-list":return(0,r.jsx)(c.nx,{columnCount:f,columnWidth:v,forceRatio:_},i);case"waterfall-hori-list":return(0,r.jsx)(c.wD,{},i);case"square":return(0,r.jsx)(c.aN,{},i);case"combine":return(0,r.jsx)(c.k3,{},i);case"brand-kit-poly-cate":return(0,r.jsx)(c.JL,{},i);case"poly-cate":return(0,r.jsx)(c.bd,{},i);case"poly-cate-full":return(0,r.jsx)("div",{children:Array(15).fill(null).map((e,t)=>(0,r.jsx)(c.bd,{},t))},i);case"poly-cate-with-label":return(0,r.jsx)(c.WB,{},i);case"poly-cate-with-label-lg":return(0,r.jsx)(c.WB,{size:"lg"},i);case"poly-cate-with-label-xl":return(0,r.jsx)(c.WB,{size:"xl"},i);case"poly-cate-with-label-custom":return(0,r.jsx)(c.WB,{itemWidth:h,itemHeight:m},i);case"poly-cate-with-label-full":return(0,r.jsx)("div",{children:Array(15).fill(null).map((e,t)=>(0,r.jsx)(c.WB,{},t))},i);case"poly-cate-with-label-xl-full":return(0,r.jsx)("div",{children:Array(15).fill(null).map((e,t)=>(0,r.jsx)(c.WB,{size:"xl"},t))},i);case"poly-cate-lg":return(0,r.jsx)(c.bd,{size:"lg"},i);case"poly-cate-xl":return(0,r.jsx)(c.bd,{size:"xl"},i);case"poly-cate-waterfall-lg":return(0,r.jsxs)("div",{className:`${l.Z["responsive-skeleton__combine-wrap"]} ${l.Z["responsive-skeleton__combine-wrap__waterfall-lg"]}`,children:[(0,r.jsxs)("div",{className:l.Z["combine-header"],children:[(0,r.jsx)("div",{className:l.Z["combine-header_title"]}),(0,r.jsx)("div",{className:l.Z["combine-header_handle"]})]}),(0,r.jsx)("div",{className:l.Z["combine-list__square"],children:(0,r.jsx)("div",{className:l.Z["combine-list-row"],children:[[148,56,75,148,56,75,148,56,75],[56,75,148,56,75,148,56,75,148]][0].map((e,t)=>(0,r.jsx)("div",{className:s()(l.Z["combine-list_item"],l.Z["combine-list_item__lg"],{[l.Z["combine-list_item-wide"]]:1!==t,[l.Z["combine-list_item-narrow"]]:1===t})},t))})})]},i);case"ai-character-cate":return(0,r.jsx)(c.Ju,{},i);case"ai-character-cate-list":return(0,r.jsx)(c.AF,{columnCount:f,columnWidth:v},i);case"ai-image-skeleton-list":return(0,r.jsx)(c.bK,{columnCount:f,columnWidth:v},i);case"image-skeleton":return(0,r.jsx)(c.Fu,{itemWidth:h},i);case"ai-creator-voice":return(0,r.jsx)(c.ZQ,{columnCount:f,columnWidth:v,itemHeight:m},i);case"ai-creator-digital-human":return(0,r.jsx)(c.wS,{columnWidth:v,itemHeight:m},i);default:return}})}):(0,r.jsx)(r.Fragment,{children:d})},_=n.memo(e=>{let{isLoading:t,children:i}=e;return t?(0,r.jsx)(p,{...e}):(0,r.jsx)(r.Fragment,{children:i})})},378469:function(e,t,i){"use strict";i.d(t,{G:function(){return a},j:function(){return s}});var r=i(772322);i(218571);var n=i(547501),o=i(499845);let a=e=>{let{columnWidth:t}=e,i="node"===o.env.JUPITER_TARGET;return(0,r.jsxs)("div",{className:n.Z["card-container"],children:[(0,r.jsx)("div",{className:n.Z["card-content"],style:i?{}:{width:t,height:.559*t}}),(0,r.jsx)("div",{className:n.Z["card-bar"],style:i?{}:{width:.7*t,height:12}})]})},s=e=>{let{columnWidth:t,columnCount:i}=e;return(0,r.jsx)(r.Fragment,{children:Array(8).fill(0).map((e,o)=>(0,r.jsx)("div",{className:n.Z["card-row"],children:Array(7===o?Math.floor(i/2):i).fill(0).map((e,i)=>(0,r.jsx)(a,{columnWidth:t},i))},o))})}},729099:function(e,t,i){"use strict";i.d(t,{AF:function(){return R},C_:function(){return u},Fu:function(){return N},JL:function(){return I},Ju:function(){return A},Ok:function(){return p},WB:function(){return P},Yr:function(){return w},ZQ:function(){return m},aN:function(){return C},bK:function(){return x},bd:function(){return E},e4:function(){return _},fi:function(){return y},gK:function(){return g},k3:function(){return k},n8:function(){return d},nx:function(){return b},p6:function(){return f},pv:function(){return c},rP:function(){return h},wD:function(){return S},wS:function(){return v}});var r=i(772322),n=i(218571),o=i(547501),a=i(378469),s=i(105789),l=i.n(s);let c=n.memo(()=>(0,r.jsx)("div",{className:o.Z["responsive-skeleton__bar"]})),d=n.memo(()=>(0,r.jsxs)("div",{className:o.Z["responsive-skeleton__upload-action"],children:[(0,r.jsx)("div",{className:o.Z["responsive-skeleton__upload-action-main"]}),(0,r.jsxs)("div",{className:o.Z["responsive-skeleton__upload-action-separate-entries"],children:[(0,r.jsx)("div",{className:o.Z["responsive-skeleton__upload-action-separate-entries-item"]}),(0,r.jsx)("div",{className:o.Z["responsive-skeleton__upload-action-separate-entries-item"]}),(0,r.jsx)("div",{className:o.Z["responsive-skeleton__upload-action-separate-entries-item"]})]})]})),u=n.memo(()=>(0,r.jsx)("div",{className:o.Z["responsive-skeleton__small-bar"]})),p=n.memo(e=>{let{columnCount:t,columnWidth:i}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__cloud-cards"],children:(0,a.j)({columnCount:t,columnWidth:i})})}),_=n.memo(e=>{let{count:t}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__tags"],children:Array(t).fill(0).map((e,t)=>(0,r.jsx)("div",{className:o.Z.tag},t))})}),g=n.memo(e=>{let{count:t}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__song-cate-list"],children:Array(t).fill(0).map((e,t)=>(0,r.jsxs)("div",{className:o.Z.column,children:[(0,r.jsx)("div",{className:o.Z.row}),(0,r.jsx)("div",{className:o.Z.row})]},t))})}),h=n.memo(e=>{let{columnCount:t,columnWidth:i}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__base-list"],children:Array(6).fill(0).map((e,n)=>(0,r.jsx)("div",{className:o.Z.row,children:Array(t).fill(0).map((e,t)=>(0,r.jsx)("div",{className:o.Z.column,style:{width:i,height:i}},t))},n))})}),m=n.memo(e=>{let{columnCount:t,columnWidth:i,itemHeight:n}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__ai-creator-voice"],children:Array(6).fill(0).map((e,a)=>(0,r.jsx)("div",{className:o.Z.row,children:Array(t).fill(0).map((e,t)=>(0,r.jsx)("div",{className:o.Z.column,style:{width:i,height:n||i}},t))},a))})}),v=n.memo(e=>{let{columnWidth:t,itemHeight:i}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__ai-creator-digital-human"],children:(0,r.jsx)("div",{className:o.Z.row,children:(0,r.jsx)("div",{className:o.Z.column,style:{width:2*t,height:i}})})})}),f=n.memo(e=>{let{columnCount:t,columnWidth:i}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__base-title-list"],children:[,,,,].fill(0).map((e,n)=>(0,r.jsx)("div",{className:o.Z.row,children:Array(t).fill(0).map((e,t)=>(0,r.jsxs)("div",{className:o.Z.column,children:[(0,r.jsx)("div",{className:o.Z["column-content"],style:{width:i,height:i}}),(0,r.jsx)("div",{className:o.Z["column-title"],style:{width:.7*i,height:12}})]},t))},n))})}),y=e=>{let{width:t,height:i}=e;return(0,r.jsxs)("div",{style:{width:t,height:i},className:o.Z["responsive-skeleton__item-with-label"],children:[(0,r.jsx)("div",{className:o.Z["item-with-label-cover"]}),(0,r.jsx)("div",{className:o.Z["item-with-label-title"]})]})},w=n.memo(e=>{let{columnCount:t,rowCount:i=10}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__song-list"],children:Array(i).fill(0).map((e,i)=>(0,r.jsx)("div",{className:o.Z["song-items"],children:Array(t).fill(0).map((e,t)=>(0,r.jsxs)("div",{className:o.Z["song-item"],children:[(0,r.jsx)("div",{className:o.Z["song-item-cover"]}),(0,r.jsxs)("div",{className:o.Z["song-item-info"],children:[(0,r.jsx)("div",{className:o.Z["song-item-title"]}),(0,r.jsx)("div",{className:o.Z["song-item-detail"]})]})]},t))},i))})}),b=n.memo(e=>{let{columnCount:t,columnWidth:i,forceRatio:n}=e,a=[[.75,160/120,1,67/120,1.775,1,.75,160/120,1,67/120,1.775,1],[1.775,.75,160/120,67/120,1.775,1,1.775,.75,160/120,67/120,1.775,1],[.75,214/161,1,67/161,286/161,1,.75,214/161,1,67/161,286/161,1]];return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__masonry-list"],children:Array(t).fill(0).map((e,t)=>(0,r.jsx)("div",{className:o.Z.column,children:Array(a[0].length).fill(0).map((e,s)=>(0,r.jsx)("div",{className:o.Z.item,style:{width:i,height:(n||a[t%3][s])*i}},s))},t))})}),S=e=>{let{key:t}=e,i=[[1.48,.56,.75,.67,1.46,.56,.9,1.3,.68,.67,2.13,1.2],[.56,.75,1.48,2.13,.375,67/120,1.775,.75,130/120,67/120,56/120,1]];return(0,r.jsx)(n.Fragment,{children:[,,,,].fill(0).map((e,n)=>(0,r.jsxs)("div",{className:o.Z["responsive-skeleton__sub-list-ctner"],children:[(0,r.jsxs)("div",{className:o.Z["responsive-skeleton__sub-list-header"],children:[(0,r.jsx)("div",{className:o.Z["sub-title"]}),(0,r.jsx)("div",{className:o.Z["sub-opt"]})]}),(0,r.jsx)("div",{className:o.Z["responsive-skeleton__waterfall-hori-list"],children:[,,].fill(0).map((e,t)=>(0,r.jsx)("div",{className:o.Z.row,children:Array(i[0].length).fill(0).map((e,n)=>(0,r.jsx)("div",{className:o.Z.item,style:{width:100*i[t%2][n],height:100}},n))},t))})]},`${n}${t}_header`))})},C=e=>{let{key:t}=e,i=[[148,56,75,148,56,75,148,56,75],[56,75,148,56,75,148,56,75,148]];return(0,r.jsxs)("div",{className:o.Z["responsive-skeleton__combine-wrap"],children:[(0,r.jsxs)("div",{className:o.Z["combine-header"],children:[(0,r.jsx)("div",{className:o.Z["combine-header_title"]}),(0,r.jsx)("div",{className:o.Z["combine-header_handle"]})]}),(0,r.jsxs)("div",{className:o.Z["combine-list__square"],children:[(0,r.jsx)("div",{className:o.Z["combine-list-row"],children:i[0].map((e,t)=>(0,r.jsx)("div",{className:o.Z["combine-list_item"]},t))}),(0,r.jsx)("div",{className:o.Z["combine-list-row"],children:i[0].map((e,t)=>(0,r.jsx)("div",{className:o.Z["combine-list_item"]},t))})]})]},t)},k=e=>{let{key:t}=e,i=[[148,56,75,148,56,75,148,56,75],[56,75,148,56,75,148,56,75,148]];return(0,r.jsxs)("div",{className:o.Z["responsive-skeleton__combine-wrap"],children:[(0,r.jsxs)("div",{className:o.Z["combine-header"],children:[(0,r.jsx)("div",{className:o.Z["combine-header_title"]}),(0,r.jsx)("div",{className:o.Z["combine-header_handle"]})]}),(0,r.jsxs)("div",{className:o.Z["combine-list"],children:[(0,r.jsx)("div",{className:o.Z["combine-list-row"],children:i[0].map((e,t)=>(0,r.jsx)("div",{className:o.Z["combine-list_item"],style:{width:`${e}px`}},t))}),(0,r.jsx)("div",{className:o.Z["combine-list-row"],children:i[1].map((e,t)=>(0,r.jsx)("div",{className:o.Z["combine-list_item"],style:{width:`${e}px`}},t))})]})]},t)},E=e=>{let{key:t,size:i}=e;return(0,r.jsxs)("div",{className:l()(o.Z["responsive-skeleton__combine-wrap"],o.Z["responsive-skeleton__combine-wrap__poly-cate"]),children:[(0,r.jsxs)("div",{className:o.Z["combine-header"],children:[(0,r.jsx)("div",{className:o.Z["combine-header_title"]}),(0,r.jsx)("div",{className:o.Z["combine-header_handle"]})]}),(0,r.jsx)("div",{className:o.Z["combine-list__square"],children:(0,r.jsx)("div",{className:o.Z["combine-list-row"],children:[[148,56,75,148,56,75,148,56,75],[56,75,148,56,75,148,56,75,148]][0].map((e,t)=>(0,r.jsx)("div",{className:l()(o.Z["combine-list_item"],{[o.Z[`combine-list_item__${i}`]]:i})},t))})})]},t)},I=e=>{let{size:t,rowCount:i=2}=e,n=[[148,56,75,148,56,75,148,56,75],[56,75,148,56,75,148,56,75,148]];return(0,r.jsxs)("div",{className:l()(o.Z["responsive-skeleton__combine-wrap"],o.Z["responsive-skeleton__combine-wrap__poly-cate"]),children:[(0,r.jsxs)("div",{className:o.Z["combine-header"],children:[(0,r.jsx)("div",{className:o.Z["combine-header_title"]}),(0,r.jsx)("div",{className:o.Z["combine-header_handle"]})]}),Array(i).fill(0).map((e,i)=>(0,r.jsx)("div",{className:o.Z["combine-list__square"],children:(0,r.jsx)("div",{className:o.Z["combine-list-row"],children:n[0].map((e,i)=>(0,r.jsx)("div",{className:l()(o.Z["combine-list_item"],{[o.Z[`combine-list_item__${t}`]]:t})},i))})},i))]})},P=e=>{let{key:t,size:i,itemWidth:n,itemHeight:a}=e;return(0,r.jsxs)("div",{className:l()(o.Z["responsive-skeleton__combine-wrap"],o.Z["responsive-skeleton__combine-wrap__poly-cate-with-label"]),children:[(0,r.jsxs)("div",{className:o.Z["combine-header"],children:[(0,r.jsx)("div",{className:o.Z["combine-header_title"]}),(0,r.jsx)("div",{className:o.Z["combine-header_handle"]})]}),(0,r.jsx)("div",{className:o.Z["combine-list__square"],children:(0,r.jsx)("div",{className:o.Z["combine-list-row"],children:[[148,56,75,148,56,75,148,56,75],[56,75,148,56,75,148,56,75,148]][0].map((e,t)=>(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("div",{style:{width:n,height:a},className:l()(o.Z["combine-list_item"],{[o.Z[`combine-list_item__${i}`]]:i})}),(0,r.jsx)("div",{style:{width:n?.8*n:void 0},className:o.Z["column-title"]})]},t))})})]},t)},A=e=>{let{key:t,size:i}=e;return(0,r.jsxs)("div",{className:o.Z["responsive-skeleton__combine-wrap"],children:[(0,r.jsxs)("div",{className:o.Z["combine-header"],children:[(0,r.jsx)("div",{className:o.Z["combine-header_title"]}),(0,r.jsx)("div",{className:o.Z["combine-header_handle"]})]}),(0,r.jsx)("div",{className:o.Z["combine-list__ai-character"],children:(0,r.jsx)("div",{className:o.Z["combine-list-row"],children:[[148,56,75,148,56,75,148,56,75],[56,75,148,56,75,148,56,75,148]][0].map((e,t)=>(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("div",{className:l()(o.Z["combine-list_item"],{[o.Z[`combine-list_item__${i}`]]:i})}),(0,r.jsx)("div",{className:o.Z["column-title"]})]},t))})})]},t)},R=n.memo(e=>{let{columnCount:t,columnWidth:i}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__base-title-list"],children:[,,,,].fill(0).map((e,n)=>(0,r.jsx)("div",{className:o.Z.row,children:Array(t).fill(0).map((e,t)=>(0,r.jsxs)("div",{className:o.Z.column,children:[(0,r.jsx)("div",{className:o.Z["column-content"],style:{width:i,height:i/3*4}}),(0,r.jsx)("div",{className:o.Z["column-title"],style:{width:"auto",margin:"8px 2px 0",height:12}})]},t))},n))})}),x=n.memo(e=>{let{columnCount:t,columnWidth:i}=e;return(0,r.jsx)("div",{className:o.Z["responsive-skeleton__base-title-list"],children:[,,,,].fill(0).map((e,n)=>(0,r.jsx)("div",{className:o.Z.row,children:Array(t).fill(0).map((e,t)=>(0,r.jsxs)("div",{className:o.Z.column,children:[(0,r.jsx)("div",{className:o.Z["column-content"],style:{width:i,height:i/3*4}}),(0,r.jsx)("div",{className:o.Z["column-title"],style:{width:"auto",margin:"8px 2px 0",height:12}})]},t))},n))})}),N=n.memo(e=>{let{itemWidth:t=56}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:o.Z["responsive-skeleton__image"],children:(0,r.jsx)("div",{className:o.Z["image-items"],children:(0,r.jsxs)("div",{className:o.Z["image-item"],children:[(0,r.jsx)("div",{className:o.Z["image-item-cover"]}),(0,r.jsxs)("div",{className:o.Z["image-item-info"],children:[(0,r.jsx)("div",{className:o.Z["image-item-title"]}),(0,r.jsx)("div",{className:o.Z["image-item-detail"]})]})]})})}),(0,r.jsx)("div",{className:o.Z["responsive-skeleton__base-list"],children:(0,r.jsx)("div",{className:o.Z.row,style:{gap:"12px"},children:[,,,,,].fill(0).map((e,i)=>(0,r.jsx)("div",{className:o.Z.column,style:{width:t,height:t}},i))})})]})})},776015:function(e,t,i){"use strict";i.d(t,{RG:function(){return n},TO:function(){return r},g1:function(){return c},tA:function(){return l}});let r=8;function n(e){let{rowWidth:t,minColumnWidth:i,minColumnCount:n=1,maxColumnCount:o,gutterSize:a=r}=e,s=Math.floor((t-i)/(i+a))+1;return s=n?Math.max(s,n):s,{columnWidth:(t-((s=o?Math.min(s,o):s)-1)*a)/s,columnCount:s}}function o(e){return n({...e,minColumnWidth:64,minColumnCount:3,maxColumnCount:5})}function a(e){return n({...e,minColumnWidth:77,minColumnCount:3,maxColumnCount:5})}function s(e){return n({...e,minColumnWidth:120,minColumnCount:2,maxColumnCount:4})}function l(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";return(t="smallest"===i?o:"small"===i?a:s)({rowWidth:e})}function c(e,t){let i=Math.min(16/9,Math.max(9/16,t));return e/i}},362853:function(e,t,i){"use strict";i.d(t,{JK:function(){return r},J_:function(){return o},Nl:function(){return n}});let r=2,n=900,o=200},168370:function(e,t,i){"use strict";i.d(t,{c:function(){return o}});var r=i(218571),n=i(362853);function o(e){let{enable:t=!0,refs:i,stopPropagation:o=!0,onStart:a,onDrag:s,onEnd:l,keepCursorStyle:c=!1,cursorClassPrefix:d,triggerStartThresholdDis:u=0}=e,p=(0,r.useRef)(),_=(0,r.useRef)(),g=(0,r.useRef)(),h=(0,r.useRef)(a),m=0===u,v=(0,r.useRef)(m),f=(0,r.useRef)(!1),y=(0,r.useRef)(!1),w=(0,r.useRef)(s),b=(0,r.useRef)(l),S=(0,r.useRef)(i.map(e=>e.current)),[C,k]=(0,r.useState)(0);h.current=a,w.current=s,b.current=l;let E=(0,r.useCallback)(()=>{var e;if(v.current=m,!!p.current)c&&(document.body.style.cursor="default"),p.current=null,_.current=void 0,g.current=void 0,null===(e=b.current)||void 0===e||e.call(b,y.current),y.current=!1},[m,c]),I=(0,r.useCallback)(e=>{var t;if(e.button===n.JK){E();return}p.current=e.target,c&&(document.body.style.cursor=p.current.style.cursor),_.current=[e.clientX,e.clientY],g.current=_.current;let i=null===(t=h.current)||void 0===t?void 0:t.call(h,e);void 0!==(null==i?void 0:i.abort)?f.current=null==i?void 0:i.abort:f.current&&(f.current=!1),o&&e.stopPropagation()},[o,c,E]),P=(0,r.useCallback)(e=>{var t;if(!p.current||!_.current||f.current)return;let{clientX:i,clientY:r}=e,[n,o]=_.current,[a=n,s=o]=null!==(t=g.current)&&void 0!==t?t:[];if(!v.current&&(Math.abs(i-n)>=u||Math.abs(r-o)>=u)&&(v.current=!0),!!v.current)w.current({x:i-n,y:r-o,clientX:i,clientY:r,deltaX:i-a,deltaY:r-s,trigger:p.current,startX:n,startY:o,prevX:a,prevY:s}),g.current=[i,r],y.current=!0},[u]);(0,r.useEffect)(()=>{let e=!0;for(let t=0;t<i.length;t++)if(i[t].current!==S.current[t]){e=!1;break}!e&&k(C+1),S.current=i.map(e=>e.current)},[i]),(0,r.useEffect)(()=>t?(document.addEventListener("mouseup",E),document.addEventListener("mousemove",P),i.forEach(e=>{var t;null===(t=e.current)||void 0===t||t.addEventListener("mousedown",I)}),()=>{if(i.forEach(e=>{var t;null===(t=e.current)||void 0===t||t.removeEventListener("mousedown",I)}),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",E),p.current){let e=()=>{document.removeEventListener("mouseup",e),E()};document.addEventListener("mouseup",e)}}):()=>void 0,[C,t,I,P,E])}},44203:function(e,t,i){"use strict";i.d(t,{k:function(){return a}});var r=i(218571),n=i(260963);let o=(e,t)=>e===t;function a(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{isEqual:a=o,deps:s,shouldUpdateOnlyOnChange:l=!1}=i,c=function(){let[,e]=(0,r.useState)(0);return(0,r.useCallback)(()=>{e(e=>e+1)},[])}(),d=e=>(function e(t){if("object"!=typeof t)return t;if(t instanceof Array)return t.map(t=>e(t));if(t instanceof Object){var i;if((i=t)&&i.$$typeof===Symbol.for("react.element"))return t;let r={};for(let i in t)"object"==typeof t[i]?r[i]=e(t[i]):r[i]=t[i];return r}return t})(t(e)),u=(0,r.useRef)();return!u.current&&(e?u.current=d(e):u.current=void 0),(0,r.useEffect)(()=>{if(!e)return;let t=(0,n.U5)(()=>d(e),(e,t)=>{u.current=e,l?!a(e,t)&&c():c()},{fireImmediately:!0});return()=>{t()}},[e,...null!=s?s:[]]),u.current}},445080:function(e,t,i){"use strict";i.d(t,{y:function(){return n}});var r=i(218571);let n=(e,t,i)=>{let n=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!e.current){var r;null===(r=n.current)||void 0===r||r.disconnect(),n.current=null;return}return n.current=new ResizeObserver(t),n.current.observe(e.current,i),()=>{var e;null===(e=n.current)||void 0===e||e.disconnect(),n.current=null}},[t,e,i])}},751284:function(e,t,i){"use strict";i.d(t,{C:function(){return l},N:function(){return s}});var r=i(218571),n=i(362853);function o(e,t,i){if(e.length<2)return[t,i];let[r,n]=e;return[t-r,n-i]}function a(e,t){let i=Math.atan2(t,e)/Math.PI*180;return i>0?i:i+360}function s(e,t){let i;let r=(e+180)%360;return i=e<180?t>=e&&t<r?t-e:-(360-t+e)%360:t>=r&&t<e?-(e-t):t>e?t-e:(360-e+t)%360}function l(e){let{enable:t=!0,refs:i,centerRef:l,onStart:c,onRotate:d,onEnd:u,keepCursorStyle:p=!1,cursorClassPrefix:_}=e,g=(0,r.useRef)(),h=(0,r.useRef)(),m=(0,r.useRef)(),v=(0,r.useRef)(0),f=(0,r.useRef)(c),y=(0,r.useRef)(d),w=(0,r.useRef)(u);f.current=c,y.current=d,w.current=u;let b=(0,r.useCallback)(()=>{var e;if(!g.current)return;let{dataset:t={}}=g.current,{cursorClass:i}=t;if(p&&_&&(null==i?void 0:i.startsWith(_))){let{classList:e}=document.body;for(let t of Array.from(e))t.startsWith(_)&&e.remove(t)}g.current=null,h.current=void 0,m.current=void 0,v.current=0,null===(e=w.current)||void 0===e||e.call(w)},[]),S=(0,r.useCallback)(e=>{var t;if(e.button===n.JK){b();return}if(!l.current)return;g.current=e.target;let{dataset:i={}}=g.current,{cursorClass:r}=i;p&&_&&(null==r?void 0:r.startsWith(_))&&document.body.classList.add(r);let s=l.current.getBoundingClientRect(),c=Math.floor(s.x+s.width/2),d=[c,Math.floor(s.y+s.height/2)];h.current=d;let[u,y]=o(d,e.pageX,e.pageY);m.current=a(u,y),v.current=0,null===(t=f.current)||void 0===t||t.call(f,m.current),e.stopPropagation()},[]),C=(0,r.useCallback)(e=>{var t;if(!g.current||!h.current||void 0===m.current)return;let[i,r]=o(h.current,e.pageX,e.pageY),n=a(i,r),l=s(m.current,n);m.current=n,v.current+=l,null===(t=y.current)||void 0===t||t.call(y,{degree:v.current,deltaDegree:l,event:e})},[]);(0,r.useEffect)(()=>t?(document.addEventListener("mouseup",b),document.addEventListener("mousemove",C),i.forEach(e=>{var t;null===(t=e.current)||void 0===t||t.addEventListener("mousedown",S)}),()=>{i.forEach(e=>{var t;null===(t=e.current)||void 0===t||t.removeEventListener("mousedown",S)}),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",b)}):()=>void 0,[...i.map(e=>e.current),t,S,C,b])}},298991:function(e,t,i){"use strict";function r(e){let{event:t,delay:i}=null!=e?e:{},r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0}),n=t||r;void 0!==i?setTimeout(()=>{document.body.dispatchEvent(n)},i):document.body.dispatchEvent(n)}i.d(t,{HM:function(){return r},P6:function(){return n}});let n=(e,t,i)=>{var r,n;if(r=e,("left"==(n="left")?!(r.buttons<=1):"right"!==n||2!==r.buttons)||e.ctrlKey)return;let o=e.timeStamp,a=e.target,s=e.currentTarget,{clientX:l,clientY:c}=e,d=()=>{null==t||t(e),p()},u=t=>{let r=t.timeStamp,{clientX:n,clientY:a}=t,d=Math.abs(n-l)>3||Math.abs(a-c)>3;if(!(r-o<1)&&!!d)null==i||i({...e,currentTarget:s}),p()};null==a||a.addEventListener("mouseup",d),null==a||a.addEventListener("mousemove",u);let p=()=>{null==a||a.removeEventListener("mouseup",d),null==a||a.removeEventListener("mousemove",u)}}},687869:function(e,t,i){"use strict";i.d(t,{g:function(){return r}});class r{}},974904:function(e,t,i){"use strict";i.d(t,{V:function(){return a}});var r=i(768362),n=i(434316);function o(e,t){if(e instanceof Promise){e.then(t);return}t()}function a(e,t,i){let a=i.value;return i.value=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(this.onTaskReallyStart){let e;t[0]&&t[0]instanceof n._y&&({span:e}=(0,r.VL)(t[0],this.taskName,"onTaskReallyStart")),o(this.onTaskReallyStart(...t),()=>{null==e||e.end(),performance.mark(`${this.taskName}_START`)})}else performance.mark(`${this.taskName}_START`);let s=a.apply(this,t);if(this.onTaskReallyFinished){let e;t[0]&&t[0]instanceof n._y&&({span:e}=(0,r.VL)(t[0],this.taskName,"onTaskReallyFinished")),o(this.onTaskReallyFinished(s),()=>{null==e||e.end(),performance.mark(`${this.taskName}_END`)})}else s instanceof Promise?s.then(()=>{performance.mark(`${this.taskName}_END`)}):performance.mark(`${this.taskName}_END`);return s},i}},9080:function(e,t,i){"use strict";i.d(t,{b:function(){return o}});var r=i(768362),n=i(434316);function o(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];let a=new e;return i[0]instanceof n._y&&(a=(0,r.bu)(a.taskName,a)),a.run(...i)}},165625:function(e,t,i){"use strict";i.d(t,{IC:function(){return s},JO:function(){return a},m4:function(){return l}});var r,n,o=i(801497);var a=((r={}).InvalidTemplate="1033",r.InvalidParams="1000",r);var s=((n={})[n.Unknown=-1e3]="Unknown",n[n.InvalidLink=-1001]="InvalidLink",n[n.DraftNotFromBrowser=-1002]="DraftNotFromBrowser",n[n.NetworkError=-1003]="NetworkError",n[n.WorkspaceInitError=-1004]="WorkspaceInitError",n[n.WorkspaceNotPermitted=-1005]="WorkspaceNotPermitted",n[n.DownloadVEError=-1006]="DownloadVEError",n[n.MachineAuthenticateFailed=-1007]="MachineAuthenticateFailed",n[n.PeopleAuthenticateFailed=-1008]="PeopleAuthenticateFailed",n[n.NoPermission=-1009]="NoPermission",n[n.EmailAuthenticateFailed=-1010]="EmailAuthenticateFailed",n[n.PasswordAuthenticateFailed=-1011]="PasswordAuthenticateFailed",n[n.CaptchaAuthenticateFailed=-1012]="CaptchaAuthenticateFailed",n[n.InMachineReview=-1013]="InMachineReview",n[n.InPeopleReview=-1014]="InPeopleReview",n[n.NotLogin=-1015]="NotLogin",n[n.NoPermissionAndAllowApplyToSpace=-1016]="NoPermissionAndAllowApplyToSpace",n[n.NoPermissionNotAllowApply=-1017]="NoPermissionNotAllowApply",n[n.NoPermissionAndAllowApplyToSpaceAndDraft=-1018]="NoPermissionAndAllowApplyToSpaceAndDraft",n[n.NoPermissionAndAllowApplyToDraft=-1019]="NoPermissionAndAllowApplyToDraft",n[n.EmailFailedAndAllowApplyToSpace=-1020]="EmailFailedAndAllowApplyToSpace",n[n.EmailFailedAndAllowApplyToSpaceAndDraft=-1021]="EmailFailedAndAllowApplyToSpaceAndDraft",n[n.EmailFailedNotAllowApply=-1022]="EmailFailedNotAllowApply",n[n.EmailFailedAndAllowApplyToDraft=-1023]="EmailFailedAndAllowApplyToDraft",n);let l={[-1e3]:{title:o.oc.t("service_wrong",{},"Service error"),content:o.oc.t("draft_network_error",{},"Network error. Check your internet connection and try again.")},[-1004]:{title:o.oc.t("service_wrong",{},"Service error"),content:o.oc.t("web_current_link_no_longer_available",{},"The link is invalid, please return to the workbench to open the draft")}}},32508:function(e,t,i){"use strict";i.d(t,{L:()=>a});var r=i("772322"),n=i("152155"),o=i.n(n);function a(e){let{children:t,className:i}=e;return(0,r.jsx)("div",{className:o()("error-page__layout",i),children:(0,r.jsx)("div",{className:"error-page__container",children:t})})}},112143:function(e,t,i){"use strict";i.d(t,{N:()=>o});var r=i("772322");i("225572");var n=i("97257");let o=e=>{let{icon:t,title:i,description:o,actions:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"layout-tips__container",children:[t,(0,r.jsx)("p",{className:"title",children:i}),(0,r.jsx)("p",{className:"desc",children:o})]}),a.map(e=>{let{label:t,clickHandler:i}=e;return(0,r.jsx)(n.Z,{className:"layout-tips__button",type:"primary",onClick:i,children:t},t)})]})}},875297:function(e,t,i){"use strict";i.d(t,{U:()=>N});var r=i("772322");i("784923");var n=i("498417"),o=i("827322"),a=i("165625"),s=i("298654"),l=i("990948"),c=i("568998"),d=i("801497");let u=()=>(0,r.jsxs)("div",{className:"editor-unsupport",children:[(0,r.jsx)(c.FF1,{className:"editor-unsupport-icon"}),(0,r.jsx)("p",{className:"editor-unsupport-title",children:d.oc.t("this_file_does_not_support_editing_in_the_web_version",{},"\u8BE5\u6587\u4EF6\u6682\u4E0D\u652F\u6301\u5728\u7F51\u9875\u7248\u7F16\u8F91")}),(0,r.jsx)("p",{className:"editor-unsupport-desc",children:d.oc.t("stay_tuned__please_use_mobile_end_or_pc_pro_for_editing_now",{},"\u656C\u8BF7\u671F\u5F85\uFF0C\u76EE\u524D\u8BF7\u4F7F\u7528\u79FB\u52A8\u7AEF\u6216PC\u4E13\u4E1A\u7248\u8FDB\u884C\u7F16\u8F91")})]});var p=i("150564"),_=i("53600"),g=i("112143"),h=i("32508");let m=e=>{let{isTemplate:t,templateId:i}=e;return(0,r.jsx)(h.L,{className:"workspace-not-permitted-error__container",children:(0,r.jsx)(g.N,{icon:(0,r.jsx)(p.l2,{}),title:d.oc.t("web_link_abnormal_title_cannot_project",{},"Couldn\u2019t open project"),description:d.oc.t("web_link_abnormal_text_not_member",{},"You are not a member of this space. To open this project, get an invitation link from the person who shared this link and join the space."),actions:[{label:d.oc.t("web_link_abnormal_button_create_project",{},"Create project"),clickHandler:()=>{if(t){(0,_.Vh)(`/editor-template?create_id=${i}`,[..._.u8,"templateId"]);return}(0,_.Vh)("/editor",_.u8)}}]})})};var v=i("425427"),f=i("450038"),y=i("108692"),w=i("961066"),b=i("712829"),S=i("279627"),C=i("960395"),k=i("782350"),E=i("200247");let I="/team-apply",P={APPLY_TOO_MANY:2705,UNDER_REVIEW:2706,DEFAULT:-1};async function A(e,t,i,r){let[n,o]=e.invokeFunction(e=>[e.get(C.q),e.get(v.rO)]),s=n.getDraftShareInfo({packageKey:r,workspaceId:i}),l=n.getWorkspaceInfoExternal({packageKey:r,workspaceId:i,sourceType:4}),[c,d]=await Promise.all([s,l]);if(!c.ok||!d.ok)return{code:t,workspaceName:""};let u=c.value.access_type,p=d.value.apply_allowed;return{code:(0,v.JY)(o)?t:function(e,t,i){let r={[`${a.IC.EmailAuthenticateFailed}-false-2`]:a.IC.EmailFailedAndAllowApplyToDraft,[`${a.IC.EmailAuthenticateFailed}-true-0`]:a.IC.EmailFailedAndAllowApplyToSpace,[`${a.IC.EmailAuthenticateFailed}-true-2`]:a.IC.EmailFailedAndAllowApplyToSpaceAndDraft,[`${a.IC.EmailAuthenticateFailed}-false-0`]:a.IC.EmailFailedNotAllowApply,[`${a.IC.NoPermission}-false-2`]:a.IC.NoPermissionAndAllowApplyToDraft,[`${a.IC.NoPermission}-true-0`]:a.IC.NoPermissionAndAllowApplyToSpace,[`${a.IC.NoPermission}-true-2`]:a.IC.NoPermissionAndAllowApplyToSpaceAndDraft,[`${a.IC.NoPermission}-false-0`]:a.IC.NoPermissionNotAllowApply};return r[`${e}-${t}-${i}`]}(t,p,u),workspaceName:d.value.workspace_name}}async function R(e,t){(0,f.B)(e,{action:"click",enterFrom:t});let[i,r,o]=e.invokeFunction(e=>[e.get(C.q),e.get(y.n),e.get(v.rO)]),[a]=(await i.applyToDraft({workspaceId:r.draftWorkspaceManager.workspaceId,packageKey:o.draftIdFromUrl})).pair();if(a){var s;let i={[P.APPLY_TOO_MANY]:d.ZP.t("web_multiplepeopleview_toast_application_request_maximum_reached",{},"\u4F60\u5DF2\u91CD\u590D\u7533\u8BF7\u591A\u6B21\uFF0C\u65E0\u6CD5\u518D\u6B21\u7533\u8BF7"),[P.UNDER_REVIEW]:d.ZP.t("web_multiplepeopleview_toast_application_under_review",{},"\u4F60\u7684\u7533\u8BF7\u6B63\u5728\u5BA1\u6279\u4E2D"),[P.DEFAULT]:d.ZP.t("web_alert_toast_refresh",{},"Something went wrong. Refresh the page and try again.")};n.Z.warning({content:null!==(s=i[a.code])&&void 0!==s?s:i[P.DEFAULT]});let r={[P.APPLY_TOO_MANY]:"apply_full",[P.UNDER_REVIEW]:"under review"};(0,w.w)(e,{status:"fail",fail_reason:r[a.code],enterFrom:t});return}n.Z.success({content:d.ZP.t("web_multiplepeopleview_toast_application_sent",{},"Request sent.")}),(0,w.w)(e,{status:"success",enterFrom:t})}async function x(e,t,i,n,s,c,u){let _;try{_=await A(t,n,s,c)}catch{_={code:n,workspaceName:""}}switch(_.code){case a.IC.EmailFailedAndAllowApplyToSpace:(0,l.a)((0,r.jsx)(e,{containerService:t,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_title_login_email",{},"Can\u2019t access the project"),details:d.ZP.t("web_multiplepeopleview_desc_view_use_email",{string0:u},"Request access, or sign in with the email with access. You\u2019re currently signed in as {string0}."),accountService:i,switchAccountBtn:!0,buttonText:d.ZP.t("web_multiplepeopleview_btn_join_space_to_view",{},"Request to join space"),onClickButton:()=>{(0,b.Y)(t,{action:"click",enterFrom:"email failure"});let{origin:e}=window.location;window.open((0,o.C)(`${e}${I}?fileId=${c}&workspaceId=${s}&sourceType=4`,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}))}})),(0,S.v)(t,{pageName:"email_authentication_failure_page"}),(0,b.Y)(t,{action:"show",enterFrom:"email failure"});break;case a.IC.EmailFailedAndAllowApplyToDraft:case a.IC.EmailFailedAndAllowApplyToSpaceAndDraft:(0,l.a)((0,r.jsx)(e,{containerService:t,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_title_login_email",{},"Can\u2019t access the project"),details:d.ZP.t("web_multiplepeopleview_desc_view_use_email",{string0:u},"Request access, or sign in with the email with access. You\u2019re currently signed in as {string0}."),accountService:i,switchAccountBtn:!0,buttonText:d.ZP.t("web_multiplepeopleview_btn_apply_for_permission",{},"Request access"),onClickButton:async function(e){await R(e,"email failure")}})),(0,S.v)(t,{pageName:"email_authentication_failure_page"}),(0,f.B)(t,{action:"show",enterFrom:"email failure"});break;case a.IC.EmailFailedNotAllowApply:case a.IC.EmailAuthenticateFailed:(0,l.a)((0,r.jsx)(e,{containerService:t,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_title_login_email",{},"Can\u2019t access the project"),details:d.ZP.t("web_multiplepeopleview_desc_view_use_email",{string0:u},"Request access, or sign in with the email with access. You\u2019re currently signed in as {string0}."),accountService:i,switchAccountBtn:!0})),(0,S.v)(t,{pageName:"email_authentication_failure_page"});break;case a.IC.NoPermissionAndAllowApplyToSpace:(0,l.a)((0,r.jsx)(e,{containerService:t,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_titlr_without_permission",{},"Can\u2019t open project"),details:d.ZP.t("web_multiplepeopleview_desc_view_space_members_permission",{string0:_.workspaceName,string1:u},"You don\u2019t have access to this project because you are not a member of space {string0}. You\u2019re currently signed in as {string1}."),buttonText:d.ZP.t("web_multiplepeopleview_btn_join_space_to_view",{},"Request to join space"),onClickButton:()=>{(0,b.Y)(t,{action:"click",enterFrom:"no space member"});let{origin:e}=window.location;window.open((0,o.C)(`${e}${I}?fileId=${c}&workspaceId=${s}&sourceType=4`,null,{logType:"js.window.location",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}))}})),(0,S.v)(t,{pageName:"link_no_permission_page_no_space_member"}),(0,b.Y)(t,{action:"show",enterFrom:"no space member"});break;case a.IC.NoPermissionAndAllowApplyToDraft:case a.IC.NoPermissionAndAllowApplyToSpaceAndDraft:(0,l.a)((0,r.jsx)(e,{containerService:t,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_titlr_without_permission",{},"Can\u2019t open project"),details:d.ZP.t("web_multiplepeopleview_desc_view_selected_members_permission",{string1:u},"You don\u2019t have access to this project. You\u2019re currently signed in as {string1}."),buttonText:d.ZP.t("web_multiplepeopleview_btn_apply_for_permission",{},"Request access"),onClickButton:async function(e){await R(e,"no permission member")}})),(0,S.v)(t,{pageName:"link_no_permission_page_no_permission_member"}),(0,f.B)(t,{action:"show",enterFrom:"no permission member"});break;case a.IC.NoPermissionNotAllowApply:case a.IC.NoPermission:default:(0,l.a)((0,r.jsx)(e,{containerService:t,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_titlr_without_permission",{},"Can\u2019t open project"),details:d.ZP.t("web_multiplepeopleview_desc_view_space_members_permission",{string0:_.workspaceName,string1:u},"You don\u2019t have access to this project because you are not a member of space {string0}. You\u2019re currently signed in as {string1}.")})),(0,S.v)(t,{pageName:"link_no_permission_page_no_space_member"})}}async function N(e,t,n){var c;console.error("[start] init error: ",e),null===(c=document.getElementById("ssr-root"))||void 0===c||c.remove();let _=(await i.e("5704").then(i.bind(i,409197))).default,[g,h,f]=n.invokeFunction(e=>[e.get(E.D),e.get(k.W),e.get(y.n)]),w=g.userProfile.name;switch(e.code){case a.IC.InvalidLink:return(0,l.a)((0,r.jsx)(_,{containerService:n,icon:(0,r.jsx)(p.RY2,{}),title:d.ZP.t("web_collaborate_title_link_date",{},"Invalid link"),details:d.ZP.t("web_collaborate_text_link_unable_access",{},"Contact the person who shared this link for the latest link.")})),(0,S.v)(n,{pageName:"invalid_link_page"}),!0;case a.IC.MachineAuthenticateFailed:return(0,l.a)((0,r.jsx)(_,{containerService:n,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_title_file_unable",{},"This project is under review"),details:d.ZP.t("web_collaborate_text_under_review",{},"It may take some time to complete the review.")})),(0,S.v)(n,{pageName:"page_with_limited_viewership_of_moderation"}),!0;case a.IC.PeopleAuthenticateFailed:return(0,l.a)((0,r.jsx)(_,{containerService:n,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_title_file_no_view",{},"Can\u2019t open this project"),details:d.ZP.t("web_collaborate_text_review_error",{},"This project is not approved.")})),(0,S.v)(n,{pageName:"review_violation_page"}),!0;case a.IC.NoPermission:case a.IC.EmailAuthenticateFailed:return await x(_,n,g,e.code,f.draftWorkspaceManager.workspaceId,t.draftIdFromUrl,w),!0;case a.IC.InMachineReview:return(0,l.a)((0,r.jsx)(_,{containerService:n,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_title_file_unable",{},"This project is under review"),details:d.ZP.t("web_collaborate_text_few_minutes_later",{},"It may take some time to complete the review.")})),!0;case a.IC.InPeopleReview:return(0,l.a)((0,r.jsx)(_,{containerService:n,icon:(0,r.jsx)(p.mn3,{}),title:d.ZP.t("web_collaborate_title_file_unable",{},"This project is under review"),details:d.ZP.t("web_collaborate_text_under_review",{},"It may take some time to complete the review.")})),!0;case a.IC.DraftNotFromBrowser:return(0,l.a)((0,r.jsx)(u,{})),(0,S.v)(n,{pageName:"open_the_link_guide_page_in_mobile_end"}),!0;case a.IC.WorkspaceInitError:return(0,s.x)(a.m4[a.IC.WorkspaceInitError]),!0;case a.IC.WorkspaceNotPermitted:return(0,l.a)((0,r.jsx)(m,{isTemplate:(0,v.JY)(t),templateId:t.currentTemplateId})),!0;case a.IC.NetworkError:case a.IC.Unknown:return(0,s.x)(a.m4[a.IC.Unknown]),!0;case a.IC.NotLogin:return i.g.location.href=(0,o.C)(`/login?redirect_url=${encodeURIComponent(i.g.location.href)}`,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1}),!0}return!1}},298654:function(e,t,i){"use strict";i.d(t,{x:function(){return s}}),i(966156);var r=i(368100),n=i(801497),o=i(572669);function a(e){let{title:t,content:i}=e;r.Z.error({escToExit:!1,maskClosable:!1,closeIcon:null,title:t,okText:n.oc.t("re_fresh",{},"Refresh"),onOk:()=>location.reload(),content:i})}function s(e){if(!(0,o.Z)(e)){a(e);return}Promise.resolve(e()).then(e=>{a(e)})}},990948:function(e,t,i){"use strict";i.d(t,{a:function(){return n}});var r=i(570126);function n(e){let t=document.createElement("div");document.body.append(t),(0,r.createRoot)(t).render(e)}},260301:function(e,t,i){"use strict";i.d(t,{N:()=>C});var r=i("789786"),n=i("402655");class o extends n.JT{get name(){return this._name}wait(e,t){let i=this._jobStore.get(t);return(null==i?void 0:i.length)?Promise.all(i.map(e=>e.wait())):Promise.resolve()}prepare(e,t){this._executePhase(e,t)}_setBarrier(e,t){!this._jobStore.has(e)&&this._jobStore.set(e,[]),this._jobStore.get(e).push(t)}constructor(...e){super(...e),this._jobStore=new Map}}var a=i("938918"),s=i("753696"),l=i("135029"),c=i("230511"),d=i("606357"),u=i("943478"),p=i("800788"),_=i("230982"),g=i("375197"),h=i("641276"),m=i("849002");class v{get id(){return this._pureTask.id}get pendingPhase(){return this._pureTask.pendingPhase}get prefetchPhase(){return this._pureTask.prefetchPhase}preload(){if(!this._promise)this._promise=this._pureTask.load()}load(){return!this._promise&&(this._promise=this._pureTask.load()),this._promise}constructor(e){this._pureTask=e}}var f=i("531778"),y=i("587892");let w=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}});class b{get id(){return this._task.id}get onLoaded(){return this._loaded?w:this._onLoaded.event}get onCompleted(){return this._completed?w:this._onCompleted.event}setInstantiationPhase(e){this._instantiationPhase=e}_completeEnd(){this._completed=!0,this._onCompleted.fire()}_prefetchContributionData(e,t){t?e.prefetchData():(0,_.n)(()=>{e.prefetchData()},{delay:1e3})}constructor(e,t){this._task=e,this._extensionService=t,this._loaded=!1,this._completed=!1,this._onLoaded=new y.Q,this._onCompleted=new y.Q;let i=performance.now();this._task.load().then(e=>{this._loaded=!0,this._onLoaded.fire();let t={...e.contribution};this._instantiationPhase&&(t.instantiationPhase=this._instantiationPhase),this._extensionService.register(t,e=>{let t=performance.now();if(console.log("[contribution] complete: ",String(this._task.id),t,t-i),this._completeEnd(),!!e&&!!e.prefetchData)this._prefetchContributionData(e,this._instantiationPhase===f.P.Eager)})})}}class S{start(e){if(this._tokens.has(e.id))return this._tokens.get(e.id);let t=new b(e,this._extensionService);return this._tokens.set(e.id,t),t}startImmediately(e){if(this._tokens.has(e.id)){let t=this._tokens.get(e.id);return t.setInstantiationPhase(f.P.Eager),t}let t=new b(e,this._extensionService);return t.setInstantiationPhase(f.P.Eager),this._tokens.set(e.id,t),t}constructor(e){this._extensionService=e,this._tokens=new Map}}class C extends o{registerContributionImmediately(e){this._registerContributionImmediately(e)}_executePhase(e,t){switch(this._prefetch(t),t){case a.f.Started:this._whenStarted();break;case a.f.WorkbenchLoaded:this._whenWorkbenchLoaded();break;case a.f.DraftLoaded:this._whenDraftLoaded();break;case a.f.Restored:this._whenRestored();break;case a.f.Completed:this._whenCompleted()}if(console.log("[contribution] executePhase: ",t),!this._barrierTokens.has(t))return;let i=this._barrierTokens.get(t),r=new m.U;this._setBarrier(t,r),Promise.all(i.map(e=>new Promise(t=>{(0,h.V)(e.onCompleted)(t)}))).then(()=>{r.open()})}_whenStarted(){this._registerContribution(a.f.Started)}_whenWorkbenchLoaded(){!function(e,t){let i={},r=(e,t)=>{if(e in i){var r;(0,p.Y2)(Array.isArray(i[e]),"workbench ui config child must be an array"),null===(r=i[e])||void 0===r||r.push(...t[e])}else i[e]=t[e]};t.forEach(e=>{Object.keys(e).forEach(t=>{r(t,e)})}),e.updateUIConfig({...i})}(this._workbenchService,[...this._setting.config.siderMenu,...this._setting.config.titlebar,...this._setting.config.toolbar]),this._registerContribution(a.f.WorkbenchLoaded)}_whenDraftLoaded(){this._registerContribution(a.f.DraftLoaded)}_whenRestored(){this._registerContribution(a.f.Restored)}_whenCompleted(){this._registerContribution(a.f.Completed)}_registerContribution(e){if(this._disableAllContributions)return[];let t=this._setting.contribution[e];if(!t||0===t.length)return[];let i=new m.U;this._setBarrier(e,i),t.sort((e,t)=>t.priority-e.priority),!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;for(let i=0;i<e.length;i+=t){let r,n;(0,_.n)((r=i,n=t,()=>{for(let t=r;t<r+n&&t<e.length;t++)e[t]&&e[t]()}))}}(t.map(t=>()=>{let i=this._executor.start(t);t.pendingPhase&&((0,p.Y2)(t.pendingPhase>=e,"pending phase should greater or equal to load phase."),this._addBarrierToken(t.pendingPhase,i)),(0,h.V)(i.onLoaded)(()=>this._taskLoaded(i.id)),(0,h.V)(i.onCompleted)(()=>this._taskCompleted(i.id))})),(0,_.n)(()=>{i.open()})}_registerContributionImmediately(e){if(this._disableAllContributions)return;let t=this._tasksMap.get(e);if(!!t)this._executor.startImmediately(t)}_addPrefetch(e,t){!this._prefetchMap.has(e)&&this._prefetchMap.set(e,[]),this._prefetchMap.get(e).push(t)}_prefetch(e){var t;for(let i of null!==(t=this._prefetchMap.get(e))&&void 0!==t?t:[]){let e=this._tasksMap.get(i);(0,_.n)(()=>{e.preload()},{priorityLevel:g.q.IdlePriority})}}_addBarrierToken(e,t){!this._barrierTokens.has(e)&&this._barrierTokens.set(e,[]),this._barrierTokens.get(e).push(t)}_taskLoaded(e){for(let t of this._groupBarriers)t.loaded(e)}_taskCompleted(e){for(let t of this._groupBarriers)t.completed(e)}constructor(e,t,i){for(let[,r]of(super(),this._setting=e,this._workbenchService=t,this._extensionService=i,this._name="contribution",this._executor=new S(this._extensionService),this._tasksMap=new Map,this._prefetchMap=new Map,this._barrierTokens=new Map,this._disableAllContributions=location.href.includes("__disable_all_contributions__"),this._groupBarriers=[],Object.entries(this._setting.contribution)))for(let e of r)if(void 0===e.priority&&(e.priority=s.U.Middle),e.prefetchPhase){let t=new v(e);this._tasksMap.set(e.id,t),this._addPrefetch(e.prefetchPhase,e.id)}else this._tasksMap.set(e.id,e);!function(e,t){class i{use(t,i){console.debug("[contribution] info",t),t.name&&e.registerContributionImmediately(t.name)}}(0,r.gn)([(0,r.fM)(0,(0,l.g)()),(0,r.fM)(1,(0,c.o)()),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof IActionPointInfoWithController?Object:IActionPointInfoWithController,"undefined"==typeof IStopAction?Object:IStopAction]),(0,r.w6)("design:returntype",void 0)],i.prototype,"use",null),i=(0,r.gn)([(0,d.d)()],i),t.registerMiddleware(i,{on:u.Mp.ToolBar,callbackNames:["onClick"]}),t.registerMiddleware(i,{on:u.Mp.SiderMenu,callbackNames:["onClick","onEnter"]}),t.registerMiddleware(i,{on:u.Mp.SiderMenuPanel,callbackNames:["onEnter"]}),t.registerMiddleware(i,{on:u.Mp.TitleBar,callbackNames:["onClick","onEnter"]})}(this,this._workbenchService)}}},308460:function(e,t,i){"use strict";i.d(t,{Dh:function(){return s},GP:function(){return o},Hx:function(){return f},Of:function(){return u},Vc:function(){return l},X_:function(){return y},Xq:function(){return b},Ys:function(){return c},dn:function(){return h},em:function(){return p},fG:function(){return m},i6:function(){return a},j7:function(){return w},jm:function(){return _},mA:function(){return v},ps:function(){return g},ur:function(){return n},uw:function(){return d}});var r=i(155981);let n={id:Symbol(),load:()=>i.e("5622").then(i.bind(i,297547))},o={id:Symbol(),load:()=>i.e("770").then(i.bind(i,65463))},a={id:Symbol(),load:()=>i.e("9323").then(i.bind(i,1615))},s={id:Symbol(),load:()=>i.e("5119").then(i.bind(i,313817))},l={id:Symbol(),load:()=>i.e("8949").then(i.bind(i,533007))},c={id:Symbol(),load:()=>i.e("3983").then(i.bind(i,705924))},d={id:Symbol(),load:()=>i.e("3560").then(i.bind(i,582244))},u={id:Symbol(),load:()=>i.e("331").then(i.bind(i,665325))},p={id:"google-drive",load:()=>Promise.all([i.e("8667"),i.e("3526")]).then(i.bind(i,172045))},_={id:Symbol(),load:()=>Promise.all([i.e("8667"),i.e("2940")]).then(i.bind(i,646293))},g={id:Symbol(),load:()=>Promise.all([i.e("8667"),i.e("2940")]).then(i.bind(i,869537))},h={id:Symbol(),load:()=>Promise.all([i.e("5284"),i.e("118")]).then(i.bind(i,533725))},m={id:Symbol(),load:()=>Promise.all([i.e("9976"),i.e("1950"),i.e("724")]).then(i.bind(i,580122))},v={id:Symbol(),load:()=>i.e("5985").then(i.bind(i,856434))},f={id:r.c,load:()=>i.e("3650").then(i.bind(i,689402))},y={id:Symbol(),load:()=>Promise.all([i.e("7617"),i.e("5284"),i.e("1839"),i.e("8096")]).then(i.bind(i,468038))},w={id:Symbol(),load:()=>Promise.all([i.e("7617"),i.e("5284"),i.e("1839"),i.e("8096")]).then(i.bind(i,464202))},b={id:"global-custom-modal",load:()=>i.e("8266").then(i.bind(i,419341)),priority:10}},644715:function(e,t,i){"use strict";i.d(t,{ES:function(){return w},Hg:function(){return P},LJ:function(){return C},VA:function(){return I},Vm:function(){return f},WE:function(){return x},aV:function(){return y},k3:function(){return b},p2:function(){return S},r7:function(){return N},tC:function(){return R},tM:function(){return E},tO:function(){return L},xY:function(){return k},y4:function(){return A}});var r=i(897722),n=i(111937),o=i(384932),a=i(864),s=i(644241),l=i(576864),c=i(763695),d=i(586210),u=i(391701),p=i(204573),_=i(277331),g=i(326211),h=i(118249),m=i(539309),v=i(857511);let f={id:r.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("3712"),i.e("3014"),i.e("5173"),i.e("149"),i.e("2133"),i.e("3838"),i.e("185"),i.e("8685"),i.e("5871"),i.e("4659"),i.e("4888"),i.e("2733"),i.e("3266")]).then(i.bind(i,646967))},y={id:n.DQ,load:()=>Promise.all([i.e("4493"),i.e("6681"),i.e("3838"),i.e("1182")]).then(i.bind(i,161038))},w={id:o.DQ,load:()=>Promise.all([i.e("4493"),i.e("3014"),i.e("6762"),i.e("3838"),i.e("185"),i.e("5871"),i.e("4659"),i.e("4888"),i.e("3542"),i.e("4301"),i.e("3292")]).then(i.bind(i,122486))},b={id:a.D,load:()=>Promise.all([i.e("3014"),i.e("185"),i.e("5871"),i.e("3542"),i.e("692"),i.e("8020")]).then(i.bind(i,517128))},S={id:s.DQ,load:()=>Promise.all([i.e("3365"),i.e("3377"),i.e("185"),i.e("3412"),i.e("304"),i.e("5284"),i.e("5874"),i.e("5858"),i.e("1839"),i.e("1437")]).then(i.bind(i,761064))},C={id:l.D,load:()=>Promise.all([i.e("3712"),i.e("3014"),i.e("3365"),i.e("140"),i.e("185"),i.e("8685"),i.e("5871"),i.e("4659"),i.e("4888"),i.e("2733"),i.e("3412"),i.e("203"),i.e("9988"),i.e("367")]).then(i.bind(i,121005))},k={id:c.D,load:()=>Promise.all([i.e("3712"),i.e("3014"),i.e("3365"),i.e("140"),i.e("185"),i.e("8685"),i.e("5871"),i.e("4659"),i.e("4888"),i.e("2733"),i.e("3412"),i.e("203"),i.e("1284"),i.e("9845")]).then(i.bind(i,52864))},E={id:d.DQ,load:()=>Promise.all([i.e("4493"),i.e("3712"),i.e("3014"),i.e("3365"),i.e("140"),i.e("1818"),i.e("8407"),i.e("990"),i.e("578"),i.e("3476"),i.e("3838"),i.e("185"),i.e("8685"),i.e("5871"),i.e("4659"),i.e("4888"),i.e("2733"),i.e("3412"),i.e("5699"),i.e("1950"),i.e("9797"),i.e("203"),i.e("9403"),i.e("4750"),i.e("1284"),i.e("9988"),i.e("1715"),i.e("7190"),i.e("357")]).then(i.bind(i,565977))},I={id:u.D,load:()=>Promise.all([i.e("4493"),i.e("3712"),i.e("3014"),i.e("6379"),i.e("3838"),i.e("185"),i.e("8685"),i.e("5871"),i.e("4888"),i.e("2733"),i.e("3542"),i.e("1310")]).then(i.bind(i,125146))},P={id:p.DQ,load:()=>Promise.all([i.e("4493"),i.e("7252"),i.e("149"),i.e("3838"),i.e("5654"),i.e("3488")]).then(i.bind(i,292844))},A={id:_.D,load:()=>Promise.all([i.e("3014"),i.e("185"),i.e("5871"),i.e("3542"),i.e("2366"),i.e("200")]).then(i.bind(i,337776))},R={id:g.D,load:()=>i.e("2191").then(i.bind(i,697211))},x={id:h.DQ,load:()=>Promise.all([i.e("1428"),i.e("3712"),i.e("3014"),i.e("140"),i.e("3649"),i.e("149"),i.e("2133"),i.e("185"),i.e("8685"),i.e("5871"),i.e("4659"),i.e("2733"),i.e("2904"),i.e("3988")]).then(i.bind(i,410648))},N={id:m.DQ,load:()=>Promise.all([i.e("5446"),i.e("7862")]).then(i.bind(i,22324))},L={id:v.DQ,load:()=>Promise.all([i.e("3365"),i.e("6854"),i.e("185"),i.e("3412"),i.e("5987")]).then(i.bind(i,277519))}},167341:function(e,t,i){"use strict";i.d(t,{De:function(){return h},H4:function(){return a},HX:function(){return g},Hr:function(){return C},I9:function(){return I},JE:function(){return d},Ki:function(){return c},LZ:function(){return y},Mg:function(){return v},Nx:function(){return p},O:function(){return m},PJ:function(){return u},VD:function(){return k},Vg:function(){return s},Yv:function(){return S},_O:function(){return E},du:function(){return l},g8:function(){return P},g_:function(){return o},lB:function(){return f},mS:function(){return r},mg:function(){return _},oN:function(){return w},rd:function(){return n},tY:function(){return b}});let r={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,513479))},n={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,739422))},o={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,673204))},a={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,348559))},s={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,571619))},l={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,435109))},c={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,816715))},d={id:Symbol(),load:()=>i.e("7759").then(i.bind(i,389609))},u={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,107187))},p={id:Symbol(),load:()=>i.e("8410").then(i.bind(i,210452))},_={id:Symbol(),load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("304"),i.e("5874"),i.e("5858"),i.e("4980")]).then(i.bind(i,859837))},g={id:Symbol(),load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("304"),i.e("5874"),i.e("5858"),i.e("4980")]).then(i.bind(i,587364))},h={id:Symbol(),load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("304"),i.e("5874"),i.e("5858"),i.e("4980")]).then(i.bind(i,211105))},m={id:Symbol(),load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("3734")]).then(i.bind(i,32281))},v={id:Symbol(),load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("3734")]).then(i.bind(i,832392))},f={id:Symbol(),load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("3734")]).then(i.bind(i,171393))},y={id:Symbol(),load:()=>i.e("647").then(i.bind(i,430702))},w={id:Symbol(),load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("9846"),i.e("4650")]).then(i.bind(i,770035))},b={id:Symbol(),load:()=>i.e("3089").then(i.bind(i,766160))},S={id:Symbol(),load:()=>i.e("8857").then(i.bind(i,413392))},C={id:Symbol(),load:()=>i.e("7301").then(i.bind(i,951455))},k={id:Symbol(),load:()=>i.e("1029").then(i.bind(i,264056))},E={id:Symbol(),load:()=>i.e("1029").then(i.bind(i,123338))},I={id:Symbol(),load:()=>Promise.all([i.e("3959"),i.e("3247")]).then(i.bind(i,12749))},P={id:Symbol(),load:()=>Promise.all([i.e("3959"),i.e("3247")]).then(i.bind(i,909050))}},414506:function(e,t,i){"use strict";i.d(t,{Br:function(){return M},CY:function(){return j},Dj:function(){return w},N8:function(){return S},PE:function(){return A},RR:function(){return E},Rs:function(){return R},TK:function(){return x},YX:function(){return N},ZR:function(){return I},ei:function(){return C},oW:function(){return k},oZ:function(){return O},qq:function(){return b},ug:function(){return P},vg:function(){return L},y_:function(){return D}});var r=i(528150),n=i(962688),o=i(850826),a=i(285001),s=i(282022),l=i(348609),c=i(980224),d=i(420092),u=i(345276),p=i(603314),_=i(540266),g=i(375654),h=i(554814),m=i(882458),v=i(804728),f=i(372870),y=i(238621);let w={id:r.D,load:()=>Promise.all([i.e("1428"),i.e("2304"),i.e("149"),i.e("2133"),i.e("2904"),i.e("7503"),i.e("5412")]).then(i.bind(i,560755))},b={id:n.DQ,load:()=>Promise.all([i.e("1428"),i.e("2304"),i.e("149"),i.e("2133"),i.e("2904"),i.e("7503"),i.e("5412")]).then(i.bind(i,274024))},S={id:o.D,load:()=>Promise.all([i.e("1428"),i.e("2304"),i.e("149"),i.e("2133"),i.e("2904"),i.e("7503"),i.e("5412")]).then(i.bind(i,719913))},C={id:a.D,load:()=>Promise.all([i.e("1428"),i.e("2304"),i.e("149"),i.e("2133"),i.e("2904"),i.e("7503"),i.e("5412")]).then(i.bind(i,224162))},k={id:s.DQ,load:()=>Promise.all([i.e("1428"),i.e("2304"),i.e("149"),i.e("2133"),i.e("2904"),i.e("7503"),i.e("5412")]).then(i.bind(i,864392))},E={id:l.D,load:()=>Promise.all([i.e("1428"),i.e("2304"),i.e("149"),i.e("2133"),i.e("2904"),i.e("7503"),i.e("5412")]).then(i.bind(i,773611))},I={id:c.D,load:()=>Promise.all([i.e("1428"),i.e("2304"),i.e("149"),i.e("2133"),i.e("2904"),i.e("7503"),i.e("5412")]).then(i.bind(i,242436))},P={id:d.DQ,load:()=>i.e("6453").then(i.bind(i,408530))},A={id:u.DQ,load:()=>Promise.all([i.e("1818"),i.e("2021"),i.e("5699"),i.e("3720"),i.e("417")]).then(i.bind(i,545541))},R={id:p.D,load:()=>i.e("3249").then(i.bind(i,346838))},x={id:_.DQ,load:()=>Promise.all([i.e("1818"),i.e("8407"),i.e("9957"),i.e("8424"),i.e("149"),i.e("5699"),i.e("5642"),i.e("1950"),i.e("9797"),i.e("6440"),i.e("9403"),i.e("113"),i.e("1586"),i.e("3720"),i.e("3331"),i.e("561"),i.e("4755"),i.e("8681"),i.e("2893"),i.e("9035"),i.e("5467"),i.e("7438"),i.e("932"),i.e("4170"),i.e("2068"),i.e("6695"),i.e("9291"),i.e("6425"),i.e("9294"),i.e("876"),i.e("3944"),i.e("9882"),i.e("948"),i.e("3807"),i.e("6653"),i.e("3507"),i.e("7458"),i.e("3776"),i.e("7834"),i.e("6525")]).then(i.bind(i,688778))},N={id:g.D,load:()=>i.e("2712").then(i.bind(i,801872))},L={id:h.DQ,load:()=>Promise.all([i.e("1818"),i.e("8407"),i.e("9957"),i.e("8424"),i.e("149"),i.e("5699"),i.e("5642"),i.e("1950"),i.e("9797"),i.e("6440"),i.e("9403"),i.e("113"),i.e("1586"),i.e("3720"),i.e("3331"),i.e("561"),i.e("4755"),i.e("8681"),i.e("2893"),i.e("9035"),i.e("5467"),i.e("7438"),i.e("932"),i.e("4170"),i.e("2068"),i.e("6695"),i.e("9291"),i.e("6425"),i.e("9294"),i.e("876"),i.e("3944"),i.e("9882"),i.e("948"),i.e("3807"),i.e("6653"),i.e("3507"),i.e("7458"),i.e("3776"),i.e("7834"),i.e("6525")]).then(i.bind(i,402171))},O={id:m.D,load:()=>Promise.all([i.e("4493"),i.e("1818"),i.e("9957"),i.e("3072"),i.e("5581"),i.e("3838"),i.e("5699"),i.e("5642"),i.e("1950"),i.e("6440"),i.e("113"),i.e("1586"),i.e("3720"),i.e("3331"),i.e("561"),i.e("4755"),i.e("8681"),i.e("2893"),i.e("9035"),i.e("5467"),i.e("7438"),i.e("932"),i.e("4170"),i.e("2068"),i.e("6695"),i.e("9291"),i.e("6425"),i.e("9294"),i.e("876"),i.e("3944"),i.e("9882"),i.e("948"),i.e("3807"),i.e("6653"),i.e("3507"),i.e("7458"),i.e("3776"),i.e("8381"),i.e("8336")]).then(i.bind(i,1449))},M={id:v.DQ,load:()=>Promise.all([i.e("4493"),i.e("9253"),i.e("3838"),i.e("7834"),i.e("652")]).then(i.bind(i,839787))},D={id:f.D,load:()=>Promise.all([i.e("2514"),i.e("5642"),i.e("544")]).then(i.bind(i,14135))},j={id:y.DQ,load:()=>i.e("1456").then(i.bind(i,602591))}},326029:function(e,t,i){"use strict";i.d(t,{J_:function(){return eo},KL:function(){return X},KY:function(){return J},R$:function(){return V},SB:function(){return en},YD:function(){return G},Z:function(){return M},a5:function(){return j},al:function(){return H},cX:function(){return Q},d$:function(){return q},dg:function(){return er},dy:function(){return F},e:function(){return O},fX:function(){return D},fw:function(){return Z},h9:function(){return ee},hZ:function(){return Y},kX:function(){return B},lr:function(){return z},mb:function(){return $},pr:function(){return et},q0:function(){return U},q7:function(){return W},qF:function(){return L},rq:function(){return K},yT:function(){return ei},zs:function(){return N}});var r=i(532843),n=i(388285),o=i(97920),a=i(217626),s=i(764048),l=i(709479),c=i(689342),d=i(76031),u=i(438506),p=i(583897),_=i(70858),g=i(498614),h=i(996788),m=i(443981),v=i(236843),f=i(870375),y=i(471202),w=i(12066),b=i(989994),S=i(851621),C=i(170087),k=i(67323),E=i(685772),I=i(767732),P=i(929303),A=i(877943),R=i(734412),x=i(951853);let N={id:r.DQ,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("1704"),i.e("8396"),i.e("149"),i.e("2133"),i.e("3838"),i.e("1678"),i.e("2731"),i.e("9572"),i.e("6457"),i.e("2904"),i.e("1980"),i.e("7503"),i.e("8971")]).then(i.bind(i,976370))},L={id:n.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("3712"),i.e("4992"),i.e("4632"),i.e("1258"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("1678"),i.e("304"),i.e("3068"),i.e("1222"),i.e("3959"),i.e("3534"),i.e("1711"),i.e("4354"),i.e("4876"),i.e("7823"),i.e("6608")]).then(i.bind(i,40939))},O={id:o.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("3712"),i.e("4992"),i.e("4632"),i.e("1258"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("1678"),i.e("304"),i.e("3068"),i.e("1222"),i.e("3959"),i.e("3534"),i.e("1711"),i.e("4354"),i.e("4876"),i.e("7823"),i.e("6608")]).then(i.bind(i,587321))},M={id:a.DQ,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("3712"),i.e("4992"),i.e("4632"),i.e("1258"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("1678"),i.e("304"),i.e("3068"),i.e("1222"),i.e("3959"),i.e("3534"),i.e("1711"),i.e("4354"),i.e("4876"),i.e("7823"),i.e("6608")]).then(i.bind(i,807961))},D={id:s.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("3712"),i.e("4992"),i.e("4632"),i.e("1258"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("1678"),i.e("304"),i.e("3068"),i.e("1222"),i.e("3959"),i.e("3534"),i.e("1711"),i.e("4354"),i.e("4876"),i.e("7823"),i.e("6608")]).then(i.bind(i,680632))},j={id:l.DQ,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("3712"),i.e("4992"),i.e("4632"),i.e("1258"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("1678"),i.e("304"),i.e("3068"),i.e("1222"),i.e("3959"),i.e("3534"),i.e("1711"),i.e("4354"),i.e("4876"),i.e("7823"),i.e("6608")]).then(i.bind(i,166627))},F={id:c.DQ,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("3712"),i.e("4992"),i.e("4632"),i.e("1258"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("1678"),i.e("304"),i.e("3068"),i.e("1222"),i.e("3959"),i.e("3534"),i.e("1711"),i.e("4354"),i.e("4876"),i.e("7823"),i.e("6608")]).then(i.bind(i,204067))},U={id:d.D,load:()=>Promise.all([i.e("1428"),i.e("5706"),i.e("149"),i.e("2133"),i.e("1678"),i.e("2731"),i.e("9687")]).then(i.bind(i,10810))},B={id:u.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4992"),i.e("149"),i.e("2133"),i.e("3838"),i.e("1222"),i.e("3448")]).then(i.bind(i,370896))},H={id:p.D,load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("2665")]).then(i.bind(i,153512))},G={id:_.D,load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("1678"),i.e("7469")]).then(i.bind(i,137826))},W={id:g.D,load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("2070")]).then(i.bind(i,31140))},V={id:h.DQ,load:()=>Promise.all([i.e("1428"),i.e("3712"),i.e("7435"),i.e("7379"),i.e("149"),i.e("2133"),i.e("8685"),i.e("1678"),i.e("2731"),i.e("9572"),i.e("261"),i.e("9977"),i.e("1433")]).then(i.bind(i,516274))},Z={id:m.DQ,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4992"),i.e("5542"),i.e("149"),i.e("2133"),i.e("3838"),i.e("185"),i.e("304"),i.e("3068"),i.e("1222"),i.e("261"),i.e("6310"),i.e("3275")]).then(i.bind(i,682390))},z={id:v.DQ,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4992"),i.e("5542"),i.e("149"),i.e("2133"),i.e("3838"),i.e("185"),i.e("304"),i.e("3068"),i.e("1222"),i.e("261"),i.e("6310"),i.e("3275")]).then(i.bind(i,630074))},$={id:f.DQ,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4992"),i.e("5542"),i.e("149"),i.e("2133"),i.e("3838"),i.e("185"),i.e("304"),i.e("3068"),i.e("1222"),i.e("261"),i.e("6310"),i.e("3275")]).then(i.bind(i,936887))},K={id:y.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4992"),i.e("5542"),i.e("149"),i.e("2133"),i.e("3838"),i.e("185"),i.e("304"),i.e("3068"),i.e("1222"),i.e("261"),i.e("6310"),i.e("3275")]).then(i.bind(i,766042))},q={id:w.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4992"),i.e("7435"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("1678"),i.e("1222"),i.e("2731"),i.e("9572"),i.e("261"),i.e("9977"),i.e("9791")]).then(i.bind(i,982625))},Y={id:b.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4992"),i.e("7435"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("1678"),i.e("1222"),i.e("2731"),i.e("9572"),i.e("261"),i.e("9977"),i.e("9791")]).then(i.bind(i,355782))},J={id:S.D,load:()=>Promise.all([i.e("1428"),i.e("8774"),i.e("149"),i.e("2133"),i.e("1678"),i.e("3534"),i.e("9846"),i.e("4876"),i.e("8605")]).then(i.bind(i,606325))},Q={id:C.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4632"),i.e("149"),i.e("2133"),i.e("3838"),i.e("1678"),i.e("304"),i.e("3068"),i.e("1711"),i.e("4391")]).then(i.bind(i,845639))},X={id:k.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("4632"),i.e("149"),i.e("2133"),i.e("3838"),i.e("1678"),i.e("304"),i.e("3068"),i.e("1711"),i.e("4391")]).then(i.bind(i,612113))},ee={id:E.D,load:()=>Promise.all([i.e("1428"),i.e("149"),i.e("2133"),i.e("1678"),i.e("3534"),i.e("8608")]).then(i.bind(i,345291))},et={id:I.D,load:()=>Promise.all([i.e("8990"),i.e("7823"),i.e("5161")]).then(i.bind(i,460972))},ei={id:P.D,load:()=>Promise.all([i.e("5717"),i.e("772")]).then(i.bind(i,390184))},er={id:A.D,load:()=>Promise.all([i.e("5717"),i.e("4742")]).then(i.bind(i,354123))},en={id:R.DQ,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("3712"),i.e("3365"),i.e("1636"),i.e("149"),i.e("2133"),i.e("3838"),i.e("8685"),i.e("3412"),i.e("3068"),i.e("6310"),i.e("7312")]).then(i.bind(i,156396))},eo={id:x.D,load:()=>Promise.all([i.e("1428"),i.e("4493"),i.e("1704"),i.e("149"),i.e("2133"),i.e("3838"),i.e("1678"),i.e("1980"),i.e("7460")]).then(i.bind(i,227930))}},753696:function(e,t,i){"use strict";i.d(t,{B:function(){return a},U:function(){return o}});var r,n=i(938918);var o=((r={})[r.High=1e3]="High",r[r.Middle=100]="Middle",r[r.Low=10]="Low",r);let a=[n.f.Started,n.f.WorkbenchLoaded,n.f.DraftLoaded,n.f.Restored,n.f.Completed]},437513:function(e,t,i){"use strict";i.d(t,{n:function(){return c}});var r=i(789786),n=i(230982),o=i(55449),a=i(861810),s=i(160391);class l{get loaded(){return this._service.loaded}getInstance(){return this._service.getInstance()}preload(){this._service.preload()}constructor(e,t=[],i,r){this._instantiationService=i,this._service=this._instantiationService.createInstance(e,...t),r.onRestored(()=>(0,n.n)(()=>this._service.preload()))}}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new a.M(l,[e,t])}l=(0,r.gn)([(0,r.fM)(2,o.T),(0,r.fM)(3,s.g),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Function,Array,void 0===o.T?Object:o.T,void 0===s.g?Object:s.g])],l)},255623:function(e,t,i){"use strict";i.d(t,{c:function(){return n}});var r=i(896413);function n(e){return e.invokeFunction(e=>e.get(r.a))}},803003:function(e,t,i){"use strict";i.d(t,{M:function(){return a}});var r=i(789786),n=i(768362),o=i(687869);class a extends o.g{run(e,t,i){let r=t.preloadDraftResources(i,{shouldMeasure:!0});return r.then(e=>{if(!e)return}),r}constructor(...e){super(...e),this.taskName="PRELOAD_DRAFT_RESOURCES"}}(0,r.gn)([(0,n.lI)("task","preloadDraftResources"),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IPreloadManager?Object:IPreloadManager,"undefined"==typeof Promise?Object:Promise]),(0,r.w6)("design:returntype",void 0)],a.prototype,"run",null)},564676:function(e,t,i){"use strict";i.d(t,{E:function(){return p}});var r=i(789786),n=i(768362),o=i(690613),a=i(937567),s=i(425427),l=i(165625),c=i(687869),d=i(974904);let{GET_PACKAGE_INFO:u}=a;class p extends c.g{async run(e,t,i,r){var n,a;let c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5?arguments[5]:void 0,u=await i.preloadPackageData(e,c,r,d),[p,_]=u.pair();if(p){let e=e=>Error(e,{cause:`${u.code}-${u.msg}`});if(u.code<0)return(0,o.Mx)(l.IC.NetworkError,"package info network error",e("package info network error"));if("202202"===u.msg)throw(0,o.Mx)(l.IC.InvalidLink,"draft id mismatch",e("draft id mismatch"));return"202203"===u.msg?(0,o.Mx)(l.IC.PasswordAuthenticateFailed,"password authenticate failed",Error("password authenticate failed")):"202204"===u.msg?(0,o.Mx)(l.IC.CaptchaAuthenticateFailed,"captcha authenticate failed",Error("captcha authenticate failed"),u.errorInfo):"202205"===u.msg?(0,o.Mx)(l.IC.MachineAuthenticateFailed,"machine authenticate failed",Error("machine authenticate failed")):"202206"===u.msg?(0,o.Mx)(l.IC.PeopleAuthenticateFailed,"people authenticate failed",Error("people authenticate failed")):"202207"===u.msg?(0,o.Mx)(l.IC.NoPermission,"no permission",Error("no permission")):"202208"===u.msg?(0,o.Mx)(l.IC.EmailAuthenticateFailed,"email authenticate failed",Error("email authenticate failed")):"202209"===u.msg?(0,o.Mx)(l.IC.InMachineReview,"in machine review",Error("in machine review")):"202210"===u.msg?(0,o.Mx)(l.IC.InPeopleReview,"in people review",Error("in people review")):"202201"===u.msg?(0,o.Mx)(l.IC.InvalidLink,"get draft error",e("get draft error")):"1015"===u.msg?(0,o.Mx)(l.IC.NotLogin,"get package info not login",Error("get package info not login")):(0,o.Mx)(l.IC.Unknown,"package info unknown error",e("package info unknown error"))}let g=t.invokeFunction(e=>{let{isFromThirdPartPlatform:t}=e.get(s.rO);return t}),h=null==_?void 0:null===(a=_.meta)||void 0===a?void 0:null===(n=a.uploadSource)||void 0===n?void 0:n.platform;if(!g&&"browser"!==h)throw(0,o.Mx)(l.IC.DraftNotFromBrowser,"draft is not made from browser",Error("draft is not made from browser"));return u}constructor(...e){super(...e),this.taskName=u}}(0,r.gn)([d.V,(0,n.lI)("task","preloadPackageData"),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IInstantiationService?Object:IInstantiationService,"undefined"==typeof IPreloadManager?Object:IPreloadManager,String,Boolean,Object]),(0,r.w6)("design:returntype",Promise)],p.prototype,"run",null)},915065:function(e,t,i){"use strict";i.d(t,{m:()=>ie});var r=i("861810"),n=i("948328"),o=i("136734"),a=i("8462"),s=i("639605"),l=i("354309"),c=i("372853"),d=i("757483"),u=i("795772"),p=i("654259"),_=i("317832"),g=i("437354"),h=i("865632"),m=i("577397"),v=i("838180"),f=i("851832"),y=i("782153"),w=i("744628"),b=i("437612"),S=i("974116"),C=i("108692"),k=i("990654"),E=i("12387"),I=i("359670"),P=i("896413"),A=i("74183"),R=i("314181"),x=i("692848"),N=i("624515"),L=i("333686"),O=i("484829"),M=i("294411"),D=i("46808"),j=i("58822"),F=i("795612"),U=i("202159"),B=i("827404"),H=i("599639"),G=i("993097"),W=i("457597"),V=i("584654"),Z=i("65458"),z=i("451960"),$=i("519700"),K=i("561909"),q=i("233828"),Y=i("919914"),J=i("319708"),Q=i("87927"),X=i("15755"),ee=i("196769"),et=i("756192"),ei=i("906136"),er=i("18784"),en=i("609591"),eo=i("396570"),ea=i("210360"),es=i("57775"),el=i("180773"),ec=i("442758"),ed=i("825686"),eu=i("242785"),ep=i("45942"),e_=i("606527"),eg=i("20498"),eh=i("781548"),em=i("483221"),ev=i("745860"),ef=i("252789"),ey=i("5026"),ew=i("847382"),eb=i("807664"),eS=i("804321"),eC=i("548636"),ek=i("677779"),eE=i("326236"),eI=i("317723"),eT=i("651894"),eP=i("788695"),eA=i("545797"),eR=i("887186"),ex=i("520313"),eN=i("464062"),eL=i("145324"),eO=i("846738"),eM=i("317550"),eD=i("144760"),ej=i("110608"),eF=i("810005"),eU=i("198104"),eB=i("177146"),eH=i("287462"),eG=i("176047"),eW=i("892292"),eV=i("462932"),eZ=i("978112"),ez=i("550624"),e$=i("698533"),eK=i("711652"),eq=i("390129"),eY=i("806337"),eJ=i("131829"),eQ=i("857116"),eX=i("235297"),e0=i("63276"),e1=i("755358"),e2=i("784994"),e6=i("845523"),e3=i("796450"),e4=i("852968"),e5=i("121761"),e8=i("993971"),e7=i("884192"),e9=i("377680"),te=i("872962"),tt=i("251266"),ti=i("234763"),tr=i("910408"),tn=i("26713"),to=i("699338"),ta=i("503125"),ts=i("176151"),tl=i("655499"),tc=i("263539"),td=i("738253"),tu=i("317419"),tp=i("444036"),t_=i("643625"),tg=i("74677"),th=i("59315"),tm=i("74493"),tv=i("313164"),tf=i("416549"),ty=i("653890"),tw=i("425402"),tb=i("593853"),tS=i("93476"),tC=i("303079"),tk=i("131169"),tE=i("960395"),tI=i("549069"),tT=i("572029"),tP=i("283452"),tA=i("214291"),tR=i("437201"),tx=i("445449"),tN=i("177318"),tL=i("323516"),tO=i("70356"),tM=i("433140"),tD=i("483268"),tj=i("430687"),tF=i("474955"),tU=i("401846"),tB=i("789786"),tH=i("55449"),tG=i("531778"),tW=i("230982"),tV=i("402655");class tZ extends tV.JT{register(e,t){if(e.instantiationPhase===tG.P.Eager&&(this._safeCreate(e),null==t||t(this._instances.get(e.id))),e.instantiationPhase===tG.P.Idle){let i=(0,tW.n)(()=>{this._safeCreate(e),this._pending.delete(e.id),null==t||t(this._instances.get(e.id))});this._pending.set(e.id,i)}}registerInstance(e,t){if(this._instances.has(e)){console.error("duplicate register contribution: ",e);return}this._instances.set(e,t)}dispose(){for(let[,e]of this._instances)e.dispose();for(let[,e]of this._pending)e.dispose();super.dispose()}_safeCreate(e){var t;if(this._instances.has(e.id)){console.error("duplicate register contribution: ",e.id);return}let i=null!==(t=e.staticArguments)&&void 0!==t?t:[];this._createInstance(e,i)}_createInstance(e,t){let i=this._instantiationService.createInstance(e.ctor,...t);this._instances.set(e.id,i)}constructor(e){super(),this._instantiationService=e,this._instances=new Map,this._pending=new Map}}tZ=(0,tB.gn)([(0,tB.fM)(0,tH.T),(0,tB.w6)("design:type",Function),(0,tB.w6)("design:paramtypes",[void 0===tH.T?Object:tH.T])],tZ);var tz=i("437513"),t$=i("968595"),tK=i("690613"),tq=i("800788"),tY=i("230689"),tJ=i("200247"),tQ=i("569471"),tX=i("587892"),t0=i("849002");class t1{getBenefitInfoSync(e){var t;let{data:i}=null!==(t=this._getBenefitByTuple(e))&&void 0!==t?t:{};return i?(0,tK.oW)(i):(0,tK.wf)(-1,"getBenefitInfo failed")}async batchUpdateBenefitInfo(e){var t,i,r;let n=e.reduce((e,t)=>{let{resourceId:i,resourceType:r,benefitType:n}=t,o=e.find(e=>{let{resourceId:i,resourceType:r}=e;return i===t.resourceId&&r===t.resourceType});return o?(n&&o.benefitTypeList.push(n),e):e.concat([{resourceId:i,resourceType:r,benefitTypeList:n?[n]:[]}])},[]),o=await this._commercialDataService.getBenefitMetadata({queryList:n});if(!o.ok)return;let{metadataList:a}=o.value.data,s=null!==(t=this._convertMetadataListToBenefitDataList(a))&&void 0!==t?t:[];if(this._accountService.hasLogin){let e=await this._commercialDataService.batchGetUserBenefitV3({queryList:n});if(!e.ok)return;this._benefitDetailCache=e.value.data}for(let e of s){let t=null===(r=this._benefitDetailCache)||void 0===r?void 0:null===(i=r.assetList)||void 0===i?void 0:i.find(t=>{let{resourceId:i,resourceType:r}=t;return i===e.benefit.resourceId&&r===e.benefit.resourceType});if(e.quotaAll=null==t?void 0:t.quotaAll,e.quotaLeft=null==t?void 0:t.quotaLeft,this._benefitInfoMap.has(this._getKey(e.benefit))){let t=this._benefitInfoMap.get(this._getKey(e.benefit));t&&(t.data=e,this._benefitChangeEventEmitter.fire(e))}}}updateAllBenefitInfo(){return this.batchUpdateBenefitInfo(this._registry.flatMap(e=>{let{resourceId:t,resourceType:i,benefitTypeList:r}=e;return 0===r.length?[{resourceId:t,resourceType:i,benefitType:null}]:r.map(e=>({resourceId:t,resourceType:i,benefitType:e}))}))}async _bootstrap(){let e=await this._fetchAllBenefitInfoFromServer();!e.ok&&(0,tq.ss)("[BenefitStoreService] fetch benefit info from server failed");let t=await this._fetchAllBenefitDetailFromServer(),{metadataList:i}=e.value.data,r=this._convertMetadataListToBenefitDataList(i);for(let e of(t.ok&&(this._benefitDetailCache=t.value.data),r)){var n,o;let t=null===(o=this._benefitDetailCache)||void 0===o?void 0:null===(n=o.assetList)||void 0===n?void 0:n.find(t=>{let{resourceId:i,resourceType:r}=t;return i===e.benefit.resourceId&&r===e.benefit.resourceType});this._benefitInfoMap.set(this._getKey(e.benefit),{data:{...e,quotaAll:null==t?void 0:t.quotaAll,quotaLeft:null==t?void 0:t.quotaLeft}})}this._initBarrier.open()}_compareStrategy(e,t){let{priority:i}=e,{priority:r}=t;return i-r}_convertMetadataListToBenefitDataList(e){return e.flatMap(e=>{let{resourceId:t,resourceType:i,benefitsPayStrategy:r}=e,n=null;return r.map(e=>{let r=[];return e.oneoffStrategy&&r.push({key:"one-off",data:e.oneoffStrategy}),e.creditStrategy&&r.push({key:"credit",data:e.creditStrategy}),e.subscribeStrategy&&r.push({key:"subscribe",data:e.subscribeStrategy}),e.limitfreeStrategy&&(n={key:"limit-free",data:e.limitfreeStrategy},r.push(n)),r.sort((e,t)=>this._compareStrategy(e.data,t.data)),{benefit:{resourceId:t,resourceType:i,benefitType:e.benefitType},useMode:e.useMode,availableStrategy:null!=n?n:r[0],sortedStrategies:r}})})}_fetchAllBenefitInfoFromServer(){return this._commercialDataService.getBenefitMetadata({queryList:(0,tQ.I)(this._registry)})}_fetchAllBenefitDetailFromServer(){return this._commercialDataService.batchGetUserBenefitV3({queryList:(0,tQ.I)(this._registry)})}_getKey(e){return`${e.benefitType}-${e.resourceId}-${e.resourceType}`}_getBenefitByTuple(e){return this._benefitInfoMap.get(this._getKey(e))}constructor(e,t,i){this._registry=e,this._commercialDataService=t,this._accountService=i,this._initBarrier=new t0.U,this._benefitDetailCache=null,this._benefitChangeEventEmitter=new tX.Q,this._benefitInfoMap=new Map,this.getBenefitChangeEvent=e=>{let t=new tX.Q;return this._benefitChangeEventEmitter.event(i=>{i.benefit.resourceId===e.resourceId&&i.benefit.resourceType===e.resourceType&&i.benefit.benefitType===e.benefitType&&t.fire()}),t.event},this.getBenefitInfo=async e=>{var t;!this._initBarrier.isOpen()&&await this._initBarrier.wait();let{data:i}=null!==(t=this._getBenefitByTuple(e))&&void 0!==t?t:{};return i?(0,tK.oW)(i):(0,tK.wf)(-1,"getBenefitInfo failed")},this._bootstrap()}}t1=(0,tB.gn)([(0,tB.fM)(1,ty.h),(0,tB.fM)(2,tJ.D),(0,tB.w6)("design:type",Function),(0,tB.w6)("design:paramtypes",["undefined"==typeof IBenefitRegistry?Object:IBenefitRegistry,void 0===ty.h?Object:ty.h,void 0===tJ.D?Object:tJ.D])],t1);var t2=i("171579");class t6 extends tV.JT{getBenefitChangeEvent(e){return this._benefitStoreService.getBenefitChangeEvent(e)}async getBenefitInfo(e){let t=await this._benefitStoreService.getBenefitInfo(e);return t.ok?(0,tK.oW)((0,t2.A)(t.value,this._getRole())):t}getBenefitInfoSync(e){let t=this._benefitStoreService.getBenefitInfoSync(e);return t.ok?(0,tK.oW)((0,t2.A)(t.value,this._getRole())):t}async preUseBenefitCheck(e){var t;let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];i||await this._benefitStoreService.batchUpdateBenefitInfo([e]);let r=this._benefitStoreService.getBenefitInfoSync(e);if(!r.ok)return!0;let{availableStrategy:n,quotaLeft:o,useMode:a}=r.value;if("use"!==a)return!0;let s=null===(t=this._accountService.userVipInfo)||void 0===t?void 0:t.flag;if(!n)return!0;if("subscribe"===n.key){let e=n.data.subscribeLimits.find(e=>"all"===e.role||(s?"vip"===e.role:"free"===e.role));return(null==e?void 0:e.validCycle)===2||!!o&&(!!(o>0)||-1===o)||!1}if("limit-free"===n.key)return!!o&&(!!(o>0)||-1===o)||!1;(0,tq.ss)("[BenefitService] invalid strategy")}async updateAllBenefitInfo(){await this._benefitStoreService.updateAllBenefitInfo()}async batchUpdateBenefitInfo(e){await this._benefitStoreService.batchUpdateBenefitInfo(e)}_bootstrap(){this._store.add(this._accountService.onDidLogin(()=>{this._benefitStoreService.updateAllBenefitInfo()})),this._store.add(this._accountService.onDidLogout(()=>{this._benefitStoreService.updateAllBenefitInfo()})),this._store.add(this._accountService.onDidChangeVipInfo(()=>{this._benefitStoreService.updateAllBenefitInfo()})),this._store.add(this._accountService.onDidChangeProfile(()=>{this._benefitStoreService.updateAllBenefitInfo()}))}_getRole(){var e;return(null===(e=this._accountService.userVipInfo)||void 0===e?void 0:e.flag)?"vip":"free"}constructor(e,t,i){super(),this._registry=e,this._accountService=t,this._containerService=i,this._benefitStoreService=this._containerService.createInstance(new r.M(t1,[this._registry],!1)),this._bootstrap()}}t6=(0,tB.gn)([(0,tB.fM)(1,tJ.D),(0,tB.fM)(2,tY.t),(0,tB.w6)("design:type",Function),(0,tB.w6)("design:paramtypes",["undefined"==typeof IBenefitRegistry?Object:IBenefitRegistry,void 0===tJ.D?Object:tJ.D,void 0===tY.t?Object:tY.t])],t6);var t3=i("255034"),t4=i("107469"),t5=i("425549");class t8 extends tV.JT{get subscriptionContext(){return this._subscriptionContext}updateSubscriptionContext(e){this._subscriptionContext=e,this._onDidChangeSubscriptionContextEmitter.fire(e)}async _bootstrap(){let e=await this._getContext();!e&&(0,tq.ss)("expect getCommercialContext return a valid commercial context"),this.updateSubscriptionContext(e),this._register(this._onDidChangeUserInfo(async()=>{this.updateSubscriptionContext(await this._getContext())}))}constructor(e){super(),this._containerService=e,this._onDidChangeSubscriptionContextEmitter=new tX.Q,this.onDidChangeSubscriptionContext=this._onDidChangeSubscriptionContextEmitter.event,this._subscriptionContext=null,this._bootstrap()}}t8=(0,tB.gn)([(0,tB.fM)(0,tY.t),(0,tB.w6)("design:type",Function),(0,tB.w6)("design:paramtypes",[void 0===tY.t?Object:tY.t])],t8);class t7 extends t8{_initListener(){this._accountService.onDidChangeVipInfo(()=>this._onDidChangeUserInfoEmitter.fire()),this._accountService.onDidLogin(()=>this._onDidChangeUserInfoEmitter.fire()),this._accountService.onDidLogout(()=>this._onDidChangeUserInfoEmitter.fire())}async _getContext(){var e,t;let i=await t4._c.isAllow({scene:t4.SA.common}),r=await t4._c.isAllow({scene:t4.SA.enableSVip}),n=(null===(e=this._accountService.userVipInfo)||void 0===e?void 0:e.curVipLevel)==="vip"?"pro":null===(t=this._accountService.userVipInfo)||void 0===t?void 0:t.curVipLevel;return{enableVip:i,enableSVip:r,isVip:(0,t5.en)(this._accountService.userVipInfo),currentVipLevel:n}}get _onDidChangeUserInfo(){return this._onDidChangeUserInfoEmitter.event}constructor(e,t){super(t),this._accountService=e,this._containerService=t,this._onDidChangeUserInfoEmitter=new tX.Q,this._initListener()}}t7=(0,tB.gn)([(0,tB.fM)(0,tJ.D),(0,tB.fM)(1,tY.t),(0,tB.w6)("design:type",Function),(0,tB.w6)("design:paramtypes",[void 0===tJ.D?Object:tJ.D,void 0===tY.t?Object:tY.t])],t7);var t9=i("341850");function ie(e,t,i,tB,tH){var tG,tW,tV,tK,tq,tY,tJ,tQ,tX,t0,t1,t2,t4,t5;e.register(tU.Q,tZ),e.register(y.u,new r.M(w.A,[tH],!1)),e.register(b.F,S.X),e.register(C.n,k.b),e.register(E.o,I.k),e.register(P.a,new r.M(A.w,[i,tB],!1)),e.register(en.i,eo.v),e.register(ea.T,es.z),e.register(el.j,ec.b),e.register(n.D,o.e),e.register(e_._,eg.s),e.register(R.AA,x.T),e.register(N.O,L._),e.register(O.BA,M.m),e.register(a.x,D.O),e.register(j.T,F.Q),e.register(eh._,em.g),e.register(ev.p,ef.X),e.register(ey.s,ew.Q),e.register(eb.N,eS.K),e.register(eC.d,ek.Q),e.register(eE.Z,eI.J),e.register(eT.h,eP.G),e.register(eA.ty,eR.c),e.register(ex.TW,eN.G),e.register(eT.h,eP.G),e.register(eL.I,eO.r),e.register(eM._,eD.b),e.register(ej.H,new r.M(eF.q,[null!==(tX=null===(tG=t.heycanDataService)||void 0===tG?void 0:tG.params)&&void 0!==tX?tX:{}],!1)),e.register(eU.n,eB.S),e.register(eH.m,eG.h),e.register(eW.c,new r.M(eV.N,[null!==(t0=null===(tW=t.collectionService)||void 0===tW?void 0:tW.params)&&void 0!==t0?t0:{}],!1)),e.register(eZ.A,ez.E),e.register(e$.r,eK.e),e.register(eq.m,new r.M(eY.l,[{}],!1)),e.register(eJ.k,eQ.Z),e.register(eX.o,e0.R),e.register(e1.z,e2.f),e.register(e6.T,new r.M(e3.X,[null!==(t1=null===(tV=t.toneDataService)||void 0===tV?void 0:tV.params)&&void 0!==t1?t1:{}],!1)),e.register(e4.X,new r.M(e5.i,[null!==(t2=null===(tK=t.autoBeautyDataService)||void 0===tK?void 0:tK.params)&&void 0!==t2?t2:{}],!1)),e.register(e8.j,e7.b),e.register(e9.I,te.C),e.register(tt.gt,ti.r),e.register(tr.m,tn.Z),e.register(to.Y,ta.b),e.register(s.J0,l.i),e.register(ts.s,tl.L),e.register(tc.E,td.T),e.register(tu.s,new r.M(tp.f,[null!==(t4=null===(tq=t.collectionService)||void 0===tq?void 0:tq.params)&&void 0!==t4?t4:{}],!1)),e.register(eH.m,eG.h),e.register(t_.V,tg.S),e.register(th.m,tm.b),e.register(tv.D,tf.w),e.register(ty.h,new r.M(tw.D,[],!1)),e.register(tb.D,tS.Q),e.register(tC.G,tk.v),e.register(tE.q,tI.P),e.register(tT.X,tP.g),e.register(tA.iM,tR.K),e.register(tx.E,tN.t),e.register(U.v,B.G),e.register(tL.g,tO.E),e.register(H.m,G.g),e.register(W.K,new r.M(V.r,[null===(tY=t.toolbarFontService)||void 0===tY?void 0:tY.params.useCommercial],!1)),e.register(Z.dM,z.H),e.register(ed.sX,$.L),e.register(K.l,q.n),e.register(Y.o,J.R),e.register(Q.U,X.D),e.register(tM.c,tD.z),e.register(eu.r,(0,tz.n)(ep.T)),e.register(c.bv,d.R),e.register(tj.u,new r.M(tF.E,[null===(tJ=t.collectionService)||void 0===tJ?void 0:tJ.params],!1)),e.register(u.C,p.A),e.register(_.V,new r.M(g.O,[{payinPayoutHelper:ee.o}],!1)),e.register(h.b,m.Y),e.register(v.E,new r.M(f.p,[{DraftEditorAdapterConstructor:et.X,payinPayoutHelperConstructor:ee.o}],!1)),e.register(ei.B,er.G),e.register(t$.$,new r.M(t6,[null!==(t5=null===(tQ=t.benefitService)||void 0===tQ?void 0:tQ.params.benefitRegistry)&&void 0!==t5?t5:[]],!1)),e.register(t3.v,new r.M(t7,[],!1)),e.register(t9.k,t9.id)}},909319:function(e,t,i){"use strict";i.d(t,{v:function(){return a}});var r=i(861810),n=i(797913),o=i(184912);function a(e,t){e.register(n.J,new r.M(o.V,[t],!1))}},535075:function(e,t,i){"use strict";i.d(t,{v:()=>h});var r=i("927788"),n=i("144690"),o=i("662078"),a=i("49299"),s=i("967877"),l=i("7703"),c=i("263757"),d=i("603647"),u=i("660157");let p=async(e,t)=>{let{workspaceId:i,draftId:r,preloadData:n,quickImportRecordMap:o}=t,{syncId:a,template:s,meta:l,resourceInfos:{everCloudResourceList:p}}=n,_=JSON.parse(s),g={};["audios","videos","images"].forEach(e=>{var t,i,r;if(!!(null==_?void 0:null===(i=_.materials)||void 0===i?void 0:null===(t=i[e])||void 0===t?void 0:t.length))(null==_?void 0:null===(r=_.materials)||void 0===r?void 0:r[e]).forEach(e=>{let{path:t}=e;if(t&&o[t]&&o[t].path){let i=o[t];e.path=i.path,g[i.md5]=i.path||""}})});let h={workspaceId:i,packageType:u.$.Video,packageKey:r,basePackageId:null!=a?a:"0",templateData:JSON.stringify(_),templateMeta:JSON.stringify(null!=l?l:{}),isCoverChange:!1,coverImageContent:"",packageAssets:p.filter(e=>!["template.json","cover.jpg"].includes(e.source_path)).map(e=>{let{md5:t,source_path:i,size:r,package_meta:n}=e;return{md5:t,source_path:g[t]||i,size:null!=r?r:0,meta:JSON.stringify(n)}}),deviceId:(0,c.Zw)()};try{return await e.save(h),d.N.success}catch(t){try{return await e.save(h),d.N.success}catch(e){}return d.N.fail}};var _=i("768362");let g=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];console.log("[repair]",...t)},h=(0,_.Tx)("task",async(e,t,i,c,d,u,_)=>{var h,m;let{draftId:v,preloadData:f}=u,{preloadResources:{materials:y}}=f;if(!y)return;let w=Date.now(),b=e=>{g("repair_incomplete_path_step",{...e,duration:Date.now()-w})},S=(0,a.vf)(v),C=localStorage.getItem(S),k={},E=()=>{localStorage.removeItem(S)},I=Object.values(y).find(e=>e.path&&(0,a.LL)(e.path));if(!I){C&&localStorage.removeItem(S);return}if(!C){I&&b({action:"lost_but_no_map"});return}null==_||null===(h=_.setRepairQuickImportFlow)||void 0===h||h.call(_);try{let e=JSON.parse(C);if((0,r.Z)(y,t=>{let{path:i}=t;i&&(0,a.LL)(i)&&(null==e?void 0:e[i])&&(k[i]=e[i])}),(0,n.Z)(k)){b({action:"lost_but_no_valid_map"});return}b({action:"lost_and_have_map",desc:`${Object.entries(k).map(e=>{let[t,i]=e;return`path=${t},asset_id=${i.asset_id}`}).join("__")}`});let t=new Set((0,o.Z)(k,e=>e.md5)),u=null==f?void 0:f.packageAssets.filter(e=>t.has(e.md5)),_=(0,l.f)({containerService:i,workspaceId:c,packageAssets:null!=u?u:[],preloadMaterialFromEvercloud:null!==(m=null==f?void 0:f.resourceInfos.everCloudResourceList)&&void 0!==m?m:[]});if(!_.ok)return;let g=_.value;return await new Promise((e,t)=>{(0,s.p)({reportRepairStep:b,userMaterialLifeCycles:g,incompletePathMap:k,onSuccess:()=>{E(),window.location.reload()},onError:()=>{t()},onCancel:()=>{E(),e()},updateDraft:e=>p(d,{workspaceId:c,draftId:v,preloadData:f,quickImportRecordMap:e})})})}catch(e){b({action:"repair_fail",desc:e.message}),E(),t.maskManager.closeLoginMask();return}},"repairDraftByQuickExport")},205271:function(e,t,i){"use strict";i.d(t,{E:()=>r});let r=new class e{async showModal(e,t){if(!this._modalContainer&&function(){let{searchParams:e}=new URL(window.location.href),t=e.get("__draft_type");return(null==t?void 0:t.startsWith("sample"))?t:""}()){this._zoom=e,this._sideExpandedWidth=t,this._showSampleGuide=!0;let{renderSampleGuide:r}=await i.e("3431").then(i.bind(i,59368));this._modalContainer=r({showSampleGuide:this._showSampleGuide,zoom:this._zoom,sideExpandedWidth:this._sideExpandedWidth}),this._modalContainer.style.display="display"}}closeModal(){this._modalContainer&&(this._showSampleGuide=!1,this._modalContainer.style.display="none"),!function(){let{searchParams:e}=new URL(window.location.href),t=e.get("__draft_type");e.delete("__draft_type"),(null==t?void 0:t.startsWith("sample"))&&window.history.replaceState({},"",`${window.location.pathname}?${e}`)}()}constructor(){this._showSampleGuide=!1,this._zoom=1,this._sideExpandedWidth=0}}},859445:function(e,t,i){"use strict";i.d(t,{o:function(){return o}});var r=i(108692),n=i(425427);function o(e,t){if(!!t)e.invokeFunction(e=>{var i,o,a;let s=e.get(r.n),l=e.get(n.rO);(null==t?void 0:null===(o=t.meta)||void 0===o?void 0:null===(i=o.draft)||void 0===i?void 0:i.id)&&l.draftIdFromUrl&&(t.meta.draft.id=l.draftIdFromUrl),s.cloudMetaManager.setMeta(null!==(a=t.meta)&&void 0!==a?a:{}),s.saveManager.packageId=t.syncId})}},39116:function(e,t,i){"use strict";i.d(t,{P:function(){return c}});var r=i(789786),n=i(937567),o=i(896413),a=i(687869),s=i(974904);let{DOWNLOAD_SEGMENTS_FIRST_FRAME:l}=n;class c extends a.g{async onTaskReallyStart(e,t,i){await i}async run(e,t,i){var r;let[n,a]=(await i).pair();if(n||!a)return;let{firstFrameInfo:s}=a;if(!s)return;let l=t.invokeFunction(e=>e.get(o.a));await l.when(o.U.Eventually),null===(r=s.first_clip_info)||void 0===r||r.forEach(e=>{let{segment_id:t,meta:i}=e;l.renderManager.setMediaInfo(t,i)})}constructor(...e){super(...e),this.taskName=l}}(0,r.gn)([s.V,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",["undefined"==typeof Context?Object:Context,"undefined"==typeof IInstantiationService?Object:IInstantiationService,"undefined"==typeof Promise?Object:Promise]),(0,r.w6)("design:returntype",Promise)],c.prototype,"run",null)},147264:function(e,t,i){"use strict";function r(){let e=window.innerWidth>1440?"268px":"242px";document.documentElement.style.setProperty("--toolbar-panel-width",e),document.documentElement.style.setProperty("--attribute-panel-content-width",e)}i.d(t,{C:function(){return r}})},341850:function(e,t,i){"use strict";i.d(t,{k:()=>_,id:()=>eu,qb:()=>O,KC:()=>G,tz:()=>ed});var r,n,o,a,s,l,c,d,u,p=i("335290");let _=(0,p.yh)("text-to-speech-service");var g=i("789786"),h=i("55449"),m=i("768362"),v=i("386663");let f=(0,p.yh)("smart-task-service");var y=i("402655"),w=i("690613"),b=i("114861"),S=i("702049"),C=i("405051"),k=i("905180"),E=i("121130"),I=i("894339"),P=i("768101");let A="/lv/v2/intelligence/create",R="/lv/v2/intelligence/query";class x{get _createTaskApi(){return`${S._L.getVar("web_domain")}${A}`}get _getTaskDetailApi(){return`${S._L.getVar("web_domain")}${R}`}get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=function(e){let t=new C.yk().build({headers:{"Content-Type":"application/json"}});return(0,k.Y)(t),(0,E.i3)(t),(0,I.mH)(t),!e&&(0,b.V)(t),t}(this._disabledRetry)),this._networkClientInstance}async create(e,t){try{let i=JSON.stringify(e),r=this._cacheTaskReqMap.get(i);!r&&(r=this._networkClient.post(this._createTaskApi,{...e},{withCredentials:!0,params:t}).finally(()=>{this._cacheTaskReqMap.delete(i)}),this._cacheTaskReqMap.set(i,r));let n=await r;return(0,w.oW)(n.data)}catch(t){var i;let e=(0,P.P)(t);return(0,w.wf)(e.code,e.msg,{logId:null!==(i=null==t?void 0:t.log_id)&&void 0!==i?i:""})}}async query(e,t){try{let i=await this._networkClient.post(this._getTaskDetailApi,{...e},{withCredentials:!0,params:t});return(0,w.oW)({status:i.data.status,speed:i.data.speed,taskDetail:i.data.task_detail,draftInfo:i.data.draft_info,estimateTime:i.data.estimate_time,originResourceName:i.data.origin_resource_name,originWorkspaceId:i.data.origin_workspace_id,originSpaceId:i.data.origin_space_id,logId:i.log_id})}catch(t){var i;let e=(0,P.P)(t);return(0,w.wf)(e.code,e.msg,{logId:null!==(i=null==t?void 0:t.log_id)&&void 0!==i?i:""})}}constructor(e){this._cacheTaskReqMap=new Map,this._disabledRetry=e}}var N=((r={})[r.TextToImage=1]="TextToImage",r[r.ImageToImage=2]="ImageToImage",r[r.AvatarStyleCreator=3]="AvatarStyleCreator",r[r.EnhanceNightScene=4]="EnhanceNightScene",r[r.PictureStyleChange=5]="PictureStyleChange",r[r.PictureScale=6]="PictureScale",r[r.PictureIntelligentToning=7]="PictureIntelligentToning",r[r.PictureColoring=8]="PictureColoring",r[r.OldPhotoRestoration=9]="OldPhotoRestoration",r[r.VideoStyleChange=10]="VideoStyleChange",r[r.VideoScale=11]="VideoScale",r[r.VideoSlowMotion=12]="VideoSlowMotion",r[r.VideoStabilization=13]="VideoStabilization",r[r.VideoAutoCut=14]="VideoAutoCut",r[r.TextToVideo=15]="TextToVideo",r[r.TemplateCVTask=16]="TemplateCVTask",r[r.VideoMaskTask=17]="VideoMaskTask",r[r.VideoReverseTask=18]="VideoReverseTask",r[r.VideoIntelligentToning=19]="VideoIntelligentToning",r[r.ImageMaskTask=20]="ImageMaskTask",r[r.VideoClip=21]="VideoClip",r[r.SamiVoiceChange=22]="SamiVoiceChange",r[r.VideoTracking=23]="VideoTracking",r[r.BatchEditor=25]="BatchEditor",r[r.VideoCut=26]="VideoCut",r[r.VideoDenoise=27]="VideoDenoise",r[r.ImageDenoise=28]="ImageDenoise",r[r.VideoDeflicker=29]="VideoDeflicker",r[r.AigcText2Video=30]="AigcText2Video",r[r.VoiceToolTTS=31]="VoiceToolTTS",r[r.VoiceToolTranslator=32]="VoiceToolTranslator",r[r.SamiMusicSourceSeparate=33]="SamiMusicSourceSeparate",r[r.AigcT2VSmartVideo=34]="AigcT2VSmartVideo",r[r.SamiMusicSuperAudio=36]="SamiMusicSuperAudio",r[r.LvObjectLock=37]="LvObjectLock",r[r.TextToSpeech=39]="TextToSpeech",r[r.VoiceChangeV2=40]="VoiceChangeV2",r[r.DigitalHuman=20001]="DigitalHuman",r[r.SmartCrop=20002]="SmartCrop",r[r.Transcript=20003]="Transcript",r);var L=((n={})[n.Failure=-1]="Failure",n[n.Process=0]="Process",n[n.Success=1]="Success",n);var O=((o={})[o.Video=0]="Video",o[o.Image=1]="Image",o[o.Audio=2]="Audio",o[o.Product=4]="Product",o[o.LvVideoMask=5]="LvVideoMask",o[o.LvVideoReverse=6]="LvVideoReverse",o[o.Template=9]="Template",o[o.ImageAsset=10]="ImageAsset",o[o.VideoAsset=11]="VideoAsset",o[o.AudioAsset=12]="AudioAsset",o[o.TTSOriginAsset=31]="TTSOriginAsset",o[o.TTSAudio=32]="TTSAudio",o[o.TTSVideo=33]="TTSVideo",o[o.TTSSNR=34]="TTSSNR",o),M=i("587892"),D=i("197238");var j=((a={})[a.Process=1]="Process",a[a.Success=2]="Success",a[a.Failure=3]="Failure",a[a.TaskNotFound=4]="TaskNotFound",a),F=i("722169");class U extends y.JT{get error(){return this._error}get status(){return this._smartTaskStatus}get value(){return this._result}get taskParams(){return this._taskParams}async _getTaskProgress(){var e,t,i;let r=await this._intelligentRepository.query({task_id:this._taskParams.taskId,workspace_id:this._taskParams.workspaceId,smart_tool_type:this._taskParams.smartToolType},this._taskParams.urlParams),[n,o]=r.pair();if(n)this._getTaskProgressErrorCount++;else{this._getTaskProgressErrorCount=0;let{status:t,speed:i,taskDetail:r,originWorkspaceId:n,originSpaceId:a,originResourceName:s,logId:l}=o;switch(t){case j.Process:this._smartTaskStatus=L.Process;break;case j.Success:this._smartTaskStatus=L.Success;break;default:this._smartTaskStatus=L.Failure}let c=null!==(e=null==r?void 0:r.map(e=>this._convertDetail(e)))&&void 0!==e?e:[];i!==this._progress&&(this._progress=i,this._onProgress.fire({taskId:this._taskParams.taskId,progress:Math.min(99,i),status:this._smartTaskStatus,taskDetails:c})),!(0,F.isEqual)(this._taskDetails,c)&&(this._taskDetails=c,this._onTaskDetailUpdate.fire({taskId:this._taskParams.taskId,taskDetails:c})),this._smartTaskStatus===L.Success?(this._result={speed:i,taskId:this.taskParams.taskId,taskDetails:r.map(e=>this._convertDetail(e)),originWorkspaceId:null!=n?n:"",originSpaceId:null!=a?a:"",originResourceName:null!=s?s:"",logId:l},this._onSuccess.fire(this._result)):this._smartTaskStatus===L.Failure&&(this._error=(0,w.wf)(L.Failure,"intelligent task failed",{logId:l}),this._onError.fire({logId:l,error:this._error}))}this._getTaskProgressErrorCount>=5&&(this._smartTaskStatus=L.Failure,this._error=(0,w.wf)(r.code,r.msg),this._onError.fire({logId:null!==(i=null==n?void 0:null===(t=n.errorInfo)||void 0===t?void 0:t.logId)&&void 0!==i?i:"",error:this._error}))}_convertDetail(e){var t,i,r;return{resourceType:e.resource_type,md5:e.md5,vid:e.resource_id,transcodeVideoInfos:null===(t=e.transcode_video_infos)||void 0===t?void 0:t.map(e=>{var t,i;return{defination:e.defination,encryptId:null!==(t=e.encrypt_id)&&void 0!==t?t:"",key:e.key,storeUri:null!==(i=e.store_uri)&&void 0!==i?i:"",url:e.url}}),transcodeAudioInfos:null===(i=e.transcode_audio_info)||void 0===i?void 0:i.map(e=>{var t,i;return{defination:e.defination,encryptId:null!==(t=e.encrypt_id)&&void 0!==t?t:"",key:e.key,storeUri:null!==(i=e.store_uri)&&void 0!==i?i:"",url:e.url}}),transcodePreviewInfos:e.transcode_preview_infos,thumbInfo:e.thumb_info,transcodeImageInfos:null===(r=e.transcode_image_infos)||void 0===r?void 0:r.map(e=>{var t,i;return{defination:e.defination,encryptId:null!==(t=e.encrypt_id)&&void 0!==t?t:"",key:e.key,storeUri:null!==(i=e.store_uri)&&void 0!==i?i:"",url:e.url}}),resourceName:e.resource_name,size:e.size,url:e.url,duration:e.duration,utterances:e.utterances,width:e.width,height:e.height}}async _startPollingProgress(){if(await this._getTaskProgress(),Date.now()-this._startTime>this._timeout){this._smartTaskStatus=L.Failure,this._error=(0,D.hO)(),this._onError.fire({logId:"",error:this._error});return}if(this._smartTaskStatus===L.Process&&!this._canceled){var e;setTimeout(()=>{this._startPollingProgress()},null!==(e=this._taskParams.pollingInterval)&&void 0!==e?e:500)}}cancel(){if(!this._canceled)this._canceled=!0,this._onCancel.fire()}constructor(e,t,i){super(),this._timeout=e,this._intelligentRepository=t,this._taskParams=i,this._onProgress=this._store.add(new M.Q),this.onProgress=this._onProgress.event,this._onTaskDetailUpdate=this._store.add(new M.Q),this.onTaskDetailUpdate=this._onTaskDetailUpdate.event,this._onError=this._store.add(new M.Q),this.onError=this._onError.event,this._onSuccess=this._store.add(new M.Q),this.onSuccess=this._onSuccess.event,this._onCancel=this._store.add(new M.Q),this.onCancel=this._onCancel.event,this._smartTaskStatus=L.Process,this._progress=0,this._getTaskProgressErrorCount=0,this._error=(0,w.ly)(),this._canceled=!1,this._startTime=0,this._taskDetails=[],this._startTime=Date.now(),this._startPollingProgress()}}function B(e){return e===N.TemplateCVTask?6e4:3e5}class H extends y.JT{async createSmartTask(e,t){let[i,r]=(await this._smartTaskRepository.create({asset_id:e.assetId,asset_workspace_id:e.assetWorkspaceId,platform:e.platform,workspace_id:e.workspaceId,smart_tool_type:e.smartToolType,scene:e.scene,params:e.params,req_json:e.reqJson},t)).pair();return i?i:(0,w.oW)(new U(B(e.smartToolType),this._smartTaskRepository,{...e,taskId:r.task_id,urlParams:t}))}querySmartTask(e,t){return new U(B(e.smartToolType),this._smartTaskRepository,{...e,urlParams:t})}constructor(){super(),this._smartTaskRepository=new x}}var G=((s={})[s.ToolPage=0]="ToolPage",s[s.Editor=1]="Editor",s[s.TemplateEditor=2]="TemplateEditor",s[s.VideoEditor=3]="VideoEditor",s[s.BatchEditor=4]="BatchEditor",s);let W=(0,p.yh)("text-to-speech-data-service");var V=i("998498"),Z=i.n(V),z=i("651248"),$=i("141314");var K=((l={}).StartTask="StartTask",l.FinishTask="FinishTask",l.TaskStarted="TaskStarted",l.TaskFinished="TaskFinished",l.TaskTimestamp="TaskAudioTimestamp",l.TaskAudio="TaskAudio",l);var q=((c={}).wav="wav",c.mp3="mp3",c.aac="aac",c.ogg_opus="ogg_opus",c.pcm="pcm",c),Y=i(966465).Buffer;let J={[q.wav]:"audio/x-wav",[q.mp3]:"audio/mpeg",[q.aac]:"audio/aac",[q.ogg_opus]:'audio/ogg; codecs="opus"',[q.pcm]:"audio/l16; rate=44100; channels=2"};class Q{_makeRequestString(e){return JSON.stringify({...e,namespace:"TTS",event:K.StartTask,payload:JSON.stringify(e.payload)})}close(e){let t=this._scokets.get(e);t&&(t.onclose=()=>void 0,t.close(1e3,"aborted"),this._scokets.delete(e)),URL.revokeObjectURL(e)}start(e){var t,i;let r;let{appkey:n,config:o,token:a,url:s,needReturnUrl:l=!0,onClose:c,onSocketError:d,onStart:u}=e,p=J[null!==(i=null===(t=o.audio_config)||void 0===t?void 0:t.format)&&void 0!==i?i:q.mp3],_=function(e){try{return MediaSource.isTypeSupported(e)}catch(e){return!1}}(p),g=l&&_,h={options:e,sourceBuffer:null,sourceBufferLocked:!1,shouldReturnUrl:g,arrayBuffers:[],appendSourceBuffer(){if(!this.sourceBufferLocked){if(this.sourceBufferLocked=!0,this.arrayBuffers.length&&this.sourceBuffer&&!this.sourceBuffer.updating)try{let e=this.arrayBuffers.shift();e&&this.sourceBuffer.appendBuffer(e)}catch(e){}h.sourceBufferLocked=!1}},pMessage:null,socket:null};g&&((r=new MediaSource).onsourceopen=()=>{if(!!r)h.sourceBuffer=r.addSourceBuffer(p),h.sourceBuffer.onupdateend=()=>h.appendSourceBuffer()});let m=this._getSocket(s);h.socket=m;let v=e=>{m.close(1e3,"aborted"),null==d||d(e)};window.addEventListener("offline",v);let f=()=>{this.preconnect(s),null==u||u(),m.send(this._makeRequestString({appkey:n,token:a,payload:o})),m.send(JSON.stringify({appkey:n,token:a,namespace:"TTS",event:K.FinishTask}))};m.readyState===WebSocket.OPEN?f():m.onopen=f,m.onclose=()=>{if(g){let e=window.setInterval(()=>{let t=0===h.arrayBuffers.length,i=h.sourceBuffer&&!h.sourceBuffer.updating;if(t&&i){try{null==r||r.endOfStream()}catch(e){}window.clearInterval(e)}},0)}else h.arrayBuffers.length=0;null==c||c(),window.removeEventListener("offline",v)},m.onerror=e=>{null==d||d(e)},m.onmessage=async e=>{await h.pMessage,h.pMessage=this._onMessage(e,h)};let y=r?URL.createObjectURL(r):"";return y&&this._scokets.set(y,m),y}preconnect(e){if(!this._preconnects.has(e))this._preconnects.set(e,new WebSocket(e))}_getSocket(e){let t=this._preconnects.get(e);return(this._preconnects.delete(e),(null==t?void 0:t.readyState)===WebSocket.OPEN||(null==t?void 0:t.readyState)===WebSocket.CONNECTING)?t:new WebSocket(e)}async _onMessage(e,t){let i;let{options:r,shouldReturnUrl:n}=t,{onServerError:o,onMessage:a}=r,{data:s}=e,l=s instanceof Blob?await s.arrayBuffer():s;if(l instanceof ArrayBuffer)i=l,null==a||a({event:K.TaskAudio,buffer:i,message_id:"",namespace:"TTS",status_code:2e7,status_text:"",task_id:""});else try{let e=JSON.parse(s);if(2e7!==e.status_code){null==o||o(e);return}if("string"==typeof e.data&&(i=Y.from(e.data,"base64"),e.event=K.TaskTimestamp,delete e.data),null==a||a({...e,buffer:i}),e.event===K.TaskFinished){var c;null===(c=t.socket)||void 0===c||c.close(),t.socket=null}}catch(e){}n&&i&&(t.arrayBuffers.push(i),t.appendSourceBuffer())}constructor(){this._scokets=new Map,this._preconnects=new Map}}var X=i("475028");let ee=(0,X.i)(100,"web_tts_toast_error_occurred"),et=(0,X.i)(101,"web_tts_toast_language_unsupported"),ei=(0,X.i)(102,"web_tts_toast_error_occurred"),er=(0,X.i)(103,"web_tts_toast_characters_limit");var en=((d={})[d.NotSupportText=3001]="NotSupportText",d[d.NotSupportLanguage=0x2687c52]="NotSupportLanguage",d[d.LengthOutLimit=0x2687c53]="LengthOutLimit",d[d.IllegalToken=0x2656742]="IllegalToken",d),eo=i("813072");let ea={GET_AUDITION:"/lv/v2/intelligence/tts/get_audition",GET_AUDITIONS_CACHE:"/lv/v2/intelligence/tts/mget_audition",PREVIEW:"/lv/v2/intelligence/tts/preview"};class es{get _networkClient(){return!this._networkClientInstance&&(this._networkClientInstance=function(){let e=new C.yk().build({headers:{"Content-Type":"application/json"}});return(0,E.i3)(e),(0,I.mH)(e),(0,b.V)(e),e}()),this._networkClientInstance}async getToken(){try{let e=await this._networkClient.request({method:"post",url:this._getApi(ea.GET_AUDITION),withCredentials:!0});if("0"!==e.ret)return(0,w.wf)(Number(e.ret),e.errmsg);return(0,w.oW)({token:e.data.token,appKey:e.data.app_key})}catch(e){return(0,P.P)(e)}}async getAudition(e,t){try{let i=await this._networkClient.post(this._getApi(ea.GET_AUDITION),{text:e.text,speaker:e.speaker,audio_config:{speech_rate:e.audioConfig.speechRate,pitch_rate:e.audioConfig.pitchRate,enable_timestamp:e.audioConfig.enableTimestamp,format:e.audioConfig.format,sample_rate:e.audioConfig.sampleRate,emotion:e.audioConfig.emotion,emotion_scale:e.audioConfig.emotionScale},platform:e.platform,actions:e.actions?JSON.stringify(e.actions):void 0,is_sync:e.isSync},{withCredentials:!0,params:t});return(0,w.oW)({url:i.data.url,status:i.data.status,logId:i.log_id})}catch(t){var i;let e=(0,P.P)(t);return(0,w.wf)(e.code,e.msg,{logId:null!==(i=null==t?void 0:t.log_id)&&void 0!==i?i:""})}}async getAuditionsCache(e,t){try{let i=await this._networkClient.post(this._getApi(ea.GET_AUDITIONS_CACHE),e,{withCredentials:!0,params:t});return(0,w.oW)({auditions:i.data.auditions})}catch(t){var i;let e=(0,P.P)(t);return(0,w.wf)(e.code,e.msg,{logId:null!==(i=null==t?void 0:t.log_id)&&void 0!==i?i:""})}}async preview(e,t){try{let i=await this._networkClient.post(this._getApi(ea.PREVIEW),{text:e.text,speaker:e.speaker,audio_config:{speech_rate:e.audioConfig.speechRate,pitch_rate:e.audioConfig.pitchRate,enable_timestamp:e.audioConfig.enableTimestamp,format:e.audioConfig.format,sample_rate:e.audioConfig.sampleRate,emotion:e.audioConfig.emotion,emotion_scale:e.audioConfig.emotionScale},platform:e.platform,actions:e.actions?JSON.stringify(e.actions):void 0,is_sync:e.isSync},{withCredentials:!0,params:t});return(0,w.oW)({url:i.data.url,status:i.data.status,logId:i.log_id})}catch(t){var i;let e=(0,P.P)(t);return(0,w.wf)(e.code,e.msg,{logId:null!==(i=null==t?void 0:t.log_id)&&void 0!==i?i:""})}}_getApi(e){return`${S._L.getVar("web_domain")}${e}`}}let el={urlConfig:{get domain(){return S._L.getVar("tts_domain")},baseURL:"/",urlMap:{WS_BINARY:"internal/api/v1/ws"}}};class ec extends y.JT{getToken(){return this._textToSpeechRepository.getToken()}getAudition(e){return this._textToSpeechRepository.getAudition(e)}getAuditionsCache(e){return this._textToSpeechRepository.getAuditionsCache(e)}preview(e){return this._textToSpeechRepository.preview(e)}async generate(e){var t,i;let{url:r,promise:n}=await this._generateInner(e),o=J[null!==(i=null===(t=e.audioConfig)||void 0===t?void 0:t.format)&&void 0!==i?i:q.mp3];return{name:Z()(JSON.stringify((0,z.CE)(e,["onError"]))),type:o,promise:n,url:r,dispose:()=>{var e,t;null===(e=(t=this._ttsClient).close)||void 0===e||e.call(t,r),URL.revokeObjectURL(r)}}}_makeRequestConfig(e){var t,i,r,n,o,a,s,l,c;let d={speaker:e.speaker,ssml:null!==(l=e.ssml)&&void 0!==l?l:"",text:null!==(c=e.text)&&void 0!==c?c:"",audio_config:{enable_timestamp:null===(t=e.audioConfig)||void 0===t?void 0:t.enableTimestamp,format:null===(i=e.audioConfig)||void 0===i?void 0:i.format,pitch_rate:null===(r=e.audioConfig)||void 0===r?void 0:r.pitchRate,sample_rate:null===(n=e.audioConfig)||void 0===n?void 0:n.sampleRate,speech_rate:null===(o=e.audioConfig)||void 0===o?void 0:o.speechRate},enable_text_seg:e.enableTextSeg,...e.internal&&{internal:{phoneme_size:null===(a=e.internal)||void 0===a?void 0:a.phonemeSize,max_paragraph_phoneme_size:null===(s=e.internal)||void 0===s?void 0:s.maxParagraphPhonemeSize}}};return d.audio_config.enable_timestamp=!0,e.enableTextSeg&&(void 0===d.audio_config.enable_timestamp&&(d.audio_config.enable_timestamp=!0),void 0===d.internal&&(d.internal={phoneme_size:40,max_paragraph_phoneme_size:200})),d}async _generateInner(e){let t;let{onError:i,needReturnUrl:r,useSpeechLock:n=!0,...o}=e,a="",s=[],l=[],c=Date.now();n&&(this._SPEECH_LOCK.timestamp=c);let d=new Promise(e=>{t=e});!this._pAuth&&(this._pAuth=this.getToken());let u=await this._pAuth;if(!u.ok){let e=ee();return(this._SPEECH_LOCK.timestamp===c||!n)&&(null==i||i(e)),{url:"",promise:Promise.resolve(e)}}return{url:a=this._ttsClient.start({appkey:u.value.appKey,token:u.value.token,url:this._urlGenerator.url("WS_BINARY"),needReturnUrl:r,config:this._makeRequestConfig(o),onMessage:e=>{if(e.buffer)s.push(e.buffer);else if(e.payload)try{var t;let i=JSON.parse(e.payload);i.alignment.phonemes.length&&i.text&&l.push({duration:i.alignment.phonemes[i.alignment.phonemes.length-1].end_time,text:i.text,index:null!==(t=i.index)&&void 0!==t?t:l.length})}catch(e){}},onClose:()=>{let e=l.sort((e,t)=>e.index-t.index),i=0,r=[];for(let t of e){let{duration:e}=t,n=i+e;r.push({...t,startTime:i,endTime:n}),i=n}t((0,w.oW)({buffer:this._mergeArrayBuffers(s),textSegs:r}))},onSocketError:e=>{let r=ee();(this._SPEECH_LOCK.timestamp===c||!n)&&(null==i||i(r)),t(r)},onServerError:e=>{var r;e.status_code===en.IllegalToken&&(this._pAuth=this.getToken());let o=0x2687c52===(r=e).status_code||3001===r.status_code?et():0x2687c53===r.status_code?er():ei();(this._SPEECH_LOCK.timestamp===c||!n)&&(null==i||i(o)),t(o)}}),promise:d}}_mergeArrayBuffers(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),i=0;return e.forEach(e=>{t.set(new Uint8Array(e),i),i+=e.byteLength}),t.buffer}constructor(){super(),this._urlGenerator=new $.w(el.urlConfig),this._SPEECH_LOCK={timestamp:0},this._ttsClient=new Q,this._textToSpeechRepository=new es}}(0,g.gn)([function(e){let t=null!=e?e:18e5,i=Date.now(),r=[];return function(e,n,o){let a,s;let l=o.value;return o.value=async function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];let c=(0,eo.Z)(Array.from(n),r);if(!c&&(r=Array.from(n)),a&&c)return a;if(i+t>Date.now()&&s&&c)return s;s=void 0;a=l.apply(this,n);let d=await a,[u]=d.pair();return!u&&t>0&&(s=d,i=Date.now()),a=void 0,d},o}}(),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[]),(0,g.w6)("design:returntype","undefined"==typeof Promise?Object:Promise)],ec.prototype,"getToken",null);var ed=((u={})[u.Sami=1]="Sami",u[u.ElevenLabs=2]="ElevenLabs",u[u.Azure=3]="Azure",u);class eu extends v.e{getAudition(e){var t,i,r;return this._textToSpeechDataService.getAudition({text:null!==(r=e.text)&&void 0!==r?r:"",speaker:e.speaker,audioConfig:{speechRate:null===(t=e.audioConfig)||void 0===t?void 0:t.speechRate,pitchRate:null===(i=e.audioConfig)||void 0===i?void 0:i.pitchRate,emotion:e.emotion},platform:e.platform,actions:e.breaks?{breaks:e.breaks}:void 0,isSync:!0})}getAuditionsCache(e){return this._textToSpeechDataService.getAuditionsCache(e)}preview(e){var t,i,r;return this._textToSpeechDataService.preview({text:null!==(r=e.text)&&void 0!==r?r:"",speaker:e.speaker,audioConfig:{speechRate:null===(t=e.audioConfig)||void 0===t?void 0:t.speechRate,pitchRate:null===(i=e.audioConfig)||void 0===i?void 0:i.pitchRate,emotion:e.emotion},platform:e.platform,actions:e.breaks?{breaks:e.breaks}:void 0,isSync:!0})}createSmartTask(e,t){return this._smartTaskService.createSmartTask({smartToolType:N.TextToSpeech,workspaceId:e.workspaceId,scene:e.scene,params:JSON.stringify({text:e.text,breaks:e.breaks,platform:e.platform}),reqJson:JSON.stringify(this._makeTTSReqJson(e))},t)}querySmartTasks(e,t){let{queryParams:i}=e;return i.map(e=>this._smartTaskService.querySmartTask({smartToolType:N.TextToSpeech,taskId:e.smartTaskId,workspaceId:e.workspaceId}),t)}_makeTTSReqJson(e){var t,i,r,n,o,a,s,l,c,d,u;return{speaker:e.speaker,enable_text_seg:e.enableTextSeg,internal:e.enableTextSeg?{phoneme_size:null!==(c=null===(t=e.internal)||void 0===t?void 0:t.phonemeSize)&&void 0!==c?c:0,max_paragraph_phoneme_size:null!==(d=null===(i=e.internal)||void 0===i?void 0:i.maxParagraphPhonemeSize)&&void 0!==d?d:0}:void 0,audio_config:{format:null===(r=e.audioConfig)||void 0===r?void 0:r.format,sample_rate:null===(n=e.audioConfig)||void 0===n?void 0:n.sampleRate,speech_rate:null===(o=e.audioConfig)||void 0===o?void 0:o.speechRate,pitch_rate:null===(a=e.audioConfig)||void 0===a?void 0:a.pitchRate,emotion:null===(s=e.audioConfig)||void 0===s?void 0:s.emotion,emotion_scale:null===(l=e.audioConfig)||void 0===l?void 0:l.emotionScale},disableCaption:null!==(u=e.disableCaption)&&void 0!==u&&u}}constructor(e){super([],e),this._containerService=e;let t=new m.uS;t.register(W,ec),t.register(f,H),this._container=e.createChild(t.makeCollection()),this._textToSpeechDataService=this._container.invokeFunction(e=>e.get(W)),this._smartTaskService=this._container.invokeFunction(e=>e.get(f))}}eu=(0,g.gn)([(0,g.fM)(0,h.T),(0,g.w6)("design:type",Function),(0,g.w6)("design:paramtypes",[void 0===h.T?Object:h.T])],eu)},301167:function(e,t,i){"use strict";i.d(t,{D_:function(){return c},Jn:function(){return s}});var r=i(772322),n=i(218571),o=i(800788),a=i(106807);let s=(0,n.createContext)(null);function l(e){let{children:t,...i}=e;return(0,n.useContext)(s)?t?(0,r.jsx)(r.Fragment,{children:t}):null:((0,o.ZB)(i,"\u6700\u9AD8\u7EA7\u7684 SubscriptionContextProvider \u5FC5\u987B\u4F20\u5165\u4E0A\u4E0B\u6587"),(0,r.jsx)(s.Provider,{value:i,children:t}))}function c(e){return t=>{let i=(0,a.W)();return i?(0,r.jsx)(l,{...i,children:(0,r.jsx)(e,{...t})}):(0,r.jsx)(e,{...t})}}},750183:function(e,t,i){"use strict";i.d(t,{Z$:()=>Z,vh:()=>W,Hk:()=>V});var r=i("772322"),n=i("627737"),o=i("105789"),a=i.n(o);let s={"badge--quota":"badge--quota-XaOsSZ","badge--quota-disabled":"badge--quota-disabled-xtXUCa"},l="badge--try-free-Vjloaz";function c(e){let{className:t,style:i}=e;return(0,r.jsx)("div",{className:a()(l,t),style:i,children:"Try Free"})}function d(e){if(-1===e.quotaLeft)return(0,r.jsx)(c,{...e});let{className:t,style:i,quotaLeft:n}=e;return(0,r.jsx)("div",{className:a()(s["badge--quota"],e.disabled?s["badge--quota-disabled"]:"",t),style:i,children:`${n} uses`})}let u={"badge--pro":"badge--pro-Uirm5V","badge--pro-disabled":"badge--pro-disabled-NW2wiM"};function p(e){let{style:t,className:i,disabled:n}=e;return(0,r.jsx)("div",{className:a()(u["badge--pro"],n?u["badge--pro-disabled"]:"",i),style:t})}var _=i("218571"),g=i("544633"),h=i("569471"),m=i("937802"),v=i("800788"),f=i("968595");let y=(0,_.createContext)(null),w=e=>(0,_.useContext)(y)?(null==e?void 0:e.children)?(0,r.jsx)(r.Fragment,{children:e.children}):null:((0,v.ZB)(e,"\u6700\u9AD8\u7EA7\u7684 BenefitContextProvider \u5FC5\u987B\u4F20\u5165\u4E0A\u4E0B\u6587"),(0,r.jsx)(y.Provider,{value:e,children:e.children}));function b(){let e=(0,_.useContext)(y);return!e&&(0,v.ZB)(e,"useBenefitContext \u5FC5\u987B\u5728 BenefitContextProvider \u4E2D\u4F7F\u7528"),e}function S(e){return t=>{let{benefitTuple:i}=t;if(!i)return(0,r.jsx)(e,{...t});let n=function(e){let t=(0,m.G)(f.$),i=(0,m.G)(k.D);(0,v.Y2)(t,"useBenefit must be used in BenefitProvider");let[r,n]=(0,_.useState)(),o=(0,g.default)(()=>{t.getBenefitInfo(e).then(e=>{e.ok&&n((0,h.I)(e.value))})}),a=(0,g.default)(function(i){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return!C(e,i)&&(0,v.ss)("useBenefit must be used with same benefitTuple"),t.preUseBenefitCheck(e,r)}),s=(0,g.default)(e=>{n(t=>{if(!!t)return{...t,quotaLeft:e}})});return(0,_.useEffect)(()=>{o();let i=t.getBenefitChangeEvent(e)(o);return()=>{i.dispose()}},[t,e]),{benefit:r,preUseBenefitCheck:a,updateBenefitQuotaLeftTemporarily:s,vipInfo:i.userVipInfo}}(i);return(0,r.jsx)(w,{...n,children:(0,r.jsx)(e,{...t})})}}function C(e,t){return e.resourceType===t.resourceType&&e.resourceId===t.resourceId&&e.benefitType===t.benefitType}var k=i("200247"),E=i("106807");function I(e){let{benefitTuple:t,creditElement:i,limitFreeElement:r,oneOffElement:n,subscribeElement:o,...a}=e;if(!t)return null;let s=function(e){let{benefit:t}=b();if(!t)return null;if(!C(e,t.benefit))(0,v.ss)("useBenefit must be used with same benefitTuple");return t}(t),l=function(){let{vipInfo:e}=b();return e}(),c=(0,E.X)();if(!s||"none"===s.availableStrategyType||!c)return null;if(((null==l?void 0:l.flag)||(null==l?void 0:l.curVipLevel)==="vip"||(null==l?void 0:l.curVipLevel)==="standard")&&o)return _.createElement(o,{subscriptionContext:c,benefit:s,limit:s.availableLimit,...a});if(i&&"credit"===s.availableStrategyType)return _.createElement(i,{benefit:s,limit:s.availableLimit,subscriptionContext:c,...a});if(r&&"limit-free"===s.availableStrategyType){if((!s.quotaLeft||0===s.quotaLeft)&&o){var d,u;let[e=null]=null!==(u=null===(d=s.sortedStrategies.find(e=>"subscribe"===e.key))||void 0===d?void 0:d.data.subscribeLimits)&&void 0!==u?u:[];return _.createElement(o,{benefit:s,limit:e,subscriptionContext:c,...a})}return _.createElement(r,{benefit:s,limit:s.availableLimit,subscriptionContext:c,...a})}return n&&"one-off"===s.availableStrategyType?_.createElement(n,{benefit:s,limit:s.availableLimit,subscriptionContext:c,...a}):o&&"subscribe"===s.availableStrategyType||o&&"export"===s.useMode?_.createElement(o,{benefit:s,limit:s.availableLimit,subscriptionContext:c,...a}):null}function P(e,t){let{enableVip:i,enableSVip:r,currentVipLevel:n}=e,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i||a?o?{type:"general",withTick:"pro"===n}:r?"vip"===t?{type:"pro",withTick:"pro"===n}:"standard"===t?{type:"standard",withTick:"standard"===n||"pro"===n}:{type:"pro",withTick:"pro"===n}:{type:"legacy",withTick:!1}:{type:"hidden",withTick:!1}}function A(e){let{quotaLeft:t}=e.benefit;return t?(0,r.jsx)(d,{quotaLeft:t,...e}):null}function R(e){var t;let i=P(e.subscriptionContext,null===(t=e.limit)||void 0===t?void 0:t.role,!1,!!e.benefit);return"legacy"===i.type?(0,r.jsx)(p,{...e,...i}):"standard"===i.type?(0,r.jsx)(n.p,{type:"standard",...e}):"pro"===i.type?(0,r.jsx)(n.p,{type:"pro",...e}):null}function x(e){return(0,r.jsx)(I,{...e,limitFreeElement:e=>(0,r.jsx)(A,{...e}),subscribeElement:e=>(0,r.jsx)(R,{...e})})}var N=i("248552"),L=i("394741");function O(e){let t=(0,E.X)();if(!e.benefit)return null;let{quotaLeft:i}=e.benefit;return i&&t?t.enableSVip?(0,r.jsx)(N.Tu,{type:"entrance",...e}):(0,r.jsx)(c,{...e}):null}function M(e){let{subscriptionContext:t,limit:i,benefit:n}=e,o=P(t,null==i?void 0:i.role,!1,!!n);return(0,r.jsx)(L.ZN,{...e,...o})}function D(e){return e.benefitTuple?(0,r.jsx)(I,{...e,limitFreeElement:e=>(0,r.jsx)(O,{...e}),subscribeElement:e=>(0,r.jsx)(M,{...e})}):null}i("225572");var j=i("97257"),F=i("578603");let U={"button--benefit-use__wrapper":"button--benefit-use__wrapper-iz6FfP",buttonBenefitUseWrapper:"button--benefit-use__wrapper-iz6FfP","button--benefit-use__badge__wrapper":"button--benefit-use__badge__wrapper-siCpg9",buttonBenefitUseBadgeWrapper:"button--benefit-use__badge__wrapper-siCpg9","button--benefit-use__badge-text__wrapper":"button--benefit-use__badge-text__wrapper-Tul589",buttonBenefitUseBadgeTextWrapper:"button--benefit-use__badge-text__wrapper-Tul589","button--benefit-use__badge-text__wrapper--new":"button--benefit-use__badge-text__wrapper--new-uxRMfi",buttonBenefitUseBadgeTextWrapperNew:"button--benefit-use__badge-text__wrapper--new-uxRMfi","button--benefit-use__badge__wrapper--entrance":"button--benefit-use__badge__wrapper--entrance-USjsgy",buttonBenefitUseBadgeWrapperEntrance:"button--benefit-use__badge__wrapper--entrance-USjsgy","button--benefit-use--cta":"button--benefit-use--cta-eau5w3",buttonBenefitUseCta:"button--benefit-use--cta-eau5w3"},B=e=>{let{benefitTuple:t,onBenefitChecked:i,onClick:n,className:o,children:s,...l}=e,{benefit:c,preUseBenefitCheck:d}=b(),u=async e=>{let r=!0;try{r=await d(t)}catch(e){}null==n||n(e,!r);let o=await d(t,!1);(null==c?void 0:c.availableStrategyType)==="limit-free"&&(null==c?void 0:c.quotaLeft)&&(null==c||c.useMode),o?null==i||i(!0):null==i||i(!1)};return(0,r.jsxs)("div",{className:U["button--benefit-use__wrapper"],children:[(0,r.jsx)(j.Z,{className:a()("button--benefit-use",[U["button--benefit-use--cta"]],o),...l,onClick:u,children:s}),(0,r.jsx)("div",{className:a()(U["button--benefit-use__badge__wrapper"],{[U["button--benefit-use__badge-text__wrapper"]]:!!(null==c?void 0:c.quotaLeft)}),children:e.customBadge||(0,r.jsx)(x,{benefitTuple:t,disabled:l.disabled})})]})},H=e=>{let{benefitTuple:t,onBenefitChecked:i,onClick:n,className:o,children:s,forceButtonType:l,forceBadgeType:c,customBadge:d,...u}=e;return(0,r.jsxs)("div",{className:a()(U["button--benefit-use__wrapper"],o),children:[(0,r.jsxs)(j.Z,{className:a()("button--benefit-use",o,{[U["button--benefit-use--entrance"]]:"entrance"===l,[U["button--benefit-use--cta"]]:"cta"===l}),...u,onClick:e=>{null==n||n(e,!1)},children:[s,(0,r.jsxs)("div",{className:U["button--benefit-use__badge__wrapper--entrance"],children:["entrance"===l&&t&&(0,r.jsx)(D,{benefitTuple:t}),"entrance"===l&&!t&&("free"===c&&(0,r.jsx)(N.Tu,{type:l})||"pro"===c&&(0,r.jsx)(V,{}))]})]}),(0,r.jsxs)("div",{className:a()(U["button--benefit-use__badge__wrapper"],{[U["button--benefit-use__badge-text__wrapper"]]:!c||"legacy"===l,[U["button--benefit-use__badge-text__wrapper--new"]]:"entrance"===l||"cta"===l}),children:[d,"cta"===l&&!d&&("free"===c?(0,r.jsx)(N.Tu,{type:l}):"pro"===c?(0,r.jsx)(F.r,{}):null)]})]})};var G=i("301167");(0,G.D_)(S(x));let W=(0,G.D_)(S(D)),V=(0,G.D_)(function(e){let t=(0,E.X)();if(!t)return null;let i=P(t,"vip",e.useGeneral);return(0,r.jsx)(L.ZN,{...e,...i})}),Z=(0,G.D_)(S(e=>e.benefitTuple?(0,r.jsx)(B,{...e}):(0,r.jsx)(H,{...e})));(0,G.D_)(S(I))},106807:function(e,t,i){"use strict";i.d(t,{W:function(){return c},X:function(){return d}});var r=i(544633),n=i(218571),o=i(937802),a=i(800788),s=i(255034),l=i(301167);function c(){try{let e=(0,o.G)(s.v);(0,a.Y2)(e,"useSubscriptionContextFromService must be used in provider");let[t,i]=(0,n.useState)(null),l=(0,r.default)(()=>{i(e.subscriptionContext)});return(0,n.useEffect)(()=>{l();let t=e.onDidChangeSubscriptionContext(l);return()=>{t.dispose()}},[e]),t}catch(e){return null}}function d(){return(0,n.useContext)(l.Jn)}},968595:function(e,t,i){"use strict";i.d(t,{$:function(){return r}});let r=(0,i(335290).yh)("commerce-benefit")},171579:function(e,t,i){"use strict";i.d(t,{A:function(){return r},m:function(){return n}});function r(e,t){var i,r,n;let{benefit:o,useMode:a,availableStrategy:s,sortedStrategies:l,quotaAll:c,quotaLeft:d}=e;let u=s?(r=s,n=t,r?"one-off"===r.key?r.data.oneoffLimits.find(e=>"all"===e.role||("vip"===n?"vip"===e.role:"free"===e.role)):"credit"===r.key?r.data.creditLimits.find(e=>"all"===e.role||("vip"===n?"vip"===e.role:"free"===e.role)):"limit-free"===r.key?r.data.limitfreeLimits.find(e=>"all"===e.role||("vip"===n?"vip"===e.role:"free"===e.role)):"subscribe"===r.key?r.data.subscribeLimits.find(e=>"all"===e.role||("vip"===n?"vip"===e.role:"free"===e.role)):void 0:void 0):void 0;return{benefit:o,useMode:a,availableStrategyType:null!==(i=null==s?void 0:s.key)&&void 0!==i?i:"none",sortedStrategies:l,availableLimit:null!=u?u:null,quotaAll:c,quotaLeft:d}}function n(e){return e.reduce((e,t)=>{let{resourceId:i,resourceType:r,benefitType:n}=t,o=e.find(e=>{let{resourceId:i,resourceType:r}=e;return i===t.resourceId&&r===t.resourceType});return o?(n&&o.benefitTypeList.push(n),e):e.concat([{resourceId:i,resourceType:r,benefitTypeList:n?[n]:[]}])},[])}},255034:function(e,t,i){"use strict";i.d(t,{v:function(){return r}});let r=(0,i(335290).yh)("commerce-subscription-context-service")},248552:function(e,t,i){"use strict";i.d(t,{Tu:()=>u});var r=i("772322"),n=i("105789"),o=i.n(n),a=i("801497"),s=i("150564"),l=i("81741");let c=e=>{let{className:t,style:i}=e;return(0,r.jsxs)("div",{className:o()(l.F,"free-tag-container",t),style:i,children:[(0,r.jsx)(s.XVF,{size:12}),(0,r.jsx)("span",{children:a.ZP.t("web_image_generate_label_free",{},"Free")})]})};function d(e){let{className:t,style:i,type:n="entrance"}=e;return(0,r.jsx)("div",{className:o()(l.F,t),style:i,children:(0,r.jsx)("div",{className:o()({"capsule-vip-free--entrance":"entrance"===n,"capsule-vip-free--cta":"cta"===n}),children:a.ZP.t("web_image_generate_label_free",{},"Free")})})}function u(e){let{className:t,style:i,type:n="legacy"}=e;switch(n){case"legacy":return(0,r.jsx)(c,{className:t,style:i});case"entrance":case"cta":return(0,r.jsx)(d,{...e});default:return null}}},578603:function(e,t,i){"use strict";i.d(t,{r:()=>s});var r=i("772322"),n=i("105789"),o=i.n(n),a=i("81741");function s(e){let{className:t,background:i="black"}=e;return(0,r.jsx)("div",{className:o()(a.F,{"background--black":"black"===i}),children:(0,r.jsx)("div",{className:o()(a.F,{"capsule-vip-pro":!e.withTick,"capsule-vip-pro--tick":e.withTick},t)})})}},627737:function(e,t,i){"use strict";i.d(t,{p:()=>c});var r=i("772322"),n=i("578603"),o=i("105789"),a=i.n(o),s=i("81741");function l(e){let{className:t,background:i="black"}=e;return(0,r.jsx)("div",{className:a()(s.F,{"background--black":"black"===i}),children:(0,r.jsx)("div",{className:a()(s.F,{"capsule-vip-standard":!e.withTick,"capsule-vip-standard--tick":e.withTick},t)})})}function c(e){let{className:t}=e;switch(e.type){case"pro":return(0,r.jsx)(n.r,{...e,className:t});case"standard":return(0,r.jsx)(l,{...e,className:t});default:return null}}},394741:function(e,t,i){"use strict";i.d(t,{ZN:()=>c,$t:()=>l});var r=i("772322"),n=i("105789"),o=i.n(n),a=i("81741");let s={"badge--pro":"badge--pro-OsHuFG","badge--pro--with-text":"badge--pro--with-text-LSXrGG","badge--pro--legacy":"badge--pro--legacy-NCUCJU","badge--pro--legacy--horizontal":"badge--pro--legacy--horizontal-GKlTI6","badge--pro--diamond-purple":"badge--pro--diamond-purple-SVV9To",expired:"expired-dP35WZ","badge--pro--diamond-purple--tick":"badge--pro--diamond-purple--tick-xz1Tu6","badge--pro--diamond-blue":"badge--pro--diamond-blue-o6reol","badge--pro--diamond-blue--tick":"badge--pro--diamond-blue--tick-iBvxD0","badge--pro--diamond-white":"badge--pro--diamond-white-bo1glV","badge--pro--diamond-white--tick":"badge--pro--diamond-white--tick-EJUM5W","text--pro":"text--pro-kSLCeK","text--standard":"text--standard-c4hXib"};function l(e){let{style:t,className:i,withTick:n,type:l,isExpired:c,size:d="small"}=e;switch(l){case"pro":return(0,r.jsx)("div",{className:o()(a.F,s["badge--pro"],{[s["badge--pro--diamond-purple"]]:!n,[s["badge--pro--diamond-purple--tick"]]:n,[s.expired]:c},i,d),style:t});case"standard":return(0,r.jsx)("div",{className:o()(a.F,s["badge--pro"],{[s["badge--pro--diamond-blue"]]:!n,[s["badge--pro--diamond-blue--tick"]]:n,[s.expired]:c},i,d),style:t});case"general":return(0,r.jsx)("div",{className:o()(a.F,s["badge--pro"],{[s["badge--pro--diamond-white"]]:!n,[s["badge--pro--diamond-white--tick"]]:n,[s.expired]:c},i,d),style:t});default:return null}}function c(e){let{type:t="legacy",withText:i=!1}=e;switch(t){case"legacy":case"legacy-horizontal":return function(e){let{style:t,className:i,type:n}=e;return(0,r.jsx)("div",{className:o()(a.F,s["badge--pro"],{[s["badge--pro--legacy"]]:"legacy"===n,[s["badge--pro--legacy--horizontal"]]:"legacy-horizontal"===n},i),style:t})}(e);case"pro":case"standard":if(i)return(0,r.jsxs)("div",{className:o()(a.F,s["badge--pro--with-text"]),children:[l(e),function(e){let{style:t,className:i,type:n,isExpired:l}=e;switch(n){case"pro":return(0,r.jsx)("div",{className:o()(a.F,s["text--pro"],i,{[s.expired]:l}),style:t});case"standard":return(0,r.jsx)("div",{className:o()(a.F,s["text--standard"],i,{[s.expired]:l}),style:t});default:return null}}(e)]});return l(e);default:return null}}},81741:function(e,t,i){"use strict";i.d(t,{F:function(){return r}});let r="commerce-ui"},598321:function(e,t,i){"use strict";i.d(t,{i:function(){return o}});var r=i(107469),n=i(218571);function o(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{r._c.isAllow({scene:r.SA.enableSVip}).then(e=>{t(e)})},[]),e}},474049:function(e,t,i){"use strict";i.d(t,{_:function(){return o},q:function(){return a}});var r,n,o=((r={})[r.NotVip=1]="NotVip",r[r.StandardVip=2]="StandardVip",r[r.ProVip=3]="ProVip",r[r.StandardVipExpired=4]="StandardVipExpired",r[r.ProVipExpired=5]="ProVipExpired",r);var a=((n={}).FREE="free",n.STANDARD="standard",n.VIP="vip",n)},425549:function(e,t,i){"use strict";i.d(t,{PT:function(){return c},Uv:function(){return s},en:function(){return a},gI:function(){return l},uA:function(){return d}});var r=i(474049);let n="vip",o="standard";function a(e){if(!(null==e?void 0:e.curVipLevel)){var t;return null!==(t=null==e?void 0:e.flag)&&void 0!==t&&t}return[n,o].includes(null==e?void 0:e.curVipLevel)}function s(e){let{subscribeType:t,isCancelSubscribe:i}=null!=e?e:{};return"auto"===t&&!1===i}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),{vipRealEnd:i}=null!=e?e:{};if(!t||!i)return null;let r=e=>13!==e.length?`${e}000`:e,n=Number(r(`${t}`)),o=Number(r(`${i}`))-n;return{isAboutToExpired:0<o&&o<=6048e5,restDays:Math.floor(o/864e5)}}function c(e){let{vipRealEnd:t=0}=e;return Math.floor((Date.now()-1e3*t)/864e5)}function d(e){let{curVipLevel:t,expiredVipLevel:i,workspaceSubscribeInfo:n}=null!=e?e:{},o=a(e),{flag:s}=null!=n?n:{};return function(e,t){var i;let r=null===(i=e[0])||void 0===i?void 0:i.value,n=void 0!==t?t:r;for(let t of e)if(null==t?void 0:t.condition){n=t.value;break}return n}([{condition:null!=s&&s,value:r._.ProVip},{condition:t===r.q.VIP&&o,value:r._.ProVip},{condition:t===r.q.STANDARD&&o,value:r._.StandardVip},{condition:i===r.q.VIP&&!o,value:r._.ProVipExpired},{condition:i===r.q.STANDARD&&!o,value:r._.StandardVipExpired}],r._.NotVip)}},298198:function(e,t,i){"use strict";i.d(t,{D:()=>h});var r=i("587892"),n=i("800788"),o=i("167726"),a=i("268260");let s="vip_entrance";class l extends a.M{constructor(e){super([s],e)}}var c=i("697267"),d=i("102219"),u=i("956018");class p{getSlotValues(e,t){return this._getSlotValues(e,t)}constructor(){this.platform="vimo"}}let _={[o.q]:o.L,[s]:l,[c.iG]:c.kE,[d.a]:d.t},g=[{key:"vimo",provider:class e extends p{async _getSlotValues(e,t){let i=e.reduce((e,t)=>(e[t]=null,e),{});try{let r=await u.k.getVimoSlot({resource_keys:e},{noCache:null==t?void 0:t.force});if(!(null==r?void 0:r.resource_info))return i;for(let[e,t]of Object.entries(r.resource_info))i[e]=t;return i}catch(e){return i}}constructor(...e){super(...e),this.platform="vimo"}}}],h=new class e{registerSlotProvider(e){this._slotProviders.push(e)}registerSlot(e){this._slots.push(e)}getSlotProviderByPlatform(e){return this._slotProviders.find(t=>t.platform===e)||null}getSlotByKeys(e){let t=this._slots.find(t=>t.keys.find(t=>e.includes(t)));return t?t:null}dispatchAction(e,t){let i=this._slots.find(t=>t.keys.find(t=>e.includes(t)));if(!i)return;let r=i.getValueSync();e.forEach(e=>{if(!!r)u.k.recordVimoSlotAction({resource_info:{[e]:{plan_id:r.plan_id,activity_id:r.activity_id,action_type:(()=>{switch(t){case"click":return 3;case"close":return 2;case"expose":return 1;default:(0,n.ss)("Unknown action type")}})()}}})}),this._onActionEmitter.fire(i,t)}onAction(){return this._onActionEmitter.event}constructor(){this._slotProviders=[],this._slots=[],this._onActionEmitter=new r.Q}};Object.entries(_).forEach(e=>{let[,t]=e;h.registerSlot(new t(h))}),g.forEach(e=>{let{provider:t}=e;h.registerSlotProvider(new t)})},527067:function(e,t,i){"use strict";i.d(t,{T:()=>m});var r=i("772322");i("966156");var n=i("368100"),o=i("827322"),a=i("218571");let s={globalModal:"global-modal-Z4PHZA",wrap:"wrap-SUdlPk",coverImage:"cover-image-wz_I7F",content:"content-oQ7HWP",title:"title-p5e01t",description:"description-wqqqoc"};var l=i("149803");class c{report(e){this._reporter.report("svip_online_prompt_popup",e)}constructor(){this._reporter=(0,l.y)()}}var d=i("544633"),u=i("324160"),p=i("298198"),_=i("715748"),g=i("801497");let h=i.p+"static/image/cover_fallback.9881613d.png",m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{slot:t,visible:i=!1,onConfirm:l,onClose:d,onExpose:u}=e,[p,_]=(0,a.useState)(i);(0,a.useEffect)(()=>{t&&(null==u||u(),new c().report({action:"show"}))},[]),(0,a.useEffect)(()=>{_(i)},[i]),(0,a.useEffect)(()=>{t&&_(!0)},[t]);let m=(0,a.useCallback)(()=>{_(!1),new c().report({action:"click"}),null==l||l()},[l]),v=(0,a.useCallback)(()=>{_(!1),null==d||d()},[d]),f=(0,a.useCallback)(e=>{e.target.src=(0,o.C)(h,null,{logType:"js.href/src",reportOnly:"false",blackConfig:"{}",configMode:"merge",isCloseSSRReport:!1,bid:"cc_web_editor",region:"maliva",urlLimit:"10000",htmlLimit:"-1",isSaveValidUrl:!1,isRuntimeLog:!1,isDOMParser:!1})},[]);return t?(0,r.jsx)(n.Z,{visible:p,className:s.globalModal,okText:g.ZP.t("web_autorenew_old_pro_notify_popup_btn"),onOk:m,onCancel:v,hideCancel:!0,maskClosable:!1,children:(0,r.jsxs)("div",{className:s.wrap,children:[t.coverImage&&(0,r.jsx)("div",{className:s.coverImage,children:(0,r.jsx)("img",{src:t.coverImage,crossOrigin:"anonymous",onError:f})}),(0,r.jsxs)("div",{className:s.content,children:[t.title&&(0,r.jsx)("div",{className:s.title,children:t.title}),t.description&&(0,r.jsx)("div",{className:s.description,children:t.description.map(e=>e.content.split("\n").map((e,t)=>(0,r.jsx)("div",{children:e},t)))})]})]})}):null};!function(e,t){let i=i=>{let n=(0,_.x)(e),[o,s]=(0,u.default)();(0,a.useEffect)(()=>{n&&s&&p.D.dispatchAction([e],"expose")},[s,n]);let l=(0,d.default)(t=>{p.D.dispatchAction([e],t)});return(0,r.jsx)("div",{ref:o,children:n&&(0,r.jsx)(t,{...i,slot:n,dispatchAction:l})})};i.displayName=`withSlot(${t.displayName||t.name||"Component"})`}("global_modal",m)},715748:function(e,t,i){"use strict";i.d(t,{x:function(){return o}});var r=i(218571),n=i(298198);function o(e){let[t,i]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{let t=n.D.getSlotByKeys([e]);if(!t)return;let r=await t.getValue();i(null==r?void 0:r.material)},[e]);return(0,r.useEffect)(()=>{o()},[e]),t}},804727:function(e,t,i){"use strict";i.d(t,{I:function(){return a}});var r=i(260963),n=i(849002),o=i(298198);class a{get slotStore(){return this._slotStore}dispatchSlotAction(e,t){o.D.dispatchAction([e],t)}async _bootstrap(){let e=Object.keys(this._slotStore);await Promise.all(e.map(e=>this._fetchSlot(e))),this._initBarrier.open(),(0,r.z)(()=>{this.isInitialized=!0})}async _fetchSlot(e){let t=o.D.getSlotByKeys([e]);if(!t)return;let i=await t.getValue();(0,r.z)(()=>{this._slotStore[e]=i})}constructor(e){for(let t of(this._slotStore={},this.isInitialized=!1,this._initBarrier=new n.U,e))this._slotStore[t]=null;(0,r.ky)(this),this._bootstrap()}}},268260:function(e,t,i){"use strict";i.d(t,{M:()=>n});class r{async fetch(){if(!this._options.cacheable||!this._slotValue)this._slotValue=await this._getValue()}async refresh(){return this._slotValue=await this._getValue(),this._slotValue}async getValue(){return await this.fetch(),this._slotValue}getValueSync(){return this._slotValue}constructor(e,t,i={cacheable:!0}){this.keys=e,this._manager=t,this._options=i}}class n extends r{async _getValue(){let e=this._manager.getSlotProviderByPlatform("vimo");if(!e)throw Error("Vimo slot provider not found");return(await e.getSlotValues(this.keys,{force:!this._options.cacheable}))[this.keys[0]]}}},167726:function(e,t,i){"use strict";i.d(t,{L:function(){return o},q:function(){return n}});var r=i(268260);let n="global_modal";class o extends r.M{constructor(e){super([n],e,{cacheable:!1})}}},697267:function(e,t,i){"use strict";i.d(t,{iG:function(){return n},kE:function(){return o}});var r=i(268260);let n="subscribe_page";class o extends r.M{constructor(e){super([n],e)}}},102219:function(e,t,i){"use strict";i.d(t,{a:function(){return n},t:function(){return o}});var r=i(268260);let n="vip_card";class o extends r.M{constructor(e){super([n],e)}}},266686:function(e,t,i){"use strict";i.d(t,{NG:function(){return n}});var r=i(193477);function n(){return function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return(t,i)=>{var n;let o=(0,r.yH)(t,i)||{writable:!0,configurable:!0};return o.enumerable=e,Object.defineProperty(null!==(n=null==t?void 0:t.prototype)&&void 0!==n?n:t,i,o),o}}(!1)}},933447:function(e,t,i){"use strict";i.d(t,{t:function(){return a}});var r=i(283304),n=i(193477),o=i(287280);function a(e){return function(t,i,a){if("number"==typeof a){if(e){let n=r.S.getParamTypes(t,i);n[a]=e,r.S.setParamTypes(t,i,n)}}else{if(void 0===a&&(a=(0,n.yH)(t,i)),void 0===a)return e&&r.S.setType(t,i,e),{get:()=>o.A.invokeGetter(t,i)};let s=a.value;return a.value=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;return!(e instanceof Map)&&(e=new Map),o.A.invokeMethod(s.bind(this),{target:t,methodName:i,locals:e})},a.value.$injected=!0,a}}}},287280:function(e,t,i){"use strict";i.d(t,{A:()=>p});var r=i("371148"),n=i("193477"),o=i("283304"),a=i("623824"),s=i("562369");class l extends s.z{setCallback(e,t){!this.get(e)&&this.set(e,[]);let i=this.get(e);null==i||i.push(t)}}let c=new l,d="No matching bindings found for target, Did you forget @inject for interface?",u=(e,t,i)=>`postConstruct error in class ${e.name}, with key ${String(t)}:${i} `;class p extends r.mB{static has(e){var t,i;let n=null!==(i=this.aliases.get(e))&&void 0!==i?i:e;return(null===(t=this.container)||void 0===t?void 0:t.has(n))||r.ll.has(n)}static alias(e,t){this.aliases.set(e,(0,n.ll)(t));let i=r.ll.get((0,n.ll)(t));if(!i){console.error("cannot find alias's corresponding provider in ProviderRegistry");return}this.container&&this.container.set(e,i)}static construct(e){var t;let i=null!==(t=this.aliases.get(e))&&void 0!==t?t:e,n=r.ll.get(i);return this.invoke(n.useClass)}static override(e,t){var i;let n=null!==(i=this.aliases.get(e))&&void 0!==i?i:e,o=r.ll.get(n);if(!o){console.error("Original class has not been registered");return}if(!o.overridable){console.warn("Original class cannot be overrided");return}o.useClass=t,o.instance=void 0}static hasClass(e){var t;let i=null!==(t=this.aliases.get(e))&&void 0!==t?t:e;return!!r.ll.get(i)||!1}static getClass(e){var t;let i=null!==(t=this.aliases.get(e))&&void 0!==t?t:e;return r.ll.get(i).useClass}static invokable(e){this.container&&this.container.invokable(e)}static emit(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let o=[];return r.ll.forEach(t=>{if(!t.instance)return;let r=p.get(t.provide);if(r&&e in r)try{o.push(r[e](...i))}catch(e){console.error(e)}}),Promise.all(o)}static emitOn(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];let s=[],l=r.ll,c=e=>!0;return t instanceof a.B?l=t:c=t,l.forEach((t,i)=>{if(!c(t)||!t.instance)return;let r=p.get(i);if(r instanceof t.useClass){if(r&&e in r)try{s.push(r[e](...n))}catch(e){console.error(e)}}}),Promise.all(s)}static emitAt(e,t){for(var i=arguments.length,r=Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];let o=p.get(t);if(o&&e in o)try{return new Promise(t=>{let i=o[e](...r);t(i)})}catch(e){console.error(e)}return Promise.resolve(null)}static buildRegistry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>void 0===e.instance;return e.forEach(e=>{t(e)&&(e.instance=p.invoke(e.useClass),this.container&&this.container.set(e.provide,e))}),e}static service(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let r=t[t.length-1],n=t[t.length-2],o=n;3===t.length&&([o]=t),p.set({overridable:!1,...r,singleton:!0,provide:o,useClass:n})}static bind(e,t){let i=r.ll.get(t);if(!i)throw Error("target should be injectable");if(i.instance)throw Error("target has been instantiated");let n=r.ll.get(e);if(!n&&(p.set({provide:e,useClass:t,overridable:!0}),n=r.ll.get(e)||r.ll.get(t)),n.instance)throw Error("token's target has been instantiated");if(!n.overridable&&this.container)throw Error("containerized requires provider be overridable in order to bind");return n.useClass=t,this.container&&this.container.set(e,n),this}static addPostConstructor(e,t){}static invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,i=arguments.length>2?arguments[2]:void 0;!i&&(i=o.S.getParamTypes(e));let r=this.getServices(t,i,e);return new e(...r)}static invokeMethod(e,t){let i,r,n;let a=new Map;return(t instanceof Array?i=t:(i=t.designParamTypes,r=t.target,n=t.methodName,t.locals&&(a=t.locals)),!(a instanceof Map)&&(a=new Map),e.$injected)?e.call(r,a):(!i&&(i=o.S.getParamTypes(r,n)),e(...this.getServices(a,i)))}static invokeGetter(e,t){let i=o.S.getType(e,t);if(!!this.has(i))return this.get(i)}static set(e,t){let i;void 0===e.provide?e={provide:i=e,useClass:i,instance:t}:i=e.provide;let n=e.useClass;return r.ll.merge(n,e),this.container&&this.container.set(n,e),n&&i!==n&&this.alias(i,n),p}static get(e){var t;let i=null!==(t=this.aliases.get(e))&&void 0!==t?t:e,n=r.ll.get(i);if(!this.has(e))throw Error(`${d}:${String(e)}`);let o=null==n?void 0:n.instance;return o?o:this.container?(o=this.container.get(i),n&&(n.instance=o),o):(n&&(n.instance=p.invoke(n.useClass),p.runPostConstructors(e,n),o=n.instance),o)}static getServices(e,t,i){return t.map((t,r)=>{let o="function"==typeof t?(0,n.FM)(t):t;if(e.has(o))return e.get(o);if(e.has(t))return e.get(t);if(this.has(t))return this.get(t);if(i)throw Error(`${d}, the ${r} param requested by${String(i)} `)})}static runPostConstructors(e,t){let i=c.get(e);if(!!i)i.forEach(i=>{try{i(t.instance)}catch(i){console.error(u(t.useClass,e,i.message)),console.error(i)}})}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,i=arguments.length>2?arguments[2]:void 0;return p.invoke(e,t,i)}invokeMethod(e,t){return p.invokeMethod(e,t)}invokeGetter(e,t){return p.invokeGetter(e,t)}get(e){return p.get(e)}set(e,t){return p.set(t),this}has(e){return p.has(e)}construct(e){return p.construct(e)}override(e,t){p.override(e,t)}emit(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return p.emit(e,...i)}emitOn(e,t){for(var i=arguments.length,r=Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return p.emitOn(e,t,...r)}emitAt(e,t){for(var i=arguments.length,r=Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return p.emitAt(e,t,...r)}}p.container=null,p.aliases=new Map,p.factory=(e,t)=>p.set({provide:e,useClass:(0,n.ll)(t),instance:t,singleton:!0}),p.factory(p,new p)},283304:function(e,t,i){"use strict";i.d(t,{S:function(){return s},h:function(){return o}});var r,n=i(193477);var o=((r={}).WORKBENCH_SETTINGS="workbench:settings",r.DESIGN_PARAM_TYPES="design:paramtypes",r.DESIGN_TYPE="design:type",r.DESIGN_RETURN_TYPE="design:returntype",r);let a=new Map;class s{static set(e,t,i,r){let o=a.has(e)?a.get(e):[],s=(0,n.ll)(i);-1===o.indexOf(s)&&(o.push(s),a.set(e,o)),Reflect.defineMetadata(e,t,(0,n.ll)(i),r)}static getParamTypes(e,t){var i;return null!==(i=Reflect.getMetadata("design:paramtypes",e,t))&&void 0!==i?i:[]}static setParamTypes(e,t,i){return this.set("design:paramtypes",i,(0,n.ll)(e).prototype,t)}static getOwn(e,t,i){return Reflect.getOwnMetadata(e,(0,n.ll)(t),i)}static hasOwn(e,t,i){return Reflect.hasOwnMetadata(e,(0,n.ll)(t),i)}}s.get=(e,t,i)=>Reflect.getMetadata(e,(0,n.ll)(t),i),s.getType=(e,t)=>Reflect.getMetadata("design:type",e,t),s.setType=(e,t,i)=>Reflect.defineMetadata("design:type",i,e,t),s.getReturnType=(e,t)=>Reflect.getMetadata("design:returntype",e,t),s.has=(e,t,i)=>Reflect.hasMetadata(e,(0,n.ll)(t),i),s.getTargetsFromPropertyKey=e=>a.has(e)?a.get(e):[]},562369:function(e,t,i){"use strict";i.d(t,{z:function(){return r}});class r{get size(){return this.map.size}get(e){return this.map.get(e)}has(e){return this.map.has(e)}set(e,t){return this.map.set(e,t),this}delete(e){return this.map.delete(e)}forEach(e,t){return this.map.forEach(e)}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}clear(){return this.map.clear()}constructor(){this.map=new Map}}},824827:function(e,t,i){"use strict";i.d(t,{b:function(){return r}});class r{get size(){return this.registry.size}get(e){return this.registry.get(e)}set(e,t){return this.registry.merge(e,t),this}has(e){return this.registry.has(e)}constructor(e){this.registry=e,this.forEach=(e,t)=>this.registry.forEach(e,t)}}},623824:function(e,t,i){"use strict";i.d(t,{B:function(){return o}});var r=i(193477),n=i(562369);class o extends n.z{createIfNotExists(e){if(!this.has(e)){let t=new this.klass(e);this.set(e,t)}return this.get(e)}merge(e,t){let i=this.createIfNotExists(e);Object.keys(t).forEach(e=>{i[e]=t[e]}),this.set(e,i)}get(e){return this.map.get((0,r.Ue)(e))}has(e){return this.map.has((0,r.Ue)(e))}set(e,t){return this.map.set((0,r.Ue)(e),t),this}delete(e){return this.map.delete((0,r.Ue)(e))}constructor(e){super(),this.klass=(0,r.ll)(e)}}},150976:function(e,t,i){"use strict";i.d(t,{w:()=>u});var r=i("789786"),n=i("266686"),o=i("283304"),a=i("203872"),s=i("703232"),l=i("193477");class c{get index(){return this.paramIndex}get target(){return(0,l.ll)(this.rawTarget)}set target(e){this.setTarget(e)}get targetName(){return(0,l.FM)(this.target)}get propertyKey(){return this.rawPropertyKey}get typeName(){return(0,l.FM)(this.rawType)}get type(){return this.rawType}set type(e){this.rawType=e}get collectionName(){return this.collectionType?(0,l.FM)(this.collectionType):""}setTarget(e){let t;this.rawTarget=e,t="number"==typeof this.paramIndex?o.S.getParamTypes(this.rawTarget,this.rawPropertyKey)[this.paramIndex]:o.S.getType(this.rawTarget,this.rawPropertyKey),(0,s.uZ)(t)?(this.collectionType=t,this.rawType=Object):this.rawType=t,this.name=(0,l.FM)(this.rawPropertyKey)}constructor(e,t,i){this.rawTarget=e,this.rawPropertyKey=t,"number"==typeof i&&(this.paramIndex=i),this.target=e}}(0,r.gn)([(0,n.NG)(),(0,r.w6)("design:type",void 0===a.f?Object:a.f)],c.prototype,"collectionType",void 0),(0,r.gn)([(0,n.NG)(),(0,r.w6)("design:type",String)],c.prototype,"name",void 0),(0,r.gn)([(0,n.NG)(),(0,r.w6)("design:type",void 0===a.f?Object:a.f)],c.prototype,"rawType",void 0),(0,r.gn)([(0,n.NG)(),(0,r.w6)("design:type",Number)],c.prototype,"paramIndex",void 0);var d=i("151048");class u extends c{constructor(e,t,i){super(e,t,i),this.store=new d.yh([e,t,i])}}(0,r.gn)([(0,n.NG)(),(0,r.w6)("design:type",void 0===d.yh?Object:d.yh)],u.prototype,"store",void 0)},151048:function(e,t,i){"use strict";i.d(t,{yh:function(){return s}});var r=i(800788),n=i(283304),o=i(193477),a=i(470952);class s{static from(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return new s(t)}static decorate(e){return function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];let n=e(s.from(...i),i);return"function"==typeof n&&n(...i),i[2]}}set(e,t){return this.map.set((0,o.FM)(e),t),this}get(e){return this.map.get((0,o.FM)(e))}clear(){return this.map.clear()}storeGet(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];let o=n.S;return!o.has(e,...i)&&o.set(e,new Map,...i),o.get(e,...i)}constructor(e){let[t,i,n]=e;this.map=(()=>{switch((0,a.Y)(e)){case"parameter":{let e=this.storeGet("workbench:param:store",t,i);return!e.has(`${n}`)&&e.set(`${n}`,new Map),e.get(`${n}`)}case"property":return this.storeGet("workbench:property:store",t,i);case"method":return this.storeGet("workbench:method:store",t,i);case"class":return this.storeGet("workbench:class:store",t);default:(0,r.ss)()}})()}}},740175:function(e,t,i){"use strict";i.d(t,{r:function(){return r}});let r=new class e{debug(e){var t;null===(t=this.use)||void 0===t||t.debug(e),this.write("DEBUG",e)}info(e){var t;null===(t=this.use)||void 0===t||t.info(e),this.write("INFO",e)}warn(e){var t;null===(t=this.use)||void 0===t||t.warn(e),this.write("WARN",e)}error(e){var t;null===(t=this.use)||void 0===t||t.error(e),this.write("ERROR",e)}fatal(e){var t;null===(t=this.use)||void 0===t||t.fatal(e),this.write("FATAL",e)}dateFormat(e){let t=e.getFullYear(),i=`${e.getMonth()+1}`.padStart(2,"0"),r=`${e.getDate()}`.padStart(2,"0"),n=`${e.getHours()}`.padStart(2,"0"),o=`${e.getMinutes()}`.padStart(2,"0"),a=`${e.getSeconds()}`.padStart(2,"0");return`${t}/${i}/${r} ${n}:${o}:${a}`}write(e,t){if(!this.use){let i=`[${this.dateFormat(new Date)}] [${e}] [Workbench] - ${t}`;switch(e){case"FATAL":case"ERROR":console.error(i);break;case"WARN":console.warn(i);break;default:console.log(i)}}}}},80913:function(e,t,i){"use strict";i.d(t,{K:function(){return o}});var r=i(151048),n=i(371148);class o extends n.zt{get store(){return this._store}get useClass(){return this._useClass||this.provide}set useClass(e){this._store=r.yh.from(e),this._useClass=e}constructor(e){super(e),this._store=r.yh.from(e)}}},371148:function(e,t,i){"use strict";i.d(t,{ll:function(){return d},mB:function(){return u},zt:function(){return c}});var r=i(789786),n=i(203872),o=i(623824),a=i(824827),s=i(193477),l=i(266686);class c{get className(){return(0,s.FM)(this.provide)}get useClass(){return this._useClass}set useClass(e){this._useClass=e}constructor(e){this.provide=e,this._useClass=(0,s.ll)(e),this.overridable=!1}}(0,r.gn)([(0,l.NG)(),(0,r.w6)("design:type",Object)],c.prototype,"provide",void 0),(0,r.gn)([(0,l.NG)(),(0,r.w6)("design:type","undefined"==typeof T?Object:T)],c.prototype,"instance",void 0),(0,r.gn)([(0,l.NG)(),(0,r.w6)("design:type",String)],c.prototype,"type",void 0),(0,r.gn)([(0,l.NG)(),(0,r.w6)("design:type",Boolean)],c.prototype,"singleton",void 0),(0,r.gn)([(0,l.NG)(),(0,r.w6)("design:type",Boolean)],c.prototype,"supportDeferInvoke",void 0),(0,r.gn)([(0,l.NG)(),(0,r.w6)("design:type",Boolean)],c.prototype,"overridable",void 0),(0,r.gn)([(0,l.NG)(),(0,r.w6)("design:type",void 0===n.f?Object:n.f)],c.prototype,"_useClass",void 0);let d=new o.B(c);class u extends a.b{constructor(){super(d)}}},203872:function(e,t,i){"use strict";i.d(t,{f:function(){return r}});let r=Function},703232:function(e,t,i){"use strict";function r(e){return e===Array||Array.isArray(e)}function n(e){return r(e)||e===Map||e instanceof Map||e===Set||e instanceof Set||e===WeakMap||e instanceof WeakMap||e===WeakSet||e instanceof WeakSet}i.d(t,{Lc:function(){return r},Qz:function(){return o},uZ:function(){return n}});function o(e){var t,i,r;return"string"==typeof(t=e)||t instanceof String||t===String||"number"==typeof(i=e)||i instanceof Number||i===Number||"boolean"==typeof(r=e)||r instanceof Boolean||r===Boolean}},193477:function(e,t,i){"use strict";i.d(t,{FM:function(){return l},Ue:function(){return o},ll:function(){return n},o0:function(){return function e(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==i||(0,r.Qz)(i)||"symbol"==typeof i||"function"==typeof i)return i;t=(0,r.Lc)(i)?t||[]:t||{};let o=n.default?n.default:(e,t)=>(e.push(t),e),a=(e,n)=>{(0,r.Lc)(i)?t.push(n):t[e]=n};return Object.keys(i).forEach(s=>{let l=i[s];if(null!=l&&(""!==l||""===t[s])){if((0,r.Qz)(l)||"function"==typeof l){a(s,l);return}if((0,r.Lc)(l)){l=l.map(t=>e(void 0,t)),a(s,[].concat(t[s]||[],l).reduce((e,t)=>n[s]?n[s](e,t):o(e,l),[]));return}(0,r.Lc)(i)?a(s,e(void 0,l,n)):a(s,e(t[s],l,n))}}),(0,r.Lc)(t)&&t.reduce((e,t)=>o(e,t),[]),t}},tr:function(){return a},yH:function(){return c}});var r=i(703232);function n(e){return e.prototype?e:e.constructor}function o(e){return"symbol"==typeof e?e:n(e)}let a=e=>{var t;return"function"==typeof e?null!==(t=e.displayName)&&void 0!==t?t:e.name:a(e.constructor)},s=e=>e.toString().replace("Symbol(","").replace(")",""),l=e=>{switch(typeof e){default:return`${e}`;case"symbol":return s(e);case"function":return a(e)}};function c(e,t){var i;return Object.getOwnPropertyDescriptor(null!==(i=null==e?void 0:e.prototype)&&void 0!==i?i:e,t)}},470952:function(e,t,i){"use strict";function r(e){let[,t,i]=e;return"number"==typeof i?"parameter":t&&void 0===i||i&&(i.get||i.set)?"property":(null==i?void 0:i.value)?"method":"class"}i.d(t,{Y:function(){return r}})},140897:function(e,t,i){"use strict";i.d(t,{k:function(){return r}});class r{get initialLeft(){return this._initialLeft}get initialTop(){return this._initialTop}get left(){return this._initialLeft+this.translateX}get top(){return this._initialTop+this.translateY}get width(){return this._width}get height(){return this._height}get initialRight(){return window.innerWidth-this._initialLeft-this._width}get initialBottom(){return window.innerHeight-this._initialTop-this._height}get translateX(){return this._translateX}get translateY(){return this._translateY}reset(){this._initialLeft=0,this._initialTop=0,this._width=0,this._height=0,this._translateX=0,this._translateY=0}setPosition(e,t){this._initialLeft=e,this._initialTop=t}setSize(e,t){this._width=e,this._height=t}setTranslate(e,t){this._translateX=e,this._translateY=t}constructor(){this._initialLeft=0,this._initialTop=0,this._width=0,this._height=0,this._translateX=0,this._translateY=0}}},590204:function(e,t,i){"use strict";i.d(t,{AH:function(){return o},Bn:function(){return u},F5:function(){return p},KR:function(){return s},Ue:function(){return l},ZT:function(){return c},dd:function(){return a},ex:function(){return n},jt:function(){return d},qk:function(){return r}});let r=76,n=56,o=8,a=6,s=8,l=8,c=10,d=window.innerWidth>1440?268:242,u=48,p=56},510949:function(e,t,i){"use strict";i.d(t,{q:()=>f});var r=i("772322"),n=i("953032"),o=i("218571"),a=i("195291"),s=i("12404"),l=i.n(s);class c{get left(){var e,t;return -1*this._rect.initialLeft+(null!==(t=null===(e=this.options)||void 0===e?void 0:e.left)&&void 0!==t?t:0)}get right(){return window.innerWidth-(this._rect.initialLeft+this._rect.width/2)}get top(){var e,t;return -1*this._rect.initialTop+(null!==(t=null===(e=this.options)||void 0===e?void 0:e.top)&&void 0!==t?t:0)}get bottom(){var e,t;return window.innerHeight-(this._rect.initialTop+(null!==(t=null===(e=this.options)||void 0===e?void 0:e.bottom)&&void 0!==t?t:0))}constructor(e,t){this.options=t,this._rect=e}}var d=i("335280"),u=i("590204"),p=i("140897"),_=i("722169");let g=e=>{let{panelBoxRef:t}=e,i=(0,o.useRef)(new p.k);return(0,o.useEffect)(()=>{if(!t.current)return;let e=t.current.getBoundingClientRect();i.current.setSize(e.width,e.height),setTimeout(()=>{var r,n,o;i.current.setPosition((null===(o=t.current)||void 0===o?void 0:null===(n=o.getBoundingClientRect)||void 0===n?void 0:null===(r=n.call(o))||void 0===r?void 0:r.left)||e.width,e.top)},500)},[]),(0,o.useEffect)(()=>{let e=t.current;if(!e)return;let r=new ResizeObserver((0,_.debounce)(()=>{let t=e.getBoundingClientRect();i.current.setSize(t.width,t.height)},100));return r.observe(e),()=>{r.disconnect()}},[]),i.current};var h=i("105789"),m=i.n(h);let v=e=>{let{children:t}=e;return(0,a.createPortal)(t,e.containerRef.current)},f=(0,o.memo)(e=>{var t,a,s,p,_;let{uniqueId:h,content:f,draggerHandlerSelection:y,containerRef:w,popupContainerRef:b,boundOffset:S,defaultPosition:C,isPinned:k=!1,onClose:E,onDragEnd:I,isShowTransform:P}=e,A=(0,o.useRef)(null!==(a=null==b?void 0:b.current)&&void 0!==a?a:i.g.document.body),R=(0,o.useRef)(null),x=g({panelBoxRef:R}),N=(0,o.useRef)(new c(x,S)),L=(0,o.useRef)(!1),O=(0,o.useReducer)(e=>!e,!0)[1],{run:M}=(0,n.default)(()=>{let e=!1;if(L.current)x.left+x.width/2>window.innerWidth&&(x.setTranslate(window.innerWidth-x.initialLeft-x.width/2,x.translateY),e=!0);else{var t;let i=null!==(t=null==C?void 0:C.right)&&void 0!==t?t:0,r=window.innerWidth-i;x.left!==r&&(x.setTranslate(window.innerWidth-x.initialLeft-i,x.translateY),e=!0)}x.top+u.ZT>window.innerHeight&&(x.setTranslate(x.translateX,window.innerHeight-x.initialTop-u.ZT),e=!0),e&&O()},16);(0,o.useEffect)(()=>k?void 0:R.current?(window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M)}):()=>void 0,[M,k]);let D=(0,o.useCallback)((e,t)=>{L.current=!0},[]);(0,d.Z)(A,()=>{null==E||E()}),(0,o.useEffect)(()=>{},[h]);let j=null!==(s=null===(t=document.getElementsByClassName("not-login-tips-wrapper")[0])||void 0===t?void 0:t.getBoundingClientRect().height)&&void 0!==s?s:0,F=(null==C?void 0:C.top)?C.top+j:0;return(0,r.jsx)(v,{containerRef:A,children:k?(0,r.jsx)("div",{ref:R,className:m()("panel-portal-container",{"is-show-transform":P}),style:{left:u.ex+u.AH+u.dd+((_=w.current)?_.getBoundingClientRect().x:0),top:F},children:f}):(0,r.jsx)(l(),{bounds:N.current,onStart:D,onStop:(e,t)=>{x.setTranslate(t.x,t.y),O(),null==I||I()},position:{x:x.translateX,y:x.translateY},handle:y,children:(0,r.jsx)("div",{ref:R,className:m()("panel-portal-container",{"is-show-transform":P}),style:{left:null!==(p=null==C?void 0:C.left)&&void 0!==p?p:0,top:F},children:f})})})})},335280:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var r=i(218571);let n=["mousedown","touchstart"],o=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,o=(0,r.useRef)(t);(0,r.useEffect)(()=>{o.current=t},[t]),(0,r.useEffect)(()=>{if(!e)return;let t=t=>{let{current:i}=e;i&&!i.contains(t.target)&&o.current(t)};for(let e of i)document.addEventListener(e,t);return()=>{for(let e of i)document.removeEventListener(e,t)}},[i,e])}},565872:function(e,t,i){"use strict";i.d(t,{Y:function(){return o}});var r=i(218571),n=i(678128);function o(e){let t=(0,r.useContext)(n.FN);if(!!t.injectorService)return t.injectorService.get(e)}},557844:function(e,t,i){"use strict";i.d(t,{C:function(){return r}});let r="workbench-editor-container"},170882:function(e,t,i){"use strict";i.d(t,{O:function(){return r}});let r="/my-edit"},309110:function(e,t,i){"use strict";i.d(t,{_:()=>R,u:()=>x});var r,n=i("772322");i("17435"),i("959195");var o=i("629913"),a=i("389910"),s=i("218571"),l=i("105789"),c=i.n(l),d=i("416394"),u=i("380130"),p=i("140897"),_=i("57429"),g=i("943478"),h=i("565872"),m=i("568998"),v=i("958444"),f=i("141913"),y=i("510949"),w=i("590204"),b=i("150564"),S=i("801497");let C=[{fakeIcon:(0,n.jsx)(b.eIr,{fontSize:20}),titleI18nKey:"basic_web",get title(){return S.oc.t("basic_web",{},"\u57FA\u7840")}},{fakeIcon:(0,n.jsx)(b.tjt,{fontSize:20}),titleI18nKey:"background_web",get title(){return S.oc.t("background_web",{},"Background")}},{fakeIcon:(0,n.jsx)(m.dk,{fontSize:20}),titleI18nKey:"web_retouch_text_smart_tools",get title(){return S.oc.t("web_retouch_text_smart_tools",{},"Smart tools")}},{fakeIcon:(0,n.jsx)(b.GCV,{fontSize:20}),titleI18nKey:"audio_web",get title(){return S.oc.t("audio_web",{},"Audio")}},{fakeIcon:(0,n.jsx)(b._SE,{fontSize:20}),titleI18nKey:"web_materialSearch_text_motion",get title(){return S.oc.t("web_materialSearch_text_motion",{},"Motion")}},{fakeIcon:(0,n.jsx)(b.fDY,{fontSize:20}),titleI18nKey:"speed_web",get title(){return S.oc.t("speed_web",{},"Speed")}}];function k(e){let{onClose:t}=e;return(0,n.jsxs)("div",{className:"attribute-view-fixed-panel attribute-view-fixed-panel-empty",children:[(0,n.jsx)("div",{className:"attribute-panel-header",children:(0,n.jsx)("div",{className:"attribute-panel-header-close",onMouseDown:e=>{e.stopPropagation()},onClick:t,children:(0,n.jsx)(b.x8P,{fontSize:16})})}),(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)("div",{className:"unselected-guide"}),(0,n.jsx)("div",{className:"text","data-ssr-i18n-key":"web_attribution_panel_text_select_item","data-ssr-i18n-value":S.oc.t("web_attribution_panel_text_select_item",{},"Select an item to adjust attribution here"),children:S.oc.t("web_attribution_panel_text_select_item",{},"Select an item to adjust attribution here")})]})]})}let E=e=>{let{type:t,data:i,titleBarHeight:r,boundingBox:o,containerRef:a,isFixedMode:l,disabled:d=!1,isShowTransform:u}=e,p=(0,h.Y)(g.Mp.ToolBar),b="tool-bar-panel-title",S=(0,_.k)(i.title,null),C=("function"==typeof i.className?(0,_.k)(i.className,null):i.className)||"",E=(0,s.useMemo)(()=>{let e=document.createElement("div");return e.className="attribute-panel-wrapper",e.id="attribute-panel-wrapper",document.body.appendChild(e),e},[]),I=(0,s.useRef)(E);(0,s.useEffect)(()=>()=>{E.remove()},[]);let P=()=>{"unpin"===t&&o.reset(),null==p||p.unActiveToolBarByName(i.name),null==p||p.fireToolbarPanelClose()};(0,s.useEffect)(()=>{let e=document.getElementById("editor-content-center"),t=null;return e&&l&&(t=new ResizeObserver(()=>{e.getBoundingClientRect()})).observe(e),()=>{null==t||t.disconnect()}},[l]);let A=(0,s.useRef)({left:window.innerWidth-w.ex-w.jt-w.AH-w.dd,top:w.Ue+r,right:w.jt+w.ex+w.AH+w.dd}),R=()=>(0,n.jsxs)("div",{className:c()("tool-bar-panel-container",{draggable:!1!==i.draggable&&!l,[C]:!0}),id:l?"fixed-mode-panel-container":"float-mode-panel-container",children:[null!==S?(0,n.jsxs)("div",{className:c()(b),children:[(0,n.jsx)("div",{className:"title-left",children:(0,n.jsx)(f.SV,{fallback:(0,n.jsx)("div",{}),children:(0,_.k)(i.title,null)})}),i.draggable&&(0,n.jsx)(v.zsX,{size:20,className:"tool-bar-panel-draggable-icon"}),(0,n.jsx)("div",{className:"tool-bar-panel-header-close",onMouseDown:e=>{e.stopPropagation()},onClick:P,children:(0,n.jsx)(m.bMz,{fontSize:16})})]}):null,(0,n.jsx)(f.SV,{fallback:(0,n.jsx)("div",{}),children:(0,_.k)(i.content,null)})]});return(0,n.jsx)("div",{className:"attribute-view-fixed-panel",children:l?d?(0,n.jsx)(k,{onClose:"pin"===t?P:void 0}):R():(0,n.jsx)(y.q,{uniqueId:i.name,draggerHandlerSelection:`.${b}`,containerRef:a,popupContainerRef:I,isPinned:"pin"===t,onClose:"pin"===t?P:void 0,content:R(),onDragEnd:i.onDragEnd,defaultPosition:A.current,boundOffset:{left:w.qk,top:w.KR+r,bottom:w.Bn},isShowTransform:u})})},I=e=>{let t=e.querySelector(".tool-bar-title");return!!t&&!!(t&&t.scrollWidth>t.clientWidth)},P=e=>{var t,i,r;let{active:a,data:s,activeUnPinBarName:l}=e,d=(0,h.Y)(g.Mp.ToolBar),u=(0,_.k)(s.tooltips,void 0),p=(0,_.k)(s.content,void 0),m=()=>{var e;null===(e=s.onClick)||void 0===e||e.call(s),a?null==d||d.unActiveToolBarByName(s.name):null==d||d.activeToolBarByName(s.name)},v="toolbarUnselectedGuide"===l;return(0,n.jsx)(o.Z,{position:"bottom",content:null!==(r=null!=u?u:null===(t=s.title)||void 0===t?void 0:t.call(s))&&void 0!==r?r:"",checkOverflow:!u&&I,triggerProps:{mouseEnterDelay:300},children:(0,n.jsx)("div",{id:`workbench-tool-bar-${s.name}`,className:c()(["workbench-tool-bar","pin-tool-bar",(0,_.k)(s.className,""),{active:a}],{disable:v}),onMouseEnter:()=>{!v&&(null==d||d.triggerToolbarHover(s))},onMouseDown:e=>{!v&&e.stopPropagation()},onClick:e=>{!v&&m()},children:p||(0,n.jsxs)(n.Fragment,{children:[s.icon&&(0,n.jsxs)("div",{className:"tool-bar-icon",children:[(null===(i=s.dot)||void 0===i?void 0:i.call(s))&&(0,n.jsx)("div",{className:"tool-bar-dot"}),s.icon()]}),s.title&&(0,n.jsx)("p",{className:"tool-bar-title",children:s.title()})]})},s.name)},s.name)};var A=i("789002");var R=((r={}).FIXED="fixed",r.FLOAT="float",r);let x=(0,d.x)([A.R.TitleBar,u.j.WorkbenchToolBar,u.j.WorkbenchToolBarPanel,A.R.ToolBar,A.R.HideToolBar])(e=>{var t;let{containerRef:i,...r}=e,l=r[u.j.WorkbenchToolBar],d=r[A.R.TitleBar],m=r[u.j.WorkbenchToolBarPanel],v=(0,s.useRef)([]),{enableFixedMode:f,panelMode:y}=null!==(t=r[A.R.ToolBar])&&void 0!==t?t:{},w="fixed"===y,b=(0,h.Y)(g.Mp.ToolBar),S=r[A.R.HideToolBar],I=(0,s.useRef)(w),R=(0,s.useRef)(new p.k),x=!l.showUnPinToolBar,{isManualOpenPanel:N}=l;(0,s.useEffect)(()=>{i.current&&f&&(i.current.style.display="flex")},[f]);let L=(0,s.useMemo)(()=>{if(!m)return;let e=[...l.pin,...l.unpin],{activePanels:t,panelItems:i}=m;return null==t?void 0:t.reduce((t,r)=>{let n=e.find(e=>e.name===r);return n?(t.push({type:n.type,panel:i.get(r)}),t):t},[])},[m]);null==L||L.length,(0,s.useLayoutEffect)(()=>{!(null==L?void 0:L.find(e=>"unpin"===e.type))&&R.current.reset()},[L]);let O=e=>{let t=l.activePinBarName===e.name,i=l.activeUnPinBarName===e.name;return t||i||(0,_.k)(e.isActive,!1)};(0,s.useEffect)(()=>{l.showUnPinToolBar&&(v.current=l.unpin)},[l]);let M=l.showUnPinToolBar?l.unpin:v.current,D=e=>e.map(e=>(0,n.jsxs)(s.Fragment,{children:[e.appendDividerBefore?(0,n.jsx)("div",{className:"tool-bar-divider"}):null,(0,n.jsx)(P,{active:O(e),data:e,activeUnPinBarName:l.activeUnPinBarName},e.name),e.appendDividerAfter?(0,n.jsx)("div",{className:"tool-bar-divider"}):null]},e.name)),j=(0,s.useMemo)(()=>{if(S)return null;let e=!1;return I.current&&!w&&(e=!0),I.current=w,(null==L?void 0:L.length)?L.map(t=>{let{type:r,panel:o}=t;return(0,n.jsx)(E,{titleBarHeight:d.containerHeight,type:r,data:o,boundingBox:R.current,containerRef:i,isFixedMode:w,disabled:x,isShowTransform:e},r)}):null},[S,L,w]),F=e=>{var t;return(0,n.jsxs)("button",{className:"attribute-view-item attribute-view-item--default",children:[(0,n.jsx)(a.Z,{children:(0,n.jsx)("div",{className:"attribute-item-icon",children:null!==(t=e.fakeIcon)&&void 0!==t?t:null})}),(0,n.jsx)(o.Z,{position:"bottom",content:e.title,checkOverflow:e=>e.scrollWidth>e.clientWidth,className:"attribute-item-tooltip",children:(0,n.jsx)("div",{"data-ssr-i18n-key":e.titleI18nKey,"data-ssr-i18n-value":e.title,className:"attribute-item-text attribute-fontsize-10",children:e.title})})]},e.title)};return(0,n.jsxs)("div",{className:c()("workbench-tool-bar-container",{"workbench-tool-bar-container-fix-mode":w,"enable-fixed-mode":f||w}),style:{display:S?"none":void 0},children:[(0,n.jsx)("div",{className:"workbench-tool-bars-container workbench-pin-tool-container",children:l.pin.length?(0,n.jsx)("div",{className:"workbench-tool-bars",children:D(l.pin)}):null}),(0,n.jsxs)("div",{className:c()("workbench-tool-bars-container","workbench-unpin-tool-container",{active:l.showUnPinToolBar,open:N}),children:[w&&(0,n.jsxs)("div",{className:c()("attribute-view-fixed",{"attribute-view-fixed-hidden":!w,"attribute-view-fixed-show-panel":N,"attribute-view-disabled":x}),children:[(0,n.jsx)("div",{className:"attribute-view-fixed-panel-container",children:null!=j?j:(0,n.jsx)(k,{onClose:()=>{null==b||b.unActiveFixedPanel()}})}),(0,n.jsx)("div",{className:"attribute-view-fixed-menus",children:"undefined"!=typeof window&&window.location.search.includes("__ssr_pending__")?null:!x&&M.length?D(M):C.map(e=>F(e))})]}),w?null:(0,n.jsx)("div",{className:c()("workbench-tool-bars",{isFixedMode:w}),children:D(M)})]}),!w&&j]})})},678128:function(e,t,i){"use strict";i.d(t,{FN:()=>p,x9:()=>d});var r,n=i("789786"),o=i("218571"),a=i("287280"),s=i("933447"),l=i("975349"),c=i("528748");class d{get store(){return a.A.get(l.O)}get injectorService(){return a.A}controllerInfo(e){let t=e.from+e.name;return{configController:this.trackControllerService.getConfigController(t),callBackController:this.trackControllerService.getConfigController(t)}}}(0,n.gn)([(0,s.t)(),(0,n.w6)("design:type",void 0===c.r?Object:c.r)],d.prototype,"trackControllerService",void 0);let u=new(d=(0,n.gn)([function(e){return a.A.set({provide:e,useClass:e}),e}],d)),p=o.createContext(u)},411344:function(e,t,i){"use strict";i.d(t,{Q:function(){return n}});var r=i(974701);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{t.prototype.toString=()=>{var i;return null!==(i=e.name)&&void 0!==i?i:t.name},t.displayName=e.name,r.p.merge(t,e)}}},606357:function(e,t,i){"use strict";i.d(t,{d:function(){return n}});var r=i(513478);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return r.Q.merge(t,e),t}}},871254:function(e,t,i){"use strict";i.d(t,{t:function(){return n}});var r=i(287280);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{provide:i,name:n,...o}=e;return n&&(t.displayName=n),i?r.A.service(i,t,{...o,type:"service"}):r.A.service(t,{...o,type:"service"}),r.A.invokable(t),t}}},135029:function(e,t,i){"use strict";i.d(t,{g:function(){return o}});var r=i(126465),n=i(733999);function o(){return n.d.decorate(r.jL)}i(531596).A.set(r.jL,e=>{let{context:t,runner:i}=e;return{...t.controllerInfo(i.point),...i.point}})},230511:function(e,t,i){"use strict";i.d(t,{o:function(){return o}});var r=i(126465),n=i(733999);function o(){return n.d.decorate(r.bF)}i(531596).A.set(r.bF,e=>{let{runner:t}=e;return t.stop.bind(t)})},308961:function(e,t,i){"use strict";i.d(t,{P:function(){return c}});var r=i(789786),n=i(283304),o=i(266686),a=i(150976),s=i(151048),l=i(193477);class c extends a.w{get methodName(){return this.methodClassName}merge(e){let t=e.filter(e=>"string"!=typeof e&&!!e);return this.middlewares=this.middlewares.concat(t),this}get(e){let t=s.yh.from(this.target).get(e),i=(0,l.o0)(void 0,t),r=this.store.get(e);return void 0!==r&&(i=(0,l.o0)(i,r)),i}before(e){return this.beforeMiddlewares=this.beforeMiddlewares.concat(e),this}after(e){return this.afterMiddlewares=this.afterMiddlewares.concat(e),this}constructor(e,t){super(e,t,Object.getOwnPropertyDescriptor(e,t)),this.methodClassName=t,this.beforeMiddlewares=[],this.middlewares=[],this.afterMiddlewares=[],this.type=n.S.getReturnType(this.rawTarget,this.methodName)}}(0,r.gn)([(0,o.NG)(),(0,r.w6)("design:type",Array)],c.prototype,"beforeMiddlewares",void 0),(0,r.gn)([(0,o.NG)(),(0,r.w6)("design:type",Array)],c.prototype,"middlewares",void 0),(0,r.gn)([(0,o.NG)(),(0,r.w6)("design:type",Array)],c.prototype,"afterMiddlewares",void 0)},364578:function(e,t,i){"use strict";i.d(t,{d:function(){return l},m:function(){return c}});var r=i(789786),n=i(193477),o=i(266686),a=i(80913),s=i(349591);class l extends a.K{get middlewares(){return this.controllerMiddleware}set middlewares(e){Object.keys(e).forEach(t=>{this.controllerMiddleware[t]=this.controllerMiddleware[t].concat(e[t])})}get actionPoints(){return s.q.getActionPoints((0,n.ll)(this.provide))}constructor(e){super(e),this.name="",this.controllerMiddleware={useBefore:[],use:[],useAfter:[]},this.siderMenu=[],this.siderMenuPanel=[],this.titleBar=[],this.toolBar=[],this.toolBarPanel=[],this.editors=[],this.operateDetailPage=[],this.operateDetailPagePanel=[],this.type="controller"}}(0,r.gn)([(0,o.NG)()],l.prototype,"name",void 0),(0,r.gn)([(0,o.NG)()],l.prototype,"controllerMiddleware",void 0),(0,r.gn)([(0,o.NG)(),(0,r.w6)("design:type",void 0),(0,r.w6)("design:paramtypes",[])],l.prototype,"middlewares",null),(0,r.gn)([(0,o.NG)(),(0,r.w6)("design:type",Array),(0,r.w6)("design:paramtypes",[])],l.prototype,"actionPoints",null);class c{}},126465:function(e,t,i){"use strict";i.d(t,{bF:function(){return n},jL:function(){return r}});let r=Symbol("actionPointInfo");Symbol("editor");let n=Symbol("stopAction");Symbol("uiConfig"),Symbol("workbenchCustomMetadata"),Symbol("actionPointParam"),Symbol("actionPointValue")},349591:function(e,t,i){"use strict";i.d(t,{q:function(){return a}});var r=i(283304),n=i(151048),o=i(308961);class a{static getActionPoints(e){return!this.hasActionPoints(e)&&r.S.set(a.name,[],e),r.S.getOwn(a.name,e)}static hasActionPoints(e){return r.S.hasOwn(a.name,e)}static get(e,t){if(!this.has(e,t)){let i=new o.P(e,t);a.getActionPoints(e).push(i),r.S.set(a.name,i,e,t)}return r.S.getOwn(a.name,e,t)}static has(e,t){return r.S.hasOwn(a.name,e,t)}static useBefore(e,t,i){return this.get(e,t).before(i),this}static use(e,t,i){return this.get(e,t).merge(i),this}static useAfter(e,t,i){return this.get(e,t).after(i),this}static store(e,t){return n.yh.from(e,t,Object.getOwnPropertyDescriptor(e,t))}static setMetadata(e,t,i,r){return a.store(i,r).set(e,t),a}static getMetadata(e,t,i){return a.store(t,i).get(e)}}},974701:function(e,t,i){"use strict";i.d(t,{p:function(){return o}});var r=i(623824),n=i(364578);let o=new r.B(n.d)},513478:function(e,t,i){"use strict";i.d(t,{Q:()=>a});var r=i("623824"),n=i("80913");class o extends n.K{}let a=new r.B(o)},733999:function(e,t,i){"use strict";i.d(t,{d:()=>d});var r=i("283304"),n=i("789786"),o=i("266686"),a=i("193477"),s=i("150976");class l extends s.w{get service(){return this.rawService}set service(e){this.rawService=e,this.name=(0,a.FM)(e)}toJSON(){return{service:(0,a.FM)(this.rawService),name:this.name,use:this.typeName,expression:this.expression}}}(0,n.gn)([(0,o.NG)(),(0,n.w6)("design:type",Object)],l.prototype,"rawService",void 0);let c="workbench:params:metadata";class d{static get(e,t,i){let r=this.getParams(e,t);return r[i]=r[i]||new l(e,t,i),r[i]}static set(e,t,i,n){let o=r.S.has(c,e,t)?r.S.get(c,e,t):[];o[i]=n,r.S.set(c,o,e,t)}static usePreHandler(e,t){let i=d.get(t.target,t.propertyKey,t.parameterIndex);return i.service=e,t.expression&&(i.expression=t.expression),t.useFunction&&(i.converter=t.useFunction),d.set(t.target,t.propertyKey,t.parameterIndex,i),this}static decorate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i,r,n)=>{if("number"==typeof n){let o=Object.assign({target:i,propertyKey:r,parameterIndex:n},t);"symbol"==typeof e&&d.usePreHandler(e,o)}}}}d.getParams=(e,t)=>r.S.has(c,e,t)?r.S.get(c,e,t):[],d.isInjectable=(e,t)=>{var i;return(null!==(i=r.S.get(c,e,t))&&void 0!==i?i:[]).length>0}},531596:function(e,t,i){"use strict";i.d(t,{A:function(){return r}});let r=new Map},528748:function(e,t,i){"use strict";i.d(t,{r:function(){return o}});var r=i(789786),n=i(871254);class o{getConfigController(e){return this.configControllers.get(e)}getCallbackController(e){return this.callbackControllers.get(e)}setConfigController(e,t){this.configControllers.set(e,t)}setCallbackController(e,t){this.callbackControllers.set(e,t)}constructor(){this.configControllers=new Map,this.callbackControllers=new Map}}o=(0,r.gn)([(0,n.t)({overridable:!0})],o)},943478:function(e,t,i){"use strict";i.d(t,{Mp:function(){return n},eo:function(){return a},hX:function(){return o}});var r,n=((r={}).SiderMenu="sider_menu",r.SiderMenuPanel="sider_menu_panel",r.TitleBar="title_bar",r.ToolBar="tool_bar",r.ToolBarPanel="tool_bar_panel",r.EditorContainer="editor_container",r.OperateDetailsPage="operate_details_page",r.OperateDetailsPagePanel="operate_details_page_panel",r);let o={siderMenu:"sider_menu",siderMenuPanel:"sider_menu_panel",titleBar:"title_bar",toolBar:"tool_bar",toolBarPanel:"tool_bar_panel",editors:"editor_container",operateDetailPage:"operate_details_page",operateDetailPagePanel:"operate_details_page_panel"},a={sider_menu:"siderMenu",sider_menu_panel:"siderMenuPanel",title_bar:"titleBar",tool_bar:"toolBar",tool_bar_panel:"toolBarPanel",editor_container:"editors",operate_details_page:"operateDetailPage",operate_details_page_panel:"operateDetailPagePanel"}},326106:function(e,t,i){"use strict";i.d(t,{_:function(){return r}}),i(218571);let r={IconBtn:"IconBtn",Btn:"Btn",Custom:"Custom"}},432871:function(e,t,i){"use strict";i.d(t,{B:function(){return a},c:function(){return o}});var r,n,o=((r={})[r.ClickTrack=0]="ClickTrack",r[r.DbClickTrack=1]="DbClickTrack",r[r.ClickCanvas=2]="ClickCanvas",r[r.DbClickCanvas=3]="DbClickCanvas",r[r.Direct=4]="Direct",r[r.AddSegment=5]="AddSegment",r);var a=((n={})[n.Default=0]="Default",n[n.ForceAct=1]="ForceAct",n[n.ForceUnAct=2]="ForceUnAct",n)},789002:function(e,t,i){"use strict";i.d(t,{R:()=>r,e:()=>n});let r={Namespace:"namespace",DebugMode:"debugMode",WorkbenchMode:"workbenchMode",WorkbenchClassName:"workbenchClassName",SiderMenu:"siderMenu",TitleBar:"titleBar",HideTitleBar:"hideTitleBar",ToolBar:"toolBar",HideToolBar:"hideToolBar",HideLogo:"hideLogo",Visible:"visible",BackLogoConfirguation:"backLogoConfirguation",HideSiderMenu:"hideSiderMenu",AccesableSiderMenu:"notAccesableSiderMenu"},n={Controllers:"controllers",Services:"services"}},508540:function(e,t,i){"use strict";i.d(t,{w:function(){return n}});var r,n=((r={})[r.readonly=1]="readonly",r[r.editable=2]="editable",r)},380130:function(e,t,i){"use strict";i.d(t,{j:function(){return n}});var r,n=((r={}).UIServiceSwitchStatus="UIServiceSwitchStatus",r.ControllerSwitchStatus="ControllerSwitchStatus",r.ScopeSwitchStatus="ScopeSwitchStatus",r.DisableExceptionScopes="DisableExceptionScopes",r.DisableAll="DisableAll",r.WorkbenchSiderMenu="WorkbenchSiderMenu",r.WorkbenchSiderMenuPanel="WorkbenchSiderMenuPanel",r.WorkbenchTitleBar="WorkbenchTitleBar",r.WorkbenchToolBar="WorkbenchToolBar",r.WorkbenchToolBarPanel="WorkbenchToolBarPanel",r.WorkbenchEditorContainer="WorkbenchEditorContainer",r.WorkbenchOperateDetailsPage="WorkbenchOperateDetailsPage",r.WorkbenchOperateDetailsPagePanel="WorkbenchOperateDetailsPagePanel",r)},975349:function(e,t,i){"use strict";i.d(t,{O:function(){return s}});var r=i(789786),n=i(407797),o=i(740175),a=i(871254);class s{register(e,t){return this.state.has(e)?o.r.warn("This key has already been registered, thus ignored."):this.state.set(e,new n.X(t)),this.get(e)}has(e){return this.state.has(e)}get(e){return this.state.get(e)}getValue(e){return this.state.has(e)?this.get(e).getValue():null}update(e,t){this.state.has(e)?this.get(e).next(t):o.r.warn(`Key "${e}" is not exists. Update ignored.`)}upsert(e,t){this.state.has(e)?this.get(e).next(t):this.register(e,t)}clear(e){this.state.delete(e)}constructor(){this.state=new Map}}s=(0,r.gn)([(0,a.t)({overridable:!0})],s)},416394:function(e,t,i){"use strict";i.d(t,{x:function(){return d}});var r=i(772322),n=i(218571),o=i(503347),a=i(93853),s=i(269511),l=i(287280),c=i(975349);function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,d=arguments.length>3?arguments[3]:void 0;return u=>{var p,_;class g extends n.Component{componentDidMount(){let r=(0,o.a)(...Object.values(this.observables));e.length>1&&!t?this.subscription=r.pipe((0,a.p)(i,d,{leading:!1,trailing:!0})).subscribe(e=>{let t=e.reduce((e,t)=>({...e,...t}),{});this.setState(t)}):this.subscription=r.subscribe(e=>{let t=e.reduce((e,t)=>({...e,...t}),{});this.setState(t)})}componentWillUnmount(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}render(){return(0,r.jsx)(u,{...this.props,...this.state})}getObservable(e){!this.store.has(e)&&this.store.register(e,null);let t=this.store.get(e);return this.observables[e]=t.pipe((0,s.U)(t=>({[e]:t}))),t}constructor(t){super(t),this.observables={},this.store=l.A.get(c.O),this.state=e.reduce((e,t)=>(e[t]=this.getObservable(t).getValue(),e),{})}}return g.displayName=null!==(_=null!==(p=u.displayName)&&void 0!==p?p:u.name)&&void 0!==_?_:"WithStateComponent",g}}},57429:function(e,t,i){"use strict";function r(e,t){for(var i,r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return"function"==typeof e?null!==(i=e(...n))&&void 0!==i?i:t:null!=e?e:t}i.d(t,{k:function(){return r}})},302343:function(e,t,i){"use strict";i.d(t,{l:function(){return o},r:function(){return n}});var r,n=((r={}).high="high",r.default="default",r.low="low",r);function o(e){let{list:t,filter:i=e=>e}=e;return t.sort((e,t)=>{let i={high:2,default:1,low:0},{orderLevel:r="default",order:n=0}=e,{orderLevel:o="default",order:a=0}=t;return r!==o?i[o]-i[r]:a-n}).map(i)}},210823:function(e,t,i){"use strict";i.d(t,{e:function(){return r}});let r=(0,i(335290).yh)("workbench")},454882:function(){},667466:function(){},576040:function(e,t,i){"use strict";var r,n;i.d(t,{y:function(){return r}}),i(39155),(n=r||(r={}))[n.CapCutWeb=348188]="CapCutWeb",n[n.JianyingWeb=324442]="JianyingWeb",n[n.CapCutBusiness=573081]="CapCutBusiness",n[n.DreaminaEN=513641]="DreaminaEN",n[n.DreaminaCN=513695]="DreaminaCN",n[n.DreaminaAppCN=513695]="DreaminaAppCN",n[n.CapCutMobile=3006]="CapCutMobile",n[n.JianyingMobile=1775]="JianyingMobile",n[n.CapCutPC=359289]="CapCutPC",n[n.JianyingPC=3704]="JianyingPC"},39155:function(){},772356:function(e,t,i){"use strict";i.d(t,{Q:function(){return r}}),i(39155);var r="undefined"!=typeof CUSTOM_DISABLE_COMMERCE&&CUSTOM_DISABLE_COMMERCE},320271:function(e,t,i){"use strict";i.d(t,{Kr:function(){return p},U_:function(){return a},hR:function(){return d},hm:function(){return s},j7:function(){return u},vJ:function(){return c}}),i(39155),(r=a||(a={})).CurveHSL="curve-hsl",r.VoiceChange="voice-change",r.ShootProject="shoot-project",r.ManualFigure="manual-figure",r.LiveshortenPanEntertainment="liveshorten-pan-entertainment",r.FaceProp="face-prop",r.Beauty2="beauty2",r.SkeletonBody="skeleton-body",r.TextTemplate="text-template",r.ShootProp="shoot-prop",r.Shoot="shoot",r.Play="play",r.SystemFonts="system-fonts",r.Beauty="beauty",r.Flower2="flower2",r.Filter2="filter2",r.Bubble2="bubble2",r.Default="default",r.Effects="effects2",r.Tone="tone",r.Filter="filter",r.Canvas="canvas",r.Bubble="bubble",r.Flower="flower",r.SubtitleTemplate="subtitle-templates",r.ObjectLock="camera_tracking",r.Video="video",r.Transitions="transitions",r.Mix="mix",r.Sticker="sticker",r.Text="text",r.Insert="insert",r.Fonts="fonts",r.Videomask="videomask",r.Curvespeed="curvespeed",r.Integration="integration",r.Iosemojinew="iosemojinew",r.Emoji="emoji",r.Emojiandroid="emojiandroid",r.Emojiios="emojiios",r.AutoBeautyShape="auto-beauty",r.AutoBeauty="auto-beauty2",r.AutoBeautyBody="auto-beauty3",r.AutoBeautyMakeup="makeup",r.Graffiti="graffiti",r.SmartColorAdjust="smart_color_adjust",r.TextGlow="text_glow",r.CC4BGsEdit="cc4b_gs_edit",r.Shape="shape",r.ShapeAnimation="shape-animation",r.PathAnimation="path-animation",r.CurveAdjustPreset="curve_adjust_preset",r.AiavatarMask="aiavatarmask",r.ColorMatch="color_match",r.SmartRelight="smart-relight",r.ToolbarFonts="",r.MattingStroke="matting_stroke",(n=s||(s={})).SaleDesign="sales-design",n.SalesSticker="sales-sticker",n.SalesFont="fonts",n.SalesTextTemplate="sales-text-template",n.Svg="svg",n.SalesFrame="sales-frame",n.SalesFilter="sales-filter",n.SalesImageEffect="sales-image-effect",n.YkImage="yk-image",n.AIBackground="ai_background",n.SalesTextPreset="sales-text-preset",n.SalesTextGlow="sales-text-glow",n.SalesGrid="sales-grid",n.SalesRetouchFace="sales-beauty-face",n.SalesRetouchReshape="sales-beauty-reshape",n.SalesRetouchBody="sales-beauty-body",n.SalesRetouchMakeup="sales-beauty-makeup",n.LokiTemplate="loki-template",n.EcomAIBackground="ecom-ai_background",n.PhotoDreamina="dreamina",(o=l||(l={})).CNSalesSticker="cn-sales-sticker",o.CNSalesFont="cn-fonts",o.CNSalesTextTemplate="cn-sales-text-template";var r,n,o,a,s,l,c={[s.SaleDesign]:"sales-design",[s.SalesSticker]:"sales-sticker",[s.SalesFont]:"fonts",[s.SalesImageEffect]:"sales-image-effect",[s.SalesRetouchBody]:"sales-beauty-body",[s.SalesRetouchFace]:"sales-beauty-face",[s.SalesRetouchReshape]:"sales-beauty-reshape",[s.SalesRetouchMakeup]:"sales-beauty-makeup",[s.SalesFilter]:"sales-filter",[s.SalesFrame]:"sales-frame",[s.Svg]:"svg",[s.SalesTextGlow]:"sales-text-glow",[s.SalesTextTemplate]:"sales-text-template"},d={text:a.Text,fonts:a.Fonts,flower:a.Flower,default:a.Default,sticker:a.Sticker,"shape-animation":a.ShapeAnimation},u={text:a.Text,fonts:a.Fonts,flower:a.Flower,default:a.Default,sticker:a.Sticker,"shape-animation":a.ShapeAnimation};s.SalesTextTemplate,s.SalesFont,s.SalesSticker,s.SalesFilter,s.SalesFrame,s.SalesTextGlow,s.SalesImageEffect,s.SalesRetouchBody,s.SalesRetouchFace,s.SalesRetouchMakeup,s.SalesRetouchReshape;var p={"curve-hsl":a.CurveHSL,"voice-change":a.VoiceChange,"shoot-project":a.ShootProject,"manual-figure":a.ManualFigure,"liveshorten-pan-entertainment":a.LiveshortenPanEntertainment,"face-prop":a.FaceProp,beauty2:a.Beauty2,"skeleton-body":a.SkeletonBody,"text-template":a.TextTemplate,"shoot-prop":a.ShootProp,shoot:a.Shoot,play:a.Play,"system-fonts":a.SystemFonts,beauty:a.Beauty,flower2:a.Flower2,filter2:a.Filter2,bubble2:a.Bubble2,default:a.Default,effects2:a.Effects,tone:a.Tone,filter:a.Filter,canvas:a.Canvas,bubble:a.Bubble,flower:a.Flower,video:a.Video,transitions:a.Transitions,mix:a.Mix,sticker:a.Sticker,text:a.Text,insert:a.Insert,fonts:a.Fonts,videomask:a.Videomask,curvespeed:a.Curvespeed,integration:a.Integration,iosemojinew:a.Iosemojinew,emoji:a.Emoji,emojiandroid:a.Emojiandroid,emojiios:a.Emojiios,"auto-beauty":a.AutoBeautyShape,"auto-beauty2":a.AutoBeauty,"auto-beauty3":a.AutoBeautyBody,makeup:a.AutoBeautyMakeup,graffiti:a.Graffiti,smart_color_adjust:a.SmartColorAdjust,text_glow:a.TextGlow,cc4b_gs_edit:a.CC4BGsEdit,shape:a.Shape,"shape-animation":a.ShapeAnimation,"path-animation":a.PathAnimation,curve_adjust_preset:a.CurveAdjustPreset,aiavatarmask:a.AiavatarMask}},33883:function(e,t,i){"use strict";var r,n;i.d(t,{q:function(){return r}}),i(39155),(n=r||(r={})).Video="video_web",n.Photo="photo_web",n.DigitalHuman="digital_human",n.TextTemplate="text-template",n.Sticker="default",n.SubtitleTemplate="subtitle-templates",n.AiAvatarMask="aiavatarmask",n.AutoBeautyShape="auto-beauty",n.AutoBeautyFace="auto-beauty2",n.AutoBeautyBody="auto-beauty3",n.AutoBeautyMakeup="makeup",n.DreaminaAiVideo="ai_ttov_tool",n.DreaminaFont="fonts",n.Tone="tone",n.MaterialLib="material-lib",n.Effects="effects2",n.FaceProp="face-prop",n.SystemFont="system-fonts",n.Font="fonts",n.Flower="flower",n.VoiceChange="voice-change",n.Filter="filter",n.VideoBackground="canvas",n.VideoMotion="video",n.TextMotion="text",n.StickerMotion="sticker",n.Transitions="transitions",n.ShapeAnimation="shape-animation",n.PathAnimation="path-animation",n.Graffiti="graffiti",n.MattingStroke="matting_stroke",n.TextGlow="text_glow",n.CurveHSL="curve-hsl",n.Mask="videomask",n.Emoji="emoji",n.SmartColorAdjust="smart_color_adjust",n.Integration="integration",n.Bubble="bubble",n.Mix="mix",n.CurvePreset="curve_adjust_preset",n.CurveSpeed="curvespeed"},772270:function(e,t,i){"use strict";i.d(t,{AF:()=>r});var r=348188;i("39155")},658683:function(e,t,i){"use strict";i.nc="argus-csp-token"},428651:function(e,t,i){"use strict";i(572045),i(832706),i(216373),i(265667),i(641194),i(673430),i(443263),i(513836),i(648128),i(103606),i(577784),i(175070),i(218052),i(745757),i(231500),i(519159),i(480711),i(925739),i(714680),i(470166),i(528601),i(711941),i(1e5),i(626012),i(875802),i(922374),i(664077),i(174702),i(949102),i(124011),i(824709),i(514028),i(105679),i(544030),i(896917),i(708206),i(899094),i(954325),i(786871),i(438260),i(399448),i(921211),i(886428),i(698636),i(164879),i(383416),i(532074),i(931584),i(848998),i(125547),i(420993),i(330656),i(160078),i(61093),i(453913),i(135783),i(127748),i(670766),i(596759),i(52731),i(752762),i(450157),i(907871),i(445459),i(339768),i(653756),i(608686),i(208516),i(363749),i(665442),i(304826),i(514338),i(765885),i(486877),i(785008),i(949006),i(745316),i(364048),i(819899),i(615854),i(940229),i(395017),i(878328),i(107518),i(798940),i(631607),i(721029),i(530506),i(563034),i(239336),i(281533),i(76),i(299852),i(303753),i(993743),i(258631),i(992271),i(377923),i(641245),i(777363),i(868497),i(103587),i(883550),i(163204),i(9591),i(373420),i(376778),i(585589),i(521528),i(618865),i(104461),i(275147),i(238),i(20582),i(520274),i(678318),i(781951),i(18397),i(409228),i(250888),i(595508),i(860330),i(907304),i(95902),i(468155),i(994405),i(859569),i(693485),i(24271),i(124161),i(140459),i(243618),i(482669),i(127027),i(10346),i(306198),i(295409),i(718929),i(164559),i(214485),i(380314),i(933752),i(143667),i(948974),i(809606),i(846134),i(379560),i(185569),i(688977),i(484340),i(365882),i(405974),i(757281),i(970565),i(82735),i(724741),i(376348),i(147883),i(78702),i(98491),i(18762),i(469227),i(777394),i(361283),i(753425),i(701325),i(470501),i(691551),i(889738),i(880442),i(551144),i(76434),i(512931),i(160246),i(926758),i(611518),i(77666),i(432244),i(77036),i(558846),i(498849),i(696147),i(207935),i(48473),i(110257),i(839883),i(137232),i(37117),i(378250),i(504888),i(48014),i(567558),i(145587),i(922295),i(141381),i(312558),i(280124),i(217332),i(957359),i(928512),i(512201),i(668374),i(630526),i(471425),i(185627),i(349058),i(45195),i(300474),i(469684),i(264656),i(763198),i(384740),i(438693),i(992785),i(437674),i(557689),i(300002),i(213940),i(591109),i(678816)},919515:function(){"use strict";window.__assetPrefix__="//lf16-web-buz.capcut.com/obj/capcut-web-buz-us/ies/lvweb/video_online"},881889:function(e){"use strict";e.exports=JSON.parse('{"v":"5.3.4","fr":60,"ip":0,"op":70,"w":80,"h":80,"nm":"loading_\u526A\u6620\u65B0LOGO_\u8F93\u51FA_w","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"\u7A7A 1","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[40,40,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[7.6,7.6,100],"ix":6}},"ao":0,"ip":0,"op":70,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"\u5F62\u72B6\u56FE\u5C42 4","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[542,-334],[-442,182],[-434.64,294.042],[-428,317],[-403.003,318.91],[212.003,317.075],[237,317],[263.272,300.287],[283,270],[263,-65.063]],"c":false},"ix":2},"nm":"\u8DEF\u5F84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":152,"ix":5},"lc":1,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":8},"nm":"\u63CF\u8FB9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.453682005639,0.537254961799,0.526438993566,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"\u586B\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":true},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53D8\u6362"}],"nm":"\u5F62\u72B6 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":60,"s":[0],"e":[86]},{"t":90}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":0,"s":[0],"e":[86]},{"t":30}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"\u4FEE\u526A\u8DEF\u5F84 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":-9,"op":70,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":1,"nm":"\u767D\u8272 \u7EAF\u8272 2","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[540,540,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"f","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[-68.43,0],[0,0],[0,61.351],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,61.351],[0,0],[64.891,0],[0,0],[0,0],[0,0],[0,0]],"v":[[1043.197,305.214],[1043.197,148.297],[36.803,674.5],[36.803,832.597],[146.527,931.703],[744.7,931.703],[854.424,832.597],[854.424,825.209],[776.555,784.224],[126.47,784.224]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"\u8499\u7248 1"}],"sw":1080,"sh":1080,"sc":"#000000","ip":0,"op":70,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"\u5F62\u72B6\u56FE\u5C42 3","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[283,62],[269,-253],[258.14,-289.956],[245.323,-307.636],[229,-317],[-392.01,-319.781],[-417,-316],[-431.668,-297.891],[-439.394,-274.056],[-436,-177],[554,339]],"c":false},"ix":2},"nm":"\u8DEF\u5F84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":152,"ix":5},"lc":1,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":8},"nm":"\u63CF\u8FB9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.453682005639,0.537254961799,0.526438993566,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"\u586B\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":true},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53D8\u6362"}],"nm":"\u5F62\u72B6 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":90,"s":[0],"e":[100]},{"t":120}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":30,"s":[12],"e":[100]},{"t":60}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"\u4FEE\u526A\u8DEF\u5F84 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":30,"op":70,"st":119,"bm":0},{"ddd":0,"ind":5,"ty":1,"nm":"\u767D\u8272 \u7EAF\u8272 3","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[540,540,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"f","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[64.891,0],[0,0],[0,-62.531],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,-62.531],[0,0],[-68.43,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[452.103,464.491],[126.47,295.776],[774.196,295.776],[854.424,253.92],[854.424,248.582],[744.7,148.297],[146.527,148.297],[36.803,248.582],[36.803,406.679],[301.085,543.539],[854.424,831.418],[1043.197,931.703],[1043.197,772.426],[741.203,614.935]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"\u8499\u7248 1"}],"sw":1080,"sh":1080,"sc":"#000000","ip":30,"op":70,"st":119,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"\u5F62\u72B6\u56FE\u5C42 2","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[542,-334],[-442,182],[-434.64,294.042],[-428,317],[-403.003,318.91],[212.003,317.075],[237,317],[263.272,300.287],[283,270],[263,-65.063]],"c":false},"ix":2},"nm":"\u8DEF\u5F84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":152,"ix":5},"lc":1,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":8},"nm":"\u63CF\u8FB9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.453682005639,0.537254961799,0.526438993566,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"\u586B\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":true},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53D8\u6362"}],"nm":"\u5F62\u72B6 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":-10,"s":[0],"e":[86]},{"t":20}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":-70,"s":[0],"e":[86]},{"t":-40}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"\u4FEE\u526A\u8DEF\u5F84 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":21,"st":-70,"bm":0},{"ddd":0,"ind":7,"ty":1,"nm":"\u767D\u8272 \u7EAF\u8272 2","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[540,540,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"f","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[-68.43,0],[0,0],[0,61.351],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,61.351],[0,0],[64.891,0],[0,0],[0,0],[0,0],[0,0]],"v":[[1043.197,305.214],[1043.197,148.297],[36.803,674.5],[36.803,832.597],[146.527,931.703],[744.7,931.703],[854.424,832.597],[854.424,825.209],[776.555,784.224],[126.47,784.224]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"\u8499\u7248 1"}],"sw":1080,"sh":1080,"sc":"#000000","ip":0,"op":21,"st":-70,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"\u5F62\u72B6\u56FE\u5C42 1","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[283,62],[269,-253],[258.14,-289.956],[245.323,-307.636],[229,-317],[-392.01,-319.781],[-417,-316],[-431.668,-297.891],[-439.394,-274.056],[-436,-177],[554,339]],"c":false},"ix":2},"nm":"\u8DEF\u5F84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":152,"ix":5},"lc":1,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":8},"nm":"\u63CF\u8FB9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.453682005639,0.537254961799,0.526438993566,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"\u586B\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":true},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53D8\u6362"}],"nm":"\u5F62\u72B6 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":20,"s":[0],"e":[100]},{"t":50}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":-40,"s":[12],"e":[100]},{"t":-10}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"\u4FEE\u526A\u8DEF\u5F84 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":51,"st":49,"bm":0},{"ddd":0,"ind":9,"ty":1,"nm":"\u767D\u8272 \u7EAF\u8272 3","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[540,540,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"f","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[64.891,0],[0,0],[0,-62.531],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,-62.531],[0,0],[-68.43,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[452.103,464.491],[126.47,295.776],[774.196,295.776],[854.424,253.92],[854.424,248.582],[744.7,148.297],[146.527,148.297],[36.803,248.582],[36.803,406.679],[301.085,543.539],[854.424,831.418],[1043.197,931.703],[1043.197,772.426],[741.203,614.935]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"\u8499\u7248 1"}],"sw":1080,"sh":1080,"sc":"#000000","ip":0,"op":51,"st":49,"bm":0}],"markers":[]}')},512385:function(e){"use strict";e.exports=JSON.parse('{"v":"5.3.4","fr":60,"ip":0,"op":70,"w":80,"h":80,"nm":"loading_\u526A\u6620\u65B0LOGO_\u8F93\u51FA_w","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"\u7A7A 1","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[40,40,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[7.6,7.6,100],"ix":6}},"ao":0,"ip":0,"op":70,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"\u5F62\u72B6\u56FE\u5C42 4","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[542,-334],[-442,182],[-434.64,294.042],[-428,317],[-403.003,318.91],[212.003,317.075],[237,317],[263.272,300.287],[283,270],[263,-65.063]],"c":false},"ix":2},"nm":"\u8DEF\u5F84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":152,"ix":5},"lc":1,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":8},"nm":"\u63CF\u8FB9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.453682005639,0.537254961799,0.526438993566,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"\u586B\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":true},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53D8\u6362"}],"nm":"\u5F62\u72B6 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":60,"s":[0],"e":[86]},{"t":90}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":0,"s":[0],"e":[86]},{"t":30}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"\u4FEE\u526A\u8DEF\u5F84 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":-9,"op":70,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":1,"nm":"\u767D\u8272 \u7EAF\u8272 2","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[540,540,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"f","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[-68.43,0],[0,0],[0,61.351],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,61.351],[0,0],[64.891,0],[0,0],[0,0],[0,0],[0,0]],"v":[[1043.197,305.214],[1043.197,148.297],[36.803,674.5],[36.803,832.597],[146.527,931.703],[744.7,931.703],[854.424,832.597],[854.424,825.209],[776.555,784.224],[126.47,784.224]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"\u8499\u7248 1"}],"sw":1080,"sh":1080,"sc":"#ffffff","ip":0,"op":70,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"\u5F62\u72B6\u56FE\u5C42 3","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[283,62],[269,-253],[258.14,-289.956],[245.323,-307.636],[229,-317],[-392.01,-319.781],[-417,-316],[-431.668,-297.891],[-439.394,-274.056],[-436,-177],[554,339]],"c":false},"ix":2},"nm":"\u8DEF\u5F84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":152,"ix":5},"lc":1,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":8},"nm":"\u63CF\u8FB9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.453682005639,0.537254961799,0.526438993566,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"\u586B\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":true},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53D8\u6362"}],"nm":"\u5F62\u72B6 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":90,"s":[0],"e":[100]},{"t":120}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":30,"s":[12],"e":[100]},{"t":60}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"\u4FEE\u526A\u8DEF\u5F84 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":30,"op":70,"st":119,"bm":0},{"ddd":0,"ind":5,"ty":1,"nm":"\u767D\u8272 \u7EAF\u8272 3","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[540,540,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"f","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[64.891,0],[0,0],[0,-62.531],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,-62.531],[0,0],[-68.43,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[452.103,464.491],[126.47,295.776],[774.196,295.776],[854.424,253.92],[854.424,248.582],[744.7,148.297],[146.527,148.297],[36.803,248.582],[36.803,406.679],[301.085,543.539],[854.424,831.418],[1043.197,931.703],[1043.197,772.426],[741.203,614.935]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"\u8499\u7248 1"}],"sw":1080,"sh":1080,"sc":"#ffffff","ip":30,"op":70,"st":119,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"\u5F62\u72B6\u56FE\u5C42 2","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[542,-334],[-442,182],[-434.64,294.042],[-428,317],[-403.003,318.91],[212.003,317.075],[237,317],[263.272,300.287],[283,270],[263,-65.063]],"c":false},"ix":2},"nm":"\u8DEF\u5F84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":152,"ix":5},"lc":1,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":8},"nm":"\u63CF\u8FB9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.453682005639,0.537254961799,0.526438993566,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"\u586B\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":true},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53D8\u6362"}],"nm":"\u5F62\u72B6 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":-10,"s":[0],"e":[86]},{"t":20}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":-70,"s":[0],"e":[86]},{"t":-40}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"\u4FEE\u526A\u8DEF\u5F84 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":21,"st":-70,"bm":0},{"ddd":0,"ind":7,"ty":1,"nm":"\u767D\u8272 \u7EAF\u8272 2","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[540,540,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"f","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[-68.43,0],[0,0],[0,61.351],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,61.351],[0,0],[64.891,0],[0,0],[0,0],[0,0],[0,0]],"v":[[1043.197,305.214],[1043.197,148.297],[36.803,674.5],[36.803,832.597],[146.527,931.703],[744.7,931.703],[854.424,832.597],[854.424,825.209],[776.555,784.224],[126.47,784.224]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"\u8499\u7248 1"}],"sw":1080,"sh":1080,"sc":"#ffffff","ip":0,"op":21,"st":-70,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"\u5F62\u72B6\u56FE\u5C42 1","parent":1,"td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[283,62],[269,-253],[258.14,-289.956],[245.323,-307.636],[229,-317],[-392.01,-319.781],[-417,-316],[-431.668,-297.891],[-439.394,-274.056],[-436,-177],[554,339]],"c":false},"ix":2},"nm":"\u8DEF\u5F84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":152,"ix":5},"lc":1,"lj":1,"ml":4,"ml2":{"a":0,"k":4,"ix":8},"nm":"\u63CF\u8FB9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.453682005639,0.537254961799,0.526438993566,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"\u586B\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":true},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53D8\u6362"}],"nm":"\u5F62\u72B6 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":20,"s":[0],"e":[100]},{"t":50}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"n":["0p833_0p833_0p167_0p167"],"t":-40,"s":[12],"e":[100]},{"t":-10}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"\u4FEE\u526A\u8DEF\u5F84 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":51,"st":49,"bm":0},{"ddd":0,"ind":9,"ty":1,"nm":"\u767D\u8272 \u7EAF\u8272 3","parent":1,"tt":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[540,540,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"f","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[64.891,0],[0,0],[0,-62.531],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,-62.531],[0,0],[-68.43,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[452.103,464.491],[126.47,295.776],[774.196,295.776],[854.424,253.92],[854.424,248.582],[744.7,148.297],[146.527,148.297],[36.803,248.582],[36.803,406.679],[301.085,543.539],[854.424,831.418],[1043.197,931.703],[1043.197,772.426],[741.203,614.935]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"\u8499\u7248 1"}],"sw":1080,"sh":1080,"sc":"#ffffff","ip":0,"op":51,"st":49,"bm":0}],"markers":[]}')}},function(e){e.O(0,["6493"],function(){["987","6457","7492","5484"].map(e.E)},5);var t=function(t){return e(e.s=t)};e.O(0,["1618","2178","3115","344","3671","3768","5312","5721","630","6366","640","6485","6975","7178","7259","7722","7901","8100","8386","88","8966","9012","9023","9473","9609","9726","9883"],function(){return t("658683"),t("919515"),t("428651"),t("467336")}),e.O()}]);